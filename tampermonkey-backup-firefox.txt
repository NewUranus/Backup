{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"懒人专用，全网VIP视频免费破解去广告、全网音乐直接下载、百度网盘直接下载等多合一版。长期更新，放心使用。","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_prototypes":false,"noframes":null,"run_at":null,"override":{"use_includes":[],"orig_includes":["*://pan.baidu.com/disk/home*","*://yun.baidu.com/disk/home*","*://pan.baidu.com/s*","*://yun.baidu.com/s*","*://pan.baidu.com/share/*","*://yun.baidu.com/share/*","*.youku.com/v*","*m.youku.com/*","*.iqiyi.com/v_*","*.iqiyi.com/w_*","*.iqiyi.com/a_*","*.iq.com/play/*","*.le.com/ptv/vplay/*","*v.qq.com/x*","*v.qq.com/p*","*v.qq.com/cover*","*v.qq.com/tv/*","*.tudou.com/listplay/*","*.tudou.com/albumplay/*","*.tudou.com/programs/view/*","*.tudou.com/v*","*.mgtv.com/b/*","*tv.sohu.com/*","*film.sohu.com/album/*","*.bilibili.com/video/*","*.bilibili.com/anime/*","*.bilibili.com/bangumi/play/*","*.bilibili.com/s/*","*.pptv.com/show/*","*.wasu.cn/Play/show*","*v.yinyuetai.com/video/*","*v.yinyuetai.com/playlist/*","*://item.taobao.com/*","*://*detail.tmall.com/*","*://*detail.tmall.hk/*","*://*item.jd.com/*","*://*.yiyaojd.com/*","*://*.liangxinyao.com/*","*music.163.com/*","*://y.qq.com/*","*://i.y.qq.com/*","*://*.kugou.com/*","*://*kuwo.cn/*","*://*.xiami.com/*","*://music.taihe.com/song*","*://*.1ting.com/player*","*://music.migu.cn/v*","*://*.lizhi.fm/*","*://*.qingting.fm/*","*://*.ximalaya.com/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":["*://*.eggvod.cn/*"],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_connects":["d.pcs.baidu.com","baidu.com","baidupcs.com","baiduyun.wiki","localhost"]}},"storage":{"ts":1638677976631,"data":{"setting_rpc_domain":"shttp://localhost","setting_rpc_port":"s16800","setting_rpc_token":"s","setting_rpc_dir":"sD:","setting_theme_color":"s#09AAFF","setting_init_code":"s80149","scode":"s"}},"enabled":true,"position":1,"file_url":"https://greasyfork.org/scripts/370634-%E6%87%92%E4%BA%BA%E4%B8%93%E7%94%A8-%E5%85%A8%E7%BD%91vip%E8%A7%86%E9%A2%91%E5%85%8D%E8%B4%B9%E7%A0%B4%E8%A7%A3%E5%8E%BB%E5%B9%BF%E5%91%8A-%E5%85%A8%E7%BD%91%E9%9F%B3%E4%B9%90%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD-%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%E7%AD%89%E5%A4%9A%E5%90%88%E4%B8%80%E7%89%88-%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0-%E6%94%BE%E5%BF%83%E4%BD%BF%E7%94%A8/code/%E6%87%92%E4%BA%BA%E4%B8%93%E7%94%A8%EF%BC%8C%E5%85%A8%E7%BD%91VIP%E8%A7%86%E9%A2%91%E5%85%8D%E8%B4%B9%E7%A0%B4%E8%A7%A3%E5%8E%BB%E5%B9%BF%E5%91%8A%E3%80%81%E5%85%A8%E7%BD%91%E9%9F%B3%E4%B9%90%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%E3%80%81%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%E7%AD%89%E5%A4%9A%E5%90%88%E4%B8%80%E7%89%88%E3%80%82%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0%EF%BC%8C%E6%94%BE%E5%BF%83%E4%BD%BF%E7%94%A8%E3%80%82.user.js","uuid":"320463eb-0ec2-4a7e-b549-b54052c26af8","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDmh5LkurrkuJPnlKjvvIzlhajnvZFWSVDop4bpopHlhY3otLnnoLTop6Pljrvlub/lkYrjgIHlhajnvZHpn7PkuZDnm7TmjqXkuIvovb3jgIHnmb7luqbnvZHnm5jnm7TmjqXkuIvovb3nrYnlpJrlkIjkuIDniYjjgILplb/mnJ/mm7TmlrDvvIzmlL7lv4Pkvb/nlKjjgIIKLy8gQG5hbWVzcGFjZSAJIGxhbmhhaGEKLy8gQHZlcnNpb24gICAgICAzLjcuMgovLyBAZGVzY3JpcHRpb24gIOiHqueUqOe7hOWQiOWei+WkmuWKn+iDveiEmuacrO+8jOaXoOmcgOWFs+azqOWFrOS8l+WPt++8jOmbhuWQiOS6huS8mOmFt+OAgeeIseWlh+iJuuOAgeiFvuiur+OAgeiKkuaenOetieWFqOe9kVZJUOinhumikeWFjei0ueegtOino+WOu+W5v+WRiu+8jOe9keaYk+S6kemfs+S5kOOAgVFR6Z+z5LmQ44CB6YW354uX44CB6YW35oiR44CB6Jm+57Gz44CB6Jy76JyTRk3jgIHojZTmnp1GTeOAgeWWnOmprOaLiembheetiee9keermemfs+S5kOWSjOacieWjsOS5pumfs+mikeWFjeWuouaIt+err+S4i+i9ve+8jOeZvuW6pue9keebmOebtOaOpeS4i+i9ve+8jOS8mOaDoOWIuOafpeivouetieWHoOS4quiHquW3seW4uOeUqOeahOWKn+iDveOAggovLyBAYXV0aG9yICAgICAgIGxhbmhhaGHvvIxzeWh5ejE5OTDvvIx6aG1haQovLyBAaWNvbiAgICAgICAgIGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBR1FBQUFCa0NBWUFBQUJ3NHBWVUFBQVE4RWxFUVZSNFh1MWRDWFFVUlJyK2FwSVFUMXdRdzZFWUJjU0VyQ2dLQ29Rb3dvb2NMaXJLZW9Bb0xENXgyWUR1K2hUQ1BuZGRKZUM1Q3Q2Z0lCdGRsVU1ReEFQRTk1Z01La2Job1dHQ0tNZ3BzUGpVb0VzSWtOcjNUYWRoTXVtZXFlNnVuZ1JJOFNCQVY5ZnhmL1dmOVZlWGdJY2lwY3p5OFBwUi9hb1Fvc3pOQklXVGw2U1V2UUFNQUhBSmdGYllzU3NkSDVlMHdpY2x3TXBWd0s3ZFRwbzdldXBtTkFPNmRRYTZkREordHNqWUNHQUxnR0lBN3dvaCtGT3BLQU1pOSsyN0dZMGFEY1NXN2QzeHl1c3RFQ3BKdzJiMjJWQnFVU0N6TlpCM3lUNk11R2tybW1jc1IyWGxJcEdlUGsrRlVrcUF5RzgyL0JtbnQ3d1d6ODY4QUMrOTJsU2w0WVk2QU5JYkFiZmNzQXQzRGl2QnR1L25pM1p0cGlXaVMxeEE1QTgvZE1lODl3YWc3Vmw5OGVEajUyTG5yaE1UTmRqdzNJSUN6VThyeC8zM3JNV0dEWXN4c085aWNkcHBuOXZSeVJZUXVYdjNJS1NrRE1Da3FUMng4SVBUSVpEZVFHd1BGSkN5QWdPdi9BNzM1Uy9GZnJGUU5QL05CMWF0V1FJaWY5NDdCUHNyQm1QVVg3dWo5T3VtRUVqeE1KU0dWMDBLU0hrQU9lMTM0c1VuUGtKcXlselJ1UEg4V09MVUFrVHUyM2NqRHNvaEdKR2ZpelhoSmczVTlJRUNIVHZzeEt5blAwUmFXcEVRNHQzb0htb0FJcVc4RE1CSTVFL29oMlhMVC9WaEtBMU5taFM0dXY5MkZJNS9DOEFNSWNRaG5WSVRrTTgrZndqck45MkVCeDgvQzBJRUdxam5Jd1VvdmlZV2hIRlc2NW5pd281UG1EMGRBa1R1K3JrdlVnL2VoVDZETDhYLzloM3Y0MUFhbWpZcGNNTHg1WGovelNVUThrblJ0R25FZVR3TXlNTDMvNEhQVncvRkcyKzNnUkJLL2tsU0tkdjVBdUQwRnNEcExRMlBtTVg4ZCt4QUdEVmdLVnNQYlBzZUtQc0dLRm1kMU9FcWRTYmxRZHd3OEN0Y2RORTA4ZnZmUFhNSUVMbGp4M2tRcWVOdzVmWDlVSG1nZmlqeVZpMkFYajJBaXpzQnZTOVZtbC9DU2dUcXMxWEFzcUFCVW4wb2pkSyt4L3R2ekVOS1lKSm8xbXhiaEJOazRXT0RJRlBHb21oT1Z3alJxTTdHZWZKSkJnakQvZ0JrbmVQdk1NZzVzOTRFbGhVRDIzZjQyMWU4MWlWK3dZaWJQNEtRajRoN1JoY2JnSFRyUHhwVnVCM2xQNTlYSjhxYzNIQk5QK0NXd1VEams1TlBuTGNXQTgvT3FCdGdKQTZnVmNzU3BNaW54UWR6WGpVQTZaQlhnS3FxWVJBNEY4bFVIK1NJUHcwM09LSStsTG9BUmxaVkFTaEZWV0M2V0ZjOHhRQWtKL2VmT0lnaEVLTE5ZVFh2TTRXdTdndU1HK09jSXloZXR1MHdkSUZaS0g0SXJzbGQ1RGdxZnlwOS90MUpLZDhEL0h1MndUSEpLRklDRXVzUUNNd1NhNE9GMVNLcjMxVDh1R2NRaEd6bE80ZVFRQk1MREdXdFVxaDhTWHhUSWUvNVJlV3R3M1VJRksweTlzZWZXZTNVM3FlRk5xSFFmK1V2eVJGeUExTHdxaWdOM1c4QTB1K21JbXphM0E4US9vYldlK1VCRThjbjVnb1NmZjY3d1B6RitnbkNCVEY2Qk5BN3orQ3FST1cyTVRXNU1WRjlwODhKaU1CV25IRGNIRkd5OUc0RGtMd0I3MkQzanowaEFpYzRiVSs1L24zNWlYVUZ4ZEV6THh0ZytGMElCa0VoT1BIRUdrVll0LzcramtaaU41bzJXU1JDQzRjYmdIUzgvRU5VVnVZaUlQd0pzVDgwSHJnMnpxVElFUVNDc3JzdUNxMDdBbVBITVRsNS9vNUt5ajFJVFZrbXZseCtqUUZJZHZmbGtYMXlFZERyZzNDQ1V3cmo2d3M2YVFXRmdGUGRvSnRFNUpMeFl3Q0sxZWhDcnIxaXNPN2VhclluNVY1QUJrVjR4WlhWZ1BUNEdFQm5DS1JxN1huR0ZIc3dDTURrS2NrUlQwNG1SVUFJREFINmJEVlFNTkYvLzBSaUg0QlBSTGk0cHdGSVZ2ZVZnTGdRQWFGdkl5cWVtS0xsTkdHaWZvWHRoUEQxcWE2VSt3SHhxUWdYNTVraTYzTWdjTDYyblVINkY1VExWb1ZnM0paZjl5TEtEU0EwbWU4YlkzRDloOHVCQ1pQMHpJUGVPbEFpd3NYZFRFQldRYUlqQWdIdmV5QmsrYW1GUng4WW5ORUhieG9PcDFub3ExdzN3ZzIwTmQrcGtnY0IrWVVvVzNGeGRlZ2tkelVrdk1leEtIZm52bXp0Wnh6Sm5FSHlrVHZtV25qdjlPaHBJWG9wRWdSa3RRaUhPcHNjc2daQURvUkhEckZUNGtjNkdDUTJGOXNTRzdQOHV1SGU5Q0gzUlNEWGlQQ0tDNnNCeWYzU0FNUkRaSkU2ZzdvanR0Q2FvczZvTC9zUFhsYXluVzVrV0dlNHhkeFYrNnFTVlpCWUk5YUZPbFZiV2JsZlFhQ0RhMERvYjFDK1dvWE9HUTlLaHVldE9ua3Y5VGpQZVRPc1BYc3ZJUllwR2ZIOVNvUkQ1eDhHQk9pQWdFc09ZYkNRK3hteGhVNWZmb0VYRXRTL2QrMk1GaTljVWgyQ0YrRVZIVTJsWGdxSmJGY2NZaWRiS2FybzRkYTFCKzRIcERPbkFsMHVxTjJ5V3k2UlVrSmlyU2dML2JZYWtCNXJ3Yk1lYm5TSUhYZlFDNityMkpRZklFUzN5VEQrekNuNkpFSVZOMFdpQWNuS0RWZnZGanJMTnJIVEhUcmlQMnlib1hvbU9IQURpcWJsZ3ZmOEpyVjYrMVpjd2xBTERSaW5oUndpRUJaclF6bW1EaWx6dFgxcloxbnBVT1JXSmpRZHNjbFQvZDJmVUNXbWxWL2kxaWVKQUNMS3hOcmlEdDRBb1JNWW14MmlnenRJbE5LZ1BXa1l0aUF3ZFprdHd0RlJ3VE5zejYxaVdwSVUwMjZLRmtEc2xEbjFodHVCUlU4bUhpQm1QWE1QNVVnM0hBeWx2azZVaGJMZGN3aFhCak5HWW90WHI5VnNUd1VRMXVXT0hoZEFmZEl2VHJta090RkJsSVd5cWdIcHNRNUN0bmVVNEdDbDFPaU5FeEFkUlJVUXN5OHFma1pmbzdOUmRJd2pHVzFvQWNTS1lMckVWU0lkRW85SWROQm9WQ1JidnpDdDZacit3SjQ5UmdxUmsxQlJMVUN5ZTN3TkljK0p5cjJPdnk3czdIQjY1ZlRPZFJRcndHbFdxdVphTVUyVWhFbUdmb20xTmlsR0daWlhYUlFSUU1UWG9xejRYSE1MMXhrZ2R1YXV6bVFBSzBCTXM1TDZpMk5JbE1aRHdsRHhGODNSc1VUczI3QVMzNDVNNEFnZzYwVzR1TDBaN1YwUG9KMnlEckZTNkxyTTNYaEtQWHFTQklQUlY2c1lXaXpwL05ZdlZvRFFES2JvVkNwZUFkSHBwZG9OT0I2SFJMOURCMjNjV092WVVtemIxQzhQVDNFbTMxVUl5aDNTMkd3VkoxNTdKSEtDYjBRNGRJNjVRZlVOSU5vcWM0aG5GbFdZcFNvZ1psUFVhNFVGYXJtOFRLcCtlS28rL1dJbE1jaVZmUlNUeUQwREVydTNUS0k0a3BrK0FHSTJtU2pwemF5bk02bmF6aWRUMWFrUlFPUzNJcnlpblRzT2NicDZGZWhmcTRxWFBxaGZUTVdmcUcrdVpJWmh2RmlIMUdPTWVzZVdPZ1ZFZDdqZEN5QW1ZUmplS1p5Z3JsL0dGTGdUWTNadVFBTWdOdXlncWwvYzd2cHBCeVFyOTF0SGgzVjByTjVFb3NTUFB1ejhwK2l4cUs3cTZIZTgrbVhWWjBSRVdhaXRHVnc4K2dGaGFDTVNLbzlLZEl0ZEZQVHF1MXJrQmlSYVBKNlZ1bkZveHowZ1ZtYXZ6amdXQ2FDTFF5aE9HSlZXT2JIbGRtUE5DaEFuZ1ZZTER0a0FnYk05K1NGT0hLRkVLNDdQbVNVWWUvek1TUklCRlRxQmlIY3V4UndIeHo3NUtmY09vdzdIVUdLaktBdTFNVVdXTTBDOE9rSXFnTVNtMjZpdU9KcThsT2txUjZ3WjdwazB4WnZKRzFrOEZqdW5Ua0luUnJUWEF5QjJTb3p5VjJkMGxhdWNLNXkrZ2txeUhVRWNseDlmVDVDQUhDTkZMQ1BDT3NackpWNGR1UUhWZ0lSTkRzbk9OVGhFOVV5MFhlS3h6dkM3Q2hlWmRhS1BDU1I2ajhBeUFxd2FHay9VbnAzSjYwUzh3aXNnZGtwWHAyS242T0ZCVVI3TWpCd0duVkZidEpoMVZQVUVnZEM5bytqVndpSXRqZERKZHlLODRtd3pkTElSRVB4R1ZxTDFjUGk1bFNKekVsQkwxSk5WWWpNekljMlZUWVd0b2lmOFBqcG5wVDlVOVoxSkF5MkEyT2tSWFVrT1ZnRk15bVYreFVGRlQzQ3lESGpxMGhOV0M4Z3U4OGFSL2lCelJOaGtrd2lIem5MUElYV1JCc1FJcmNySGFSZ29wUFdrUzAvWWNiUGQ4UVNuaTdJMklMbmZBU0pUVmFjZkdwK1ZyMENpY1IvQXEvWGlOT3VFZzZLbzRPclVyU2ZzQUxIaVlqYzdwOForeUdZUkRtV2FXN2p1QUxFTE96dGxXYXNKT3dIRWJ6MWhOVDZkYzljR0NLMGNIdk9LVFRiUXdTV3FnTkN5by9Ya2xTTVRHUm14ejYyNHcrMFJEQXRBTmdFNDA1R1ZaUTdRenV6enVvT1lDSkJrSGVxM0FzcHV6azY4OCtoMnRRSVNqMHVjNUNiRlR0enVVQXhsTkQvRmtTdzlFVHV1ZUNlTm84MXlKeHluRlJCMmJMZGkzRzc0c00zWVdGWmRmNkRHSlBDVWlkWWY1ZlFpRVF4QXRvaHc2RXhUcWJzWFdXektqa3Y0VEllQ2Q3TGEvS3diNzZTeGwrTjdCaURiUkRoMGhoNUFyRlowTkdHYzJ1VitFdFZ0MjNieE8yMkxUdTVBYWZIbCtnRGh3T3prdmc2cnl5MGhkYnhIQ2NBUWlkVnVvODU5b05KZzlkZUFzbk0zQTJqdHlzcUtubkE4MGVWRm4rZ2dxdHMyT0NjZThMVDZqakQxMnFEaCtpSUNwY0hyVFE3UkF3Z25iUmVPNWpPM1ZvaGJZbnA5THg0WWJGdjNka05wY0tRSnlGWitTZDB6aDVnRXNJdnhIRW1BSkFMRGkxVmx0MUJLZzNlTHlGMkVPVDArQW9UREQ5ekdXWDY2WWp4ZVY3amI5Nm5BZVFyWUxwRHAxZ0ZNTko3UzRMMEVwQzl5OHZSOUJ0VE9HamxTek4raDF3UGp4OXFUemk4dzJHTnA4TzhFNURyazVPazcwWEtraWl1VkR6ejdDWVlCeUdRQ2NpdHk4bVltNGlibDUxYml5bW9ITFhvZjNNeEVaNkF3MlVGQ00wdUYwWVo0eFc4d0RFQ2VJQ0Nqa0pQM25ETEI0MVZVRVZmeENHQUN3OG43dmJua0pGMG9XZUsyTlBnMEFma0xjdkllMXdKSUluR2xtcWJEd2ZCckRRU0c5M3ZvTEx5ZmhPTlFTWXdndDlLMFRWWWdzelQ0QWdFWmg1eThTVnJtYkNldThzY2IrK0J1YnNvaDEzeklHM0hXdTd1NmlMcUJuMUtpZjhRTUZwVXRZQktqTGo3d1hCcWNRVUR1eHdXOUhzRCsvZDR3c1JOWEpDU0pva29JbFZHd3pmSmZqRFBoVnVmQlNmekdKN203cFVkWE5xUEtQS0xycEtVQnE1Y1ZFWkNIY09uQUNmamhSNmROMUt4djk5MnNSSzJTQUpUbmlZNDRKMnJINjNNem05SHJGMGJkanVQVUpzRHl0LzlEUUI3R29OdnV4YnB2M1RabHZQZnhZdWRjWUticDhIMlZtd3E4amRENmJTNEk2aW8vMDRWVXhuMXVXMkRlekRrRTVFbmtqeC9yU1huRyszaXkxV0RpYmI5R0ZHNC9RK2I3eVRYVUVkUk5Lam5ES2dUMVdxZHZMK0R4QitZVGtLY3hyV2cwbm56QmZaT3E0c3BwZGdqQkllZndiSWZUcTR0aVowTk9NRy9wSVJESjluY1NVZGU0WDJVUkFYa2VLMWZkNGVtN3N5cml5dnpBbDF0Q2tGc1lBcWZ4d0gySjZIQzR5VW5SYlZQeDg5OEVnU211ZnZzMWlRaWU2UG1jbDc1SGR2dDdqT0JpWmVVaVhEVzBiV1RnVGt1OGNEdmJTbmJ5bXRQeDE0ZjZ6VE1xc09UTmxTSTE5VElqL0M3bFhEdzFyVGRlbkhXSzQvSEYrMHlzbVRQbHVORmo2QVYrVFc3VXJadHg4Zm12aTI2WGpETUEyYnYzanlqZk14SlgzdEFKbGZ1ZFgzc1VxME9TbFZ0N05PRFdLTzBYTEptOURBSlBpV2JObGgwNmZ5QVhMWjJJTDFiZmhOZmV5a1NnNGVydXBHRE5LN3lIRGk1RHAvTmVFZjE3UDhZK0R3TlNYcDZIQTNKVTVJTGlYL2ZXand1S2swS1ZPdXprbE1ZNzhVN1JBaHc0OEx6SXlJamNsRm5qaEk3ODRzdGI4TjJXa1NpWTJBVUIwWENudXA5WThXYTJTWDlianN6TTZhSlRoL2xtVjdXT1RNbG5YaHFIcmR1SFlzRjc3UUdSNXVlWWp0bTJxK1JlRExwcUZWcTNtQ251SEQ0dG1nNjFBZm4xMTA0UWFiZGh4T2hCV0JNKzQ1Z2xtbDhUbDdJQ0hiUFg0dFFtUmVMWlIvOFYyNDNsb1VMNVUwVWZ5TXFodVAydVBsajdkWE8veG5iTXRVc3djckxLSU1Scll2YjBSNjNtYjN2S1U1YVhYNFBVdE1HNGYzSlBMRnJhWE91VmVzY2NFaEZuYnkvNlgxR0duOHJmRUM4OThiQWRDZUlldTVVVkZRT1FudDRmeXovdWlYODhjaVoyL1BkRVYxZGFISXNBUk04NW85a2VQSER2bDFpL2NZNFlPYVNXbUlxclEySnBKNlhzakEwYmVxTmx5MXc4TnpNYjA0c3lBSEdpY2VlaGcyUFV4eUlvdkE1djFMQWZjTWV3RW16YnRVQzB5M3d4RVJtVUtTcjM3KytGSmNFZXlNbnFpRm12WjJMRnlpYll1T1ZrQ0J3UGlVWUlJQURKMzFKVVowQkd0MjM4blg5R011K2pqYnpxL3pCcjEzcHUxcTN4SU5HODZ2WjVabXNndDBzRmJyMXhNMXEzQ3FLeWNyRklUNStuTWlobFFBNlJaZXZXcnBnK3V3TXltbVJpVUwrV0NINmFnYzlXTmNiS0w0N0R6dDFwZ0V3RkJNRkpRUUFDVmVCbGxRSkVpYjhncTM4VG5NaVhDZzZERmVtRXp3OEJWaHRVbFZrNXIrT1lEalc2YU5FYzZOb0o2SEloMFBVaW9HWHpDZ0NiVUY0ZVJPUEdpNFVRSmFwRDhqWVExVjRhNmlsVDRQK0dDNU9sK3hJS253QUFBQUJKUlU1RXJrSmdnZz09Ci8vIEBpbmNsdWRlICAgICAgKjovL3Bhbi5iYWlkdS5jb20vZGlzay9ob21lKgovLyBAaW5jbHVkZSAgICAgICo6Ly95dW4uYmFpZHUuY29tL2Rpc2svaG9tZSoKLy8gQGluY2x1ZGUgICAgICAqOi8vcGFuLmJhaWR1LmNvbS9zKgovLyBAaW5jbHVkZSAgICAgICo6Ly95dW4uYmFpZHUuY29tL3MqCi8vIEBpbmNsdWRlICAgICAgKjovL3Bhbi5iYWlkdS5jb20vc2hhcmUvKgovLyBAaW5jbHVkZSAgICAgICo6Ly95dW4uYmFpZHUuY29tL3NoYXJlLyoKLy8gQGluY2x1ZGUgICAgICAqLnlvdWt1LmNvbS92KgovLyBAaW5jbHVkZSAgICAgICptLnlvdWt1LmNvbS8qCi8vIEBpbmNsdWRlICAgICAgKi5pcWl5aS5jb20vdl8qCi8vIEBpbmNsdWRlICAgICAgKi5pcWl5aS5jb20vd18qCi8vIEBpbmNsdWRlICAgICAgKi5pcWl5aS5jb20vYV8qCi8vIEBpbmNsdWRlICAgICAgKi5pcS5jb20vcGxheS8qCi8vIEBpbmNsdWRlICAgICAgKi5sZS5jb20vcHR2L3ZwbGF5LyoKLy8gQGluY2x1ZGUgICAgICAqdi5xcS5jb20veCoKLy8gQGluY2x1ZGUgICAgICAqdi5xcS5jb20vcCoKLy8gQGluY2x1ZGUgICAgICAqdi5xcS5jb20vY292ZXIqCi8vIEBpbmNsdWRlICAgICAgKnYucXEuY29tL3R2LyoKLy8gQGluY2x1ZGUgICAgICAqLnR1ZG91LmNvbS9saXN0cGxheS8qCi8vIEBpbmNsdWRlICAgICAgKi50dWRvdS5jb20vYWxidW1wbGF5LyoKLy8gQGluY2x1ZGUgICAgICAqLnR1ZG91LmNvbS9wcm9ncmFtcy92aWV3LyoKLy8gQGluY2x1ZGUgICAgICAqLnR1ZG91LmNvbS92KgovLyBAaW5jbHVkZSAgICAgICoubWd0di5jb20vYi8qCi8vIEBpbmNsdWRlICAgICAgKnR2LnNvaHUuY29tLyoKLy8gQGluY2x1ZGUgICAgICAqZmlsbS5zb2h1LmNvbS9hbGJ1bS8qCi8vIEBpbmNsdWRlICAgICAgKi5iaWxpYmlsaS5jb20vdmlkZW8vKgovLyBAaW5jbHVkZSAgICAgICouYmlsaWJpbGkuY29tL2FuaW1lLyoKLy8gQGluY2x1ZGUgICAgICAqLmJpbGliaWxpLmNvbS9iYW5ndW1pL3BsYXkvKgovLyBAaW5jbHVkZSAgICAgICouYmlsaWJpbGkuY29tL3MvKgovLyBAaW5jbHVkZSAgICAgICoucHB0di5jb20vc2hvdy8qCi8vIEBpbmNsdWRlICAgICAgKi53YXN1LmNuL1BsYXkvc2hvdyoKLy8gQGluY2x1ZGUgICAgICAqdi55aW55dWV0YWkuY29tL3ZpZGVvLyoKLy8gQGluY2x1ZGUgICAgICAqdi55aW55dWV0YWkuY29tL3BsYXlsaXN0LyoKLy8gQGluY2x1ZGUgICAgICAqOi8vaXRlbS50YW9iYW8uY29tLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKmRldGFpbC50bWFsbC5jb20vKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qZGV0YWlsLnRtYWxsLmhrLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKml0ZW0uamQuY29tLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKi55aXlhb2pkLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgKjovLyoubGlhbmd4aW55YW8uY29tLyoKLy8gQGluY2x1ZGUgICAgICAqbXVzaWMuMTYzLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgKjovL3kucXEuY29tLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vaS55LnFxLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgKjovLyoua3Vnb3UuY29tLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKmt1d28uY24vKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLnhpYW1pLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgKjovL211c2ljLnRhaWhlLmNvbS9zb25nKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLjF0aW5nLmNvbS9wbGF5ZXIqCi8vIEBpbmNsdWRlICAgICAgKjovL211c2ljLm1pZ3UuY24vdioKLy8gQGluY2x1ZGUgICAgICAqOi8vKi5saXpoaS5mbS8qCi8vIEBpbmNsdWRlICAgICAgKjovLyoucWluZ3RpbmcuZm0vKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLnhpbWFsYXlhLmNvbS8qCi8vIEBleGNsdWRlICAgICAgKjovLyouZWdndm9kLmNuLyoKLy8gQGNvbm5lY3QgICAgICBkLnBjcy5iYWlkdS5jb20KLy8gQGNvbm5lY3QgICAgICBiYWlkdS5jb20KLy8gQGNvbm5lY3QgICAgICBiYWlkdXBjcy5jb20KLy8gQGNvbm5lY3QgICAgICBiYWlkdXl1bi53aWtpCi8vIEBjb25uZWN0ICAgICAgbG9jYWxob3N0Ci8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9qcXVlcnlAMy4yLjEvZGlzdC9qcXVlcnkubWluLmpzCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9zd2VldGFsZXJ0MkAxMC4xNi42L2Rpc3Qvc3dlZXRhbGVydDIuYWxsLm1pbi5qcwovLyBAb3JpZ2luYWwtc2NyaXB0IGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy8zNzYwNzgKLy8gQG9yaWdpbmFsLWF1dGhvciB6aG1haQovLyBAb3JpZ2luYWwtbGljZW5zZSBHUEwgTGljZW5zZQovLyBAb3JpZ2luYWwtc2NyaXB0IGh0dHBzOi8vZ2l0aHViLmNvbS9zeWh5ejE5OTAvYmFpZHV5dW4vYmxvYi9tYXN0ZXIvYmFpZHV5dW4udXNlci5qcwovLyBAb3JpZ2luYWwtYXV0aG9yIHlvdXhpYW9ob3UKLy8gQG9yaWdpbmFsLWxpY2Vuc2UgQUdQTCBMaWNlbnNlCi8vIEBvcmlnaW5hbC1jaGFuZ2VzIDEs5bCG5by65Yi25YWz5rOo5YWs5LyX5Y+35pS55Li66Z2e5by65Yi244CCMizlsIblhazkvJflj7flm77niYfmlLnkuLrmloflrZfjgIIzLOWIoOmZpOS6huiuvue9rueahGljb27lm77moIfjgIIKLy8gQGFudGlmZWF0dXJlICByZWZlcnJhbC1saW5rIOatpOaPkOekuuS4ukdyZWFzeUZvcmvku6PnoIHop4TojIPopoHmsYLlkKvmnInmn6XliLjlip/og73nmoTohJrmnKzlv4Xpobvmt7vliqDvvIzlrp7pmYXkvb/nlKjml6Dku7vkvZXlvLrliLbot7PovazvvIzku6PnoIHlj6/mn6XvvIzor7fnn6XmgonjgIIKLy8gQGxpY2Vuc2UgICAgICBBR1BMIExpY2Vuc2UKLy8gQGdyYW50ICAgICAgICBHTV9kb3dubG9hZAovLyBAZ3JhbnQgICAgICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgIEdNX2FkZFN0eWxlCi8vIEBncmFudCAgICAgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICAgICAgR01fc2V0Q2xpcGJvYXJkCi8vIEBncmFudCAgICAgICAgR01fZ2V0UmVzb3VyY2VVUkwKLy8gQGdyYW50ICAgICAgICBHTV9nZXRSZXNvdXJjZVRleHQKLy8gQGdyYW50ICAgICAgICBHTV9pbmZvCi8vIEBncmFudCAgICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgICAgICAgIEdNX2Nvb2tpZQovLyBAcnVuLWF0ICAgICAgIGRvY3VtZW50LWlkbGUKLy8gPT0vVXNlclNjcmlwdD09CgovL+eZvuW6pue9keebmAooZnVuY3Rpb24oKSB7CnZhciBwYW5fdGl0bGU9bmV3IEFycmF5KCkKCQlwYW5fdGl0bGVbMF09ICJodHRwczovL3Bhbi5iYWlkdS5jb20vIgoJCXBhbl90aXRsZVsxXT0gImh0dHBzOi8veXVuLmJhaWR1LmNvbS8iCiAgICAgICAgbGV0IHBhbl9saW5rID0gbG9jYXRpb24uaHJlZjsKCQlmb3IodmFyIGE9MDthPHBhbl90aXRsZS5sZW5ndGg7YSsrKXsKCQkJaWYocGFuX2xpbmsuaW5kZXhPZihwYW5fdGl0bGVbYV0pIT0gLTEpewogICAgICAgICAgICAgICAgcGFuX2xpbmsgPSBwYW5fbGluay5yZXBsYWNlKCdiYWlkdS5jb20nLCdiYWlkdXdwLmNvbScpOwoJCQkJdmFyIHBhbl9odG1sID0gIjxhIGhyZWY9IitwYW5fbGluaysiIHRhcmdldD0nX2JsYW5rJyBzdHlsZT0nY3Vyc29yOnBvaW50ZXI7ei1pbmRleDo5ODtkaXNwbGF5OmJsb2NrO3dpZHRoOjMwcHg7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtwb3NpdGlvbjpmaXhlZDtsZWZ0OjA7dG9wOjMwMHB4O3RleHQtYWxpZ246Y2VudGVyOyc+PGltZyBzcmM9J2h0dHBzOi8vd3d3LmVnZ3ZvZC5jbi9pbWFnZXMvdmlwLnBuZycgc3R5bGU9J3dpZHRoOjUwcHgnID48L2E+IjsKCQkJCSQoImJvZHkiKS5hcHBlbmQocGFuX2h0bWwpOwoKLy/nmb7luqbnvZHnm5johJrmnKzlvIDlp4sKLy8KKGZ1bmN0aW9uICgpIHsKICAgICd1c2Ugc3RyaWN0JzsKCiAgICBsZXQgcHQgPSAnJywgc2VsZWN0TGlzdCA9IFtdLCBwYXJhbXMgPSB7fSwgbW9kZSA9ICcnLCB3aWR0aCA9IDgwMCwgcGFuID0ge30sIGNvbG9yID0gJycsCiAgICAgICAgZG9jID0gJChkb2N1bWVudCksIHByb2dyZXNzID0ge30sIHJlcXVlc3QgPSB7fSwgaW5zID0ge30sIGlkbSA9IHt9OwogICAgY29uc3Qgc2NyaXB0SW5mbyA9IEdNX2luZm8uc2NyaXB0OwogICAgY29uc3QgdmVyc2lvbiA9ICc1LjEuMyc7CiAgICBjb25zdCBhdXRob3IgPSAnWW91WGlhb0hvdSc7CiAgICBjb25zdCBuYW1lID0gJ+e9keebmOebtOmTvuS4i+i9veWKqeaJiyc7CiAgICBjb25zdCBjdXN0b21DbGFzcyA9IHsKICAgICAgICBjb250YWluZXI6ICdwbC1jb250YWluZXInLAogICAgICAgIHBvcHVwOiAncGwtcG9wdXAnLAogICAgICAgIGhlYWRlcjogJ3BsLWhlYWRlcicsCiAgICAgICAgdGl0bGU6ICdwbC10aXRsZScsCiAgICAgICAgY2xvc2VCdXR0b246ICdwbC1jbG9zZScsCiAgICAgICAgaWNvbjogJ3BsLWljb24nLAogICAgICAgIGltYWdlOiAncGwtaW1hZ2UnLAogICAgICAgIGNvbnRlbnQ6ICdwbC1jb250ZW50JywKICAgICAgICBodG1sQ29udGFpbmVyOiAncGwtaHRtbCcsCiAgICAgICAgaW5wdXQ6ICdwbC1pbnB1dCcsCiAgICAgICAgaW5wdXRMYWJlbDogJ3BsLWlucHV0TGFiZWwnLAogICAgICAgIHZhbGlkYXRpb25NZXNzYWdlOiAncGwtdmFsaWRhdGlvbicsCiAgICAgICAgYWN0aW9uczogJ3BsLWFjdGlvbnMnLAogICAgICAgIGNvbmZpcm1CdXR0b246ICdwbC1jb25maXJtJywKICAgICAgICBkZW55QnV0dG9uOiAncGwtZGVueScsCiAgICAgICAgY2FuY2VsQnV0dG9uOiAncGwtY2FuY2VsJywKICAgICAgICBsb2FkZXI6ICdwbC1sb2FkZXInLAogICAgICAgIGZvb3RlcjogJ3BsLWZvb3RlcicKICAgIH07CgogICAgbGV0IHRvYXN0ID0gU3dhbC5taXhpbih7CiAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgcG9zaXRpb246ICd0b3AnLAogICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICB0aW1lcjogMzUwMCwKICAgICAgICB0aW1lclByb2dyZXNzQmFyOiBmYWxzZSwKICAgICAgICBkaWRPcGVuOiAodG9hc3QpID0+IHsKICAgICAgICAgICAgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIFN3YWwuc3RvcFRpbWVyKTsKICAgICAgICAgICAgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIFN3YWwucmVzdW1lVGltZXIpOwogICAgICAgIH0KICAgIH0pOwoKICAgIGxldCB1dGlsID0gewogICAgICAgIGNsb2coYykgewogICAgICAgICAgICBjb25zb2xlLmdyb3VwKGBbJHtuYW1lfV1gKTsKICAgICAgICAgICAgY29uc29sZS5sb2coYyk7CiAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKTsKICAgICAgICB9LAogICAgICAgIGdldENvb2tpZShuYW1lKSB7CiAgICAgICAgICAgIGxldCBhcnIgPSBkb2N1bWVudC5jb29raWUucmVwbGFjZSgvXHMvZywgIiIpLnNwbGl0KCc7Jyk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgICAgICAgbGV0IHRlbXBBcnIgPSBhcnJbaV0uc3BsaXQoJz0nKTsKICAgICAgICAgICAgICAgIGlmICh0ZW1wQXJyWzBdID09IG5hbWUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHRlbXBBcnJbMV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9LAogICAgICAgIGdldFZhbHVlKG5hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIEdNX2dldFZhbHVlKG5hbWUpOwogICAgICAgIH0sCiAgICAgICAgc2V0VmFsdWUobmFtZSwgdmFsdWUpIHsKICAgICAgICAgICAgR01fc2V0VmFsdWUobmFtZSwgdmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgZ2V0U3RvcmFnZShrZXkpIHsKICAgICAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7CiAgICAgICAgfSwKICAgICAgICBzZXRTdG9yYWdlKGtleSwgdmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgc2V0Q2xpcGJvYXJkKHRleHQpIHsKICAgICAgICAgICAgR01fc2V0Q2xpcGJvYXJkKHRleHQsICd0ZXh0Jyk7CiAgICAgICAgfSwKICAgICAgICBlKHN0cikgewogICAgICAgICAgICByZXR1cm4gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3RyKSkpOwogICAgICAgIH0sCiAgICAgICAgZChzdHIpIHsKICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoYXRvYihzdHIpKSk7CiAgICAgICAgfSwKICAgICAgICBzZXRCRFVTUygpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIEdNX2Nvb2tpZSAmJiBHTV9jb29raWUoJ2xpc3QnLCB7bmFtZTogJ0JEVVNTJ30sIChjb29raWVzLCBlcnJvcikgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdG9yYWdlKCJiYWlkdXl1blBsdWdpbl9CRFVTUyIsIEpTT04uc3RyaW5naWZ5KHtCRFVTUzogY29va2llc1swXS52YWx1ZX0pKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewoKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZ2V0QkRVU1MoKSB7CiAgICAgICAgICAgIGxldCBiYWlkdXl1blBsdWdpbl9CRFVTUyA9IHRoaXMuZ2V0U3RvcmFnZSgnYmFpZHV5dW5QbHVnaW5fQkRVU1MnKSA/IHRoaXMuZ2V0U3RvcmFnZSgnYmFpZHV5dW5QbHVnaW5fQkRVU1MnKSA6ICd7ImJhaWR1eXVuUGx1Z2luX0JEVVNTIjoiIn0nOwogICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShiYWlkdXl1blBsdWdpbl9CRFVTUykuQkRVU1MgfHwgJyc7CiAgICAgICAgfSwKICAgICAgICBnZXRFeHRlbnNpb24obmFtZSkgewogICAgICAgICAgICBjb25zdCByZWcgPSAvKD8hXC4pXHcrJC87CiAgICAgICAgICAgIGlmIChyZWcudGVzdChuYW1lKSkgewogICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gbmFtZS5tYXRjaChyZWcpOwogICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoWzBdLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgIH0sCiAgICAgICAgc2l6ZUZvcm1hdCh2YWx1ZSkgewogICAgICAgICAgICBpZiAodmFsdWUgPT09ICt2YWx1ZSkgewogICAgICAgICAgICAgICAgbGV0IHVuaXQgPSBbIkIiLCAiS0IiLCAiTUIiLCAiR0IiLCAiVEIiLCAiUEIiLCAiRUIiLCAiWkIiLCAiWUIiXTsKICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5sb2coMTAyNCkpOwogICAgICAgICAgICAgICAgbGV0IHNpemUgPSB2YWx1ZSAvIE1hdGgucG93KDEwMjQsIGluZGV4KTsKICAgICAgICAgICAgICAgIHNpemUgPSBzaXplLnRvRml4ZWQoMSk7CiAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZSArIHVuaXRbaW5kZXhdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9LAogICAgICAgIHNvcnRCeU5hbWUoYXJyKSB7CiAgICAgICAgICAgIGNvbnN0IGhhbmRsZSA9ICgpID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiAgKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwMSA9IGEuZmlsZW5hbWUgPyBhLmZpbGVuYW1lIDogYS5zZXJ2ZXJfZmlsZW5hbWU7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcDIgPSBiLmZpbGVuYW1lID8gYi5maWxlbmFtZSA6IGIuc2VydmVyX2ZpbGVuYW1lOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBwMS5sb2NhbGVDb21wYXJlKHAyLCAiemgtQ04iKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGFyci5zb3J0KGhhbmRsZSgpKTsKICAgICAgICB9LAogICAgICAgIGNvbnZlcnRMaW5rVG9BcmlhKGxpbmssIGZpbGVuYW1lLCB1YSkgewogICAgICAgICAgICBsZXQgQkRVU1MgPSB1dGlsLmdldEJEVVNTKCk7CiAgICAgICAgICAgIGZpbGVuYW1lID0gZmlsZW5hbWUucmVwbGFjZSgnICcsICdfJyk7CiAgICAgICAgICAgIGlmICghIUJEVVNTKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGBhcmlhMmMgIiR7bGlua30iIC0tb3V0ICIke2ZpbGVuYW1lfSIgLS1oZWFkZXIgIlVzZXItQWdlbnQ6ICR7dWF9IiAtLWhlYWRlciAiQ29va2llOiBCRFVTUz0ke0JEVVNTfSJgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgbGluazogcGFuLmFzc2lzdGFudCwKICAgICAgICAgICAgICAgIHRleHQ6IHBhbi5pbml0WzVdCiAgICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBjb252ZXJ0TGlua1RvQ3VybChsaW5rLCBmaWxlbmFtZSwgdWEpIHsKICAgICAgICAgICAgbGV0IEJEVVNTID0gdXRpbC5nZXRCRFVTUygpOwogICAgICAgICAgICBmaWxlbmFtZSA9IGZpbGVuYW1lLnJlcGxhY2UoJyAnLCAnXycpOwogICAgICAgICAgICBpZiAoISFCRFVTUykgewogICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChgY3VybCAtTCAiJHtsaW5rfSIgLS1vdXRwdXQgIiR7ZmlsZW5hbWV9IiAtQSAiJHt1YX0iIC1iICJCRFVTUz0ke0JEVVNTfSJgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgbGluazogcGFuLmFzc2lzdGFudCwKICAgICAgICAgICAgICAgIHRleHQ6IHBhbi5pbml0WzVdCiAgICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBibG9iRG93bmxvYWQoYmxvYiwgZmlsZW5hbWUpIHsKICAgICAgICAgICAgaWYgKGJsb2IgaW5zdGFuY2VvZiBCbG9iKSB7CiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgICAgICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsKICAgICAgICAgICAgICAgIGEuY2xpY2soKTsKICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2V0SW50KG5hbWUsIHRpbWUpIHsKICAgICAgICAgICAgdGltZSA9IHRpbWUgfHwgMTAwOwogICAgICAgICAgICBsZXQgaSA9IDA7CiAgICAgICAgICAgIGlmICgkKG5hbWUpLmxlbmd0aCkgcmV0dXJuOwogICAgICAgICAgICBsZXQgaW5zID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgaWYgKCQobmFtZSkubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnMpOwogICAgICAgICAgICAgICAgICAgICQobmFtZSkucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoaSA+IDYwKSBjbGVhckludGVydmFsKGlucyk7CiAgICAgICAgICAgIH0sIHRpbWUpOwogICAgICAgIH0sCiAgICAgICAgc2xlZXAodGltZSkgewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZSkpOwogICAgICAgIH0sCiAgICAgICAgbWVzc2FnZTogewogICAgICAgICAgICBzdWNjZXNzKHRleHQpIHsKICAgICAgICAgICAgICAgIHRvYXN0LmZpcmUoe3RpdGxlOiB0ZXh0LCBpY29uOiAnc3VjY2Vzcyd9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3IodGV4dCkgewogICAgICAgICAgICAgICAgdG9hc3QuZmlyZSh7dGl0bGU6IHRleHQsIGljb246ICdlcnJvcid9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgd2FybmluZyh0ZXh0KSB7CiAgICAgICAgICAgICAgICB0b2FzdC5maXJlKHt0aXRsZTogdGV4dCwgaWNvbjogJ3dhcm5pbmcnfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGluZm8odGV4dCkgewogICAgICAgICAgICAgICAgdG9hc3QuZmlyZSh7dGl0bGU6IHRleHQsIGljb246ICdpbmZvJ30pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBxdWVzdGlvbih0ZXh0KSB7CiAgICAgICAgICAgICAgICB0b2FzdC5maXJlKHt0aXRsZTogdGV4dCwgaWNvbjogJ3F1ZXN0aW9uJ30pOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBwb3N0KHVybCwgZGF0YSwgaGVhZGVycywgdHlwZSkgewogICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGRhdGEpID09PSAnW29iamVjdCBPYmplY3RdJykgewogICAgICAgICAgICAgICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsIHVybCwgaGVhZGVycywgZGF0YSwKICAgICAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6IHR5cGUgfHwgJ2pzb24nLAogICAgICAgICAgICAgICAgICAgIG9ubG9hZDogKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlID09PSAnYmxvYicgPyByZXNvbHZlKHJlcykgOiByZXNvbHZlKHJlcy5yZXNwb25zZSB8fCByZXMucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IChlcnIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGdldCh1cmwsIGhlYWRlcnMsIHR5cGUsIGV4dHJhKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgcmVxdWVzdE9iaiA9IEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLCB1cmwsIGhlYWRlcnMsCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiB0eXBlIHx8ICdqc29uJywKICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwNCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE9iai5hYm9ydCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRtW2V4dHJhLmluZGV4XSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdibG9iJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyA9PT0gMjAwICYmIHV0aWwuYmxvYkRvd25sb2FkKHJlcy5yZXNwb25zZSwgZXh0cmEuZmlsZW5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMucmVzcG9uc2UgfHwgcmVzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9ucHJvZ3Jlc3M6IChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4dHJhICYmIGV4dHJhLmZpbGVuYW1lICYmIGV4dHJhLmluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMudG90YWwgPiAwID8gcHJvZ3Jlc3NbZXh0cmEuaW5kZXhdID0gKHJlcy5sb2FkZWQgKiAxMDAgLyByZXMudG90YWwpLnRvRml4ZWQoMikgOiBwcm9ncmVzc1tleHRyYS5pbmRleF0gPSAwLjAwOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbmxvYWRzdGFydCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEgJiYgZXh0cmEuZmlsZW5hbWUgJiYgZXh0cmEuaW5kZXggJiYgKHJlcXVlc3RbZXh0cmEuaW5kZXhdID0gcmVxdWVzdE9iaik7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbmVycm9yOiAoZXJyKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBhZGRTdHlsZShpZCwgdGFnLCBjc3MpIHsKICAgICAgICAgICAgdGFnID0gdGFnIHx8ICdzdHlsZSc7CiAgICAgICAgICAgIGxldCBkb2MgPSBkb2N1bWVudCwgc3R5bGVEb20gPSBkb2MuZ2V0RWxlbWVudEJ5SWQoaWQpOwogICAgICAgICAgICBpZiAoc3R5bGVEb20pIHJldHVybjsKICAgICAgICAgICAgbGV0IHN0eWxlID0gZG9jLmNyZWF0ZUVsZW1lbnQodGFnKTsKICAgICAgICAgICAgc3R5bGUucmVsID0gJ3N0eWxlc2hlZXQnOwogICAgICAgICAgICBzdHlsZS5pZCA9IGlkOwogICAgICAgICAgICB0YWcgPT09ICdzdHlsZScgPyBzdHlsZS5pbm5lckhUTUwgPSBjc3MgOiBzdHlsZS5ocmVmID0gY3NzOwogICAgICAgICAgICBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChzdHlsZSk7CiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgcGFubGlua2VyID0gewogICAgICAgIGluaXRWYWx1ZSgpIHsKICAgICAgICAgICAgbGV0IHZhbHVlID0gW3sKICAgICAgICAgICAgICAgIG5hbWU6ICdzZXR0aW5nX3JwY19kb21haW4nLAogICAgICAgICAgICAgICAgdmFsdWU6ICdodHRwOi8vbG9jYWxob3N0JwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBuYW1lOiAnc2V0dGluZ19ycGNfcG9ydCcsCiAgICAgICAgICAgICAgICB2YWx1ZTogJzE2ODAwJwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBuYW1lOiAnc2V0dGluZ19ycGNfdG9rZW4nLAogICAgICAgICAgICAgICAgdmFsdWU6ICcnCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIG5hbWU6ICdzZXR0aW5nX3JwY19kaXInLAogICAgICAgICAgICAgICAgdmFsdWU6ICdEOicKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbmFtZTogJ3NldHRpbmdfdGhlbWVfY29sb3InLAogICAgICAgICAgICAgICAgdmFsdWU6ICcjMDlBQUZGJwogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBuYW1lOiAnc2V0dGluZ19pbml0X2NvZGUnLAogICAgICAgICAgICAgICAgdmFsdWU6ICcnCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIG5hbWU6ICdzY29kZScsCiAgICAgICAgICAgICAgICB2YWx1ZTogJycKICAgICAgICAgICAgfV07CgogICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKCh2KSA9PiB7CiAgICAgICAgICAgICAgICB1dGlsLmdldFZhbHVlKHYubmFtZSkgPT09IHVuZGVmaW5lZCAmJiB1dGlsLnNldFZhbHVlKHYubmFtZSwgdi52YWx1ZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCgogICAgICAgIGFkZFN0eWxlKCkgewogICAgICAgICAgICBjb2xvciA9IHV0aWwuZ2V0VmFsdWUoJ3NldHRpbmdfdGhlbWVfY29sb3InKTsKICAgICAgICAgICAgdXRpbC5zZXRJbnQoJyNwYW5saW5rZXItYnV0dG9uJyk7CiAgICAgICAgICAgIGxldCBjc3M9YAogICAgICAgICAgICBib2R5Ojotd2Via2l0LXNjcm9sbGJhciB7IGRpc3BsYXk6IG5vbmUgfQogICAgICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyIHsgd2lkdGg6IDZweDsgaGVpZ2h0OiAxMHB4IH0KICAgICAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7IGJvcmRlci1yYWRpdXM6IDA7IGJhY2tncm91bmQ6IG5vbmUgfQogICAgICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg4NSw4NSw4NSwuNCkgfQogICAgICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iLDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIgeyBib3JkZXItcmFkaXVzOiA1cHg7IC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAwIDZweCByZ2JhKDAsMCwwLC4yKSB9CiAgICAgICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDg1LDg1LDg1LC4zKSB9CiAgICAgICAgICAgIC5wbC1wb3B1cCB7IGZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIC5wbC1wb3B1cCBhIHsgY29sb3I6ICR7Y29sb3J9ICFpbXBvcnRhbnQ7IH0KICAgICAgICAgICAgLnBsLWhlYWRlciB7IHBhZGRpbmc6IDAhaW1wb3J0YW50O2FsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0IWltcG9ydGFudDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWUhaW1wb3J0YW50OyBtYXJnaW46IDAgMCAxMHB4IWltcG9ydGFudDsgcGFkZGluZzogMCAwIDVweCFpbXBvcnRhbnQ7fQogICAgICAgICAgICAucGwtdGl0bGUgeyBmb250LXNpemU6IDE2cHghaW1wb3J0YW50OyBsaW5lLWhlaWdodDogMSFpbXBvcnRhbnQ7d2hpdGUtc3BhY2U6IG5vd3JhcCFpbXBvcnRhbnQ7IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzIWltcG9ydGFudDt9CiAgICAgICAgICAgIC5wbC1jb250ZW50IHsgcGFkZGluZzogMCAhaW1wb3J0YW50OyBmb250LXNpemU6IDEycHghaW1wb3J0YW50OyB9CiAgICAgICAgICAgIC5wbC1tYWluIHsgbWF4LWhlaWdodDogNDAwcHg7b3ZlcmZsb3cteTpzY3JvbGw7IH0KICAgICAgICAgICAgLnBsLWZvb3RlciB7Zm9udC1zaXplOiAxMnB4IWltcG9ydGFudDtqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQhaW1wb3J0YW50OyBtYXJnaW46IDEwcHggMCAwIWltcG9ydGFudDsgcGFkZGluZzogNXB4IDAgMCFpbXBvcnRhbnQ7IGNvbG9yOiAjZjU2YzZjIWltcG9ydGFudDsgfQogICAgICAgICAgICAucGwtaXRlbSB7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGxpbmUtaGVpZ2h0OiAyMnB4OyB9CiAgICAgICAgICAgIC5wbC1pdGVtLW5hbWUgeyBmbGV4OiAwIDAgMTUwcHg7IHRleHQtYWxpZ246IGxlZnQ7bWFyZ2luLXJpZ2h0OiAxMHB4OyBvdmVyZmxvdzogaGlkZGVuOyB3aGl0ZS1zcGFjZTogbm93cmFwOyB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgY3Vyc29yOmRlZmF1bHQ7fQogICAgICAgICAgICAucGwtaXRlbS1saW5rIHsgZmxleDogMTsgb3ZlcmZsb3c6IGhpZGRlbjt0ZXh0LWFsaWduOiBsZWZ0OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgfQogICAgICAgICAgICAucGwtaXRlbS10aXAgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47ZmxleDogMTt9CiAgICAgICAgICAgIC5wbC1iYWNrIHsgd2lkdGg6IDcwcHg7IGJhY2tncm91bmQ6ICNkZGQ7IGJvcmRlci1yYWRpdXM6IDNweDtjdXJzb3I6cG9pbnRlcjttYXJnaW46MXB4IDA7fQogICAgICAgICAgICAucGwtZXh0IHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aWR0aDogNDRweDsgYmFja2dyb3VuZDogIzk5OTsgY29sb3I6ICNmZmY7IGhlaWdodDogMTZweDsgbGluZS1oZWlnaHQ6IDE2cHg7IGZvbnQtc2l6ZTogMTJweDsgYm9yZGVyLXJhZGl1czogM3B4O30KICAgICAgICAgICAgLnBsLXJldHJ5IHtwYWRkaW5nOiAzcHggMTBweDsgYmFja2dyb3VuZDogI2NjMzIzNTsgY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDNweDsgY3Vyc29yOiBwb2ludGVyO30KICAgICAgICAgICAgLnBsLWJyb3dzZXJkb3dubG9hZCB7cGFkZGluZzogM3B4IDEwcHg7IGJhY2tncm91bmQ6ICR7Y29sb3J9OyBjb2xvcjogI2ZmZjsgYm9yZGVyLXJhZGl1czogM3B4OyBjdXJzb3I6IHBvaW50ZXI7fQogICAgICAgICAgICAucGwtaXRlbS1wcm9ncmVzcyB7IGRpc3BsYXk6ZmxleDtmbGV4OiAxO2FsaWduLWl0ZW1zOmNlbnRlcn0KICAgICAgICAgICAgLnBsLXByb2dyZXNzIHsgZGlzcGxheTogaW5saW5lLWJsb2NrO3ZlcnRpY2FsLWFsaWduOiBtaWRkbGU7d2lkdGg6IDEwMCU7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7bGluZS1oZWlnaHQ6IDE7cG9zaXRpb246IHJlbGF0aXZlO2hlaWdodDoxNXB4OyBmbGV4OiAxfQogICAgICAgICAgICAucGwtcHJvZ3Jlc3Mtb3V0ZXIgeyBoZWlnaHQ6IDE1cHg7Ym9yZGVyLXJhZGl1czogMTAwcHg7YmFja2dyb3VuZC1jb2xvcjogI2ViZWVmNTtvdmVyZmxvdzogaGlkZGVuO3Bvc2l0aW9uOiByZWxhdGl2ZTt2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO30KICAgICAgICAgICAgLnBsLXByb2dyZXNzLWlubmVyeyBwb3NpdGlvbjogYWJzb2x1dGU7bGVmdDogMDt0b3A6IDA7YmFja2dyb3VuZC1jb2xvcjogIzQwOWVmZjt0ZXh0LWFsaWduOiByaWdodDtib3JkZXItcmFkaXVzOiAxMDBweDtsaW5lLWhlaWdodDogMTt3aGl0ZS1zcGFjZTogbm93cmFwO3RyYW5zaXRpb246IHdpZHRoIC42cyBlYXNlO30KICAgICAgICAgICAgLnBsLXByb2dyZXNzLWlubmVyLXRleHQgeyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7dmVydGljYWwtYWxpZ246IG1pZGRsZTtjb2xvcjogI2QxZDFkMTtmb250LXNpemU6IDEycHg7bWFyZ2luOiAwIDVweDtoZWlnaHQ6IDE1cHh9CiAgICAgICAgICAgIC5wbC1wcm9ncmVzcy10aXB7IGZsZXg6MTt0ZXh0LWFsaWduOnJpZ2h0fQogICAgICAgICAgICAucGwtcHJvZ3Jlc3MtaG93eyBmbGV4OiAwIDAgOTBweDsgYmFja2dyb3VuZDogI2RkZDsgYm9yZGVyLXJhZGl1czogM3B4OyBtYXJnaW4tbGVmdDogMTBweDsgY3Vyc29yOiBwb2ludGVyOyB0ZXh0LWFsaWduOiBjZW50ZXI7fQogICAgICAgICAgICAucGwtcHJvZ3Jlc3Mtc3RvcHsgZmxleDogMCAwIDUwcHg7IHBhZGRpbmc6IDAgMTBweDsgYmFja2dyb3VuZDogI2NjMzIzNTsgY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDNweDsgY3Vyc29yOiBwb2ludGVyO21hcmdpbi1sZWZ0OjEwcHg7aGVpZ2h0OjIwcHh9CiAgICAgICAgICAgIC5wbC1wcm9ncmVzcy1pbm5lci10ZXh0OmFmdGVyIHsgZGlzcGxheTogaW5saW5lLWJsb2NrO2NvbnRlbnQ6ICIiO2hlaWdodDogMTAwJTt2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO30KICAgICAgICAgICAgLnBsLWJ0bi1wcmltYXJ5IHsgYmFja2dyb3VuZDogJHtjb2xvcn07IGJvcmRlcjogMDsgYm9yZGVyLXJhZGl1czogNHB4OyBjb2xvcjogI2ZmZmZmZjsgY3Vyc29yOiBwb2ludGVyOyBmb250LXNpemU6IDEycHg7IG91dGxpbmU6IG5vbmU7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IG1hcmdpbjogMnB4IDA7IHBhZGRpbmc6IDZweCAwO3RyYW5zaXRpb246IDAuM3Mgb3BhY2l0eTsgfQogICAgICAgICAgICAucGwtYnRuLWluZm8geyBiYWNrZ3JvdW5kOiAjNjA2MjY2OyB9CiAgICAgICAgICAgIC5wbC1idXR0b24taW5pdCB7IG9wYWNpdHk6IDAuNTsgYW5pbWF0aW9uOiBlYXNlSW5pdE9wYWNpdHkgMS4ycyAzOyBhbmltYXRpb24tZmlsbC1tb2RlOmZvcndhcmRzIH0KICAgICAgICAgICAgQGtleWZyYW1lcyBlYXNlSW5pdE9wYWNpdHkgeyBmcm9tIHsgb3BhY2l0eTogMC41OyB9IDUwJSB7IG9wYWNpdHk6IDEgfSB0byB7IG9wYWNpdHk6IDAuNTsgfSB9CiAgICAgICAgICAgIC5wbC1idG4tcHJpbWFyeTpob3ZlciB7IG9wYWNpdHk6IDAuOTt0cmFuc2l0aW9uOiAwLjNzIG9wYWNpdHk7IH0KICAgICAgICAgICAgLnBsLWJ0bi1kYW5nZXIgeyBiYWNrZ3JvdW5kOiAjY2MzMjM1OyB9CiAgICAgICAgICAgIC5wbC1idG4tc3VjY2VzcyB7IGJhY2tncm91bmQ6ICM1NWFmMjg7IGFuaW1hdGlvbjogZWFzZU9wYWNpdHkgMS4ycyAyOyBhbmltYXRpb24tZmlsbC1tb2RlOmZvcndhcmRzIH0KICAgICAgICAgICAgIEBrZXlmcmFtZXMgZWFzZU9wYWNpdHkgeyBmcm9tIHsgb3BhY2l0eTogMTsgfSA1MCUgeyBvcGFjaXR5OiAwLjM1IH0gdG8geyBvcGFjaXR5OiAxOyB9IH0KICAgICAgICAgICAgLmVsZW1lbnQtY2xpY2tlZCB7IG9wYWNpdHk6IDAuNTsgfQogICAgICAgICAgICAucGwtZXh0cmEgeyBtYXJnaW4tdG9wOiAxMHB4O2Rpc3BsYXk6ZmxleH0KICAgICAgICAgICAgLnBsLWV4dHJhIGJ1dHRvbiB7IGZsZXg6IDF9CiAgICAgICAgICAgIC5wb2ludGVyIHsgY3Vyc29yOnBvaW50ZXIgfQogICAgICAgICAgICAucGwtc2V0dGluZy1sYWJlbCB7IGRpc3BsYXk6IGZsZXg7YWxpZ24taXRlbXM6IGNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47cGFkZGluZy10b3A6IDEwcHg7IH0KICAgICAgICAgICAgLnBsLWxhYmVsIHsgZmxleDogMCAwIDEwMHB4O3RleHQtYWxpZ246bGVmdDsgfQogICAgICAgICAgICAucGwtaW5wdXQgeyBmbGV4OiAxOyBwYWRkaW5nOiA4cHggMTBweDsgYm9yZGVyOiAxcHggc29saWQgI2MyYzJjMjsgYm9yZGVyLXJhZGl1czogNXB4OyBmb250LXNpemU6IDE0cHggfQogICAgICAgICAgICAucGwtY29sb3IgeyBmbGV4OiAxO2Rpc3BsYXk6IGZsZXg7ZmxleC13cmFwOiB3cmFwOyBtYXJnaW4tcmlnaHQ6IC0xMHB4O30KICAgICAgICAgICAgLnBsLWNvbG9yLWJveCB7IHdpZHRoOiAzNXB4O2hlaWdodDogMzVweDttYXJnaW46MTBweCAxMHB4IDAgMDs7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7Ym9yZGVyOjFweCBzb2xpZCAjZmZmO2N1cnNvcjpwb2ludGVyIH0KICAgICAgICAgICAgLnBsLWNvbG9yLWJveC5jaGVja2VkIHsgYm9yZGVyOjNweCBkYXNoZWQgIzExMSFpbXBvcnRhbnQgfQogICAgICAgICAgICAucGwtY2xvc2U6Zm9jdXMgeyBvdXRsaW5lOiAwOyBib3gtc2hhZG93OiBub25lOyB9CiAgICAgICAgICAgIC50YWctZGFuZ2VyIHtjb2xvcjojY2MzMjM1O21hcmdpbjogMCA1cHg7fQogICAgICAgICAgICAucGwtdG9vbHRpcCB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgY29sb3I6ICNmZmZmZmY7IG1heC13aWR0aDogNjAwcHg7IGZvbnQtc2l6ZTogMTJweDsgcGFkZGluZzogNXB4IDEwcHg7IGJhY2tncm91bmQ6ICMzMzM7IGJvcmRlci1yYWRpdXM6IDVweDsgei1pbmRleDogOTk5OTk7IGxpbmUtaGVpZ2h0OiAxLjM7IGRpc3BsYXk6bm9uZTsgd29yZC1icmVhazogYnJlYWstYWxsO30KICAgICAgICAgICAgIEBrZXlmcmFtZXMgbG9hZCB7IDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZykgfSAxMDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKSB9IH0KICAgICAgICAgICAgLnBsLWxvYWRpbmctYm94ID4gZGl2ID4gZGl2IHtwb3NpdGlvbjogYWJzb2x1dGU7Ym9yZGVyLXJhZGl1czogNTAlO30KICAgICAgICAgICAgLnBsLWxvYWRpbmctYm94ID4gZGl2ID4gZGl2Om50aC1jaGlsZCgxKSB7dG9wOiA5cHg7bGVmdDogOXB4O3dpZHRoOiA4MnB4O2hlaWdodDogODJweDtiYWNrZ3JvdW5kOiAjZmZmZmZmO30KICAgICAgICAgICAgLnBsLWxvYWRpbmctYm94ID4gZGl2ID4gZGl2Om50aC1jaGlsZCgyKSB7dG9wOiAxNHB4O2xlZnQ6IDM4cHg7d2lkdGg6IDI1cHg7aGVpZ2h0OiAyNXB4O2JhY2tncm91bmQ6ICM2NjY2NjY7YW5pbWF0aW9uOiBsb2FkIDFzIGxpbmVhciBpbmZpbml0ZTt0cmFuc2Zvcm0tb3JpZ2luOiAxMnB4IDM2cHg7fQogICAgICAgICAgICAucGwtbG9hZGluZyB7d2lkdGg6IDE2cHg7aGVpZ2h0OiAxNnB4O2Rpc3BsYXk6IGlubGluZS1ibG9jaztvdmVyZmxvdzogaGlkZGVuO2JhY2tncm91bmQ6IG5vbmU7fQogICAgICAgICAgICAucGwtbG9hZGluZy1ib3gge3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTtwb3NpdGlvbjogcmVsYXRpdmU7dHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApIHNjYWxlKDAuMTYpO2JhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjt0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7fQogICAgICAgICAgICAucGwtbG9hZGluZy1ib3ggZGl2IHsgYm94LXNpemluZzogY29udGVudC1ib3g7IH0KICAgICAgICAgICAgLnN3YWwyLWNvbnRhaW5lciB7IHotaW5kZXg6MTAwMDAwIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5LnN3YWwyLWhlaWdodC1hdXRvIHsgaGVpZ2h0OiBpbmhlcml0IWltcG9ydGFudDsgfQogICAgICAgICAgICBgOwogICAgICAgICAgICB1dGlsLmFkZFN0eWxlKCdwYW5saW5rZXItc3R5bGUnLCdzdHlsZScsY3NzKTsKICAgICAgICB9LAoKICAgICAgICBhZGRQYWdlTGlzdGVuZXIoKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIF9mYWN0b3J5KGUpIHsKICAgICAgICAgICAgICAgIGxldCB0YXJnZXQgPSAkKGUudGFyZ2V0KTsKICAgICAgICAgICAgICAgIGxldCBpdGVtID0gdGFyZ2V0LnBhcmVudHMoJy5wbC1pdGVtJyk7CiAgICAgICAgICAgICAgICBsZXQgbGluayA9IGl0ZW0uZmluZCgnLnBsLWl0ZW0tbGluaycpOwogICAgICAgICAgICAgICAgbGV0IHByb2dyZXNzID0gaXRlbS5maW5kKCcucGwtaXRlbS1wcm9ncmVzcycpOwogICAgICAgICAgICAgICAgbGV0IHRpcCA9IGl0ZW0uZmluZCgnLnBsLWl0ZW0tdGlwJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGl0ZW0sIGxpbmssIHByb2dyZXNzLCB0aXAsIHRhcmdldCwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIF9yZXNldChpKSB7CiAgICAgICAgICAgICAgICBpbnNbaV0gJiYgY2xlYXJJbnRlcnZhbChpbnNbaV0pOwogICAgICAgICAgICAgICAgcmVxdWVzdFtpXSAmJiByZXF1ZXN0W2ldLmFib3J0KCk7CiAgICAgICAgICAgICAgICBwcm9ncmVzc1tpXSA9IDA7CiAgICAgICAgICAgICAgICBpZG1baV0gPSBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZG9jLm9uKCdtb3VzZWVudGVyIG1vdXNlbGVhdmUnLCAnLnBsLWJ1dHRvbicsIChlKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZS50eXBlID09PSAnbW91c2VlbnRlcicpIHsKICAgICAgICAgICAgICAgICAgICAkKGUuY3VycmVudFRhcmdldCkuYWRkQ2xhc3MoJ2J1dHRvbi1vcGVuJyk7CiAgICAgICAgICAgICAgICAgICAgJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJy5wbC1tZW51Jykuc2hvdygpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkKGUuY3VycmVudFRhcmdldCkucmVtb3ZlQ2xhc3MoJ2J1dHRvbi1vcGVuJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkb2Mub24oJ21vdXNlbGVhdmUnLCAnLnBsLW1lbnUnLCAoZSkgPT4gewogICAgICAgICAgICAgICAgJChlLmN1cnJlbnRUYXJnZXQpLmhpZGUoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvYy5vbignY2xpY2snLCAnLnBsLWJ1dHRvbi1tb2RlJywgKGUpID0+IHsKICAgICAgICAgICAgICAgIG1vZGUgPSBlLnRhcmdldC5kYXRhc2V0Lm1vZGU7CiAgICAgICAgICAgICAgICBTd2FsLnNob3dMb2FkaW5nKCk7CiAgICAgICAgICAgICAgICB0aGlzLmdldFBDU0xpbmsoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvYy5vbignY2xpY2snLCAnLmxpc3RlbmVyLWxpbmstYXBpJywgYXN5bmMgKGUpID0+IHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIGxldCBvID0gX2ZhY3RvcnkoZSk7CiAgICAgICAgICAgICAgICBsZXQgJHdpZHRoID0gby5pdGVtLmZpbmQoJy5wbC1wcm9ncmVzcy1pbm5lcicpOwogICAgICAgICAgICAgICAgbGV0ICR0ZXh0ID0gby5pdGVtLmZpbmQoJy5wbC1wcm9ncmVzcy1pbm5lci10ZXh0Jyk7CiAgICAgICAgICAgICAgICBsZXQgZmlsZW5hbWUgPSBvLmxpbmtbMF0uZGF0YXNldC5maWxlbmFtZTsKICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IG8ubGlua1swXS5kYXRhc2V0LmluZGV4OwogICAgICAgICAgICAgICAgX3Jlc2V0KGluZGV4KTsKICAgICAgICAgICAgICAgIHV0aWwuZ2V0KG8ubGlua1swXS5kYXRhc2V0LmxpbmssIHsiVXNlci1BZ2VudCI6IHBhbi51YX0sICdibG9iJywge2ZpbGVuYW1lLCBpbmRleH0pOwogICAgICAgICAgICAgICAgaW5zW2luZGV4XSA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgcHJvZyA9ICtwcm9ncmVzc1tpbmRleF0gfHwgMDsKICAgICAgICAgICAgICAgICAgICBsZXQgaXNJRE0gPSBpZG1baW5kZXhdIHx8IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGlmIChpc0lETSkgewogICAgICAgICAgICAgICAgICAgICAgICBvLnRpcC5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHJvZ3Jlc3MuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBvLmxpbmsudGV4dCgn5bey5oiQ5Yqf5ZSk6LW3SURN77yM6K+35p+l55yLSURN5LiL6L295qGG77yBJykuYW5pbWF0ZSh7b3BhY2l0eTogJzAuNSd9LCAic2xvdyIpLnNob3coKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnNbaW5kZXhdKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWRtW2luZGV4XSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG8ubGluay5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG8udGlwLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgby5wcm9ncmVzcy5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICR3aWR0aC5jc3MoJ3dpZHRoJywgcHJvZyArICclJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICR0ZXh0LnRleHQocHJvZyArICclJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9nID09IDEwMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnNbaW5kZXhdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzW2luZGV4XSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLml0ZW0uZmluZCgnLnBsLXByb2dyZXNzLXN0b3AnKS5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLml0ZW0uZmluZCgnLnBsLXByb2dyZXNzLXRpcCcpLmh0bWwoJ+S4i+i9veWujOaIkO+8jOato+WcqOW8ueWHuua1j+iniOWZqOS4i+i9veahhu+8gScpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvYy5vbignY2xpY2snLCAnLmxpc3RlbmVyLXJldHJ5JywgYXN5bmMgKGUpID0+IHsKICAgICAgICAgICAgICAgIGxldCBvID0gX2ZhY3RvcnkoZSk7CiAgICAgICAgICAgICAgICBvLnRpcC5oaWRlKCk7CiAgICAgICAgICAgICAgICBvLmxpbmsuc2hvdygpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZG9jLm9uKCdjbGljaycsICcubGlzdGVuZXItaG93JywgYXN5bmMgKGUpID0+IHsKICAgICAgICAgICAgICAgIGxldCBvID0gX2ZhY3RvcnkoZSk7CiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBvLmxpbmtbMF0uZGF0YXNldC5pbmRleDsKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0W2luZGV4XSkgewogICAgICAgICAgICAgICAgICAgIHJlcXVlc3RbaW5kZXhdLmFib3J0KCk7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnNbaW5kZXhdKTsKICAgICAgICAgICAgICAgICAgICBvLnByb2dyZXNzLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICBvLnRpcC5zaG93KCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZG9jLm9uKCdjbGljaycsICcubGlzdGVuZXItc3RvcCcsIGFzeW5jIChlKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgbyA9IF9mYWN0b3J5KGUpOwogICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gby5saW5rWzBdLmRhdGFzZXQuaW5kZXg7CiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdFtpbmRleF0pIHsKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0W2luZGV4XS5hYm9ydCgpOwogICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW5zW2luZGV4XSk7CiAgICAgICAgICAgICAgICAgICAgby50aXAuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgIG8ucHJvZ3Jlc3MuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgIG8ubGluay5zaG93KDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZG9jLm9uKCdjbGljaycsICcubGlzdGVuZXItYmFjaycsIGFzeW5jIChlKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgbyA9IF9mYWN0b3J5KGUpOwogICAgICAgICAgICAgICAgby50aXAuaGlkZSgpOwogICAgICAgICAgICAgICAgby5saW5rLnNob3coKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvYy5vbignY2xpY2snLCAnLmxpc3RlbmVyLWxpbmstYXJpYSwgLmxpc3RlbmVyLWNvcHktYXJpYScsIChlKSA9PiB7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBpZiAoIWUudGFyZ2V0LmRhdGFzZXQubGluaykgewogICAgICAgICAgICAgICAgICAgICQoZS50YXJnZXQpLnJlbW92ZUNsYXNzKCdsaXN0ZW5lci1jb3B5LWFyaWEnKS5hZGRDbGFzcygncGwtYnRuLWRhbmdlcicpLmh0bWwoYCR7cGFuLmluaXRbNV198J+RiTxhIGhyZWY9IiR7cGFuLmFzc2lzdGFudH0iIHRhcmdldD0iX2JsYW5rIj7ngrnlh7vmraTlpITlronoo4U8L2E+8J+RiGApOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB1dGlsLnNldENsaXBib2FyZChkZWNvZGVVUklDb21wb25lbnQoZS50YXJnZXQuZGF0YXNldC5saW5rKSk7CiAgICAgICAgICAgICAgICAgICAgJChlLnRhcmdldCkudGV4dCgn5aSN5Yi25oiQ5Yqf77yM5b+r5Y6757KY6LS05ZCn77yBJykuYW5pbWF0ZSh7b3BhY2l0eTogJzAuNSd9LCAic2xvdyIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZG9jLm9uKCdjbGljaycsICcubGlzdGVuZXItbGluay1ycGMnLCBhc3luYyAoZSkgPT4gewogICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTsKICAgICAgICAgICAgICAgIHRhcmdldC5maW5kKCcuaWNvbicpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgdGFyZ2V0LmZpbmQoJy5wbC1sb2FkaW5nJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICB0YXJnZXQucHJlcGVuZCh0aGlzLmNyZWF0ZUxvYWRpbmcoKSk7CiAgICAgICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy5zZW5kTGlua1RvUlBDKGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmZpbGVuYW1lLCBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5saW5rKTsKICAgICAgICAgICAgICAgIGlmIChyZXMgPT09ICdzdWNjZXNzJykgewogICAgICAgICAgICAgICAgICAgICQoJy5saXN0ZW5lci1ycGMtdGFzaycpLnNob3coKTsKICAgICAgICAgICAgICAgICAgICB0YXJnZXQucmVtb3ZlQ2xhc3MoJ3BsLWJ0bi1kYW5nZXInKS5odG1sKCflj5HpgIHmiJDlip/vvIzlv6vljrvnnIvnnIvlkKfvvIEnKS5hbmltYXRlKHtvcGFjaXR5OiAnMC41J30sICJzbG93Iik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcyA9PT0gJ2Fzc2lzdGFudCcpIHsKICAgICAgICAgICAgICAgICAgICB0YXJnZXQuYWRkQ2xhc3MoJ3BsLWJ0bi1kYW5nZXInKS5odG1sKGAke3Bhbi5pbml0WzVdffCfkYk8YSBocmVmPSIke3Bhbi5hc3Npc3RhbnR9IiB0YXJnZXQ9Il9ibGFuayI+54K55Ye75q2k5aSE5a6J6KOFPC9hPvCfkYhgKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmFkZENsYXNzKCdwbC1idG4tZGFuZ2VyJykudGV4dCgn5Y+R6YCB5aSx6LSl77yM6K+35qOA5p+l5oKo55qEUlBD6YWN572u5L+h5oGv77yBJykuYW5pbWF0ZSh7b3BhY2l0eTogJzAuNSd9LCAic2xvdyIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZG9jLm9uKCdjbGljaycsICcubGlzdGVuZXItc2VuZC1ycGMnLCAoZSkgPT4gewogICAgICAgICAgICAgICAgJCgnLmxpc3RlbmVyLWxpbmstcnBjJykuY2xpY2soKTsKICAgICAgICAgICAgICAgICQoZS50YXJnZXQpLnRleHQoJ+WPkemAgeWujOaIkO+8jOWPkemAgee7k+aenOingeS4iuaWueaMiemSru+8gScpLmFuaW1hdGUoe29wYWNpdHk6ICcwLjUnfSwgInNsb3ciKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvYy5vbignY2xpY2snLCAnLmxpc3RlbmVyLWNvbmZpZy1ycGMnLCAoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dTZXR0aW5nKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkb2Mub24oJ2NsaWNrJywgJy5saXN0ZW5lci1ycGMtdGFzaycsICgpID0+IHsKICAgICAgICAgICAgICAgIGxldCBycGMgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgZG9tYWluOiB1dGlsLmdldFZhbHVlKCdzZXR0aW5nX3JwY19kb21haW4nKSwKICAgICAgICAgICAgICAgICAgICBwb3J0OiB1dGlsLmdldFZhbHVlKCdzZXR0aW5nX3JwY19wb3J0JyksCiAgICAgICAgICAgICAgICB9KSwgdXJsID0gYGh0dHA6Ly9kLmJhaWR1eXVuLndpa2kvP3JwYz0ke3V0aWwuZShycGMpfSMke3V0aWwuZ2V0VmFsdWUoJ3NldHRpbmdfcnBjX3Rva2VuJyl9YDsKICAgICAgICAgICAgICAgIEdNX29wZW5JblRhYih1cmwsIHthY3RpdmU6IHRydWV9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvYy5vbignbW91c2VlbnRlciBtb3VzZWxlYXZlJywgJy5saXN0ZW5lci10aXAnLCAoZSkgPT4gewogICAgICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlZW50ZXInKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbGVuYW1lID0gZS5jdXJyZW50VGFyZ2V0LmlubmVyVGV4dDsKICAgICAgICAgICAgICAgICAgICBsZXQgc2l6ZSA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LnNpemU7CiAgICAgICAgICAgICAgICAgICAgbGV0IHRpcCA9IGAke2ZpbGVuYW1lfTxzcGFuIHN0eWxlPSJtYXJnaW4tbGVmdDogMTBweDtjb2xvcjogI2Y1NmM2YzsiPiR7c2l6ZX08L3NwYW4+YDsKICAgICAgICAgICAgICAgICAgICAkKGUuY3VycmVudFRhcmdldCkuY3NzKHtvcGFjaXR5OiAnMC41J30pOwogICAgICAgICAgICAgICAgICAgICQoJy5wbC10b29sdGlwJykuaHRtbCh0aXApLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgICdsZWZ0JzogZS5wYWdlWCArIDEwICsgJ3B4JywKICAgICAgICAgICAgICAgICAgICAgICAgJ3RvcCc6IGUucGFnZVkgLSBlLmN1cnJlbnRUYXJnZXQub2Zmc2V0VG9wID4gMTQgPyBlLnBhZ2VZICsgJ3B4JyA6IGUucGFnZVkgKyAyMCArICdweCcKICAgICAgICAgICAgICAgICAgICB9KS5zaG93KCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICQoZS5jdXJyZW50VGFyZ2V0KS5jc3Moe29wYWNpdHk6ICcxJ30pOwogICAgICAgICAgICAgICAgICAgICQoJy5wbC10b29sdGlwJykuaGlkZSgwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgY3JlYXRlVGlwKCkgewogICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwbC10b29sdGlwIj48L2Rpdj4nKTsKICAgICAgICB9LAoKICAgICAgICBjcmVhdGVMb2FkaW5nKCkgewogICAgICAgICAgICByZXR1cm4gJCgnPGRpdiBjbGFzcz0icGwtbG9hZGluZyI+PGRpdiBjbGFzcz0icGwtbG9hZGluZy1ib3giPjxkaXY+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PicpOwogICAgICAgIH0sCgogICAgICAgIGFkZEJ1dHRvbigpIHsKICAgICAgICAgICAgaWYgKCFwdCkgcmV0dXJuOwogICAgICAgICAgICBpZiAoKCQoJy5wbC1idXR0b24nKS5sZW5ndGggfHwgJCgnLnBsLWJ1dHRvbi1pbml0JykubGVuZ3RoKSAmJiBwYW4ubmFtZSAhPT0gbmFtZSkgcmV0dXJuOwoKICAgICAgICAgICAgbGV0ICR0b29sV3JhcDsKICAgICAgICAgICAgbGV0ICRidXR0b24gPSAkKGA8c3BhbiBjbGFzcz0iZy1kcm9wZG93bi1idXR0b24gcG9pbnRlciBwbC1idXR0b24iPjxhIHN0eWxlPSJjb2xvcjojZmZmO2JhY2tncm91bmQ6ICR7Y29sb3J9O2JvcmRlci1jb2xvcjoke2NvbG9yfSIgY2xhc3M9ImctYnV0dG9uIGctYnV0dG9uLWJsdWUiIGhyZWY9ImphdmFzY3JpcHQ6OyI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48ZW0gY2xhc3M9Imljb24gaWNvbi1kb3dubG9hZCI+PC9lbT48c3BhbiBjbGFzcz0idGV4dCIgc3R5bGU9IndpZHRoOiA2MHB4OyI+5LiL6L295Yqp5omLPC9zcGFuPjwvc3Bhbj48L2E+PHNwYW4gY2xhc3M9Im1lbnUiIHN0eWxlPSJ3aWR0aDphdXRvO3otaW5kZXg6NDE7Ym9yZGVyLWNvbG9yOiR7Y29sb3J9Ij48YSBzdHlsZT0iY29sb3I6JHtjb2xvcn0iIGNsYXNzPSJnLWJ1dHRvbi1tZW51IHBsLWJ1dHRvbi1tb2RlIiBkYXRhLW1vZGU9ImFwaSIgaHJlZj0iamF2YXNjcmlwdDo7Ij5BUEnkuIvovb08L2E+PGEgc3R5bGU9ImNvbG9yOiR7Y29sb3J9IiBjbGFzcz0iZy1idXR0b24tbWVudSBwbC1idXR0b24tbW9kZSIgZGF0YS1tb2RlPSJhcmlhIiBocmVmPSJqYXZhc2NyaXB0OjsiID5Bcmlh5LiL6L29PC9hPjxhIHN0eWxlPSJjb2xvcjoke2NvbG9yfSIgY2xhc3M9ImctYnV0dG9uLW1lbnUgcGwtYnV0dG9uLW1vZGUiIGRhdGEtbW9kZT0icnBjIiBocmVmPSJqYXZhc2NyaXB0OjsiPlJQQ+S4i+i9vTwvYT48YSBzdHlsZT0iY29sb3I6JHtjb2xvcn0iIGNsYXNzPSJnLWJ1dHRvbi1tZW51IHBsLWJ1dHRvbi1tb2RlIiBkYXRhLW1vZGU9ImN1cmwiIGhyZWY9ImphdmFzY3JpcHQ6OyI+Y1VSTOS4i+i9vTwvYT4ke3Bhbi5jb2RlID09IDIwMCAmJiB2ZXJzaW9uIDwgcGFuLnZlcnNpb24gPyBwYW4ubmV3IDogJyd9PC9zcGFuPjwvc3Bhbj5gKTsKICAgICAgICAgICAgaWYgKHB0ID09PSAnaG9tZScpICR0b29sV3JhcCA9ICQocGFuLmJ0bi5ob21lKTsKICAgICAgICAgICAgaWYgKHB0ID09PSAnbWFpbicpIHsKICAgICAgICAgICAgICAgICR0b29sV3JhcCA9ICQocGFuLmJ0bi5tYWluKTsKICAgICAgICAgICAgICAgICRidXR0b24gPSAkKGA8ZGl2IGNsYXNzPSJwbC1idXR0b24iIHN0eWxlPSJwb3NpdGlvbjogcmVsYXRpdmU7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgbWFyZ2luLXJpZ2h0OiA4cHg7Ij48YnV0dG9uIGNsYXNzPSJ1LWJ0biBuZC1maWxlLWxpc3QtdG9vbGJhci1hY3Rpb24taXRlbSB1LWJ0bi0tcHJpbWFyeSB1LWJ0bi0tZGVmYXVsdCB1LWJ0bi0tc21hbGwgaXMtcm91bmQgaXMtaGFzLWljb24iICBzdHlsZT0iYmFja2dyb3VuZDogJHtjb2xvcn07Ym9yZGVyLWNvbG9yOiAke2NvbG9yfSI+PGkgY2xhc3M9Imljb25mb250IGlubGluZS1ibG9jay12LW1pZGRsZSBuZC1maWxlLWxpc3QtdG9vbGJhcl9fYWN0aW9uLWl0ZW0taWNvbiBpY29uLWRvd25sb2FkIj48L2k+PHNwYW4gY2xhc3M9ImlubGluZS1ibG9jay12LW1pZGRsZSBuZC1maWxlLWxpc3QtdG9vbGJhci1hY3Rpb24taXRlbS10ZXh0Ij7kuIvovb3liqnmiYs8L3NwYW4+PC9idXR0b24+PHVsIGNsYXNzPSJkcm9wZG93bi1saXN0IG5kLWNvbW1vbi1mbG9hdC1tZW51IHBsLW1lbnUiICBzdHlsZT0iZGlzcGxheTogbm9uZTsiPjxsaSBjbGFzcz0ic3ViIGN1cnNvci1wIHBsLWJ1dHRvbi1tb2RlIiBkYXRhLW1vZGU9ImFwaSI+QVBJ5LiL6L29PC9saT48bGkgY2xhc3M9InN1YiBjdXJzb3ItcCBwbC1idXR0b24tbW9kZSIgZGF0YS1tb2RlPSJhcmlhIj5Bcmlh5LiL6L29PC9saT48bGkgY2xhc3M9InN1YiBjdXJzb3ItcCBwbC1idXR0b24tbW9kZSIgZGF0YS1tb2RlPSJycGMiPlJQQ+S4i+i9vTwvbGk+PGxpIGNsYXNzPSJzdWIgY3Vyc29yLXAgcGwtYnV0dG9uLW1vZGUiIGRhdGEtbW9kZT0iY3VybCI+Y1VSTOS4i+i9vTwvbGk+JHtwYW4uY29kZSA9PSAyMDAgJiYgdmVyc2lvbiA8IHBhbi52ZXJzaW9uID8gcGFuLm5ld1ggOiAnJ308L3VsPjwvZGl2PmApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChwdCA9PT0gJ3NoYXJlJykgJHRvb2xXcmFwID0gJChwYW4uYnRuLnNoYXJlKTsKICAgICAgICAgICAgJHRvb2xXcmFwLnByZXBlbmQoJGJ1dHRvbik7CiAgICAgICAgICAgIHV0aWwuY2xvZyhg5Yqp5omL5Yqg6L295oiQ5Yqf77yB54mI5pys77yaJHt2ZXJzaW9ufWApOwogICAgICAgICAgICB1dGlsLnNldEJEVVNTKCk7CiAgICAgICAgICAgIHRoaXMuYWRkUGFnZUxpc3RlbmVyKCk7CiAgICAgICAgfSwKCiAgICAgICAgYWRkSW5pdEJ1dHRvbigpIHsKICAgICAgICAgICAgaWYgKCFwdCkgcmV0dXJuOwogICAgICAgICAgICBpZiAoJCgnLnBsLWJ1dHRvbi1pbml0JykubGVuZ3RoICYmIHBhbi5uYW1lICE9PSBuYW1lKSByZXR1cm47CiAgICAgICAgICAgIGxldCAkdG9vbFdyYXA7CiAgICAgICAgICAgIHV0aWwuc2V0SW50KCcucGwtYnV0dG9uJyk7CiAgICAgICAgICAgIGxldCAkYnV0dG9uID0gJChgPHNwYW4gY2xhc3M9ImctZHJvcGRvd24tYnV0dG9uIHBvaW50ZXIgcGwtYnV0dG9uLWluaXQiIHN0eWxlPSJvcGFjaXR5Oi41Ij48YSBzdHlsZT0iY29sb3I6I2ZmZjtiYWNrZ3JvdW5kOiAke2NvbG9yfTtib3JkZXItY29sb3I6JHtjb2xvcn0iIGNsYXNzPSJnLWJ1dHRvbiBnLWJ1dHRvbi1ibHVlIiBocmVmPSJqYXZhc2NyaXB0OjsiPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCI+PGVtIGNsYXNzPSJpY29uIGljb24tZG93bmxvYWQiPjwvZW0+PHNwYW4gY2xhc3M9InRleHQiIHN0eWxlPSJ3aWR0aDogNjBweDsiPuS4i+i9veWKqeaJizwvc3Bhbj48L3NwYW4+PC9zcGFuPjwvYT48L3NwYW4+YCk7CiAgICAgICAgICAgIGlmIChwdCA9PT0gJ2hvbWUnKSAkdG9vbFdyYXAgPSAkKHBhbi5idG4uaG9tZSk7CiAgICAgICAgICAgIGlmIChwdCA9PT0gJ21haW4nKSB7CiAgICAgICAgICAgICAgICAkdG9vbFdyYXAgPSAkKHBhbi5idG4ubWFpbik7CiAgICAgICAgICAgICAgICAkYnV0dG9uID0gJChgPGEgaHJlZj0iamF2YXNjcmlwdDo7IiBjbGFzcz0icGwtYnV0dG9uLWluaXQiIHN0eWxlPSJvcGFjaXR5Oi41OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IG1hcmdpbi1yaWdodDogOHB4OyI+PGJ1dHRvbiBjbGFzcz0idS1idG4gbmQtZmlsZS1saXN0LXRvb2xiYXItYWN0aW9uLWl0ZW0gdS1idG4tLXByaW1hcnkgdS1idG4tLWRlZmF1bHQgdS1idG4tLXNtYWxsIGlzLXJvdW5kIGlzLWhhcy1pY29uIiBzdHlsZT0iYmFja2dyb3VuZDogJHtjb2xvcn07Ym9yZGVyLWNvbG9yOiAke2NvbG9yfSI+PGkgY2xhc3M9Imljb25mb250IGlubGluZS1ibG9jay12LW1pZGRsZSBuZC1maWxlLWxpc3QtdG9vbGJhcl9fYWN0aW9uLWl0ZW0taWNvbiBpY29uLWRvd25sb2FkIj48L2k+PHNwYW4gY2xhc3M9ImlubGluZS1ibG9jay12LW1pZGRsZSBuZC1maWxlLWxpc3QtdG9vbGJhci1hY3Rpb24taXRlbS10ZXh0Ij7kuIvovb3liqnmiYs8L3NwYW4+PC9idXR0b24+PC9hPmApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChwdCA9PT0gJ3NoYXJlJykgJHRvb2xXcmFwID0gJChwYW4uYnRuLnNoYXJlKTsKICAgICAgICAgICAgJHRvb2xXcmFwLnByZXBlbmQoJGJ1dHRvbik7CiAgICAgICAgICAgICRidXR0b24uY2xpY2soKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5faW5pdERpYWxvZygpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICBhc3luYyBnZXRQQ1NMaW5rKCkgewogICAgICAgICAgICBzZWxlY3RMaXN0ID0gdGhpcy5zZWxlY3RlZExpc3QoKTsKICAgICAgICAgICAgbGV0IGZpZExpc3QgPSB0aGlzLl9nZXRGaWRMaXN0KCksIHVybCwgcmVzOwogICAgICAgICAgICBpZiAocHQgPT09ICdob21lJyB8fCBwdCA9PT0gJ21haW4nKSB7CiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0TGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXRpbC5tZXNzYWdlLmVycm9yKCfmj5DnpLrvvJror7flhYjli77pgInopoHkuIvovb3nmoTmlofku7bvvIEnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChmaWRMaXN0Lmxlbmd0aCA9PT0gMikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB1dGlsLm1lc3NhZ2UuZXJyb3IoJ+aPkOekuu+8muivt+aJk+W8gOaWh+S7tuWkueWQjuWLvumAieaWh+S7tu+8gScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZmlkTGlzdCA9IGVuY29kZVVSSUNvbXBvbmVudChmaWRMaXN0KTsKICAgICAgICAgICAgICAgIHVybCA9IGAke3Bhbi5wY3NbMF19JmZzaWRzPSR7ZmlkTGlzdH1gOwogICAgICAgICAgICAgICAgcmVzID0gYXdhaXQgdXRpbC5nZXQodXJsLCB7IlVzZXItQWdlbnQiOiBwYW4udWF9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocHQgPT09ICdzaGFyZScpIHsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2hhcmVEYXRhKCk7CiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0TGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXRpbC5tZXNzYWdlLmVycm9yKCfmj5DnpLrvvJror7flhYjli77pgInopoHkuIvovb3nmoTmlofku7bvvIEnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChmaWRMaXN0Lmxlbmd0aCA9PT0gMikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB1dGlsLm1lc3NhZ2UuZXJyb3IoJ+aPkOekuu+8muivt+aJk+W8gOaWh+S7tuWkueWQjuWLvumAieaWh+S7tu+8gScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFwYXJhbXMuc2lnbikgewogICAgICAgICAgICAgICAgICAgIGxldCB1cmwgPSBgJHtwYW4ucGNzWzJdfSZzdXJsPSR7cGFyYW1zLnN1cmx9JmxvZ2lkPSR7cGFyYW1zLmxvZ2lkfWA7CiAgICAgICAgICAgICAgICAgICAgbGV0IHIgPSBhd2FpdCB1dGlsLmdldCh1cmwpOwogICAgICAgICAgICAgICAgICAgIGlmIChyLmVycm5vID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5zaWduID0gci5kYXRhLnNpZ247CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy50aW1lc3RhbXAgPSByLmRhdGEudGltZXN0YW1wOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaWFsb2cgPSBhd2FpdCBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogYOaPkOekuu+8muivt+WwhuaWh+S7tjxzcGFuIGNsYXNzPSJ0YWctZGFuZ2VyIj5b5L+d5a2Y5Yiw572R55uYXTwvc3Bhbj7wn5GJ5ZyoPHNwYW4gY2xhc3M9InRhZy1kYW5nZXIiPlvmiJHnmoTnvZHnm5hdPC9zcGFuPuS4reS4i+i9ve+8gWAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn54K55Ye75L+d5a2YJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wJywKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaWFsb2cuaXNDb25maXJtZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy50b29scy1zaGFyZS1zYXZlLWhiJylbMF0uY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFwYXJhbXMuYmRzdG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXRpbC5tZXNzYWdlLmVycm9yKCfmj5DnpLrvvJrnmbvlvZXnvZHnm5jlkI7miY3og73kvb/nlKjmraTlip/og73lk6bvvIEnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdlbmNyeXB0JywgcGFyYW1zLmVuY3J5cHQpOwogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdwcm9kdWN0JywgcGFyYW1zLnByb2R1Y3QpOwogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd1aycsIHBhcmFtcy51ayk7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3ByaW1hcnlpZCcsIHBhcmFtcy5wcmltYXJ5aWQpOwogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWRfbGlzdCcsIGZpZExpc3QpOwogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdsb2dpZCcsIHBhcmFtcy5sb2dpZCk7CiAgICAgICAgICAgICAgICBwYXJhbXMuc2hhcmVUeXBlID09PSAnc2VjcmV0JyA/IGZvcm1EYXRhLmFwcGVuZCgnZXh0cmEnLCBwYXJhbXMuZXh0cmEpIDogJyc7CiAgICAgICAgICAgICAgICB1cmwgPSBgJHtwYW4ucGNzWzFdfSZzaWduPSR7cGFyYW1zLnNpZ259JnRpbWVzdGFtcD0ke3BhcmFtcy50aW1lc3RhbXB9YDsKICAgICAgICAgICAgICAgIHJlcyA9IGF3YWl0IHV0aWwucG9zdCh1cmwsIGZvcm1EYXRhLCB7IlVzZXItQWdlbnQiOiBwYW4udWF9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocmVzLmVycm5vID09PSAwKSB7CiAgICAgICAgICAgICAgICBsZXQgaHRtbCA9IHRoaXMuZ2VuZXJhdGVEb20ocmVzLmxpc3QpOwogICAgICAgICAgICAgICAgdGhpcy5zaG93TWFpbkRpYWxvZyhwYW5bbW9kZV1bMF0sIGh0bWwsIHBhblttb2RlXVsxXSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmVycm5vID09PSAxMTIpIHsKICAgICAgICAgICAgICAgIHJldHVybiB1dGlsLm1lc3NhZ2UuZXJyb3IoJ+aPkOekuu+8mumhtemdoui/h+acn++8jOivt+WIt+aWsOmHjeivle+8gScpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdXRpbC5tZXNzYWdlLmVycm9yKCfmj5DnpLrvvJrojrflj5bkuIvovb3pk77mjqXlpLHotKXvvIHor7fliLfmlrDnvZHpobXlkI7ph43or5XvvIEnKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIGdlbmVyYXRlRG9tKGxpc3QpIHsKICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSAnPGRpdiBjbGFzcz0icGwtbWFpbiI+JzsKICAgICAgICAgICAgbGV0IGFsaW5rQWxsVGV4dCA9ICcnOwogICAgICAgICAgICB1dGlsLnNvcnRCeU5hbWUobGlzdCk7CiAgICAgICAgICAgIGxpc3QuZm9yRWFjaCgodiwgaSkgPT4gewogICAgICAgICAgICAgICAgaWYgKHYuaXNkaXIgPT09IDEpIHJldHVybjsKICAgICAgICAgICAgICAgIGxldCBmaWxlbmFtZSA9IHYuc2VydmVyX2ZpbGVuYW1lIHx8IHYuZmlsZW5hbWU7CiAgICAgICAgICAgICAgICBsZXQgZXh0ID0gdXRpbC5nZXRFeHRlbnNpb24oZmlsZW5hbWUpOwogICAgICAgICAgICAgICAgbGV0IHNpemUgPSB1dGlsLnNpemVGb3JtYXQodi5zaXplKTsKICAgICAgICAgICAgICAgIGxldCBkbGluayA9IHYuZGxpbms7CiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2FwaScpIHsKICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9IGA8ZGl2IGNsYXNzPSJwbC1pdGVtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwbC1pdGVtLW5hbWUgbGlzdGVuZXItdGlwIiBkYXRhLXNpemU9IiR7c2l6ZX0iPiR7ZmlsZW5hbWV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9InBsLWl0ZW0tbGluayBsaXN0ZW5lci1saW5rLWFwaSIgaHJlZj0iJHtkbGlua30iIGRhdGEtZmlsZW5hbWU9IiR7ZmlsZW5hbWV9IiBkYXRhLWxpbms9IiR7ZGxpbmt9IiBkYXRhLWluZGV4PSIke2l9Ij4ke2RsaW5rfTwvYT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwbC1pdGVtLXRpcCIgc3R5bGU9ImRpc3BsYXk6IG5vbmUiPjxzcGFuPuiLpeayoeacieW8ueWHuklETeS4i+i9veahhu+8jOaJvuWIsElETSA8Yj7pgInpobk8L2I+IC0+IDxiPuaWh+S7tuexu+WeizwvYj4gLT4gPGI+56ys5LiA5Liq5qGGPC9iPiDkuK3mt7vliqDlkI7nvIAgPHNwYW4gY2xhc3M9InBsLWV4dCI+JHtleHR9PC9zcGFuPu+8jDxhIGhyZWY9Imh0dHBzOi8vd3d3LmJhaWR1eXVuLndpa2kvemgtY24vaWRtLmh0bWwiIHRhcmdldD0iX2JsYW5rIj7or6bop4HmraTlpIQ8L2E+PC9zcGFuPiA8c3BhbiBjbGFzcz0icGwtYmFjayBsaXN0ZW5lci1iYWNrIj7ov5Tlm548L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGwtaXRlbS1wcm9ncmVzcyIgc3R5bGU9ImRpc3BsYXk6IG5vbmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwbC1wcm9ncmVzcyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwbC1wcm9ncmVzcy1vdXRlciI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwbC1wcm9ncmVzcy1pbm5lciIgc3R5bGU9IndpZHRoOjUlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGwtcHJvZ3Jlc3MtaW5uZXItdGV4dCI+MCU8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InBsLXByb2dyZXNzLXN0b3AgbGlzdGVuZXItc3RvcCI+5Y+W5raI5LiL6L29PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icGwtcHJvZ3Jlc3MtdGlwIj7mnKrlj5HnjrBJRE3vvIzkvb/nlKjoh6rluKbmtY/op4jlmajkuIvovb08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJwbC1wcm9ncmVzcy1ob3cgbGlzdGVuZXItaG93Ij7lpoLkvZXllKTotbdJRE3vvJ88L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAnYXJpYScpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgYWxpbmsgPSB1dGlsLmNvbnZlcnRMaW5rVG9BcmlhKGRsaW5rLCBmaWxlbmFtZSwgcGFuLnVhKTsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChhbGluaykgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYDxkaXYgY2xhc3M9InBsLWl0ZW0iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBsLWl0ZW0tbmFtZSBsaXN0ZW5lci10aXAiIGRhdGEtc2l6ZT0iJHtzaXplfSI+JHtmaWxlbmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz0icGwtaXRlbS1saW5rIiB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iJHthbGluay5saW5rfSIgdGl0bGU9IueCueWHu+WkjeWItmFyaWEyY+mTvuaOpSIgZGF0YS1maWxlbmFtZT0iJHtmaWxlbmFtZX0iIGRhdGEtbGluaz0iJHthbGluay5saW5rfSI+JHtkZWNvZGVVUklDb21wb25lbnQoYWxpbmsudGV4dCl9PC9hPiA8L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsaW5rQWxsVGV4dCArPSBhbGluayArICdcclxuJzsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBgPGRpdiBjbGFzcz0icGwtaXRlbSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGwtaXRlbS1uYW1lIGxpc3RlbmVyLXRpcCIgZGF0YS1zaXplPSIke3NpemV9Ij4ke2ZpbGVuYW1lfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJwbC1pdGVtLWxpbmsgbGlzdGVuZXItbGluay1hcmlhIiBocmVmPSIke2FsaW5rfSIgdGl0bGU9IueCueWHu+WkjeWItmFyaWEyY+mTvuaOpSIgZGF0YS1maWxlbmFtZT0iJHtmaWxlbmFtZX0iIGRhdGEtbGluaz0iJHthbGlua30iPiR7ZGVjb2RlVVJJQ29tcG9uZW50KGFsaW5rKX08L2E+IDwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdycGMnKSB7CiAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBgPGRpdiBjbGFzcz0icGwtaXRlbSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGwtaXRlbS1uYW1lIGxpc3RlbmVyLXRpcCIgZGF0YS1zaXplPSIke3NpemV9Ij4ke2ZpbGVuYW1lfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InBsLWl0ZW0tbGluayBsaXN0ZW5lci1saW5rLXJwYyBwbC1idG4tcHJpbWFyeSBwbC1idG4taW5mbyIgZGF0YS1maWxlbmFtZT0iJHtmaWxlbmFtZX0iIGRhdGEtbGluaz0iJHtkbGlua30iPjxlbSBjbGFzcz0iaWNvbiBpY29uLWRldmljZSI+PC9lbT48c3BhbiBzdHlsZT0ibWFyZ2luLWxlZnQ6IDVweDsiPuaOqOmAgeWIsFJQQ+S4i+i9veWZqDwvc3Bhbj48L2J1dHRvbj48L2Rpdj5gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdjdXJsJykgewogICAgICAgICAgICAgICAgICAgIGxldCBhbGluayA9IHV0aWwuY29udmVydExpbmtUb0N1cmwoZGxpbmssIGZpbGVuYW1lLCBwYW4udWEpOwogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKGFsaW5rKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBgPGRpdiBjbGFzcz0icGwtaXRlbSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGwtaXRlbS1uYW1lIGxpc3RlbmVyLXRpcCIgZGF0YS1zaXplPSIke3NpemV9Ij4ke2ZpbGVuYW1lfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJwbC1pdGVtLWxpbmsiIHRhcmdldD0iX2JsYW5rIiBocmVmPSIke2FsaW5rLmxpbmt9IiB0aXRsZT0i54K55Ye75aSN5Yi2Y3VybOmTvuaOpSIgZGF0YS1maWxlbmFtZT0iJHtmaWxlbmFtZX0iIGRhdGEtbGluaz0iJHthbGluay5saW5rfSI+JHtkZWNvZGVVUklDb21wb25lbnQoYWxpbmsudGV4dCl9PC9hPiA8L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsaW5rQWxsVGV4dCArPSBhbGluayArICdcclxuJzsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBgPGRpdiBjbGFzcz0icGwtaXRlbSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGwtaXRlbS1uYW1lIGxpc3RlbmVyLXRpcCIgZGF0YS1zaXplPSIke3NpemV9Ij4ke2ZpbGVuYW1lfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJwbC1pdGVtLWxpbmsgbGlzdGVuZXItbGluay1hcmlhIiBocmVmPSIke2FsaW5rfSIgdGl0bGU9IueCueWHu+WkjeWItmN1cmzpk77mjqUiIGRhdGEtZmlsZW5hbWU9IiR7ZmlsZW5hbWV9IiBkYXRhLWxpbms9IiR7YWxpbmt9Ij4ke2RlY29kZVVSSUNvbXBvbmVudChhbGluayl9PC9hPiA8L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnRlbnQgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgIGlmIChtb2RlID09PSAnYXJpYScpCiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGA8ZGl2IGNsYXNzPSJwbC1leHRyYSI+PGJ1dHRvbiBjbGFzcz0icGwtYnRuLXByaW1hcnkgbGlzdGVuZXItY29weS1hcmlhIiBkYXRhLWxpbms9IiR7YWxpbmtBbGxUZXh0fSI+5aSN5Yi25YWo6YOo6ZO+5o6lPC9idXR0b24+PC9kaXY+YDsKICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdycGMnKQogICAgICAgICAgICAgICAgY29udGVudCArPSAnPGRpdiBjbGFzcz0icGwtZXh0cmEiPjxidXR0b24gY2xhc3M9InBsLWJ0bi1wcmltYXJ5ICBsaXN0ZW5lci1zZW5kLXJwYyI+5Y+R6YCB5YWo6YOo6ZO+5o6lPC9idXR0b24+PGJ1dHRvbiBjbGFzcz0icGwtYnRuLXByaW1hcnkgbGlzdGVuZXItY29uZmlnLXJwYyIgc3R5bGU9Im1hcmdpbi1sZWZ0OiAxMHB4OyI+6YWN572uUlBD5pyN5YqhPC9idXR0b24+PGJ1dHRvbiBjbGFzcz0icGwtYnRuLXByaW1hcnkgcGwtYnRuLXN1Y2Nlc3MgbGlzdGVuZXItcnBjLXRhc2siIHN0eWxlPSJtYXJnaW4tbGVmdDogMTBweDtkaXNwbGF5OiBub25lIj7mn6XnnIvkuIvovb3ku7vliqE8L2J1dHRvbj48L2Rpdj4nOwogICAgICAgICAgICByZXR1cm4gY29udGVudDsKICAgICAgICB9LAoKICAgICAgICBhc3luYyBzZW5kTGlua1RvUlBDKGZpbGVuYW1lLCBsaW5rKSB7CiAgICAgICAgICAgIGxldCBycGMgPSB7CiAgICAgICAgICAgICAgICBkb21haW46IHV0aWwuZ2V0VmFsdWUoJ3NldHRpbmdfcnBjX2RvbWFpbicpLAogICAgICAgICAgICAgICAgcG9ydDogdXRpbC5nZXRWYWx1ZSgnc2V0dGluZ19ycGNfcG9ydCcpLAogICAgICAgICAgICAgICAgdG9rZW46IHV0aWwuZ2V0VmFsdWUoJ3NldHRpbmdfcnBjX3Rva2VuJyksCiAgICAgICAgICAgICAgICBkaXI6IHV0aWwuZ2V0VmFsdWUoJ3NldHRpbmdfcnBjX2RpcicpLAogICAgICAgICAgICB9OwogICAgICAgICAgICBsZXQgQkRVU1MgPSB1dGlsLmdldEJEVVNTKCk7CiAgICAgICAgICAgIGlmICghQkRVU1MpIHJldHVybiAnYXNzaXN0YW50JzsKCiAgICAgICAgICAgIGxldCB1cmwgPSBgJHtycGMuZG9tYWlufToke3JwYy5wb3J0fS9qc29ucnBjYDsKICAgICAgICAgICAgbGV0IHJwY0RhdGEgPSB7CiAgICAgICAgICAgICAgICBpZDogbmV3IERhdGUoKS5nZXRUaW1lKCksCiAgICAgICAgICAgICAgICBqc29ucnBjOiAnMi4wJywKICAgICAgICAgICAgICAgIG1ldGhvZDogJ2FyaWEyLmFkZFVyaScsCiAgICAgICAgICAgICAgICBwYXJhbXM6IFtgdG9rZW46JHtycGMudG9rZW59YCwgW2xpbmtdLCB7CiAgICAgICAgICAgICAgICAgICAgZGlyOiBycGMuZGlyLAogICAgICAgICAgICAgICAgICAgIG91dDogZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBbYFVzZXItQWdlbnQ6ICR7cGFuLnVhfWAsIGBDb29raWU6IEJEVVNTPSR7QkRVU1N9YF0KICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgdXRpbC5wb3N0KHVybCwgcnBjRGF0YSwgeyJVc2VyLUFnZW50IjogcGFuLnVhfSwgJycpOwogICAgICAgICAgICAgICAgaWYgKHJlcy5yZXN1bHQpIHJldHVybiAnc3VjY2Vzcyc7CiAgICAgICAgICAgICAgICByZXR1cm4gJ2ZhaWwnOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ2ZhaWwnOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgc2VsZWN0ZWRMaXN0KCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVpcmUoJ3N5c3RlbS1jb3JlOmNvbnRleHQvY29udGV4dC5qcycpLmluc3RhbmNlRm9yU3lzdGVtLmxpc3QuZ2V0U2VsZWN0ZWQoKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZC1tYWluLWxheW91dCcpLl9fdnVlX18uJGNoaWxkcmVuWzJdLnNlbGVjdGVkTGlzdDsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIGdldExvZ2lkKCkgewogICAgICAgICAgICBsZXQgdXQgPSByZXF1aXJlKCJzeXN0ZW0tY29yZTpjb250ZXh0L2NvbnRleHQuanMiKS5pbnN0YW5jZUZvclN5c3RlbS50b29scy5iYXNlU2VydmljZTsKICAgICAgICAgICAgcmV0dXJuIHV0LmJhc2U2NEVuY29kZSh1dGlsLmdldENvb2tpZSgiQkFJRFVJRCIpKTsKICAgICAgICB9LAoKICAgICAgICBnZXRTaGFyZURhdGEoKSB7CiAgICAgICAgICAgIGxldCByZXMgPSBsb2NhbHMuZHVtcCgpCiAgICAgICAgICAgIHBhcmFtcy5zaGFyZVR5cGUgPSAnc2VjcmV0JzsKICAgICAgICAgICAgcGFyYW1zLnNpZ24gPSAnJzsKICAgICAgICAgICAgcGFyYW1zLnRpbWVzdGFtcCA9ICcnOwogICAgICAgICAgICBwYXJhbXMuYmRzdG9rZW4gPSByZXMuYmRzdG9rZW4udmFsdWU7CiAgICAgICAgICAgIHBhcmFtcy5jaGFubmVsID0gJ2NodW5sZWknOwogICAgICAgICAgICBwYXJhbXMuY2xpZW50dHlwZSA9IDA7CiAgICAgICAgICAgIHBhcmFtcy53ZWIgPSAxOwogICAgICAgICAgICBwYXJhbXMuYXBwX2lkID0gMjUwNTI4OwogICAgICAgICAgICBwYXJhbXMuZW5jcnlwdCA9IDA7CiAgICAgICAgICAgIHBhcmFtcy5wcm9kdWN0ID0gJ3NoYXJlJzsKICAgICAgICAgICAgcGFyYW1zLmxvZ2lkID0gdGhpcy5nZXRMb2dpZCgpOwogICAgICAgICAgICBwYXJhbXMucHJpbWFyeWlkID0gcmVzLnNoYXJlaWQudmFsdWU7CiAgICAgICAgICAgIHBhcmFtcy51ayA9IHJlcy5zaGFyZV91ay52YWx1ZTsKICAgICAgICAgICAgcGFyYW1zLnNoYXJlVHlwZSA9PT0gJ3NlY3JldCcgJiYgKHBhcmFtcy5leHRyYSA9IHRoaXMuX2dldEV4dHJhKCkpOwogICAgICAgICAgICBwYXJhbXMuc3VybCA9IHRoaXMuX2dldFN1cmwoKTsKICAgICAgICB9LAoKICAgICAgICBfZGV0ZWN0UGFnZSgpIHsKICAgICAgICAgICAgbGV0IHBhdGggPSBsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKCcvZGlzay8nLCAnJyk7CiAgICAgICAgICAgIGlmIChwYXRoID09PSAnaG9tZScpIHJldHVybiAnaG9tZSc7CiAgICAgICAgICAgIGlmIChwYXRoID09PSAnbWFpbicpIHJldHVybiAnbWFpbic7CiAgICAgICAgICAgIGlmICgvXlwvKHN8c2hhcmUpXC8vLnRlc3QocGF0aCkpIHJldHVybiAnc2hhcmUnOwogICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfSwKCiAgICAgICAgX2dldEV4dHJhKCkgewogICAgICAgICAgICBsZXQgc2VLZXkgPSBkZWNvZGVVUklDb21wb25lbnQodXRpbC5nZXRDb29raWUoJ0JEQ0xORCcpKTsKICAgICAgICAgICAgcmV0dXJuICd7JyArICcic2VrZXkiOiInICsgc2VLZXkgKyAnIicgKyAifSI7CiAgICAgICAgfSwKCiAgICAgICAgX2dldFN1cmwoKSB7CiAgICAgICAgICAgIGxldCByZWcgPSAvKD88PXNcL3xzdXJsPSkoW2EtekEtWjAtOV8tXSspL2c7CiAgICAgICAgICAgIGlmIChyZWcudGVzdChsb2NhdGlvbi5ocmVmKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uLmhyZWYubWF0Y2gocmVnKVswXTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfSwKCiAgICAgICAgX2dldEZpZExpc3QoKSB7CiAgICAgICAgICAgIGxldCBmaWRsaXN0ID0gW107CiAgICAgICAgICAgIHNlbGVjdExpc3QuZm9yRWFjaCh2ID0+IHsKICAgICAgICAgICAgICAgIGlmICgrdi5pc2RpciA9PSAxKSByZXR1cm47CiAgICAgICAgICAgICAgICBmaWRsaXN0LnB1c2godi5mc19pZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gJ1snICsgZmlkbGlzdCArICddJzsKICAgICAgICB9LAogICAgICAgIF9yZXNldERhdGEoKSB7CiAgICAgICAgICAgIHByb2dyZXNzID0ge307CiAgICAgICAgICAgICQuZWFjaChyZXF1ZXN0LCAoa2V5KSA9PiB7CiAgICAgICAgICAgICAgICAocmVxdWVzdFtrZXldKS5hYm9ydCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJC5lYWNoKGlucywgKGtleSkgPT4gewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnNba2V5XSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZG0gPSB7fTsKICAgICAgICAgICAgaW5zID0ge307CiAgICAgICAgICAgIHJlcXVlc3QgPSB7fTsKICAgICAgICB9LAoKICAgICAgICBzaG93TWFpbkRpYWxvZyh0aXRsZSwgaHRtbCwgZm9vdGVyKSB7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICB0aXRsZSwKICAgICAgICAgICAgICAgIGh0bWwsCiAgICAgICAgICAgICAgICBmb290ZXIsCiAgICAgICAgICAgICAgICBhbGxvd091dHNpZGVDbGljazogZmFsc2UsCiAgICAgICAgICAgICAgICBzaG93Q2xvc2VCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcCcsCiAgICAgICAgICAgICAgICB3aWR0aCwKICAgICAgICAgICAgICAgIHBhZGRpbmc6ICcxNXB4IDIwcHggNXB4JywKICAgICAgICAgICAgICAgIGN1c3RvbUNsYXNzLAogICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2V0RGF0YSgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICBhc3luYyBpbml0UGFuTGlua2VyKCkgewogICAgICAgICAgICBwdCA9IHRoaXMuX2RldGVjdFBhZ2UoKTsKICAgICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHV0aWwucG9zdAogICAgICAgICAgICAoYGh0dHBzOi8vYXBpLmJhaWR1eXVuLndpa2kvY29uZmlnP3Zlcj0ke3ZlcnNpb259JmE9JHthdXRob3J9YCwge30sIHt9LCAndGV4dCcpOwogICAgICAgICAgICBwYW4gPSBKU09OLnBhcnNlKHV0aWwuZChyZXMpKTsKICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZSAmJiBPYmplY3QuZnJlZXplKHBhbik7CiAgICAgICAgICAgIHBhbi5udW0gPT09IHV0aWwuZ2V0VmFsdWUoJ3NldHRpbmdfaW5pdF9jb2RlJykgfHwgcGFuLm51bSA9PT0gdXRpbC5nZXRWYWx1ZSgnc2NvZGUnKSA/IHRoaXMuYWRkQnV0dG9uKCkgOiB0aGlzLmFkZEluaXRCdXR0b24oKTsKICAgICAgICB9LAoKICAgICAgICBhc3luYyBfaW5pdERpYWxvZygpIHsKICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ+aUr+aMgeWOn+WImycsCiAgICAgICAgICAgICAgICBodG1sOiBgPGRpdj7lpoLmgqjllpzmrKI8YnI+6K+35YWz5rOo5b6u5L+h5Y+3PGJyPumbt+Wwj+eMtCc8L2Rpdj5gLAogICAgICAgICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlLAogICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAocmVzdWx0LmlzRGlzbWlzc2VkICYmIHJlc3VsdC5kaXNtaXNzID09PSAnY2xvc2UnKSByZXR1cm47CiAgICAgICAgICAgIGlmIChwYW4ubnVtID09PSBwYW4ubnVtKSB7CiAgICAgICAgICAgICAgICB1dGlsLnNldFZhbHVlKCdzZXR0aW5nX2luaXRfY29kZScsIHBhbi5udW0pOwogICAgICAgICAgICAgICAgdXRpbC5tZXNzYWdlLnN1Y2Nlc3MocGFuLmluaXRbMl0pOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygwKTsKICAgICAgICAgICAgICAgIH0sIDE1MDApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYXdhaXQgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+aUr+aMgeWOn+WImycsCiAgICAgICAgICAgICAgICAgICAgaHRtbDogYDxkaXY+5aaC5oKo5Zac5qyiPGJyPuivt+WFs+azqOW+ruS/oeWPtzxicj7pm7flsI/njLQnPC9kaXY+YCwKICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOi+k+WFpScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5faW5pdERpYWxvZygpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgcmVnaXN0ZXJNZW51Q29tbWFuZCgpIHsKICAgICAgICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCgn6K6+572uJywgKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5zaG93U2V0dGluZygpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICBzaG93U2V0dGluZygpIHsKICAgICAgICAgICAgbGV0IGRvbSA9ICcnLCBidG4gPSAnJywKICAgICAgICAgICAgICAgIGNvbG9yTGlzdCA9IFsnIzA5QUFGRicsICcjY2MzMjM1JywgJyM1NzRhYjgnLCAnIzUxOGMxNycsICcjZWQ5NDRiJywgJyNmOTY5YTUnLCAnI2JjYTI4MCddOwogICAgICAgICAgICBkb20gKz0gYDxsYWJlbCBjbGFzcz0icGwtc2V0dGluZy1sYWJlbCI+PGRpdiBjbGFzcz0icGwtbGFiZWwiPlJQQ+S4u+acujwvZGl2PjxpbnB1dCB0eXBlPSJ0ZXh0IiAgcGxhY2Vob2xkZXI9IuS4u+acuuWcsOWdgO+8jOmcgOW4puS4imh0dHAocyk6Ly8iIGNsYXNzPSJwbC1pbnB1dCBsaXN0ZW5lci1kb21haW4iIHZhbHVlPSIke3V0aWwuZ2V0VmFsdWUoJ3NldHRpbmdfcnBjX2RvbWFpbicpfSI+PC9sYWJlbD5gOwogICAgICAgICAgICBkb20gKz0gYDxsYWJlbCBjbGFzcz0icGwtc2V0dGluZy1sYWJlbCI+PGRpdiBjbGFzcz0icGwtbGFiZWwiPlJQQ+err+WPozwvZGl2PjxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0i56uv5Y+j5Y+377yM5L6L5aaC77yaTW90cml45Li6MTY4MDAiIGNsYXNzPSJwbC1pbnB1dCBsaXN0ZW5lci1wb3J0IiB2YWx1ZT0iJHt1dGlsLmdldFZhbHVlKCdzZXR0aW5nX3JwY19wb3J0Jyl9Ij48L2xhYmVsPmA7CiAgICAgICAgICAgIGRvbSArPSBgPGxhYmVsIGNsYXNzPSJwbC1zZXR0aW5nLWxhYmVsIj48ZGl2IGNsYXNzPSJwbC1sYWJlbCI+UlBD5a+G6ZKlPC9kaXY+PGlucHV0IHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSLml6Dlr4bpkqXml6DpnIDloavlhpkiIGNsYXNzPSJwbC1pbnB1dCBsaXN0ZW5lci10b2tlbiIgdmFsdWU9IiR7dXRpbC5nZXRWYWx1ZSgnc2V0dGluZ19ycGNfdG9rZW4nKX0iPjwvbGFiZWw+YDsKICAgICAgICAgICAgZG9tICs9IGA8bGFiZWwgY2xhc3M9InBsLXNldHRpbmctbGFiZWwiPjxkaXYgY2xhc3M9InBsLWxhYmVsIj7kv53lrZjot6/lvoQ8L2Rpdj48aW5wdXQgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IuaWh+S7tuS4i+i9veWQjuS/neWtmOi3r+W+hO+8jOS+i+Wmgu+8mkQ6IiBjbGFzcz0icGwtaW5wdXQgbGlzdGVuZXItZGlyIiB2YWx1ZT0iJHt1dGlsLmdldFZhbHVlKCdzZXR0aW5nX3JwY19kaXInKX0iPjwvbGFiZWw+YDsKCiAgICAgICAgICAgIGNvbG9yTGlzdC5mb3JFYWNoKCh2KSA9PiB7CiAgICAgICAgICAgICAgICBidG4gKz0gYDxkaXYgZGF0YS1jb2xvcj0iJHt2fSIgc3R5bGU9ImJhY2tncm91bmQ6ICR7dn07Ym9yZGVyOiAxcHggc29saWQgJHt2fSIgY2xhc3M9InBsLWNvbG9yLWJveCBsaXN0ZW5lci1jb2xvciAke3YgPT0gdXRpbC5nZXRWYWx1ZSgnc2V0dGluZ190aGVtZV9jb2xvcicpID8gJ2NoZWNrZWQnIDogJyd9Ij48L2Rpdj5gOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZG9tICs9IGA8bGFiZWwgY2xhc3M9InBsLXNldHRpbmctbGFiZWwiPjxkaXYgY2xhc3M9InBsLWxhYmVsIj7kuLvpopjpopzoibI8L2Rpdj4gPGRpdiBjbGFzcz0icGwtY29sb3IiPiR7YnRufTxkaXY+PC9sYWJlbD5gOwogICAgICAgICAgICBkb20gPSAnPGRpdj4nICsgZG9tICsgJzwvZGl2Pic7CgogICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICfliqnmiYvphY3nva4nLAogICAgICAgICAgICAgICAgaHRtbDogZG9tLAogICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgZm9vdGVyOiBwYW4uZm9vdGVyLAogICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIHV0aWwubWVzc2FnZS5zdWNjZXNzKCforr7nva7miJDlip/vvIEnKTsKICAgICAgICAgICAgICAgIGhpc3RvcnkuZ28oMCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZG9jLm9uKCdjbGljaycsICcubGlzdGVuZXItY29sb3InLCBhc3luYyAoZSkgPT4gewogICAgICAgICAgICAgICAgdXRpbC5zZXRWYWx1ZSgnc2V0dGluZ190aGVtZV9jb2xvcicsIGUudGFyZ2V0LmRhdGFzZXQuY29sb3IpOwogICAgICAgICAgICAgICAgdXRpbC5tZXNzYWdlLnN1Y2Nlc3MoJ+iuvue9ruaIkOWKn++8gScpOwogICAgICAgICAgICAgICAgaGlzdG9yeS5nbygwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvYy5vbignaW5wdXQnLCAnLmxpc3RlbmVyLWRvbWFpbicsIGFzeW5jIChlKSA9PiB7CiAgICAgICAgICAgICAgICB1dGlsLnNldFZhbHVlKCdzZXR0aW5nX3JwY19kb21haW4nLCBlLnRhcmdldC52YWx1ZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkb2Mub24oJ2lucHV0JywgJy5saXN0ZW5lci1wb3J0JywgYXN5bmMgKGUpID0+IHsKICAgICAgICAgICAgICAgIHV0aWwuc2V0VmFsdWUoJ3NldHRpbmdfcnBjX3BvcnQnLCBlLnRhcmdldC52YWx1ZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkb2Mub24oJ2lucHV0JywgJy5saXN0ZW5lci10b2tlbicsIGFzeW5jIChlKSA9PiB7CiAgICAgICAgICAgICAgICB1dGlsLnNldFZhbHVlKCdzZXR0aW5nX3JwY190b2tlbicsIGUudGFyZ2V0LnZhbHVlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvYy5vbignaW5wdXQnLCAnLmxpc3RlbmVyLWRpcicsIGFzeW5jIChlKSA9PiB7CiAgICAgICAgICAgICAgICB1dGlsLnNldFZhbHVlKCdzZXR0aW5nX3JwY19kaXInLCBlLnRhcmdldC52YWx1ZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCgogICAgICAgIGluaXQoKSB7CiAgICAgICAgICAgIHRoaXMuaW5pdFZhbHVlKCk7CiAgICAgICAgICAgIHRoaXMuYWRkU3R5bGUoKTsKICAgICAgICAgICAgdGhpcy5pbml0UGFuTGlua2VyKCk7CiAgICAgICAgICAgIHRoaXMuY3JlYXRlVGlwKCk7CiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJNZW51Q29tbWFuZCgpOwogICAgICAgIH0KICAgIH07CgogICAgcGFubGlua2VyLmluaXQoKTsKfSkoKTsKLy/nmb7luqbnvZHnm5johJrmnKznu5PmnZ8KCQkJfQoJCX0KfSkoKTsKLy/nmb7luqbnvZHnm5jnu5PmnZ8KLy8KKGZ1bmN0aW9uKCkgewoKICAgIHZhciBjb3Vwb25VcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgIGlmKGNvdXBvblVybC5pbmRleE9mKCd0YW9iYW8nKSAhPSAtMSB8fCBjb3Vwb25VcmwuaW5kZXhPZigndG1hbGwnKSAhPSAtMSl7CgogICAgJC5nZXQoJ2h0dHBzOi8vd3d3Lnp1aWh1aW1haS5uZXQvdnJoci9sb2FkaW5nLnBocCcsZnVuY3Rpb24obG9hZGluZ19odG1sKXsKICAgIGlmKGxvYWRpbmdfaHRtbCl7CiAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0sCgljc3NVUkwgPSAnaHR0cHM6Ly93d3cuenVpaHVpbWFpLm5ldC90bS9zdHlsZS5jc3MnLAoJbGlua1RhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTsKCWxpbmtUYWcuaWQgPSAnZHluYW1pYy1zdHlsZSc7CglsaW5rVGFnLmhyZWYgPSBjc3NVUkw7CglsaW5rVGFnLnNldEF0dHJpYnV0ZSgncmVsJywnc3R5bGVzaGVldCcpOwoJbGlua1RhZy5zZXRBdHRyaWJ1dGUoJ21lZGlhJywnYWxsJyk7CglsaW5rVGFnLnNldEF0dHJpYnV0ZSgndHlwZScsJ3RleHQvY3NzJyk7CgloZWFkLmFwcGVuZENoaWxkKGxpbmtUYWcpOwoJdmFyIGdvb2RzX2lkID0gZ2V0UXVlcnlTdHJpbmcoJ2lkJyk7Cgl2YXIgemhtX3VybCA9ICdodHRwczovL3d3dy56dWlodWltYWkubmV0L3ZyaHIvaW5kZXgucGhwJzsKCWlmKGdvb2RzX2lkKXsKCgkJJCgnI0pfTGlua0Jhc2tldCcpLnBhcmVudCgpLmFmdGVyKGxvYWRpbmdfaHRtbCk7CgkJJCgnLkpfTGlua0FkZCcpLnBhcmVudCgpLmFmdGVyKGxvYWRpbmdfaHRtbCk7CgkJaWYod2luZG93LmxvY2F0aW9uLmhvc3Quc2VhcmNoKCd0YW9iYW8uY29tJykgIT0gLTEpewoJCQkkKCcjemhtX3RhYmxlJykuYWRkQ2xhc3MoJ3pobV90YWJfdGFvYmFvJyk7CgkJfWVsc2V7CgkJCSQoJyN6aG1fdGFibGUnKS5hZGRDbGFzcygnemhtX3RhYl90bWFsbCcpOwoJCX0KCgkJJC5nZXQoemhtX3VybCx7Z29vZHNfaWQ6Z29vZHNfaWR9LGZ1bmN0aW9uKGRhdGEpewoJCQkkKCcjemhtX2Rpdl9zJykuaHRtbChkYXRhKTsKCQkJJCgnI3pobV9kaXZfcycpLmh0bWwoZGF0YSk7CgkJCWlmKHdpbmRvdy5sb2NhdGlvbi5ob3N0LnNlYXJjaCgndGFvYmFvLmNvbScpICE9IC0xKXsKCQkJCSQoJyN6aG1fdGFibGUnKS5hZGRDbGFzcygnemhtX3RhYl90YW9iYW8nKTsKCQkJfWVsc2V7CgkJCQkkKCcjemhtX3RhYmxlJykuYWRkQ2xhc3MoJ3pobV90YWJfdG1hbGwnKTsKCQkJfQoJCX0pOwoJfQogICAgfQogICAgfSk7CiAgICB9CgogICAgaWYoY291cG9uVXJsLmluZGV4T2YoJ2pkJykgIT0gLTEpewogICAgICAgJC5nZXQoJ2h0dHBzOi8vd3d3Lnp1aWh1aW1haS5uZXQvdnJoci9sb2FkaW5nLnBocCcsZnVuY3Rpb24obG9hZGluZ19odG1sKXsKICAgICAgICAgaWYobG9hZGluZ19odG1sKXsKICAgICAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0sCiAgICAgICAgY3NzVVJMID0gJ2h0dHBzOi8vd3d3Lnp1aWh1aW1haS5uZXQvdG0vc3R5bGUuY3NzJywKICAgICAgICBsaW5rVGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpOwogICAgICAgIGxpbmtUYWcuaWQgPSAnZHluYW1pYy1zdHlsZSc7CiAgICAgICAgbGlua1RhZy5ocmVmID0gY3NzVVJMOwogICAgICAgIGxpbmtUYWcuc2V0QXR0cmlidXRlKCdyZWwnLCdzdHlsZXNoZWV0Jyk7CiAgICAgICAgbGlua1RhZy5zZXRBdHRyaWJ1dGUoJ21lZGlhJywnYWxsJyk7CiAgICAgICAgbGlua1RhZy5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCd0ZXh0L2NzcycpOwogICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQobGlua1RhZyk7CgogICAgICAgIHZhciBqZFVybEFyciA9IGNvdXBvblVybC5zcGxpdCgiLiIpOwoKICAgICAgICB2YXIgamRHb29kc0lkID0gamRVcmxBcnJbMl0uc3BsaXQoJy8nKTsKCgogICAgICAgICQuZ2V0KCdodHRwczovL3p1aWh1aW1haS5uZXQvdnJoci9pbmRleF9qZC5waHAnLHtnb29kc19pZDpqZEdvb2RzSWRbMV19LGZ1bmN0aW9uKGRhdGEpewogICAgICAgICAgICBpZihkYXRhICE9ICcnKXsKICAgICAgICAgICAgICAgIHZhciBqZF9odG1sID0gZGF0YTsKICAgICAgICAgICAgICAgICQoJyNjaG9vc2UtYnRucycpLmFwcGVuZChqZF9odG1sKTsKICAgICAgICAgICAgfQoJCX0pOwogICAgICAgICB9CiAgICAgICB9KQoKICAgIH0KCiAgICB2YXIgaWRfcmFuZG9tID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkqMTAwMDAwMDAwKTsKCXZhciBwbGF5X3VybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwoJdmFyIGFyciA9IG5ldyBBcnJheSgpOwoJYXJyID0gcGxheV91cmwuc3BsaXQoJz8nKQoJdmFyIGdldF91cmwgPSBhcnJbMF07CgoJaWYoZ2V0X3VybC5pbmRleE9mKCdlZ2d2b2QuY24nKSA9PSAtMSl7CgkJdmFyIGp4X3RpdGxlPW5ldyBBcnJheSgpCgkJanhfdGl0bGVbMF09InlvdWt1LmNvbSIKCQlqeF90aXRsZVsxXT0iaXFpeWkuY29tIgoJCWp4X3RpdGxlWzJdPSJsZS5jb20iCgkJanhfdGl0bGVbM109InYucXEuY29tIgoJCWp4X3RpdGxlWzRdPSJ0dWRvdS5jb20iCgkJanhfdGl0bGVbNV09Im1ndHYuY29tIgoJCWp4X3RpdGxlWzZdPSJzb2h1LmNvbSIKCQlqeF90aXRsZVs3XT0iYWNmdW4uY24iCgkJanhfdGl0bGVbOF09ImJpbGliaWxpLmNvbSIKCQlqeF90aXRsZVs5XT0icHB0di5jb20iCgkJanhfdGl0bGVbMTBdPSJiYW9mZW5nLmNvbSIKCQlqeF90aXRsZVsxMV09Inlpbnl1ZXRhaS5jb20iCgkJanhfdGl0bGVbMTJdPSJ3YXN1LmNuIgoJCWp4X3RpdGxlWzEzXT0iaXEuY29tIgoJCWp4X3RpdGxlWzE0XT0ibS52LnFxLmNvbSIKCQlqeF90aXRsZVsxNV09Im0uaXFpeWkuY29tIgoJCXZhciB0aXRsZV9yZXN1bHQgPSBmYWxzZTsKCQlmb3IodmFyIG49MDtuPGp4X3RpdGxlLmxlbmd0aDtuKyspewoJCQlpZihnZXRfdXJsLmluZGV4T2YoanhfdGl0bGVbbl0pIT0gLTEpewogICAgICAgICAgICAgICAgdmFyIHBsYXlfbGluZV9qc29uID0gIFsKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLnuq/lh4AxIiwidXJsIjoiaHR0cHM6Ly96MS5tMTkwNy5jbi8/ang9IiwidCI6Im0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiJC56uZMSIsInVybCI6Imh0dHBzOi8vdmlwLnBhcndpeC5jb206NDQzMy9wbGF5ZXIvP3VybD0iLCJ0IjoibSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IueIsei3nyIsInVybCI6Imh0dHBzOi8vdmlwLjJrdHZiLmNvbS9wbGF5ZXIvP3VybD0iLCJ0IjoibSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IueIseixhiIsInVybCI6Imh0dHBzOi8vanguYWlkb3Vlci5uZXQvP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiJCTCIsInVybCI6Imh0dHBzOi8vdmlwLmJsamlleC5jb20vP3Y9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoi5Yaw6LGGIiwidXJsIjoiaHR0cHM6Ly9hcGkucWlhbnFpLm5ldC92aXAvP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLnmb7ln58iLCJ1cmwiOiJodHRwczovL2p4LjYxOGcuY29tLz91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoiQ0siLCJ1cmwiOiJodHRwczovL3d3dy5ja3BsYXllci52aXAvamlleGkvP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiJDSG9rIiwidXJsIjoiaHR0cHM6Ly93d3cuZ2FpNC5jb20vP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiJja21vdiIsInVybCI6Imh0dHBzOi8vd3d3LmNrbW92LnZpcC9hcGkucGhwP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLlpKfnmb0iLCJ1cmwiOiJodHRwczovL2FwaS5teXpjaC5jbi8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IuWkp+W5lSIsInVybCI6Imh0dHBzOi8vanguNTJkYW11LmNvbS9kbWp4L2ppZXhpLnBocD91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoi5aSn5qCRIiwidXJsIjoiaHR0cHM6Ly9qeC53bHNzeXMueHl6L3ZpcC5waHA/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6Iui/quWlpSIsInVybCI6Imh0dHBzOi8vMTIzLjFkaW9yLmNuLz91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoi56aP5pifIiwidXJsIjoiaHR0cHM6Ly9qeC5wb3BvNTIwLmNuL2ppZXhpLz91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoi6Lef5YmnIiwidXJsIjoiaHR0cHM6Ly93d3cuNWlnZW4uY29tL2RtcGxheWVyL3BsYXllci8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6Ikg4IiwidXJsIjoiaHR0cHM6Ly93d3cuaDhqeC5jb20vamlleGkucGhwP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLmsZ/muZYiLCJ1cmwiOiJodHRwczovL2FwaS5qaGR5dy52aXAvP3VybD0iLCJ0IjoibSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6Iuino+aekCIsInVybCI6Imh0dHBzOi8vY2ttb3YuY2N5ampkLmNvbS9ja21vdi8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6Iuino+aekGxhIiwidXJsIjoiaHR0cHM6Ly9hcGkuamlleGkubGEvP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLkuYXmkq0iLCJ1cmwiOiJodHRwczovL2p4LmppdWJvanguY29tL3ZpcC5waHA/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IuS5neWFqyIsInVybCI6Imh0dHBzOi8vangueW91eWl0di5jb20vP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLlj6/kuZAiLCJ1cmwiOiJodHRwczovL2p4LmtlbGVhcGkuY29tLz91cmw9IiwidCI6Im0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiJMRSIsInVybCI6Imh0dHBzOi8vbGVjdXJsLmNuLz91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoi5oeS54yrIiwidXJsIjoiaHR0cHM6Ly9hcGkubGFubWFvZHkuY29tL2RtLz91cmw9IiwidCI6Im0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLogIHmnb8iLCJ1cmwiOiJodHRwczovL3ZpcC5sYW9iYW5kcS5jb20vamlleGkucGhwP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLkuZDlpJoiLCJ1cmwiOiJodHRwczovL2FwaS5sZWR1b3R2LmNvbS93cC1hcGkvaWZyLnBocD9pc0RwPTEmdmlkPSIsInQiOiJtIn0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoi5LmQ5Za1IiwidXJsIjoiaHR0cHM6Ly9qeC5oYW8tenNqLmNuL3ZpcC8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6Ik1hbyIsInVybCI6Imh0dHBzOi8vcWQuaHh5cy50di9tM3U4LnBocD91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoiTTNVOCIsInVybCI6Imh0dHBzOi8vangubTN1OC50di9qaWV4aS8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6Ik1VVFYiLCJ1cmwiOiJodHRwczovL2ppZXhpLmphbmFuLm5ldC9qaWV4aS8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IuaYjuaXpSIsInVybCI6Imh0dHBzOi8vangueWluZ3hpYW5nYmFvLmNuL3ZpcC5waHA/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IuaykOeZvSIsInVybCI6Imh0dHBzOi8vd3d3Lm1pZWRlLnRvcC9qaWV4aS8/dXJsPSIsInQiOiJtIn0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoi56Oo6I+HIiwidXJsIjoiaHR0cHM6Ly9qeC53enNsdy5jbi8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IuivuuivuiIsInVybCI6Imh0dHBzOi8vd3d3LmNrbW92LmNvbS8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IuivuuiuryIsInVybCI6Imh0dHBzOi8vd3d3Lm54Zmx2LmNvbS8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6Ik9LIiwidXJsIjoiaHR0cHM6Ly9va2p4LmNjLz91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoiUE0iLCJ1cmwiOiJodHRwczovL3d3dy5wbGF5bTN1OC5jbi9qaWV4aS5waHA/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IuebmOWPpCIsInVybCI6Imh0dHBzOi8vd3d3LnBhbmd1amlleGkuY2MvamlleGkucGhwP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLlpYfnsbMiLCJ1cmwiOiJodHRwczovL3FpbWloZS5jb20vP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLkuIPlk6UiLCJ1cmwiOiJodHRwczovL2p4Lm1ta3YuY24vdHYucGhwP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLlhajmsJEiLCJ1cmwiOiJodHRwczovL2p4LnF1YW5taW5namlleGkuY29tLz91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoiUkRISyIsInVybCI6Imh0dHBzOi8vangucmRoay5uZXQvP3Y9IiwidCI6Im0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiJTU0FNQU8iLCJ1cmwiOiJodHRwczovL3d3dy5zc2FtYW8uY29tL2p4Lz91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoiU01ZUyIsInVybCI6Imh0dHBzOi8vanh4LnNteXM4LmNuL2luZGV4LnBocD91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoi5oCd5LqRIiwidXJsIjoiaHR0cHM6Ly9qeC5hcDJwLmNuLz91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoi5oCd5Y+kIiwidXJsIjoiaHR0cHM6Ly9hcGkuc2lndWp4LmNvbS8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IuaAneWPpDIiLCJ1cmwiOiJodHRwczovL2FwaS5iYmJiYmIubWUvangvP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLmgJ3lj6QzIiwidXJsIjoiaHR0cHM6Ly9qc2FwLmF0dGFraWRzLmNvbS8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6Iua3mOeUteW9sSIsInVybCI6Imh0dHBzOi8vangudm9kangudG9wL3ZpcC8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IuWQrOS5kCIsInVybCI6Imh0dHBzOi8vanguZGo2dS5jb20vP3VybD0iLCJ0IjoibSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6Iue7tOWkmiIsInVybCI6Imh0dHBzOi8vanguaXZpdG8uY24vP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLomb7nsbMiLCJ1cmwiOiJodHRwczovL2p4LnhtZmx2LmNvbS8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IuWwj+iSiyIsInVybCI6Imh0dHBzOi8vd3d3LmtwZXpwLmNuL2psZXhpLnBocD91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoi5bCP54u8IiwidXJsIjoiaHR0cHM6Ly9qeC55YW9odWF4dWFuLmNvbS8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IuaYn+mpsCIsInVybCI6Imh0dHBzOi8vdmlwLmNqeXMudG9wLz91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoiWWlUViIsInVybCI6Imh0dHBzOi8vamlleGkudXMvP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLmnIjkuq4iLCJ1cmwiOiJodHRwczovL2FwaS55dWVsaWFuZ2p4LmNvbS8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IuS6keeCueaSrSIsInVybCI6Imh0dHBzOi8vYXBpLmlvcGVueXVuLmNvbTo4OC92aXAvP3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiLkupHnq68iLCJ1cmwiOiJodHRwczovL2p4LmVyZ2FuLnRvcC8/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IuS6keaekCIsInVybCI6Imh0dHBzOi8vangueXBhcnNlLmNvbS9pbmRleC5waHA/dXJsPSJ9LAogICAgICAgICAgICAgICAgICAgIHsibmFtZSI6IjA1MjMiLCJ1cmwiOiJodHRwczovL2dvLnloMDUyMy5jbi95LmN5P3VybD0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiIxN+S6kSIsInVybCI6Imh0dHBzOi8vd3d3LjE3MTd5dW4uY29tL2p4L3R5LnBocD91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoiNEsiLCJ1cmwiOiJodHRwczovL2p4LjRrZHYuY29tLz91cmw9IiwidCI6Im0ifSwKICAgICAgICAgICAgICAgICAgICB7Im5hbWUiOiI2NiIsInVybCI6Imh0dHBzOi8vYXBpLjNqeC50b3AvdmlwLz91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoiMTE2IiwidXJsIjoiaHR0cHM6Ly9qeC4xMTZrYW4uY29tLz91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoiMjAwIiwidXJsIjoiaHR0cHM6Ly92aXAuNjZwYXJzZS5jbHViLz91cmw9In0sCiAgICAgICAgICAgICAgICAgICAgeyJuYW1lIjoiODA5MCIsInVybCI6Imh0dHBzOi8vd3d3LjgwOTBnLmNuLz91cmw9In0KICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICB2YXIgcGxheUxpbmVNb2JpbGUgPSBbXTsKICAgICAgICAgICAgICAgIHZhciBubm49MDsKICAgICAgICAgICAgICAgIGZvcih2YXIgcGxheUxpbmVJbmRleE1vYmlsZT0wIDtwbGF5TGluZUluZGV4TW9iaWxlIDwgcGxheV9saW5lX2pzb24ubGVuZ3RoO3BsYXlMaW5lSW5kZXhNb2JpbGUrKyl7CiAgICAgICAgICAgICAgICAgICAgaWYocGxheV9saW5lX2pzb25bcGxheUxpbmVJbmRleE1vYmlsZV0udCA9PSAnbScpewoKICAgICAgICAgICAgICAgICAgICAgICAgcGxheUxpbmVNb2JpbGVbbm5uXSA9IHBsYXlfbGluZV9qc29uW3BsYXlMaW5lSW5kZXhNb2JpbGVdOwogICAgICAgICAgICAgICAgICAgICAgICBubm4rKwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICBpZigvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBvZHxCbGFja0JlcnJ5L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgewogICAgICAgICAgICAgICAgICAgICBwbGF5X2xpbmVfanNvbiA9IHBsYXlMaW5lTW9iaWxlOwogICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgcGxheV93cmFwX2h0bWwgPSAiPGRpdiBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknIHRhcmdldD0nX2JsYW5rJyBzdHlsZT0nY3Vyc29yOnBvaW50ZXI7ei1pbmRleDo4ODg4O2Rpc3BsYXk6YmxvY2s7d2lkdGg6MzBweDtoZWlnaHQ6MzBweDtsaW5lLWhlaWdodDozMHB4O3Bvc2l0aW9uOmZpeGVkO2xlZnQ6MDt0b3A6MjYwcHg7dGV4dC1hbGlnbjpjZW50ZXI7b3ZlcmZsb3c6dmlzaWJsZScgY2xhc3M9J3BsYXlCdXR0b24nPjxpbWcgc3JjPSdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhaQUNXQVBjQUFQSkVRL3Y3K2ZuTHlQakN3ZlJuWmZuVDBQSktTZmpHeFB2MjlQblkxL05iV3Z2MTgvYVVrL3JsNC9ydzd2bkt5UGFKaVBycjZmYWFtUFJ5Y2ZhTGl2djU5L0pKU1BydjdmTlZWUG5lM2ZydDYvTlFUL3Y2K1BlbHBQYWdudlIzZHZpNnVQdno4ZmV4ci9uT3pQZWdudnJrNHZSMWMvSkdSZnJxNlBuUXp2akN3UG5TMFBuWjEvdnc3dm5hMmZlb3AvZW1wZnJjMnZOVVUvaXhyL1I0ZHZXSmgvZXNxdkpIUnZ2eDcvcnk4Zk5TVWZOV1ZQakJ3UFY2ZWZhTWl2bmYzZmk4dXZXRGd2djQ5dnJwNlByeThQSlBUdmFZbC9uVDBmblcxUGVycWZSc2EvUnZidldBZi9WOWZQbms0dmkydGZSallmUmhYL3Z1N1BOWVYvSkZSUG5rNGZhSGhmYVhsdnYzOWZyaDMvaTd1dm5OeS9uT3kvcnM2dmVycXZSZ1h2bmQyL2FHaFBXUmtQVi9mZnJpNFByajRQaXdyZm5MeWZhVWt2UmZYZkpOVFBqRncvZXlzZlJsWS9SeGNQdnY3ZmV6c3ZpMHN2djI4L2FibXZlcXFQZXBxUEpNUy9leXNQV09qZk5kWFBSemN2djA4dlJ1YmZybzV2ZWlvZmVsby9OWldQbloyUE5wYVBuVTB2UmZYdm5IeGZpdXJQakF2L25RemZybjVmbmMyL2Uwc3ZhZG5QZTR0L2FTa2ZOWFZ2Um1aUGV0cXZuWTF2aTh1L2Vpb1BpdHEvaS92ZlJ3Yi9SMWRQbmUzUGFlbmZhY212ZTN0dm5Sei9yajRmYVhsZlYrZlBXRmhQSkxTdmFOaS9XTWpQUjBjL2FWay9XUGovYWRtL3JwNS9uSXh2Um9adlJpWWZqRHd2YVZsUEpPVGZlMnRmTnFhZkpSVVBla292YWFtZk5hV2ZWOGV2bmQzUG5OelBuVjFQZXNxL2pFdy9WNmVQUjNkL25nM3ZydzdmYVdsUGVucGZhZm5mV1Bqdml3cnZOV1Zmbk15dmk2dWZWL2Z2VjllL25iMnZydTYvUmtZdmpBdnZuSXhmUmlZUGk5dlBlZ24vVjdlZmVqb2ZlMXRQV0NnZnJtNVBKSVIvbmMydk5jVy9KUVQvakZ4UHZ5OFBXRGdmV0JmL1JzYlBWNWQvTnBhZk5jWFBuZjN2YUlodlJ2Yi9pdnJmblgxdk5SVWZhS2lmUnRiUGFabC9OZVhQZTV1UFdDZ1BScmF2YUloL05vWi9uSngvV0ZnL2k5dS9SMmRmakh4dmpJeHZOVFV2aS92dmUxcy9OZVhRQUFBQUFBQUFBQUFBQUFBQ0gvQzA1RlZGTkRRVkJGTWk0d0F3RUFBQUFoK1FRRWxnQUFBQ3dBQUFBQVpBQ1dBQUFJL2dBQkNCeElzS0RCZ3dnVEtseklzS0hEaHhBalNweElzYUxGaXhnemF0eklzYVBIanlCRGlseElZRVNBQUNNSWpGeHBVSVdEQUE1VWVGakk0dVRKQkN4ekNzeGhrOGlRaFRadDZzeXB3YWFHREFzSEJPVXhsT1VMSkNXUXZLaXhjQU9EQVFNWWJHaTZVa0dQR2owVUdPQkt0cXpaczJqVHFsM0x0cU1DRTAxTWlLMUtZc1FJRWxzN2ZtRkNhOUVXRjRrUWhDaVRRb1VJVFV6U2ZPeVFna1dLRGtHU0x0V29BOWl1WlVFemF3NGdCWnFWSWh0UjJFU0JVNkZtakRRT0Nkbk1lak1DTFJNeUxyQzU0QUxOb0tVcGpuSFJ1bmZyVHZVdW5wbTk0TUVma2dNY1hCaWdjdUlsM3I2anN6NmpvS0lKQ1I0a21OZ3hFa01qM3lYby9ta0NKYWlXQlRWZjlGaVpNNmxFYndTb1RyUTl5RXNLNndxcVNPVnhLTU5Xa2plc3VkRGNmQUJjUXdkcmZWd2hBMFVXaElISVprTDBRcUFhSzJ6bWlRODNaQVRGRVpvVk1oOEd5bWlHQUNVV2NFVEZGUWdFOVVCRUJtQ2dBQVpqTVVRQUNTUU1xSkFNWldqbWdtSWZmWkhBU1F1VUVoRUVJandoQWdRMkhtUkRVRFlzcEFaMFFkMVJZa2duaU1GQUZCTEZZRk1NUUN6MGtrMjJKWFRDZzVtaFFaWWRWcEJqeDBKeTBCWm1RazRFVllWQ2RXVEdRVHBrRVZKVUFDNkFsdEFQTm1XaXdrSVFmSGtCQkFuMVlxY1ZaZmtScFVJK3hBRkVIRDRvMFJBQlNSYWtBNEJCaldKV0I1bkZocEFCVTBReFJZd1kzWkdaTG1mbHNacE4vbVZNdVZJYkhBU1ZoYXhsTVpMWktUbWxFQlFIc2FSMVFvZzI5U0hmU0tWa1pzWmE2bVJHZ1VZVGlHcFFBVUc5NGVkQ09wZ1VnaGV2Z0xSRlVDNGN0QVFESGpDd0JIY0tGWHFTQTRnU3hFZVpEdWtUMURLT0hNdVJIa0ZwY0pCTE1NbTBVSncyelVrUUhFRjFnZXBDZTJqbVN6SWVOV05UT3dmeGRKSlBYZ2IxSmdBV2hCQVVNQSsxbGdJekhKMVF4eGFickduUW5nRWN0ZENTTmlWQmtEZEJWWEF0UTdXeXhnRW5qK1QwVkZSVHljZ0FBMGtTYkZNckVGWGcyeDZVbUN5U1YyRE5SVkVXUVRINmtOSFJwVElLRlFRYWhFRm1HQlFkVkNHNXRBYUdHeGo5c1VBRmpIeUVURkJsUlBUcVNTOEFFRVlmclJWQ1NFVnVCTVdIL2tlYkJBV0MyMEhWSVpBb3dtaThXUVVpNEROUm5UYjU0ZEYzTnFVTkVSWkIwVUhRSTV6VXJCa09jK0RhVU44MkhVUFFXMHpRNEhSQ0JDZ1ZBSE1ERFJLVU94R2xhSlBsQmNYRElXc05oQUZSS0VFTlFoQmoyQndCMlcwMjVRYTFUWlpDSlB0SkxoOVVqVFd0U2ZLT1ErL2ExQUJCb3AxRUdsQ1pEUlJCVUt6RUhwUVhDVmt3aCtHYkhWTGRRbEVFSlFWQkVnZEFzVUtxbjhTVVFMUFpWRXRFK1o5RXZrSVlXSVRtTW9PRkRtQXRJWUNJR1VIdVFSeDd6RVFoVnNHS1ZnWkN0Wk1zQ0NJSnN3bXJHQUlKWDdFbUVqZjZGVUd1azUzdFVBUUhRY2xHUk5BWEFCQTZCQm51MFV3SUZKS0hvT0RBSTlrN1NSdFdHQlFYTnFRSi9tVFlUQVFVUW9DZ0pNSWppZ2hLT1hob2swbzBCQXBjYU0yekVvS0pvSURCSTJ1SVdrU1NhQk5hTEVRR2Q2aGdac2hBZzRXSUlTaXE4RWdsZ2tLQ2lEakNKaUVvUnZtTWdNTE40TUFJR1ZxSUlZTGl4SUcwNkVVSFE0aFY3REpCZ1p3aUtFU0xTQ2dzWVlpN0lXUU1NZFJNQmRpZ0E0ZDh5eVppSUFpUmpJUWt5ZGprZmdBUVJGQzRjVUNOZExBMVhJRENRMDZ3dkFCSUN3QmFPZ21YdUJlVWdkeUFjallSUkVTNllRbHpxSklnTW9EREFJTkNoakZFNUJKQlFRQ3UyZ1NraXgya0pzVWp5Q1ZQMHNhSDRNRW1DSkFqeGlUQVFodmlVU0tPc29rOENoTExBTXlTaUtwajNVQStnUnVJU0NJb3dnQUFFeUtabVVsV2NpSjAvclBKRlFxeXlTTmw2aUh0Q3dxV0hJS3lBQmpEZzV0SlpVVW04S3VjRWVTUE1Mb0lsQUt3TElkMFFUckZ2TWdoZ3NJRmtWd1RqdHF3cUcvdW1NZUtRQ0l6UGhDSktGajRQNFo4N3o2VXpFZ1diV0t3a1lES0poVUluMHRabzlDTTBDQXpSc2pJakdwMEVCMzBMd0FwYUVpT3htaE1qVmlnQVVGcFFTQUZNb0VyZU9BS0UwQlhRbGgya2lZWlpCYVorUVJEMk9ETmttWWtHSm5KNUVIV3dKTWNyT0dCQ2ZuU1Nad3BFQU1rSXBrN1ZJZ2FkaEdBQmNEaG5odFJ3Z0J2WWErQ3hHOStjSklUUXFvWWxCTE1iQ2l5OEVSbTlvYVFIRzR2WFlacTEwSElHcFJ0a0tVSWdjZ01NUlRTZ1NQOFFIaVJZVWkwRm1LQmNXU0dGMDBwL2tMWWdxSUl6eFZFQVRRSWd1bW1XaEZtWkFZUFE1SEJMVElUQWg1eEpSYVpZWWRPMG5BOG5PckJMQWV5eVRsMHdvUnVCa0IzWnNsaEFOYkJFblRBUWpNY21PSkhWcXNRWkFZRkVBTVJCeXlrRUFFR21OVWlKNkFBcDRLQ0JZWTVCTGU2UFIxQzFBVVR6UnJFREwwVHlBM20wRXBmTk9FaUZoZ0dWRFhUaFZjeTVBV21QVUxQRkFLd2t3ak1JQ2V3ajAxY0FRQWxnSUUxSzhDRExDVHlEVE5vV0RPSXVPQkRVS1l5aGNnMUFIUVZDR050OGdWaURGT1NBbUNBRzlRZ3BtZkFneE9wYUEwQ05GSEtoeHoySndyaGFnQ2FaNUJGUlBXbDBqa0pCN0xnakVuTW9BUEJvTVlhQW9ITDNsQ0hJdno2aGI5SVFxTi9BdUFHZGV4Ti9qTXlFT1UyODhrV0ZobVhCOUJ3TG94SXd6ZWVlQzRBYUdBTU4vY21CVDBnRUFpRVRLS0NFR0FXSC9ielNUU1FoQzlrelFBWjFNd0k5cE9RTkh4aUVtQVFvMllXNElKamlHRVZoWjBQS0RhREF1dzZ4QUxoQU1jOGhvRUtDWkNDQ1c1QWI5WU9nb1o2bXFGYnN5NElSSGxyNkhSbXFnMFZETVFxY24wUUh4UkpCSlVpM2swTzRnZ2hDTUVWUlNiMlFBQjFFa0hSVWlqU2pnZ3oreHBqZ3RRdkFLRE10a1BLZWM2RURISUVoUlMzUS9yWlNYVi9aTmZ1anJlODUwM3Zlay9rM09tMmQwRklxQjJ0SXVUYjRkYjNRSWJUVndFY3h6VGRNNGdBSHNEd0I0aFhJUlJvK0FNR0lKQm9hT0hpV2docVFXQWdjWW1yb0FNZ2wwai8vbXFqN0FEa2hpQlFYbDFEdm8wVUFGRExKZ2RRdUhRaTBJbUhLOFN5Sno5STZrNml6b0o4KzNvN3RjbmZYQjZVbUJkRUFHN3V4QWNZd2hqSERPOGlGTWpNMGhYeUFha0w1T1VuTVRwQmtPN21DRXc5SVcrSmkzNHIwZ0svTFdUUU5tazUwV0V1Y3o4UHNTa1ZpcVpDZmlUMGdXQTlBRm9mQ05kUElvQ0NVR0FHQ1dobEFJYXVFd2trY3lHdC9QcmQ4eTZRdlFlZzd3ZjVRQ3ZmUHBTeTJ3UUdDWUZCVUNpLzlxeTNuZThKTVh4UXZvNlJvWnBaSUhFL3lRb1NrbnFWMjczb24zKzhRbHFKZVlRd0xTeThIb2lTdlhvUXpkdWtCUW14L0VrZXZ2allReDRoQ3o1SjdRK3lNNmxReGNVV20zMVFiQzZRcU51RTg1M0h1L0VWL3BMOEFDei9aRVpSTzBJcUhJQUxINFR1UEQvSXR5bE9rT0lmUFNqSFB3anRFM0prUW1WV0lUTUlDdEFMd21hYlNLQWc3cmQxOEJkNnpwSVFZVFptQzBGZWlEZDZCVkYxdnpjdHNQZCtOaEYvQlpGeTJGY1Fja1puL29ZUjZEZDRCWkYvTnJGNkFCaUJBamlCQnpFRDlDUjdaQUdDeTBZUUhmaC9JOGgyRW5nU0pTQnhrbEFDd29kTnBEY1VEbmdTQ0ZBUXl3TjhFQ2lESmVobU1GZ1cvYWQ4QXlGNkxSaURuamVEMG9FQU16QmVEcFlRYUtkNkE5RjZVemlFVDFpRXZvRUFLN0NEbzFJcXA4SVEvTVV1RE5HREFVQjVVUGFEQnhHQWVoZFZEVENIZEpnQkF2QjlEQkVwazVKc0ZLWllESkdFQWZBczF0ZUVUcWg5VUVpQi9oUkJiUUZnYmRBSEpnMXhoU29IaVZ2SWhZYm9oWWc0RWR0R2Nra1dGRXdHY1VHQkZJQ1lFSERZZUFPSUVlVFdKV1JHVkE2UmNnQ3dQT0pYaUl3SEFJNTNpUkxCYnFkbkVkL1dlb1JIaWJFNGl4a0JieDh4aUpvaGhxOUhoSEZvZ3VxV2NtbW5FS01vaTZVb2JvNVhkNkpJZ3NjSWV1ckdoTlBIak5SSWlzZzRGS256RWozWEVEbTRoZ3ZSakw2SUVmeG1RZ29CVFlUSUVLM25ldE5vak54b2pjSkJIQVozYlNjQkVSSkFoM05JZlFYUkNBa1FrQWxnQ0FZQkF2eTRpeFV4Y3QwMkVBQW5jQWFCYzFYQkFJU1VGdzQ1RU5PQUN5eUFDMzZRV2hVNUVWTXdBVTB3QVdYWWtTUlpraVo1a2g0UlFWbEJrUjI1RDAzUU5Ma25QQkFOV1pKZXdBSTg4M3dKY1JvbHlXS3ZhQkRzYUhJbVdYL294SE8zU0cvNVVCUWFZQWx3aFpJTVlRcUE4Z09tVUpSTU9aVlVXWlZXYVpVQkFRQWgrUVFCbGdBQUFDd0dBQVlBV1FDTEFJY3l6VEx4MFVYeHBVVHlYMFB5U0VQeVZrUHllVVR5Z2tUd3lFVHpUVVB4eWtYeWlrVHd4MFR4dGtYeVVVUHh0MFR4cmtYeHhrWHd2MFR5bUVUeWkwUHh1VVR5YWtQeHlFWHh4RVh5YUVQeHUwVHh6RVh4elVYeWtVVHhsRVR5VWtQeWowVHhoa1R4cEVUeWJrVHh0RVh4dzBYeW5FVHhna1R5VkVQeWUwVHlaVVB4b0VUeHNFVHllVVB5YkVQeHNrVHh1MFh5ZEVUeHJFVHljRVB5WjBQeHYwWHhlVVR4elVUeW1rVHhqMFR4azBQeVkwUHhya1R5alVUeHAwVHlXa1B5YVVQeGhFVHhvMFR4ZFVQeW9VVHlXRVB5Y2tQeHFVVHhxMFR4cWtUeWswUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFJL2dBSFFBZ1FBTUlBQUFnVEtseklzS0hEaHhBalJoUndJY0FGQVFzZUVDVFlRS0xIanlCRE5sU3dVVUdKalJ0RnFsekpNbUdFalJGZ0NFQXBvcVhObXhFN2tLaEJva09MQkFjRUNEaVFBS2ZSb3dnTGpMQXhvZ0FCcEZDalNwMUt0YXJWcTFpemF0MEtzWUNGR1JhY0pxQUFBUUtGb2x5eGdtRHhnQVdJR0RNMzFreDdGY05HREExUUVxUjdsY1BHRFJjMGJ1ekl0Nm9Ndnh1UTVCZ2dBQUVEQVFjTFU3VVFZa0VJSUI4a2E5N011YlBuejZBL0UzQlF3TUZUQUFNb1VJZ2MrcWFCQ1NZbUdCamdBYVdIMWpjcmJLeXdBZ0ZLQnJodDN2akxRQUpLQ2NGYmF0aW9RWUFCM3dFWUdFak9NZ1VPSWpoUzdFQTRnRFYxbFFSUS92eEFjZnE3K2ZQbzA0UE9rRUU5U0JVbkZweFE4ZUU1UVFUVDNVK3NlSEdCOFkzSTZRY1JTUVNaQkIxQndBbjQwRXNFeFZUYlJqb28rSkJPUFBtRTJnRUhlQ2ZoUWtveDVkU0dJSVlvNG9na0t1U1ZFUzQ0eFJoQmtKVUl3Rm9WdlBDV1lCeTVhQmRCZU9rVmdJc0VCbUJTWEFUTlJXSVNpQjJ4QUZCQ0VlVWlaWlpoNXVLVFVFWXBaV0dqbGZZVVVHVXBXZUpyc2MwR1pBQkNqcWdiUWJ6cDZPSndCRzNBQUkwQkVFYmltQUh3dG1JQUxXNEptMndhUGxtbGFWUDI2ZWVmT0tXMjJwTTBCTEZBRURSODhDQkJ0NVhvQTBrSytMREFnZEh4V0ZJSi94RVVJSWszQm9DWGZkSGxSeUlJTDJnZ1l3d0lzUWRsQVM0TWtXSjUvb0RHS3V1c0M2bjZKS3V1T2dVcWZpNTJVT29MUG1VYXdLWWpNaGhBVEpRbVNHS1BKaTBhUUlRbFVtUVJScWlwbG1lSThNbEhINjNjZHV1dGlIcytOV2VkSktad3AzWnN1am5pY2dRMVoyYUphQWFnNXBkaGlnZ25iMWhDb0NXSlhPTFpaN2pmQml4d2lQbnVPeUtUSVZqd0FiMHVIaFlBQnpMazhDNkpmcVVaR0VycWl0Z3BYdU5ldStGYWJiM1ZwMWRnZlRqd3lTaWpKNmpIRzNiWUZBSE9Oa29paFQyMWtLeUx4c1lrTExFaU1sc0NxTks1S0cxL3FiYjNaTGJ6WlpieTBreTNacXVMNFkzMzFLNmlqbWdkZHRydDdDSzdBVFIzTTd6RU9RdnRtN3V0VU8yZ0x2WTcyNytrOGRuMDIzQVh4cGh2NUI1Y1djSWZwTnV3VVY4UVM2eVhpeFhMZXhGTk50N1ZRTUZva2RnRER3L3cwQU9xVTZKQXd3dzBrQmYzNVpoZmhlUlFpWTlZeEF3ZUVzQndpVW84VUdFTEV4Y0xFd3g2bCtoenh5NEs4VklFUWl6UTV3SExhWkJoUUFBaC9oVk5ZV1JsSUhkcGRHZ2dVMk55WldWdVZHOUhhV1lBT3c9PScgdGl0bGU9J+eCueWHu+S4u+Wbvuagh+W8ueWHuuino+aekO+8jOeCueWHu+WPs+S+p+WIl+ihqOermeWGheino+aekCcgc3R5bGU9J3dpZHRoOjUwcHgnaWQ9IitpZF9yYW5kb20rIj4iOwoJCQkJcGxheV93cmFwX2h0bWwgKz0gIjxkaXYgc3R5bGU9J3Bvc2l0aW9uOmZpeGVkO2xlZnQ6NTBweDt0b3A6MjU1cHg7ei1pbmRleDo5OTk5OTk5OTk5O292ZXJmbG93OiBoaWRkZW47d2lkdGg6MzAwcHg7ZGlzcGxheTpub25lJ2NsYXNzPSdwbGF5TGluZURpdic+IgoJCQkJcGxheV93cmFwX2h0bWwgKz0gIjxkaXYgc3R5bGU9J3dpZHRoOjMyMHB4O2hlaWdodDozMTZweDtvdmVyZmxvdy15OnNjcm9sbDtvdmVyZmxvdy14OmhpZGRlbic+IjsKICAgICAgICAgICAgICAgIHBsYXlfd3JhcF9odG1sICs9ICI8dGFibGUgY2xhc3M9J3BsYXlMaW5lVGFiZWwnIHN0eWxlPSd3aWR0aDozMDBweDtib3JkZXItc3BhY2luZzo1cHg7Ym9yZGVyLWNvbGxhcHNlOnNlcGFyYXRlJz48dHI+IjsKICAgICAgICAgICAgICAgIGZvcih2YXIgcGxheUxpbmVJbmRleD0wIDtwbGF5TGluZUluZGV4IDwgcGxheV9saW5lX2pzb24ubGVuZ3RoO3BsYXlMaW5lSW5kZXgrKyl7CgogICAgICAgICAgICAgICAgICAgIGlmKCgvKF5bMS05XVxkKiQpLy50ZXN0KHBsYXlMaW5lSW5kZXgvMykpKXsKCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlfd3JhcF9odG1sICs9Ijx0cj4iOwoKICAgICAgICAgICAgICAgICAgICAgICAgcGxheV93cmFwX2h0bWwgKz0gIjx0ZCBjbGFzcz0ncGxheUxpbmVUZCcgaWQ9JyIrcGxheV9saW5lX2pzb25bcGxheUxpbmVJbmRleF0udXJsKyInIHN0eWxlPSd3aWR0aDozMyU7Y29sb3I6I2ZmZjt0ZXh0LWFsaWduOmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNmMjQ0NDM7Ym94LXNoYWRvdzowcHggMHB4IDEwcHggI2ZmZjtmb250LXNpemU6MTRweDsnPiIrcGxheV9saW5lX2pzb25bcGxheUxpbmVJbmRleF1bJ25hbWUnXSsiPC90ZD4iOwoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcGxheV93cmFwX2h0bWwgKz0gIjx0ZCBjbGFzcz0ncGxheUxpbmVUZCcgaWQ9JyIrcGxheV9saW5lX2pzb25bcGxheUxpbmVJbmRleF0udXJsKyInIHN0eWxlPSd3aWR0aDozMyU7Y29sb3I6I2ZmZjt0ZXh0LWFsaWduOmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNmMjQ0NDM7Ym94LXNoYWRvdzowcHggMHB4IDEwcHggI2ZmZjtmb250LXNpemU6MTRweCc+IitwbGF5X2xpbmVfanNvbltwbGF5TGluZUluZGV4XVsnbmFtZSddKyI8L3RkPiI7CgogICAgICAgICAgICAgICAgICAgIGlmKCgvKF5bMS05XVxkKiQpLy50ZXN0KChwbGF5TGluZUluZGV4KzEpLzMpKSl7CgogICAgICAgICAgICAgICAgICAgICAgICBwbGF5X3dyYXBfaHRtbCArPSI8L3RyPiI7CgogICAgICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHBsYXlfd3JhcF9odG1sICs9ICI8L3RyPjwvdGFibGU+IjsKCiAgICAgICAgICAgICAgICBwbGF5X3dyYXBfaHRtbCArPSI8L2Rpdj48L2Rpdj48L2Rpdj4iOwoKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAkKCJib2R5IikuYXBwZW5kKHBsYXlfd3JhcF9odG1sKTsKICAgICAgICAgICAgICAgICAgICAkKCIucGxheUJ1dHRvbiIpLm9uKCJtb3VzZW92ZXIiLCAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICQoIi5wbGF5TGluZURpdiIpLnNob3coKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkKCIucGxheUJ1dHRvbiIpLm9uKCJtb3VzZW91dCIsICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgiLnBsYXlMaW5lRGl2IikuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgICAgICAgICQoIi5wbGF5TGluZVRkIikuaG92ZXIoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoImNvbG9yIiwiIzI2MDAzMyIpOwogICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygiYmFja2dyb3VuZC1jb2xvciIsIiNmY2MwYzAiKTsKICAgICAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uKCl7CgogICAgICAgICAgICAgICAgICAgICAgICBpZihnZXRDb29raWUoJ3BsYXlMaW5lQWN0aW9uJykhPSAkKHRoaXMpLmF0dHIoJ2lkJykpewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCJjb2xvciIsIiNmZmYiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIiwiI2YyNDQ0MyIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICQoIi5wbGF5TGluZVRkIikuZWFjaChmdW5jdGlvbigpewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZ2V0Q29va2llKCdwbGF5TGluZUFjdGlvbicpPT0gJCh0aGlzKS5hdHRyKCdpZCcpKXsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygiY29sb3IiLCIjMjYwMDMzIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoImJhY2tncm91bmQtY29sb3IiLCIjZmNjMGMwIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkKCIucGxheUJ1dHRvbiIpLm9uKHsKICAgICAgICAgICAgICAgICAgICAgICAgdG91Y2hzdGFydDogZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lT3V0RXZlbnQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiLnBsYXlMaW5lRGl2Iikuc2hvdygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSw1MDApOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB0b3VjaG1vdmU6IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZU91dEV2ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVPdXRFdmVudCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGhvc3QgPSBsb2NhdGlvbi5ob3N0OwogICAgICAgICAgICAgICAgICAgIHZhciBub2RlID0gIiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllcl9ub2RlcyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgeyB1cmw6InYucXEuY29tIiwgbm9kZToiI21vZF9wbGF5ZXIifSwKICAgICAgICAgICAgICAgICAgICAgICAgeyB1cmw6Im0udi5xcS5jb20iLCBub2RlOiIjcGxheWVyIn0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgdXJsOiJ3d3cuaXFpeWkuY29tIiwgbm9kZToiI2ZsYXNoYm94In0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgdXJsOiJtLmlxaXlpLmNvbSIsIG5vZGU6Ii5tLXZpZGVvLXBsYXllciJ9LAogICAgICAgICAgICAgICAgICAgICAgICB7IHVybDoidi55b3VrdS5jb20iLCBub2RlOiIjcGxheWVyIn0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgdXJsOiJtLnlvdWt1LmNvbSIsIG5vZGU6IiNwbGF5ZXIifSwKICAgICAgICAgICAgICAgICAgICAgICAgeyB1cmw6IncubWd0di5jb20iLCBub2RlOiIjbWd0di1wbGF5ZXItd3JhcCJ9LAogICAgICAgICAgICAgICAgICAgICAgICB7IHVybDoid3d3Lm1ndHYuY29tIiwgbm9kZToiI21ndHYtcGxheWVyLXdyYXAifSwKICAgICAgICAgICAgICAgICAgICAgICAgeyB1cmw6Im0ubWd0di5jb20iLG5vZGU6Ii52aWRlby1wb3N0ZXIifSwKICAgICAgICAgICAgICAgICAgICAgICAgeyB1cmw6InR2LnNvaHUuY29tIiwgbm9kZToiI3BsYXllciJ9LAogICAgICAgICAgICAgICAgICAgICAgICB7IHVybDoibS50di5zb2h1LmNvbSIsIG5vZGU6Ii54LWNvdmVyLXBsYXlidG4td3JhcCJ9LAogICAgICAgICAgICAgICAgICAgICAgICB7IHVybDoiZmlsbS5zb2h1LmNvbSIsIG5vZGU6IiNwbGF5ZXJXcmFwIn0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgdXJsOiJ3d3cubGUuY29tIiwgbm9kZToiI2xlX3BsYXlib3gifSwKICAgICAgICAgICAgICAgICAgICAgICAgeyB1cmw6InZpZGVvLnR1ZG91LmNvbSIsIG5vZGU6Ii50ZC1wbGF5Ym94In0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgdXJsOiJ2LnBwdHYuY29tIiwgbm9kZToiI3BwdHZfcGxheXBhZ2VfYm94In0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgdXJsOiJ2aXAucHB0di5jb20iLCBub2RlOiIudy12aWRlbyJ9LAogICAgICAgICAgICAgICAgICAgICAgICB7IHVybDoid3d3Lndhc3UuY24iLCBub2RlOiIjZmxhc2hDb250ZW50In0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgdXJsOiJ3d3cuYWNmdW4uY24iLCBub2RlOiIjQUNQbGF5ZXIifSwKICAgICAgICAgICAgICAgICAgICAgICAgeyB1cmw6InZpcC4xOTA1LmNvbSIsIG5vZGU6IiNwbGF5ZXIifSwKICAgICAgICAgICAgICAgICAgICAgICAgeyB1cmw6InBsYXkudHVkb3UuY29tIixub2RlOiIjcGxheWVyIn0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgdXJsOiJ3d3cuYmlsaWJpbGkuY29tL3ZpZGVvIixub2RlOiIjYmlsaWJpbGlQbGF5ZXIifSwKICAgICAgICAgICAgICAgICAgICAgICAgeyB1cmw6Ind3dy5iaWxpYmlsaS5jb20vYmFuZ3VtaSIsbm9kZToiI3BsYXllcl9tb2R1bGUifSwKICAgICAgICAgICAgICAgICAgICAgICAgeyB1cmw6Ind3dy5pcS5jb20iLCBub2RlOiIjZmxhc2hib3gifSwKCiAgICAgICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICAgICAgICBmb3IodmFyIG0gaW4gcGxheWVyX25vZGVzKSB7CgogICAgICAgICAgICAgICAgICAgICAgICBpZihnZXRfdXJsLmluZGV4T2YocGxheWVyX25vZGVzW21dLnVybCkhPSAtMSl7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHBsYXllcl9ub2Rlc1ttXS5ub2RlOwoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlID0gZnVuY3Rpb24oc2VsZWN0b3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2Rlc1tpXSAmJiBub2Rlc1tpXS5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzW2ldLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZXNbaV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlT2JqKHRhcmdldFNlbGVjdG9yLCByb290U2VsZWN0b3IgPSAnYm9keScsIHdhaXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9vdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHJvb3RTZWxlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSByb290RWxlbWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFNlbGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldEVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGFyZ2V0RWxlbWVudCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBmdW5jdGlvbihtYXRhdGlvbkxpc3QsIG9ic2VydmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IHJvb3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0U2VsZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRFbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGFyZ2V0RWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUocm9vdEVsZW1lbnQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0cmVlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2FpdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHdhaXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbiByZW1vdmVBbGwodGFyZ2V0U2VsZWN0b3IsIHJvb3RTZWxlY3Rvciwgbm93ID0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICBpZiAobm93KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHJvb3RTZWxlY3RvciA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iocm9vdFNlbGVjdG9yKSA6IGRvY3VtZW50OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBwYXJlbnQucXVlcnlTZWxlY3Rvcih0YXJnZXRTZWxlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGF3YWl0IHJlbW92ZU9iaih0YXJnZXRTZWxlY3Rvciwgcm9vdFNlbGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICB0YXJnZXQucmVtb3ZlKCkKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGlmKHBsYXlfdXJsLmluZGV4T2YoJ2lxaXlpLmNvbS92XycpICE9IC0xKXsKCgkJCQkJCWZ1bmN0aW9uIGlxaXlpUmVtb3ZlKCkgewoKCQkJCQkJCXJlbW92ZSgnZGl2I3Njcm9sbFRpcCwucXktZ2xpZGUsI3F5LWdsaWRlLFtjbGFzc149InF5LWdsaWRlIl0sW2lkXj0icXktZ2xpZGUiXSxzdmdbZGlzcGxheT0ibm9uZSJdW2FyaWEtaGlkZGVuPSJ0cnVlIl0sZGl2W2NsYXNzKj0icGxheWVyLXNpZGUtZWFyIl0sZGl2W2NsYXNzXj0icGxheWVyLW1uYiJdW2RhdGEtYXN5bi1wYl0nKTsKCQkJCQkJCXJlbW92ZUFsbCgnZGl2W3N0eWxlKj0idmlzaWJpbGl0eSJdW3N0eWxlKj0idmlzaWJsZSJdOm5vdChbY2xhc3NdKTpub3QoW2lkXSk6bm90KFtzdHlsZSo9ImZpeGVkIl0pJywgdW5kZWZpbmVkLCBmYWxzZSk7CgoJCQkJCQl9OwoJCQkJCQlzZXRUaW1lb3V0KGlxaXlpUmVtb3ZlLCAxMjM0KTsKCQkJCQkJJCgnZGl2W3N0eWxlKj0idmlzaWJpbGl0eSJdW3N0eWxlKj0idmlzaWJsZSJdOm5vdChbY2xhc3NdKTpub3QoW2lkXSk6bm90KFtzdHlsZSo9ImZpeGVkIl0pJykuaGlkZSgpOwoJCQkJCQkoZnVuY3Rpb24oKSB7CgkJCQkJCQkkKCJib2R5Iikub24oJ21vdXNlb3ZlcicsICd1bCBsaSBbaHJlZio9Ii92XyJdW2hyZWYqPSIuaHRtbCJdOm5vdChbaHJlZio9Ij1odHRwIl0pOm5vdChbaHJlZio9Ij9odHRwIl0pOm5vdChbaHJlZio9IiNodHRwIl0pJywgZnVuY3Rpb24oZSkgewoJCQkJCQkJCWxldCBvYmpmaiA9ICQodGhpcyksIGhyZWYgPSBvYmpmai5hdHRyKCdocmVmJykgfHwgb2JqZmouZGF0YSgiaHJlZiIpOwoJCQkJCQkJCW9iamZqLm9mZignY2xpY2suY2hyb21lJyk7CgoJCQkJCQkJCW9iamZqLm9uKCdjbGljay5jaHJvbWUnLCBmdW5jdGlvbigpIHsKCQkJCQkJCQkJd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmCgkJCQkJCQkJfSkuYXR0cignZGF0YS1ocmVmJywgaHJlZikuY3NzKHsKCQkJCQkJCQkJY3Vyc29yOiAncG9pbnRlcicKCQkJCQkJCQl9KS5yZW1vdmVBdHRyKCdocmVmJykKCQkJCQkJCX0pCgkJCQkJCX0pKCk7CgkJCQkJfQoKCiAgICAgICAgICAgICAgICAgICAgaWYocGxheV91cmwuaW5kZXhPZigndi5xcS5jb20veC9jb3ZlcicpICE9IC0xKXsKCiAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAkKCJib2R5Iikub24oJ21vdXNlb3ZlcicsICcuaXRlbSBhJywgZnVuY3Rpb24oZSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmpmaiA9ICQodGhpcyksIGhyZWYgPSBvYmpmai5hdHRyKCdocmVmJykgfHwgb2JqZmouZGF0YSgiaHJlZiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZmoub2ZmKCdjbGljay5jaHJvbWUnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpmai5vbignY2xpY2suY2hyb21lJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5hdHRyKCdkYXRhLWhyZWYnLCBocmVmKS5jc3MoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5yZW1vdmVBdHRyKCdocmVmJykKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9KSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAkKCIucGxheUxpbmVUZCIpLmNsaWNrKGZ1bmN0aW9uKCl7CgogICAgICAgICAgICAgICAgICAgICAgICAkKCcucGxheUxpbmVUZCcpLmNzcygiY29sb3IiLCIjZmZmIik7CgogICAgICAgICAgICAgICAgICAgICAgICAkKCcucGxheUxpbmVUZCcpLmNzcygiYmFja2dyb3VuZC1jb2xvciIsIiNmMjQ0NDMiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCJjb2xvciIsIiMyNjAwMzMiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIiwiI2ZjYzBjMCIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy9HTV9zZXRWYWx1ZSgncGxheUxpbmVBY3Rpb24nLCQodGhpcykuYXR0cigiaWQiKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBzZXRDb29raWUoJ3BsYXlMaW5lQWN0aW9uJywkKHRoaXMpLmF0dHIoImlkIiksMzApCgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheV9odG1sID0gIjxkaXYgc3R5bGU9J3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7Jz48aWZyYW1lIGFsbG93dHJhbnNwYXJlbmN5PXRydWUgZnJhbWVib3JkZXI9JzAnIHNjcm9sbGluZz0nbm8nIGFsbG93ZnVsbHNjcmVlbj10cnVlIGFsbG93dHJhbnNwYXJlbmN5PXRydWUgbmFtZT0nanhfcGxheScgc3R5bGU9J2hlaWdodDoxMDAlO3dpZHRoOjEwMCUnIGlkPSdwbGF5SWZyYW1lJz48L2lmcmFtZT48L2Rpdj4iOwoKICAgICAgICAgICAgICAgICAgICAgICAgJChub2RlKS5odG1sKHBsYXlfaHRtbCk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWZyYW1lX3NyYz0gdGhpcy5pZCtwbGF5X3VybDsKCiAgICAgICAgICAgICAgICAgICAgICAgICQoIiNwbGF5SWZyYW1lIikuYXR0cigic3JjIixpZnJhbWVfc3JjKTsKCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICQoIiMiK2lkX3JhbmRvbSkuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXlfanhfdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUG9kfEJsYWNrQmVycnkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9iaWxlX2h0bWwgPSAiPGRpdiBzdHlsZT0nbWFyZ2luOjAgYXV0bztwYWRkaW5nOjEwcHg7Jz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlX2h0bWwgKz0iPGJ1dHRvbiB0eXBlPSdidXR0b24nIHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDozMHB4O2ZvbnQtc2l6ZTozMHB4O2xpbmUtaGVpZ2h0OiAxO2NvbG9yOiAjMDAwO3RleHQtc2hhZG93OiAwIDFweCAwICNmZmY7Y3Vyc29yOiBwb2ludGVyO2JvcmRlcjowO2JhY2tncm91bmQ6MCAwOycgb25jbGljaz0nbG9jYXRpb24ucmVsb2FkKCk7Jz7DlzwvYnV0dG9uPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVfaHRtbCArPSAiPGRpdj48aWZyYW1lIHNyYz0naHR0cHM6Ly93d3cuZWdndm9kLmNuL21vYmlsZS5waHA/emhtX2p4PSIrcGxheV9qeF91cmwgKyInIGFsbG93dHJhbnNwYXJlbmN5PXRydWUgZnJhbWVib3JkZXI9JzAnIHNjcm9sbGluZz0nbm8nIGFsbG93ZnVsbHNjcmVlbj10cnVlIGFsbG93dHJhbnNwYXJlbmN5PXRydWUgbmFtZT0nanhfcGxheSdzdHlsZT0naGVpZ2h0OjYwMHB4O3dpZHRoOjEwMCUnPjwvaWZyYW1lPjwvZGl2PiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZV9odG1sICs9ICI8L2Rpdj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiYm9keSIpLmh0bWwobW9iaWxlX2h0bWwpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5nZXQoJ2h0dHBzOi8vd3d3LmVnZ3ZvZC5jbi9qeGNvZGUucGhwJyx7aW46ODE1MTY2OTksY29kZTo0fSxmdW5jdGlvbihkYXRhKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmPSdodHRwczovL3d3dy5lZ2d2b2QuY24vanhqeC5waHA/bHJzcG09JytkYXRhKycmemhtX2p4PScrcGxheV9qeF91cmw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgMzAwMCk7CgoKCiAgICAgICAgICAgIH0KICAgICAgICB9CgkJLy/pn7PkuZDop6PmnpAKICAgICAgICB2YXIgbXVzaWNfaWQgPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSoxMDAwMDAwMDApOwoJCXZhciBtdXNpY190aXRsZT1uZXcgQXJyYXkoKQoJCW11c2ljX3RpdGxlWzBdPSIxNjMuY29tIgoJCW11c2ljX3RpdGxlWzFdPSAieS5xcS5jb20iCgkJbXVzaWNfdGl0bGVbMl09ICJrdWdvdS5jb20iCgkJbXVzaWNfdGl0bGVbM109ICJrdXdvLmNuIgoJCW11c2ljX3RpdGxlWzRdPSAieGlhbWkuY29tIgoJCW11c2ljX3RpdGxlWzVdPSAidGFpaGUuY29tIgoJCW11c2ljX3RpdGxlWzZdPSAiMXRpbmcuY29tIgoJCW11c2ljX3RpdGxlWzddPSAibWlndS5jbiIKCQltdXNpY190aXRsZVs4XT0gInFpbmd0aW5nLmZtIgoJCW11c2ljX3RpdGxlWzldPSAibGl6aGkuZm0iCgkJbXVzaWNfdGl0bGVbMTBdPSAieGltYWxheWEuY29tIgoKCQlmb3IodmFyIGk9MDtpPG11c2ljX3RpdGxlLmxlbmd0aDtpKyspewoJCQlpZihnZXRfdXJsLmluZGV4T2YobXVzaWNfdGl0bGVbaV0pIT0gLTEpewoJCQkJdmFyIG11c2ljX2h0bWwgPSAiPGRpdiBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknIGlkPSIrbXVzaWNfaWQrIiBzdHlsZT0nY3Vyc29yOnBvaW50ZXI7ei1pbmRleDo5ODtkaXNwbGF5OmJsb2NrO3dpZHRoOjMwcHg7aGVpZ2h0OjMwcHg7bGluZS1oZWlnaHQ6MzBweDtwb3NpdGlvbjpmaXhlZDtsZWZ0OjA7dG9wOjMwMHB4O3RleHQtYWxpZ246Y2VudGVyOyc+PGltZyBzcmM9J2RhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaFpBQ1dBUGNBQVBKRVEvdjcrZm5MeVBqQ3dmUm5aZm5UMFBKS1Nmakd4UHYyOVBuWTEvTmJXdnYxOC9hVWsvcmw0L3J3N3ZuS3lQYUppUHJyNmZhYW1QUnljZmFMaXZ2NTkvSkpTUHJ2N2ZOVlZQbmUzZnJ0Ni9OUVQvdjYrUGVscFBhZ252UjNkdmk2dVB2ejhmZXhyL25PelBlZ252cms0dlIxYy9KR1JmcnE2UG5RenZqQ3dQblMwUG5aMS92dzd2bmEyZmVvcC9lbXBmcmMydk5VVS9peHIvUjRkdldKaC9lc3F2SkhSdnZ4Ny9yeThmTlNVZk5XVlBqQndQVjZlZmFNaXZuZjNmaTh1dldEZ3Z2NDl2cnA2UHJ5OFBKUFR2YVlsL25UMGZuVzFQZXJxZlJzYS9SdmJ2V0FmL1Y5ZlBuazR2aTJ0ZlJqWWZSaFgvdnU3UE5ZVi9KRlJQbms0ZmFIaGZhWGx2djM5ZnJoMy9pN3V2bk55L25PeS9yczZ2ZXJxdlJnWHZuZDIvYUdoUFdSa1BWL2Zmcmk0UHJqNFBpd3Jmbkx5ZmFVa3ZSZlhmSk5UUGpGdy9leXNmUmxZL1J4Y1B2djdmZXpzdmkwc3Z2MjgvYWJtdmVxcVBlcHFQSk1TL2V5c1BXT2pmTmRYUFJ6Y3Z2MDh2UnViZnJvNXZlaW9mZWxvL05aV1BuWjJQTnBhUG5VMHZSZlh2bkh4Zml1clBqQXYvblF6ZnJuNWZuYzIvZTBzdmFkblBlNHQvYVNrZk5YVnZSbVpQZXRxdm5ZMXZpOHUvZWlvUGl0cS9pL3ZmUndiL1IxZFBuZTNQYWVuZmFjbXZlM3R2blJ6L3JqNGZhWGxmVitmUFdGaFBKTFN2YU5pL1dNalBSMGMvYVZrL1dQai9hZG0vcnA1L25JeHZSb1p2UmlZZmpEd3ZhVmxQSk9UZmUydGZOcWFmSlJVUGVrb3ZhYW1mTmFXZlY4ZXZuZDNQbk56UG5WMVBlc3EvakV3L1Y2ZVBSM2QvbmczdnJ3N2ZhV2xQZW5wZmFmbmZXUGp2aXdydk5XVmZuTXl2aTZ1ZlYvZnZWOWUvbmIydnJ1Ni9Sa1l2akF2dm5JeGZSaVlQaTl2UGVnbi9WN2VmZWpvZmUxdFBXQ2dmcm01UEpJUi9uYzJ2TmNXL0pRVC9qRnhQdnk4UFdEZ2ZXQmYvUnNiUFY1ZC9OcGFmTmNYUG5mM3ZhSWh2UnZiL2l2cmZuWDF2TlJVZmFLaWZSdGJQYVpsL05lWFBlNXVQV0NnUFJyYXZhSWgvTm9aL25KeC9XRmcvaTl1L1IyZGZqSHh2akl4dk5UVXZpL3Z2ZTFzL05lWFFBQUFBQUFBQUFBQUFBQUFDSC9DMDVGVkZORFFWQkZNaTR3QXdFQUFBQWgrUVFFbGdBQUFDd0FBQUFBWkFDV0FBQUkvZ0FCQ0J4SXNLREJnd2dUS2x6SXNLSERoeEFqU3B4SXNhTEZpeGd6YXR6SXNhUEhqeUJEaWx4SVlFU0FBQ01JakZ4cFVJV0RBQTVVZUZqSTR1VEpCQ3h6Q3N4aGs4aVFoVFp0NnN5cHdhYUdEQXNIQk9VeGxPVUxKQ1dRdktpeGNBT0RBUU1ZYkdpNlVrR1BHajBVR09CS3RxelpzMmpUcWwzTHRxTUNFMDFNaUsxS1lzUUlFbHM3Zm1GQ2E5RVdGNGtRaENpVFFvVUlUVXpTZk95UWdrV0tEa0dTTHRXb0E5aXVaVUV6YXc0Z0JacVZJaHRSMkVTQlU2Rm1qRFFPQ2RuTWVqTUNMUk15THJDNTRBTE5vS1Vwam5IUnVuZnJUdlV1bnBtOTRNRWZrZ01jWEJpZ2N1SWwzcjZqc3o2am9LSUpDUjRrbU5neEVrTWozeVhvL21rQ0phaVdCVFZmOUZpWk02bEVid1NvVHJROXlFc0s2d3FxU09WeEtNTldramVzdWREY2ZBQmNRd2RyZlZ3aEEwVVdoSUhJWmtMMFFxQWFLMnptaVE4M1pBVEZFWm9WTWg4R3ltaUdBQ1VXY0VURkZRZ0U5VUJFQm1DZ0FBWmpNVVFBQ1NRTXFKQU1aV2ptZ21JZmZaSEFTUXVVRWhFRUlqd2hBZ1EySG1SRFVEWXNwQVowUWQxUllrZ25pTUZBRkJMRllGTU1RQ3owa2syMkpYVENnNW1oUVpZZFZwQmp4MEp5MEJabVFrNEVWWVZDZFdUR1FUcGtFVkpVQUM2QWx0QVBObVdpd2tJUWZIa0JCQW4xWXFjVlpma1JwVUkreEFGRUhENG8wUkFCU1Jha0E0QkJqV0pXQjVuRmhwQUJVMFF4Ull3WTNaR1pMbWZsc1pwTi9tVk11VkliSEFTVmhheGxNWkxaS1RtbEVCUUhzYVIxUW9nMjlTSGZTS1ZrWnNaYTZtUkdnVVlUaUdwUUFVRzk0ZWRDT3BnVWdoZXZnTFJGVUM0Y3RBUURIakN3QkhjS0ZYcVNBNGdTeEVlWkR1a1QxREtPSE11UkhrRnBjSkJMTU1tMFVKdzJ6VWtRSEVGMWdlcENlMmptU3pJZU5XTlRPd2Z4ZEpKUFhnYjFKZ0FXaEJBVU1BKzFsZ0l6SEoxUXh4YWJyR25RbmdFY3RkQ1NOaVZCa0RkQlZYQXRRN1d5eGdFbmorVDBWRlJUeWNnQUEwa1NiRk1yRUZYZzJ4NlVtQ3lTVjJETlJWRVdRVEg2a05IUnBUSUtGUVFhaEVGbUdCUWRWQ0c1dEFhR0d4ajlzVUFGakh5RVRGQmxSUFRxU1M4QUVFWWZyUlZDU0VWdUJNV0gva2ViQkFXQzIwSFZJWkFvd21pOFdRVWk0RE5SblRiNTRkRjNOcVVORVJaQjBVSFFJNXpVckJrT2MrRGFVTjgySFVQUVcwelE0SFJDQkNnVkFITUREUktVT3hHbGFKUGxCY1hESVdzTmhBRlJLRUVOUWhCajJCd0IyVzAyNVFhMVRaWkNKUHRKTGg5VWpUV3RTZktPUSsvYTFBQkJvcDFFR2xDWkRSUkJVS3pFSHBRWENWa3doK0diSFZMZFFsRUVKUVZCRWdkQXNVS3FuOFNVUUxQWlZFdEUrWjlFdmtJWVdJVG1Nb09GRG1BdElZQ0lHVUh1UVJ4N3pFUWhWc0dLVmdaQ3RaTXNDQ0lKc3dtckdBSUpYN0VtRWpmNkZVR3VrNTN0VUFRSFFjbEdSTkFYQUJBNkJCbnUwVXdJRkpLSG9PREFJOWs3U1J0V0dCUVhOcVFKL21UWVRBUVVRb0NnSk1JamlnaEtPWGhvazBvMEJBcGNhTTJ6RW9LSm9JREJJMnVJV2tTU2FCTmFMRVFHZDZoZ1pzaEFnNFdJSVNpcThFZ2xna0tDaURqQ0ppRW9Sdm1NZ01MTjRNQUlHVnFJSVlMaXhJRzA2RVVIUTRoVjdESkJnWndpS0VTTFNDZ3NZWWk3SVdRTU1kUk1CZGlnQTRkOHl5WmlJQWlSaklRa3lkamtmZ0FRUkZDNGNVQ05kTEExWElEQ1EwNnd2QUJJQ3dCYU9nbVh1QmVVZ2R5QWNqWVJSRVM2WVFsenFKSWdNb0REQUlOQ2hqRkU1QkpCUVFDdTJnU2tpeDJrSnNVanlDVlAwc2FINE1FbUNKQWp4aVRBUWh2aVVTS09zb2s4Q2hMTEFNeVNpS3BqM1VBK2dSdUlTQ0lvd2dBQUV5S1ptVWxXY2lKMC9yUEpGUXF5eVNObDZpSHRDd3FXSElLeUFCakRnNXRKWlVVbThLdWNFZVNQTUxvSWxBS3dMSWQwUVRyRnZNZ2hnc0lGa1Z3VGp0cXdxRy91bU1lS1FDSXpQaENKS0ZqNFA0Wjg3ejZVekVnV2JXS3drWURLSmhVSW4wdFpvOUNNMENBelJzaklqR3AwRUIzMEx3QXBhRWlPeG1oTWpWaWdBVUZwUVNBRk1vRXJlT0FLRTBCWFFsaDJraVlaWkJhWitRUkQyT0ROa21Za0dKbko1RUhXd0pNY3JPR0JDZm5TU1p3cEVBTWtJcGs3VklnYWRoR0FCY0Robmh0UndnQnZZYStDeEc5K2NKSVRRcW9ZbEJMTWJDaXk4RVJtOW9hUUhHNHZYWVpxMTBISUdwUnRrS1VJZ2NnTU1SVFNnU1A4UUhpUllVaTBGbUtCY1dTR0YwMHAva0xZZ3FJSXp4VkVBVFFJZ3VtbVdoRm1aQVlQUTVIQkxUSVRBaDV4SlJhWllZZE8wbkE4bk9yQkxBZXl5VGwwd29SdUJrQjNac2xoQU5iQkVuVEFRak1jbU9KSFZxc1FaQVlGRUFNUkJ5eWtFQUVHbU5VaUo2QUFwNEtDQllZNUJMZTZQUjFDMUFVVHpSckVETDBUeUEzbTBFcGZOT0VpRmhnR1ZEWFRoVmN5NUFXbVBVTFBGQUt3a3dqTUlDZXdqMDFjQVFBbGdJRTFLOENETENUeURUTm9XRE9JdU9CRFVLWXloY2cxQUhRVkNHTnQ4Z1ZpREZPU0FtQ0FHOVFncG1mQWd4T3BhQTBDTkZIS2h4ejJKd3JoYWdDYVo1QkZSUFdsMGprSkI3TGdqRW5Nb0FQQm9NWWFBb0hMM2xDSEl2ejZoYjlJUXFOL0F1QUdkZXhOL2pNeUVPVTI4OGtXRmhtWEI5QndMb3hJd3plZWVDNEFhR0FNTi9jbUJUMGdFQWlFVEtLQ0VHQVdIL2J6U1RTUWhDOWt6UUFaMU13STlwT1FOSHhpRW1BUW8yWVc0SUpqaUdFVmhaMFBLRGFEQXV3NnhBTGhBTWM4aG9FS0NaQ0NDVzVBYjlZT2dvWjZtcUZic3k0SVJIbHI2SFJtcWcwVkRNUXFjbjBRSHhSSkJKVWkzazBPNGdnaENNRVZSU2IyUUFCMUVrSFJVaWpTamdneit4cGpndFF2QUtETXRrUEtlYzZFREhJRWhSUzNRL3JaU1hWL1pOZnVqcmU4NTAzdmVrL2szT20yZDBGSXFCMnRJdVRiNGRiM1FJYlRWd0VjeHpUZE00Z0FIc0R3QjRoWElSUm8rQU1HSUpCb2FPSGlXZ2hxUVdBZ2NZbXJvQU1nbDBqLy9tcWo3QURraGlCUVhsMUR2bzBVQUZETEpnZFF1SFFpMEltSEs4U3lKejlJNms2aXpvSjgrM283dGNuZlhCNlVtQmRFQUc3dXhBY1l3aGpIRE84aUZNak0waFh5QWFrTDVPVW5NVHBCa083bUNFdzlJVytKaTM0cjBnSy9MV1RRTm1rNTBXRXVjejhQc1NrVmlxWkNmaVQwZ1dBOUFGb2ZDTmRQSW9DQ1VHQUdDV2hsQUlhdUV3a2tjeUd0L1ByZDh5NlF2UWVnN3dmNVFDdmZQcFN5MndRR0NZRkJVQ2kvOXF5M25lOEpNWHhRdm82Um9acFpJSEUveVFvU2tucVYyNzNvbjMrOFFscUplWVF3TFN5OEhvaVN2WG9RemR1a0JRbXgvRWtldnZqWVF4NGhDejVKN1EreU02bFF4Y1VXbTMxUWJDNlFxTnVFODUzSHUvRVYvcEw4QUN6L1pFWlJPMElxSElBTEg0VHVQRC9JdHlsT2tPSWZQU2pIUHdqdEUzSmtRbVZXSVRNSUN0QUx3bWFiU0tBZzdyZDE4QmQ2enBJUVlUWm1DMEZlaURkNkJWRjF2emN0c1BkK05oRi9CWkZ5MkZjUWNrWm4vb1lSNkRkNEJaRi9OckY2QUJpQkFqaUJCekVEOUNSN1pBR0N5MFlRSGZoL0k4aDJFbmdTSlNCeGtsQUN3b2ROcERjVURuZ1NDRkFReXdOOEVDaURKZWhtTUZnVy9hZDhBeUY2TFJpRG5qZUQwb0VBTXpCZURwWVFhS2Q2QTlGNlV6aUVUMWlFdm9FQUs3Q0RvMUlxcDhJUS9NVXVETkdEQVVCNVVQYURCeEdBZWhkVkRUQ0hkSmdCQXZCOURCRXBrNUpzRktaWURKR0VBZkFzMXRlRVRxaDlVRWlCL2hSQmJRRmdiZEFISmcxeGhTb0hpVnZJaFlib2hZZzRFZHRHY2trV0ZFd0djVUdCRklDWUVIRFllQU9JRWVUV0pXUkdWQTZSY2dDd1BPSlhpSXdIQUk1M2lSTEJicWRuRWQvV2VvUkhpYkU0aXhrQmJ4OHhpSm9oaHE5SGhIRm9ndXFXY21tbkVLTW9pNlVvYm81WGQ2Sklnc2NJZXVyR2hOUEhqTlJJaXNnNEZLbnpFajNYRURtNGhndlJqTDZJRWZ4bVFnb0JUWVRJRUszbmV0Tm9qTnhvamNKQkhBWjNiU2NCRVJKQWgzTklmUVhSQ0FrUWtBbGdDQVlCQXZ5NGl4VXhjdDAyRUFBbmNBYUJjMVhCQUlTVUZ3NDVFTk9BQ3l5QUMzNlFXaFU1RVZNd0FVMHdBV1hZa1NSWmtpWjVraDRSUVZsQmtSMjVEMDNRTkxrblBCQU5XWkpld0FJODgzd0pjUm9seVdLdmFCRHNhSEltV1gvb3hITzNTRy81VUJRYVlBbHdoWklNWVFxQThnT21VSlJNT1pWVVdaVldhWlVCQVFBaCtRUUJsZ0FBQUN3R0FBWUFXUUNMQUljeXpUTHgwVVh4cFVUeVgwUHlTRVB5VmtQeWVVVHlna1R3eUVUelRVUHh5a1h5aWtUd3gwVHh0a1h5VVVQeHQwVHhya1h4eGtYd3YwVHltRVR5aTBQeHVVVHlha1B4eUVYeHhFWHlhRVB4dTBUeHpFWHh6VVh5a1VUeGxFVHlVa1B5ajBUeGhrVHhwRVR5YmtUeHRFWHh3MFh5bkVUeGdrVHlWRVB5ZTBUeVpVUHhvRVR4c0VUeWVVUHliRVB4c2tUeHUwWHlkRVR4ckVUeWNFUHlaMFB4djBYeGVVVHh6VVR5bWtUeGowVHhrMFB5WTBQeHJrVHlqVVR4cDBUeVdrUHlhVVB4aEVUeG8wVHhkVVB5b1VUeVdFUHlja1B4cVVUeHEwVHhxa1R5azBRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUkvZ0FIUUFnUUFNSUFBQWdUS2x6SXNLSERoeEFqUmhSd0ljQUZBUXNlRUNUWVFLTEhqeUJETmxTd1VVR0pqUnRGcWx6Sk1tR0VqUkZnQ0VBcG9xWE5teEU3a0toQm9rT0xCQWNFQ0RpUUFLZlJvd2dMakxBeG9nQUJwRkNqU3AxS3RhclZxMWl6YXQwS3NZQ0ZHUmFjSnFBQUFRS0ZvbHl4Z21EeGdBV0lHRE0zMWt4N0ZjTkdEQTFRRXFSN2xjUEdEUmMwYnV6SXQ2b012eHVRNUJnZ0FBRURBUWNMVTdVUVlrRUlJQjhrYTk3TXViUG56NkEvRTNCUXdNRlRBQU1vVUlnYytxYUJDU1ltR0JqZ0FhV0gxamNyYkt5d0FnRktCcmh0M3ZqTFFBSktDY0ZiYXRpb1FZQUIzd0VZR0VqT01nVU9JamhTN0VBNGdEVjFsUVJRL3Z4QWNmcTcrZlBvMDRQT2tFRTlTQlVuRnB4UThlRTVRUVRUM1Urc2VIR0I4WTNJNlFjUlNRU1pCQjFCd0FuNDBFc0V4VlRiUmpvbytKQk9QUG1FMmdFSGVDZmhRa294NWRTR0lJWW80b2drS3VTVkVTNDR4UmhCa0pVSXdGb1Z2UENXWUJ5NWFCZEJlT2tWZ0lzRUJtQlNYQVROUldJU2lCMnhBRkJDRWVVaVpaWmg1dUtUVUVZcFpXR2psZllVVUdVcFdlSnJzYzBHWkFCQ2pxZ2JRYnpwNk9Kd0JHM0FBSTBCRUViaW1BSHd0bUlBTFc0Sm0yd2FQbG1sYVZQMjZlZWZPS1cyMnBNMEJMRkFFRFI4OENCQnQ1WG9BMGtLK0xEQWdkSHhXRklKL3hFVUlJazNCb0NYZmRIbFJ5SUlMMmdnWXd3SXNRZGxBUzRNa1dKNS9vREdLdXVzQzZuNkpLdXVPZ1VxZmk1MlVPb0xQbVVhd0tZak1oaEFUSlFtU0dLUEppMGFRSVFsVW1RUlJxaXBsbWVJOE1sSEg2M2NkdXV0aUhzK05XZWRKS1p3cDNac3VqbmljZ1ExWjJhSmFBYWc1cGRoaWdnbmIxaENvQ1dKWE9MWlo3amZCaXh3aVBudU95S1RJVmp3QWIwdUhoWUFCekxrOEM2SmZxVVpHRXJxaXRncFh1TmV1K0ZhYmIzVnAxZGdmVGp3eVNpako2akhHM2JZRkFIT05rb2loVDIxa0t5THhzWWtMTEVpTWxzQ3FOSzVLRzEvcWJiM1pMYnpaWmJ5MGt5M1pxdUw0WTMzMUs2aWptZ2RkdHJ0N0NLN0FUUjNNN3pFT1F2dG03dXRVTzJnTHZZNzI3K2s4ZG4wMjNBWHhwaHY1QjVjV2NJZnBOdXdVVjhRUzZ5WGl4WExleEZOTnQ3VlFNRm9rZGdERHcvdzBBT3FVNkpBd3d3MGtCZjM1WmhmaGVSUWlZOVl4QXdlRXNCd2lVbzhVR0VMRXhjTEV3eDZsK2h6eHk0SzhWSUVRaXpRNXdITGFaQmhRQUFoL2hWTllXUmxJSGRwZEdnZ1UyTnlaV1Z1Vkc5SGFXWUFPdz09JyB0aXRsZT0n5Zyo6Z+z5LmQ5Y2V5puy5pKt5pS+6aG16Z2i54K55Ye75Zu+5qCH5LiL6L29JyBzdHlsZT0nd2lkdGg6NTBweCcgPjwvZGl2PiI7CgkJCQkkKCJib2R5IikuYXBwZW5kKG11c2ljX2h0bWwpOwoJCQl9CgoJCX0KCgkJJCgiIyIrbXVzaWNfaWQpLmNsaWNrKGZ1bmN0aW9uKCl7CgoKICAgICAgICAgICAgdmFyIGhvc3RVcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKCiAgICAgICAgICAgIGlmKGhvc3RVcmwubWF0Y2goL211c2ljXC4xNjNcLi8pKXsKCgogICAgICAgICAgICAgICAgaWYoaG9zdFVybC5tYXRjaCgvXmh0dHBzPzpcL1wvbXVzaWNcLjE2M1wuY29tXC8jXC8oPzpzb25nfGRqKVw/aWQvKSkgewoKICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbignaHR0cDovL3d3dy5lZ2d2b2QuY24vbmV3bXVzaWMvP3VybD0nK2VuY29kZVVSSUNvbXBvbmVudChob3N0VXJsLnJlcGxhY2UoJy8jJywnJykpKTsKCiAgICAgICAgICAgICAgICB9ZWxzZSBpZihob3N0VXJsLm1hdGNoKC9eaHR0cHM/OlwvXC95XC5tdXNpY1wuMTYzXC5jb21cL21cLyg/OnNvbmd8ZGopXD9pZC8pKSB7CgogICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbignaHR0cDovL3d3dy5lZ2d2b2QuY24vbmV3bXVzaWMvP2lkPScrZW5jb2RlVVJJQ29tcG9uZW50KCdodHRwczovL211c2ljLjE2My5jb20vc29uZz9pZD0nK2dldFF1ZXJ5U3RyaW5nKCdpZCcpKSk7CgogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNvbmdJZCA9IGhvc3RVcmwuc3BsaXQoJz9pZD0nKTsKCiAgICAgICAgICAgICAgICAgICAgaWYoc29uZ0lkWzFdKXsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oJ2h0dHA6Ly93d3cuZWdndm9kLmNuL25ld211c2ljLz91cmw9JytlbmNvZGVVUklDb21wb25lbnQoJ2h0dHBzOi8vbXVzaWMuMTYzLmNvbS9zb25nP2lkPScrc29uZ0lkWzFdKSk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1lbHNlIGlmKGhvc3RVcmwubWF0Y2goL3lcLnFxXC5jb20vKSl7CgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhdWRpbyIpLnBhdXNlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1FR6Z+z5LmQ6K+35Zyo5Y2V5puy5pKt5pS+6aG16Z2i54K55Ye7VklQ5Zu+5qCH6Kej5p6Q77yM5Zyo5YiX6KGo5ZKM5Y2V5puy6K+m5oOF6aG16Z2i5Lit54K55Ye7VklQ5Zu+5qCH5peg5pWIJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYoJCgnI3NpbV9zb25nX2luZm8nKS5jaGlsZHJlbigiYSIpLmF0dHIoImhyZWYiKSl7CgogICAgICAgICAgICAgICAgICAgdmFyIHFxU29uZyA9ICQoJyNzaW1fc29uZ19pbmZvJykuY2hpbGRyZW4oImEiKS5hdHRyKCJocmVmIikubWF0Y2goL3NvbmdcLyhcUyopLmh0bWwvKTsKCiAgICAgICAgICAgICAgICB9ZWxzZXsKCiAgICAgICAgICAgICAgICAgIHFxU29uZyA9ICQoJy5wbGF5ZXJfbXVzaWNfX2luZm8nKS5jaGlsZHJlbigiYSIpLmF0dHIoImhyZWYiKS5tYXRjaCgvc29uZ0RldGFpbFwvKFxTKilcPy8pOwoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB3aW5kb3cub3BlbignaHR0cDovL3d3dy5lZ2d2b2QuY24vbmV3bXVzaWMvP2lkPScrcXFTb25nWzFdKycmdHlwZT1xcSZwbGF5VXJsPScrZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImF1ZGlvIikuc3JjKSk7CgogICAgICAgICAgICB9ZWxzZSBpZihob3N0VXJsLm1hdGNoKC9rdWdvdVwuY29tLykpewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhdWRpbyIpLnBhdXNlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgdmFyIGtnU29uZyA9IGhvc3RVcmwubWF0Y2goL2hhc2g9KFxTKikmYWxidW0vKTsKICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKCdodHRwOi8vd3d3LmVnZ3ZvZC5jbi9uZXdtdXNpYy8/aWQ9JytrZ1NvbmdbMV0rJyZ0eXBlPWt1Z291JnBsYXlVcmw9JytlbmNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYXVkaW8iKS5zcmMpKTsKICAgICAgICAgICAgfWVsc2UgaWYoaG9zdFVybC5tYXRjaCgva3V3b1wuY24vKSl7CgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhdWRpbyIpLnBhdXNlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgdmFyIGt3U29uZyA9IGhvc3RVcmwubWF0Y2goL3BsYXlfZGV0YWlsXC8oXFMqKS8pOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coa3dTb25nKTsKICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKCdodHRwOi8vd3d3LmVnZ3ZvZC5jbi9uZXdtdXNpYy8/aWQ9Jytrd1NvbmdbMV0rJyZ0eXBlPWt1d28mcGxheVVybD0nK2VuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhdWRpbyIpLnNyYykpOwoKICAgICAgICAgICAgfWVsc2UgaWYoaG9zdFVybC5tYXRjaCgvd3d3XC54aWFtaVwuY29tLykpewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhdWRpbyIpLnBhdXNlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgdmFyIHhtU29uZyA9IGhvc3RVcmwubWF0Y2goL3NvbmdcLyhcUyopLyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh4bVNvbmcpOwogICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oJ2h0dHA6Ly93d3cuZWdndm9kLmNuL25ld211c2ljLz9pZD0nK3htU29uZ1sxXSsnJnR5cGU9eGlhbWkmcGxheVVybD0nK2VuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhdWRpbyIpLnNyYykpOwoKICAgICAgICAgICAgfWVsc2UgaWYoaG9zdFVybC5tYXRjaCgvd3d3XC54aW1hbGF5YVwuY29tLykpewoKICAgICAgICAgICAgICAgIHZhciB4bWx5VXJsQXJyID0gaG9zdFVybC5zcGxpdCgiLyIpOwoKICAgICAgICAgICAgICAgIGZvcih2YXIgeHVhSW5kZXggPTA7eHVhSW5kZXg8eG1seVVybEFyci5sZW5ndGg7eHVhSW5kZXgrKyl7CgogICAgICAgICAgICAgICAgICAgIGlmKHh1YUluZGV4PT14bWx5VXJsQXJyLmxlbmd0aC0xKXsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbHlVcmxBcnJbeHVhSW5kZXhdICE9ICIiKXsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbignaHR0cDovL3d3dy5lZ2d2b2QuY24vbmV3bXVzaWMvP2lkPScreG1seVVybEFyclt4dWFJbmRleF0rJyZ0eXBlPXhpbWFsYXlhJnBsYXlVcmw9JytlbmNvZGVVUklDb21wb25lbnQoaG9zdFVybCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+ivt+WcqOWNleabsumhtemdoueCueWHu1ZJUOWbvuagh+ino+aekO+8jOWcqOWIl+ihqOS4reeCueWHu1ZJUOWbvuagh+aXoOaViCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1lbHNlIGlmKGhvc3RVcmwubWF0Y2goL211c2ljXC50YWloZVwuY29tLykpewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgICAgICB9CgoJCX0pOwoKCgl9CiAgICBmdW5jdGlvbiBzZXRDb29raWUoY25hbWUsY3ZhbHVlLGV4ZGF5cyl7CiAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpOwogICAgICAgIGQuc2V0VGltZShkLmdldFRpbWUoKSsoZXhkYXlzKjI0KjYwKjYwKjEwMDApKTsKICAgICAgICB2YXIgZXhwaXJlcyA9ICJleHBpcmVzPSIrZC50b0dNVFN0cmluZygpOwogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNuYW1lKyI9IitjdmFsdWUrIjsgIitleHBpcmVzOwogICAgfQogICAgZnVuY3Rpb24gZ2V0Q29va2llKGNuYW1lKXsKICAgICAgICB2YXIgbmFtZSA9IGNuYW1lICsgIj0iOwogICAgICAgIHZhciBjYSA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpOwogICAgICAgIGZvcih2YXIgaT0wOyBpPGNhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBjID0gY2FbaV0udHJpbSgpOwogICAgICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWUpPT0wKSB7IHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCxjLmxlbmd0aCk7IH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuICIiOwogICAgfQoJLy/ojrflj5Z1cmzlj4LmlbA7CglmdW5jdGlvbiBnZXRRdWVyeVN0cmluZyhlKSB7CgkJdmFyIHQgPSBuZXcgUmVnRXhwKCIoXnwmKSIgKyBlICsgIj0oW14mXSopKCZ8JCkiKTsKCQl2YXIgYSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpLm1hdGNoKHQpOwoJCWlmIChhICE9IG51bGwpIHJldHVybiBhWzJdOwoJCXJldHVybiAiIjsKCX0KCn0pKCk7","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js","ts":1638677843380,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2My4yLjEgfCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihhLGIpeyJ1c2Ugc3RyaWN0Ijsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIGIoYSl9OmIoYSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO3ZhciBjPVtdLGQ9YS5kb2N1bWVudCxlPU9iamVjdC5nZXRQcm90b3R5cGVPZixmPWMuc2xpY2UsZz1jLmNvbmNhdCxoPWMucHVzaCxpPWMuaW5kZXhPZixqPXt9LGs9ai50b1N0cmluZyxsPWouaGFzT3duUHJvcGVydHksbT1sLnRvU3RyaW5nLG49bS5jYWxsKE9iamVjdCksbz17fTtmdW5jdGlvbiBwKGEsYil7Yj1ifHxkO3ZhciBjPWIuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7Yy50ZXh0PWEsYi5oZWFkLmFwcGVuZENoaWxkKGMpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyl9dmFyIHE9IjMuMi4xIixyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyByLmZuLmluaXQoYSxiKX0scz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csdD0vXi1tcy0vLHU9Ly0oW2Etel0pL2csdj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O3IuZm49ci5wcm90b3R5cGU9e2pxdWVyeTpxLGNvbnN0cnVjdG9yOnIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBmLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9mLmNhbGwodGhpcyk6YTwwP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPXIubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxifSxlYWNoOmZ1bmN0aW9uKGEpe3JldHVybiByLmVhY2godGhpcyxhKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhyLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoYTwwP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmM8Yj9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCl9LHB1c2g6aCxzb3J0OmMuc29ydCxzcGxpY2U6Yy5zcGxpY2V9LHIuZXh0ZW5kPXIuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGc9YXJndW1lbnRzWzBdfHx7fSxoPTEsaT1hcmd1bWVudHMubGVuZ3RoLGo9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksIm9iamVjdCI9PXR5cGVvZiBnfHxyLmlzRnVuY3Rpb24oZyl8fChnPXt9KSxoPT09aSYmKGc9dGhpcyxoLS0pO2g8aTtoKyspaWYobnVsbCE9KGE9YXJndW1lbnRzW2hdKSlmb3IoYiBpbiBhKWM9Z1tiXSxkPWFbYl0sZyE9PWQmJihqJiZkJiYoci5pc1BsYWluT2JqZWN0KGQpfHwoZT1BcnJheS5pc0FycmF5KGQpKSk/KGU/KGU9ITEsZj1jJiZBcnJheS5pc0FycmF5KGMpP2M6W10pOmY9YyYmci5pc1BsYWluT2JqZWN0KGMpP2M6e30sZ1tiXT1yLmV4dGVuZChqLGYsZCkpOnZvaWQgMCE9PWQmJihnW2JdPWQpKTtyZXR1cm4gZ30sci5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKHErTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PXIudHlwZShhKX0saXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJmE9PT1hLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGEpe3ZhciBiPXIudHlwZShhKTtyZXR1cm4oIm51bWJlciI9PT1ifHwic3RyaW5nIj09PWIpJiYhaXNOYU4oYS1wYXJzZUZsb2F0KGEpKX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYixjO3JldHVybiEoIWF8fCJbb2JqZWN0IE9iamVjdF0iIT09ay5jYWxsKGEpKSYmKCEoYj1lKGEpKXx8KGM9bC5jYWxsKGIsImNvbnN0cnVjdG9yIikmJmIuY29uc3RydWN0b3IsImZ1bmN0aW9uIj09dHlwZW9mIGMmJm0uY2FsbChjKT09PW4pKX0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErIiI6Im9iamVjdCI9PXR5cGVvZiBhfHwiZnVuY3Rpb24iPT10eXBlb2YgYT9qW2suY2FsbChhKV18fCJvYmplY3QiOnR5cGVvZiBhfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGEpe3AoYSl9LGNhbWVsQ2FzZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHQsIm1zLSIpLnJlcGxhY2UodSx2KX0sZWFjaDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MDtpZih3KGEpKXtmb3IoYz1hLmxlbmd0aDtkPGM7ZCsrKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVha31lbHNlIGZvcihkIGluIGEpaWYoYi5jYWxsKGFbZF0sZCxhW2RdKT09PSExKWJyZWFrO3JldHVybiBhfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOihhKyIiKS5yZXBsYWNlKHMsIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxbXTtyZXR1cm4gbnVsbCE9YSYmKHcoT2JqZWN0KGEpKT9yLm1lcmdlKGMsInN0cmluZyI9PXR5cGVvZiBhP1thXTphKTpoLmNhbGwoYyxhKSksY30saW5BcnJheTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG51bGw9PWI/LTE6aS5jYWxsKGIsYSxjKX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO2Q8YztkKyspYVtlKytdPWJbZF07cmV0dXJuIGEubGVuZ3RoPWUsYX0sZ3JlcDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkLGU9W10sZj0wLGc9YS5sZW5ndGgsaD0hYztmPGc7ZisrKWQ9IWIoYVtmXSxmKSxkIT09aCYmZS5wdXNoKGFbZl0pO3JldHVybiBlfSxtYXA6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj0wLGg9W107aWYodyhhKSlmb3IoZD1hLmxlbmd0aDtmPGQ7ZisrKWU9YihhW2ZdLGYsYyksbnVsbCE9ZSYmaC5wdXNoKGUpO2Vsc2UgZm9yKGYgaW4gYSllPWIoYVtmXSxmLGMpLG51bGwhPWUmJmgucHVzaChlKTtyZXR1cm4gZy5hcHBseShbXSxoKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlO2lmKCJzdHJpbmciPT10eXBlb2YgYiYmKGM9YVtiXSxiPWEsYT1jKSxyLmlzRnVuY3Rpb24oYSkpcmV0dXJuIGQ9Zi5jYWxsKGFyZ3VtZW50cywyKSxlPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYnx8dGhpcyxkLmNvbmNhdChmLmNhbGwoYXJndW1lbnRzKSkpfSxlLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8ci5ndWlkKyssZX0sbm93OkRhdGUubm93LHN1cHBvcnQ6b30pLCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJihyLmZuW1N5bWJvbC5pdGVyYXRvcl09Y1tTeW1ib2wuaXRlcmF0b3JdKSxyLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7alsiW29iamVjdCAiK2IrIl0iXT1iLnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiB3KGEpe3ZhciBiPSEhYSYmImxlbmd0aCJpbiBhJiZhLmxlbmd0aCxjPXIudHlwZShhKTtyZXR1cm4iZnVuY3Rpb24iIT09YyYmIXIuaXNXaW5kb3coYSkmJigiYXJyYXkiPT09Y3x8MD09PWJ8fCJudW1iZXIiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYSl9dmFyIHg9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT0ic2l6emxlIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9aGEoKSx6PWhhKCksQT1oYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPXt9Lmhhc093blByb3BlcnR5LEQ9W10sRT1ELnBvcCxGPUQucHVzaCxHPUQucHVzaCxIPUQuc2xpY2UsST1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX0sSj0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLEs9IltcXHgyMFxcdFxcclxcblxcZl0iLEw9Iig/OlxcXFwufFtcXHctXXxbXlwwLVxceGEwXSkrIixNPSJcXFsiK0srIiooIitMKyIpKD86IitLKyIqKFsqXiR8IX5dPz0pIitLKyIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIrTCsiKSl8KSIrSysiKlxcXSIsTj0iOigiK0wrIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK00rIikqKXwuKilcXCl8KSIsTz1uZXcgUmVnRXhwKEsrIisiLCJnIiksUD1uZXcgUmVnRXhwKCJeIitLKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK0srIiskIiwiZyIpLFE9bmV3IFJlZ0V4cCgiXiIrSysiKiwiK0srIioiKSxSPW5ldyBSZWdFeHAoIl4iK0srIiooWz4rfl18IitLKyIpIitLKyIqIiksUz1uZXcgUmVnRXhwKCI9IitLKyIqKFteXFxdJ1wiXSo/KSIrSysiKlxcXSIsImciKSxUPW5ldyBSZWdFeHAoTiksVT1uZXcgUmVnRXhwKCJeIitMKyIkIiksVj17SUQ6bmV3IFJlZ0V4cCgiXiMoIitMKyIpIiksQ0xBU1M6bmV3IFJlZ0V4cCgiXlxcLigiK0wrIikiKSxUQUc6bmV3IFJlZ0V4cCgiXigiK0wrInxbKl0pIiksQVRUUjpuZXcgUmVnRXhwKCJeIitNKSxQU0VVRE86bmV3IFJlZ0V4cCgiXiIrTiksQ0hJTEQ6bmV3IFJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIitLKyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIitLKyIqKD86KFsrLV18KSIrSysiKihcXGQrKXwpKSIrSysiKlxcKXwpIiwiaSIpLGJvb2w6bmV3IFJlZ0V4cCgiXig/OiIrSisiKSQiLCJpIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoIl4iK0srIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrSysiKigoPzotXFxkKT9cXGQqKSIrSysiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sVz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFg9L15oXGQkL2ksWT0vXltee10rXHtccypcW25hdGl2ZSBcdy8sWj0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLCQ9L1srfl0vLF89bmV3IFJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IitLKyI/fCgiK0srIil8LikiLCJpZyIpLGFhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iMHgiK2ItNjU1MzY7cmV0dXJuIGQhPT1kfHxjP2I6ZDwwP1N0cmluZy5mcm9tQ2hhckNvZGUoZCs2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZShkPj4xMHw1NTI5NiwxMDIzJmR8NTYzMjApfSxiYT0vKFtcMC1ceDFmXHg3Zl18Xi0/XGQpfF4tJHxbXlwwLVx4MWZceDdmLVx1RkZGRlx3LV0vZyxjYT1mdW5jdGlvbihhLGIpe3JldHVybiBiPyJcMCI9PT1hPyJcdWZmZmQiOmEuc2xpY2UoMCwtMSkrIlxcIithLmNoYXJDb2RlQXQoYS5sZW5ndGgtMSkudG9TdHJpbmcoMTYpKyIgIjoiXFwiK2F9LGRhPWZ1bmN0aW9uKCl7bSgpfSxlYT10YShmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwJiYoImZvcm0iaW4gYXx8ImxhYmVsImluIGEpfSx7ZGlyOiJwYXJlbnROb2RlIixuZXh0OiJsZWdlbmQifSk7dHJ5e0cuYXBwbHkoRD1ILmNhbGwodi5jaGlsZE5vZGVzKSx2LmNoaWxkTm9kZXMpLERbdi5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZmEpe0c9e2FwcGx5OkQubGVuZ3RoP2Z1bmN0aW9uKGEsYil7Ri5hcHBseShhLEguY2FsbChiKSl9OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGgsZD0wO3doaWxlKGFbYysrXT1iW2QrK10pO2EubGVuZ3RoPWMtMX19fWZ1bmN0aW9uIGdhKGEsYixkLGUpe3ZhciBmLGgsaixrLGwsbyxyLHM9YiYmYi5vd25lckRvY3VtZW50LHc9Yj9iLm5vZGVUeXBlOjk7aWYoZD1kfHxbXSwic3RyaW5nIiE9dHlwZW9mIGF8fCFhfHwxIT09dyYmOSE9PXcmJjExIT09dylyZXR1cm4gZDtpZighZSYmKChiP2Iub3duZXJEb2N1bWVudHx8Yjp2KSE9PW4mJm0oYiksYj1ifHxuLHApKXtpZigxMSE9PXcmJihsPVouZXhlYyhhKSkpaWYoZj1sWzFdKXtpZig5PT09dyl7aWYoIShqPWIuZ2V0RWxlbWVudEJ5SWQoZikpKXJldHVybiBkO2lmKGouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNlIGlmKHMmJihqPXMuZ2V0RWxlbWVudEJ5SWQoZikpJiZ0KGIsaikmJmouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNle2lmKGxbMl0pcmV0dXJuIEcuYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKSxkO2lmKChmPWxbM10pJiZjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gRy5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShmKSksZH1pZihjLnFzYSYmIUFbYSsiICJdJiYoIXF8fCFxLnRlc3QoYSkpKXtpZigxIT09dylzPWIscj1hO2Vsc2UgaWYoIm9iamVjdCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpeyhrPWIuZ2V0QXR0cmlidXRlKCJpZCIpKT9rPWsucmVwbGFjZShiYSxjYSk6Yi5zZXRBdHRyaWJ1dGUoImlkIixrPXUpLG89ZyhhKSxoPW8ubGVuZ3RoO3doaWxlKGgtLSlvW2hdPSIjIitrKyIgIitzYShvW2hdKTtyPW8uam9pbigiLCIpLHM9JC50ZXN0KGEpJiZxYShiLnBhcmVudE5vZGUpfHxifWlmKHIpdHJ5e3JldHVybiBHLmFwcGx5KGQscy5xdWVyeVNlbGVjdG9yQWxsKHIpKSxkfWNhdGNoKHgpe31maW5hbGx5e2s9PT11JiZiLnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fXJldHVybiBpKGEucmVwbGFjZShQLCIkMSIpLGIsZCxlKX1mdW5jdGlvbiBoYSgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrIiAiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYysiICJdPWV9cmV0dXJuIGJ9ZnVuY3Rpb24gaWEoYSl7cmV0dXJuIGFbdV09ITAsYX1mdW5jdGlvbiBqYShhKXt2YXIgYj1uLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0Iik7dHJ5e3JldHVybiEhYShiKX1jYXRjaChjKXtyZXR1cm4hMX1maW5hbGx5e2IucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbH19ZnVuY3Rpb24ga2EoYSxiKXt2YXIgYz1hLnNwbGl0KCJ8IiksZT1jLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24gbGEoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiZhLnNvdXJjZUluZGV4LWIuc291cmNlSW5kZXg7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIG1hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PWMmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKCJpbnB1dCI9PT1jfHwiYnV0dG9uIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBvYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuImZvcm0iaW4gYj9iLnBhcmVudE5vZGUmJmIuZGlzYWJsZWQ9PT0hMT8ibGFiZWwiaW4gYj8ibGFiZWwiaW4gYi5wYXJlbnROb2RlP2IucGFyZW50Tm9kZS5kaXNhYmxlZD09PWE6Yi5kaXNhYmxlZD09PWE6Yi5pc0Rpc2FibGVkPT09YXx8Yi5pc0Rpc2FibGVkIT09IWEmJmVhKGIpPT09YTpiLmRpc2FibGVkPT09YToibGFiZWwiaW4gYiYmYi5kaXNhYmxlZD09PWF9fWZ1bmN0aW9uIHBhKGEpe3JldHVybiBpYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixpYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBhJiYidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1nYS5zdXBwb3J0PXt9LGY9Z2EuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiEhYiYmIkhUTUwiIT09Yi5ub2RlTmFtZX0sbT1nYS5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlLGc9YT9hLm93bmVyRG9jdW1lbnR8fGE6djtyZXR1cm4gZyE9PW4mJjk9PT1nLm5vZGVUeXBlJiZnLmRvY3VtZW50RWxlbWVudD8obj1nLG89bi5kb2N1bWVudEVsZW1lbnQscD0hZihuKSx2IT09biYmKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZGEsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixkYSkpLGMuYXR0cmlidXRlcz1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVkudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1qYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShfLGFhKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJpZCIpPT09Yn19LGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYz9bY106W119fSk6KGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShfLGFhKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUmJmEuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSxkLmZpbmQuSUQ9ZnVuY3Rpb24oYSxiKXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQmJnApe3ZhciBjLGQsZSxmPWIuZ2V0RWxlbWVudEJ5SWQoYSk7aWYoZil7aWYoYz1mLmdldEF0dHJpYnV0ZU5vZGUoImlkIiksYyYmYy52YWx1ZT09PWEpcmV0dXJuW2ZdO2U9Yi5nZXRFbGVtZW50c0J5TmFtZShhKSxkPTA7d2hpbGUoZj1lW2QrK10paWYoYz1mLmdldEF0dHJpYnV0ZU5vZGUoImlkIiksYyYmYy52YWx1ZT09PWEpcmV0dXJuW2ZdfXJldHVybltdfX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKCIqIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJnApcmV0dXJuIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKX0scj1bXSxxPVtdLChjLnFzYT1ZLnRlc3Qobi5xdWVyeVNlbGVjdG9yQWxsKSkmJihqYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD0iPGEgaWQ9JyIrdSsiJz48L2E+PHNlbGVjdCBpZD0nIit1KyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGEucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnEucHVzaCgiWypeJF09IitLKyIqKD86Jyd8XCJcIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHEucHVzaCgiXFxbIitLKyIqKD86dmFsdWV8IitKKyIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrdSsiLV0iKS5sZW5ndGh8fHEucHVzaCgifj0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxxLnB1c2goIjpjaGVja2VkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrdSsiKyoiKS5sZW5ndGh8fHEucHVzaCgiLiMuK1srfl0iKX0pLGphKGZ1bmN0aW9uKGEpe2EuaW5uZXJIVE1MPSI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD4iO3ZhciBiPW4uY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGEucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnEucHVzaCgibmFtZSIrSysiKlsqXiR8IX5dPz0iKSwyIT09YS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aCYmcS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpLG8uYXBwZW5kQ2hpbGQoYSkuZGlzYWJsZWQ9ITAsMiE9PWEucXVlcnlTZWxlY3RvckFsbCgiOmRpc2FibGVkIikubGVuZ3RoJiZxLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikscS5wdXNoKCIsLio6Iil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPVkudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmamEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSwiKiIpLHMuY2FsbChhLCJbcyE9JyddOngiKSxyLnB1c2goIiE9IixOKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKCJ8IikpLHI9ci5sZW5ndGgmJm5ldyBSZWdFeHAoci5qb2luKCJ8IikpLGI9WS50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8WS50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09bnx8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1ufHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0koayxhKS1JKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZT1hLnBhcmVudE5vZGUsZj1iLnBhcmVudE5vZGUsZz1bYV0saD1bYl07aWYoIWV8fCFmKXJldHVybiBhPT09bj8tMTpiPT09bj8xOmU/LTE6Zj8xOms/SShrLGEpLUkoayxiKTowO2lmKGU9PT1mKXJldHVybiBsYShhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSlnLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWgudW5zaGlmdChjKTt3aGlsZShnW2RdPT09aFtkXSlkKys7cmV0dXJuIGQ/bGEoZ1tkXSxoW2RdKTpnW2RdPT09dj8tMTpoW2RdPT09dj8xOjB9LG4pOm59LGdhLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZ2EoYSxudWxsLG51bGwsYil9LGdhLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShTLCI9JyQxJ10iKSxjLm1hdGNoZXNTZWxlY3RvciYmcCYmIUFbYisiICJdJiYoIXJ8fCFyLnRlc3QoYikpJiYoIXF8fCFxLnRlc3QoYikpKXRyeXt2YXIgZD1zLmNhbGwoYSxiKTtpZihkfHxjLmRpc2Nvbm5lY3RlZE1hdGNofHxhLmRvY3VtZW50JiYxMSE9PWEuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIGR9Y2F0Y2goZSl7fXJldHVybiBnYShiLG4sbnVsbCxbYV0pLmxlbmd0aD4wfSxnYS5jb250YWlucz1mdW5jdGlvbihhLGIpe3JldHVybihhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSx0KGEsYil9LGdhLmF0dHI9ZnVuY3Rpb24oYSxiKXsoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSk7dmFyIGU9ZC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sZj1lJiZDLmNhbGwoZC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/ZShhLGIsIXApOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09Zj9mOmMuYXR0cmlidXRlc3x8IXA/YS5nZXRBdHRyaWJ1dGUoYik6KGY9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZi5zcGVjaWZpZWQ/Zi52YWx1ZTpudWxsfSxnYS5lc2NhcGU9ZnVuY3Rpb24oYSl7cmV0dXJuKGErIiIpLnJlcGxhY2UoYmEsY2EpfSxnYS5lcnJvcj1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrYSl9LGdhLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZD1bXSxlPTAsZj0wO2lmKGw9IWMuZGV0ZWN0RHVwbGljYXRlcyxrPSFjLnNvcnRTdGFibGUmJmEuc2xpY2UoMCksYS5zb3J0KEIpLGwpe3doaWxlKGI9YVtmKytdKWI9PT1hW2ZdJiYoZT1kLnB1c2goZikpO3doaWxlKGUtLSlhLnNwbGljZShkW2VdLDEpfXJldHVybiBrPW51bGwsYX0sZT1nYS5nZXRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9IiIsZD0wLGY9YS5ub2RlVHlwZTtpZihmKXtpZigxPT09Znx8OT09PWZ8fDExPT09Zil7aWYoInN0cmluZyI9PXR5cGVvZiBhLnRleHRDb250ZW50KXJldHVybiBhLnRleHRDb250ZW50O2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyljKz1lKGEpfWVsc2UgaWYoMz09PWZ8fDQ9PT1mKXJldHVybiBhLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKGI9YVtkKytdKWMrPWUoYik7cmV0dXJuIGN9LGQ9Z2Euc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86aWEsbWF0Y2g6VixhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS5yZXBsYWNlKF8sYWEpLGFbM109KGFbM118fGFbNF18fGFbNV18fCIiKS5yZXBsYWNlKF8sYWEpLCJ+PSI9PT1hWzJdJiYoYVszXT0iICIrYVszXSsiICIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxnYS5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKigiZXZlbiI9PT1hWzNdfHwib2RkIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHwib2RkIj09PWFbM10pKTphWzNdJiZnYS5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gVi5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHwiIjpjJiZULnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoIikiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKF8sYWEpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09YT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yn19LENMQVNTOmZ1bmN0aW9uKGEpe3ZhciBiPXlbYSsiICJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKCIoXnwiK0srIikiK2ErIigiK0srInwkKSIpKSYmeShhLGZ1bmN0aW9uKGEpe3JldHVybiBiLnRlc3QoInN0cmluZyI9PXR5cGVvZiBhLmNsYXNzTmFtZSYmYS5jbGFzc05hbWV8fCJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGUmJmEuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlPWdhLmF0dHIoZCxhKTtyZXR1cm4gbnVsbD09ZT8iIT0iPT09YjohYnx8KGUrPSIiLCI9Ij09PWI/ZT09PWM6IiE9Ij09PWI/ZSE9PWM6Il49Ij09PWI/YyYmMD09PWUuaW5kZXhPZihjKToiKj0iPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6IiQ9Ij09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09Yzoifj0iPT09Yj8oIiAiK2UucmVwbGFjZShPLCIgIikrIiAiKS5pbmRleE9mKGMpPi0xOiJ8PSI9PT1iJiYoZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrIi0iKSl9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJudGgiIT09YS5zbGljZSgwLDMpLGc9Imxhc3QiIT09YS5zbGljZSgtNCksaD0ib2YtdHlwZSI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoLHQ9ITE7aWYocSl7aWYoZil7d2hpbGUocCl7bT1iO3doaWxlKG09bVtwXSlpZihoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxnYS5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2lhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1JKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmlhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShQLCIkMSIpKTtyZXR1cm4gZFt1XT9pYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZ2EoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczppYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoXyxhYSksZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIFUudGVzdChhfHwiIil8fGdhLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2EpLGE9YS5yZXBsYWNlKF8sYWEpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7dmFyIGM7ZG8gaWYoYz1wP2IubGFuZzpiLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8Yi5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYSsiLSIpO3doaWxlKChiPWIucGFyZW50Tm9kZSkmJjE9PT1iLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGM9YS5sb2NhdGlvbiYmYS5sb2NhdGlvbi5oYXNoO3JldHVybiBjJiZjLnNsaWNlKDEpPT09Yi5pZH0scm9vdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW99LGZvY3VzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bi5hY3RpdmVFbGVtZW50JiYoIW4uaGFzRm9jdXN8fG4uaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LGVuYWJsZWQ6b2EoITEpLGRpc2FibGVkOm9hKCEwKSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFgudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFcudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6cGEoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OnBhKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpwYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuW2M8MD9jK2I6Y119KSxldmVuOnBhKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7YzxiO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOnBhKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7YzxiO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6cGEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1jPDA/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpwYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWM8MD9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bWEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bmEoYik7ZnVuY3Rpb24gcmEoKXt9cmEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyByYSxnPWdhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1RLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1SLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFAsIiAiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1WW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/Z2EuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBzYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9IiI7YjxjO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHRhKGEsYixjKXt2YXIgZD1iLmRpcixlPWIubmV4dCxmPWV8fGQsZz1jJiYicGFyZW50Tm9kZSI9PT1mLGg9eCsrO3JldHVybiBiLmZpcnN0P2Z1bmN0aW9uKGIsYyxlKXt3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGcpcmV0dXJuIGEoYixjLGUpO3JldHVybiExfTpmdW5jdGlvbihiLGMsaSl7dmFyIGosayxsLG09W3csaF07aWYoaSl7d2hpbGUoYj1iW2RdKWlmKCgxPT09Yi5ub2RlVHlwZXx8ZykmJmEoYixjLGkpKXJldHVybiEwfWVsc2Ugd2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxnKWlmKGw9Ylt1XXx8KGJbdV09e30pLGs9bFtiLnVuaXF1ZUlEXXx8KGxbYi51bmlxdWVJRF09e30pLGUmJmU9PT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpYj1iW2RdfHxiO2Vsc2V7aWYoKGo9a1tmXSkmJmpbMF09PT13JiZqWzFdPT09aClyZXR1cm4gbVsyXT1qWzJdO2lmKGtbZl09bSxtWzJdPWEoYixjLGkpKXJldHVybiEwfXJldHVybiExfX1mdW5jdGlvbiB1YShhKXtyZXR1cm4gYS5sZW5ndGg+MT9mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5sZW5ndGg7d2hpbGUoZS0tKWlmKCFhW2VdKGIsYyxkKSlyZXR1cm4hMTtyZXR1cm4hMH06YVswXX1mdW5jdGlvbiB2YShhLGIsYyl7Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtkPGU7ZCsrKWdhKGEsYltkXSxjKTtyZXR1cm4gY31mdW5jdGlvbiB3YShhLGIsYyxkLGUpe2Zvcih2YXIgZixnPVtdLGg9MCxpPWEubGVuZ3RoLGo9bnVsbCE9YjtoPGk7aCsrKShmPWFbaF0pJiYoYyYmIWMoZixkLGUpfHwoZy5wdXNoKGYpLGomJmIucHVzaChoKSkpO3JldHVybiBnfWZ1bmN0aW9uIHhhKGEsYixjLGQsZSxmKXtyZXR1cm4gZCYmIWRbdV0mJihkPXhhKGQpKSxlJiYhZVt1XSYmKGU9eGEoZSxmKSksaWEoZnVuY3Rpb24oZixnLGgsaSl7dmFyIGosayxsLG09W10sbj1bXSxvPWcubGVuZ3RoLHA9Znx8dmEoYnx8IioiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6d2EocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXdhKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9JKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj13YShyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6Ry5hcHBseShnLHIpfSl9ZnVuY3Rpb24geWEoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGg9Z3x8ZC5yZWxhdGl2ZVsiICJdLGk9Zz8xOjAsaz10YShmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9LGgsITApLGw9dGEoZnVuY3Rpb24oYSl7cmV0dXJuIEkoYixhKT4tMX0saCwhMCksbT1bZnVuY3Rpb24oYSxjLGQpe3ZhciBlPSFnJiYoZHx8YyE9PWopfHwoKGI9Yykubm9kZVR5cGU/ayhhLGMsZCk6bChhLGMsZCkpO3JldHVybiBiPW51bGwsZX1dO2k8ZjtpKyspaWYoYz1kLnJlbGF0aXZlW2FbaV0udHlwZV0pbT1bdGEodWEobSksYyldO2Vsc2V7aWYoYz1kLmZpbHRlclthW2ldLnR5cGVdLmFwcGx5KG51bGwsYVtpXS5tYXRjaGVzKSxjW3VdKXtmb3IoZT0rK2k7ZTxmO2UrKylpZihkLnJlbGF0aXZlW2FbZV0udHlwZV0pYnJlYWs7cmV0dXJuIHhhKGk+MSYmdWEobSksaT4xJiZzYShhLnNsaWNlKDAsaS0xKS5jb25jYXQoe3ZhbHVlOiIgIj09PWFbaS0yXS50eXBlPyIqIjoiIn0pKS5yZXBsYWNlKFAsIiQxIiksYyxpPGUmJnlhKGEuc2xpY2UoaSxlKSksZTxmJiZ5YShhPWEuc2xpY2UoZSkpLGU8ZiYmc2EoYSkpfW0ucHVzaChjKX1yZXR1cm4gdWEobSl9ZnVuY3Rpb24gemEoYSxiKXt2YXIgYz1iLmxlbmd0aD4wLGU9YS5sZW5ndGg+MCxmPWZ1bmN0aW9uKGYsZyxoLGksayl7dmFyIGwsbyxxLHI9MCxzPSIwIix0PWYmJltdLHU9W10sdj1qLHg9Znx8ZSYmZC5maW5kLlRBRygiKiIsaykseT13Kz1udWxsPT12PzE6TWF0aC5yYW5kb20oKXx8LjEsej14Lmxlbmd0aDtmb3IoayYmKGo9Zz09PW58fGd8fGspO3MhPT16JiZudWxsIT0obD14W3NdKTtzKyspe2lmKGUmJmwpe289MCxnfHxsLm93bmVyRG9jdW1lbnQ9PT1ufHwobShsKSxoPSFwKTt3aGlsZShxPWFbbysrXSlpZihxKGwsZ3x8bixoKSl7aS5wdXNoKGwpO2JyZWFrfWsmJih3PXkpfWMmJigobD0hcSYmbCkmJnItLSxmJiZ0LnB1c2gobCkpfWlmKHIrPXMsYyYmcyE9PXIpe289MDt3aGlsZShxPWJbbysrXSlxKHQsdSxnLGgpO2lmKGYpe2lmKHI+MCl3aGlsZShzLS0pdFtzXXx8dVtzXXx8KHVbc109RS5jYWxsKGkpKTt1PXdhKHUpfUcuYXBwbHkoaSx1KSxrJiYhZiYmdS5sZW5ndGg+MCYmcitiLmxlbmd0aD4xJiZnYS51bmlxdWVTb3J0KGkpfXJldHVybiBrJiYodz15LGo9diksdH07cmV0dXJuIGM/aWEoZik6Zn1yZXR1cm4gaD1nYS5jb21waWxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPVtdLGY9QVthKyIgIl07aWYoIWYpe2J8fChiPWcoYSkpLGM9Yi5sZW5ndGg7d2hpbGUoYy0tKWY9eWEoYltjXSksZlt1XT9kLnB1c2goZik6ZS5wdXNoKGYpO2Y9QShhLHphKGUsZCkpLGYuc2VsZWN0b3I9YX1yZXR1cm4gZn0saT1nYS5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGYsaSxqLGssbCxtPSJmdW5jdGlvbiI9PXR5cGVvZiBhJiZhLG49IWUmJmcoYT1tLnNlbGVjdG9yfHxhKTtpZihjPWN8fFtdLDE9PT1uLmxlbmd0aCl7aWYoaT1uWzBdPW5bMF0uc2xpY2UoMCksaS5sZW5ndGg+MiYmIklEIj09PShqPWlbMF0pLnR5cGUmJjk9PT1iLm5vZGVUeXBlJiZwJiZkLnJlbGF0aXZlW2lbMV0udHlwZV0pe2lmKGI9KGQuZmluZC5JRChqLm1hdGNoZXNbMF0ucmVwbGFjZShfLGFhKSxiKXx8W10pWzBdLCFiKXJldHVybiBjO20mJihiPWIucGFyZW50Tm9kZSksYT1hLnNsaWNlKGkuc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWY9Vi5uZWVkc0NvbnRleHQudGVzdChhKT8wOmkubGVuZ3RoO3doaWxlKGYtLSl7aWYoaj1pW2ZdLGQucmVsYXRpdmVbaz1qLnR5cGVdKWJyZWFrO2lmKChsPWQuZmluZFtrXSkmJihlPWwoai5tYXRjaGVzWzBdLnJlcGxhY2UoXyxhYSksJC50ZXN0KGlbMF0udHlwZSkmJnFhKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoaS5zcGxpY2UoZiwxKSxhPWUubGVuZ3RoJiZzYShpKSwhYSlyZXR1cm4gRy5hcHBseShjLGUpLGM7YnJlYWt9fX1yZXR1cm4obXx8aChhLG4pKShlLGIsIXAsYywhYnx8JC50ZXN0KGEpJiZxYShiLnBhcmVudE5vZGUpfHxiKSxjfSxjLnNvcnRTdGFibGU9dS5zcGxpdCgiIikuc29ydChCKS5qb2luKCIiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9amEoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0IikpfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8a2EoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGEsYixjKXtpZighYylyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoYiwidHlwZSI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8aW5wdXQvPiIsYS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSwiIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIil9KXx8a2EoInZhbHVlIixmdW5jdGlvbihhLGIsYyl7aWYoIWMmJiJpbnB1dCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuIGEuZGVmYXVsdFZhbHVlfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWEuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fGthKEosZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKCFjKXJldHVybiBhW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGdhfShhKTtyLmZpbmQ9eCxyLmV4cHI9eC5zZWxlY3RvcnMsci5leHByWyI6Il09ci5leHByLnBzZXVkb3Msci51bmlxdWVTb3J0PXIudW5pcXVlPXgudW5pcXVlU29ydCxyLnRleHQ9eC5nZXRUZXh0LHIuaXNYTUxEb2M9eC5pc1hNTCxyLmNvbnRhaW5zPXguY29udGFpbnMsci5lc2NhcGVTZWxlY3Rvcj14LmVzY2FwZTt2YXIgeT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT12b2lkIDAhPT1jO3doaWxlKChhPWFbYl0pJiY5IT09YS5ub2RlVHlwZSlpZigxPT09YS5ub2RlVHlwZSl7aWYoZSYmcihhKS5pcyhjKSlicmVhaztkLnB1c2goYSl9cmV0dXJuIGR9LHo9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9LEE9ci5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBCKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKX12YXIgQz0vXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaSxEPS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24gRShhLGIsYyl7cmV0dXJuIHIuaXNGdW5jdGlvbihiKT9yLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTpiLm5vZGVUeXBlP3IuZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09YiE9PWN9KToic3RyaW5nIiE9dHlwZW9mIGI/ci5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGkuY2FsbChiLGEpPi0xIT09Y30pOkQudGVzdChiKT9yLmZpbHRlcihiLGEsYyk6KGI9ci5maWx0ZXIoYixhKSxyLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gaS5jYWxsKGIsYSk+LTEhPT1jJiYxPT09YS5ub2RlVHlwZX0pKX1yLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9Ijpub3QoIithKyIpIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9yLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOnIuZmluZC5tYXRjaGVzKGEsci5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxyLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcy5sZW5ndGgsZT10aGlzO2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2socihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2I8ZDtiKyspaWYoci5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihjPXRoaXMucHVzaFN0YWNrKFtdKSxiPTA7YjxkO2IrKylyLmZpbmQoYSxlW2JdLGMpO3JldHVybiBkPjE/ci51bmlxdWVTb3J0KGMpOmN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soRSh0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soRSh0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEhRSh0aGlzLCJzdHJpbmciPT10eXBlb2YgYSYmQS50ZXN0KGEpP3IoYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgRixHPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKykpJC8sSD1yLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxGLCJzdHJpbmciPT10eXBlb2YgYSl7aWYoZT0iPCI9PT1hWzBdJiYiPiI9PT1hW2EubGVuZ3RoLTFdJiZhLmxlbmd0aD49Mz9bbnVsbCxhLG51bGxdOkcuZXhlYyhhKSwhZXx8IWVbMV0mJmIpcmV0dXJuIWJ8fGIuanF1ZXJ5PyhifHxjKS5maW5kKGEpOnRoaXMuY29uc3RydWN0b3IoYikuZmluZChhKTtpZihlWzFdKXtpZihiPWIgaW5zdGFuY2VvZiByP2JbMF06YixyLm1lcmdlKHRoaXMsci5wYXJzZUhUTUwoZVsxXSxiJiZiLm5vZGVUeXBlP2Iub3duZXJEb2N1bWVudHx8YjpkLCEwKSksQy50ZXN0KGVbMV0pJiZyLmlzUGxhaW5PYmplY3QoYikpZm9yKGUgaW4gYilyLmlzRnVuY3Rpb24odGhpc1tlXSk/dGhpc1tlXShiW2VdKTp0aGlzLmF0dHIoZSxiW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4gZj1kLmdldEVsZW1lbnRCeUlkKGVbMl0pLGYmJih0aGlzWzBdPWYsdGhpcy5sZW5ndGg9MSksdGhpc31yZXR1cm4gYS5ub2RlVHlwZT8odGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6ci5pc0Z1bmN0aW9uKGEpP3ZvaWQgMCE9PWMucmVhZHk/Yy5yZWFkeShhKTphKHIpOnIubWFrZUFycmF5KGEsdGhpcyl9O0gucHJvdG90eXBlPXIuZm4sRj1yKGQpO3ZhciBJPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEo9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07ci5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYj1yKGEsdGhpcyksYz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGM7YSsrKWlmKHIuY29udGFpbnModGhpcyxiW2FdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPSJzdHJpbmciIT10eXBlb2YgYSYmcihhKTtpZighQS50ZXN0KGEpKWZvcig7ZDxlO2QrKylmb3IoYz10aGlzW2RdO2MmJmMhPT1iO2M9Yy5wYXJlbnROb2RlKWlmKGMubm9kZVR5cGU8MTEmJihnP2cuaW5kZXgoYyk+LTE6MT09PWMubm9kZVR5cGUmJnIuZmluZC5tYXRjaGVzU2VsZWN0b3IoYyxhKSkpe2YucHVzaChjKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2soZi5sZW5ndGg+MT9yLnVuaXF1ZVNvcnQoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhPyJzdHJpbmciPT10eXBlb2YgYT9pLmNhbGwocihhKSx0aGlzWzBdKTppLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHIudW5pcXVlU29ydChyLm1lcmdlKHRoaXMuZ2V0KCkscihhLGIpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFkZChudWxsPT1hP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGEpKX19KTtmdW5jdGlvbiBLKGEsYil7d2hpbGUoKGE9YVtiXSkmJjEhPT1hLm5vZGVUeXBlKTtyZXR1cm4gYX1yLmVhY2goe3BhcmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJjExIT09Yi5ub2RlVHlwZT9iOm51bGx9LHBhcmVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSwicGFyZW50Tm9kZSIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB5KGEsInBhcmVudE5vZGUiLGMpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBLKGEsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oYSl7cmV0dXJuIEsoYSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4geShhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4geShhLCJuZXh0U2libGluZyIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHkoYSwicHJldmlvdXNTaWJsaW5nIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHooKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiB6KGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBCKGEsImlmcmFtZSIpP2EuY29udGVudERvY3VtZW50OihCKGEsInRlbXBsYXRlIikmJihhPWEuY29udGVudHx8YSksci5tZXJnZShbXSxhLmNoaWxkTm9kZXMpKX19LGZ1bmN0aW9uKGEsYil7ci5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPXIubWFwKHRoaXMsYixjKTtyZXR1cm4iVW50aWwiIT09YS5zbGljZSgtNSkmJihkPWMpLGQmJiJzdHJpbmciPT10eXBlb2YgZCYmKGU9ci5maWx0ZXIoZCxlKSksdGhpcy5sZW5ndGg+MSYmKEpbYV18fHIudW5pcXVlU29ydChlKSxJLnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgTD0vW15ceDIwXHRcclxuXGZdKy9nO2Z1bmN0aW9uIE0oYSl7dmFyIGI9e307cmV0dXJuIHIuZWFjaChhLm1hdGNoKEwpfHxbXSxmdW5jdGlvbihhLGMpe2JbY109ITB9KSxifXIuQ2FsbGJhY2tzPWZ1bmN0aW9uKGEpe2E9InN0cmluZyI9PXR5cGVvZiBhP00oYSk6ci5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZj1bXSxnPVtdLGg9LTEsaT1mdW5jdGlvbigpe2ZvcihlPWV8fGEub25jZSxkPWI9ITA7Zy5sZW5ndGg7aD0tMSl7Yz1nLnNoaWZ0KCk7d2hpbGUoKytoPGYubGVuZ3RoKWZbaF0uYXBwbHkoY1swXSxjWzFdKT09PSExJiZhLnN0b3BPbkZhbHNlJiYoaD1mLmxlbmd0aCxjPSExKX1hLm1lbW9yeXx8KGM9ITEpLGI9ITEsZSYmKGY9Yz9bXToiIil9LGo9e2FkZDpmdW5jdGlvbigpe3JldHVybiBmJiYoYyYmIWImJihoPWYubGVuZ3RoLTEsZy5wdXNoKGMpKSxmdW5jdGlvbiBkKGIpe3IuZWFjaChiLGZ1bmN0aW9uKGIsYyl7ci5pc0Z1bmN0aW9uKGMpP2EudW5pcXVlJiZqLmhhcyhjKXx8Zi5wdXNoKGMpOmMmJmMubGVuZ3RoJiYic3RyaW5nIiE9PXIudHlwZShjKSYmZChjKX0pfShhcmd1bWVudHMpLGMmJiFiJiZpKCkpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiByLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGEsYil7dmFyIGM7d2hpbGUoKGM9ci5pbkFycmF5KGIsZixjKSk+LTEpZi5zcGxpY2UoYywxKSxjPD1oJiZoLS19KSx0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/ci5pbkFycmF5KGEsZik+LTE6Zi5sZW5ndGg+MH0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gZiYmKGY9W10pLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gZT1nPVtdLGY9Yz0iIix0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFmfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGU9Zz1bXSxjfHxifHwoZj1jPSIiKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfTtmdW5jdGlvbiBOKGEpe3JldHVybiBhfWZ1bmN0aW9uIE8oYSl7dGhyb3cgYX1mdW5jdGlvbiBQKGEsYixjLGQpe3ZhciBlO3RyeXthJiZyLmlzRnVuY3Rpb24oZT1hLnByb21pc2UpP2UuY2FsbChhKS5kb25lKGIpLmZhaWwoYyk6YSYmci5pc0Z1bmN0aW9uKGU9YS50aGVuKT9lLmNhbGwoYSxiLGMpOmIuYXBwbHkodm9pZCAwLFthXS5zbGljZShkKSl9Y2F0Y2goYSl7Yy5hcHBseSh2b2lkIDAsW2FdKX19ci5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGIpe3ZhciBjPVtbIm5vdGlmeSIsInByb2dyZXNzIixyLkNhbGxiYWNrcygibWVtb3J5Iiksci5DYWxsYmFja3MoIm1lbW9yeSIpLDJdLFsicmVzb2x2ZSIsImRvbmUiLHIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLDAsInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixyLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxyLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxkPSJwZW5kaW5nIixlPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBkfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZi5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LCJjYXRjaCI6ZnVuY3Rpb24oYSl7cmV0dXJuIGUudGhlbihudWxsLGEpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiByLkRlZmVycmVkKGZ1bmN0aW9uKGIpe3IuZWFjaChjLGZ1bmN0aW9uKGMsZCl7dmFyIGU9ci5pc0Z1bmN0aW9uKGFbZFs0XV0pJiZhW2RbNF1dO2ZbZFsxXV0oZnVuY3Rpb24oKXt2YXIgYT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZyLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhiLm5vdGlmeSkuZG9uZShiLnJlc29sdmUpLmZhaWwoYi5yZWplY3QpOmJbZFswXSsiV2l0aCJdKHRoaXMsZT9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSx0aGVuOmZ1bmN0aW9uKGIsZCxlKXt2YXIgZj0wO2Z1bmN0aW9uIGcoYixjLGQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxpPWFyZ3VtZW50cyxqPWZ1bmN0aW9uKCl7dmFyIGEsajtpZighKGI8Zikpe2lmKGE9ZC5hcHBseShoLGkpLGE9PT1jLnByb21pc2UoKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGVuYWJsZSBzZWxmLXJlc29sdXRpb24iKTtqPWEmJigib2JqZWN0Ij09dHlwZW9mIGF8fCJmdW5jdGlvbiI9PXR5cGVvZiBhKSYmYS50aGVuLHIuaXNGdW5jdGlvbihqKT9lP2ouY2FsbChhLGcoZixjLE4sZSksZyhmLGMsTyxlKSk6KGYrKyxqLmNhbGwoYSxnKGYsYyxOLGUpLGcoZixjLE8sZSksZyhmLGMsTixjLm5vdGlmeVdpdGgpKSk6KGQhPT1OJiYoaD12b2lkIDAsaT1bYV0pLChlfHxjLnJlc29sdmVXaXRoKShoLGkpKX19LGs9ZT9qOmZ1bmN0aW9uKCl7dHJ5e2ooKX1jYXRjaChhKXtyLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2smJnIuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhhLGsuc3RhY2tUcmFjZSksYisxPj1mJiYoZCE9PU8mJihoPXZvaWQgMCxpPVthXSksYy5yZWplY3RXaXRoKGgsaSkpfX07Yj9rKCk6KHIuRGVmZXJyZWQuZ2V0U3RhY2tIb29rJiYoay5zdGFja1RyYWNlPXIuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCkpLGEuc2V0VGltZW91dChrKSl9fXJldHVybiByLkRlZmVycmVkKGZ1bmN0aW9uKGEpe2NbMF1bM10uYWRkKGcoMCxhLHIuaXNGdW5jdGlvbihlKT9lOk4sYS5ub3RpZnlXaXRoKSksY1sxXVszXS5hZGQoZygwLGEsci5pc0Z1bmN0aW9uKGIpP2I6TikpLGNbMl1bM10uYWRkKGcoMCxhLHIuaXNGdW5jdGlvbihkKT9kOk8pKX0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT9yLmV4dGVuZChhLGUpOmV9fSxmPXt9O3JldHVybiByLmVhY2goYyxmdW5jdGlvbihhLGIpe3ZhciBnPWJbMl0saD1iWzVdO2VbYlsxXV09Zy5hZGQsaCYmZy5hZGQoZnVuY3Rpb24oKXtkPWh9LGNbMy1hXVsyXS5kaXNhYmxlLGNbMF1bMl0ubG9jayksZy5hZGQoYlszXS5maXJlKSxmW2JbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGZbYlswXSsiV2l0aCJdKHRoaXM9PT1mP3ZvaWQgMDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZltiWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGUucHJvbWlzZShmKSxiJiZiLmNhbGwoZixmKSxmfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPWFyZ3VtZW50cy5sZW5ndGgsYz1iLGQ9QXJyYXkoYyksZT1mLmNhbGwoYXJndW1lbnRzKSxnPXIuRGVmZXJyZWQoKSxoPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXtkW2FdPXRoaXMsZVthXT1hcmd1bWVudHMubGVuZ3RoPjE/Zi5jYWxsKGFyZ3VtZW50cyk6YywtLWJ8fGcucmVzb2x2ZVdpdGgoZCxlKX19O2lmKGI8PTEmJihQKGEsZy5kb25lKGgoYykpLnJlc29sdmUsZy5yZWplY3QsIWIpLCJwZW5kaW5nIj09PWcuc3RhdGUoKXx8ci5pc0Z1bmN0aW9uKGVbY10mJmVbY10udGhlbikpKXJldHVybiBnLnRoZW4oKTt3aGlsZShjLS0pUChlW2NdLGgoYyksZy5yZWplY3QpO3JldHVybiBnLnByb21pc2UoKX19KTt2YXIgUT0vXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLztyLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2s9ZnVuY3Rpb24oYixjKXthLmNvbnNvbGUmJmEuY29uc29sZS53YXJuJiZiJiZRLnRlc3QoYi5uYW1lKSYmYS5jb25zb2xlLndhcm4oImpRdWVyeS5EZWZlcnJlZCBleGNlcHRpb246ICIrYi5tZXNzYWdlLGIuc3RhY2ssYyl9LHIucmVhZHlFeGNlcHRpb249ZnVuY3Rpb24oYil7YS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgYn0pfTt2YXIgUj1yLkRlZmVycmVkKCk7ci5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gUi50aGVuKGEpWyJjYXRjaCJdKGZ1bmN0aW9uKGEpe3IucmVhZHlFeGNlcHRpb24oYSl9KSx0aGlzfSxyLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tci5yZWFkeVdhaXQ6ci5pc1JlYWR5KXx8KHIuaXNSZWFkeT0hMCxhIT09ITAmJi0tci5yZWFkeVdhaXQ+MHx8Ui5yZXNvbHZlV2l0aChkLFtyXSkpfX0pLHIucmVhZHkudGhlbj1SLnRoZW47ZnVuY3Rpb24gUygpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsUyksCmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsUyksci5yZWFkeSgpfSJjb21wbGV0ZSI9PT1kLnJlYWR5U3RhdGV8fCJsb2FkaW5nIiE9PWQucmVhZHlTdGF0ZSYmIWQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsP2Euc2V0VGltZW91dChyLnJlYWR5KTooZC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixTKSxhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLFMpKTt2YXIgVD1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD0wLGk9YS5sZW5ndGgsaj1udWxsPT1jO2lmKCJvYmplY3QiPT09ci50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpVChhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxyLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwocihhKSxjKX0pKSxiKSlmb3IoO2g8aTtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfSxVPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gVigpe3RoaXMuZXhwYW5kbz1yLmV4cGFuZG8rVi51aWQrK31WLnVpZD0xLFYucHJvdG90eXBlPXtjYWNoZTpmdW5jdGlvbihhKXt2YXIgYj1hW3RoaXMuZXhwYW5kb107cmV0dXJuIGJ8fChiPXt9LFUoYSkmJihhLm5vZGVUeXBlP2FbdGhpcy5leHBhbmRvXT1iOk9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLHRoaXMuZXhwYW5kbyx7dmFsdWU6Yixjb25maWd1cmFibGU6ITB9KSkpLGJ9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmNhY2hlKGEpO2lmKCJzdHJpbmciPT10eXBlb2YgYillW3IuY2FtZWxDYXNlKGIpXT1jO2Vsc2UgZm9yKGQgaW4gYillW3IuY2FtZWxDYXNlKGQpXT1iW2RdO3JldHVybiBlfSxnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwPT09Yj90aGlzLmNhY2hlKGEpOmFbdGhpcy5leHBhbmRvXSYmYVt0aGlzLmV4cGFuZG9dW3IuY2FtZWxDYXNlKGIpXX0sYWNjZXNzOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmInN0cmluZyI9PXR5cGVvZiBiJiZ2b2lkIDA9PT1jP3RoaXMuZ2V0KGEsYik6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9YVt0aGlzLmV4cGFuZG9dO2lmKHZvaWQgMCE9PWQpe2lmKHZvaWQgMCE9PWIpe0FycmF5LmlzQXJyYXkoYik/Yj1iLm1hcChyLmNhbWVsQ2FzZSk6KGI9ci5jYW1lbENhc2UoYiksYj1iIGluIGQ/W2JdOmIubWF0Y2goTCl8fFtdKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlkZWxldGUgZFtiW2NdXX0odm9pZCAwPT09Ynx8ci5pc0VtcHR5T2JqZWN0KGQpKSYmKGEubm9kZVR5cGU/YVt0aGlzLmV4cGFuZG9dPXZvaWQgMDpkZWxldGUgYVt0aGlzLmV4cGFuZG9dKX19LGhhc0RhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9YVt0aGlzLmV4cGFuZG9dO3JldHVybiB2b2lkIDAhPT1iJiYhci5pc0VtcHR5T2JqZWN0KGIpfX07dmFyIFc9bmV3IFYsWD1uZXcgVixZPS9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sWj0vW0EtWl0vZztmdW5jdGlvbiAkKGEpe3JldHVybiJ0cnVlIj09PWF8fCJmYWxzZSIhPT1hJiYoIm51bGwiPT09YT9udWxsOmE9PT0rYSsiIj8rYTpZLnRlc3QoYSk/SlNPTi5wYXJzZShhKTphKX1mdW5jdGlvbiBfKGEsYixjKXt2YXIgZDtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSlpZihkPSJkYXRhLSIrYi5yZXBsYWNlKFosIi0kJiIpLnRvTG93ZXJDYXNlKCksYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSQoYyl9Y2F0Y2goZSl7fVguc2V0KGEsYixjKX1lbHNlIGM9dm9pZCAwO3JldHVybiBjfXIuZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBYLmhhc0RhdGEoYSl8fFcuaGFzRGF0YShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFguYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe1gucmVtb3ZlKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gVy5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe1cucmVtb3ZlKGEsYil9fSksci5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1YLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIVcuZ2V0KGYsImhhc0RhdGFBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPXIuY2FtZWxDYXNlKGQuc2xpY2UoNSkpLF8oZixkLGVbZF0pKSk7Vy5zZXQoZiwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIGV9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe1guc2V0KHRoaXMsYSl9KTpUKHRoaXMsZnVuY3Rpb24oYil7dmFyIGM7aWYoZiYmdm9pZCAwPT09Yil7aWYoYz1YLmdldChmLGEpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoYz1fKGYsYSksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIHRoaXMuZWFjaChmdW5jdGlvbigpe1guc2V0KHRoaXMsYSxiKX0pfSxudWxsLGIsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtYLnJlbW92ZSh0aGlzLGEpfSl9fSksci5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtpZihhKXJldHVybiBiPShifHwiZngiKSsicXVldWUiLGQ9Vy5nZXQoYSxiKSxjJiYoIWR8fEFycmF5LmlzQXJyYXkoYyk/ZD1XLmFjY2VzcyhhLGIsci5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W119LGRlcXVldWU6ZnVuY3Rpb24oYSxiKXtiPWJ8fCJmeCI7dmFyIGM9ci5xdWV1ZShhLGIpLGQ9Yy5sZW5ndGgsZT1jLnNoaWZ0KCksZj1yLl9xdWV1ZUhvb2tzKGEsYiksZz1mdW5jdGlvbigpe3IuZGVxdWV1ZShhLGIpfTsiaW5wcm9ncmVzcyI9PT1lJiYoZT1jLnNoaWZ0KCksZC0tKSxlJiYoImZ4Ij09PWImJmMudW5zaGlmdCgiaW5wcm9ncmVzcyIpLGRlbGV0ZSBmLnN0b3AsZS5jYWxsKGEsZyxmKSksIWQmJmYmJmYuZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihhLGIpe3ZhciBjPWIrInF1ZXVlSG9va3MiO3JldHVybiBXLmdldChhLGMpfHxXLmFjY2VzcyhhLGMse2VtcHR5OnIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe1cucmVtb3ZlKGEsW2IrInF1ZXVlIixjXSl9KX0pfX0pLHIuZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPTI7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBhJiYoYj1hLGE9ImZ4IixjLS0pLGFyZ3VtZW50cy5sZW5ndGg8Yz9yLnF1ZXVlKHRoaXNbMF0sYSk6dm9pZCAwPT09Yj90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPXIucXVldWUodGhpcyxhLGIpO3IuX3F1ZXVlSG9va3ModGhpcyxhKSwiZngiPT09YSYmImlucHJvZ3Jlc3MiIT09Y1swXSYmci5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ci5kZXF1ZXVlKHRoaXMsYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MSxlPXIuRGVmZXJyZWQoKSxmPXRoaXMsZz10aGlzLmxlbmd0aCxoPWZ1bmN0aW9uKCl7LS1kfHxlLnJlc29sdmVXaXRoKGYsW2ZdKX07InN0cmluZyIhPXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxhPWF8fCJmeCI7d2hpbGUoZy0tKWM9Vy5nZXQoZltnXSxhKyJxdWV1ZUhvb2tzIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSk7dmFyIGFhPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLGJhPW5ldyBSZWdFeHAoIl4oPzooWystXSk9fCkoIithYSsiKShbYS16JV0qKSQiLCJpIiksY2E9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxkYT1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsIm5vbmUiPT09YS5zdHlsZS5kaXNwbGF5fHwiIj09PWEuc3R5bGUuZGlzcGxheSYmci5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSkmJiJub25lIj09PXIuY3NzKGEsImRpc3BsYXkiKX0sZWE9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnPXt9O2ZvcihmIGluIGIpZ1tmXT1hLnN0eWxlW2ZdLGEuc3R5bGVbZl09YltmXTtlPWMuYXBwbHkoYSxkfHxbXSk7Zm9yKGYgaW4gYilhLnN0eWxlW2ZdPWdbZl07cmV0dXJuIGV9O2Z1bmN0aW9uIGZhKGEsYixjLGQpe3ZhciBlLGY9MSxnPTIwLGg9ZD9mdW5jdGlvbigpe3JldHVybiBkLmN1cigpfTpmdW5jdGlvbigpe3JldHVybiByLmNzcyhhLGIsIiIpfSxpPWgoKSxqPWMmJmNbM118fChyLmNzc051bWJlcltiXT8iIjoicHgiKSxrPShyLmNzc051bWJlcltiXXx8InB4IiE9PWomJitpKSYmYmEuZXhlYyhyLmNzcyhhLGIpKTtpZihrJiZrWzNdIT09ail7aj1qfHxrWzNdLGM9Y3x8W10saz0raXx8MTtkbyBmPWZ8fCIuNSIsay89ZixyLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBnYT17fTtmdW5jdGlvbiBoYShhKXt2YXIgYixjPWEub3duZXJEb2N1bWVudCxkPWEubm9kZU5hbWUsZT1nYVtkXTtyZXR1cm4gZT9lOihiPWMuYm9keS5hcHBlbmRDaGlsZChjLmNyZWF0ZUVsZW1lbnQoZCkpLGU9ci5jc3MoYiwiZGlzcGxheSIpLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSwibm9uZSI9PT1lJiYoZT0iYmxvY2siKSxnYVtkXT1lLGUpfWZ1bmN0aW9uIGlhKGEsYil7Zm9yKHZhciBjLGQsZT1bXSxmPTAsZz1hLmxlbmd0aDtmPGc7ZisrKWQ9YVtmXSxkLnN0eWxlJiYoYz1kLnN0eWxlLmRpc3BsYXksYj8oIm5vbmUiPT09YyYmKGVbZl09Vy5nZXQoZCwiZGlzcGxheSIpfHxudWxsLGVbZl18fChkLnN0eWxlLmRpc3BsYXk9IiIpKSwiIj09PWQuc3R5bGUuZGlzcGxheSYmZGEoZCkmJihlW2ZdPWhhKGQpKSk6Im5vbmUiIT09YyYmKGVbZl09Im5vbmUiLFcuc2V0KGQsImRpc3BsYXkiLGMpKSk7Zm9yKGY9MDtmPGc7ZisrKW51bGwhPWVbZl0mJihhW2ZdLnN0eWxlLmRpc3BsYXk9ZVtmXSk7cmV0dXJuIGF9ci5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gaWEodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gaWEodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGEodGhpcyk/cih0aGlzKS5zaG93KCk6cih0aGlzKS5oaWRlKCl9KX19KTt2YXIgamE9L14oPzpjaGVja2JveHxyYWRpbykkL2ksa2E9LzwoW2Etel1bXlwvXDA+XHgyMFx0XHJcblxmXSspL2ksbGE9L14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLG1hPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07bWEub3B0Z3JvdXA9bWEub3B0aW9uLG1hLnRib2R5PW1hLnRmb290PW1hLmNvbGdyb3VwPW1hLmNhcHRpb249bWEudGhlYWQsbWEudGg9bWEudGQ7ZnVuY3Rpb24gbmEoYSxiKXt2YXIgYztyZXR1cm4gYz0idW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHwiKiIpOltdLHZvaWQgMD09PWJ8fGImJkIoYSxiKT9yLm1lcmdlKFthXSxjKTpjfWZ1bmN0aW9uIG9hKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKVcuc2V0KGFbY10sImdsb2JhbEV2YWwiLCFifHxXLmdldChiW2NdLCJnbG9iYWxFdmFsIikpfXZhciBwYT0vPHwmIz9cdys7LztmdW5jdGlvbiBxYShhLGIsYyxkLGUpe2Zvcih2YXIgZixnLGgsaSxqLGssbD1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxtPVtdLG49MCxvPWEubGVuZ3RoO248bztuKyspaWYoZj1hW25dLGZ8fDA9PT1mKWlmKCJvYmplY3QiPT09ci50eXBlKGYpKXIubWVyZ2UobSxmLm5vZGVUeXBlP1tmXTpmKTtlbHNlIGlmKHBhLnRlc3QoZikpe2c9Z3x8bC5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxoPShrYS5leGVjKGYpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLGk9bWFbaF18fG1hLl9kZWZhdWx0LGcuaW5uZXJIVE1MPWlbMV0rci5odG1sUHJlZmlsdGVyKGYpK2lbMl0saz1pWzBdO3doaWxlKGstLSlnPWcubGFzdENoaWxkO3IubWVyZ2UobSxnLmNoaWxkTm9kZXMpLGc9bC5maXJzdENoaWxkLGcudGV4dENvbnRlbnQ9IiJ9ZWxzZSBtLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShmKSk7bC50ZXh0Q29udGVudD0iIixuPTA7d2hpbGUoZj1tW24rK10paWYoZCYmci5pbkFycmF5KGYsZCk+LTEpZSYmZS5wdXNoKGYpO2Vsc2UgaWYoaj1yLmNvbnRhaW5zKGYub3duZXJEb2N1bWVudCxmKSxnPW5hKGwuYXBwZW5kQ2hpbGQoZiksInNjcmlwdCIpLGomJm9hKGcpLGMpe2s9MDt3aGlsZShmPWdbaysrXSlsYS50ZXN0KGYudHlwZXx8IiIpJiZjLnB1c2goZil9cmV0dXJuIGx9IWZ1bmN0aW9uKCl7dmFyIGE9ZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYj1hLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpLGM9ZC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Muc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSxjLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSxjLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxiLmFwcGVuZENoaWxkKGMpLG8uY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxiLmlubmVySFRNTD0iPHRleHRhcmVhPng8L3RleHRhcmVhPiIsby5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlfSgpO3ZhciByYT1kLmRvY3VtZW50RWxlbWVudCxzYT0vXmtleS8sdGE9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLHVhPS9eKFteLl0qKSg/OlwuKC4rKXwpLztmdW5jdGlvbiB2YSgpe3JldHVybiEwfWZ1bmN0aW9uIHdhKCl7cmV0dXJuITF9ZnVuY3Rpb24geGEoKXt0cnl7cmV0dXJuIGQuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fWZ1bmN0aW9uIHlhKGEsYixjLGQsZSxmKXt2YXIgZyxoO2lmKCJvYmplY3QiPT10eXBlb2YgYil7InN0cmluZyIhPXR5cGVvZiBjJiYoZD1kfHxjLGM9dm9pZCAwKTtmb3IoaCBpbiBiKXlhKGEsaCxjLGQsYltoXSxmKTtyZXR1cm4gYX1pZihudWxsPT1kJiZudWxsPT1lPyhlPWMsZD1jPXZvaWQgMCk6bnVsbD09ZSYmKCJzdHJpbmciPT10eXBlb2YgYz8oZT1kLGQ9dm9pZCAwKTooZT1kLGQ9YyxjPXZvaWQgMCkpLGU9PT0hMSllPXdhO2Vsc2UgaWYoIWUpcmV0dXJuIGE7cmV0dXJuIDE9PT1mJiYoZz1lLGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHIoKS5vZmYoYSksZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuZ3VpZD1nLmd1aWR8fChnLmd1aWQ9ci5ndWlkKyspKSxhLmVhY2goZnVuY3Rpb24oKXtyLmV2ZW50LmFkZCh0aGlzLGIsZSxkLGMpfSl9ci5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbixvLHAscT1XLmdldChhKTtpZihxKXtjLmhhbmRsZXImJihmPWMsYz1mLmhhbmRsZXIsZT1mLnNlbGVjdG9yKSxlJiZyLmZpbmQubWF0Y2hlc1NlbGVjdG9yKHJhLGUpLGMuZ3VpZHx8KGMuZ3VpZD1yLmd1aWQrKyksKGk9cS5ldmVudHMpfHwoaT1xLmV2ZW50cz17fSksKGc9cS5oYW5kbGUpfHwoZz1xLmhhbmRsZT1mdW5jdGlvbihiKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIHImJnIuZXZlbnQudHJpZ2dlcmVkIT09Yi50eXBlP3IuZXZlbnQuZGlzcGF0Y2guYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgMH0pLGI9KGJ8fCIiKS5tYXRjaChMKXx8WyIiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPXVhLmV4ZWMoYltqXSl8fFtdLG49cD1oWzFdLG89KGhbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxuJiYobD1yLmV2ZW50LnNwZWNpYWxbbl18fHt9LG49KGU/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG4sbD1yLmV2ZW50LnNwZWNpYWxbbl18fHt9LGs9ci5leHRlbmQoe3R5cGU6bixvcmlnVHlwZTpwLGRhdGE6ZCxoYW5kbGVyOmMsZ3VpZDpjLmd1aWQsc2VsZWN0b3I6ZSxuZWVkc0NvbnRleHQ6ZSYmci5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGUpLG5hbWVzcGFjZTpvLmpvaW4oIi4iKX0sZiksKG09aVtuXSl8fChtPWlbbl09W10sbS5kZWxlZ2F0ZUNvdW50PTAsbC5zZXR1cCYmbC5zZXR1cC5jYWxsKGEsZCxvLGcpIT09ITF8fGEuYWRkRXZlbnRMaXN0ZW5lciYmYS5hZGRFdmVudExpc3RlbmVyKG4sZykpLGwuYWRkJiYobC5hZGQuY2FsbChhLGspLGsuaGFuZGxlci5ndWlkfHwoay5oYW5kbGVyLmd1aWQ9Yy5ndWlkKSksZT9tLnNwbGljZShtLmRlbGVnYXRlQ291bnQrKywwLGspOm0ucHVzaChrKSxyLmV2ZW50Lmdsb2JhbFtuXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG4sbyxwLHE9Vy5oYXNEYXRhKGEpJiZXLmdldChhKTtpZihxJiYoaT1xLmV2ZW50cykpe2I9KGJ8fCIiKS5tYXRjaChMKXx8WyIiXSxqPWIubGVuZ3RoO3doaWxlKGotLSlpZihoPXVhLmV4ZWMoYltqXSl8fFtdLG49cD1oWzFdLG89KGhbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxuKXtsPXIuZXZlbnQuc3BlY2lhbFtuXXx8e30sbj0oZD9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8bixtPWlbbl18fFtdLGg9aFsyXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIrby5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKSxnPWY9bS5sZW5ndGg7d2hpbGUoZi0tKWs9bVtmXSwhZSYmcCE9PWsub3JpZ1R5cGV8fGMmJmMuZ3VpZCE9PWsuZ3VpZHx8aCYmIWgudGVzdChrLm5hbWVzcGFjZSl8fGQmJmQhPT1rLnNlbGVjdG9yJiYoIioqIiE9PWR8fCFrLnNlbGVjdG9yKXx8KG0uc3BsaWNlKGYsMSksay5zZWxlY3RvciYmbS5kZWxlZ2F0ZUNvdW50LS0sbC5yZW1vdmUmJmwucmVtb3ZlLmNhbGwoYSxrKSk7ZyYmIW0ubGVuZ3RoJiYobC50ZWFyZG93biYmbC50ZWFyZG93bi5jYWxsKGEsbyxxLmhhbmRsZSkhPT0hMXx8ci5yZW1vdmVFdmVudChhLG4scS5oYW5kbGUpLGRlbGV0ZSBpW25dKX1lbHNlIGZvcihuIGluIGkpci5ldmVudC5yZW1vdmUoYSxuK2Jbal0sYyxkLCEwKTtyLmlzRW1wdHlPYmplY3QoaSkmJlcucmVtb3ZlKGEsImhhbmRsZSBldmVudHMiKX19LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZhciBiPXIuZXZlbnQuZml4KGEpLGMsZCxlLGYsZyxoLGk9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLGo9KFcuZ2V0KHRoaXMsImV2ZW50cyIpfHx7fSlbYi50eXBlXXx8W10saz1yLmV2ZW50LnNwZWNpYWxbYi50eXBlXXx8e307Zm9yKGlbMF09YixjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKylpW2NdPWFyZ3VtZW50c1tjXTtpZihiLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGIpIT09ITEpe2g9ci5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYixqKSxjPTA7d2hpbGUoKGY9aFtjKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7Yi5jdXJyZW50VGFyZ2V0PWYuZWxlbSxkPTA7d2hpbGUoKGc9Zi5oYW5kbGVyc1tkKytdKSYmIWIuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSliLnJuYW1lc3BhY2UmJiFiLnJuYW1lc3BhY2UudGVzdChnLm5hbWVzcGFjZSl8fChiLmhhbmRsZU9iaj1nLGIuZGF0YT1nLmRhdGEsZT0oKHIuZXZlbnQuc3BlY2lhbFtnLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Zy5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09ZSYmKGIucmVzdWx0PWUpPT09ITEmJihiLnByZXZlbnREZWZhdWx0KCksYi5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGIpLGIucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnLGg9W10saT1iLmRlbGVnYXRlQ291bnQsaj1hLnRhcmdldDtpZihpJiZqLm5vZGVUeXBlJiYhKCJjbGljayI9PT1hLnR5cGUmJmEuYnV0dG9uPj0xKSlmb3IoO2ohPT10aGlzO2o9ai5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1qLm5vZGVUeXBlJiYoImNsaWNrIiE9PWEudHlwZXx8ai5kaXNhYmxlZCE9PSEwKSl7Zm9yKGY9W10sZz17fSxjPTA7YzxpO2MrKylkPWJbY10sZT1kLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1nW2VdJiYoZ1tlXT1kLm5lZWRzQ29udGV4dD9yKGUsdGhpcykuaW5kZXgoaik+LTE6ci5maW5kKGUsdGhpcyxudWxsLFtqXSkubGVuZ3RoKSxnW2VdJiZmLnB1c2goZCk7Zi5sZW5ndGgmJmgucHVzaCh7ZWxlbTpqLGhhbmRsZXJzOmZ9KX1yZXR1cm4gaj10aGlzLGk8Yi5sZW5ndGgmJmgucHVzaCh7ZWxlbTpqLGhhbmRsZXJzOmIuc2xpY2UoaSl9KSxofSxhZGRQcm9wOmZ1bmN0aW9uKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIuRXZlbnQucHJvdG90eXBlLGEse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDpyLmlzRnVuY3Rpb24oYik/ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIGIodGhpcy5vcmlnaW5hbEV2ZW50KX06ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFthXX0sc2V0OmZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGEse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmJ9KX19KX0sZml4OmZ1bmN0aW9uKGEpe3JldHVybiBhW3IuZXhwYW5kb10/YTpuZXcgci5FdmVudChhKX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcyE9PXhhKCkmJnRoaXMuZm9jdXMpcmV0dXJuIHRoaXMuZm9jdXMoKSwhMX0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXM9PT14YSgpJiZ0aGlzLmJsdXIpcmV0dXJuIHRoaXMuYmx1cigpLCExfSxkZWxlZ2F0ZVR5cGU6ImZvY3Vzb3V0In0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZigiY2hlY2tib3giPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZCKHRoaXMsImlucHV0IikpcmV0dXJuIHRoaXMuY2xpY2soKSwhMX0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEIoYS50YXJnZXQsImEiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEucmVzdWx0JiZhLm9yaWdpbmFsRXZlbnQmJihhLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9YS5yZXN1bHQpfX19fSxyLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMpfSxyLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiByLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEucmV0dXJuVmFsdWU9PT0hMT92YTp3YSx0aGlzLnRhcmdldD1hLnRhcmdldCYmMz09PWEudGFyZ2V0Lm5vZGVUeXBlP2EudGFyZ2V0LnBhcmVudE5vZGU6YS50YXJnZXQsdGhpcy5jdXJyZW50VGFyZ2V0PWEuY3VycmVudFRhcmdldCx0aGlzLnJlbGF0ZWRUYXJnZXQ9YS5yZWxhdGVkVGFyZ2V0KTp0aGlzLnR5cGU9YSxiJiZyLmV4dGVuZCh0aGlzLGIpLHRoaXMudGltZVN0YW1wPWEmJmEudGltZVN0YW1wfHxyLm5vdygpLHZvaWQodGhpc1tyLmV4cGFuZG9dPSEwKSk6bmV3IHIuRXZlbnQoYSxiKX0sci5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnIuRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOndhLGlzUHJvcGFnYXRpb25TdG9wcGVkOndhLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOndhLGlzU2ltdWxhdGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPXZhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPXZhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD12YSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sci5lYWNoKHthbHRLZXk6ITAsYnViYmxlczohMCxjYW5jZWxhYmxlOiEwLGNoYW5nZWRUb3VjaGVzOiEwLGN0cmxLZXk6ITAsZGV0YWlsOiEwLGV2ZW50UGhhc2U6ITAsbWV0YUtleTohMCxwYWdlWDohMCxwYWdlWTohMCxzaGlmdEtleTohMCx2aWV3OiEwLCJjaGFyIjohMCxjaGFyQ29kZTohMCxrZXk6ITAsa2V5Q29kZTohMCxidXR0b246ITAsYnV0dG9uczohMCxjbGllbnRYOiEwLGNsaWVudFk6ITAsb2Zmc2V0WDohMCxvZmZzZXRZOiEwLHBvaW50ZXJJZDohMCxwb2ludGVyVHlwZTohMCxzY3JlZW5YOiEwLHNjcmVlblk6ITAsdGFyZ2V0VG91Y2hlczohMCx0b0VsZW1lbnQ6ITAsdG91Y2hlczohMCx3aGljaDpmdW5jdGlvbihhKXt2YXIgYj1hLmJ1dHRvbjtyZXR1cm4gbnVsbD09YS53aGljaCYmc2EudGVzdChhLnR5cGUpP251bGwhPWEuY2hhckNvZGU/YS5jaGFyQ29kZTphLmtleUNvZGU6IWEud2hpY2gmJnZvaWQgMCE9PWImJnRhLnRlc3QoYS50eXBlKT8xJmI/MToyJmI/Mzo0JmI/MjowOmEud2hpY2h9fSxyLmV2ZW50LmFkZFByb3ApLHIuZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtyLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fHIuY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLHIuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4geWEodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB5YSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixyKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIhPT0hMSYmImZ1bmN0aW9uIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9d2EpLHRoaXMuZWFjaChmdW5jdGlvbigpe3IuZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9fSk7dmFyIHphPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFthLXpdW15cL1wwPlx4MjBcdFxyXG5cZl0qKVtePl0qKVwvPi9naSxBYT0vPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSxCYT0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxDYT0vXnRydWVcLyguKikvLERhPS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZztmdW5jdGlvbiBFYShhLGIpe3JldHVybiBCKGEsInRhYmxlIikmJkIoMTEhPT1iLm5vZGVUeXBlP2I6Yi5maXJzdENoaWxkLCJ0ciIpP3IoIj50Ym9keSIsYSlbMF18fGE6YX1mdW5jdGlvbiBGYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09YS5nZXRBdHRyaWJ1dGUoInR5cGUiKSkrIi8iK2EudHlwZSxhfWZ1bmN0aW9uIEdhKGEpe3ZhciBiPUNhLmV4ZWMoYS50eXBlKTtyZXR1cm4gYj9hLnR5cGU9YlsxXTphLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpLGF9ZnVuY3Rpb24gSGEoYSxiKXt2YXIgYyxkLGUsZixnLGgsaSxqO2lmKDE9PT1iLm5vZGVUeXBlKXtpZihXLmhhc0RhdGEoYSkmJihmPVcuYWNjZXNzKGEpLGc9Vy5zZXQoYixmKSxqPWYuZXZlbnRzKSl7ZGVsZXRlIGcuaGFuZGxlLGcuZXZlbnRzPXt9O2ZvcihlIGluIGopZm9yKGM9MCxkPWpbZV0ubGVuZ3RoO2M8ZDtjKyspci5ldmVudC5hZGQoYixlLGpbZV1bY10pfVguaGFzRGF0YShhKSYmKGg9WC5hY2Nlc3MoYSksaT1yLmV4dGVuZCh7fSxoKSxYLnNldChiLGkpKX19ZnVuY3Rpb24gSWEoYSxiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ImlucHV0Ij09PWMmJmphLnRlc3QoYS50eXBlKT9iLmNoZWNrZWQ9YS5jaGVja2VkOiJpbnB1dCIhPT1jJiYidGV4dGFyZWEiIT09Y3x8KGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX1mdW5jdGlvbiBKYShhLGIsYyxkKXtiPWcuYXBwbHkoW10sYik7dmFyIGUsZixoLGksaixrLGw9MCxtPWEubGVuZ3RoLG49bS0xLHE9YlswXSxzPXIuaXNGdW5jdGlvbihxKTtpZihzfHxtPjEmJiJzdHJpbmciPT10eXBlb2YgcSYmIW8uY2hlY2tDbG9uZSYmQmEudGVzdChxKSlyZXR1cm4gYS5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBmPWEuZXEoZSk7cyYmKGJbMF09cS5jYWxsKHRoaXMsZSxmLmh0bWwoKSkpLEphKGYsYixjLGQpfSk7aWYobSYmKGU9cWEoYixhWzBdLm93bmVyRG9jdW1lbnQsITEsYSxkKSxmPWUuZmlyc3RDaGlsZCwxPT09ZS5jaGlsZE5vZGVzLmxlbmd0aCYmKGU9ZiksZnx8ZCkpe2ZvcihoPXIubWFwKG5hKGUsInNjcmlwdCIpLEZhKSxpPWgubGVuZ3RoO2w8bTtsKyspaj1lLGwhPT1uJiYoaj1yLmNsb25lKGosITAsITApLGkmJnIubWVyZ2UoaCxuYShqLCJzY3JpcHQiKSkpLGMuY2FsbChhW2xdLGosbCk7aWYoaSlmb3Ioaz1oW2gubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsci5tYXAoaCxHYSksbD0wO2w8aTtsKyspaj1oW2xdLGxhLnRlc3Qoai50eXBlfHwiIikmJiFXLmFjY2VzcyhqLCJnbG9iYWxFdmFsIikmJnIuY29udGFpbnMoayxqKSYmKGouc3JjP3IuX2V2YWxVcmwmJnIuX2V2YWxVcmwoai5zcmMpOnAoai50ZXh0Q29udGVudC5yZXBsYWNlKERhLCIiKSxrKSl9cmV0dXJuIGF9ZnVuY3Rpb24gS2EoYSxiLGMpe2Zvcih2YXIgZCxlPWI/ci5maWx0ZXIoYixhKTphLGY9MDtudWxsIT0oZD1lW2ZdKTtmKyspY3x8MSE9PWQubm9kZVR5cGV8fHIuY2xlYW5EYXRhKG5hKGQpKSxkLnBhcmVudE5vZGUmJihjJiZyLmNvbnRhaW5zKGQub3duZXJEb2N1bWVudCxkKSYmb2EobmEoZCwic2NyaXB0IikpLGQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSk7cmV0dXJuIGF9ci5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSh6YSwiPCQxPjwvJDI+Iil9LGNsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPXIuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEoby5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8ci5pc1hNTERvYyhhKSkpZm9yKGc9bmEoaCksZj1uYShhKSxkPTAsZT1mLmxlbmd0aDtkPGU7ZCsrKUlhKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fG5hKGEpLGc9Z3x8bmEoaCksZD0wLGU9Zi5sZW5ndGg7ZDxlO2QrKylIYShmW2RdLGdbZF0pO2Vsc2UgSGEoYSxoKTtyZXR1cm4gZz1uYShoLCJzY3JpcHQiKSxnLmxlbmd0aD4wJiZvYShnLCFpJiZuYShhLCJzY3JpcHQiKSksaH0sY2xlYW5EYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQsZT1yLmV2ZW50LnNwZWNpYWwsZj0wO3ZvaWQgMCE9PShjPWFbZl0pO2YrKylpZihVKGMpKXtpZihiPWNbVy5leHBhbmRvXSl7aWYoYi5ldmVudHMpZm9yKGQgaW4gYi5ldmVudHMpZVtkXT9yLmV2ZW50LnJlbW92ZShjLGQpOnIucmVtb3ZlRXZlbnQoYyxkLGIuaGFuZGxlKTtjW1cuZXhwYW5kb109dm9pZCAwfWNbWC5leHBhbmRvXSYmKGNbWC5leHBhbmRvXT12b2lkIDApfX19KSxyLmZuLmV4dGVuZCh7ZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiBLYSh0aGlzLGEsITApfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIEthKHRoaXMsYSl9LHRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFQodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9yLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8KHRoaXMudGV4dENvbnRlbnQ9YSl9KX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSmEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPUVhKHRoaXMsYSk7Yi5hcHBlbmRDaGlsZChhKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9RWEodGhpcyxhKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX0pfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7bnVsbCE9KGE9dGhpc1tiXSk7YisrKTE9PT1hLm5vZGVUeXBlJiYoci5jbGVhbkRhdGEobmEoYSwhMSkpLGEudGV4dENvbnRlbnQ9IiIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPW51bGwhPWEmJmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiByLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmIUFhLnRlc3QoYSkmJiFtYVsoa2EuZXhlYyhhKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9ci5odG1sUHJlZmlsdGVyKGEpO3RyeXtmb3IoO2M8ZDtjKyspYj10aGlzW2NdfHx7fSwxPT09Yi5ub2RlVHlwZSYmKHIuY2xlYW5EYXRhKG5hKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIEphKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMucGFyZW50Tm9kZTtyLmluQXJyYXkodGhpcyxhKTwwJiYoci5jbGVhbkRhdGEobmEodGhpcykpLGMmJmMucmVwbGFjZUNoaWxkKGIsdGhpcykpfSxhKX19KSxyLmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihhLGIpe3IuZm5bYV09ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQ9W10sZT1yKGEpLGY9ZS5sZW5ndGgtMSxnPTA7Zzw9ZjtnKyspYz1nPT09Zj90aGlzOnRoaXMuY2xvbmUoITApLHIoZVtnXSlbYl0oYyksaC5hcHBseShkLGMuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhkKX19KTt2YXIgTGE9L15tYXJnaW4vLE1hPW5ldyBSZWdFeHAoIl4oIithYSsiKSg/IXB4KVthLXolXSskIiwiaSIpLE5hPWZ1bmN0aW9uKGIpe3ZhciBjPWIub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm4gYyYmYy5vcGVuZXJ8fChjPWEpLGMuZ2V0Q29tcHV0ZWRTdHlsZShiKX07IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYigpe2lmKGkpe2kuc3R5bGUuY3NzVGV4dD0iYm94LXNpemluZzpib3JkZXItYm94O3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7bWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt0b3A6MSU7d2lkdGg6NTAlIixpLmlubmVySFRNTD0iIixyYS5hcHBlbmRDaGlsZChoKTt2YXIgYj1hLmdldENvbXB1dGVkU3R5bGUoaSk7Yz0iMSUiIT09Yi50b3AsZz0iMnB4Ij09PWIubWFyZ2luTGVmdCxlPSI0cHgiPT09Yi53aWR0aCxpLnN0eWxlLm1hcmdpblJpZ2h0PSI1MCUiLGY9IjRweCI9PT1iLm1hcmdpblJpZ2h0LHJhLnJlbW92ZUNoaWxkKGgpLGk9bnVsbH19dmFyIGMsZSxmLGcsaD1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpLnN0eWxlJiYoaS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGkuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIixvLmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09aS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxoLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7cGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixoLmFwcGVuZENoaWxkKGkpLHIuZXh0ZW5kKG8se3BpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGN9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGIoKSxlfSxwaXhlbE1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIGIoKSxmfSxyZWxpYWJsZU1hcmdpbkxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGd9fSkpfSgpO2Z1bmN0aW9uIE9hKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8TmEoYSksYyYmKGc9Yy5nZXRQcm9wZXJ0eVZhbHVlKGIpfHxjW2JdLCIiIT09Z3x8ci5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPXIuc3R5bGUoYSxiKSksIW8ucGl4ZWxNYXJnaW5SaWdodCgpJiZNYS50ZXN0KGcpJiZMYS50ZXN0KGIpJiYoZD1oLndpZHRoLGU9aC5taW5XaWR0aCxmPWgubWF4V2lkdGgsaC5taW5XaWR0aD1oLm1heFdpZHRoPWgud2lkdGg9ZyxnPWMud2lkdGgsaC53aWR0aD1kLGgubWluV2lkdGg9ZSxoLm1heFdpZHRoPWYpKSx2b2lkIDAhPT1nP2crIiI6Z31mdW5jdGlvbiBQYShhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX12YXIgUWE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFJhPS9eLS0vLFNhPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxUYT17bGV0dGVyU3BhY2luZzoiMCIsZm9udFdlaWdodDoiNDAwIn0sVWE9WyJXZWJraXQiLCJNb3oiLCJtcyJdLFZhPWQuY3JlYXRlRWxlbWVudCgiZGl2Iikuc3R5bGU7ZnVuY3Rpb24gV2EoYSl7aWYoYSBpbiBWYSlyZXR1cm4gYTt2YXIgYj1hWzBdLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPVVhLmxlbmd0aDt3aGlsZShjLS0paWYoYT1VYVtjXStiLGEgaW4gVmEpcmV0dXJuIGF9ZnVuY3Rpb24gWGEoYSl7dmFyIGI9ci5jc3NQcm9wc1thXTtyZXR1cm4gYnx8KGI9ci5jc3NQcm9wc1thXT1XYShhKXx8YSksYn1mdW5jdGlvbiBZYShhLGIsYyl7dmFyIGQ9YmEuZXhlYyhiKTtyZXR1cm4gZD9NYXRoLm1heCgwLGRbMl0tKGN8fDApKSsoZFszXXx8InB4Iik6Yn1mdW5jdGlvbiBaYShhLGIsYyxkLGUpe3ZhciBmLGc9MDtmb3IoZj1jPT09KGQ/ImJvcmRlciI6ImNvbnRlbnQiKT80OiJ3aWR0aCI9PT1iPzE6MDtmPDQ7Zis9MikibWFyZ2luIj09PWMmJihnKz1yLmNzcyhhLGMrY2FbZl0sITAsZSkpLGQ/KCJjb250ZW50Ij09PWMmJihnLT1yLmNzcyhhLCJwYWRkaW5nIitjYVtmXSwhMCxlKSksIm1hcmdpbiIhPT1jJiYoZy09ci5jc3MoYSwiYm9yZGVyIitjYVtmXSsiV2lkdGgiLCEwLGUpKSk6KGcrPXIuY3NzKGEsInBhZGRpbmciK2NhW2ZdLCEwLGUpLCJwYWRkaW5nIiE9PWMmJihnKz1yLmNzcyhhLCJib3JkZXIiK2NhW2ZdKyJXaWR0aCIsITAsZSkpKTtyZXR1cm4gZ31mdW5jdGlvbiAkYShhLGIsYyl7dmFyIGQsZT1OYShhKSxmPU9hKGEsYixlKSxnPSJib3JkZXItYm94Ij09PXIuY3NzKGEsImJveFNpemluZyIsITEsZSk7cmV0dXJuIE1hLnRlc3QoZik/ZjooZD1nJiYoby5ib3hTaXppbmdSZWxpYWJsZSgpfHxmPT09YS5zdHlsZVtiXSksImF1dG8iPT09ZiYmKGY9YVsib2Zmc2V0IitiWzBdLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKV0pLGY9cGFyc2VGbG9hdChmKXx8MCxmK1phKGEsYixjfHwoZz8iYm9yZGVyIjoiY29udGVudCIpLGQsZSkrInB4Iil9ci5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz1PYShhLCJvcGFjaXR5Iik7cmV0dXJuIiI9PT1jPyIxIjpjfX19fSxjc3NOdW1iZXI6e2FuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiEwLGNvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnsiZmxvYXQiOiJjc3NGbG9hdCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEmJjMhPT1hLm5vZGVUeXBlJiY4IT09YS5ub2RlVHlwZSYmYS5zdHlsZSl7dmFyIGUsZixnLGg9ci5jYW1lbENhc2UoYiksaT1SYS50ZXN0KGIpLGo9YS5zdHlsZTtyZXR1cm4gaXx8KGI9WGEoaCkpLGc9ci5jc3NIb29rc1tiXXx8ci5jc3NIb29rc1toXSx2b2lkIDA9PT1jP2cmJiJnZXQiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTpqW2JdOihmPXR5cGVvZiBjLCJzdHJpbmciPT09ZiYmKGU9YmEuZXhlYyhjKSkmJmVbMV0mJihjPWZhKGEsYixlKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiPT09ZiYmKGMrPWUmJmVbM118fChyLmNzc051bWJlcltoXT8iIjoicHgiKSksby5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaltiXT0iaW5oZXJpdCIpLGcmJiJzZXQiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGk/ai5zZXRQcm9wZXJ0eShiLGMpOmpbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9ci5jYW1lbENhc2UoYiksaT1SYS50ZXN0KGIpO3JldHVybiBpfHwoYj1YYShoKSksZz1yLmNzc0hvb2tzW2JdfHxyLmNzc0hvb2tzW2hdLGcmJiJnZXQiaW4gZyYmKGU9Zy5nZXQoYSwhMCxjKSksdm9pZCAwPT09ZSYmKGU9T2EoYSxiLGQpKSwibm9ybWFsIj09PWUmJmIgaW4gVGEmJihlPVRhW2JdKSwiIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fGlzRmluaXRlKGYpP2Z8fDA6ZSk6ZX19KSxyLmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGEsYil7ci5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtpZihjKXJldHVybiFRYS50ZXN0KHIuY3NzKGEsImRpc3BsYXkiKSl8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgmJmEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg/JGEoYSxiLGQpOmVhKGEsU2EsZnVuY3Rpb24oKXtyZXR1cm4gJGEoYSxiLGQpfSl9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGUsZj1kJiZOYShhKSxnPWQmJlphKGEsYixkLCJib3JkZXItYm94Ij09PXIuY3NzKGEsImJveFNpemluZyIsITEsZiksZik7cmV0dXJuIGcmJihlPWJhLmV4ZWMoYykpJiYicHgiIT09KGVbM118fCJweCIpJiYoYS5zdHlsZVtiXT1jLGM9ci5jc3MoYSxiKSksWWEoYSxjLGcpfX19KSxyLmNzc0hvb2tzLm1hcmdpbkxlZnQ9UGEoby5yZWxpYWJsZU1hcmdpbkxlZnQsZnVuY3Rpb24oYSxiKXtpZihiKXJldHVybihwYXJzZUZsb2F0KE9hKGEsIm1hcmdpbkxlZnQiKSl8fGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdC1lYShhLHttYXJnaW5MZWZ0OjB9LGZ1bmN0aW9uKCl7cmV0dXJuIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdH0pKSsicHgifSksci5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oYSxiKXtyLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9InN0cmluZyI9PXR5cGVvZiBjP2Muc3BsaXQoIiAiKTpbY107ZDw0O2QrKyllW2ErY2FbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sTGEudGVzdChhKXx8KHIuY3NzSG9va3NbYStiXS5zZXQ9WWEpfSksci5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKGQ9TmEoYSksZT1iLmxlbmd0aDtnPGU7ZysrKWZbYltnXV09ci5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP3Iuc3R5bGUoYSxiLGMpOnIuY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfX0pO2Z1bmN0aW9uIF9hKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBfYS5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfXIuVHdlZW49X2EsX2EucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpfYSxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxyLmVhc2luZy5fZGVmYXVsdCx0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KHIuY3NzTnVtYmVyW2NdPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1fYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6X2EucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiLGM9X2EucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz1iPXIuZWFzaW5nW3RoaXMuZWFzaW5nXShhLHRoaXMub3B0aW9ucy5kdXJhdGlvbiphLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPWI9YSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqYit0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxjJiZjLnNldD9jLnNldCh0aGlzKTpfYS5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxfYS5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9X2EucHJvdG90eXBlLF9hLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gMSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbCE9YS5lbGVtW2EucHJvcF0mJm51bGw9PWEuZWxlbS5zdHlsZVthLnByb3BdP2EuZWxlbVthLnByb3BdOihiPXIuY3NzKGEuZWxlbSxhLnByb3AsIiIpLGImJiJhdXRvIiE9PWI/YjowKX0sc2V0OmZ1bmN0aW9uKGEpe3IuZnguc3RlcFthLnByb3BdP3IuZnguc3RlcFthLnByb3BdKGEpOjEhPT1hLmVsZW0ubm9kZVR5cGV8fG51bGw9PWEuZWxlbS5zdHlsZVtyLmNzc1Byb3BzW2EucHJvcF1dJiYhci5jc3NIb29rc1thLnByb3BdP2EuZWxlbVthLnByb3BdPWEubm93OnIuc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpfX19LF9hLnByb3BIb29rcy5zY3JvbGxUb3A9X2EucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sci5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfSxfZGVmYXVsdDoic3dpbmcifSxyLmZ4PV9hLnByb3RvdHlwZS5pbml0LHIuZnguc3RlcD17fTt2YXIgYWIsYmIsY2I9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLGRiPS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gZWIoKXtiYiYmKGQuaGlkZGVuPT09ITEmJmEucmVxdWVzdEFuaW1hdGlvbkZyYW1lP2EucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGViKTphLnNldFRpbWVvdXQoZWIsci5meC5pbnRlcnZhbCksci5meC50aWNrKCkpfWZ1bmN0aW9uIGZiKCl7cmV0dXJuIGEuc2V0VGltZW91dChmdW5jdGlvbigpe2FiPXZvaWQgMH0pLGFiPXIubm93KCl9ZnVuY3Rpb24gZ2IoYSxiKXt2YXIgYyxkPTAsZT17aGVpZ2h0OmF9O2ZvcihiPWI/MTowO2Q8NDtkKz0yLWIpYz1jYVtkXSxlWyJtYXJnaW4iK2NdPWVbInBhZGRpbmciK2NdPWE7cmV0dXJuIGImJihlLm9wYWNpdHk9ZS53aWR0aD1hKSxlfWZ1bmN0aW9uIGhiKGEsYixjKXtmb3IodmFyIGQsZT0oa2IudHdlZW5lcnNbYl18fFtdKS5jb25jYXQoa2IudHdlZW5lcnNbIioiXSksZj0wLGc9ZS5sZW5ndGg7ZjxnO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gaWIoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbD0id2lkdGgiaW4gYnx8ImhlaWdodCJpbiBiLG09dGhpcyxuPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJmRhKGEpLHE9Vy5nZXQoYSwiZnhzaG93Iik7Yy5xdWV1ZXx8KGc9ci5fcXVldWVIb29rcyhhLCJmeCIpLG51bGw9PWcudW5xdWV1ZWQmJihnLnVucXVldWVkPTAsaD1nLmVtcHR5LmZpcmUsZy5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7Zy51bnF1ZXVlZHx8aCgpfSksZy51bnF1ZXVlZCsrLG0uYWx3YXlzKGZ1bmN0aW9uKCl7bS5hbHdheXMoZnVuY3Rpb24oKXtnLnVucXVldWVkLS0sci5xdWV1ZShhLCJmeCIpLmxlbmd0aHx8Zy5lbXB0eS5maXJlKCl9KX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxjYi50ZXN0KGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fCJ0b2dnbGUiPT09ZSxlPT09KHA/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWV8fCFxfHx2b2lkIDA9PT1xW2RdKWNvbnRpbnVlO3A9ITB9bltkXT1xJiZxW2RdfHxyLnN0eWxlKGEsZCl9aWYoaT0hci5pc0VtcHR5T2JqZWN0KGIpLGl8fCFyLmlzRW1wdHlPYmplY3Qobikpe2wmJjE9PT1hLm5vZGVUeXBlJiYoYy5vdmVyZmxvdz1bby5vdmVyZmxvdyxvLm92ZXJmbG93WCxvLm92ZXJmbG93WV0saj1xJiZxLmRpc3BsYXksbnVsbD09aiYmKGo9Vy5nZXQoYSwiZGlzcGxheSIpKSxrPXIuY3NzKGEsImRpc3BsYXkiKSwibm9uZSI9PT1rJiYoaj9rPWo6KGlhKFthXSwhMCksaj1hLnN0eWxlLmRpc3BsYXl8fGosaz1yLmNzcyhhLCJkaXNwbGF5IiksaWEoW2FdKSkpLCgiaW5saW5lIj09PWt8fCJpbmxpbmUtYmxvY2siPT09ayYmbnVsbCE9aikmJiJub25lIj09PXIuY3NzKGEsImZsb2F0IikmJihpfHwobS5kb25lKGZ1bmN0aW9uKCl7by5kaXNwbGF5PWp9KSxudWxsPT1qJiYoaz1vLmRpc3BsYXksaj0ibm9uZSI9PT1rPyIiOmspKSxvLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxjLm92ZXJmbG93JiYoby5vdmVyZmxvdz0iaGlkZGVuIixtLmFsd2F5cyhmdW5jdGlvbigpe28ub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxvLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLG8ub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSksaT0hMTtmb3IoZCBpbiBuKWl8fChxPyJoaWRkZW4iaW4gcSYmKHA9cS5oaWRkZW4pOnE9Vy5hY2Nlc3MoYSwiZnhzaG93Iix7ZGlzcGxheTpqfSksZiYmKHEuaGlkZGVuPSFwKSxwJiZpYShbYV0sITApLG0uZG9uZShmdW5jdGlvbigpe3B8fGlhKFthXSksVy5yZW1vdmUoYSwiZnhzaG93Iik7Zm9yKGQgaW4gbilyLnN0eWxlKGEsZCxuW2RdKX0pKSxpPWhiKHA/cVtkXTowLGQsbSksZCBpbiBxfHwocVtkXT1pLnN0YXJ0LHAmJihpLmVuZD1pLnN0YXJ0LGkuc3RhcnQ9MCkpfX1mdW5jdGlvbiBqYihhLGIpe3ZhciBjLGQsZSxmLGc7Zm9yKGMgaW4gYSlpZihkPXIuY2FtZWxDYXNlKGMpLGU9YltkXSxmPWFbY10sQXJyYXkuaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9ci5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBrYihhLGIsYyl7dmFyIGQsZSxmPTAsZz1rYi5wcmVmaWx0ZXJzLmxlbmd0aCxoPXIuRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPWFifHxmYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtnPGk7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksZjwxJiZpP2M6KGl8fGgubm90aWZ5V2l0aChhLFtqLDEsMF0pLGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpyLmV4dGVuZCh7fSxiKSxvcHRzOnIuZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpyLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOmFifHxmYigpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9ci5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtjPGQ7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihqYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtmPGc7ZisrKWlmKGQ9a2IucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIHIuaXNGdW5jdGlvbihkLnN0b3ApJiYoci5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPXIucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiByLm1hcChrLGhiLGopLHIuaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLGoucHJvZ3Jlc3Moai5vcHRzLnByb2dyZXNzKS5kb25lKGoub3B0cy5kb25lLGoub3B0cy5jb21wbGV0ZSkuZmFpbChqLm9wdHMuZmFpbCkuYWx3YXlzKGoub3B0cy5hbHdheXMpLHIuZngudGltZXIoci5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksan1yLkFuaW1hdGlvbj1yLmV4dGVuZChrYix7dHdlZW5lcnM6eyIqIjpbZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZVR3ZWVuKGEsYik7cmV0dXJuIGZhKGMuZWxlbSxhLGJhLmV4ZWMoYiksYyksY31dfSx0d2VlbmVyOmZ1bmN0aW9uKGEsYil7ci5pc0Z1bmN0aW9uKGEpPyhiPWEsYT1bIioiXSk6YT1hLm1hdGNoKEwpO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWM9YVtkXSxrYi50d2VlbmVyc1tjXT1rYi50d2VlbmVyc1tjXXx8W10sa2IudHdlZW5lcnNbY10udW5zaGlmdChiKX0scHJlZmlsdGVyczpbaWJdLHByZWZpbHRlcjpmdW5jdGlvbihhLGIpe2I/a2IucHJlZmlsdGVycy51bnNoaWZ0KGEpOmtiLnByZWZpbHRlcnMucHVzaChhKX19KSxyLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiYib2JqZWN0Ij09dHlwZW9mIGE/ci5leHRlbmQoe30sYSk6e2NvbXBsZXRlOmN8fCFjJiZifHxyLmlzRnVuY3Rpb24oYSkmJmEsZHVyYXRpb246YSxlYXNpbmc6YyYmYnx8YiYmIXIuaXNGdW5jdGlvbihiKSYmYn07cmV0dXJuIHIuZngub2ZmP2QuZHVyYXRpb249MDoibnVtYmVyIiE9dHlwZW9mIGQuZHVyYXRpb24mJihkLmR1cmF0aW9uIGluIHIuZnguc3BlZWRzP2QuZHVyYXRpb249ci5meC5zcGVlZHNbZC5kdXJhdGlvbl06ZC5kdXJhdGlvbj1yLmZ4LnNwZWVkcy5fZGVmYXVsdCksbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtyLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJnIuZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxyLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihkYSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ci5pc0VtcHR5T2JqZWN0KGEpLGY9ci5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPWtiKHRoaXMsci5leHRlbmQoe30sYSksZik7KGV8fFcuZ2V0KHRoaXMsImZpbmlzaCIpKSYmYi5zdG9wKCEwKX07cmV0dXJuIGcuZmluaXNoPWcsZXx8Zi5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGYucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RvcDtkZWxldGUgYS5zdG9wLGIoYyl9O3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGM9YixiPWEsYT12b2lkIDApLGImJmEhPT0hMSYmdGhpcy5xdWV1ZShhfHwiZngiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj0hMCxlPW51bGwhPWEmJmErInF1ZXVlSG9va3MiLGY9ci50aW1lcnMsZz1XLmdldCh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZkYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyFiJiZjfHxyLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1XLmdldCh0aGlzKSxkPWNbYSsicXVldWUiXSxlPWNbYSsicXVldWVIb29rcyJdLGY9ci50aW1lcnMsZz1kP2QubGVuZ3RoOjA7Zm9yKGMuZmluaXNoPSEwLHIucXVldWUodGhpcyxhLFtdKSxlJiZlLnN0b3AmJmUuc3RvcC5jYWxsKHRoaXMsITApLGI9Zi5sZW5ndGg7Yi0tOylmW2JdLmVsZW09PT10aGlzJiZmW2JdLnF1ZXVlPT09YSYmKGZbYl0uYW5pbS5zdG9wKCEwKSxmLnNwbGljZShiLDEpKTtmb3IoYj0wO2I8ZztiKyspZFtiXSYmZFtiXS5maW5pc2gmJmRbYl0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIGMuZmluaXNofSl9fSksci5lYWNoKFsidG9nZ2xlIiwic2hvdyIsImhpZGUiXSxmdW5jdGlvbihhLGIpe3ZhciBjPXIuZm5bYl07ci5mbltiXT1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIG51bGw9PWF8fCJib29sZWFuIj09dHlwZW9mIGE/Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKGdiKGIsITApLGEsZCxlKX19KSxyLmVhY2goe3NsaWRlRG93bjpnYigic2hvdyIpLHNsaWRlVXA6Z2IoImhpZGUiKSxzbGlkZVRvZ2dsZTpnYigidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihhLGIpe3IuZm5bYV09ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLmFuaW1hdGUoYixhLGMsZCl9fSksci50aW1lcnM9W10sci5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGEsYj0wLGM9ci50aW1lcnM7Zm9yKGFiPXIubm93KCk7YjxjLmxlbmd0aDtiKyspYT1jW2JdLGEoKXx8Y1tiXSE9PWF8fGMuc3BsaWNlKGItLSwxKTtjLmxlbmd0aHx8ci5meC5zdG9wKCksYWI9dm9pZCAwfSxyLmZ4LnRpbWVyPWZ1bmN0aW9uKGEpe3IudGltZXJzLnB1c2goYSksci5meC5zdGFydCgpfSxyLmZ4LmludGVydmFsPTEzLHIuZnguc3RhcnQ9ZnVuY3Rpb24oKXtiYnx8KGJiPSEwLGViKCkpfSxyLmZ4LnN0b3A9ZnVuY3Rpb24oKXtiYj1udWxsfSxyLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxyLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9ci5meD9yLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8ImZ4Iix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYT1kLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYj1kLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGM9Yi5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTthLnR5cGU9ImNoZWNrYm94IixvLmNoZWNrT249IiIhPT1hLnZhbHVlLG8ub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxhPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxhLnZhbHVlPSJ0IixhLnR5cGU9InJhZGlvIixvLnJhZGlvVmFsdWU9InQiPT09YS52YWx1ZX0oKTt2YXIgbGIsbWI9ci5leHByLmF0dHJIYW5kbGU7ci5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVCh0aGlzLHIuYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ci5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxyLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIGEuZ2V0QXR0cmlidXRlP3IucHJvcChhLGIsYyk6KDE9PT1mJiZyLmlzWE1MRG9jKGEpfHwoZT1yLmF0dHJIb29rc1tiLnRvTG93ZXJDYXNlKCldfHwoci5leHByLm1hdGNoLmJvb2wudGVzdChiKT9sYjp2b2lkIDApKSx2b2lkIDAhPT1jP251bGw9PT1jP3ZvaWQgci5yZW1vdmVBdHRyKGEsYik6ZSYmInNldCJpbiBlJiZ2b2lkIDAhPT0oZD1lLnNldChhLGMsYikpP2Q6KGEuc2V0QXR0cmlidXRlKGIsYysiIiksYyk6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDooZD1yLmZpbmQuYXR0cihhLGIpLApudWxsPT1kP3ZvaWQgMDpkKSl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoIW8ucmFkaW9WYWx1ZSYmInJhZGlvIj09PWImJkIoYSwiaW5wdXQiKSl7dmFyIGM9YS52YWx1ZTtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoInR5cGUiLGIpLGMmJihhLnZhbHVlPWMpLGJ9fX19LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTAsZT1iJiZiLm1hdGNoKEwpO2lmKGUmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZVtkKytdKWEucmVtb3ZlQXR0cmlidXRlKGMpfX0pLGxiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/ci5yZW1vdmVBdHRyKGEsYyk6YS5zZXRBdHRyaWJ1dGUoYyxjKSxjfX0sci5lYWNoKHIuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGEsYil7dmFyIGM9bWJbYl18fHIuZmluZC5hdHRyO21iW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmLGc9Yi50b0xvd2VyQ2FzZSgpO3JldHVybiBkfHwoZj1tYltnXSxtYltnXT1lLGU9bnVsbCE9YyhhLGIsZCk/ZzpudWxsLG1iW2ddPWYpLGV9fSk7dmFyIG5iPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksb2I9L14oPzphfGFyZWEpJC9pO3IuZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFQodGhpcyxyLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW3IucHJvcEZpeFthXXx8YV19KX19KSxyLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gMT09PWYmJnIuaXNYTUxEb2MoYSl8fChiPXIucHJvcEZpeFtiXXx8YixlPXIucHJvcEhvb2tzW2JdKSx2b2lkIDAhPT1jP2UmJiJzZXQiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOmFbYl09YzplJiYiZ2V0ImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOmFbYl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXt2YXIgYj1yLmZpbmQuYXR0cihhLCJ0YWJpbmRleCIpO3JldHVybiBiP3BhcnNlSW50KGIsMTApOm5iLnRlc3QoYS5ub2RlTmFtZSl8fG9iLnRlc3QoYS5ub2RlTmFtZSkmJmEuaHJlZj8wOi0xfX19LHByb3BGaXg6eyJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUifX0pLG8ub3B0U2VsZWN0ZWR8fChyLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfSxzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO2ImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCl9fSksci5lYWNoKFsidGFiSW5kZXgiLCJyZWFkT25seSIsIm1heExlbmd0aCIsImNlbGxTcGFjaW5nIiwiY2VsbFBhZGRpbmciLCJyb3dTcGFuIiwiY29sU3BhbiIsInVzZU1hcCIsImZyYW1lQm9yZGVyIiwiY29udGVudEVkaXRhYmxlIl0sZnVuY3Rpb24oKXtyLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSk7ZnVuY3Rpb24gcGIoYSl7dmFyIGI9YS5tYXRjaChMKXx8W107cmV0dXJuIGIuam9pbigiICIpfWZ1bmN0aW9uIHFiKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIifXIuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYoci5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7cih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLHFiKHRoaXMpKSl9KTtpZigic3RyaW5nIj09dHlwZW9mIGEmJmEpe2I9YS5tYXRjaChMKXx8W107d2hpbGUoYz10aGlzW2krK10paWYoZT1xYihjKSxkPTE9PT1jLm5vZGVUeXBlJiYiICIrcGIoZSkrIiAiKXtnPTA7d2hpbGUoZj1iW2crK10pZC5pbmRleE9mKCIgIitmKyIgIik8MCYmKGQrPWYrIiAiKTtoPXBiKGQpLGUhPT1oJiZjLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGgpfX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaT0wO2lmKHIuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3IodGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYixxYih0aGlzKSkpfSk7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuYXR0cigiY2xhc3MiLCIiKTtpZigic3RyaW5nIj09dHlwZW9mIGEmJmEpe2I9YS5tYXRjaChMKXx8W107d2hpbGUoYz10aGlzW2krK10paWYoZT1xYihjKSxkPTE9PT1jLm5vZGVUeXBlJiYiICIrcGIoZSkrIiAiKXtnPTA7d2hpbGUoZj1iW2crK10pd2hpbGUoZC5pbmRleE9mKCIgIitmKyIgIik+LTEpZD1kLnJlcGxhY2UoIiAiK2YrIiAiLCIgIik7aD1wYihkKSxlIT09aCYmYy5zZXRBdHRyaWJ1dGUoImNsYXNzIixoKX19cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dHlwZW9mIGE7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgYiYmInN0cmluZyI9PT1jP2I/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpOnIuaXNGdW5jdGlvbihhKT90aGlzLmVhY2goZnVuY3Rpb24oYyl7cih0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLHFiKHRoaXMpLGIpLGIpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsZCxlLGY7aWYoInN0cmluZyI9PT1jKXtkPTAsZT1yKHRoaXMpLGY9YS5tYXRjaChMKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZSB2b2lkIDAhPT1hJiYiYm9vbGVhbiIhPT1jfHwoYj1xYih0aGlzKSxiJiZXLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIixiKSx0aGlzLnNldEF0dHJpYnV0ZSYmdGhpcy5zZXRBdHRyaWJ1dGUoImNsYXNzIixifHxhPT09ITE/IiI6Vy5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD0wO2I9IiAiK2ErIiAiO3doaWxlKGM9dGhpc1tkKytdKWlmKDE9PT1jLm5vZGVUeXBlJiYoIiAiK3BiKHFiKGMpKSsiICIpLmluZGV4T2YoYik+LTEpcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIHJiPS9cci9nO3IuZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1yLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMscih0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9IiI6Im51bWJlciI9PXR5cGVvZiBlP2UrPSIiOkFycmF5LmlzQXJyYXkoZSkmJihlPXIubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/IiI6YSsiIn0pKSxiPXIudmFsSG9va3NbdGhpcy50eXBlXXx8ci52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJzZXQiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT1lKSl9KTtpZihlKXJldHVybiBiPXIudmFsSG9va3NbZS50eXBlXXx8ci52YWxIb29rc1tlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJnZXQiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSwidmFsdWUiKSk/YzooYz1lLnZhbHVlLCJzdHJpbmciPT10eXBlb2YgYz9jLnJlcGxhY2UocmIsIiIpOm51bGw9PWM/IiI6Yyl9fX0pLHIuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9ci5maW5kLmF0dHIoYSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9Yj9iOnBiKHIudGV4dChhKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT1hLm9wdGlvbnMsZj1hLnNlbGVjdGVkSW5kZXgsZz0ic2VsZWN0LW9uZSI9PT1hLnR5cGUsaD1nP251bGw6W10saT1nP2YrMTplLmxlbmd0aDtmb3IoZD1mPDA/aTpnP2Y6MDtkPGk7ZCsrKWlmKGM9ZVtkXSwoYy5zZWxlY3RlZHx8ZD09PWYpJiYhYy5kaXNhYmxlZCYmKCFjLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFCKGMucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKGI9cihjKS52YWwoKSxnKXJldHVybiBiO2gucHVzaChiKX1yZXR1cm4gaH0sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPWEub3B0aW9ucyxmPXIubWFrZUFycmF5KGIpLGc9ZS5sZW5ndGg7d2hpbGUoZy0tKWQ9ZVtnXSwoZC5zZWxlY3RlZD1yLmluQXJyYXkoci52YWxIb29rcy5vcHRpb24uZ2V0KGQpLGYpPi0xKSYmKGM9ITApO3JldHVybiBjfHwoYS5zZWxlY3RlZEluZGV4PS0xKSxmfX19fSksci5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7ci52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7aWYoQXJyYXkuaXNBcnJheShiKSlyZXR1cm4gYS5jaGVja2VkPXIuaW5BcnJheShyKGEpLnZhbCgpLGIpPi0xfX0sby5jaGVja09ufHwoci52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmEudmFsdWV9KX0pO3ZhciBzYj0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC87ci5leHRlbmQoci5ldmVudCx7dHJpZ2dlcjpmdW5jdGlvbihiLGMsZSxmKXt2YXIgZyxoLGksaixrLG0sbixvPVtlfHxkXSxwPWwuY2FsbChiLCJ0eXBlIik/Yi50eXBlOmIscT1sLmNhbGwoYiwibmFtZXNwYWNlIik/Yi5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtpZihoPWk9ZT1lfHxkLDMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmIXNiLnRlc3QocCtyLmV2ZW50LnRyaWdnZXJlZCkmJihwLmluZGV4T2YoIi4iKT4tMSYmKHE9cC5zcGxpdCgiLiIpLHA9cS5zaGlmdCgpLHEuc29ydCgpKSxrPXAuaW5kZXhPZigiOiIpPDAmJiJvbiIrcCxiPWJbci5leHBhbmRvXT9iOm5ldyByLkV2ZW50KHAsIm9iamVjdCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1mPzI6MyxiLm5hbWVzcGFjZT1xLmpvaW4oIi4iKSxiLnJuYW1lc3BhY2U9Yi5uYW1lc3BhY2U/bmV3IFJlZ0V4cCgiKF58XFwuKSIrcS5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLGIucmVzdWx0PXZvaWQgMCxiLnRhcmdldHx8KGIudGFyZ2V0PWUpLGM9bnVsbD09Yz9bYl06ci5tYWtlQXJyYXkoYyxbYl0pLG49ci5ldmVudC5zcGVjaWFsW3BdfHx7fSxmfHwhbi50cmlnZ2VyfHxuLnRyaWdnZXIuYXBwbHkoZSxjKSE9PSExKSl7aWYoIWYmJiFuLm5vQnViYmxlJiYhci5pc1dpbmRvdyhlKSl7Zm9yKGo9bi5kZWxlZ2F0ZVR5cGV8fHAsc2IudGVzdChqK3ApfHwoaD1oLnBhcmVudE5vZGUpO2g7aD1oLnBhcmVudE5vZGUpby5wdXNoKGgpLGk9aDtpPT09KGUub3duZXJEb2N1bWVudHx8ZCkmJm8ucHVzaChpLmRlZmF1bHRWaWV3fHxpLnBhcmVudFdpbmRvd3x8YSl9Zz0wO3doaWxlKChoPW9bZysrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYi50eXBlPWc+MT9qOm4uYmluZFR5cGV8fHAsbT0oVy5nZXQoaCwiZXZlbnRzIil8fHt9KVtiLnR5cGVdJiZXLmdldChoLCJoYW5kbGUiKSxtJiZtLmFwcGx5KGgsYyksbT1rJiZoW2tdLG0mJm0uYXBwbHkmJlUoaCkmJihiLnJlc3VsdD1tLmFwcGx5KGgsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXAsZnx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8bi5fZGVmYXVsdCYmbi5fZGVmYXVsdC5hcHBseShvLnBvcCgpLGMpIT09ITF8fCFVKGUpfHxrJiZyLmlzRnVuY3Rpb24oZVtwXSkmJiFyLmlzV2luZG93KGUpJiYoaT1lW2tdLGkmJihlW2tdPW51bGwpLHIuZXZlbnQudHJpZ2dlcmVkPXAsZVtwXSgpLHIuZXZlbnQudHJpZ2dlcmVkPXZvaWQgMCxpJiYoZVtrXT1pKSksYi5yZXN1bHR9fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ci5leHRlbmQobmV3IHIuRXZlbnQsYyx7dHlwZTphLGlzU2ltdWxhdGVkOiEwfSk7ci5ldmVudC50cmlnZ2VyKGQsbnVsbCxiKX19KSxyLmZuLmV4dGVuZCh7dHJpZ2dlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtyLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpc1swXTtpZihjKXJldHVybiByLmV2ZW50LnRyaWdnZXIoYSxiLGMsITApfX0pLHIuZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IHJlc2l6ZSBzY3JvbGwgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe3IuZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLHIuZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX19KSxvLmZvY3VzaW49Im9uZm9jdXNpbiJpbiBhLG8uZm9jdXNpbnx8ci5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe3IuZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxyLmV2ZW50LmZpeChhKSl9O3IuZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1XLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLFcuYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9Vy5hY2Nlc3MoZCxiKS0xO2U/Vy5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxXLnJlbW92ZShkLGIpKX19fSk7dmFyIHRiPWEubG9jYXRpb24sdWI9ci5ub3coKSx2Yj0vXD8vO3IucGFyc2VYTUw9ZnVuY3Rpb24oYil7dmFyIGM7aWYoIWJ8fCJzdHJpbmciIT10eXBlb2YgYilyZXR1cm4gbnVsbDt0cnl7Yz0obmV3IGEuRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYiwidGV4dC94bWwiKX1jYXRjaChkKXtjPXZvaWQgMH1yZXR1cm4gYyYmIWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RofHxyLmVycm9yKCJJbnZhbGlkIFhNTDogIitiKSxjfTt2YXIgd2I9L1xbXF0kLyx4Yj0vXHI/XG4vZyx5Yj0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksemI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIEFiKGEsYixjLGQpe3ZhciBlO2lmKEFycmF5LmlzQXJyYXkoYikpci5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHx3Yi50ZXN0KGEpP2QoYSxlKTpBYihhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09ci50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpQWIoYSsiWyIrZSsiXSIsYltlXSxjLGQpfXIucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1yLmlzRnVuY3Rpb24oYik/YigpOmI7ZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpKyI9IitlbmNvZGVVUklDb21wb25lbnQobnVsbD09Yz8iIjpjKX07aWYoQXJyYXkuaXNBcnJheShhKXx8YS5qcXVlcnkmJiFyLmlzUGxhaW5PYmplY3QoYSkpci5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlBYihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIil9LHIuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gci5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXIucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBhP3IubWFrZUFycmF5KGEpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgYT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIXIodGhpcykuaXMoIjpkaXNhYmxlZCIpJiZ6Yi50ZXN0KHRoaXMubm9kZU5hbWUpJiYheWIudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IWphLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9cih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOkFycmF5LmlzQXJyYXkoYyk/ci5tYXAoYyxmdW5jdGlvbihhKXtyZXR1cm57bmFtZTpiLm5hbWUsdmFsdWU6YS5yZXBsYWNlKHhiLCJcclxuIil9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmMucmVwbGFjZSh4YiwiXHJcbiIpfX0pLmdldCgpfX0pO3ZhciBCYj0vJTIwL2csQ2I9LyMuKiQvLERiPS8oWz8mXSlfPVteJl0qLyxFYj0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLEZiPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLEdiPS9eKD86R0VUfEhFQUQpJC8sSGI9L15cL1wvLyxJYj17fSxKYj17fSxLYj0iKi8iLmNvbmNhdCgiKiIpLExiPWQuY3JlYXRlRWxlbWVudCgiYSIpO0xiLmhyZWY9dGIuaHJlZjtmdW5jdGlvbiBNYihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXsic3RyaW5nIiE9dHlwZW9mIGImJihjPWIsYj0iKiIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChMKXx8W107aWYoci5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKSIrIj09PWRbMF0/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gTmIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09SmI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxyLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBPYihhLGIpe3ZhciBjLGQsZT1yLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZyLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gUGIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihkKWZvcihlIGluIGgpaWYoaFtlXSYmaFtlXS50ZXN0KGQpKXtpLnVuc2hpZnQoZSk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGUgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tlKyIgIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31pZihmKXJldHVybiBmIT09aVswXSYmaS51bnNoaWZ0KGYpLGNbZl19ZnVuY3Rpb24gUWIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1yLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6dGIuaHJlZix0eXBlOiJHRVQiLGlzTG9jYWw6RmIudGVzdCh0Yi5wcm90b2NvbCksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjpLYix0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDovXGJ4bWxcYi8saHRtbDovXGJodG1sLyxqc29uOi9cYmpzb25cYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjpKU09OLnBhcnNlLCJ0ZXh0IHhtbCI6ci5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/T2IoT2IoYSxyLmFqYXhTZXR0aW5ncyksYik6T2Ioci5hamF4U2V0dGluZ3MsYSl9LGFqYXhQcmVmaWx0ZXI6TWIoSWIpLGFqYXhUcmFuc3BvcnQ6TWIoSmIpLGFqYXg6ZnVuY3Rpb24oYixjKXsib2JqZWN0Ij09dHlwZW9mIGImJihjPWIsYj12b2lkIDApLGM9Y3x8e307dmFyIGUsZixnLGgsaSxqLGssbCxtLG4sbz1yLmFqYXhTZXR1cCh7fSxjKSxwPW8uY29udGV4dHx8byxxPW8uY29udGV4dCYmKHAubm9kZVR5cGV8fHAuanF1ZXJ5KT9yKHApOnIuZXZlbnQscz1yLkRlZmVycmVkKCksdD1yLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSx1PW8uc3RhdHVzQ29kZXx8e30sdj17fSx3PXt9LHg9ImNhbmNlbGVkIix5PXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoayl7aWYoIWgpe2g9e307d2hpbGUoYj1FYi5leGVjKGcpKWhbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9aFthLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIGs/ZzpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGw9PWsmJihhPXdbYS50b0xvd2VyQ2FzZSgpXT13W2EudG9Mb3dlckNhc2UoKV18fGEsdlthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1rJiYoby5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoayl5LmFsd2F5cyhhW3kuc3RhdHVzXSk7ZWxzZSBmb3IoYiBpbiBhKXVbYl09W3VbYl0sYVtiXV07cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHg7cmV0dXJuIGUmJmUuYWJvcnQoYiksQSgwLGIpLHRoaXN9fTtpZihzLnByb21pc2UoeSksby51cmw9KChifHxvLnVybHx8dGIuaHJlZikrIiIpLnJlcGxhY2UoSGIsdGIucHJvdG9jb2wrIi8vIiksby50eXBlPWMubWV0aG9kfHxjLnR5cGV8fG8ubWV0aG9kfHxvLnR5cGUsby5kYXRhVHlwZXM9KG8uZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChMKXx8WyIiXSxudWxsPT1vLmNyb3NzRG9tYWluKXtqPWQuY3JlYXRlRWxlbWVudCgiYSIpO3RyeXtqLmhyZWY9by51cmwsai5ocmVmPWouaHJlZixvLmNyb3NzRG9tYWluPUxiLnByb3RvY29sKyIvLyIrTGIuaG9zdCE9ai5wcm90b2NvbCsiLy8iK2ouaG9zdH1jYXRjaCh6KXtvLmNyb3NzRG9tYWluPSEwfX1pZihvLmRhdGEmJm8ucHJvY2Vzc0RhdGEmJiJzdHJpbmciIT10eXBlb2Ygby5kYXRhJiYoby5kYXRhPXIucGFyYW0oby5kYXRhLG8udHJhZGl0aW9uYWwpKSxOYihJYixvLGMseSksaylyZXR1cm4geTtsPXIuZXZlbnQmJm8uZ2xvYmFsLGwmJjA9PT1yLmFjdGl2ZSsrJiZyLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLG8udHlwZT1vLnR5cGUudG9VcHBlckNhc2UoKSxvLmhhc0NvbnRlbnQ9IUdiLnRlc3Qoby50eXBlKSxmPW8udXJsLnJlcGxhY2UoQ2IsIiIpLG8uaGFzQ29udGVudD9vLmRhdGEmJm8ucHJvY2Vzc0RhdGEmJjA9PT0oby5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiYoby5kYXRhPW8uZGF0YS5yZXBsYWNlKEJiLCIrIikpOihuPW8udXJsLnNsaWNlKGYubGVuZ3RoKSxvLmRhdGEmJihmKz0odmIudGVzdChmKT8iJiI6Ij8iKStvLmRhdGEsZGVsZXRlIG8uZGF0YSksby5jYWNoZT09PSExJiYoZj1mLnJlcGxhY2UoRGIsIiQxIiksbj0odmIudGVzdChmKT8iJiI6Ij8iKSsiXz0iK3ViKysgK24pLG8udXJsPWYrbiksby5pZk1vZGlmaWVkJiYoci5sYXN0TW9kaWZpZWRbZl0mJnkuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLHIubGFzdE1vZGlmaWVkW2ZdKSxyLmV0YWdbZl0mJnkuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsci5ldGFnW2ZdKSksKG8uZGF0YSYmby5oYXNDb250ZW50JiZvLmNvbnRlbnRUeXBlIT09ITF8fGMuY29udGVudFR5cGUpJiZ5LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsby5jb250ZW50VHlwZSkseS5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLG8uZGF0YVR5cGVzWzBdJiZvLmFjY2VwdHNbby5kYXRhVHlwZXNbMF1dP28uYWNjZXB0c1tvLmRhdGFUeXBlc1swXV0rKCIqIiE9PW8uZGF0YVR5cGVzWzBdPyIsICIrS2IrIjsgcT0wLjAxIjoiIik6by5hY2NlcHRzWyIqIl0pO2ZvcihtIGluIG8uaGVhZGVycyl5LnNldFJlcXVlc3RIZWFkZXIobSxvLmhlYWRlcnNbbV0pO2lmKG8uYmVmb3JlU2VuZCYmKG8uYmVmb3JlU2VuZC5jYWxsKHAseSxvKT09PSExfHxrKSlyZXR1cm4geS5hYm9ydCgpO2lmKHg9ImFib3J0Iix0LmFkZChvLmNvbXBsZXRlKSx5LmRvbmUoby5zdWNjZXNzKSx5LmZhaWwoby5lcnJvciksZT1OYihKYixvLGMseSkpe2lmKHkucmVhZHlTdGF0ZT0xLGwmJnEudHJpZ2dlcigiYWpheFNlbmQiLFt5LG9dKSxrKXJldHVybiB5O28uYXN5bmMmJm8udGltZW91dD4wJiYoaT1hLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt5LmFib3J0KCJ0aW1lb3V0Iil9LG8udGltZW91dCkpO3RyeXtrPSExLGUuc2VuZCh2LEEpfWNhdGNoKHope2lmKGspdGhyb3cgejtBKC0xLHopfX1lbHNlIEEoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIEEoYixjLGQsaCl7dmFyIGosbSxuLHYsdyx4PWM7a3x8KGs9ITAsaSYmYS5jbGVhclRpbWVvdXQoaSksZT12b2lkIDAsZz1ofHwiIix5LnJlYWR5U3RhdGU9Yj4wPzQ6MCxqPWI+PTIwMCYmYjwzMDB8fDMwND09PWIsZCYmKHY9UGIobyx5LGQpKSx2PVFiKG8sdix5LGopLGo/KG8uaWZNb2RpZmllZCYmKHc9eS5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHcmJihyLmxhc3RNb2RpZmllZFtmXT13KSx3PXkuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx3JiYoci5ldGFnW2ZdPXcpKSwyMDQ9PT1ifHwiSEVBRCI9PT1vLnR5cGU/eD0ibm9jb250ZW50IjozMDQ9PT1iP3g9Im5vdG1vZGlmaWVkIjooeD12LnN0YXRlLG09di5kYXRhLG49di5lcnJvcixqPSFuKSk6KG49eCwhYiYmeHx8KHg9ImVycm9yIixiPDAmJihiPTApKSkseS5zdGF0dXM9Yix5LnN0YXR1c1RleHQ9KGN8fHgpKyIiLGo/cy5yZXNvbHZlV2l0aChwLFttLHgseV0pOnMucmVqZWN0V2l0aChwLFt5LHgsbl0pLHkuc3RhdHVzQ29kZSh1KSx1PXZvaWQgMCxsJiZxLnRyaWdnZXIoaj8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt5LG8saj9tOm5dKSx0LmZpcmVXaXRoKHAsW3kseF0pLGwmJihxLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3ksb10pLC0tci5hY3RpdmV8fHIuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB5fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gci5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHIuZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLHIuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe3JbYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIHIuaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLHIuYWpheChyLmV4dGVuZCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0sci5pc1BsYWluT2JqZWN0KGEpJiZhKSl9fSksci5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gci5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOiEwLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfSxyLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gdGhpc1swXSYmKHIuaXNGdW5jdGlvbihhKSYmKGE9YS5jYWxsKHRoaXNbMF0pKSxiPXIoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0RWxlbWVudENoaWxkKWE9YS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKSksdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiByLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3IodGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPXIodGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9ci5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7cih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnBhcmVudChhKS5ub3QoImJvZHkiKS5lYWNoKGZ1bmN0aW9uKCl7cih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSksdGhpc319KSxyLmV4cHIucHNldWRvcy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIXIuZXhwci5wc2V1ZG9zLnZpc2libGUoYSl9LHIuZXhwci5wc2V1ZG9zLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuISEoYS5vZmZzZXRXaWR0aHx8YS5vZmZzZXRIZWlnaHR8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpfSxyLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBhLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGIpe319O3ZhciBSYj17MDoyMDAsMTIyMzoyMDR9LFNiPXIuYWpheFNldHRpbmdzLnhocigpO28uY29ycz0hIVNiJiYid2l0aENyZWRlbnRpYWxzImluIFNiLG8uYWpheD1TYj0hIVNiLHIuYWpheFRyYW5zcG9ydChmdW5jdGlvbihiKXt2YXIgYyxkO2lmKG8uY29yc3x8U2ImJiFiLmNyb3NzRG9tYWluKXJldHVybntzZW5kOmZ1bmN0aW9uKGUsZil7dmFyIGcsaD1iLnhocigpO2lmKGgub3BlbihiLnR5cGUsYi51cmwsYi5hc3luYyxiLnVzZXJuYW1lLGIucGFzc3dvcmQpLGIueGhyRmllbGRzKWZvcihnIGluIGIueGhyRmllbGRzKWhbZ109Yi54aHJGaWVsZHNbZ107Yi5taW1lVHlwZSYmaC5vdmVycmlkZU1pbWVUeXBlJiZoLm92ZXJyaWRlTWltZVR5cGUoYi5taW1lVHlwZSksYi5jcm9zc0RvbWFpbnx8ZVsiWC1SZXF1ZXN0ZWQtV2l0aCJdfHwoZVsiWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCIpO2ZvcihnIGluIGUpaC5zZXRSZXF1ZXN0SGVhZGVyKGcsZVtnXSk7Yz1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtjJiYoYz1kPWgub25sb2FkPWgub25lcnJvcj1oLm9uYWJvcnQ9aC5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCwiYWJvcnQiPT09YT9oLmFib3J0KCk6ImVycm9yIj09PWE/Im51bWJlciIhPXR5cGVvZiBoLnN0YXR1cz9mKDAsImVycm9yIik6ZihoLnN0YXR1cyxoLnN0YXR1c1RleHQpOmYoUmJbaC5zdGF0dXNdfHxoLnN0YXR1cyxoLnN0YXR1c1RleHQsInRleHQiIT09KGgucmVzcG9uc2VUeXBlfHwidGV4dCIpfHwic3RyaW5nIiE9dHlwZW9mIGgucmVzcG9uc2VUZXh0P3tiaW5hcnk6aC5yZXNwb25zZX06e3RleHQ6aC5yZXNwb25zZVRleHR9LGguZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LGgub25sb2FkPWMoKSxkPWgub25lcnJvcj1jKCJlcnJvciIpLHZvaWQgMCE9PWgub25hYm9ydD9oLm9uYWJvcnQ9ZDpoLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1oLnJlYWR5U3RhdGUmJmEuc2V0VGltZW91dChmdW5jdGlvbigpe2MmJmQoKX0pfSxjPWMoImFib3J0Iik7dHJ5e2guc2VuZChiLmhhc0NvbnRlbnQmJmIuZGF0YXx8bnVsbCl9Y2F0Y2goaSl7aWYoYyl0aHJvdyBpfX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX0pLHIuYWpheFByZWZpbHRlcihmdW5jdGlvbihhKXthLmNyb3NzRG9tYWluJiYoYS5jb250ZW50cy5zY3JpcHQ9ITEpfSksci5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDoidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQifSxjb250ZW50czp7c2NyaXB0Oi9cYig/OmphdmF8ZWNtYSlzY3JpcHRcYi99LGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oYSl7cmV0dXJuIHIuZ2xvYmFsRXZhbChhKSxhfX19KSxyLmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9IkdFVCIpfSksci5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKGEpe2lmKGEuY3Jvc3NEb21haW4pe3ZhciBiLGM7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSxmKXtiPXIoIjxzY3JpcHQ+IikucHJvcCh7Y2hhcnNldDphLnNjcmlwdENoYXJzZXQsc3JjOmEudXJsfSkub24oImxvYWQgZXJyb3IiLGM9ZnVuY3Rpb24oYSl7Yi5yZW1vdmUoKSxjPW51bGwsYSYmZigiZXJyb3IiPT09YS50eXBlPzQwNDoyMDAsYS50eXBlKX0pLGQuaGVhZC5hcHBlbmRDaGlsZChiWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX19KTt2YXIgVGI9W10sVWI9Lyg9KVw/KD89JnwkKXxcP1w/LztyLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9VGIucG9wKCl8fHIuZXhwYW5kbysiXyIrdWIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLHIuYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKFViLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmVWIudGVzdChiLmRhdGEpJiYiZGF0YSIpO2lmKGh8fCJqc29ucCI9PT1iLmRhdGFUeXBlc1swXSlyZXR1cm4gZT1iLmpzb25wQ2FsbGJhY2s9ci5pc0Z1bmN0aW9uKGIuanNvbnBDYWxsYmFjayk/Yi5qc29ucENhbGxiYWNrKCk6Yi5qc29ucENhbGxiYWNrLGg/YltoXT1iW2hdLnJlcGxhY2UoVWIsIiQxIitlKTpiLmpzb25wIT09ITEmJihiLnVybCs9KHZiLnRlc3QoYi51cmwpPyImIjoiPyIpK2IuanNvbnArIj0iK2UpLGIuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBnfHxyLmVycm9yKGUrIiB3YXMgbm90IGNhbGxlZCIpLGdbMF19LGIuZGF0YVR5cGVzWzBdPSJqc29uIixmPWFbZV0sYVtlXT1mdW5jdGlvbigpe2c9YXJndW1lbnRzfSxkLmFsd2F5cyhmdW5jdGlvbigpe3ZvaWQgMD09PWY/cihhKS5yZW1vdmVQcm9wKGUpOmFbZV09ZixiW2VdJiYoYi5qc29ucENhbGxiYWNrPWMuanNvbnBDYWxsYmFjayxUYi5wdXNoKGUpKSxnJiZyLmlzRnVuY3Rpb24oZikmJmYoZ1swXSksZz1mPXZvaWQgMH0pLCJzY3JpcHQifSksby5jcmVhdGVIVE1MRG9jdW1lbnQ9ZnVuY3Rpb24oKXt2YXIgYT1kLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikuYm9keTtyZXR1cm4gYS5pbm5lckhUTUw9Ijxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+IiwyPT09YS5jaGlsZE5vZGVzLmxlbmd0aH0oKSxyLnBhcnNlSFRNTD1mdW5jdGlvbihhLGIsYyl7aWYoInN0cmluZyIhPXR5cGVvZiBhKXJldHVybltdOyJib29sZWFuIj09dHlwZW9mIGImJihjPWIsYj0hMSk7dmFyIGUsZixnO3JldHVybiBifHwoby5jcmVhdGVIVE1MRG9jdW1lbnQ/KGI9ZC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpLGU9Yi5jcmVhdGVFbGVtZW50KCJiYXNlIiksZS5ocmVmPWQubG9jYXRpb24uaHJlZixiLmhlYWQuYXBwZW5kQ2hpbGQoZSkpOmI9ZCksZj1DLmV4ZWMoYSksZz0hYyYmW10sZj9bYi5jcmVhdGVFbGVtZW50KGZbMV0pXTooZj1xYShbYV0sYixnKSxnJiZnLmxlbmd0aCYmcihnKS5yZW1vdmUoKSxyLm1lcmdlKFtdLGYuY2hpbGROb2RlcykpfSxyLmZuLmxvYWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoIiAiKTtyZXR1cm4gaD4tMSYmKGQ9cGIoYS5zbGljZShoKSksYT1hLnNsaWNlKDAsaCkpLHIuaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiYib2JqZWN0Ij09dHlwZW9mIGImJihlPSJQT1NUIiksZy5sZW5ndGg+MCYmci5hamF4KHt1cmw6YSx0eXBlOmV8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP3IoIjxkaXY+IikuYXBwZW5kKHIucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sci5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtyLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksci5leHByLnBzZXVkb3MuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHIuZ3JlcChyLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH0sci5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz1yLmNzcyhhLCJwb3NpdGlvbiIpLGw9cihhKSxtPXt9OyJzdGF0aWMiPT09ayYmKGEuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIiksaD1sLm9mZnNldCgpLGY9ci5jc3MoYSwidG9wIiksaT1yLmNzcyhhLCJsZWZ0Iiksaj0oImFic29sdXRlIj09PWt8fCJmaXhlZCI9PT1rKSYmKGYraSkuaW5kZXhPZigiYXV0byIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxyLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsci5leHRlbmQoe30saCkpKSxudWxsIT1iLnRvcCYmKG0udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG0ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLCJ1c2luZyJpbiBiP2IudXNpbmcuY2FsbChhLG0pOmwuY3NzKG0pfX0sci5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3Iub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQsZSxmPXRoaXNbMF07aWYoZilyZXR1cm4gZi5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD8oZD1mLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGI9Zi5vd25lckRvY3VtZW50LGM9Yi5kb2N1bWVudEVsZW1lbnQsZT1iLmRlZmF1bHRWaWV3LHt0b3A6ZC50b3ArZS5wYWdlWU9mZnNldC1jLmNsaWVudFRvcCxsZWZ0OmQubGVmdCtlLnBhZ2VYT2Zmc2V0LWMuY2xpZW50TGVmdH0pOnt0b3A6MCxsZWZ0OjB9fSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuImZpeGVkIj09PXIuY3NzKGMsInBvc2l0aW9uIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLEIoYVswXSwiaHRtbCIpfHwoZD1hLm9mZnNldCgpKSxkPXt0b3A6ZC50b3Arci5jc3MoYVswXSwiYm9yZGVyVG9wV2lkdGgiLCEwKSxsZWZ0OmQubGVmdCtyLmNzcyhhWzBdLCJib3JkZXJMZWZ0V2lkdGgiLCEwKX0pLHt0b3A6Yi50b3AtZC50b3Atci5jc3MoYywibWFyZ2luVG9wIiwhMCksbGVmdDpiLmxlZnQtZC5sZWZ0LXIuY3NzKGMsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShhJiYic3RhdGljIj09PXIuY3NzKGEsInBvc2l0aW9uIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8cmF9KX19KSxyLmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24oYSxiKXt2YXIgYz0icGFnZVlPZmZzZXQiPT09YjtyLmZuW2FdPWZ1bmN0aW9uKGQpe3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYSxkLGUpe3ZhciBmO3JldHVybiByLmlzV2luZG93KGEpP2Y9YTo5PT09YS5ub2RlVHlwZSYmKGY9YS5kZWZhdWx0Vmlldyksdm9pZCAwPT09ZT9mP2ZbYl06YVtkXTp2b2lkKGY/Zi5zY3JvbGxUbyhjP2YucGFnZVhPZmZzZXQ6ZSxjP2U6Zi5wYWdlWU9mZnNldCk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgpfX0pLHIuZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihhLGIpe3IuY3NzSG9va3NbYl09UGEoby5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGEsYyl7aWYoYylyZXR1cm4gYz1PYShhLGIpLE1hLnRlc3QoYyk/cihhKS5wb3NpdGlvbigpW2JdKyJweCI6Y30pfSksci5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oYSxiKXtyLmVhY2goe3BhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7ci5mbltkXT1mdW5jdGlvbihlLGYpe3ZhciBnPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBlKSxoPWN8fChlPT09ITB8fGY9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIFQodGhpcyxmdW5jdGlvbihiLGMsZSl7dmFyIGY7cmV0dXJuIHIuaXNXaW5kb3coYik/MD09PWQuaW5kZXhPZigib3V0ZXIiKT9iWyJpbm5lciIrYV06Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGY9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGZbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGZbIm9mZnNldCIrYV0sZlsiY2xpZW50IithXSkpOnZvaWQgMD09PWU/ci5jc3MoYixjLGgpOnIuc3R5bGUoYixjLGUsaCl9LGIsZz9lOnZvaWQgMCxnKX19KX0pLHIuZm4uZXh0ZW5kKHtiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLCIqKiIpOnRoaXMub2ZmKGIsYXx8IioqIixjKX19KSxyLmhvbGRSZWFkeT1mdW5jdGlvbihhKXthP3IucmVhZHlXYWl0Kys6ci5yZWFkeSghMCl9LHIuaXNBcnJheT1BcnJheS5pc0FycmF5LHIucGFyc2VKU09OPUpTT04ucGFyc2Usci5ub2RlTmFtZT1CLCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiByfSk7dmFyIFZiPWEualF1ZXJ5LFdiPWEuJDtyZXR1cm4gci5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1yJiYoYS4kPVdiKSxiJiZhLmpRdWVyeT09PXImJihhLmpRdWVyeT1WYikscn0sYnx8KGEualF1ZXJ5PWEuJD1yKSxyfSk7Cg=="},{"meta":{"name":"sweetalert2.all.min.js","url":"https://cdn.jsdelivr.net/npm/sweetalert2@10.16.6/dist/sweetalert2.all.min.js","ts":1638677843384,"mimetype":"text/javascript"},"source":"IWZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6KHQ9dHx8c2VsZikuU3dlZXRhbGVydDI9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuKHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9KSh0KX1mdW5jdGlvbiBhKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gbyh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgbz1lW25dO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsby5rZXksbyl9fWZ1bmN0aW9uIHModCxlLG4pe3JldHVybiBlJiZvKHQucHJvdG90eXBlLGUpLG4mJm8odCxuKSx0fWZ1bmN0aW9uIHUoKXtyZXR1cm4odT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbixvPWFyZ3VtZW50c1tlXTtmb3IobiBpbiBvKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLG4pJiYodFtuXT1vW25dKX1yZXR1cm4gdH0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBjKHQpe3JldHVybihjPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24odCl7cmV0dXJuIHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCl9KSh0KX1mdW5jdGlvbiBsKHQsZSl7cmV0dXJuKGw9T2JqZWN0LnNldFByb3RvdHlwZU9mfHxmdW5jdGlvbih0LGUpe3JldHVybiB0Ll9fcHJvdG9fXz1lLHR9KSh0LGUpfWZ1bmN0aW9uIGQoKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4hMTtpZihSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiExO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBQcm94eSlyZXR1cm4hMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLGZ1bmN0aW9uKCl7fSkpLCEwfWNhdGNoKHQpe3JldHVybiExfX1mdW5jdGlvbiBpKHQsZSxuKXtyZXR1cm4oaT1kKCk/UmVmbGVjdC5jb25zdHJ1Y3Q6ZnVuY3Rpb24odCxlLG4pe3ZhciBvPVtudWxsXTtvLnB1c2guYXBwbHkobyxlKTtvPW5ldyhGdW5jdGlvbi5iaW5kLmFwcGx5KHQsbykpO3JldHVybiBuJiZsKG8sbi5wcm90b3R5cGUpLG99KS5hcHBseShudWxsLGFyZ3VtZW50cyl9ZnVuY3Rpb24gcCh0LGUpe3JldHVybiFlfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlP2Z1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4gdH0odCk6ZX1mdW5jdGlvbiBmKHQsZSxuKXtyZXR1cm4oZj0idW5kZWZpbmVkIiE9dHlwZW9mIFJlZmxlY3QmJlJlZmxlY3QuZ2V0P1JlZmxlY3QuZ2V0OmZ1bmN0aW9uKHQsZSxuKXt0PWZ1bmN0aW9uKHQsZSl7Zm9yKDshT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSkmJm51bGwhPT0odD1jKHQpKTspO3JldHVybiB0fSh0LGUpO2lmKHQpe2U9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpO3JldHVybiBlLmdldD9lLmdldC5jYWxsKG4pOmUudmFsdWV9fSkodCxlLG58fHQpfWZ1bmN0aW9uIG0odCl7cmV0dXJuIHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKX1mdW5jdGlvbiBoKGUpe3JldHVybiBPYmplY3Qua2V5cyhlKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19KX1mdW5jdGlvbiBnKHQpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KX1mdW5jdGlvbiB2KHQsZSl7ZT0nIicuY29uY2F0KHQsJyIgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuIFBsZWFzZSB1c2UgIicpLmNvbmNhdChlLCciIGluc3RlYWQuJyksLTE9PT1ZLmluZGV4T2YoZSkmJihZLnB1c2goZSksVyhlKSl9ZnVuY3Rpb24gYih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIHQudG9Qcm9taXNlfWZ1bmN0aW9uIHkodCl7cmV0dXJuIGIodCk/dC50b1Byb21pc2UoKTpQcm9taXNlLnJlc29sdmUodCl9ZnVuY3Rpb24gdyh0KXtyZXR1cm4gdCYmUHJvbWlzZS5yZXNvbHZlKHQpPT09dH1mdW5jdGlvbiBDKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRWxlbWVudHx8Im9iamVjdCI9PT1yKHQ9dCkmJnQuanF1ZXJ5fWZ1bmN0aW9uIGsoKXtyZXR1cm4gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCIuIi5jb25jYXQoJC5jb250YWluZXIpKX1mdW5jdGlvbiBlKHQpe3ZhciBlPWsoKTtyZXR1cm4gZT9lLnF1ZXJ5U2VsZWN0b3IodCk6bnVsbH1mdW5jdGlvbiB0KHQpe3JldHVybiBlKCIuIi5jb25jYXQodCkpfWZ1bmN0aW9uIEEoKXtyZXR1cm4gdCgkLnBvcHVwKX1mdW5jdGlvbiB4KCl7cmV0dXJuIHQoJC5pY29uKX1mdW5jdGlvbiBCKCl7cmV0dXJuIHQoJC50aXRsZSl9ZnVuY3Rpb24gUCgpe3JldHVybiB0KCQuY29udGVudCl9ZnVuY3Rpb24gTygpe3JldHVybiB0KCRbImh0bWwtY29udGFpbmVyIl0pfWZ1bmN0aW9uIEUoKXtyZXR1cm4gdCgkLmltYWdlKX1mdW5jdGlvbiBuKCl7cmV0dXJuIHQoJFsicHJvZ3Jlc3Mtc3RlcHMiXSl9ZnVuY3Rpb24gUygpe3JldHVybiB0KCRbInZhbGlkYXRpb24tbWVzc2FnZSJdKX1mdW5jdGlvbiBUKCl7cmV0dXJuIGUoIi4iLmNvbmNhdCgkLmFjdGlvbnMsIiAuIikuY29uY2F0KCQuY29uZmlybSkpfWZ1bmN0aW9uIEwoKXtyZXR1cm4gZSgiLiIuY29uY2F0KCQuYWN0aW9ucywiIC4iKS5jb25jYXQoJC5kZW55KSl9ZnVuY3Rpb24gRCgpe3JldHVybiBlKCIuIi5jb25jYXQoJC5sb2FkZXIpKX1mdW5jdGlvbiBxKCl7cmV0dXJuIGUoIi4iLmNvbmNhdCgkLmFjdGlvbnMsIiAuIikuY29uY2F0KCQuY2FuY2VsKSl9ZnVuY3Rpb24gaigpe3JldHVybiB0KCQuYWN0aW9ucyl9ZnVuY3Rpb24gTSgpe3JldHVybiB0KCQuaGVhZGVyKX1mdW5jdGlvbiBJKCl7cmV0dXJuIHQoJC5mb290ZXIpfWZ1bmN0aW9uIEgoKXtyZXR1cm4gdCgkWyJ0aW1lci1wcm9ncmVzcy1iYXIiXSl9ZnVuY3Rpb24gVigpe3JldHVybiB0KCQuY2xvc2UpfWZ1bmN0aW9uIFIoKXt2YXIgdD1nKEEoKS5xdWVyeVNlbGVjdG9yQWxsKCdbdGFiaW5kZXhdOm5vdChbdGFiaW5kZXg9Ii0xIl0pOm5vdChbdGFiaW5kZXg9IjAiXSknKSkuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0PXBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKCJ0YWJpbmRleCIpKSwoZT1wYXJzZUludChlLmdldEF0dHJpYnV0ZSgidGFiaW5kZXgiKSkpPHQ/MTp0PGU/LTE6MH0pLGU9ZyhBKCkucXVlcnlTZWxlY3RvckFsbCgnXG4gIGFbaHJlZl0sXG4gIGFyZWFbaHJlZl0sXG4gIGlucHV0Om5vdChbZGlzYWJsZWRdKSxcbiAgc2VsZWN0Om5vdChbZGlzYWJsZWRdKSxcbiAgdGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pLFxuICBidXR0b246bm90KFtkaXNhYmxlZF0pLFxuICBpZnJhbWUsXG4gIG9iamVjdCxcbiAgZW1iZWQsXG4gIFt0YWJpbmRleD0iMCJdLFxuICBbY29udGVudGVkaXRhYmxlXSxcbiAgYXVkaW9bY29udHJvbHNdLFxuICB2aWRlb1tjb250cm9sc10sXG4gIHN1bW1hcnlcbicpKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIi0xIiE9PXQuZ2V0QXR0cmlidXRlKCJ0YWJpbmRleCIpfSk7cmV0dXJuIGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDtuKyspLTE9PT1lLmluZGV4T2YodFtuXSkmJmUucHVzaCh0W25dKTtyZXR1cm4gZX0odC5jb25jYXQoZSkpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gd3QodCl9KX1mdW5jdGlvbiBOKCl7cmV0dXJuIUcoKSYmIWRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCRbIm5vLWJhY2tkcm9wIl0pfWZ1bmN0aW9uIFUoZSx0KXtlLnRleHRDb250ZW50PSIiLHQmJih0PShuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcodCwidGV4dC9odG1sIiksZyh0LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKS5jaGlsZE5vZGVzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuYXBwZW5kQ2hpbGQodCl9KSxnKHQucXVlcnlTZWxlY3RvcigiYm9keSIpLmNoaWxkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5hcHBlbmRDaGlsZCh0KX0pKX1mdW5jdGlvbiBGKHQsZSl7aWYoZSl7Zm9yKHZhciBuPWUuc3BsaXQoL1xzKy8pLG89MDtvPG4ubGVuZ3RoO28rKylpZighdC5jbGFzc0xpc3QuY29udGFpbnMobltvXSkpcmV0dXJuO3JldHVybiAxfX1mdW5jdGlvbiBfKHQsZSxuKXt2YXIgbyxpO2lmKGk9ZSxnKChvPXQpLmNsYXNzTGlzdCkuZm9yRWFjaChmdW5jdGlvbih0KXstMT09PWgoJCkuaW5kZXhPZih0KSYmLTE9PT1oKFgpLmluZGV4T2YodCkmJi0xPT09aChpLnNob3dDbGFzcykuaW5kZXhPZih0KSYmby5jbGFzc0xpc3QucmVtb3ZlKHQpfSksZS5jdXN0b21DbGFzcyYmZS5jdXN0b21DbGFzc1tuXSl7aWYoInN0cmluZyIhPXR5cGVvZiBlLmN1c3RvbUNsYXNzW25dJiYhZS5jdXN0b21DbGFzc1tuXS5mb3JFYWNoKXJldHVybiBXKCJJbnZhbGlkIHR5cGUgb2YgY3VzdG9tQ2xhc3MuIi5jb25jYXQobiwnISBFeHBlY3RlZCBzdHJpbmcgb3IgaXRlcmFibGUgb2JqZWN0LCBnb3QgIicpLmNvbmNhdChyKGUuY3VzdG9tQ2xhc3Nbbl0pLCciJykpO3Z0KHQsZS5jdXN0b21DbGFzc1tuXSl9fXZhciB6PSJTd2VldEFsZXJ0MjoiLFc9ZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKCIiLmNvbmNhdCh6LCIgIikuY29uY2F0KCJvYmplY3QiPT09cih0KT90LmpvaW4oIiAiKTp0KSl9LEs9ZnVuY3Rpb24odCl7Y29uc29sZS5lcnJvcigiIi5jb25jYXQoeiwiICIpLmNvbmNhdCh0KSl9LFk9W10sWj1mdW5jdGlvbih0KXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdD90KCk6dH0sUT1PYmplY3QuZnJlZXplKHtjYW5jZWw6ImNhbmNlbCIsYmFja2Ryb3A6ImJhY2tkcm9wIixjbG9zZToiY2xvc2UiLGVzYzoiZXNjIix0aW1lcjoidGltZXIifSksSj1mdW5jdGlvbih0KXt2YXIgZSxuPXt9O2ZvcihlIGluIHQpblt0W2VdXT0ic3dhbDItIit0W2VdO3JldHVybiBufSwkPUooWyJjb250YWluZXIiLCJzaG93biIsImhlaWdodC1hdXRvIiwiaW9zZml4IiwicG9wdXAiLCJtb2RhbCIsIm5vLWJhY2tkcm9wIiwibm8tdHJhbnNpdGlvbiIsInRvYXN0IiwidG9hc3Qtc2hvd24iLCJzaG93IiwiaGlkZSIsImNsb3NlIiwidGl0bGUiLCJoZWFkZXIiLCJjb250ZW50IiwiaHRtbC1jb250YWluZXIiLCJhY3Rpb25zIiwiY29uZmlybSIsImRlbnkiLCJjYW5jZWwiLCJmb290ZXIiLCJpY29uIiwiaWNvbi1jb250ZW50IiwiaW1hZ2UiLCJpbnB1dCIsImZpbGUiLCJyYW5nZSIsInNlbGVjdCIsInJhZGlvIiwiY2hlY2tib3giLCJsYWJlbCIsInRleHRhcmVhIiwiaW5wdXRlcnJvciIsImlucHV0LWxhYmVsIiwidmFsaWRhdGlvbi1tZXNzYWdlIiwicHJvZ3Jlc3Mtc3RlcHMiLCJhY3RpdmUtcHJvZ3Jlc3Mtc3RlcCIsInByb2dyZXNzLXN0ZXAiLCJwcm9ncmVzcy1zdGVwLWxpbmUiLCJsb2FkZXIiLCJsb2FkaW5nIiwic3R5bGVkIiwidG9wIiwidG9wLXN0YXJ0IiwidG9wLWVuZCIsInRvcC1sZWZ0IiwidG9wLXJpZ2h0IiwiY2VudGVyIiwiY2VudGVyLXN0YXJ0IiwiY2VudGVyLWVuZCIsImNlbnRlci1sZWZ0IiwiY2VudGVyLXJpZ2h0IiwiYm90dG9tIiwiYm90dG9tLXN0YXJ0IiwiYm90dG9tLWVuZCIsImJvdHRvbS1sZWZ0IiwiYm90dG9tLXJpZ2h0IiwiZ3Jvdy1yb3ciLCJncm93LWNvbHVtbiIsImdyb3ctZnVsbHNjcmVlbiIsInJ0bCIsInRpbWVyLXByb2dyZXNzLWJhciIsInRpbWVyLXByb2dyZXNzLWJhci1jb250YWluZXIiLCJzY3JvbGxiYXItbWVhc3VyZSIsImljb24tc3VjY2VzcyIsImljb24td2FybmluZyIsImljb24taW5mbyIsImljb24tcXVlc3Rpb24iLCJpY29uLWVycm9yIl0pLFg9SihbInN1Y2Nlc3MiLCJ3YXJuaW5nIiwiaW5mbyIsInF1ZXN0aW9uIiwiZXJyb3IiXSksRz1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygkWyJ0b2FzdC1zaG93biJdKX0sdHQ9e3ByZXZpb3VzQm9keVBhZGRpbmc6bnVsbH07ZnVuY3Rpb24gZXQodCxlKXtpZighZSlyZXR1cm4gbnVsbDtzd2l0Y2goZSl7Y2FzZSJzZWxlY3QiOmNhc2UidGV4dGFyZWEiOmNhc2UiZmlsZSI6cmV0dXJuIHl0KHQsJFtlXSk7Y2FzZSJjaGVja2JveCI6cmV0dXJuIHQucXVlcnlTZWxlY3RvcigiLiIuY29uY2F0KCQuY2hlY2tib3gsIiBpbnB1dCIpKTtjYXNlInJhZGlvIjpyZXR1cm4gdC5xdWVyeVNlbGVjdG9yKCIuIi5jb25jYXQoJC5yYWRpbywiIGlucHV0OmNoZWNrZWQiKSl8fHQucXVlcnlTZWxlY3RvcigiLiIuY29uY2F0KCQucmFkaW8sIiBpbnB1dDpmaXJzdC1jaGlsZCIpKTtjYXNlInJhbmdlIjpyZXR1cm4gdC5xdWVyeVNlbGVjdG9yKCIuIi5jb25jYXQoJC5yYW5nZSwiIGlucHV0IikpO2RlZmF1bHQ6cmV0dXJuIHl0KHQsJC5pbnB1dCl9fWZ1bmN0aW9uIG50KHQpe3ZhciBlO3QuZm9jdXMoKSwiZmlsZSIhPT10LnR5cGUmJihlPXQudmFsdWUsdC52YWx1ZT0iIix0LnZhbHVlPWUpfWZ1bmN0aW9uIG90KHQsZSxuKXt0JiZlJiYoZT0ic3RyaW5nIj09dHlwZW9mIGU/ZS5zcGxpdCgvXHMrLykuZmlsdGVyKEJvb2xlYW4pOmUpLmZvckVhY2goZnVuY3Rpb24oZSl7dC5mb3JFYWNoP3QuZm9yRWFjaChmdW5jdGlvbih0KXtuP3QuY2xhc3NMaXN0LmFkZChlKTp0LmNsYXNzTGlzdC5yZW1vdmUoZSl9KTpuP3QuY2xhc3NMaXN0LmFkZChlKTp0LmNsYXNzTGlzdC5yZW1vdmUoZSl9KX1mdW5jdGlvbiBpdCh0LGUsbil7KG49bj09PSIiLmNvbmNhdChwYXJzZUludChuKSk/cGFyc2VJbnQobik6bil8fDA9PT1wYXJzZUludChuKT90LnN0eWxlW2VdPSJudW1iZXIiPT10eXBlb2Ygbj8iIi5jb25jYXQobiwicHgiKTpuOnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoZSl9ZnVuY3Rpb24gcnQodCl7dC5zdHlsZS5kaXNwbGF5PTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToiZmxleCJ9ZnVuY3Rpb24gYXQodCl7dC5zdHlsZS5kaXNwbGF5PSJub25lIn1mdW5jdGlvbiBzdCh0LGUsbixvKXsoZT10LnF1ZXJ5U2VsZWN0b3IoZSkpJiYoZS5zdHlsZVtuXT1vKX1mdW5jdGlvbiB1dCh0LGUsbil7ZT9ydCh0LG4pOmF0KHQpfWZ1bmN0aW9uIGN0KHQpe3JldHVybiEhKHQuc2Nyb2xsSGVpZ2h0PnQuY2xpZW50SGVpZ2h0KX1mdW5jdGlvbiBsdCh0KXt2YXIgZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KSx0PXBhcnNlRmxvYXQoZS5nZXRQcm9wZXJ0eVZhbHVlKCJhbmltYXRpb24tZHVyYXRpb24iKXx8IjAiKSxlPXBhcnNlRmxvYXQoZS5nZXRQcm9wZXJ0eVZhbHVlKCJ0cmFuc2l0aW9uLWR1cmF0aW9uIil8fCIwIik7cmV0dXJuIDA8dHx8MDxlfWZ1bmN0aW9uIGR0KHQpe3ZhciBlPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0sbj1IKCk7d3QobikmJihlJiYobi5zdHlsZS50cmFuc2l0aW9uPSJub25lIixuLnN0eWxlLndpZHRoPSIxMDAlIiksc2V0VGltZW91dChmdW5jdGlvbigpe24uc3R5bGUudHJhbnNpdGlvbj0id2lkdGggIi5jb25jYXQodC8xZTMsInMgbGluZWFyIiksbi5zdHlsZS53aWR0aD0iMCUifSwxMCkpfWZ1bmN0aW9uIHB0KCl7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiB3aW5kb3d8fCJ1bmRlZmluZWQiPT10eXBlb2YgZG9jdW1lbnR9ZnVuY3Rpb24gZnQodCl7TW4uaXNWaXNpYmxlKCkmJmd0IT09dC50YXJnZXQudmFsdWUmJk1uLnJlc2V0VmFsaWRhdGlvbk1lc3NhZ2UoKSxndD10LnRhcmdldC52YWx1ZX1mdW5jdGlvbiBtdCh0LGUpe3QgaW5zdGFuY2VvZiBIVE1MRWxlbWVudD9lLmFwcGVuZENoaWxkKHQpOiJvYmplY3QiPT09cih0KT9BdCh0LGUpOnQmJlUoZSx0KX1mdW5jdGlvbiBodCh0LGUpe3ZhciBuPWooKSxvPUQoKSxpPVQoKSxyPUwoKSxhPXEoKTtlLnNob3dDb25maXJtQnV0dG9ufHxlLnNob3dEZW55QnV0dG9ufHxlLnNob3dDYW5jZWxCdXR0b258fGF0KG4pLF8obixlLCJhY3Rpb25zIiksUHQoaSwiY29uZmlybSIsZSksUHQociwiZGVueSIsZSksUHQoYSwiY2FuY2VsIixlKSxmdW5jdGlvbih0LGUsbixvKXtpZighby5idXR0b25zU3R5bGluZylyZXR1cm4gYnQoW3QsZSxuXSwkLnN0eWxlZCk7dnQoW3QsZSxuXSwkLnN0eWxlZCksby5jb25maXJtQnV0dG9uQ29sb3ImJih0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1vLmNvbmZpcm1CdXR0b25Db2xvcik7by5kZW55QnV0dG9uQ29sb3ImJihlLnN0eWxlLmJhY2tncm91bmRDb2xvcj1vLmRlbnlCdXR0b25Db2xvcik7by5jYW5jZWxCdXR0b25Db2xvciYmKG4uc3R5bGUuYmFja2dyb3VuZENvbG9yPW8uY2FuY2VsQnV0dG9uQ29sb3IpfShpLHIsYSxlKSxlLnJldmVyc2VCdXR0b25zJiYobi5pbnNlcnRCZWZvcmUoYSxvKSxuLmluc2VydEJlZm9yZShyLG8pLG4uaW5zZXJ0QmVmb3JlKGksbykpLFUobyxlLmxvYWRlckh0bWwpLF8obyxlLCJsb2FkZXIiKX12YXIgZ3QsdnQ9ZnVuY3Rpb24odCxlKXtvdCh0LGUsITApfSxidD1mdW5jdGlvbih0LGUpe290KHQsZSwhMSl9LHl0PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0LmNoaWxkTm9kZXMubGVuZ3RoO24rKylpZihGKHQuY2hpbGROb2Rlc1tuXSxlKSlyZXR1cm4gdC5jaGlsZE5vZGVzW25dfSx3dD1mdW5jdGlvbih0KXtyZXR1cm4hKCF0fHwhKHQub2Zmc2V0V2lkdGh8fHQub2Zmc2V0SGVpZ2h0fHx0LmdldENsaWVudFJlY3RzKCkubGVuZ3RoKSl9LEN0PSdcbiA8ZGl2IGFyaWEtbGFiZWxsZWRieT0iJy5jb25jYXQoJC50aXRsZSwnIiBhcmlhLWRlc2NyaWJlZGJ5PSInKS5jb25jYXQoJC5jb250ZW50LCciIGNsYXNzPSInKS5jb25jYXQoJC5wb3B1cCwnIiB0YWJpbmRleD0iLTEiPlxuICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KCQuaGVhZGVyLCciPlxuICAgICA8dWwgY2xhc3M9IicpLmNvbmNhdCgkWyJwcm9ncmVzcy1zdGVwcyJdLCciPjwvdWw+XG4gICAgIDxkaXYgY2xhc3M9IicpLmNvbmNhdCgkLmljb24sJyI+PC9kaXY+XG4gICAgIDxpbWcgY2xhc3M9IicpLmNvbmNhdCgkLmltYWdlLCciIC8+XG4gICAgIDxoMiBjbGFzcz0iJykuY29uY2F0KCQudGl0bGUsJyIgaWQ9IicpLmNvbmNhdCgkLnRpdGxlLCciPjwvaDI+XG4gICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iJykuY29uY2F0KCQuY2xvc2UsJyI+PC9idXR0b24+XG4gICA8L2Rpdj5cbiAgIDxkaXYgY2xhc3M9IicpLmNvbmNhdCgkLmNvbnRlbnQsJyI+XG4gICAgIDxkaXYgaWQ9IicpLmNvbmNhdCgkLmNvbnRlbnQsJyIgY2xhc3M9IicpLmNvbmNhdCgkWyJodG1sLWNvbnRhaW5lciJdLCciPjwvZGl2PlxuICAgICA8aW5wdXQgY2xhc3M9IicpLmNvbmNhdCgkLmlucHV0LCciIC8+XG4gICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBjbGFzcz0iJykuY29uY2F0KCQuZmlsZSwnIiAvPlxuICAgICA8ZGl2IGNsYXNzPSInKS5jb25jYXQoJC5yYW5nZSwnIj5cbiAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIC8+XG4gICAgICAgPG91dHB1dD48L291dHB1dD5cbiAgICAgPC9kaXY+XG4gICAgIDxzZWxlY3QgY2xhc3M9IicpLmNvbmNhdCgkLnNlbGVjdCwnIj48L3NlbGVjdD5cbiAgICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KCQucmFkaW8sJyI+PC9kaXY+XG4gICAgIDxsYWJlbCBmb3I9IicpLmNvbmNhdCgkLmNoZWNrYm94LCciIGNsYXNzPSInKS5jb25jYXQoJC5jaGVja2JveCwnIj5cbiAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIC8+XG4gICAgICAgPHNwYW4gY2xhc3M9IicpLmNvbmNhdCgkLmxhYmVsLCciPjwvc3Bhbj5cbiAgICAgPC9sYWJlbD5cbiAgICAgPHRleHRhcmVhIGNsYXNzPSInKS5jb25jYXQoJC50ZXh0YXJlYSwnIj48L3RleHRhcmVhPlxuICAgICA8ZGl2IGNsYXNzPSInKS5jb25jYXQoJFsidmFsaWRhdGlvbi1tZXNzYWdlIl0sJyIgaWQ9IicpLmNvbmNhdCgkWyJ2YWxpZGF0aW9uLW1lc3NhZ2UiXSwnIj48L2Rpdj5cbiAgIDwvZGl2PlxuICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KCQuYWN0aW9ucywnIj5cbiAgICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KCQubG9hZGVyLCciPjwvZGl2PlxuICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9IicpLmNvbmNhdCgkLmNvbmZpcm0sJyI+PC9idXR0b24+XG4gICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iJykuY29uY2F0KCQuZGVueSwnIj48L2J1dHRvbj5cbiAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSInKS5jb25jYXQoJC5jYW5jZWwsJyI+PC9idXR0b24+XG4gICA8L2Rpdj5cbiAgIDxkaXYgY2xhc3M9IicpLmNvbmNhdCgkLmZvb3RlciwnIj48L2Rpdj5cbiAgIDxkaXYgY2xhc3M9IicpLmNvbmNhdCgkWyJ0aW1lci1wcm9ncmVzcy1iYXItY29udGFpbmVyIl0sJyI+XG4gICAgIDxkaXYgY2xhc3M9IicpLmNvbmNhdCgkWyJ0aW1lci1wcm9ncmVzcy1iYXIiXSwnIj48L2Rpdj5cbiAgIDwvZGl2PlxuIDwvZGl2PlxuJykucmVwbGFjZSgvKF58XG4pXHMqL2csIiIpLGt0PWZ1bmN0aW9uKHQpe3ZhciBlLG4sbyxpLHIsYT0hIShpPWsoKSkmJihpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaSksYnQoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCxkb2N1bWVudC5ib2R5XSxbJFsibm8tYmFja2Ryb3AiXSwkWyJ0b2FzdC1zaG93biJdLCRbImhhcy1jb2x1bW4iXV0pLCEwKTtwdCgpP0soIlN3ZWV0QWxlcnQyIHJlcXVpcmVzIGRvY3VtZW50IHRvIGluaXRpYWxpemUiKTooKHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmNsYXNzTmFtZT0kLmNvbnRhaW5lcixhJiZ2dChyLCRbIm5vLXRyYW5zaXRpb24iXSksVShyLEN0KSwoaT0ic3RyaW5nIj09dHlwZW9mKGU9dC50YXJnZXQpP2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZSk6ZSkuYXBwZW5kQ2hpbGQociksYT10LChlPUEoKSkuc2V0QXR0cmlidXRlKCJyb2xlIixhLnRvYXN0PyJhbGVydCI6ImRpYWxvZyIpLGUuc2V0QXR0cmlidXRlKCJhcmlhLWxpdmUiLGEudG9hc3Q/InBvbGl0ZSI6ImFzc2VydGl2ZSIpLGEudG9hc3R8fGUuc2V0QXR0cmlidXRlKCJhcmlhLW1vZGFsIiwidHJ1ZSIpLHI9aSwicnRsIj09PXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHIpLmRpcmVjdGlvbiYmdnQoaygpLCQucnRsKSx0PVAoKSxhPXl0KHQsJC5pbnB1dCksZT15dCh0LCQuZmlsZSksbj10LnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdCgkLnJhbmdlLCIgaW5wdXQiKSksbz10LnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdCgkLnJhbmdlLCIgb3V0cHV0IikpLGk9eXQodCwkLnNlbGVjdCkscj10LnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdCgkLmNoZWNrYm94LCIgaW5wdXQiKSksdD15dCh0LCQudGV4dGFyZWEpLGEub25pbnB1dD1mdCxlLm9uY2hhbmdlPWZ0LGkub25jaGFuZ2U9ZnQsci5vbmNoYW5nZT1mdCx0Lm9uaW5wdXQ9ZnQsbi5vbmlucHV0PWZ1bmN0aW9uKHQpe2Z0KHQpLG8udmFsdWU9bi52YWx1ZX0sbi5vbmNoYW5nZT1mdW5jdGlvbih0KXtmdCh0KSxuLm5leHRTaWJsaW5nLnZhbHVlPW4udmFsdWV9KX0sQXQ9ZnVuY3Rpb24odCxlKXt0LmpxdWVyeT94dChlLHQpOlUoZSx0LnRvU3RyaW5nKCkpfSx4dD1mdW5jdGlvbih0LGUpe2lmKHQudGV4dENvbnRlbnQ9IiIsMCBpbiBlKWZvcih2YXIgbj0wO24gaW4gZTtuKyspdC5hcHBlbmRDaGlsZChlW25dLmNsb25lTm9kZSghMCkpO2Vsc2UgdC5hcHBlbmRDaGlsZChlLmNsb25lTm9kZSghMCkpfSxCdD1mdW5jdGlvbigpe2lmKHB0KCkpcmV0dXJuITE7dmFyIHQsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxuPXtXZWJraXRBbmltYXRpb246IndlYmtpdEFuaW1hdGlvbkVuZCIsT0FuaW1hdGlvbjoib0FuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIixhbmltYXRpb246ImFuaW1hdGlvbmVuZCJ9O2Zvcih0IGluIG4paWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sdCkmJnZvaWQgMCE9PWUuc3R5bGVbdF0pcmV0dXJuIG5bdF07cmV0dXJuITF9KCk7ZnVuY3Rpb24gUHQodCxlLG4pe3V0KHQsblsic2hvdyIuY29uY2F0KG0oZSksIkJ1dHRvbiIpXSwiaW5saW5lLWJsb2NrIiksVSh0LG5bIiIuY29uY2F0KGUsIkJ1dHRvblRleHQiKV0pLHQuc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIixuWyIiLmNvbmNhdChlLCJCdXR0b25BcmlhTGFiZWwiKV0pLHQuY2xhc3NOYW1lPSRbZV0sXyh0LG4sIiIuY29uY2F0KGUsIkJ1dHRvbiIpKSx2dCh0LG5bIiIuY29uY2F0KGUsIkJ1dHRvbkNsYXNzIildKX1mdW5jdGlvbiBPdCh0LGUpe3ZhciBuLG8saT1rKCk7aSYmKG89aSwic3RyaW5nIj09dHlwZW9mKG49ZS5iYWNrZHJvcCk/by5zdHlsZS5iYWNrZ3JvdW5kPW46bnx8dnQoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCxkb2N1bWVudC5ib2R5XSwkWyJuby1iYWNrZHJvcCJdKSwhZS5iYWNrZHJvcCYmZS5hbGxvd091dHNpZGVDbGljayYmVygnImFsbG93T3V0c2lkZUNsaWNrIiBwYXJhbWV0ZXIgcmVxdWlyZXMgYGJhY2tkcm9wYCBwYXJhbWV0ZXIgdG8gYmUgc2V0IHRvIGB0cnVlYCcpLG89aSwobj1lLnBvc2l0aW9uKWluICQ/dnQobywkW25dKTooVygnVGhlICJwb3NpdGlvbiIgcGFyYW1ldGVyIGlzIG5vdCB2YWxpZCwgZGVmYXVsdGluZyB0byAiY2VudGVyIicpLHZ0KG8sJC5jZW50ZXIpKSxuPWksIShvPWUuZ3Jvdyl8fCJzdHJpbmciIT10eXBlb2Ygb3x8KG89Imdyb3ctIi5jb25jYXQobykpaW4gJCYmdnQobiwkW29dKSxfKGksZSwiY29udGFpbmVyIiksKGU9ZG9jdW1lbnQuYm9keS5nZXRBdHRyaWJ1dGUoImRhdGEtc3dhbDItcXVldWUtc3RlcCIpKSYmKGkuc2V0QXR0cmlidXRlKCJkYXRhLXF1ZXVlLXN0ZXAiLGUpLGRvY3VtZW50LmJvZHkucmVtb3ZlQXR0cmlidXRlKCJkYXRhLXN3YWwyLXF1ZXVlLXN0ZXAiKSkpfWZ1bmN0aW9uIEV0KHQsZSl7dC5wbGFjZWhvbGRlciYmIWUuaW5wdXRQbGFjZWhvbGRlcnx8KHQucGxhY2Vob2xkZXI9ZS5pbnB1dFBsYWNlaG9sZGVyKX1mdW5jdGlvbiBTdCh0LGUsbil7dmFyIG8saTtuLmlucHV0TGFiZWwmJih0LmlkPSQuaW5wdXQsbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpLGk9JFsiaW5wdXQtbGFiZWwiXSxvLnNldEF0dHJpYnV0ZSgiZm9yIix0LmlkKSxvLmNsYXNzTmFtZT1pLHZ0KG8sbi5jdXN0b21DbGFzcy5pbnB1dExhYmVsKSxvLmlubmVyVGV4dD1uLmlucHV0TGFiZWwsZS5pbnNlcnRBZGphY2VudEVsZW1lbnQoImJlZm9yZWJlZ2luIixvKSl9dmFyIFR0PXtwcm9taXNlOm5ldyBXZWFrTWFwLGlubmVyUGFyYW1zOm5ldyBXZWFrTWFwLGRvbUNhY2hlOm5ldyBXZWFrTWFwfSxMdD1bImlucHV0IiwiZmlsZSIsInJhbmdlIiwic2VsZWN0IiwicmFkaW8iLCJjaGVja2JveCIsInRleHRhcmVhIl0sRHQ9ZnVuY3Rpb24odCl7aWYoIUl0W3QuaW5wdXRdKXJldHVybiBLKCdVbmV4cGVjdGVkIHR5cGUgb2YgaW5wdXQhIEV4cGVjdGVkICJ0ZXh0IiwgImVtYWlsIiwgInBhc3N3b3JkIiwgIm51bWJlciIsICJ0ZWwiLCAic2VsZWN0IiwgInJhZGlvIiwgImNoZWNrYm94IiwgInRleHRhcmVhIiwgImZpbGUiIG9yICJ1cmwiLCBnb3QgIicuY29uY2F0KHQuaW5wdXQsJyInKSk7dmFyIGU9TXQodC5pbnB1dCksbj1JdFt0LmlucHV0XShlLHQpO3J0KG4pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtudChuKX0pfSxxdD1mdW5jdGlvbih0LGUpe3ZhciBuPWV0KFAoKSx0KTtpZihuKWZvcih2YXIgbyBpbiFmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQuYXR0cmlidXRlcy5sZW5ndGg7ZSsrKXt2YXIgbj10LmF0dHJpYnV0ZXNbZV0ubmFtZTstMT09PVsidHlwZSIsInZhbHVlIiwic3R5bGUiXS5pbmRleE9mKG4pJiZ0LnJlbW92ZUF0dHJpYnV0ZShuKX19KG4pLGUpInJhbmdlIj09PXQmJiJwbGFjZWhvbGRlciI9PT1vfHxuLnNldEF0dHJpYnV0ZShvLGVbb10pfSxqdD1mdW5jdGlvbih0KXt2YXIgZT1NdCh0LmlucHV0KTt0LmN1c3RvbUNsYXNzJiZ2dChlLHQuY3VzdG9tQ2xhc3MuaW5wdXQpfSxNdD1mdW5jdGlvbih0KXt0PSRbdF18fCQuaW5wdXQ7cmV0dXJuIHl0KFAoKSx0KX0sSXQ9e307SXQudGV4dD1JdC5lbWFpbD1JdC5wYXNzd29yZD1JdC5udW1iZXI9SXQudGVsPUl0LnVybD1mdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZS5pbnB1dFZhbHVlfHwibnVtYmVyIj09dHlwZW9mIGUuaW5wdXRWYWx1ZT90LnZhbHVlPWUuaW5wdXRWYWx1ZTp3KGUuaW5wdXRWYWx1ZSl8fFcoJ1VuZXhwZWN0ZWQgdHlwZSBvZiBpbnB1dFZhbHVlISBFeHBlY3RlZCAic3RyaW5nIiwgIm51bWJlciIgb3IgIlByb21pc2UiLCBnb3QgIicuY29uY2F0KHIoZS5pbnB1dFZhbHVlKSwnIicpKSxTdCh0LHQsZSksRXQodCxlKSx0LnR5cGU9ZS5pbnB1dCx0fSxJdC5maWxlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFN0KHQsdCxlKSxFdCh0LGUpLHR9LEl0LnJhbmdlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5xdWVyeVNlbGVjdG9yKCJpbnB1dCIpLG89dC5xdWVyeVNlbGVjdG9yKCJvdXRwdXQiKTtyZXR1cm4gbi52YWx1ZT1lLmlucHV0VmFsdWUsbi50eXBlPWUuaW5wdXQsby52YWx1ZT1lLmlucHV0VmFsdWUsU3Qobix0LGUpLHR9LEl0LnNlbGVjdD1mdW5jdGlvbih0LGUpe3ZhciBuO3JldHVybiB0LnRleHRDb250ZW50PSIiLGUuaW5wdXRQbGFjZWhvbGRlciYmKG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIiksVShuLGUuaW5wdXRQbGFjZWhvbGRlciksbi52YWx1ZT0iIixuLmRpc2FibGVkPSEwLG4uc2VsZWN0ZWQ9ITAsdC5hcHBlbmRDaGlsZChuKSksU3QodCx0LGUpLHR9LEl0LnJhZGlvPWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHRDb250ZW50PSIiLHR9LEl0LmNoZWNrYm94PWZ1bmN0aW9uKHQsZSl7dmFyIG49ZXQoUCgpLCJjaGVja2JveCIpO24udmFsdWU9MSxuLmlkPSQuY2hlY2tib3gsbi5jaGVja2VkPUJvb2xlYW4oZS5pbnB1dFZhbHVlKTtuPXQucXVlcnlTZWxlY3Rvcigic3BhbiIpO3JldHVybiBVKG4sZS5pbnB1dFBsYWNlaG9sZGVyKSx0fSxJdC50ZXh0YXJlYT1mdW5jdGlvbihlLHQpe2UudmFsdWU9dC5pbnB1dFZhbHVlLEV0KGUsdCksU3QoZSxlLHQpO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpLnBhZGRpbmdMZWZ0KStwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS5wYWRkaW5nUmlnaHQpfXZhciBvO3JldHVybiJNdXRhdGlvbk9ic2VydmVyImluIHdpbmRvdyYmKG89cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoQSgpKS53aWR0aCksbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oKXt2YXIgdD1lLm9mZnNldFdpZHRoK24oQSgpKStuKFAoKSk7QSgpLnN0eWxlLndpZHRoPW88dD8iIi5jb25jYXQodCwicHgiKTpudWxsfSkub2JzZXJ2ZShlLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInN0eWxlIl19KSksZX07ZnVuY3Rpb24gSHQodCxlKXt2YXIgbyxpLHIsbj1PKCk7XyhuLGUsImh0bWxDb250YWluZXIiKSxlLmh0bWw/KG10KGUuaHRtbCxuKSxydChuLCJibG9jayIpKTplLnRleHQ/KG4udGV4dENvbnRlbnQ9ZS50ZXh0LHJ0KG4sImJsb2NrIikpOmF0KG4pLHQ9dCxvPWUsaT1QKCksdD1UdC5pbm5lclBhcmFtcy5nZXQodCkscj0hdHx8by5pbnB1dCE9PXQuaW5wdXQsTHQuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT0kW3RdLG49eXQoaSxlKTtxdCh0LG8uaW5wdXRBdHRyaWJ1dGVzKSxuLmNsYXNzTmFtZT1lLHImJmF0KG4pfSksby5pbnB1dCYmKHImJkR0KG8pLGp0KG8pKSxfKFAoKSxlLCJjb250ZW50Iil9ZnVuY3Rpb24gVnQoKXtyZXR1cm4gaygpJiZrKCkuZ2V0QXR0cmlidXRlKCJkYXRhLXF1ZXVlLXN0ZXAiKX1mdW5jdGlvbiBSdCh0LG8pe3ZhciBpPW4oKTtpZighby5wcm9ncmVzc1N0ZXBzfHwwPT09by5wcm9ncmVzc1N0ZXBzLmxlbmd0aClyZXR1cm4gYXQoaSksMDtydChpKSxpLnRleHRDb250ZW50PSIiO3ZhciByPXBhcnNlSW50KHZvaWQgMD09PW8uY3VycmVudFByb2dyZXNzU3RlcD9WdCgpOm8uY3VycmVudFByb2dyZXNzU3RlcCk7cj49by5wcm9ncmVzc1N0ZXBzLmxlbmd0aCYmVygiSW52YWxpZCBjdXJyZW50UHJvZ3Jlc3NTdGVwIHBhcmFtZXRlciwgaXQgc2hvdWxkIGJlIGxlc3MgdGhhbiBwcm9ncmVzc1N0ZXBzLmxlbmd0aCAoY3VycmVudFByb2dyZXNzU3RlcCBsaWtlIEpTIGFycmF5cyBzdGFydHMgZnJvbSAwKSIpLG8ucHJvZ3Jlc3NTdGVwcy5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG4sdD0obj10LHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKSx2dCh0LCRbInByb2dyZXNzLXN0ZXAiXSksVSh0LG4pLHQpO2kuYXBwZW5kQ2hpbGQodCksZT09PXImJnZ0KHQsJFsiYWN0aXZlLXByb2dyZXNzLXN0ZXAiXSksZSE9PW8ucHJvZ3Jlc3NTdGVwcy5sZW5ndGgtMSYmKHQ9byxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIiksdnQoZSwkWyJwcm9ncmVzcy1zdGVwLWxpbmUiXSksdC5wcm9ncmVzc1N0ZXBzRGlzdGFuY2UmJihlLnN0eWxlLndpZHRoPXQucHJvZ3Jlc3NTdGVwc0Rpc3RhbmNlKSxpLmFwcGVuZENoaWxkKGUpKX0pfWZ1bmN0aW9uIE50KHQsZSl7dmFyIG4sbz1NKCk7XyhvLGUsImhlYWRlciIpLFJ0KDAsZSksbj10LG89ZSx0PVR0LmlubmVyUGFyYW1zLmdldChuKSxuPXgoKSx0JiZvLmljb249PT10Lmljb24/KFd0KG4sbyksX3QobixvKSk6by5pY29ufHxvLmljb25IdG1sP28uaWNvbiYmLTE9PT1PYmplY3Qua2V5cyhYKS5pbmRleE9mKG8uaWNvbik/KEsoJ1Vua25vd24gaWNvbiEgRXhwZWN0ZWQgInN1Y2Nlc3MiLCAiZXJyb3IiLCAid2FybmluZyIsICJpbmZvIiBvciAicXVlc3Rpb24iLCBnb3QgIicuY29uY2F0KG8uaWNvbiwnIicpKSxhdChuKSk6KHJ0KG4pLFd0KG4sbyksX3QobixvKSx2dChuLG8uc2hvd0NsYXNzLmljb24pKTphdChuKSxmdW5jdGlvbih0KXt2YXIgZT1FKCk7aWYoIXQuaW1hZ2VVcmwpcmV0dXJuIGF0KGUpO3J0KGUsIiIpLGUuc2V0QXR0cmlidXRlKCJzcmMiLHQuaW1hZ2VVcmwpLGUuc2V0QXR0cmlidXRlKCJhbHQiLHQuaW1hZ2VBbHQpLGl0KGUsIndpZHRoIix0LmltYWdlV2lkdGgpLGl0KGUsImhlaWdodCIsdC5pbWFnZUhlaWdodCksZS5jbGFzc05hbWU9JC5pbWFnZSxfKGUsdCwiaW1hZ2UiKX0oZSksbz1lLG49QigpLHV0KG4sby50aXRsZXx8by50aXRsZVRleHQsImJsb2NrIiksby50aXRsZSYmbXQoby50aXRsZSxuKSxvLnRpdGxlVGV4dCYmKG4uaW5uZXJUZXh0PW8udGl0bGVUZXh0KSxfKG4sbywidGl0bGUiKSxvPWUsZT1WKCksVShlLG8uY2xvc2VCdXR0b25IdG1sKSxfKGUsbywiY2xvc2VCdXR0b24iKSx1dChlLG8uc2hvd0Nsb3NlQnV0dG9uKSxlLnNldEF0dHJpYnV0ZSgiYXJpYS1sYWJlbCIsby5jbG9zZUJ1dHRvbkFyaWFMYWJlbCl9ZnVuY3Rpb24gVXQodCxlKXt2YXIgbixvLGk7aT1lLG49aygpLG89QSgpLGkudG9hc3Q/KGl0KG4sIndpZHRoIixpLndpZHRoKSxvLnN0eWxlLndpZHRoPSIxMDAlIik6aXQobywid2lkdGgiLGkud2lkdGgpLGl0KG8sInBhZGRpbmciLGkucGFkZGluZyksaS5iYWNrZ3JvdW5kJiYoby5zdHlsZS5iYWNrZ3JvdW5kPWkuYmFja2dyb3VuZCksYXQoUygpKSxRdChvLGkpLE90KDAsZSksTnQodCxlKSxIdCh0LGUpLGh0KDAsZSksaT1lLHQ9SSgpLHV0KHQsaS5mb290ZXIpLGkuZm9vdGVyJiZtdChpLmZvb3Rlcix0KSxfKHQsaSwiZm9vdGVyIiksImZ1bmN0aW9uIj09dHlwZW9mIGUuZGlkUmVuZGVyP2UuZGlkUmVuZGVyKEEoKSk6ImZ1bmN0aW9uIj09dHlwZW9mIGUub25SZW5kZXImJmUub25SZW5kZXIoQSgpKX1mdW5jdGlvbiBGdCgpe3JldHVybiBUKCkmJlQoKS5jbGljaygpfXZhciBfdD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBYKWUuaWNvbiE9PW4mJmJ0KHQsWFtuXSk7dnQodCxYW2UuaWNvbl0pLEt0KHQsZSksenQoKSxfKHQsZSwiaWNvbiIpfSx6dD1mdW5jdGlvbigpe2Zvcih2YXIgdD1BKCksZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS5nZXRQcm9wZXJ0eVZhbHVlKCJiYWNrZ3JvdW5kLWNvbG9yIiksbj10LnF1ZXJ5U2VsZWN0b3JBbGwoIltjbGFzc149c3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lXSwgLnN3YWwyLXN1Y2Nlc3MtZml4Iiksbz0wO288bi5sZW5ndGg7bysrKW5bb10uc3R5bGUuYmFja2dyb3VuZENvbG9yPWV9LFd0PWZ1bmN0aW9uKHQsZSl7dC50ZXh0Q29udGVudD0iIixlLmljb25IdG1sP1UodCxZdChlLmljb25IdG1sKSk6InN1Y2Nlc3MiPT09ZS5pY29uP1UodCwnXG4gICAgICA8ZGl2IGNsYXNzPSJzd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmUtbGVmdCI+PC9kaXY+XG4gICAgICA8c3BhbiBjbGFzcz0ic3dhbDItc3VjY2Vzcy1saW5lLXRpcCI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ic3dhbDItc3VjY2Vzcy1saW5lLWxvbmciPjwvc3Bhbj5cbiAgICAgIDxkaXYgY2xhc3M9InN3YWwyLXN1Y2Nlc3MtcmluZyI+PC9kaXY+IDxkaXYgY2xhc3M9InN3YWwyLXN1Y2Nlc3MtZml4Ij48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9InN3YWwyLXN1Y2Nlc3MtY2lyY3VsYXItbGluZS1yaWdodCI+PC9kaXY+XG4gICAgJyk6ImVycm9yIj09PWUuaWNvbj9VKHQsJ1xuICAgICAgPHNwYW4gY2xhc3M9InN3YWwyLXgtbWFyayI+XG4gICAgICAgIDxzcGFuIGNsYXNzPSJzd2FsMi14LW1hcmstbGluZS1sZWZ0Ij48L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPSJzd2FsMi14LW1hcmstbGluZS1yaWdodCI+PC9zcGFuPlxuICAgICAgPC9zcGFuPlxuICAgICcpOlUodCxZdCh7cXVlc3Rpb246Ij8iLHdhcm5pbmc6IiEiLGluZm86ImkifVtlLmljb25dKSl9LEt0PWZ1bmN0aW9uKHQsZSl7aWYoZS5pY29uQ29sb3Ipe3Quc3R5bGUuY29sb3I9ZS5pY29uQ29sb3IsdC5zdHlsZS5ib3JkZXJDb2xvcj1lLmljb25Db2xvcjtmb3IodmFyIG49MCxvPVsiLnN3YWwyLXN1Y2Nlc3MtbGluZS10aXAiLCIuc3dhbDItc3VjY2Vzcy1saW5lLWxvbmciLCIuc3dhbDIteC1tYXJrLWxpbmUtbGVmdCIsIi5zd2FsMi14LW1hcmstbGluZS1yaWdodCJdO248by5sZW5ndGg7bisrKXN0KHQsb1tuXSwiYmFja2dyb3VuZENvbG9yIixlLmljb25Db2xvcik7c3QodCwiLnN3YWwyLXN1Y2Nlc3MtcmluZyIsImJvcmRlckNvbG9yIixlLmljb25Db2xvcil9fSxZdD1mdW5jdGlvbih0KXtyZXR1cm4nPGRpdiBjbGFzcz0iJy5jb25jYXQoJFsiaWNvbi1jb250ZW50Il0sJyI+JykuY29uY2F0KHQsIjwvZGl2PiIpfSxadD1bXSxRdD1mdW5jdGlvbih0LGUpe3QuY2xhc3NOYW1lPSIiLmNvbmNhdCgkLnBvcHVwLCIgIikuY29uY2F0KHd0KHQpP2Uuc2hvd0NsYXNzLnBvcHVwOiIiKSxlLnRvYXN0Pyh2dChbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGRvY3VtZW50LmJvZHldLCRbInRvYXN0LXNob3duIl0pLHZ0KHQsJC50b2FzdCkpOnZ0KHQsJC5tb2RhbCksXyh0LGUsInBvcHVwIiksInN0cmluZyI9PXR5cGVvZiBlLmN1c3RvbUNsYXNzJiZ2dCh0LGUuY3VzdG9tQ2xhc3MpLGUuaWNvbiYmdnQodCwkWyJpY29uLSIuY29uY2F0KGUuaWNvbildKX07ZnVuY3Rpb24gSnQodCl7KGU9QSgpKXx8TW4uZmlyZSgpO3ZhciBlPUEoKSxuPWooKSxvPUQoKTshdCYmd3QoVCgpKSYmKHQ9VCgpKSxydChuKSx0JiYoYXQodCksby5zZXRBdHRyaWJ1dGUoImRhdGEtYnV0dG9uLXRvLXJlcGxhY2UiLHQuY2xhc3NOYW1lKSksby5wYXJlbnROb2RlLmluc2VydEJlZm9yZShvLHQpLHZ0KFtlLG5dLCQubG9hZGluZykscnQobyksZS5zZXRBdHRyaWJ1dGUoImRhdGEtbG9hZGluZyIsITApLGUuc2V0QXR0cmlidXRlKCJhcmlhLWJ1c3kiLCEwKSxlLmZvY3VzKCl9ZnVuY3Rpb24gJHQobyl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe2lmKCFvKXJldHVybiB0KCk7dmFyIGU9d2luZG93LnNjcm9sbFgsbj13aW5kb3cuc2Nyb2xsWTt0ZS5yZXN0b3JlRm9jdXNUaW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0ZS5wcmV2aW91c0FjdGl2ZUVsZW1lbnQmJnRlLnByZXZpb3VzQWN0aXZlRWxlbWVudC5mb2N1cz8odGUucHJldmlvdXNBY3RpdmVFbGVtZW50LmZvY3VzKCksdGUucHJldmlvdXNBY3RpdmVFbGVtZW50PW51bGwpOmRvY3VtZW50LmJvZHkmJmRvY3VtZW50LmJvZHkuZm9jdXMoKSx0KCl9LDEwMCksdm9pZCAwIT09ZSYmdm9pZCAwIT09biYmd2luZG93LnNjcm9sbFRvKGUsbil9KX1mdW5jdGlvbiBYdCgpe2lmKHRlLnRpbWVvdXQpcmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9SCgpLGU9cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodCkud2lkdGgpO3Quc3R5bGUucmVtb3ZlUHJvcGVydHkoInRyYW5zaXRpb24iKSx0LnN0eWxlLndpZHRoPSIxMDAlIjt2YXIgbj1wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS53aWR0aCksbj1wYXJzZUludChlL24qMTAwKTt0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCJ0cmFuc2l0aW9uIiksdC5zdHlsZS53aWR0aD0iIi5jb25jYXQobiwiJSIpfSgpLHRlLnRpbWVvdXQuc3RvcCgpfWZ1bmN0aW9uIEd0KCl7aWYodGUudGltZW91dCl7dmFyIHQ9dGUudGltZW91dC5zdGFydCgpO3JldHVybiBkdCh0KSx0fX12YXIgdGU9e30sZWU9ITEsbmU9e307ZnVuY3Rpb24gb2UodCl7Zm9yKHZhciBlPXQudGFyZ2V0O2UmJmUhPT1kb2N1bWVudDtlPWUucGFyZW50Tm9kZSlmb3IodmFyIG4gaW4gbmUpe3ZhciBvPWUuZ2V0QXR0cmlidXRlKG4pO2lmKG8pcmV0dXJuIHZvaWQgbmVbbl0uZmlyZSh7dGVtcGxhdGU6b30pfX1mdW5jdGlvbiBpZSh0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNlLHQpfWZ1bmN0aW9uIHJlKHQpe3JldHVybiBjZVt0XX1mdW5jdGlvbiBhZSh0KXtmb3IodmFyIGUgaW4gdClpZShuPWUpfHxXKCdVbmtub3duIHBhcmFtZXRlciAiJy5jb25jYXQobiwnIicpKSx0LnRvYXN0JiYobj1lLC0xIT09bGUuaW5kZXhPZihuKSYmVygnVGhlIHBhcmFtZXRlciAiJy5jb25jYXQobiwnIiBpcyBpbmNvbXBhdGlibGUgd2l0aCB0b2FzdHMnKSkpLHJlKGU9ZSkmJnYoZSxyZShlKSk7dmFyIG59dmFyIHNlPXt0aXRsZToiIix0aXRsZVRleHQ6IiIsdGV4dDoiIixodG1sOiIiLGZvb3RlcjoiIixpY29uOnZvaWQgMCxpY29uQ29sb3I6dm9pZCAwLGljb25IdG1sOnZvaWQgMCx0ZW1wbGF0ZTp2b2lkIDAsdG9hc3Q6ITEsYW5pbWF0aW9uOiEwLHNob3dDbGFzczp7cG9wdXA6InN3YWwyLXNob3ciLGJhY2tkcm9wOiJzd2FsMi1iYWNrZHJvcC1zaG93IixpY29uOiJzd2FsMi1pY29uLXNob3cifSxoaWRlQ2xhc3M6e3BvcHVwOiJzd2FsMi1oaWRlIixiYWNrZHJvcDoic3dhbDItYmFja2Ryb3AtaGlkZSIsaWNvbjoic3dhbDItaWNvbi1oaWRlIn0sY3VzdG9tQ2xhc3M6e30sdGFyZ2V0OiJib2R5IixiYWNrZHJvcDohMCxoZWlnaHRBdXRvOiEwLGFsbG93T3V0c2lkZUNsaWNrOiEwLGFsbG93RXNjYXBlS2V5OiEwLGFsbG93RW50ZXJLZXk6ITAsc3RvcEtleWRvd25Qcm9wYWdhdGlvbjohMCxrZXlkb3duTGlzdGVuZXJDYXB0dXJlOiExLHNob3dDb25maXJtQnV0dG9uOiEwLHNob3dEZW55QnV0dG9uOiExLHNob3dDYW5jZWxCdXR0b246ITEscHJlQ29uZmlybTp2b2lkIDAscHJlRGVueTp2b2lkIDAsY29uZmlybUJ1dHRvblRleHQ6Ik9LIixjb25maXJtQnV0dG9uQXJpYUxhYmVsOiIiLGNvbmZpcm1CdXR0b25Db2xvcjp2b2lkIDAsZGVueUJ1dHRvblRleHQ6Ik5vIixkZW55QnV0dG9uQXJpYUxhYmVsOiIiLGRlbnlCdXR0b25Db2xvcjp2b2lkIDAsY2FuY2VsQnV0dG9uVGV4dDoiQ2FuY2VsIixjYW5jZWxCdXR0b25BcmlhTGFiZWw6IiIsY2FuY2VsQnV0dG9uQ29sb3I6dm9pZCAwLGJ1dHRvbnNTdHlsaW5nOiEwLHJldmVyc2VCdXR0b25zOiExLGZvY3VzQ29uZmlybTohMCxmb2N1c0Rlbnk6ITEsZm9jdXNDYW5jZWw6ITEscmV0dXJuRm9jdXM6ITAsc2hvd0Nsb3NlQnV0dG9uOiExLGNsb3NlQnV0dG9uSHRtbDoiJnRpbWVzOyIsY2xvc2VCdXR0b25BcmlhTGFiZWw6IkNsb3NlIHRoaXMgZGlhbG9nIixsb2FkZXJIdG1sOiIiLHNob3dMb2FkZXJPbkNvbmZpcm06ITEsc2hvd0xvYWRlck9uRGVueTohMSxpbWFnZVVybDp2b2lkIDAsaW1hZ2VXaWR0aDp2b2lkIDAsaW1hZ2VIZWlnaHQ6dm9pZCAwLGltYWdlQWx0OiIiLHRpbWVyOnZvaWQgMCx0aW1lclByb2dyZXNzQmFyOiExLHdpZHRoOnZvaWQgMCxwYWRkaW5nOnZvaWQgMCxiYWNrZ3JvdW5kOnZvaWQgMCxpbnB1dDp2b2lkIDAsaW5wdXRQbGFjZWhvbGRlcjoiIixpbnB1dExhYmVsOiIiLGlucHV0VmFsdWU6IiIsaW5wdXRPcHRpb25zOnt9LGlucHV0QXV0b1RyaW06ITAsaW5wdXRBdHRyaWJ1dGVzOnt9LGlucHV0VmFsaWRhdG9yOnZvaWQgMCxyZXR1cm5JbnB1dFZhbHVlT25EZW55OiExLHZhbGlkYXRpb25NZXNzYWdlOnZvaWQgMCxncm93OiExLHBvc2l0aW9uOiJjZW50ZXIiLHByb2dyZXNzU3RlcHM6W10sY3VycmVudFByb2dyZXNzU3RlcDp2b2lkIDAscHJvZ3Jlc3NTdGVwc0Rpc3RhbmNlOnZvaWQgMCxvbkJlZm9yZU9wZW46dm9pZCAwLG9uT3Blbjp2b2lkIDAsd2lsbE9wZW46dm9pZCAwLGRpZE9wZW46dm9pZCAwLG9uUmVuZGVyOnZvaWQgMCxkaWRSZW5kZXI6dm9pZCAwLG9uQ2xvc2U6dm9pZCAwLG9uQWZ0ZXJDbG9zZTp2b2lkIDAsd2lsbENsb3NlOnZvaWQgMCxkaWRDbG9zZTp2b2lkIDAsb25EZXN0cm95OnZvaWQgMCxkaWREZXN0cm95OnZvaWQgMCxzY3JvbGxiYXJQYWRkaW5nOiEwfSx1ZT1bImFsbG93RXNjYXBlS2V5IiwiYWxsb3dPdXRzaWRlQ2xpY2siLCJiYWNrZ3JvdW5kIiwiYnV0dG9uc1N0eWxpbmciLCJjYW5jZWxCdXR0b25BcmlhTGFiZWwiLCJjYW5jZWxCdXR0b25Db2xvciIsImNhbmNlbEJ1dHRvblRleHQiLCJjbG9zZUJ1dHRvbkFyaWFMYWJlbCIsImNsb3NlQnV0dG9uSHRtbCIsImNvbmZpcm1CdXR0b25BcmlhTGFiZWwiLCJjb25maXJtQnV0dG9uQ29sb3IiLCJjb25maXJtQnV0dG9uVGV4dCIsImN1cnJlbnRQcm9ncmVzc1N0ZXAiLCJjdXN0b21DbGFzcyIsImRlbnlCdXR0b25BcmlhTGFiZWwiLCJkZW55QnV0dG9uQ29sb3IiLCJkZW55QnV0dG9uVGV4dCIsImRpZENsb3NlIiwiZGlkRGVzdHJveSIsImZvb3RlciIsImhpZGVDbGFzcyIsImh0bWwiLCJpY29uIiwiaWNvbkNvbG9yIiwiaWNvbkh0bWwiLCJpbWFnZUFsdCIsImltYWdlSGVpZ2h0IiwiaW1hZ2VVcmwiLCJpbWFnZVdpZHRoIiwib25BZnRlckNsb3NlIiwib25DbG9zZSIsIm9uRGVzdHJveSIsInByb2dyZXNzU3RlcHMiLCJyZXR1cm5Gb2N1cyIsInJldmVyc2VCdXR0b25zIiwic2hvd0NhbmNlbEJ1dHRvbiIsInNob3dDbG9zZUJ1dHRvbiIsInNob3dDb25maXJtQnV0dG9uIiwic2hvd0RlbnlCdXR0b24iLCJ0ZXh0IiwidGl0bGUiLCJ0aXRsZVRleHQiLCJ3aWxsQ2xvc2UiXSxjZT17YW5pbWF0aW9uOidzaG93Q2xhc3MiIGFuZCAiaGlkZUNsYXNzJyxvbkJlZm9yZU9wZW46IndpbGxPcGVuIixvbk9wZW46ImRpZE9wZW4iLG9uUmVuZGVyOiJkaWRSZW5kZXIiLG9uQ2xvc2U6IndpbGxDbG9zZSIsb25BZnRlckNsb3NlOiJkaWRDbG9zZSIsb25EZXN0cm95OiJkaWREZXN0cm95In0sbGU9WyJhbGxvd091dHNpZGVDbGljayIsImFsbG93RW50ZXJLZXkiLCJiYWNrZHJvcCIsImZvY3VzQ29uZmlybSIsImZvY3VzRGVueSIsImZvY3VzQ2FuY2VsIiwicmV0dXJuRm9jdXMiLCJoZWlnaHRBdXRvIiwia2V5ZG93bkxpc3RlbmVyQ2FwdHVyZSJdLGRlPU9iamVjdC5mcmVlemUoe2lzVmFsaWRQYXJhbWV0ZXI6aWUsaXNVcGRhdGFibGVQYXJhbWV0ZXI6ZnVuY3Rpb24odCl7cmV0dXJuLTEhPT11ZS5pbmRleE9mKHQpfSxpc0RlcHJlY2F0ZWRQYXJhbWV0ZXI6cmUsYXJnc1RvUGFyYW1zOmZ1bmN0aW9uKG4pe3ZhciBvPXt9O3JldHVybiJvYmplY3QiIT09cihuWzBdKXx8QyhuWzBdKT9bInRpdGxlIiwiaHRtbCIsImljb24iXS5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7ZT1uW2VdOyJzdHJpbmciPT10eXBlb2YgZXx8QyhlKT9vW3RdPWU6dm9pZCAwIT09ZSYmSygiVW5leHBlY3RlZCB0eXBlIG9mICIuY29uY2F0KHQsJyEgRXhwZWN0ZWQgInN0cmluZyIgb3IgIkVsZW1lbnQiLCBnb3QgJykuY29uY2F0KHIoZSkpKX0pOnUobyxuWzBdKSxvfSxpc1Zpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gd3QoQSgpKX0sY2xpY2tDb25maXJtOkZ0LGNsaWNrRGVueTpmdW5jdGlvbigpe3JldHVybiBMKCkmJkwoKS5jbGljaygpfSxjbGlja0NhbmNlbDpmdW5jdGlvbigpe3JldHVybiBxKCkmJnEoKS5jbGljaygpfSxnZXRDb250YWluZXI6ayxnZXRQb3B1cDpBLGdldFRpdGxlOkIsZ2V0Q29udGVudDpQLGdldEh0bWxDb250YWluZXI6TyxnZXRJbWFnZTpFLGdldEljb246eCxnZXRJbnB1dExhYmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHQoJFsiaW5wdXQtbGFiZWwiXSl9LGdldENsb3NlQnV0dG9uOlYsZ2V0QWN0aW9uczpqLGdldENvbmZpcm1CdXR0b246VCxnZXREZW55QnV0dG9uOkwsZ2V0Q2FuY2VsQnV0dG9uOnEsZ2V0TG9hZGVyOkQsZ2V0SGVhZGVyOk0sZ2V0Rm9vdGVyOkksZ2V0VGltZXJQcm9ncmVzc0JhcjpILGdldEZvY3VzYWJsZUVsZW1lbnRzOlIsZ2V0VmFsaWRhdGlvbk1lc3NhZ2U6Uyxpc0xvYWRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gQSgpLmhhc0F0dHJpYnV0ZSgiZGF0YS1sb2FkaW5nIil9LGZpcmU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPW5ldyBBcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtyZXR1cm4gaSh0aGlzLGUpfSxtaXhpbjpmdW5jdGlvbihyKXtyZXR1cm4gZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJmwodCxlKX0oaSx0KTt2YXIgbixvLGU9KG49aSxvPWQoKSxmdW5jdGlvbigpe3ZhciB0LGU9YyhuKTtyZXR1cm4gcCh0aGlzLG8/KHQ9Yyh0aGlzKS5jb25zdHJ1Y3RvcixSZWZsZWN0LmNvbnN0cnVjdChlLGFyZ3VtZW50cyx0KSk6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSk7ZnVuY3Rpb24gaSgpe3JldHVybiBhKHRoaXMsaSksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHMoaSxbe2tleToiX21haW4iLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGYoYyhpLnByb3RvdHlwZSksIl9tYWluIix0aGlzKS5jYWxsKHRoaXMsdCx1KHt9LHIsZSkpfX1dKSxpfSh0aGlzKX0scXVldWU6ZnVuY3Rpb24odCl7dmFyIHI9dGhpcztadD10O2Z1bmN0aW9uIGEodCxlKXtadD1bXSx0KGUpfXZhciBzPVtdO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihpKXshZnVuY3Rpb24gZShuLG8pe248WnQubGVuZ3RoPyhkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZSgiZGF0YS1zd2FsMi1xdWV1ZS1zdGVwIixuKSxyLmZpcmUoWnRbbl0pLnRoZW4oZnVuY3Rpb24odCl7dm9pZCAwIT09dC52YWx1ZT8ocy5wdXNoKHQudmFsdWUpLGUobisxLG8pKTphKGkse2Rpc21pc3M6dC5kaXNtaXNzfSl9KSk6YShpLHt2YWx1ZTpzfSl9KDApfSl9LGdldFF1ZXVlU3RlcDpWdCxpbnNlcnRRdWV1ZVN0ZXA6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZSYmZTxadC5sZW5ndGg/WnQuc3BsaWNlKGUsMCx0KTpadC5wdXNoKHQpfSxkZWxldGVRdWV1ZVN0ZXA6ZnVuY3Rpb24odCl7dm9pZCAwIT09WnRbdF0mJlp0LnNwbGljZSh0LDEpfSxzaG93TG9hZGluZzpKdCxlbmFibGVMb2FkaW5nOkp0LGdldFRpbWVyTGVmdDpmdW5jdGlvbigpe3JldHVybiB0ZS50aW1lb3V0JiZ0ZS50aW1lb3V0LmdldFRpbWVyTGVmdCgpfSxzdG9wVGltZXI6WHQscmVzdW1lVGltZXI6R3QsdG9nZ2xlVGltZXI6ZnVuY3Rpb24oKXt2YXIgdD10ZS50aW1lb3V0O3JldHVybiB0JiYodC5ydW5uaW5nP1h0Okd0KSgpfSxpbmNyZWFzZVRpbWVyOmZ1bmN0aW9uKHQpe2lmKHRlLnRpbWVvdXQpe3Q9dGUudGltZW91dC5pbmNyZWFzZSh0KTtyZXR1cm4gZHQodCwhMCksdH19LGlzVGltZXJSdW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRlLnRpbWVvdXQmJnRlLnRpbWVvdXQuaXNSdW5uaW5nKCl9LGJpbmRDbGlja0hhbmRsZXI6ZnVuY3Rpb24oKXtuZVswPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06ImRhdGEtc3dhbC10ZW1wbGF0ZSJdPXRoaXMsZWV8fChkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixvZSksZWU9ITApfX0pO2Z1bmN0aW9uIHBlKCl7dmFyIHQsZTtUdC5pbm5lclBhcmFtcy5nZXQodGhpcykmJih0PVR0LmRvbUNhY2hlLmdldCh0aGlzKSxhdCh0LmxvYWRlciksKGU9dC5wb3B1cC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHQubG9hZGVyLmdldEF0dHJpYnV0ZSgiZGF0YS1idXR0b24tdG8tcmVwbGFjZSIpKSkubGVuZ3RoP3J0KGVbMF0sImlubGluZS1ibG9jayIpOnd0KFQoKSl8fHd0KEwoKSl8fHd0KHEoKSl8fGF0KHQuYWN0aW9ucyksYnQoW3QucG9wdXAsdC5hY3Rpb25zXSwkLmxvYWRpbmcpLHQucG9wdXAucmVtb3ZlQXR0cmlidXRlKCJhcmlhLWJ1c3kiKSx0LnBvcHVwLnJlbW92ZUF0dHJpYnV0ZSgiZGF0YS1sb2FkaW5nIiksdC5jb25maXJtQnV0dG9uLmRpc2FibGVkPSExLHQuZGVueUJ1dHRvbi5kaXNhYmxlZD0hMSx0LmNhbmNlbEJ1dHRvbi5kaXNhYmxlZD0hMSl9ZnVuY3Rpb24gZmUoKXtudWxsPT09dHQucHJldmlvdXNCb2R5UGFkZGluZyYmZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ+d2luZG93LmlubmVySGVpZ2h0JiYodHQucHJldmlvdXNCb2R5UGFkZGluZz1wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCJwYWRkaW5nLXJpZ2h0IikpLGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0PSIiLmNvbmNhdCh0dC5wcmV2aW91c0JvZHlQYWRkaW5nK2Z1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dC5jbGFzc05hbWU9JFsic2Nyb2xsYmFyLW1lYXN1cmUiXSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHQpO3ZhciBlPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgtdC5jbGllbnRXaWR0aDtyZXR1cm4gZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0KSxlfSgpLCJweCIpKX1mdW5jdGlvbiBtZSgpe3JldHVybiEhd2luZG93Lk1TSW5wdXRNZXRob2RDb250ZXh0JiYhIWRvY3VtZW50LmRvY3VtZW50TW9kZX1mdW5jdGlvbiBoZSgpe3ZhciB0PWsoKSxlPUEoKTt0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCJhbGlnbi1pdGVtcyIpLGUub2Zmc2V0VG9wPDAmJih0LnN0eWxlLmFsaWduSXRlbXM9ImZsZXgtc3RhcnQiKX12YXIgZ2U9ZnVuY3Rpb24oKXtuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC8oQ3JpT1N8RnhpT1N8RWRnaU9TfFlhQnJvd3NlcnxVQ0Jyb3dzZXIpL2kpfHxBKCkuc2Nyb2xsSGVpZ2h0PndpbmRvdy5pbm5lckhlaWdodC00NCYmKGsoKS5zdHlsZS5wYWRkaW5nQm90dG9tPSIiLmNvbmNhdCg0NCwicHgiKSl9LHZlPWZ1bmN0aW9uKCl7dmFyIGUsdD1rKCk7dC5vbnRvdWNoc3RhcnQ9ZnVuY3Rpb24odCl7ZT1iZSh0KX0sdC5vbnRvdWNobW92ZT1mdW5jdGlvbih0KXtlJiYodC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCkpfX0sYmU9ZnVuY3Rpb24odCl7dmFyIGU9dC50YXJnZXQsbj1rKCk7cmV0dXJuIXllKHQpJiYhd2UodCkmJihlPT09bnx8IShjdChuKXx8IklOUFVUIj09PWUudGFnTmFtZXx8Y3QoUCgpKSYmUCgpLmNvbnRhaW5zKGUpKSl9LHllPWZ1bmN0aW9uKHQpe3JldHVybiB0LnRvdWNoZXMmJnQudG91Y2hlcy5sZW5ndGgmJiJzdHlsdXMiPT09dC50b3VjaGVzWzBdLnRvdWNoVHlwZX0sd2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQudG91Y2hlcyYmMTx0LnRvdWNoZXMubGVuZ3RofSxDZT17c3dhbFByb21pc2VSZXNvbHZlOm5ldyBXZWFrTWFwfTtmdW5jdGlvbiBrZSh0LGUsbixvKXtHKCk/RWUodCxvKTooJHQobikudGhlbihmdW5jdGlvbigpe3JldHVybiBFZSh0LG8pfSksdGUua2V5ZG93blRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIix0ZS5rZXlkb3duSGFuZGxlcix7Y2FwdHVyZTp0ZS5rZXlkb3duTGlzdGVuZXJDYXB0dXJlfSksdGUua2V5ZG93bkhhbmRsZXJBZGRlZD0hMSksZS5wYXJlbnROb2RlJiYhZG9jdW1lbnQuYm9keS5nZXRBdHRyaWJ1dGUoImRhdGEtc3dhbDItcXVldWUtc3RlcCIpJiZlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSksTigpJiYobnVsbCE9PXR0LnByZXZpb3VzQm9keVBhZGRpbmcmJihkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodD0iIi5jb25jYXQodHQucHJldmlvdXNCb2R5UGFkZGluZywicHgiKSx0dC5wcmV2aW91c0JvZHlQYWRkaW5nPW51bGwpLEYoZG9jdW1lbnQuYm9keSwkLmlvc2ZpeCkmJihlPXBhcnNlSW50KGRvY3VtZW50LmJvZHkuc3R5bGUudG9wLDEwKSxidChkb2N1bWVudC5ib2R5LCQuaW9zZml4KSxkb2N1bWVudC5ib2R5LnN0eWxlLnRvcD0iIixkb2N1bWVudC5ib2R5LnNjcm9sbFRvcD0tMSplKSwidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmbWUoKSYmd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsaGUpLGcoZG9jdW1lbnQuYm9keS5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbih0KXt0Lmhhc0F0dHJpYnV0ZSgiZGF0YS1wcmV2aW91cy1hcmlhLWhpZGRlbiIpPyh0LnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLHQuZ2V0QXR0cmlidXRlKCJkYXRhLXByZXZpb3VzLWFyaWEtaGlkZGVuIikpLHQucmVtb3ZlQXR0cmlidXRlKCJkYXRhLXByZXZpb3VzLWFyaWEtaGlkZGVuIikpOnQucmVtb3ZlQXR0cmlidXRlKCJhcmlhLWhpZGRlbiIpfSkpLGJ0KFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZG9jdW1lbnQuYm9keV0sWyQuc2hvd24sJFsiaGVpZ2h0LWF1dG8iXSwkWyJuby1iYWNrZHJvcCJdLCRbInRvYXN0LXNob3duIl1dKX1mdW5jdGlvbiBBZSh0KXt2YXIgZSxuLG8saT1BKCk7aSYmKHQ9eGUodCksKGU9VHQuaW5uZXJQYXJhbXMuZ2V0KHRoaXMpKSYmIUYoaSxlLmhpZGVDbGFzcy5wb3B1cCkmJihuPUNlLnN3YWxQcm9taXNlUmVzb2x2ZS5nZXQodGhpcyksYnQoaSxlLnNob3dDbGFzcy5wb3B1cCksdnQoaSxlLmhpZGVDbGFzcy5wb3B1cCksbz1rKCksYnQobyxlLnNob3dDbGFzcy5iYWNrZHJvcCksdnQobyxlLmhpZGVDbGFzcy5iYWNrZHJvcCksQmUodGhpcyxpLGUpLG4odCkpKX1mdW5jdGlvbiB4ZSh0KXtyZXR1cm4gdm9pZCAwPT09dD97aXNDb25maXJtZWQ6ITEsaXNEZW5pZWQ6ITEsaXNEaXNtaXNzZWQ6ITB9OnUoe2lzQ29uZmlybWVkOiExLGlzRGVuaWVkOiExLGlzRGlzbWlzc2VkOiExfSx0KX1mdW5jdGlvbiBCZSh0LGUsbil7dmFyIG89aygpLGk9QnQmJmx0KGUpLHI9bi5vbkNsb3NlLGE9bi5vbkFmdGVyQ2xvc2Uscz1uLndpbGxDbG9zZSx1PW4uZGlkQ2xvc2U7UGUoZSxzLHIpLGk/T2UodCxlLG8sbi5yZXR1cm5Gb2N1cyx1fHxhKTprZSh0LG8sbi5yZXR1cm5Gb2N1cyx1fHxhKX12YXIgUGU9ZnVuY3Rpb24odCxlLG4pe251bGwhPT1lJiYiZnVuY3Rpb24iPT10eXBlb2YgZT9lKHQpOm51bGwhPT1uJiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmbih0KX0sT2U9ZnVuY3Rpb24odCxlLG4sbyxpKXt0ZS5zd2FsQ2xvc2VFdmVudEZpbmlzaGVkQ2FsbGJhY2s9a2UuYmluZChudWxsLHQsbixvLGkpLGUuYWRkRXZlbnRMaXN0ZW5lcihCdCxmdW5jdGlvbih0KXt0LnRhcmdldD09PWUmJih0ZS5zd2FsQ2xvc2VFdmVudEZpbmlzaGVkQ2FsbGJhY2soKSxkZWxldGUgdGUuc3dhbENsb3NlRXZlbnRGaW5pc2hlZENhbGxiYWNrKX0pfSxFZT1mdW5jdGlvbih0LGUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXsiZnVuY3Rpb24iPT10eXBlb2YgZSYmZSgpLHQuX2Rlc3Ryb3koKX0pfTtmdW5jdGlvbiBTZSh0LGUsbil7dmFyIG89VHQuZG9tQ2FjaGUuZ2V0KHQpO2UuZm9yRWFjaChmdW5jdGlvbih0KXtvW3RdLmRpc2FibGVkPW59KX1mdW5jdGlvbiBUZSh0LGUpe2lmKCF0KXJldHVybiExO2lmKCJyYWRpbyI9PT10LnR5cGUpZm9yKHZhciBuPXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0Iiksbz0wO288bi5sZW5ndGg7bysrKW5bb10uZGlzYWJsZWQ9ZTtlbHNlIHQuZGlzYWJsZWQ9ZX12YXIgTGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQsZSl7YSh0aGlzLG4pLHRoaXMuY2FsbGJhY2s9dCx0aGlzLnJlbWFpbmluZz1lLHRoaXMucnVubmluZz0hMSx0aGlzLnN0YXJ0KCl9cmV0dXJuIHMobixbe2tleToic3RhcnQiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnVubmluZ3x8KHRoaXMucnVubmluZz0hMCx0aGlzLnN0YXJ0ZWQ9bmV3IERhdGUsdGhpcy5pZD1zZXRUaW1lb3V0KHRoaXMuY2FsbGJhY2ssdGhpcy5yZW1haW5pbmcpKSx0aGlzLnJlbWFpbmluZ319LHtrZXk6InN0b3AiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnVubmluZyYmKHRoaXMucnVubmluZz0hMSxjbGVhclRpbWVvdXQodGhpcy5pZCksdGhpcy5yZW1haW5pbmctPW5ldyBEYXRlLXRoaXMuc3RhcnRlZCksdGhpcy5yZW1haW5pbmd9fSx7a2V5OiJpbmNyZWFzZSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ydW5uaW5nO3JldHVybiBlJiZ0aGlzLnN0b3AoKSx0aGlzLnJlbWFpbmluZys9dCxlJiZ0aGlzLnN0YXJ0KCksdGhpcy5yZW1haW5pbmd9fSx7a2V5OiJnZXRUaW1lckxlZnQiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnVubmluZyYmKHRoaXMuc3RvcCgpLHRoaXMuc3RhcnQoKSksdGhpcy5yZW1haW5pbmd9fSx7a2V5OiJpc1J1bm5pbmciLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnVubmluZ319XSksbn0oKSxEZT17ZW1haWw6ZnVuY3Rpb24odCxlKXtyZXR1cm4vXlthLXpBLVowLTkuK18tXStAW2EtekEtWjAtOS4tXStcLlthLXpBLVowLTktXXsyLDI0fSQvLnRlc3QodCk/UHJvbWlzZS5yZXNvbHZlKCk6UHJvbWlzZS5yZXNvbHZlKGV8fCJJbnZhbGlkIGVtYWlsIGFkZHJlc3MiKX0sdXJsOmZ1bmN0aW9uKHQsZSl7cmV0dXJuL15odHRwcz86XC9cLyh3d3dcLik/Wy1hLXpBLVowLTlAOiUuXyt+Iz1dezEsMjU2fVwuW2Etel17Miw2M31cYihbLWEtekEtWjAtOUA6JV8rLn4jPyYvPV0qKSQvLnRlc3QodCk/UHJvbWlzZS5yZXNvbHZlKCk6UHJvbWlzZS5yZXNvbHZlKGV8fCJJbnZhbGlkIFVSTCIpfX07ZnVuY3Rpb24gcWUodCl7dmFyIGUsbjsoZT10KS5pbnB1dFZhbGlkYXRvcnx8T2JqZWN0LmtleXMoRGUpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5pbnB1dD09PXQmJihlLmlucHV0VmFsaWRhdG9yPURlW3RdKX0pLHQuc2hvd0xvYWRlck9uQ29uZmlybSYmIXQucHJlQ29uZmlybSYmVygic2hvd0xvYWRlck9uQ29uZmlybSBpcyBzZXQgdG8gdHJ1ZSwgYnV0IHByZUNvbmZpcm0gaXMgbm90IGRlZmluZWQuXG5zaG93TG9hZGVyT25Db25maXJtIHNob3VsZCBiZSB1c2VkIHRvZ2V0aGVyIHdpdGggcHJlQ29uZmlybSwgc2VlIHVzYWdlIGV4YW1wbGU6XG5odHRwczovL3N3ZWV0YWxlcnQyLmdpdGh1Yi5pby8jYWpheC1yZXF1ZXN0IiksdC5hbmltYXRpb249Wih0LmFuaW1hdGlvbiksKG49dCkudGFyZ2V0JiYoInN0cmluZyIhPXR5cGVvZiBuLnRhcmdldHx8ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuLnRhcmdldCkpJiYoInN0cmluZyI9PXR5cGVvZiBuLnRhcmdldHx8bi50YXJnZXQuYXBwZW5kQ2hpbGQpfHwoVygnVGFyZ2V0IHBhcmFtZXRlciBpcyBub3QgdmFsaWQsIGRlZmF1bHRpbmcgdG8gImJvZHkiJyksbi50YXJnZXQ9ImJvZHkiKSwic3RyaW5nIj09dHlwZW9mIHQudGl0bGUmJih0LnRpdGxlPXQudGl0bGUuc3BsaXQoIlxuIikuam9pbigiPGJyIC8+IikpLGt0KHQpfWZ1bmN0aW9uIGplKHQpe3ZhciBlPWsoKSxuPUEoKTsiZnVuY3Rpb24iPT10eXBlb2YgdC53aWxsT3Blbj90LndpbGxPcGVuKG4pOiJmdW5jdGlvbiI9PXR5cGVvZiB0Lm9uQmVmb3JlT3BlbiYmdC5vbkJlZm9yZU9wZW4obik7dmFyIG89d2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkub3ZlcmZsb3dZO0plKGUsbix0KSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7WmUoZSxuKX0sMTApLE4oKSYmKFFlKGUsdC5zY3JvbGxiYXJQYWRkaW5nLG8pLGcoZG9jdW1lbnQuYm9keS5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbih0KXt0PT09aygpfHxmdW5jdGlvbih0LGUpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0LmNvbnRhaW5zKXJldHVybiB0LmNvbnRhaW5zKGUpfSh0LGsoKSl8fCh0Lmhhc0F0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iKSYmdC5zZXRBdHRyaWJ1dGUoImRhdGEtcHJldmlvdXMtYXJpYS1oaWRkZW4iLHQuZ2V0QXR0cmlidXRlKCJhcmlhLWhpZGRlbiIpKSx0LnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCJ0cnVlIikpfSkpLEcoKXx8dGUucHJldmlvdXNBY3RpdmVFbGVtZW50fHwodGUucHJldmlvdXNBY3RpdmVFbGVtZW50PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpLFllKG4sdCksYnQoZSwkWyJuby10cmFuc2l0aW9uIl0pfWZ1bmN0aW9uIE1lKHQpe3ZhciBlPUEoKTt0LnRhcmdldD09PWUmJih0PWsoKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoQnQsTWUpLHQuc3R5bGUub3ZlcmZsb3dZPSJhdXRvIil9ZnVuY3Rpb24gSWUodCxlKXt0LmNsb3NlUG9wdXAoe2lzQ29uZmlybWVkOiEwLHZhbHVlOmV9KX1mdW5jdGlvbiBIZSh0LGUsbil7dmFyIG89UigpO2lmKG8ubGVuZ3RoKXJldHVybihlKz1uKT09PW8ubGVuZ3RoP2U9MDotMT09PWUmJihlPW8ubGVuZ3RoLTEpLG9bZV0uZm9jdXMoKTtBKCkuZm9jdXMoKX12YXIgVmU9WyJzd2FsLXRpdGxlIiwic3dhbC1odG1sIiwic3dhbC1mb290ZXIiXSxSZT1mdW5jdGlvbih0KXt2YXIgbj17fTtyZXR1cm4gZyh0LnF1ZXJ5U2VsZWN0b3JBbGwoInN3YWwtcGFyYW0iKSkuZm9yRWFjaChmdW5jdGlvbih0KXtLZSh0LFsibmFtZSIsInZhbHVlIl0pO3ZhciBlPXQuZ2V0QXR0cmlidXRlKCJuYW1lIiksdD10LmdldEF0dHJpYnV0ZSgidmFsdWUiKTsiYm9vbGVhbiI9PXR5cGVvZiBzZVtlXSYmImZhbHNlIj09PXQmJih0PSExKSwib2JqZWN0Ij09PXIoc2VbZV0pJiYodD1KU09OLnBhcnNlKHQpKSxuW2VdPXR9KSxufSxOZT1mdW5jdGlvbih0KXt2YXIgbj17fTtyZXR1cm4gZyh0LnF1ZXJ5U2VsZWN0b3JBbGwoInN3YWwtYnV0dG9uIikpLmZvckVhY2goZnVuY3Rpb24odCl7S2UodCxbInR5cGUiLCJjb2xvciIsImFyaWEtbGFiZWwiXSk7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoInR5cGUiKTtuWyIiLmNvbmNhdChlLCJCdXR0b25UZXh0IildPXQuaW5uZXJIVE1MLG5bInNob3ciLmNvbmNhdChtKGUpLCJCdXR0b24iKV09ITAsdC5oYXNBdHRyaWJ1dGUoImNvbG9yIikmJihuWyIiLmNvbmNhdChlLCJCdXR0b25Db2xvciIpXT10LmdldEF0dHJpYnV0ZSgiY29sb3IiKSksdC5oYXNBdHRyaWJ1dGUoImFyaWEtbGFiZWwiKSYmKG5bIiIuY29uY2F0KGUsIkJ1dHRvbkFyaWFMYWJlbCIpXT10LmdldEF0dHJpYnV0ZSgiYXJpYS1sYWJlbCIpKX0pLG59LFVlPWZ1bmN0aW9uKHQpe3ZhciBlPXt9LHQ9dC5xdWVyeVNlbGVjdG9yKCJzd2FsLWltYWdlIik7cmV0dXJuIHQmJihLZSh0LFsic3JjIiwid2lkdGgiLCJoZWlnaHQiLCJhbHQiXSksdC5oYXNBdHRyaWJ1dGUoInNyYyIpJiYoZS5pbWFnZVVybD10LmdldEF0dHJpYnV0ZSgic3JjIikpLHQuaGFzQXR0cmlidXRlKCJ3aWR0aCIpJiYoZS5pbWFnZVdpZHRoPXQuZ2V0QXR0cmlidXRlKCJ3aWR0aCIpKSx0Lmhhc0F0dHJpYnV0ZSgiaGVpZ2h0IikmJihlLmltYWdlSGVpZ2h0PXQuZ2V0QXR0cmlidXRlKCJoZWlnaHQiKSksdC5oYXNBdHRyaWJ1dGUoImFsdCIpJiYoZS5pbWFnZUFsdD10LmdldEF0dHJpYnV0ZSgiYWx0IikpKSxlfSxGZT1mdW5jdGlvbih0KXt2YXIgZT17fSx0PXQucXVlcnlTZWxlY3Rvcigic3dhbC1pY29uIik7cmV0dXJuIHQmJihLZSh0LFsidHlwZSIsImNvbG9yIl0pLHQuaGFzQXR0cmlidXRlKCJ0eXBlIikmJihlLmljb249dC5nZXRBdHRyaWJ1dGUoInR5cGUiKSksdC5oYXNBdHRyaWJ1dGUoImNvbG9yIikmJihlLmljb25Db2xvcj10LmdldEF0dHJpYnV0ZSgiY29sb3IiKSksZS5pY29uSHRtbD10LmlubmVySFRNTCksZX0sX2U9ZnVuY3Rpb24odCl7dmFyIG49e30sZT10LnF1ZXJ5U2VsZWN0b3IoInN3YWwtaW5wdXQiKTtlJiYoS2UoZSxbInR5cGUiLCJsYWJlbCIsInBsYWNlaG9sZGVyIiwidmFsdWUiXSksbi5pbnB1dD1lLmdldEF0dHJpYnV0ZSgidHlwZSIpfHwidGV4dCIsZS5oYXNBdHRyaWJ1dGUoImxhYmVsIikmJihuLmlucHV0TGFiZWw9ZS5nZXRBdHRyaWJ1dGUoImxhYmVsIikpLGUuaGFzQXR0cmlidXRlKCJwbGFjZWhvbGRlciIpJiYobi5pbnB1dFBsYWNlaG9sZGVyPWUuZ2V0QXR0cmlidXRlKCJwbGFjZWhvbGRlciIpKSxlLmhhc0F0dHJpYnV0ZSgidmFsdWUiKSYmKG4uaW5wdXRWYWx1ZT1lLmdldEF0dHJpYnV0ZSgidmFsdWUiKSkpO3Q9dC5xdWVyeVNlbGVjdG9yQWxsKCJzd2FsLWlucHV0LW9wdGlvbiIpO3JldHVybiB0Lmxlbmd0aCYmKG4uaW5wdXRPcHRpb25zPXt9LGcodCkuZm9yRWFjaChmdW5jdGlvbih0KXtLZSh0LFsidmFsdWUiXSk7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoInZhbHVlIiksdD10LmlubmVySFRNTDtuLmlucHV0T3B0aW9uc1tlXT10fSkpLG59LHplPWZ1bmN0aW9uKHQsZSl7dmFyIG4sbz17fTtmb3IobiBpbiBlKXt2YXIgaT1lW25dLHI9dC5xdWVyeVNlbGVjdG9yKGkpO3ImJihLZShyLFtdKSxvW2kucmVwbGFjZSgvXnN3YWwtLywiIildPXIuaW5uZXJIVE1MLnRyaW0oKSl9cmV0dXJuIG99LFdlPWZ1bmN0aW9uKGUpe3ZhciBuPVZlLmNvbmNhdChbInN3YWwtcGFyYW0iLCJzd2FsLWJ1dHRvbiIsInN3YWwtaW1hZ2UiLCJzd2FsLWljb24iLCJzd2FsLWlucHV0Iiwic3dhbC1pbnB1dC1vcHRpb24iXSk7ZyhlLnF1ZXJ5U2VsZWN0b3JBbGwoIioiKSkuZm9yRWFjaChmdW5jdGlvbih0KXt0LnBhcmVudE5vZGU9PT1lJiYodD10LnRhZ05hbWUudG9Mb3dlckNhc2UoKSwtMT09PW4uaW5kZXhPZih0KSYmVygiVW5yZWNvZ25pemVkIGVsZW1lbnQgPCIuY29uY2F0KHQsIj4iKSkpfSl9LEtlPWZ1bmN0aW9uKGUsbil7ZyhlLmF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24odCl7LTE9PT1uLmluZGV4T2YodC5uYW1lKSYmVyhbJ1VucmVjb2duaXplZCBhdHRyaWJ1dGUgIicuY29uY2F0KHQubmFtZSwnIiBvbiA8JykuY29uY2F0KGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpLCI+LiIpLCIiLmNvbmNhdChuLmxlbmd0aD8iQWxsb3dlZCBhdHRyaWJ1dGVzIGFyZTogIi5jb25jYXQobi5qb2luKCIsICIpKToiVG8gc2V0IHRoZSB2YWx1ZSwgdXNlIEhUTUwgd2l0aGluIHRoZSBlbGVtZW50LiIpXSl9KX0sWWU9ZnVuY3Rpb24odCxlKXsiZnVuY3Rpb24iPT10eXBlb2YgZS5kaWRPcGVuP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gZS5kaWRPcGVuKHQpfSk6ImZ1bmN0aW9uIj09dHlwZW9mIGUub25PcGVuJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIGUub25PcGVuKHQpfSl9LFplPWZ1bmN0aW9uKHQsZSl7QnQmJmx0KGUpPyh0LnN0eWxlLm92ZXJmbG93WT0iaGlkZGVuIixlLmFkZEV2ZW50TGlzdGVuZXIoQnQsTWUpKTp0LnN0eWxlLm92ZXJmbG93WT0iYXV0byJ9LFFlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbzsoL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJiF3aW5kb3cuTVNTdHJlYW18fCJNYWNJbnRlbCI9PT1uYXZpZ2F0b3IucGxhdGZvcm0mJjE8bmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzKSYmIUYoZG9jdW1lbnQuYm9keSwkLmlvc2ZpeCkmJihvPWRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wLGRvY3VtZW50LmJvZHkuc3R5bGUudG9wPSIiLmNvbmNhdCgtMSpvLCJweCIpLHZ0KGRvY3VtZW50LmJvZHksJC5pb3NmaXgpLHZlKCksZ2UoKSksInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJm1lKCkmJihoZSgpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLGhlKSksZSYmImhpZGRlbiIhPT1uJiZmZSgpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNjcm9sbFRvcD0wfSl9LEplPWZ1bmN0aW9uKHQsZSxuKXt2dCh0LG4uc2hvd0NsYXNzLmJhY2tkcm9wKSxlLnN0eWxlLnNldFByb3BlcnR5KCJvcGFjaXR5IiwiMCIsImltcG9ydGFudCIpLHJ0KGUpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2dChlLG4uc2hvd0NsYXNzLnBvcHVwKSxlLnN0eWxlLnJlbW92ZVByb3BlcnR5KCJvcGFjaXR5Iil9LDEwKSx2dChbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGRvY3VtZW50LmJvZHldLCQuc2hvd24pLG4uaGVpZ2h0QXV0byYmbi5iYWNrZHJvcCYmIW4udG9hc3QmJnZ0KFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZG9jdW1lbnQuYm9keV0sJFsiaGVpZ2h0LWF1dG8iXSl9LCRlPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrZWQ/MTowfSxYZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jaGVja2VkP3QudmFsdWU6bnVsbH0sR2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZmlsZXMubGVuZ3RoP251bGwhPT10LmdldEF0dHJpYnV0ZSgibXVsdGlwbGUiKT90LmZpbGVzOnQuZmlsZXNbMF06bnVsbH0sdG49ZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBvKHQpe3JldHVybiBubltuLmlucHV0XShpLG9uKHQpLG4pfXZhciBpPVAoKTtiKG4uaW5wdXRPcHRpb25zKXx8dyhuLmlucHV0T3B0aW9ucyk/KEp0KFQoKSkseShuLmlucHV0T3B0aW9ucykudGhlbihmdW5jdGlvbih0KXtlLmhpZGVMb2FkaW5nKCksbyh0KX0pKToib2JqZWN0Ij09PXIobi5pbnB1dE9wdGlvbnMpP28obi5pbnB1dE9wdGlvbnMpOksoIlVuZXhwZWN0ZWQgdHlwZSBvZiBpbnB1dE9wdGlvbnMhIEV4cGVjdGVkIG9iamVjdCwgTWFwIG9yIFByb21pc2UsIGdvdCAiLmNvbmNhdChyKG4uaW5wdXRPcHRpb25zKSkpfSxlbj1mdW5jdGlvbihlLG4pe3ZhciBvPWUuZ2V0SW5wdXQoKTthdChvKSx5KG4uaW5wdXRWYWx1ZSkudGhlbihmdW5jdGlvbih0KXtvLnZhbHVlPSJudW1iZXIiPT09bi5pbnB1dD9wYXJzZUZsb2F0KHQpfHwwOiIiLmNvbmNhdCh0KSxydChvKSxvLmZvY3VzKCksZS5oaWRlTG9hZGluZygpfSkuY2F0Y2goZnVuY3Rpb24odCl7SygiRXJyb3IgaW4gaW5wdXRWYWx1ZSBwcm9taXNlOiAiLmNvbmNhdCh0KSksby52YWx1ZT0iIixydChvKSxvLmZvY3VzKCksZS5oaWRlTG9hZGluZygpfSl9LG5uPXtzZWxlY3Q6ZnVuY3Rpb24odCxlLGkpe2Z1bmN0aW9uIG8odCxlLG4pe3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpO28udmFsdWU9bixVKG8sZSksby5zZWxlY3RlZD1ybihuLGkuaW5wdXRWYWx1ZSksdC5hcHBlbmRDaGlsZChvKX12YXIgcj15dCh0LCQuc2VsZWN0KTtlLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGUsbj10WzBdLHQ9dFsxXTtBcnJheS5pc0FycmF5KHQpPygoZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRncm91cCIpKS5sYWJlbD1uLGUuZGlzYWJsZWQ9ITEsci5hcHBlbmRDaGlsZChlKSx0LmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG8oZSx0WzFdLHRbMF0pfSkpOm8ocix0LG4pfSksci5mb2N1cygpfSxyYWRpbzpmdW5jdGlvbih0LGUsaSl7dmFyIHI9eXQodCwkLnJhZGlvKTtlLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9dFswXSxuPXRbMV0sbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTtvLnR5cGU9InJhZGlvIixvLm5hbWU9JC5yYWRpbyxvLnZhbHVlPWUscm4oZSxpLmlucHV0VmFsdWUpJiYoby5jaGVja2VkPSEwKTtlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtVKGUsbiksZS5jbGFzc05hbWU9JC5sYWJlbCx0LmFwcGVuZENoaWxkKG8pLHQuYXBwZW5kQ2hpbGQoZSksci5hcHBlbmRDaGlsZCh0KX0pO2U9ci5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCIpO2UubGVuZ3RoJiZlWzBdLmZvY3VzKCl9fSxvbj1mdW5jdGlvbiBuKG8pe3ZhciBpPVtdO3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgTWFwJiZvIGluc3RhbmNlb2YgTWFwP28uZm9yRWFjaChmdW5jdGlvbih0LGUpeyJvYmplY3QiPT09cih0KSYmKHQ9bih0KSksaS5wdXNoKFtlLHRdKX0pOk9iamVjdC5rZXlzKG8pLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9b1t0XTsib2JqZWN0Ij09PXIoZSkmJihlPW4oZSkpLGkucHVzaChbdCxlXSl9KSxpfSxybj1mdW5jdGlvbih0LGUpe3JldHVybiBlJiZlLnRvU3RyaW5nKCk9PT10LnRvU3RyaW5nKCl9LGFuPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbz1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0SW5wdXQoKTtpZighbilyZXR1cm4gbnVsbDtzd2l0Y2goZS5pbnB1dCl7Y2FzZSJjaGVja2JveCI6cmV0dXJuICRlKG4pO2Nhc2UicmFkaW8iOnJldHVybiBYZShuKTtjYXNlImZpbGUiOnJldHVybiBHZShuKTtkZWZhdWx0OnJldHVybiBlLmlucHV0QXV0b1RyaW0/bi52YWx1ZS50cmltKCk6bi52YWx1ZX19KHQsZSk7ZS5pbnB1dFZhbGlkYXRvcj9zbih0LGUsbyk6dC5nZXRJbnB1dCgpLmNoZWNrVmFsaWRpdHkoKT8oImRlbnkiPT09bj91bjpjbikodCxlLG8pOih0LmVuYWJsZUJ1dHRvbnMoKSx0LnNob3dWYWxpZGF0aW9uTWVzc2FnZShlLnZhbGlkYXRpb25NZXNzYWdlKSl9LHNuPWZ1bmN0aW9uKGUsbixvKXtlLmRpc2FibGVJbnB1dCgpLFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4geShuLmlucHV0VmFsaWRhdG9yKG8sbi52YWxpZGF0aW9uTWVzc2FnZSkpfSkudGhlbihmdW5jdGlvbih0KXtlLmVuYWJsZUJ1dHRvbnMoKSxlLmVuYWJsZUlucHV0KCksdD9lLnNob3dWYWxpZGF0aW9uTWVzc2FnZSh0KTpjbihlLG4sbyl9KX0sdW49ZnVuY3Rpb24oZSx0LG4pe3Quc2hvd0xvYWRlck9uRGVueSYmSnQoTCgpKSx0LnByZURlbnk/UHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiB5KHQucHJlRGVueShuLHQudmFsaWRhdGlvbk1lc3NhZ2UpKX0pLnRoZW4oZnVuY3Rpb24odCl7ITE9PT10P2UuaGlkZUxvYWRpbmcoKTplLmNsb3NlUG9wdXAoe2lzRGVuaWVkOiEwLHZhbHVlOnZvaWQgMD09PXQ/bjp0fSl9KTplLmNsb3NlUG9wdXAoe2lzRGVuaWVkOiEwLHZhbHVlOm59KX0sY249ZnVuY3Rpb24oZSx0LG4pe3Quc2hvd0xvYWRlck9uQ29uZmlybSYmSnQoKSx0LnByZUNvbmZpcm0/KGUucmVzZXRWYWxpZGF0aW9uTWVzc2FnZSgpLFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4geSh0LnByZUNvbmZpcm0obix0LnZhbGlkYXRpb25NZXNzYWdlKSl9KS50aGVuKGZ1bmN0aW9uKHQpe3d0KFMoKSl8fCExPT09dD9lLmhpZGVMb2FkaW5nKCk6SWUoZSx2b2lkIDA9PT10P246dCl9KSk6SWUoZSxuKX0sbG49WyJBcnJvd1JpZ2h0IiwiQXJyb3dEb3duIiwiUmlnaHQiLCJEb3duIl0sZG49WyJBcnJvd0xlZnQiLCJBcnJvd1VwIiwiTGVmdCIsIlVwIl0scG49WyJFc2NhcGUiLCJFc2MiXSxmbj1mdW5jdGlvbih0LGUsbil7dmFyIG89VHQuaW5uZXJQYXJhbXMuZ2V0KHQpO28mJihvLnN0b3BLZXlkb3duUHJvcGFnYXRpb24mJmUuc3RvcFByb3BhZ2F0aW9uKCksIkVudGVyIj09PWUua2V5P21uKHQsZSxvKToiVGFiIj09PWUua2V5P2huKGUsbyk6LTEhPT1bXS5jb25jYXQobG4sZG4pLmluZGV4T2YoZS5rZXkpP2duKGUua2V5KTotMSE9PXBuLmluZGV4T2YoZS5rZXkpJiZ2bihlLG8sbikpfSxtbj1mdW5jdGlvbih0LGUsbil7ZS5pc0NvbXBvc2luZ3x8ZS50YXJnZXQmJnQuZ2V0SW5wdXQoKSYmZS50YXJnZXQub3V0ZXJIVE1MPT09dC5nZXRJbnB1dCgpLm91dGVySFRNTCYmLTE9PT1bInRleHRhcmVhIiwiZmlsZSJdLmluZGV4T2Yobi5pbnB1dCkmJihGdCgpLGUucHJldmVudERlZmF1bHQoKSl9LGhuPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQudGFyZ2V0LG89UigpLGk9LTEscj0wO3I8by5sZW5ndGg7cisrKWlmKG49PT1vW3JdKXtpPXI7YnJlYWt9dC5zaGlmdEtleT9IZSgwLGksLTEpOkhlKDAsaSwxKSx0LnN0b3BQcm9wYWdhdGlvbigpLHQucHJldmVudERlZmF1bHQoKX0sZ249ZnVuY3Rpb24odCl7LTEhPT1bVCgpLEwoKSxxKCldLmluZGV4T2YoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkmJih0PS0xIT09bG4uaW5kZXhPZih0KT8ibmV4dEVsZW1lbnRTaWJsaW5nIjoicHJldmlvdXNFbGVtZW50U2libGluZyIsKHQ9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudFt0XSkmJnQuZm9jdXMoKSl9LHZuPWZ1bmN0aW9uKHQsZSxuKXtaKGUuYWxsb3dFc2NhcGVLZXkpJiYodC5wcmV2ZW50RGVmYXVsdCgpLG4oUS5lc2MpKX0sYm49ZnVuY3Rpb24oZSx0LG4pe3QucG9wdXAub25jbGljaz1mdW5jdGlvbigpe3ZhciB0PVR0LmlubmVyUGFyYW1zLmdldChlKTt0LnNob3dDb25maXJtQnV0dG9ufHx0LnNob3dEZW55QnV0dG9ufHx0LnNob3dDYW5jZWxCdXR0b258fHQuc2hvd0Nsb3NlQnV0dG9ufHx0LnRpbWVyfHx0LmlucHV0fHxuKFEuY2xvc2UpfX0seW49ITEsd249ZnVuY3Rpb24oZSl7ZS5wb3B1cC5vbm1vdXNlZG93bj1mdW5jdGlvbigpe2UuY29udGFpbmVyLm9ubW91c2V1cD1mdW5jdGlvbih0KXtlLmNvbnRhaW5lci5vbm1vdXNldXA9dm9pZCAwLHQudGFyZ2V0PT09ZS5jb250YWluZXImJih5bj0hMCl9fX0sQ249ZnVuY3Rpb24oZSl7ZS5jb250YWluZXIub25tb3VzZWRvd249ZnVuY3Rpb24oKXtlLnBvcHVwLm9ubW91c2V1cD1mdW5jdGlvbih0KXtlLnBvcHVwLm9ubW91c2V1cD12b2lkIDAsdC50YXJnZXQhPT1lLnBvcHVwJiYhZS5wb3B1cC5jb250YWlucyh0LnRhcmdldCl8fCh5bj0hMCl9fX0sa249ZnVuY3Rpb24obixvLGkpe28uY29udGFpbmVyLm9uY2xpY2s9ZnVuY3Rpb24odCl7dmFyIGU9VHQuaW5uZXJQYXJhbXMuZ2V0KG4pO3luP3luPSExOnQudGFyZ2V0PT09by5jb250YWluZXImJlooZS5hbGxvd091dHNpZGVDbGljaykmJmkoUS5iYWNrZHJvcCl9fTtmdW5jdGlvbiBBbih0LGUpe3ZhciBuPWZ1bmN0aW9uKHQpe3Q9InN0cmluZyI9PXR5cGVvZiB0LnRlbXBsYXRlP2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodC50ZW1wbGF0ZSk6dC50ZW1wbGF0ZTtpZighdClyZXR1cm57fTt0PXQuY29udGVudHx8dDtyZXR1cm4gV2UodCksdShSZSh0KSxOZSh0KSxVZSh0KSxGZSh0KSxfZSh0KSx6ZSh0LFZlKSl9KHQpO3JldHVybihuPXUoe30sc2UsZSxuLHQpKS5zaG93Q2xhc3M9dSh7fSxzZS5zaG93Q2xhc3Msbi5zaG93Q2xhc3MpLG4uaGlkZUNsYXNzPXUoe30sc2UuaGlkZUNsYXNzLG4uaGlkZUNsYXNzKSwhMT09PXQuYW5pbWF0aW9uJiYobi5zaG93Q2xhc3M9e3BvcHVwOiJzd2FsMi1ub2FuaW1hdGlvbiIsYmFja2Ryb3A6InN3YWwyLW5vYW5pbWF0aW9uIn0sbi5oaWRlQ2xhc3M9e30pLG59ZnVuY3Rpb24geG4oYSxzLHUpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe2EuY2xvc2VQb3B1cCh7aXNEaXNtaXNzZWQ6ITAsZGlzbWlzczp0fSl9dmFyIG4sbyxpLHI7Q2Uuc3dhbFByb21pc2VSZXNvbHZlLnNldChhLHQpLHMuY29uZmlybUJ1dHRvbi5vbmNsaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIGU9dSwodD1hKS5kaXNhYmxlQnV0dG9ucygpLHZvaWQoZS5pbnB1dD9hbih0LGUsImNvbmZpcm0iKTpjbih0LGUsITApKTt2YXIgdCxlfSxzLmRlbnlCdXR0b24ub25jbGljaz1mdW5jdGlvbigpe3JldHVybiBlPXUsKHQ9YSkuZGlzYWJsZUJ1dHRvbnMoKSx2b2lkKGUucmV0dXJuSW5wdXRWYWx1ZU9uRGVueT9hbih0LGUsImRlbnkiKTp1bih0LGUsITEpKTt2YXIgdCxlfSxzLmNhbmNlbEJ1dHRvbi5vbmNsaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHQ9ZSxhLmRpc2FibGVCdXR0b25zKCksdm9pZCB0KFEuY2FuY2VsKTt2YXIgdH0scy5jbG9zZUJ1dHRvbi5vbmNsaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIGUoUS5jbG9zZSl9LG49YSxyPXMsdD1lLFR0LmlubmVyUGFyYW1zLmdldChuKS50b2FzdD9ibihuLHIsdCk6KHduKHIpLENuKHIpLGtuKG4scix0KSksbz1hLHI9dSxpPWUsKHQ9dGUpLmtleWRvd25UYXJnZXQmJnQua2V5ZG93bkhhbmRsZXJBZGRlZCYmKHQua2V5ZG93blRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIix0LmtleWRvd25IYW5kbGVyLHtjYXB0dXJlOnQua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZX0pLHQua2V5ZG93bkhhbmRsZXJBZGRlZD0hMSksci50b2FzdHx8KHQua2V5ZG93bkhhbmRsZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGZuKG8sdCxpKX0sdC5rZXlkb3duVGFyZ2V0PXIua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZT93aW5kb3c6QSgpLHQua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZT1yLmtleWRvd25MaXN0ZW5lckNhcHR1cmUsdC5rZXlkb3duVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLHQua2V5ZG93bkhhbmRsZXIse2NhcHR1cmU6dC5rZXlkb3duTGlzdGVuZXJDYXB0dXJlfSksdC5rZXlkb3duSGFuZGxlckFkZGVkPSEwKSxyPWEsInNlbGVjdCI9PT0odD11KS5pbnB1dHx8InJhZGlvIj09PXQuaW5wdXQ/dG4ocix0KTotMSE9PVsidGV4dCIsImVtYWlsIiwibnVtYmVyIiwidGVsIiwidGV4dGFyZWEiXS5pbmRleE9mKHQuaW5wdXQpJiYoYih0LmlucHV0VmFsdWUpfHx3KHQuaW5wdXRWYWx1ZSkpJiZlbihyLHQpLGplKHUpLFBuKHRlLHUsZSksT24ocyx1KSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy5jb250YWluZXIuc2Nyb2xsVG9wPTB9KX0pfWZ1bmN0aW9uIEJuKHQpe3ZhciBlPXtwb3B1cDpBKCksY29udGFpbmVyOmsoKSxjb250ZW50OlAoKSxhY3Rpb25zOmooKSxjb25maXJtQnV0dG9uOlQoKSxkZW55QnV0dG9uOkwoKSxjYW5jZWxCdXR0b246cSgpLGxvYWRlcjpEKCksY2xvc2VCdXR0b246VigpLHZhbGlkYXRpb25NZXNzYWdlOlMoKSxwcm9ncmVzc1N0ZXBzOm4oKX07cmV0dXJuIFR0LmRvbUNhY2hlLnNldCh0LGUpLGV9dmFyIFBuPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbz1IKCk7YXQobyksZS50aW1lciYmKHQudGltZW91dD1uZXcgTGUoZnVuY3Rpb24oKXtuKCJ0aW1lciIpLGRlbGV0ZSB0LnRpbWVvdXR9LGUudGltZXIpLGUudGltZXJQcm9ncmVzc0JhciYmKHJ0KG8pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnRpbWVvdXQmJnQudGltZW91dC5ydW5uaW5nJiZkdChlLnRpbWVyKX0pKSl9LE9uPWZ1bmN0aW9uKHQsZSl7aWYoIWUudG9hc3QpcmV0dXJuIFooZS5hbGxvd0VudGVyS2V5KT92b2lkKEVuKHQsZSl8fEhlKDAsLTEsMSkpOlNuKCl9LEVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZm9jdXNEZW55JiZ3dCh0LmRlbnlCdXR0b24pPyh0LmRlbnlCdXR0b24uZm9jdXMoKSwhMCk6ZS5mb2N1c0NhbmNlbCYmd3QodC5jYW5jZWxCdXR0b24pPyh0LmNhbmNlbEJ1dHRvbi5mb2N1cygpLCEwKTohKCFlLmZvY3VzQ29uZmlybXx8IXd0KHQuY29uZmlybUJ1dHRvbikpJiYodC5jb25maXJtQnV0dG9uLmZvY3VzKCksITApfSxTbj1mdW5jdGlvbigpe2RvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJiJmdW5jdGlvbiI9PXR5cGVvZiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXImJmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpfTtmdW5jdGlvbiBUbih0KXsiZnVuY3Rpb24iPT10eXBlb2YgdC5kaWREZXN0cm95P3QuZGlkRGVzdHJveSgpOiJmdW5jdGlvbiI9PXR5cGVvZiB0Lm9uRGVzdHJveSYmdC5vbkRlc3Ryb3koKX1mdW5jdGlvbiBMbih0KXtkZWxldGUgdC5wYXJhbXMsZGVsZXRlIHRlLmtleWRvd25IYW5kbGVyLGRlbGV0ZSB0ZS5rZXlkb3duVGFyZ2V0LHFuKFR0KSxxbihDZSl9dmFyIERuLHFuPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KXRbZV09bmV3IFdlYWtNYXB9LEo9T2JqZWN0LmZyZWV6ZSh7aGlkZUxvYWRpbmc6cGUsZGlzYWJsZUxvYWRpbmc6cGUsZ2V0SW5wdXQ6ZnVuY3Rpb24odCl7dmFyIGU9VHQuaW5uZXJQYXJhbXMuZ2V0KHR8fHRoaXMpO3JldHVybih0PVR0LmRvbUNhY2hlLmdldCh0fHx0aGlzKSk/ZXQodC5jb250ZW50LGUuaW5wdXQpOm51bGx9LGNsb3NlOkFlLGNsb3NlUG9wdXA6QWUsY2xvc2VNb2RhbDpBZSxjbG9zZVRvYXN0OkFlLGVuYWJsZUJ1dHRvbnM6ZnVuY3Rpb24oKXtTZSh0aGlzLFsiY29uZmlybUJ1dHRvbiIsImRlbnlCdXR0b24iLCJjYW5jZWxCdXR0b24iXSwhMSl9LGRpc2FibGVCdXR0b25zOmZ1bmN0aW9uKCl7U2UodGhpcyxbImNvbmZpcm1CdXR0b24iLCJkZW55QnV0dG9uIiwiY2FuY2VsQnV0dG9uIl0sITApfSxlbmFibGVJbnB1dDpmdW5jdGlvbigpe3JldHVybiBUZSh0aGlzLmdldElucHV0KCksITEpfSxkaXNhYmxlSW5wdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gVGUodGhpcy5nZXRJbnB1dCgpLCEwKX0sc2hvd1ZhbGlkYXRpb25NZXNzYWdlOmZ1bmN0aW9uKHQpe3ZhciBlPVR0LmRvbUNhY2hlLmdldCh0aGlzKSxuPVR0LmlubmVyUGFyYW1zLmdldCh0aGlzKTtVKGUudmFsaWRhdGlvbk1lc3NhZ2UsdCksZS52YWxpZGF0aW9uTWVzc2FnZS5jbGFzc05hbWU9JFsidmFsaWRhdGlvbi1tZXNzYWdlIl0sbi5jdXN0b21DbGFzcyYmbi5jdXN0b21DbGFzcy52YWxpZGF0aW9uTWVzc2FnZSYmdnQoZS52YWxpZGF0aW9uTWVzc2FnZSxuLmN1c3RvbUNsYXNzLnZhbGlkYXRpb25NZXNzYWdlKSxydChlLnZhbGlkYXRpb25NZXNzYWdlKSwoZT10aGlzLmdldElucHV0KCkpJiYoZS5zZXRBdHRyaWJ1dGUoImFyaWEtaW52YWxpZCIsITApLGUuc2V0QXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZEJ5IiwkWyJ2YWxpZGF0aW9uLW1lc3NhZ2UiXSksbnQoZSksdnQoZSwkLmlucHV0ZXJyb3IpKX0scmVzZXRWYWxpZGF0aW9uTWVzc2FnZTpmdW5jdGlvbigpe3ZhciB0PVR0LmRvbUNhY2hlLmdldCh0aGlzKTt0LnZhbGlkYXRpb25NZXNzYWdlJiZhdCh0LnZhbGlkYXRpb25NZXNzYWdlKSwodD10aGlzLmdldElucHV0KCkpJiYodC5yZW1vdmVBdHRyaWJ1dGUoImFyaWEtaW52YWxpZCIpLHQucmVtb3ZlQXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZEJ5IiksYnQodCwkLmlucHV0ZXJyb3IpKX0sZ2V0UHJvZ3Jlc3NTdGVwczpmdW5jdGlvbigpe3JldHVybiBUdC5kb21DYWNoZS5nZXQodGhpcykucHJvZ3Jlc3NTdGVwc30sX21haW46ZnVuY3Rpb24odCl7dmFyIGU9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVybiBhZSh1KHt9LGUsdCkpLHRlLmN1cnJlbnRJbnN0YW5jZSYmdGUuY3VycmVudEluc3RhbmNlLl9kZXN0cm95KCksdGUuY3VycmVudEluc3RhbmNlPXRoaXMscWUodD1Bbih0LGUpKSxPYmplY3QuZnJlZXplKHQpLHRlLnRpbWVvdXQmJih0ZS50aW1lb3V0LnN0b3AoKSxkZWxldGUgdGUudGltZW91dCksY2xlYXJUaW1lb3V0KHRlLnJlc3RvcmVGb2N1c1RpbWVvdXQpLGU9Qm4odGhpcyksVXQodGhpcyx0KSxUdC5pbm5lclBhcmFtcy5zZXQodGhpcyx0KSx4bih0aGlzLGUsdCl9LHVwZGF0ZTpmdW5jdGlvbihlKXt2YXIgdD1BKCksbj1UdC5pbm5lclBhcmFtcy5nZXQodGhpcyk7aWYoIXR8fEYodCxuLmhpZGVDbGFzcy5wb3B1cCkpcmV0dXJuIFcoIllvdSdyZSB0cnlpbmcgdG8gdXBkYXRlIHRoZSBjbG9zZWQgb3IgY2xvc2luZyBwb3B1cCwgdGhhdCB3b24ndCB3b3JrLiBVc2UgdGhlIHVwZGF0ZSgpIG1ldGhvZCBpbiBwcmVDb25maXJtIHBhcmFtZXRlciBvciBzaG93IGEgbmV3IHBvcHVwLiIpO3ZhciBvPXt9O09iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24odCl7TW4uaXNVcGRhdGFibGVQYXJhbWV0ZXIodCk/b1t0XT1lW3RdOlcoJ0ludmFsaWQgcGFyYW1ldGVyIHRvIHVwZGF0ZTogIicuY29uY2F0KHQsJyIuIFVwZGF0YWJsZSBwYXJhbXMgYXJlIGxpc3RlZCBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vc3dlZXRhbGVydDIvc3dlZXRhbGVydDIvYmxvYi9tYXN0ZXIvc3JjL3V0aWxzL3BhcmFtcy5qc1xuXG5JZiB5b3UgdGhpbmsgdGhpcyBwYXJhbWV0ZXIgc2hvdWxkIGJlIHVwZGF0YWJsZSwgcmVxdWVzdCBpdCBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vc3dlZXRhbGVydDIvc3dlZXRhbGVydDIvaXNzdWVzL25ldz90ZW1wbGF0ZT0wMl9mZWF0dXJlX3JlcXVlc3QubWQnKSl9KSxuPXUoe30sbixvKSxVdCh0aGlzLG4pLFR0LmlubmVyUGFyYW1zLnNldCh0aGlzLG4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3BhcmFtczp7dmFsdWU6dSh7fSx0aGlzLnBhcmFtcyxlKSx3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwfX0pfSxfZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0PVR0LmRvbUNhY2hlLmdldCh0aGlzKSxlPVR0LmlubmVyUGFyYW1zLmdldCh0aGlzKTtlJiYodC5wb3B1cCYmdGUuc3dhbENsb3NlRXZlbnRGaW5pc2hlZENhbGxiYWNrJiYodGUuc3dhbENsb3NlRXZlbnRGaW5pc2hlZENhbGxiYWNrKCksZGVsZXRlIHRlLnN3YWxDbG9zZUV2ZW50RmluaXNoZWRDYWxsYmFjayksdGUuZGVmZXJEaXNwb3NhbFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRlLmRlZmVyRGlzcG9zYWxUaW1lciksZGVsZXRlIHRlLmRlZmVyRGlzcG9zYWxUaW1lciksVG4oZSksTG4odGhpcykpfX0pLGpuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaSgpe2lmKGEodGhpcyxpKSwidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyl7InVuZGVmaW5lZCI9PXR5cGVvZiBQcm9taXNlJiZLKCJUaGlzIHBhY2thZ2UgcmVxdWlyZXMgYSBQcm9taXNlIGxpYnJhcnksIHBsZWFzZSBpbmNsdWRlIGEgc2hpbSB0byBlbmFibGUgaXQgaW4gdGhpcyBicm93c2VyIChTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9zd2VldGFsZXJ0Mi9zd2VldGFsZXJ0Mi93aWtpL01pZ3JhdGlvbi1mcm9tLVN3ZWV0QWxlcnQtdG8tU3dlZXRBbGVydDIjMS1pZS1zdXBwb3J0KSIpLERuPXRoaXM7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1uZXcgQXJyYXkodCksbj0wO248dDtuKyspZVtuXT1hcmd1bWVudHNbbl07dmFyIG89T2JqZWN0LmZyZWV6ZSh0aGlzLmNvbnN0cnVjdG9yLmFyZ3NUb1BhcmFtcyhlKSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7cGFyYW1zOnt2YWx1ZTpvLHdyaXRhYmxlOiExLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pO289dGhpcy5fbWFpbih0aGlzLnBhcmFtcyk7VHQucHJvbWlzZS5zZXQodGhpcyxvKX19cmV0dXJuIHMoaSxbe2tleToidGhlbiIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIFR0LnByb21pc2UuZ2V0KHRoaXMpLnRoZW4odCl9fSx7a2V5OiJmaW5hbGx5Iix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gVHQucHJvbWlzZS5nZXQodGhpcykuZmluYWxseSh0KX19XSksaX0oKTt1KGpuLnByb3RvdHlwZSxKKSx1KGpuLGRlKSxPYmplY3Qua2V5cyhKKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2puW3RdPWZ1bmN0aW9uKCl7aWYoRG4pcmV0dXJuIERuW3RdLmFwcGx5KERuLGFyZ3VtZW50cyl9fSksam4uRGlzbWlzc1JlYXNvbj1RLGpuLnZlcnNpb249IjEwLjE2LjYiO3ZhciBNbj1qbjtyZXR1cm4gTW4uZGVmYXVsdD1Nbn0pLHZvaWQgMCE9PXRoaXMmJnRoaXMuU3dlZXRhbGVydDImJih0aGlzLnN3YWw9dGhpcy5zd2VldEFsZXJ0PXRoaXMuU3dhbD10aGlzLlN3ZWV0QWxlcnQ9dGhpcy5Td2VldGFsZXJ0Mik7CiJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQmJmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2lmKGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZChuKSxuLnN0eWxlU2hlZXQpbi5zdHlsZVNoZWV0LmRpc2FibGVkfHwobi5zdHlsZVNoZWV0LmNzc1RleHQ9dCk7ZWxzZSB0cnl7bi5pbm5lckhUTUw9dH1jYXRjaChlKXtuLmlubmVyVGV4dD10fX0oZG9jdW1lbnQsIi5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdHtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6c3RyZXRjaDt3aWR0aDphdXRvO3BhZGRpbmc6MS4yNWVtO292ZXJmbG93LXk6aGlkZGVuO2JhY2tncm91bmQ6I2ZmZjtib3gtc2hhZG93OjAgMCAuNjI1ZW0gI2Q5ZDlkOX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWhlYWRlcntmbGV4LWRpcmVjdGlvbjpyb3c7cGFkZGluZzowfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItdGl0bGV7ZmxleC1ncm93OjE7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQ7bWFyZ2luOjAgLjYyNWVtO2ZvbnQtc2l6ZToxZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1sb2FkaW5ne2p1c3RpZnktY29udGVudDpjZW50ZXJ9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1pbnB1dHtoZWlnaHQ6MmVtO21hcmdpbjouMzEyNWVtIGF1dG87Zm9udC1zaXplOjFlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXZhbGlkYXRpb24tbWVzc2FnZXtmb250LXNpemU6MWVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItZm9vdGVye21hcmdpbjouNWVtIDAgMDtwYWRkaW5nOi41ZW0gMCAwO2ZvbnQtc2l6ZTouOGVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItY2xvc2V7cG9zaXRpb246c3RhdGljO3dpZHRoOi44ZW07aGVpZ2h0Oi44ZW07bGluZS1oZWlnaHQ6Ljh9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1jb250ZW50e2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0O21hcmdpbjowIC42MjVlbTtwYWRkaW5nOjA7Zm9udC1zaXplOjFlbTt0ZXh0LWFsaWduOmluaXRpYWx9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1odG1sLWNvbnRhaW5lcntwYWRkaW5nOi42MjVlbSAwIDB9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1odG1sLWNvbnRhaW5lcjplbXB0eXtwYWRkaW5nOjB9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1pY29ue3dpZHRoOjJlbTttaW4td2lkdGg6MmVtO2hlaWdodDoyZW07bWFyZ2luOjAgLjVlbSAwIDB9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1pY29uIC5zd2FsMi1pY29uLWNvbnRlbnR7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtmb250LXNpemU6MS44ZW07Zm9udC13ZWlnaHQ6NzAwfUBtZWRpYSBhbGwgYW5kICgtbXMtaGlnaC1jb250cmFzdDpub25lKSwoLW1zLWhpZ2gtY29udHJhc3Q6YWN0aXZlKXsuc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWljb24gLnN3YWwyLWljb24tY29udGVudHtmb250LXNpemU6LjI1ZW19fS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIC5zd2FsMi1zdWNjZXNzLXJpbmd7d2lkdGg6MmVtO2hlaWdodDoyZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1pY29uLnN3YWwyLWVycm9yIFtjbGFzc149c3dhbDIteC1tYXJrLWxpbmVde3RvcDouODc1ZW07d2lkdGg6MS4zNzVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWljb24uc3dhbDItZXJyb3IgW2NsYXNzXj1zd2FsMi14LW1hcmstbGluZV1bY2xhc3MkPWxlZnRde2xlZnQ6LjMxMjVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWljb24uc3dhbDItZXJyb3IgW2NsYXNzXj1zd2FsMi14LW1hcmstbGluZV1bY2xhc3MkPXJpZ2h0XXtyaWdodDouMzEyNWVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItYWN0aW9uc3tmbGV4OjE7ZmxleC1iYXNpczphdXRvIWltcG9ydGFudDthbGlnbi1zZWxmOnN0cmV0Y2g7d2lkdGg6YXV0bztoZWlnaHQ6Mi4yZW07aGVpZ2h0OmF1dG87bWFyZ2luOjAgLjMxMjVlbTttYXJnaW4tdG9wOi4zMTI1ZW07cGFkZGluZzowfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3R5bGVke21hcmdpbjouMTI1ZW0gLjMxMjVlbTtwYWRkaW5nOi4zMTI1ZW0gLjYyNWVtO2ZvbnQtc2l6ZToxZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdHlsZWQ6Zm9jdXN7Ym94LXNoYWRvdzowIDAgMCAxcHggI2ZmZiwwIDAgMCAzcHggcmdiYSgxMDAsMTUwLDIwMCwuNSl9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdWNjZXNze2JvcmRlci1jb2xvcjojYTVkYzg2fS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtY2lyY3VsYXItbGluZV17cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MS42ZW07aGVpZ2h0OjNlbTt0cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKTtib3JkZXItcmFkaXVzOjUwJX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmVdW2NsYXNzJD1sZWZ0XXt0b3A6LS44ZW07bGVmdDotLjVlbTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7dHJhbnNmb3JtLW9yaWdpbjoyZW0gMmVtO2JvcmRlci1yYWRpdXM6NGVtIDAgMCA0ZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lXVtjbGFzcyQ9cmlnaHRde3RvcDotLjI1ZW07bGVmdDouOTM3NWVtO3RyYW5zZm9ybS1vcmlnaW46MCAxLjVlbTtib3JkZXItcmFkaXVzOjAgNGVtIDRlbSAwfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2VzcyAuc3dhbDItc3VjY2Vzcy1yaW5ne3dpZHRoOjJlbTtoZWlnaHQ6MmVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2VzcyAuc3dhbDItc3VjY2Vzcy1maXh7dG9wOjA7bGVmdDouNDM3NWVtO3dpZHRoOi40Mzc1ZW07aGVpZ2h0OjIuNjg3NWVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtbGluZV17aGVpZ2h0Oi4zMTI1ZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1saW5lXVtjbGFzcyQ9dGlwXXt0b3A6MS4xMjVlbTtsZWZ0Oi4xODc1ZW07d2lkdGg6Ljc1ZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1saW5lXVtjbGFzcyQ9bG9uZ117dG9wOi45Mzc1ZW07cmlnaHQ6LjE4NzVlbTt3aWR0aDoxLjM3NWVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2Vzcy5zd2FsMi1pY29uLXNob3cgLnN3YWwyLXN1Y2Nlc3MtbGluZS10aXB7LXdlYmtpdC1hbmltYXRpb246c3dhbDItdG9hc3QtYW5pbWF0ZS1zdWNjZXNzLWxpbmUtdGlwIC43NXM7YW5pbWF0aW9uOnN3YWwyLXRvYXN0LWFuaW1hdGUtc3VjY2Vzcy1saW5lLXRpcCAuNzVzfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2Vzcy5zd2FsMi1pY29uLXNob3cgLnN3YWwyLXN1Y2Nlc3MtbGluZS1sb25ney13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLXRvYXN0LWFuaW1hdGUtc3VjY2Vzcy1saW5lLWxvbmcgLjc1czthbmltYXRpb246c3dhbDItdG9hc3QtYW5pbWF0ZS1zdWNjZXNzLWxpbmUtbG9uZyAuNzVzfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdC5zd2FsMi1zaG93ey13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLXRvYXN0LXNob3cgLjVzO2FuaW1hdGlvbjpzd2FsMi10b2FzdC1zaG93IC41c30uc3dhbDItcG9wdXAuc3dhbDItdG9hc3Quc3dhbDItaGlkZXstd2Via2l0LWFuaW1hdGlvbjpzd2FsMi10b2FzdC1oaWRlIC4xcyBmb3J3YXJkczthbmltYXRpb246c3dhbDItdG9hc3QtaGlkZSAuMXMgZm9yd2FyZHN9LnN3YWwyLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7cG9zaXRpb246Zml4ZWQ7ei1pbmRleDoxMDYwO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO2ZsZXgtZGlyZWN0aW9uOnJvdzthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtwYWRkaW5nOi42MjVlbTtvdmVyZmxvdy14OmhpZGRlbjt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgLjFzOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNofS5zd2FsMi1jb250YWluZXIuc3dhbDItYmFja2Ryb3Atc2hvdywuc3dhbDItY29udGFpbmVyLnN3YWwyLW5vYW5pbWF0aW9ue2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNCl9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1iYWNrZHJvcC1oaWRle2JhY2tncm91bmQ6MCAwIWltcG9ydGFudH0uc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcHthbGlnbi1pdGVtczpmbGV4LXN0YXJ0fS5zd2FsMi1jb250YWluZXIuc3dhbDItdG9wLWxlZnQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3Atc3RhcnR7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydH0uc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1lbmQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtcmlnaHR7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmR9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXJ7YWxpZ24taXRlbXM6Y2VudGVyfS5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLWxlZnQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItc3RhcnR7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0fS5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLWVuZCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlci1yaWdodHthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kfS5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9te2FsaWduLWl0ZW1zOmZsZXgtZW5kfS5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWxlZnQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tc3RhcnR7YWxpZ24taXRlbXM6ZmxleC1lbmQ7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnR9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tZW5kLC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLXJpZ2h0e2FsaWduLWl0ZW1zOmZsZXgtZW5kO2p1c3RpZnktY29udGVudDpmbGV4LWVuZH0uc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1lbmQ+OmZpcnN0LWNoaWxkLC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWxlZnQ+OmZpcnN0LWNoaWxkLC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLXJpZ2h0PjpmaXJzdC1jaGlsZCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1zdGFydD46Zmlyc3QtY2hpbGQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20+OmZpcnN0LWNoaWxke21hcmdpbi10b3A6YXV0b30uc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctZnVsbHNjcmVlbj4uc3dhbDItbW9kYWx7ZGlzcGxheTpmbGV4IWltcG9ydGFudDtmbGV4OjE7YWxpZ24tc2VsZjpzdHJldGNoO2p1c3RpZnktY29udGVudDpjZW50ZXJ9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LXJvdz4uc3dhbDItbW9kYWx7ZGlzcGxheTpmbGV4IWltcG9ydGFudDtmbGV4OjE7YWxpZ24tY29udGVudDpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1ue2ZsZXg6MTtmbGV4LWRpcmVjdGlvbjpjb2x1bW59LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi1ib3R0b20sLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi1jZW50ZXIsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi10b3B7YWxpZ24taXRlbXM6Y2VudGVyfS5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItYm90dG9tLWxlZnQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi1ib3R0b20tc3RhcnQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi1jZW50ZXItbGVmdCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLWNlbnRlci1zdGFydCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLXRvcC1sZWZ0LC5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItdG9wLXN0YXJ0e2FsaWduLWl0ZW1zOmZsZXgtc3RhcnR9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi1ib3R0b20tZW5kLC5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItYm90dG9tLXJpZ2h0LC5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItY2VudGVyLWVuZCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLWNlbnRlci1yaWdodCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLXRvcC1lbmQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi10b3AtcmlnaHR7YWxpZ24taXRlbXM6ZmxleC1lbmR9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbj4uc3dhbDItbW9kYWx7ZGlzcGxheTpmbGV4IWltcG9ydGFudDtmbGV4OjE7YWxpZ24tY29udGVudDpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uc3dhbDItY29udGFpbmVyLnN3YWwyLW5vLXRyYW5zaXRpb257dHJhbnNpdGlvbjpub25lIWltcG9ydGFudH0uc3dhbDItY29udGFpbmVyOm5vdCguc3dhbDItdG9wKTpub3QoLnN3YWwyLXRvcC1zdGFydCk6bm90KC5zd2FsMi10b3AtZW5kKTpub3QoLnN3YWwyLXRvcC1sZWZ0KTpub3QoLnN3YWwyLXRvcC1yaWdodCk6bm90KC5zd2FsMi1jZW50ZXItc3RhcnQpOm5vdCguc3dhbDItY2VudGVyLWVuZCk6bm90KC5zd2FsMi1jZW50ZXItbGVmdCk6bm90KC5zd2FsMi1jZW50ZXItcmlnaHQpOm5vdCguc3dhbDItYm90dG9tKTpub3QoLnN3YWwyLWJvdHRvbS1zdGFydCk6bm90KC5zd2FsMi1ib3R0b20tZW5kKTpub3QoLnN3YWwyLWJvdHRvbS1sZWZ0KTpub3QoLnN3YWwyLWJvdHRvbS1yaWdodCk6bm90KC5zd2FsMi1ncm93LWZ1bGxzY3JlZW4pPi5zd2FsMi1tb2RhbHttYXJnaW46YXV0b31AbWVkaWEgYWxsIGFuZCAoLW1zLWhpZ2gtY29udHJhc3Q6bm9uZSksKC1tcy1oaWdoLWNvbnRyYXN0OmFjdGl2ZSl7LnN3YWwyLWNvbnRhaW5lciAuc3dhbDItbW9kYWx7bWFyZ2luOjAhaW1wb3J0YW50fX0uc3dhbDItcG9wdXB7ZGlzcGxheTpub25lO3Bvc2l0aW9uOnJlbGF0aXZlO2JveC1zaXppbmc6Ym9yZGVyLWJveDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcjt3aWR0aDozMmVtO21heC13aWR0aDoxMDAlO3BhZGRpbmc6MS4yNWVtO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQ6I2ZmZjtmb250LWZhbWlseTppbmhlcml0O2ZvbnQtc2l6ZToxcmVtfS5zd2FsMi1wb3B1cDpmb2N1c3tvdXRsaW5lOjB9LnN3YWwyLXBvcHVwLnN3YWwyLWxvYWRpbmd7b3ZlcmZsb3cteTpoaWRkZW59LnN3YWwyLWhlYWRlcntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmNlbnRlcjtwYWRkaW5nOjAgMS44ZW19LnN3YWwyLXRpdGxle3Bvc2l0aW9uOnJlbGF0aXZlO21heC13aWR0aDoxMDAlO21hcmdpbjowIDAgLjRlbTtwYWRkaW5nOjA7Y29sb3I6IzU5NTk1OTtmb250LXNpemU6MS44NzVlbTtmb250LXdlaWdodDo2MDA7dGV4dC1hbGlnbjpjZW50ZXI7dGV4dC10cmFuc2Zvcm06bm9uZTt3b3JkLXdyYXA6YnJlYWstd29yZH0uc3dhbDItYWN0aW9uc3tkaXNwbGF5OmZsZXg7ei1pbmRleDoxO2JveC1zaXppbmc6Ym9yZGVyLWJveDtmbGV4LXdyYXA6d3JhcDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjt3aWR0aDoxMDAlO21hcmdpbjoxLjI1ZW0gYXV0byAwO3BhZGRpbmc6MH0uc3dhbDItYWN0aW9uczpub3QoLnN3YWwyLWxvYWRpbmcpIC5zd2FsMi1zdHlsZWRbZGlzYWJsZWRde29wYWNpdHk6LjR9LnN3YWwyLWFjdGlvbnM6bm90KC5zd2FsMi1sb2FkaW5nKSAuc3dhbDItc3R5bGVkOmhvdmVye2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHJnYmEoMCwwLDAsLjEpLHJnYmEoMCwwLDAsLjEpKX0uc3dhbDItYWN0aW9uczpub3QoLnN3YWwyLWxvYWRpbmcpIC5zd2FsMi1zdHlsZWQ6YWN0aXZle2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHJnYmEoMCwwLDAsLjIpLHJnYmEoMCwwLDAsLjIpKX0uc3dhbDItbG9hZGVye2Rpc3BsYXk6bm9uZTthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjt3aWR0aDoyLjJlbTtoZWlnaHQ6Mi4yZW07bWFyZ2luOjAgMS44NzVlbTstd2Via2l0LWFuaW1hdGlvbjpzd2FsMi1yb3RhdGUtbG9hZGluZyAxLjVzIGxpbmVhciAwcyBpbmZpbml0ZSBub3JtYWw7YW5pbWF0aW9uOnN3YWwyLXJvdGF0ZS1sb2FkaW5nIDEuNXMgbGluZWFyIDBzIGluZmluaXRlIG5vcm1hbDtib3JkZXItd2lkdGg6LjI1ZW07Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci1yYWRpdXM6MTAwJTtib3JkZXItY29sb3I6IzI3NzhjNCB0cmFuc3BhcmVudCAjMjc3OGM0IHRyYW5zcGFyZW50fS5zd2FsMi1zdHlsZWR7bWFyZ2luOi4zMTI1ZW07cGFkZGluZzouNjI1ZW0gMS4xZW07Ym94LXNoYWRvdzpub25lO2ZvbnQtd2VpZ2h0OjUwMH0uc3dhbDItc3R5bGVkOm5vdChbZGlzYWJsZWRdKXtjdXJzb3I6cG9pbnRlcn0uc3dhbDItc3R5bGVkLnN3YWwyLWNvbmZpcm17Ym9yZGVyOjA7Ym9yZGVyLXJhZGl1czouMjVlbTtiYWNrZ3JvdW5kOmluaXRpYWw7YmFja2dyb3VuZC1jb2xvcjojMjc3OGM0O2NvbG9yOiNmZmY7Zm9udC1zaXplOjFlbX0uc3dhbDItc3R5bGVkLnN3YWwyLWRlbnl7Ym9yZGVyOjA7Ym9yZGVyLXJhZGl1czouMjVlbTtiYWNrZ3JvdW5kOmluaXRpYWw7YmFja2dyb3VuZC1jb2xvcjojZDE0NTI5O2NvbG9yOiNmZmY7Zm9udC1zaXplOjFlbX0uc3dhbDItc3R5bGVkLnN3YWwyLWNhbmNlbHtib3JkZXI6MDtib3JkZXItcmFkaXVzOi4yNWVtO2JhY2tncm91bmQ6aW5pdGlhbDtiYWNrZ3JvdW5kLWNvbG9yOiM3NTc1NzU7Y29sb3I6I2ZmZjtmb250LXNpemU6MWVtfS5zd2FsMi1zdHlsZWQ6Zm9jdXN7b3V0bGluZTowO2JveC1zaGFkb3c6MCAwIDAgM3B4IHJnYmEoMTAwLDE1MCwyMDAsLjUpfS5zd2FsMi1zdHlsZWQ6Oi1tb3otZm9jdXMtaW5uZXJ7Ym9yZGVyOjB9LnN3YWwyLWZvb3RlcntqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbjoxLjI1ZW0gMCAwO3BhZGRpbmc6MWVtIDAgMDtib3JkZXItdG9wOjFweCBzb2xpZCAjZWVlO2NvbG9yOiM1NDU0NTQ7Zm9udC1zaXplOjFlbX0uc3dhbDItdGltZXItcHJvZ3Jlc3MtYmFyLWNvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDowO2JvdHRvbTowO2xlZnQ6MDtoZWlnaHQ6LjI1ZW07b3ZlcmZsb3c6aGlkZGVuO2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjVweDtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjVweH0uc3dhbDItdGltZXItcHJvZ3Jlc3MtYmFye3dpZHRoOjEwMCU7aGVpZ2h0Oi4yNWVtO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuMil9LnN3YWwyLWltYWdle21heC13aWR0aDoxMDAlO21hcmdpbjoxLjI1ZW0gYXV0b30uc3dhbDItY2xvc2V7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoyO3RvcDowO3JpZ2h0OjA7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7d2lkdGg6MS4yZW07aGVpZ2h0OjEuMmVtO3BhZGRpbmc6MDtvdmVyZmxvdzpoaWRkZW47dHJhbnNpdGlvbjpjb2xvciAuMXMgZWFzZS1vdXQ7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo1cHg7YmFja2dyb3VuZDowIDA7Y29sb3I6I2NjYztmb250LWZhbWlseTpzZXJpZjtmb250LXNpemU6Mi41ZW07bGluZS1oZWlnaHQ6MS4yO2N1cnNvcjpwb2ludGVyfS5zd2FsMi1jbG9zZTpob3Zlcnt0cmFuc2Zvcm06bm9uZTtiYWNrZ3JvdW5kOjAgMDtjb2xvcjojZjI3NDc0fS5zd2FsMi1jbG9zZTpmb2N1c3tvdXRsaW5lOjA7Ym94LXNoYWRvdzppbnNldCAwIDAgMCAzcHggcmdiYSgxMDAsMTUwLDIwMCwuNSl9LnN3YWwyLWNsb3NlOjotbW96LWZvY3VzLWlubmVye2JvcmRlcjowfS5zd2FsMi1jb250ZW50e3otaW5kZXg6MTtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbjowO3BhZGRpbmc6MCAxLjZlbTtjb2xvcjojNTQ1NDU0O2ZvbnQtc2l6ZToxLjEyNWVtO2ZvbnQtd2VpZ2h0OjQwMDtsaW5lLWhlaWdodDpub3JtYWw7dGV4dC1hbGlnbjpjZW50ZXI7d29yZC13cmFwOmJyZWFrLXdvcmR9LnN3YWwyLWNoZWNrYm94LC5zd2FsMi1maWxlLC5zd2FsMi1pbnB1dCwuc3dhbDItcmFkaW8sLnN3YWwyLXNlbGVjdCwuc3dhbDItdGV4dGFyZWF7bWFyZ2luOjFlbSBhdXRvfS5zd2FsMi1maWxlLC5zd2FsMi1pbnB1dCwuc3dhbDItdGV4dGFyZWF7Ym94LXNpemluZzpib3JkZXItYm94O3dpZHRoOjEwMCU7dHJhbnNpdGlvbjpib3JkZXItY29sb3IgLjNzLGJveC1zaGFkb3cgLjNzO2JvcmRlcjoxcHggc29saWQgI2Q5ZDlkOTtib3JkZXItcmFkaXVzOi4xODc1ZW07YmFja2dyb3VuZDppbmhlcml0O2JveC1zaGFkb3c6aW5zZXQgMCAxcHggMXB4IHJnYmEoMCwwLDAsLjA2KTtjb2xvcjppbmhlcml0O2ZvbnQtc2l6ZToxLjEyNWVtfS5zd2FsMi1maWxlLnN3YWwyLWlucHV0ZXJyb3IsLnN3YWwyLWlucHV0LnN3YWwyLWlucHV0ZXJyb3IsLnN3YWwyLXRleHRhcmVhLnN3YWwyLWlucHV0ZXJyb3J7Ym9yZGVyLWNvbG9yOiNmMjc0NzQhaW1wb3J0YW50O2JveC1zaGFkb3c6MCAwIDJweCAjZjI3NDc0IWltcG9ydGFudH0uc3dhbDItZmlsZTpmb2N1cywuc3dhbDItaW5wdXQ6Zm9jdXMsLnN3YWwyLXRleHRhcmVhOmZvY3Vze2JvcmRlcjoxcHggc29saWQgI2I0ZGJlZDtvdXRsaW5lOjA7Ym94LXNoYWRvdzowIDAgMCAzcHggcmdiYSgxMDAsMTUwLDIwMCwuNSl9LnN3YWwyLWZpbGU6Oi1tb3otcGxhY2Vob2xkZXIsLnN3YWwyLWlucHV0OjotbW96LXBsYWNlaG9sZGVyLC5zd2FsMi10ZXh0YXJlYTo6LW1vei1wbGFjZWhvbGRlcntjb2xvcjojY2NjfS5zd2FsMi1maWxlOi1tcy1pbnB1dC1wbGFjZWhvbGRlciwuc3dhbDItaW5wdXQ6LW1zLWlucHV0LXBsYWNlaG9sZGVyLC5zd2FsMi10ZXh0YXJlYTotbXMtaW5wdXQtcGxhY2Vob2xkZXJ7Y29sb3I6I2NjY30uc3dhbDItZmlsZTo6cGxhY2Vob2xkZXIsLnN3YWwyLWlucHV0OjpwbGFjZWhvbGRlciwuc3dhbDItdGV4dGFyZWE6OnBsYWNlaG9sZGVye2NvbG9yOiNjY2N9LnN3YWwyLXJhbmdle21hcmdpbjoxZW0gYXV0bztiYWNrZ3JvdW5kOiNmZmZ9LnN3YWwyLXJhbmdlIGlucHV0e3dpZHRoOjgwJX0uc3dhbDItcmFuZ2Ugb3V0cHV0e3dpZHRoOjIwJTtjb2xvcjppbmhlcml0O2ZvbnQtd2VpZ2h0OjYwMDt0ZXh0LWFsaWduOmNlbnRlcn0uc3dhbDItcmFuZ2UgaW5wdXQsLnN3YWwyLXJhbmdlIG91dHB1dHtoZWlnaHQ6Mi42MjVlbTtwYWRkaW5nOjA7Zm9udC1zaXplOjEuMTI1ZW07bGluZS1oZWlnaHQ6Mi42MjVlbX0uc3dhbDItaW5wdXR7aGVpZ2h0OjIuNjI1ZW07cGFkZGluZzowIC43NWVtfS5zd2FsMi1pbnB1dFt0eXBlPW51bWJlcl17bWF4LXdpZHRoOjEwZW19LnN3YWwyLWZpbGV7YmFja2dyb3VuZDppbmhlcml0O2ZvbnQtc2l6ZToxLjEyNWVtfS5zd2FsMi10ZXh0YXJlYXtoZWlnaHQ6Ni43NWVtO3BhZGRpbmc6Ljc1ZW19LnN3YWwyLXNlbGVjdHttaW4td2lkdGg6NTAlO21heC13aWR0aDoxMDAlO3BhZGRpbmc6LjM3NWVtIC42MjVlbTtiYWNrZ3JvdW5kOmluaGVyaXQ7Y29sb3I6aW5oZXJpdDtmb250LXNpemU6MS4xMjVlbX0uc3dhbDItY2hlY2tib3gsLnN3YWwyLXJhZGlve2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2JhY2tncm91bmQ6I2ZmZjtjb2xvcjppbmhlcml0fS5zd2FsMi1jaGVja2JveCBsYWJlbCwuc3dhbDItcmFkaW8gbGFiZWx7bWFyZ2luOjAgLjZlbTtmb250LXNpemU6MS4xMjVlbX0uc3dhbDItY2hlY2tib3ggaW5wdXQsLnN3YWwyLXJhZGlvIGlucHV0e2ZsZXgtc2hyaW5rOjA7bWFyZ2luOjAgLjRlbX0uc3dhbDItaW5wdXQtbGFiZWx7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7bWFyZ2luOjFlbSBhdXRvfS5zd2FsMi12YWxpZGF0aW9uLW1lc3NhZ2V7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7bWFyZ2luOjAgLTIuN2VtO3BhZGRpbmc6LjYyNWVtO292ZXJmbG93OmhpZGRlbjtiYWNrZ3JvdW5kOiNmMGYwZjA7Y29sb3I6IzY2Njtmb250LXNpemU6MWVtO2ZvbnQtd2VpZ2h0OjMwMH0uc3dhbDItdmFsaWRhdGlvbi1tZXNzYWdlOjpiZWZvcmV7Y29udGVudDpcIiFcIjtkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDoxLjVlbTttaW4td2lkdGg6MS41ZW07aGVpZ2h0OjEuNWVtO21hcmdpbjowIC42MjVlbTtib3JkZXItcmFkaXVzOjUwJTtiYWNrZ3JvdW5kLWNvbG9yOiNmMjc0NzQ7Y29sb3I6I2ZmZjtmb250LXdlaWdodDo2MDA7bGluZS1oZWlnaHQ6MS41ZW07dGV4dC1hbGlnbjpjZW50ZXJ9LnN3YWwyLWljb257cG9zaXRpb246cmVsYXRpdmU7Ym94LXNpemluZzpjb250ZW50LWJveDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3dpZHRoOjVlbTtoZWlnaHQ6NWVtO21hcmdpbjoxLjI1ZW0gYXV0byAxLjg3NWVtO2JvcmRlcjouMjVlbSBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOjUwJTtib3JkZXItY29sb3I6IzAwMDtmb250LWZhbWlseTppbmhlcml0O2xpbmUtaGVpZ2h0OjVlbTtjdXJzb3I6ZGVmYXVsdDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmV9LnN3YWwyLWljb24gLnN3YWwyLWljb24tY29udGVudHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2ZvbnQtc2l6ZTozLjc1ZW19LnN3YWwyLWljb24uc3dhbDItZXJyb3J7Ym9yZGVyLWNvbG9yOiNmMjc0NzQ7Y29sb3I6I2YyNzQ3NH0uc3dhbDItaWNvbi5zd2FsMi1lcnJvciAuc3dhbDIteC1tYXJre3Bvc2l0aW9uOnJlbGF0aXZlO2ZsZXgtZ3JvdzoxfS5zd2FsMi1pY29uLnN3YWwyLWVycm9yIFtjbGFzc149c3dhbDIteC1tYXJrLWxpbmVde2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7dG9wOjIuMzEyNWVtO3dpZHRoOjIuOTM3NWVtO2hlaWdodDouMzEyNWVtO2JvcmRlci1yYWRpdXM6LjEyNWVtO2JhY2tncm91bmQtY29sb3I6I2YyNzQ3NH0uc3dhbDItaWNvbi5zd2FsMi1lcnJvciBbY2xhc3NePXN3YWwyLXgtbWFyay1saW5lXVtjbGFzcyQ9bGVmdF17bGVmdDoxLjA2MjVlbTt0cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKX0uc3dhbDItaWNvbi5zd2FsMi1lcnJvciBbY2xhc3NePXN3YWwyLXgtbWFyay1saW5lXVtjbGFzcyQ9cmlnaHRde3JpZ2h0OjFlbTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyl9LnN3YWwyLWljb24uc3dhbDItZXJyb3Iuc3dhbDItaWNvbi1zaG93ey13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtZXJyb3ItaWNvbiAuNXM7YW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtZXJyb3ItaWNvbiAuNXN9LnN3YWwyLWljb24uc3dhbDItZXJyb3Iuc3dhbDItaWNvbi1zaG93IC5zd2FsMi14LW1hcmt7LXdlYmtpdC1hbmltYXRpb246c3dhbDItYW5pbWF0ZS1lcnJvci14LW1hcmsgLjVzO2FuaW1hdGlvbjpzd2FsMi1hbmltYXRlLWVycm9yLXgtbWFyayAuNXN9LnN3YWwyLWljb24uc3dhbDItd2FybmluZ3tib3JkZXItY29sb3I6I2ZhY2VhODtjb2xvcjojZjhiYjg2fS5zd2FsMi1pY29uLnN3YWwyLWluZm97Ym9yZGVyLWNvbG9yOiM5ZGUwZjY7Y29sb3I6IzNmYzNlZX0uc3dhbDItaWNvbi5zd2FsMi1xdWVzdGlvbntib3JkZXItY29sb3I6I2M5ZGFlMTtjb2xvcjojODdhZGJkfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3N7Ym9yZGVyLWNvbG9yOiNhNWRjODY7Y29sb3I6I2E1ZGM4Nn0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lXXtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDozLjc1ZW07aGVpZ2h0OjcuNWVtO3RyYW5zZm9ybTpyb3RhdGUoNDVkZWcpO2JvcmRlci1yYWRpdXM6NTAlfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmVdW2NsYXNzJD1sZWZ0XXt0b3A6LS40Mzc1ZW07bGVmdDotMi4wNjM1ZW07dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpO3RyYW5zZm9ybS1vcmlnaW46My43NWVtIDMuNzVlbTtib3JkZXItcmFkaXVzOjcuNWVtIDAgMCA3LjVlbX0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lXVtjbGFzcyQ9cmlnaHRde3RvcDotLjY4NzVlbTtsZWZ0OjEuODc1ZW07dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpO3RyYW5zZm9ybS1vcmlnaW46MCAzLjc1ZW07Ym9yZGVyLXJhZGl1czowIDcuNWVtIDcuNWVtIDB9LnN3YWwyLWljb24uc3dhbDItc3VjY2VzcyAuc3dhbDItc3VjY2Vzcy1yaW5ne3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6Mjt0b3A6LS4yNWVtO2xlZnQ6LS4yNWVtO2JveC1zaXppbmc6Y29udGVudC1ib3g7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtib3JkZXI6LjI1ZW0gc29saWQgcmdiYSgxNjUsMjIwLDEzNCwuMyk7Ym9yZGVyLXJhZGl1czo1MCV9LnN3YWwyLWljb24uc3dhbDItc3VjY2VzcyAuc3dhbDItc3VjY2Vzcy1maXh7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoxO3RvcDouNWVtO2xlZnQ6MS42MjVlbTt3aWR0aDouNDM3NWVtO2hlaWdodDo1LjYyNWVtO3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1saW5lXXtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MjtoZWlnaHQ6LjMxMjVlbTtib3JkZXItcmFkaXVzOi4xMjVlbTtiYWNrZ3JvdW5kLWNvbG9yOiNhNWRjODZ9LnN3YWwyLWljb24uc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtbGluZV1bY2xhc3MkPXRpcF17dG9wOjIuODc1ZW07bGVmdDouODEyNWVtO3dpZHRoOjEuNTYyNWVtO3RyYW5zZm9ybTpyb3RhdGUoNDVkZWcpfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWxpbmVdW2NsYXNzJD1sb25nXXt0b3A6Mi4zNzVlbTtyaWdodDouNWVtO3dpZHRoOjIuOTM3NWVtO3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzLnN3YWwyLWljb24tc2hvdyAuc3dhbDItc3VjY2Vzcy1saW5lLXRpcHstd2Via2l0LWFuaW1hdGlvbjpzd2FsMi1hbmltYXRlLXN1Y2Nlc3MtbGluZS10aXAgLjc1czthbmltYXRpb246c3dhbDItYW5pbWF0ZS1zdWNjZXNzLWxpbmUtdGlwIC43NXN9LnN3YWwyLWljb24uc3dhbDItc3VjY2Vzcy5zd2FsMi1pY29uLXNob3cgLnN3YWwyLXN1Y2Nlc3MtbGluZS1sb25ney13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtc3VjY2Vzcy1saW5lLWxvbmcgLjc1czthbmltYXRpb246c3dhbDItYW5pbWF0ZS1zdWNjZXNzLWxpbmUtbG9uZyAuNzVzfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3Muc3dhbDItaWNvbi1zaG93IC5zd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmUtcmlnaHR7LXdlYmtpdC1hbmltYXRpb246c3dhbDItcm90YXRlLXN1Y2Nlc3MtY2lyY3VsYXItbGluZSA0LjI1cyBlYXNlLWluO2FuaW1hdGlvbjpzd2FsMi1yb3RhdGUtc3VjY2Vzcy1jaXJjdWxhci1saW5lIDQuMjVzIGVhc2UtaW59LnN3YWwyLXByb2dyZXNzLXN0ZXBze2ZsZXgtd3JhcDp3cmFwO2FsaWduLWl0ZW1zOmNlbnRlcjttYXgtd2lkdGg6MTAwJTttYXJnaW46MCAwIDEuMjVlbTtwYWRkaW5nOjA7YmFja2dyb3VuZDppbmhlcml0O2ZvbnQtd2VpZ2h0OjYwMH0uc3dhbDItcHJvZ3Jlc3Mtc3RlcHMgbGl7ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246cmVsYXRpdmV9LnN3YWwyLXByb2dyZXNzLXN0ZXBzIC5zd2FsMi1wcm9ncmVzcy1zdGVwe3otaW5kZXg6MjA7ZmxleC1zaHJpbms6MDt3aWR0aDoyZW07aGVpZ2h0OjJlbTtib3JkZXItcmFkaXVzOjJlbTtiYWNrZ3JvdW5kOiMyNzc4YzQ7Y29sb3I6I2ZmZjtsaW5lLWhlaWdodDoyZW07dGV4dC1hbGlnbjpjZW50ZXJ9LnN3YWwyLXByb2dyZXNzLXN0ZXBzIC5zd2FsMi1wcm9ncmVzcy1zdGVwLnN3YWwyLWFjdGl2ZS1wcm9ncmVzcy1zdGVwe2JhY2tncm91bmQ6IzI3NzhjNH0uc3dhbDItcHJvZ3Jlc3Mtc3RlcHMgLnN3YWwyLXByb2dyZXNzLXN0ZXAuc3dhbDItYWN0aXZlLXByb2dyZXNzLXN0ZXB+LnN3YWwyLXByb2dyZXNzLXN0ZXB7YmFja2dyb3VuZDojYWRkOGU2O2NvbG9yOiNmZmZ9LnN3YWwyLXByb2dyZXNzLXN0ZXBzIC5zd2FsMi1wcm9ncmVzcy1zdGVwLnN3YWwyLWFjdGl2ZS1wcm9ncmVzcy1zdGVwfi5zd2FsMi1wcm9ncmVzcy1zdGVwLWxpbmV7YmFja2dyb3VuZDojYWRkOGU2fS5zd2FsMi1wcm9ncmVzcy1zdGVwcyAuc3dhbDItcHJvZ3Jlc3Mtc3RlcC1saW5le3otaW5kZXg6MTA7ZmxleC1zaHJpbms6MDt3aWR0aDoyLjVlbTtoZWlnaHQ6LjRlbTttYXJnaW46MCAtMXB4O2JhY2tncm91bmQ6IzI3NzhjNH1bY2xhc3NePXN3YWwyXXstd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6dHJhbnNwYXJlbnR9LnN3YWwyLXNob3d7LXdlYmtpdC1hbmltYXRpb246c3dhbDItc2hvdyAuM3M7YW5pbWF0aW9uOnN3YWwyLXNob3cgLjNzfS5zd2FsMi1oaWRley13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLWhpZGUgLjE1cyBmb3J3YXJkczthbmltYXRpb246c3dhbDItaGlkZSAuMTVzIGZvcndhcmRzfS5zd2FsMi1ub2FuaW1hdGlvbnt0cmFuc2l0aW9uOm5vbmV9LnN3YWwyLXNjcm9sbGJhci1tZWFzdXJle3Bvc2l0aW9uOmFic29sdXRlO3RvcDotOTk5OXB4O3dpZHRoOjUwcHg7aGVpZ2h0OjUwcHg7b3ZlcmZsb3c6c2Nyb2xsfS5zd2FsMi1ydGwgLnN3YWwyLWNsb3Nle3JpZ2h0OmF1dG87bGVmdDowfS5zd2FsMi1ydGwgLnN3YWwyLXRpbWVyLXByb2dyZXNzLWJhcntyaWdodDowO2xlZnQ6YXV0b31Ac3VwcG9ydHMgKC1tcy1hY2NlbGVyYXRvcjp0cnVlKXsuc3dhbDItcmFuZ2UgaW5wdXR7d2lkdGg6MTAwJSFpbXBvcnRhbnR9LnN3YWwyLXJhbmdlIG91dHB1dHtkaXNwbGF5Om5vbmV9fUBtZWRpYSBhbGwgYW5kICgtbXMtaGlnaC1jb250cmFzdDpub25lKSwoLW1zLWhpZ2gtY29udHJhc3Q6YWN0aXZlKXsuc3dhbDItcmFuZ2UgaW5wdXR7d2lkdGg6MTAwJSFpbXBvcnRhbnR9LnN3YWwyLXJhbmdlIG91dHB1dHtkaXNwbGF5Om5vbmV9fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi10b2FzdC1zaG93ezAle3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0uNjI1ZW0pIHJvdGF0ZVooMmRlZyl9MzMle3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHJvdGF0ZVooLTJkZWcpfTY2JXt0cmFuc2Zvcm06dHJhbnNsYXRlWSguMzEyNWVtKSByb3RhdGVaKDJkZWcpfTEwMCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCkgcm90YXRlWigwKX19QGtleWZyYW1lcyBzd2FsMi10b2FzdC1zaG93ezAle3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0uNjI1ZW0pIHJvdGF0ZVooMmRlZyl9MzMle3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHJvdGF0ZVooLTJkZWcpfTY2JXt0cmFuc2Zvcm06dHJhbnNsYXRlWSguMzEyNWVtKSByb3RhdGVaKDJkZWcpfTEwMCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCkgcm90YXRlWigwKX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLXRvYXN0LWhpZGV7MTAwJXt0cmFuc2Zvcm06cm90YXRlWigxZGVnKTtvcGFjaXR5OjB9fUBrZXlmcmFtZXMgc3dhbDItdG9hc3QtaGlkZXsxMDAle3RyYW5zZm9ybTpyb3RhdGVaKDFkZWcpO29wYWNpdHk6MH19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLXRvYXN0LWFuaW1hdGUtc3VjY2Vzcy1saW5lLXRpcHswJXt0b3A6LjU2MjVlbTtsZWZ0Oi4wNjI1ZW07d2lkdGg6MH01NCV7dG9wOi4xMjVlbTtsZWZ0Oi4xMjVlbTt3aWR0aDowfTcwJXt0b3A6LjYyNWVtO2xlZnQ6LS4yNWVtO3dpZHRoOjEuNjI1ZW19ODQle3RvcDoxLjA2MjVlbTtsZWZ0Oi43NWVtO3dpZHRoOi41ZW19MTAwJXt0b3A6MS4xMjVlbTtsZWZ0Oi4xODc1ZW07d2lkdGg6Ljc1ZW19fUBrZXlmcmFtZXMgc3dhbDItdG9hc3QtYW5pbWF0ZS1zdWNjZXNzLWxpbmUtdGlwezAle3RvcDouNTYyNWVtO2xlZnQ6LjA2MjVlbTt3aWR0aDowfTU0JXt0b3A6LjEyNWVtO2xlZnQ6LjEyNWVtO3dpZHRoOjB9NzAle3RvcDouNjI1ZW07bGVmdDotLjI1ZW07d2lkdGg6MS42MjVlbX04NCV7dG9wOjEuMDYyNWVtO2xlZnQ6Ljc1ZW07d2lkdGg6LjVlbX0xMDAle3RvcDoxLjEyNWVtO2xlZnQ6LjE4NzVlbTt3aWR0aDouNzVlbX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLXRvYXN0LWFuaW1hdGUtc3VjY2Vzcy1saW5lLWxvbmd7MCV7dG9wOjEuNjI1ZW07cmlnaHQ6MS4zNzVlbTt3aWR0aDowfTY1JXt0b3A6MS4yNWVtO3JpZ2h0Oi45Mzc1ZW07d2lkdGg6MH04NCV7dG9wOi45Mzc1ZW07cmlnaHQ6MDt3aWR0aDoxLjEyNWVtfTEwMCV7dG9wOi45Mzc1ZW07cmlnaHQ6LjE4NzVlbTt3aWR0aDoxLjM3NWVtfX1Aa2V5ZnJhbWVzIHN3YWwyLXRvYXN0LWFuaW1hdGUtc3VjY2Vzcy1saW5lLWxvbmd7MCV7dG9wOjEuNjI1ZW07cmlnaHQ6MS4zNzVlbTt3aWR0aDowfTY1JXt0b3A6MS4yNWVtO3JpZ2h0Oi45Mzc1ZW07d2lkdGg6MH04NCV7dG9wOi45Mzc1ZW07cmlnaHQ6MDt3aWR0aDoxLjEyNWVtfTEwMCV7dG9wOi45Mzc1ZW07cmlnaHQ6LjE4NzVlbTt3aWR0aDoxLjM3NWVtfX1ALXdlYmtpdC1rZXlmcmFtZXMgc3dhbDItc2hvd3swJXt0cmFuc2Zvcm06c2NhbGUoLjcpfTQ1JXt0cmFuc2Zvcm06c2NhbGUoMS4wNSl9ODAle3RyYW5zZm9ybTpzY2FsZSguOTUpfTEwMCV7dHJhbnNmb3JtOnNjYWxlKDEpfX1Aa2V5ZnJhbWVzIHN3YWwyLXNob3d7MCV7dHJhbnNmb3JtOnNjYWxlKC43KX00NSV7dHJhbnNmb3JtOnNjYWxlKDEuMDUpfTgwJXt0cmFuc2Zvcm06c2NhbGUoLjk1KX0xMDAle3RyYW5zZm9ybTpzY2FsZSgxKX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLWhpZGV7MCV7dHJhbnNmb3JtOnNjYWxlKDEpO29wYWNpdHk6MX0xMDAle3RyYW5zZm9ybTpzY2FsZSguNSk7b3BhY2l0eTowfX1Aa2V5ZnJhbWVzIHN3YWwyLWhpZGV7MCV7dHJhbnNmb3JtOnNjYWxlKDEpO29wYWNpdHk6MX0xMDAle3RyYW5zZm9ybTpzY2FsZSguNSk7b3BhY2l0eTowfX1ALXdlYmtpdC1rZXlmcmFtZXMgc3dhbDItYW5pbWF0ZS1zdWNjZXNzLWxpbmUtdGlwezAle3RvcDoxLjE4NzVlbTtsZWZ0Oi4wNjI1ZW07d2lkdGg6MH01NCV7dG9wOjEuMDYyNWVtO2xlZnQ6LjEyNWVtO3dpZHRoOjB9NzAle3RvcDoyLjE4NzVlbTtsZWZ0Oi0uMzc1ZW07d2lkdGg6My4xMjVlbX04NCV7dG9wOjNlbTtsZWZ0OjEuMzEyNWVtO3dpZHRoOjEuMDYyNWVtfTEwMCV7dG9wOjIuODEyNWVtO2xlZnQ6LjgxMjVlbTt3aWR0aDoxLjU2MjVlbX19QGtleWZyYW1lcyBzd2FsMi1hbmltYXRlLXN1Y2Nlc3MtbGluZS10aXB7MCV7dG9wOjEuMTg3NWVtO2xlZnQ6LjA2MjVlbTt3aWR0aDowfTU0JXt0b3A6MS4wNjI1ZW07bGVmdDouMTI1ZW07d2lkdGg6MH03MCV7dG9wOjIuMTg3NWVtO2xlZnQ6LS4zNzVlbTt3aWR0aDozLjEyNWVtfTg0JXt0b3A6M2VtO2xlZnQ6MS4zMTI1ZW07d2lkdGg6MS4wNjI1ZW19MTAwJXt0b3A6Mi44MTI1ZW07bGVmdDouODEyNWVtO3dpZHRoOjEuNTYyNWVtfX1ALXdlYmtpdC1rZXlmcmFtZXMgc3dhbDItYW5pbWF0ZS1zdWNjZXNzLWxpbmUtbG9uZ3swJXt0b3A6My4zNzVlbTtyaWdodDoyLjg3NWVtO3dpZHRoOjB9NjUle3RvcDozLjM3NWVtO3JpZ2h0OjIuODc1ZW07d2lkdGg6MH04NCV7dG9wOjIuMTg3NWVtO3JpZ2h0OjA7d2lkdGg6My40Mzc1ZW19MTAwJXt0b3A6Mi4zNzVlbTtyaWdodDouNWVtO3dpZHRoOjIuOTM3NWVtfX1Aa2V5ZnJhbWVzIHN3YWwyLWFuaW1hdGUtc3VjY2Vzcy1saW5lLWxvbmd7MCV7dG9wOjMuMzc1ZW07cmlnaHQ6Mi44NzVlbTt3aWR0aDowfTY1JXt0b3A6My4zNzVlbTtyaWdodDoyLjg3NWVtO3dpZHRoOjB9ODQle3RvcDoyLjE4NzVlbTtyaWdodDowO3dpZHRoOjMuNDM3NWVtfTEwMCV7dG9wOjIuMzc1ZW07cmlnaHQ6LjVlbTt3aWR0aDoyLjkzNzVlbX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLXJvdGF0ZS1zdWNjZXNzLWNpcmN1bGFyLWxpbmV7MCV7dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpfTUle3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX0xMiV7dHJhbnNmb3JtOnJvdGF0ZSgtNDA1ZGVnKX0xMDAle3RyYW5zZm9ybTpyb3RhdGUoLTQwNWRlZyl9fUBrZXlmcmFtZXMgc3dhbDItcm90YXRlLXN1Y2Nlc3MtY2lyY3VsYXItbGluZXswJXt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyl9NSV7dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpfTEyJXt0cmFuc2Zvcm06cm90YXRlKC00MDVkZWcpfTEwMCV7dHJhbnNmb3JtOnJvdGF0ZSgtNDA1ZGVnKX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLWFuaW1hdGUtZXJyb3IteC1tYXJrezAle21hcmdpbi10b3A6MS42MjVlbTt0cmFuc2Zvcm06c2NhbGUoLjQpO29wYWNpdHk6MH01MCV7bWFyZ2luLXRvcDoxLjYyNWVtO3RyYW5zZm9ybTpzY2FsZSguNCk7b3BhY2l0eTowfTgwJXttYXJnaW4tdG9wOi0uMzc1ZW07dHJhbnNmb3JtOnNjYWxlKDEuMTUpfTEwMCV7bWFyZ2luLXRvcDowO3RyYW5zZm9ybTpzY2FsZSgxKTtvcGFjaXR5OjF9fUBrZXlmcmFtZXMgc3dhbDItYW5pbWF0ZS1lcnJvci14LW1hcmt7MCV7bWFyZ2luLXRvcDoxLjYyNWVtO3RyYW5zZm9ybTpzY2FsZSguNCk7b3BhY2l0eTowfTUwJXttYXJnaW4tdG9wOjEuNjI1ZW07dHJhbnNmb3JtOnNjYWxlKC40KTtvcGFjaXR5OjB9ODAle21hcmdpbi10b3A6LS4zNzVlbTt0cmFuc2Zvcm06c2NhbGUoMS4xNSl9MTAwJXttYXJnaW4tdG9wOjA7dHJhbnNmb3JtOnNjYWxlKDEpO29wYWNpdHk6MX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLWFuaW1hdGUtZXJyb3ItaWNvbnswJXt0cmFuc2Zvcm06cm90YXRlWCgxMDBkZWcpO29wYWNpdHk6MH0xMDAle3RyYW5zZm9ybTpyb3RhdGVYKDApO29wYWNpdHk6MX19QGtleWZyYW1lcyBzd2FsMi1hbmltYXRlLWVycm9yLWljb257MCV7dHJhbnNmb3JtOnJvdGF0ZVgoMTAwZGVnKTtvcGFjaXR5OjB9MTAwJXt0cmFuc2Zvcm06cm90YXRlWCgwKTtvcGFjaXR5OjF9fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi1yb3RhdGUtbG9hZGluZ3swJXt0cmFuc2Zvcm06cm90YXRlKDApfTEwMCV7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpfX1Aa2V5ZnJhbWVzIHN3YWwyLXJvdGF0ZS1sb2FkaW5nezAle3RyYW5zZm9ybTpyb3RhdGUoMCl9MTAwJXt0cmFuc2Zvcm06cm90YXRlKDM2MGRlZyl9fWJvZHkuc3dhbDItc2hvd246bm90KC5zd2FsMi1uby1iYWNrZHJvcCk6bm90KC5zd2FsMi10b2FzdC1zaG93bil7b3ZlcmZsb3c6aGlkZGVufWJvZHkuc3dhbDItaGVpZ2h0LWF1dG97aGVpZ2h0OmF1dG8haW1wb3J0YW50fWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lcnt0b3A6YXV0bztyaWdodDphdXRvO2JvdHRvbTphdXRvO2xlZnQ6YXV0bzttYXgtd2lkdGg6Y2FsYygxMDAlIC0gLjYyNWVtICogMik7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudCFpbXBvcnRhbnR9Ym9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyPi5zd2FsMi1tb2RhbHtib3gtc2hhZG93OjAgMCAxMHB4IHJnYmEoMCwwLDAsLjQpfWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3B7dG9wOjA7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSl9Ym9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1sZWZ0LGJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3Atc3RhcnR7dG9wOjA7bGVmdDowfWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtZW5kLGJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtcmlnaHR7dG9wOjA7cmlnaHQ6MH1ib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVye3RvcDo1MCU7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpfWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItbGVmdCxib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLXN0YXJ0e3RvcDo1MCU7bGVmdDowO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpfWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItZW5kLGJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItcmlnaHR7dG9wOjUwJTtyaWdodDowO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpfWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b217Ym90dG9tOjA7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSl9Ym9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1sZWZ0LGJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tc3RhcnR7Ym90dG9tOjA7bGVmdDowfWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tZW5kLGJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tcmlnaHR7cmlnaHQ6MDtib3R0b206MH1AbWVkaWEgcHJpbnR7Ym9keS5zd2FsMi1zaG93bjpub3QoLnN3YWwyLW5vLWJhY2tkcm9wKTpub3QoLnN3YWwyLXRvYXN0LXNob3duKXtvdmVyZmxvdy15OnNjcm9sbCFpbXBvcnRhbnR9Ym9keS5zd2FsMi1zaG93bjpub3QoLnN3YWwyLW5vLWJhY2tkcm9wKTpub3QoLnN3YWwyLXRvYXN0LXNob3duKT5bYXJpYS1oaWRkZW49dHJ1ZV17ZGlzcGxheTpub25lfWJvZHkuc3dhbDItc2hvd246bm90KC5zd2FsMi1uby1iYWNrZHJvcCk6bm90KC5zd2FsMi10b2FzdC1zaG93bikgLnN3YWwyLWNvbnRhaW5lcntwb3NpdGlvbjpzdGF0aWMhaW1wb3J0YW50fX1ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXJ7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH1ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItdG9we3RvcDowO3JpZ2h0OmF1dG87Ym90dG9tOmF1dG87bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSl9Ym9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1lbmQsYm9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1yaWdodHt0b3A6MDtyaWdodDowO2JvdHRvbTphdXRvO2xlZnQ6YXV0b31ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItdG9wLWxlZnQsYm9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1zdGFydHt0b3A6MDtyaWdodDphdXRvO2JvdHRvbTphdXRvO2xlZnQ6MH1ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLWxlZnQsYm9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlci1zdGFydHt0b3A6NTAlO3JpZ2h0OmF1dG87Ym90dG9tOmF1dG87bGVmdDowO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpfWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXJ7dG9wOjUwJTtyaWdodDphdXRvO2JvdHRvbTphdXRvO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKX1ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLWVuZCxib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLXJpZ2h0e3RvcDo1MCU7cmlnaHQ6MDtib3R0b206YXV0bztsZWZ0OmF1dG87dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTUwJSl9Ym9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1sZWZ0LGJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tc3RhcnR7dG9wOmF1dG87cmlnaHQ6YXV0bztib3R0b206MDtsZWZ0OjB9Ym9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbXt0b3A6YXV0bztyaWdodDphdXRvO2JvdHRvbTowO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpfWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tZW5kLGJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tcmlnaHR7dG9wOmF1dG87cmlnaHQ6MDtib3R0b206MDtsZWZ0OmF1dG99Iik7"}]},{"name":"AC-baidu-重定向优化百度搜狗谷歌必应搜索_favicon_双列","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_prototypes":false,"noframes":null,"run_at":null,"override":{"use_includes":[],"orig_includes":["*://ipv6.baidu.com/*","*://www.baidu.com/*","*://www1.baidu.com/*","*://m.baidu.com/*","*://xueshu.baidu.com/s*","*://www.so.com/s?*","*://*.bing.com/*","*://encrypted.google.*/search*","*://*.google*/search*","*://*.google*/webhp*","*://*.zhihu.com/*","*://*duckduckgo.com/*","*://*.dogedoge.com/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":["*://*.google*/sorry*","https://zhidao.baidu.com/*","https://*.zhidao.baidu.com/*","https://www.baidu.com/img/*"],"merge_excludes":true,"use_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null,"orig_connects":["baidu.com","google.com","google.com.hk","google.com.jp","bing.com","duckduckgo.com","dogedoge.com","so.com"]}},"storage":{"ts":1638700832207,"data":{"Config":"s{\"isRedirectEnable\":false,\"isAdsEnable\":false,\"isAutopage\":true,\"isBlockEnable\":false,\"isBlockDisplay\":false,\"isBlockBtnNotDisplay\":false,\"AdsStyleEnable\":true,\"baidu\":{\"name\":\"baidu\",\"AdsStyleMode\":\"1\",\"HuYanMode\":false},\"google\":{\"name\":\"google\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"bing\":{\"name\":\"bing\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"duck\":{\"name\":\"duck\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"doge\":{\"name\":\"doge\",\"AdsStyleMode\":\"3\",\"HuYanMode\":false},\"sogou\":{\"name\":\"sogou\",\"AdsStyleMode\":\"1\",\"HuYanMode\":false},\"zhihu\":{\"name\":\"zhihu\",\"AdsStyleMode\":\"0\",\"HuYanMode\":false},\"other\":{\"name\":\"other\",\"AdsStyleMode\":\"0\",\"HuYanMode\":false},\"Style_BaiduLite\":false,\"defaultHuYanColor\":\"#DEF1EF\",\"isUserColorEnable\":true,\"isFaviconEnable\":true,\"defaultFaviconUrl\":\"https://ae01.alicdn.com/kf/HTB1dRY0X8OD3KVjSZFFq6An9pXay.jpg\",\"doDisableSug\":true,\"isRightDisplayEnable\":true,\"isCounterEnable\":false,\"isALineEnable\":false,\"isUserStyleEnable\":false,\"normalizeDuck\":true,\"acceptLicense\":false,\"isEnLang\":false,\"isGooleInBaiduModeEnable\":false,\"UserBlockList\":[],\"UserStyleText\":\"/**计数器的颜色样式*/\\ndiv .AC-CounterT{\\n  background: #FD9999;\\n}\\n/**右侧栏的样式-其实不开启更好看一些*/\\n#content_right{\\n  padding: 20px 15px 15px;\\n  border-radius: 5px;\\n  background-color: #fff;\\n  box-sizing: border-box;\\n  box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\\n  -webkit-box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\\n  -moz-box-shadow: 0 0 20px 2px rgba(0, 0, 0, .1);\\n}\\nbody[baidu] {\\n  position: relative;\\n}\\nbody[baidu]:before {\\n  position: fixed;\\n  width: 100%;\\n  height: 100%;\\n  top: 0;\\n  left: 0;\\n  content: '';\\n  background-image: url('https://img.tujidu.com/image/5fdde8468423e.jpg');\\n  background-size: 100% auto;\\n  opacity: 1; /*背景图透明度=0.8，最大1*/\\n}\\n/**隐藏首页的大图标-修复可能导致外援样式异常**/\\nbody[baidu] #s_lg_img_new{\\n  display:none !important;\\n}\\nbody[baidu] .c-container{\\n  border-radius: 5px;\\n  background-color: rgba(255,255,255, 0.3) !important; /*百度搜索块体的颜色；透明度=0.1，最大1*/\\n}\\nbody[baidu] .c-container h3{\\n  background-color: rgba(248,248,248, 0.3) !important; /*百度搜索块体 - 标题的颜色；透明度=0.1，最大1*/\\n}\",\"oldVersion\":\"24.29\",\"lastSaveTime\":1638700830201}"}},"enabled":true,"position":2,"file_url":"https://greasyfork.org/scripts/14178-ac-baidu-%E9%87%8D%E5%AE%9A%E5%90%91%E4%BC%98%E5%8C%96%E7%99%BE%E5%BA%A6%E6%90%9C%E7%8B%97%E8%B0%B7%E6%AD%8C%E5%BF%85%E5%BA%94%E6%90%9C%E7%B4%A2-favicon-%E5%8F%8C%E5%88%97/code/AC-baidu-%E9%87%8D%E5%AE%9A%E5%90%91%E4%BC%98%E5%8C%96%E7%99%BE%E5%BA%A6%E6%90%9C%E7%8B%97%E8%B0%B7%E6%AD%8C%E5%BF%85%E5%BA%94%E6%90%9C%E7%B4%A2_favicon_%E5%8F%8C%E5%88%97.user.js","uuid":"a872fa8f-76ac-46bf-bdd9-d2726d0fc469","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgQUMtYmFpZHUt6YeN5a6a5ZCR5LyY5YyW55m+5bqm5pCc54uX6LC35q2M5b+F5bqU5pCc57SiX2Zhdmljb25f5Y+M5YiXCi8vIEBuYW1lOmVuICAgIEFDLWJhaWR1LWdvb2dsZV9zb2dvdV9iaW5nX1JlZGlyZWN0UmVtb3ZlX2Zhdmljb25fYWRhd2F5X1R3b0xpbmUKLy8gQG5hbWU6emggICAgQUMtYmFpZHUt6YeN5a6a5ZCR5LyY5YyW55m+5bqm5pCc54uX6LC35q2M5b+F5bqU5pCc57SiX2Zhdmljb25f5Y+M5YiXCi8vIEBuYW1lOmphICAgIEFDLWJhaWR1LemHjeWumuWQkeacgOmBqeWMlkJhaWR144Gu5pCc54uX44GuR29vZ2xl44GuQmluZ+aknOe0oue1kOaenOOBruODquODgOOCpOODrOOCr+ODiOmZpOWOuytmYXZpY29uCi8vIEBkZXNjcmlwdGlvbiAgMS7nuZ7pgY7nmb7luqbjgIHmkJzni5fjgIHosLfmrYzjgIHlpb3mkJzmkJzntKLntZDmnpzkuK3nmoToh6rlt7HnmoTot7PovYnpj4jmjqXvvIznm7TmjqXoqKrllY/ljp/lp4vntrLpoIEt5Y+N5q2j6YO96IO955yL5oeCIDIu5paw5aKe6Ieq5a6a5LmJ572R56uZ5oum5oiq5Yqf6IO9IDPmt7vliqBGYXZpY29u5pi+56S6IDQu6aG16Z2iQ1NTIDUu5re75Yqg6K6h5pWwIDYu5byA5YWz6YCJ5oup5Lul5LiK5Yqf6IO9IDcu6Ieq5Yqo57+76aG15Yqf6IO9Ci8vIEBkZXNjcmlwdGlvbjplbiAgMS5ieXBhc3MgdGhlIHJlZGlyZWN0IGxpbmsgYXQgYmFpZHVcc29nb3VcZ29vZ2xlXGhhb3NvdTsgMi5yZW1vdmUgYWRzIGF0IGJhaWR1OyAzLmFkZCBGYXZpY29uIGZvciBlYWNoIHdlYnNpdGU7IDQucmVuZGVyIHlvdXIgb3duIHN0eWxlOyA1LmNvdW50ZXI7IDYuU3dpdGNoIHRvIGhhbmRsZSBhbGwgNy5BdXRvIFBhZ2VyCi8vIEBkZXNjcmlwdGlvbjpqYSAgMS7ov4Llm55CYWlkdeOAgVNvZ29144CBR29vZ2xl44CBSGFvc2915qSc57Si5qSc57Si57WQ5p6c44Gu5Lit44Gu6Ieq5YiG44Gu6YG356e744Oq44Oz44KvOyAyLkJhaWR144Gu5L2Z5YiG44Gq5bqD5ZGK44KS5Y+W44KK6Zmk44GPOyAzLuOCs+ODoeODs+ODiOOCkui/veWKoDsgNC7jg5rjg7zjgrjjga7jgqvjgrnjgr/jg6BDU1A7IDUu44Kr44Km44Oz44OI44KS6L+95YqgOyA2LuOCueOCpOODg+ODgeOBr+S7peS4iuOBruapn+iDveOCkumBuOaKnuOBl+OBvuOBmTsgNy7oh6rli5Xjg5rjg7zjgrjjgoHjgY/jgoouCi8vIEBpY29uICAgIGh0dHBzOi8vYWUwMS5hbGljZG4uY29tL2tmL0hhYzFhNTgwNTVjNTA0N2NkYjkxMzQ5ZTkxYWEyMDhkNWsuanBnCi8vIEBhdXRob3IgICAgQUMKLy8gQGxpY2Vuc2UgICAgR1BMLTMuMC1vbmx5Ci8vIEBjcmVhdGUgICAgIDIwMTUtMTEtMjUKLy8gQHJ1bi1hdCAgICAgZG9jdW1lbnQtc3RhcnQKLy8gQHZlcnNpb24gICAgMjQuMjkKLy8gQGNvbm5lY3QgICAgYmFpZHUuY29tCi8vIEBjb25uZWN0ICAgIGdvb2dsZS5jb20KLy8gQGNvbm5lY3QgICAgZ29vZ2xlLmNvbS5oawovLyBAY29ubmVjdCAgICBnb29nbGUuY29tLmpwCi8vIEBjb25uZWN0ICAgIGJpbmcuY29tCi8vIEBjb25uZWN0ICAgIGR1Y2tkdWNrZ28uY29tCi8vIEBjb25uZWN0ICAgIGRvZ2Vkb2dlLmNvbQovLyBAY29ubmVjdCAgICBzby5jb20KLy8gQGluY2x1ZGUgICAgKjovL2lwdjYuYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgICAgKjovL3d3dy5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICAqOi8vd3d3MS5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICAqOi8vbS5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICAqOi8veHVlc2h1LmJhaWR1LmNvbS9zKgovLyBAaW5jbHVkZSAgICAqOi8vd3d3LnNvLmNvbS9zPyoKLy8gQGluY2x1ZGUgICAgKjovLyouYmluZy5jb20vKgovLyBAaW5jbHVkZSAgICAqOi8vZW5jcnlwdGVkLmdvb2dsZS4qL3NlYXJjaCoKLy8gQGluY2x1ZGUgICAgKjovLyouZ29vZ2xlKi9zZWFyY2gqCi8vIEBpbmNsdWRlICAgICo6Ly8qLmdvb2dsZSovd2ViaHAqCi8vIEBpbmNsdWRlICAgICo6Ly8qLnpoaWh1LmNvbS8qCi8vIEBpbmNsdWRlICAgICo6Ly8qZHVja2R1Y2tnby5jb20vKgovLyBAaW5jbHVkZSAgICAqOi8vKi5kb2dlZG9nZS5jb20vKgovLyBAZXhjbHVkZSAgICAqOi8vKi5nb29nbGUqL3NvcnJ5KgovLyBAZXhjbHVkZSAgICBodHRwczovL3poaWRhby5iYWlkdS5jb20vKgovLyBAZXhjbHVkZSAgICBodHRwczovLyouemhpZGFvLmJhaWR1LmNvbS8qCi8vIEBleGNsdWRlICAgIGh0dHBzOi8vd3d3LmJhaWR1LmNvbS9pbWcvKgovLyBAc3VwcG9ydFVSTCAgaHR0cHM6Ly9hYy50dWppZHUuY29tLwovLyBAaG9tZS11cmwgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLVRXL3NjcmlwdHMvMTQxNzgKLy8gQGhvbWUtdXJsMiAgaHR0cHM6Ly9naXRodWIuY29tL2xhbmdyZW4xMzUzL0dNX3NjcmlwdAovLyBAaG9tZXBhZ2VVUkwgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtVFcvc2NyaXB0cy8xNDE3OAovLyBAY29weXJpZ2h0ICAyMDE1LTIwMjAsIEFDCi8vIEBsYXN0bW9kaWZpZWQgIDIwMjEtMTEtMDIKLy8gQGZlZWRiYWNrLXVybCAgaHR0cHM6Ly9naXRodWIuY29tL2xhbmdyZW4xMzUzL0dNX3NjcmlwdAovLyBAbm90ZSAgICAyMDIxLjEwLTMxLVYyNC4yOSBmaXhlZCBMZXNzIHJlcXVpcmVtZW50IGZvciBmYXN0ZXIgTG9hZAovLyBAbm90ZSAgICAyMDIxLjEwLTI5LVYyNC4yNyDnp7vpmaTlv4XlupTog73pgInmi6nnmoTlub/lkYrvvJvlop7liqDoh6rlrprkuYnmoLflvI9sZXNz55qE5pSv5oyBCi8vIEBub3RlICAgIDIwMjEuMDktMDItVjI0LjI2IOS/ruWkjeW/heW6lOWkmmZhdmljb27vvIzkv67lpI3nmb7luqbnmb7np5Hpl67popjvvJvkv67lpI3osLfmrYzkuIDkuKrlsI/pl67popgKLy8gQG5vdGUgICAgMjAyMS4wNy0xNi1WMjQuMjUg5L+u5aSN5LiA5LiqYnVn77yb5YW85a6555m+5bqm5LiL5pCc57Si6IKh56WodGFn77ybCi8vIEBub3RlICAgIDIwMjEuMDYtMTUtVjI0LjI0IOabtOaNomNkbuWcsOWdgAovLyBAbm90ZSAgICAyMDIxLjA0LTEyLVYyNC4yMyDkv67lpI3osLfmrYzlpJrliJflpLHmlYjnmoTpl67popggJiYg5L+u5aSN6LC35q2M57+76aG15aSx5pWIICYmIOS/ruWkjeiwt+atjOaKpOecvOmXrumimAovLyBAbm90ZSAgICAyMDIxLjA0LTEyLVYyNC4yMSDkv67lpI3osLfmrYzmkJzntKLplJnkvY3nmoTpl67popggJiYg5L+u5aSN6LC35q2M5Zu+54mH5Yqg6L2955qE6Zeu6aKYICYmIOS/ruWkjeiwt+atjOe/u+mhteeahOmXrumimAovLyBAbm90ZSAgICAyMDIxLjAyLTEwLVYyNC4yMCDkv67lpI3osLfmrYzpg6jliIblpLHmlYjnmoTpl67popggJiYg5L+u5aSN55Sx5LqOQkHlpLHmlYjlr7zoh7TnmoTohJrmnKzml6DmlYjnmoTpl67popgKLy8gQG5vdGUgICAgMjAyMS4wMi0wMi1WMjQuMTkg5pWw5o2u5pys5Zyw57yT5a2Y77yM5LiA5a6a56iL5bqm5LiK5L+d6K+B6YeN6KOF5ZCO5pWw5o2u5LiN5Lii5aSxICYmIOS/ruWkjeiwt+atjOmDqOWIhuWGheWuueWkseaViOeahOmXrumimAovLyBAbm90ZSAgICAyMDIwLjEyLTI5LVYyNC4xOCDosIPmlbTkvqfovrnmoI/lip/og73mlYjmnpzvvIzkvJjljJblj4zliJfmmL7npLrmlYjmnpzvvIzlpITnkIZkdWNrZHVja+eahOagt+W8jwovLyBAbm90ZSAgICAyMDIwLjEyLTI5LVYyNC4xNyDosIPmlbTosLfmrYzjgIHnmb7luqblj4zliJfmmL7npLrmlYjmnpwt5ZCE5Liq5YiG6L6o546H77yb5L+u5aSN55m+5bqm6YOo5YiG54K55Ye75aSx5pWI55qE6Zeu6aKY77ybCi8vIEBub3RlICAgIDIwMjAuMTItMjItVjI0LjE2IOiwg+aVtOS7o+eggS3lh4/lsJHoh7Tlkb3lvILluLjvvJvkv67lpI3osLfmrYzlj4zliJfpl67popgKLy8gQG5vdGUgICAgMjAyMC4xMi0xOS1WMjQuMTQg5L+u5aSN6YOo5YiG5YaF5qC45LiK55m+5bqm5aSa5YiX5pi+56S655qE6Zeu6aKY77yb5L+u5aSN6LC35q2M5aSa5YiX55qE5pi+56S66Zeu6aKYCi8vIEBub3RlICAgIDIwMjAuMTItMTgtVjI0LjEzIOS/ruWkjWZhdmljb27lnKjnn6XkuY7kuIrnmoTmjpLniYjpl67popjvvJvkv67lpI1EdWNr5qC35byP5peg5pWI55qE6Zeu6aKY77yb5L+u5aSN5pyA5paw6LC35q2M5Y+M5YiX5aSx5pWI55qE6Zeu6aKYIC0g5bCd6K+V5L+u5aSN6YOo5YiG55So5oi357+76aG15aSx5pWI6Zeu6aKY77yb5L+u5aSN6K6h5pWw5Zmo57yW5Y+35byC5bi455qE6Zeu6aKY77yb5pu05ZCN5bCd6K+V5L+u5aSN5a6e5pWI6Zeu6aKYCi8vIEBub3RlICAgIDIwMjAuMTAtMTktVjI0LjEyIOaLpuaIquaXtuaUr+aMgVVSTOWcsOWdgOeahOWMuemFje+8jOiwg+aVtGZhdmljb27kvJrlvbHlk43moIfpopjmloflrZfpgInkuK3nmoTpl67popjvvJvkv67lpI3osLfmrYzmi6bmiKrmqKHlvI/lpLHmlYjnmoTpl67popjvvIzkv67lpI3osLfmrYznvJblj7fpl67popjvvJvkv67lpI3lv4XlupTlm77niYflgY/lj7PnmoTpl67popgKLy8gQG5vdGUgICAgMjAyMC4wOS0yOS1WMjQuMTEg6ZKI5a+555m+5bqm5b6L5biI5Ye95YaF5a655a+56ISa5pys6L+b6KGM6LCD5pW077yM5omp5bGV4oCc55m+5bqm5LyY5YyW4oCd5bey57uP5rC45LmF5LiL57q/Ci8vIEBub3RlICAgIDIwMjAuMDktMjctVjI0LjEwIOS/ruWkjeeZvuW6puaLpuaIquaooeW8j+eahOmXrumimOS7peWPiuWwj+WcsOWdgOWwvuazqO+8m+S/ruWkjeWlveaQnOeahOaLpuaIquWKn+iDve+8m+S/ruWkjemDqOWIhuagt+W8j+mXrumimAovLyBAbm90ZSAgICAyMDIwLjA5LTEyLVYyNC4wOSDkv67lpI3nv7vpobXlpLHmlYjnmoTpl67popjvvJvmm7TmlrDpg6jliIbmoLflvI/lhoXlrrkKLy8gQG5vdGUgICAgMjAyMC4wOS0xMS1WMjQuMDgg5pu05o2iVnVl55qEY2Ru5Zyw5Z2A77yM5bC96YeP5Yqg5b+r5pWw5o2u55qE6L295YWl6YCf5bqm77yb5Li65LqG5YW85a65c2FmYXJp5bCG55m+5bqm55qEaHR0cHPlnLDlnYDmm7/mjaLkuLrkuoZodHRw5Zyw5Z2A77yb5L+u5aSNZmF2aWNvbuiOt+WPlueahOmXrumimO+8m+WinuWKoGZhdmljb27liqjmgIHliLfmlrDvvJvkv67lpI3pg6jliIbmoLflvI/pl67popgKLy8gQG5vdGUgICAgMjAyMC4wOC0wNi1WMjQuMDcg5L+u5aSN5L+d5a2Y5peg5pWI55qE6Zeu6aKY77yb5L+u5aSN55m+5bqm5Zyo5Y2V5YiX5bGF5Lit55qE5pe25YCZ6ZSZ5L2N55qE6Zeu6aKYCi8vIEBub3RlICAgIDIwMjAuMDgtMDUtVjI0LjA2IOS/ruWkjeiHquWumuS5ieWBtuWwlOaJk+S4jeW8gOeahOmXrumimO+8m+S/ruWkjeWumuaXtuWZqOWPr+iDveS8mumAoOaIkOeahOWkseaViOeahOmXrumimO+8m+S/ruWkjeW9k+WtmOWcqOWkmuS4quiEmuacrOWPr+iDvemAoOaIkOeahOWGsueqgemXrumimAovLyBAbm90ZSAgICAyMDIwLjA4LTAzLVYyNC4wNSDmm7TmlrDkv67lpI3miqTnnLzmqKHlvI/nmoTpl67popjvvJvkv67lpI3mianlsZXkuIrlgbblsJTlpLHmlYjnmoTpl67popjvvJvml6dFZGdl5Ly85LmO57uP5bi45pyJ5L+d5a2Y5LiN55Sf5pWI55qE6Zeu6aKY77yM5rWL6K+V5LiN5piv5oiR55qE5Y6f5ZugCi8vIEBub3RlICAgIDIwMjAuMDgtMDItVjI0LjA0IOWKqOaAgeagt+W8j+WIh+aNou+8jOWkmuWIl+aViOaenOS4gOmUruWIh+aNou+8jOaXoOmcgOWIt+aWsCDkv67lpI3lkITnp43moLflvI/pl67popgg5L+u5aSN5b+F5bqU57+76aG16Zeu6aKYIOa1i+ivleWFvOWuuUdN5ZKMVk0u5b275bqV5LiN5pSv5oyB5pCc54uX5pCc57SiLS3liKvpl67kuLrku4DkuYjvvIzmiJHov5jmg7PlpJrmtLvlh6DlubQKLy8gQG5vdGUgICAgMjAyMC4wNy0yNy1WMjQuMiYzIOabtOaNolZ1ZeS4ujc15Zui55qE5Zyw5Z2AIOS/ruWkjeeZvuW6pueahGxpdGXmqKHlvI/liIfmjaLml6DmlYjnmoTpl67popgKLy8gQG5vdGUgICAgMjAyMC4wNy0yNy1WMjQuMDEg5pu05paw5pSv5oyBTGludXjkuIvnmoRGaXJlZm94IGVtbeS/ruWkjeS4iuasoeaPkOS6pOi/h+S6juedgOaApeWvvOiHtOeahOagt+W8j+acquaPkOS6pCDmm7TmlrDmlK/mjIFEb2dlRG9nZeWkmuWQieaQnOe0oi3kvYbkuI3lpITnkIbph43lrprlkJEKLy8gQG5vdGUgICAgMjAyMC4wNy0yNi1WMjQuMDAg6YOo5YiG5YaF5a655pu05o2i5Li6VnVl5Yid5aeL5YyW77yM5YeP5bCR5LiA5a6a55qE6LWE5rqQ5Y2g55SoICYmIOaWsOWinkR1Y2tHb0dv55qE5qC35byP5pWI5p6cIC0g6ICD6JmR5YiwRHVja0dvR2/nmoTnibnmgKfvvIzkuI3lr7nlhbbov5vooYzlub/lkYrov4fmu6QKLy8gQG5vdGUgICAgMjAyMC4wNy0wOS1WMjMuMzMg5L+u5aSNYmluZ+eahOmhtumDqOWIh+aNoumUmeS9jeeahOmXrumimO+8m+WinuWKoHd3MS5iYWlkdS5jb23ln5/vvJvkv67lpI3lkITnp43moLflvI8o55m+5bqm44CB6LC35q2M44CB5aW95pCc44CB5b+F5bqUKemUmeS9jeeahOmXrumimAovLyBAbm90ZSAgICAyMDIwLjA0LTI0LVYyMy4zMiDniYjmnKzlgJLpgIDvvJrlronlhajotbfop4HvvJrpu5jorqTlhbPpl63mkJzni5fnmoToh6rlrprkuYnln5/lkI3mi6bmiKrlip/og73lkozph43lrprlkJHlip/og70t5Lul5ZCO6ICD6JmR5pu05o2i5pa55byP77yb6buY6K6k5LiN5byA5ZCv6YeN5a6a5ZCR5Yqf6IO944CB6buY6K6k5LiN5byA5ZCv5bm/5ZGK5oum5oiq5Yqf6IO977yb5pu05paw6YOo5YiG6K+05piO5YaF5a6577yb5ZCM5pe25Lmf5a+56YOo5YiG5pSv5oyB5LiN5Yiw5L2N55qE77yM5YW85a655LiN5aW955qE5pWI5p6c5ZCR5aSn5a626K+05LiA5aOw5oqx5q2J77yM5LmL5ZCO5oiR5Lya5pu05Yqg5Yqq5Yqb6K6p5pCc57Si57uT5p6c5pu05Yqg5pa55L6/5p+l55yL5ZKM5L2/55SoCi8vIEBub3RlICAgIDIwMjAuMDMtMjctVjIzLjMxIOS/ruWkjWdvb2dsZeeUseS6jumhtemdoue7k+aehOabtOaWsOWvvOiHtOeahGJsb2Nr5Yqf6IO95aSx5pWI55qE6Zeu6aKY77yM5ZCM5pe25L+u5aSN6LC35q2M5oqk55y85qih5byP5Lmf5aSx5pWI55qE6Zeu6aKY44CC5paw5aKe57+76aG155qE5oyJ6ZKu5LqL5Lu277yM5paw5aKe5L2/55So5Zyo57q/Y29uZmln77yM6YG/5YWN55Sx5LqO6aG16Z2i57uT5p6E5pS55Yqo5Y+I6ZyA6KaB6YeN5paw5o+Q5Lqk6ISa5pys5pu05pawCi8vIEBub3RlICAgIDIwMTcuMDUuMTIgLT4gMjAyMC4wMy0yNiAmJiBWOC42IC0+IFYyMy4zMCDlkITnp43lkITmoLfnmoTljoblj7Lmm7TmlrDorrDlvZXvvIzku47kuIDkuKrniYjmnKzov63ku6PliLDlj6bkuIDkuKrniYjmnKwKLy8gQG5vdGUgICAgMjAxNy4wNS4xMi1WOC40IOaWsOWinu+8mum7mOiupOWxj+iUveiwt+atjOeahOWuieWFqOaQnOe0ouWKn+iDvQovLyBAbm90ZSAgICAyMDE3LjA1LjA1LVY4LjMg5L+u5aSNaW5jbHVkZeiMg+WbtOWkquWwj+WvvOiHtOeahOeZvuW6puefpemBk+eahOWxj+iUvemXrumimAovLyBAbm90ZSAgICAyMDE3LjA1LjA0LVY4LjIg57uI5LqO5L+u5aSN5LqG55m+5bqm55+l6YGT5Zu+54mH5pu/5o2i5LqG5paH5a2X55qE6L+Z5Liq5aSnQlVHOyDpobrkvr/lpITnkIbkuoZzdXBlcmFwaS56aGlkYW8uYmFpZHUuY29tOyDmlrDlop7osLfmrYzmkJzntKLnu5Pmnpzph43lrprlkJHljrvpmaQKLy8gQG5vdGUgICAgMjAxNy4wNS4wNC1WOC4xIOe7iOS6juS/ruWkjeS6hueZvuW6puefpemBk+WbvueJh+abv+aNouS6huaWh+Wtl+eahOi/meS4quWkp0JVR++8jOmhuuS+v+WkhOeQhuS6hnN1cGVyYXBpLnpoaWRhby5iYWlkdS5jb20KLy8gQG5vdGUgICAgMjAxNy4wNS4wNC1WOC4wIOe7iOS6juS/ruWkjeS6hueZvuW6puefpemBk+WbvueJh+abv+aNouS6huaWh+Wtl+eahOi/meS4quWkp0JVR++8jOW+hea1i+ivlQovLyBAbm90ZSAgICAyMDE3LjAzLjI4LVY3LjYg5L+u5aSN5ZyoVmlvbGVudE1vbmtleeS4iueahOS4jeaUr+aMgeeahOmXrumimAovLyBAbm90ZSAgICAyMDE3LjAzLjI4LVY3LjUg5bCd6K+V5L+u5aSNY2hyb21l5LiK55qE6Zeu6aKYCi8vIEBub3RlICAgIDIwMTcuMDMuMjEtVjcuNCDlsJ3or5XlpITnkIZFZGdl5LiK5LiN5pSv5oyB55qE6Zeu6aKY77yM57uT5p6c5Y+R546w5pivRWRnZeacrOi6q+eahFRhbXBlck1vbmtleeaUr+aMgeaciemXrumimAovLyBAbm90ZSAgICAyMDE3LjAzLjE5LVY3LjMg5L+u5aSN5omT5byA55m+5bqm5LmL5ZCO5YaN5qyh54K55Ye74oCc55m+5bqm5LiA5LiL4oCd5a+86Ie055qE5peg5rOV5pu05paw6YeN5a6a5ZCR6Zeu6aKYCi8vIEBub3RlICAgIDIwMTcuMDMuMTktVjcuMiDmnKrnn6Xljp/lm6BjaHJvbWXnmoRNdXRhdGlvbk9ic2VydmVy5peg5rOV5L2/55So5LqG77yM57un57ut5Zue5b2S5Lul5YmN55qERE9NTm9kZUluc2VydGVkCi8vIEBub3RlICAgIDIwMTcuMDIuMTctVjcuMCDkv67lpI3mkJzni5fnmoTmkJzntKLnu5Pmnpzph43lrprlkJHpl67popgr5pS55Liq5ZCN5a2XCi8vIEBub3RlICAgIDIwMTcuMDIuMTctVjYuOSDkv67lpI3mkJzni5fnmoTmkJzntKLnu5Pmnpzph43lrprlkJHpl67popgKLy8gQG5vdGUgICAgMjAxNi4xMC4yNy1WNi43IOS/ruWkjeS6huS7peWJjeeahOmHjeWkjeivt+axgu+8jOeOsOWcqOeahOivt+axguaVsOW6lOivpeWwj+S6huW+iOWkmu+8jOe9kee7nOS5n+WwseS4jeWNoeS6hu+8jOaEn+inieiQjOiQjOWTkgovLyBAbm90ZSAgICAyMDE2LjA0LjI0LVY2LjYg5oGi5aSN5Lul5YmN55qE54mI5pys77yM5Zug5Li65YW85a655oCn6Zeu6aKYCi8vIEBub3RlICAgIDIwMTUuMTIuMDEtVjUuMCDliqDlhaXmkJzni5fnmoTmlK/mjIHvvIzkvYbmmK/mlK/mjIHkuI3mmK/lvojlpb0KLy8gQG5vdGUgICAgMjAxNS4xMS4yNS1WMi4wIOS8mOWMlu+8jOW3sue7j+aYr+ecn+WunuWcsOWdgOeahOS4jeWGjeWwneivleiOt+WPlgovLyBAbm90ZSAgICAyMDE1LjExLjI1LVYxLjAg5a6M5oiQ5Y675o6J55m+5bqm6YeN5a6a5ZCR55qE5Yqf6IO9Ci8vIEByZXNvdXJjZSAgYmFpZHVDb21tb25TdHlsZSAgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvYmFpZHVDb21tb25TdHlsZS5jc3M/dD0yNC4yNgovLyBAcmVzb3VyY2UgIGJhaWR1T25lUGFnZVN0eWxlICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2JhaWR1T25lUGFnZVN0eWxlLmNzcz90PTI0LjI2Ci8vIEByZXNvdXJjZSAgYmFpZHVUd29QYWdlU3R5bGUgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvYmFpZHVUd29QYWdlU3R5bGUuY3NzP3Q9MjQuMjYKLy8gQHJlc291cmNlICBiYWlkdUxpdGVTdHlsZSAgICAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9iYWlkdUxpdGVTdHlsZS5jc3M/dD0yNC4yNgovLyBAcmVzb3VyY2UgIGdvb2dsZUNvbW1vblN0eWxlICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2dvb2dsZUNvbW1vblN0eWxlLmNzcz90PTI0LjI2Ci8vIEByZXNvdXJjZSAgZ29vZ2xlT25lUGFnZVN0eWxlIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvZ29vZ2xlT25lUGFnZVN0eWxlLmNzcz90PTI0LjI2Ci8vIEByZXNvdXJjZSAgZ29vZ2xlVHdvUGFnZVN0eWxlIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvZ29vZ2xlVHdvUGFnZVN0eWxlLmNzcz90PTI0LjI2Ci8vIEByZXNvdXJjZSAgYmluZ0NvbW1vblN0eWxlICAgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvYmluZ0NvbW1vblN0eWxlLmNzcz90PTI0LjI2Ci8vIEByZXNvdXJjZSAgYmluZ09uZVBhZ2VTdHlsZSAgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvYmluZ09uZVBhZ2VTdHlsZS5jc3M/dD0yNC4yNgovLyBAcmVzb3VyY2UgIGJpbmdUd29QYWdlU3R5bGUgICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2JpbmdUd29QYWdlU3R5bGUuY3NzP3Q9MjQuMjYKLy8gQHJlc291cmNlICBkdWNrQ29tbW9uU3R5bGUgICAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9kdWNrQ29tbW9uU3R5bGUuY3NzP3Q9MjQuMjYKLy8gQHJlc291cmNlICBkdWNrT25lUGFnZVN0eWxlICAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9kdWNrT25lUGFnZVN0eWxlLmNzcz90PTI0LjI2Ci8vIEByZXNvdXJjZSAgZHVja1R3b1BhZ2VTdHlsZSAgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvZHVja1R3b1BhZ2VTdHlsZS5jc3M/dD0yNC4yNgovLyBAcmVzb3VyY2UgIGRvZ2VDb21tb25TdHlsZSAgICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2RvZ2VDb21tb25TdHlsZS5jc3M/dD0yNC4yNgovLyBAcmVzb3VyY2UgIGRvZ2VPbmVQYWdlU3R5bGUgICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL2RvZ2VPbmVQYWdlU3R5bGUuY3NzP3Q9MjQuMjYKLy8gQHJlc291cmNlICBkb2dlVHdvUGFnZVN0eWxlICAgaHR0cDovL2liYWlkdS50dWppZHUuY29tL25ld2Nzcy9kb2dlVHdvUGFnZVN0eWxlLmNzcz90PTI0LjI2Ci8vIEByZXNvdXJjZSAgTWFpbkh1WWFuU3R5bGUgICAgIGh0dHA6Ly9pYmFpZHUudHVqaWR1LmNvbS9uZXdjc3MvSHVZYW5TdHlsZS5jc3M/dD0yNC4yNgovLyBAcmVzb3VyY2UgIFNpdGVDb25maWdSdWxlcyAgICBodHRwOi8vaWJhaWR1LnR1amlkdS5jb20vbmV3Y3NzL1NpdGVDb25maWdSdWxlcy5jb25mP3Q9MjQuMjYKLy8gQHJlcXVpcmUgaHR0cHM6Ly9jZG4uc3RhdGljZmlsZS5vcmcvdnVlLzIuNi4xMS92dWUubWluLmpzCi8vIEByZXF1aXJlIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vdnVlQDIuNi4xMi9kaXN0L3Z1ZS5taW4uanMKLy8gQHJlcXVpcmUgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9sZXNzX2Jyb3dzZXJfZml4QDQuMS4yL2Rpc3QvbGVzcy5qcwovLyBAZ3JhbnQgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgIEdNLmdldFZhbHVlCi8vIEBncmFudCAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgR00uc2V0VmFsdWUKLy8gQGdyYW50ICAgIEdNX2FkZFN0eWxlCi8vIEBncmFudCAgICBHTV9nZXRSZXNvdXJjZVVSTAovLyBAZ3JhbnQgICAgR01fbGlzdFZhbHVlcwovLyBAZ3JhbnQgICAgR01fZ2V0UmVzb3VyY2VVcmwKLy8gQGdyYW50ICAgIEdNLmdldFJlc291cmNlVXJsCi8vIEBncmFudCAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgR01fZ2V0UmVzb3VyY2VUZXh0Ci8vIEBncmFudCAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kCi8vIEBncmFudCAgICB1bnNhZmVXaW5kb3cKLy8gQG5hbWVzcGFjZSAxMzUzNDY0NTM5QHFxLmNvbQovLyA9PS9Vc2VyU2NyaXB0PT0KLy8gY2FsYyhYMSh2dykgKyBYMihweCkpIC0+IEIocHgpIOS9v+eUqCBodHRwOi8vd3d3Lnl1bnN1YW4uaW5mby9tYXRyaXhjb21wdXRhdGlvbnMvc29sdmVsaW5lYXJzeXN0ZW1zLmh0bWwg6L+b6KGM6K6h566XCgohZnVuY3Rpb24gKCkgewogIGxldCBpc2RlYnVnID0gZmFsc2U7CiAgbGV0IGlzTG9jYWxEZWJ1ZyA9IGlzZGVidWcgfHwgZmFsc2U7CiAgbGV0IGRlYnVnID0gaXNkZWJ1ZyA/IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkgOiAoKT0+e30KICBsZXQgYWNDc3NMb2FkRmxhZyA9IGZhbHNlOwoKICBsZXQgaW5FeHRNb2RlID0gdHlwZW9mIChpc0V4dGVuc2lvbikgIT09ICJ1bmRlZmluZWQiOwogIGxldCBpbkdNTW9kZSA9IHR5cGVvZiAoR01faW5mby5zY3JpcHRIYW5kbGVyKSAhPT0gInVuZGVmaW5lZCI7IC8vID0gIkdyZWFzZW1vbmtleSIgfHwgIlRhbXBlcm1vbmtleSIgfHwgIlZpb2xlbnRNb25rZXkiCiAgLy8g5paw54mI5pys55qER3JlYXNlTW9ua2V55piv5bim5pyJc2NyaXB0SGFuZGxlcu+8jOS9huaYr+ayoeaciUdNX2dldFJlc291cmNlVGV4dO+8m+aXp+eJiOacrOS4jeW4pnNjcmlwdEhhbmRsZXLvvIzkvYbmmK/mnIlHTV9nZXRSZXNvdXJjZVRleHQKICAvLyBsZXQgaXNOZXdHTSA9IHR5cGVvZihHTV9pbmZvLnNjcmlwdEhhbmRsZXIpICE9PSAidW5kZWZpbmVkIiAmJiBHTV9pbmZvLnNjcmlwdEhhbmRsZXIudG9Mb3dlckNhc2UoKSA9PT0gImdyZWFzZW1vbmtleSI7CiAgbGV0IGlzTmV3R00gPSBmYWxzZTsKICAvLyBpbkV4dE1vZGUgJiBpbkdNTW9kZQogIC8vIHRydWUgICAgdHJ1ZSA95omp5bGV5LiL55qER03ku6PnoIEg5LiN5omn6KGMCiAgLy8gdHJ1ZSAgICBmYWxzZT3mianlsZXkuIvku6PnoIEg5omn6KGMCiAgLy8gZmFsc2UgIHRydWUgPeS7hUdN5Luj56CBIOaJp+ihjAogIC8vIGZhbHNlICBmYWxzZT3lvILluLgg5L2G5piv6L+Y5piv6KaB5omn6KGM5Luj56CBCiAgZGVidWcoIueoi+W6j+W8gOWniyIpOwogIGlmIChpbkV4dE1vZGUgPT09IHRydWUgJiYgaW5HTU1vZGUgPT09IHRydWUgfHwgdHlwZW9mKHdpbmRvdy5BQzY2NkluaXQpICE9PSAndW5kZWZpbmVkJykgewogICAgY29uc29sZS5sb2coIuaJqeWxleaooeW8jy3ohJrmnKzkuI3lkK/nlKgiKTsKICAgIHJldHVybjsKICB9CiAgd2luZG93LkFDNjY2SW5pdCA9IHRydWUKICBpZiAodHlwZW9mIChHTSkgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAvLyDov5nkuKrmmK9WaW9sZW50TW9ua2V555qE5pSv5oyB6YCJ6aG5CiAgICBHTSA9IHt9OwogICAgR00uc2V0VmFsdWUgPSBHTV9zZXRWYWx1ZTsKICAgIEdNLmdldFZhbHVlID0gR01fZ2V0VmFsdWU7CiAgfQogIChmdW5jdGlvbiAoKSB7CiAgICBkZWJ1Zygi56iL5bqP5omn6KGMIik7CiAgICBsZXQgbmVlZERpc3BsYXlOZXdGdW4gPSB0cnVlOyAvLyDmnKzmrKHmm7TmlrDmmK/lkKbmnInmlrDlip/og73pnIDopoHlsZXnpLoKICAgIGlmICh3aW5kb3cuTm9kZUxpc3QgJiYgIU5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoKSB7CiAgICAgIE5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzQXJnKSB7CiAgICAgICAgdGhpc0FyZyA9IHRoaXNBcmcgfHwgd2luZG93OwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzW2ldLCBpLCB0aGlzKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgICAvLyBsZXQgUmVkaXJlY3RNYXAgPSBuZXcgTWFwKCk7CiAgICBsZXQgQUNDb25maWcgPSB7fTsKICAgIGxldCBEQkNvbmZpZyA9IHt9OyAvLyDku4XkvZzkuLrmma7pgJpBQ0NvbmZpZ+eahOWOn+Wni+Wkh+S7ve+8jOWcqOWFtuS7lumdnuWFs+mUruS9jee9ruaXtui/m+ihjOS/neWtmOS9v+eUqAogICAgLyrlrZjlnKjlr7nmnKrliJ3lp4vljJblj5jph4/nmoTliJ3lp4vljJbotYvlgLwt5peg6ZyA5ouF5b+D6L+t5Luj5YW85a656Zeu6aKYKi8KICAgIGxldCBEZWZhdWx0Q29uZmlnID0gewogICAgICBpc1JlZGlyZWN0RW5hYmxlOiBmYWxzZSwgIC8vIOaYr+WQpuW8gOWQr+mHjeWumuWQkeWKn+iDvQogICAgICBpc0Fkc0VuYWJsZTogZmFsc2UsIC8vIOaYr+WQpuW8gOWQr+WOu+W5v+WRiuaooeW8jwogICAgICBpc0F1dG9wYWdlOiB0cnVlLCAgLy8g5piv5ZCm5byA5ZCv6Ieq5Yqo57+76aG15Yqf6IO9CiAgICAgIGlzQmxvY2tFbmFibGU6IGZhbHNlLCAvLyDmmK/lkKblvIDlkK/ljrvmi6bmiKrmqKHlvI8KICAgICAgaXNCbG9ja0Rpc3BsYXk6IGZhbHNlLCAvLyDmmK/lkKbliKDpmaTlt7Lmi6bmiKrnmoTmnaHnm64KICAgICAgaXNCbG9ja0J0bk5vdERpc3BsYXk6IGZhbHNlLCAvLyDmmK/lkKbmmL7npLpibG9ja+aMiemSrgogICAgICBBZHNTdHlsZUVuYWJsZTogdHJ1ZSwgLy8g5piv5ZCm5byA5ZCv6Ieq5a6a5LmJ5qC35byP5qih5byPCgogICAgICBiYWlkdTogewogICAgICAgIG5hbWU6ICdiYWlkdScsICAvLyBDU1MgbG9hZCDnmoTliY3nvIDmoIflv5cKICAgICAgICBBZHNTdHlsZU1vZGU6ICcxJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8t55m+5bqmCiAgICAgIH0sCiAgICAgIGdvb2dsZTogewogICAgICAgIG5hbWU6ICdnb29nbGUnLAogICAgICAgIEFkc1N0eWxlTW9kZTogJzMnLCAvLyAwLeS4jeW4pmNzc++8mzEt5Y2V5YiX6Z2g5bem77ybMi3ljZXliJflsYXkuK3vvJszLeWPjOWIl+WxheS4rQogICAgICAgIEh1WWFuTW9kZTogZmFsc2UsIC8vIOaKpOecvOaooeW8jy3osLfmrYwKICAgICAgfSwKICAgICAgYmluZzogewogICAgICAgIG5hbWU6ICdiaW5nJywKICAgICAgICBBZHNTdHlsZU1vZGU6ICczJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8t5b+F5bqUCiAgICAgIH0sCiAgICAgIGR1Y2s6IHsKICAgICAgICBuYW1lOiAnZHVjaycsCiAgICAgICAgQWRzU3R5bGVNb2RlOiAnMycsIC8vIDAt5LiN5bimY3Nz77ybMS3ljZXliJfpnaDlt6bvvJsyLeWNleWIl+WxheS4re+8mzMt5Y+M5YiX5bGF5LitCiAgICAgICAgSHVZYW5Nb2RlOiBmYWxzZSwgLy8g5oqk55y85qih5byPLUR1Y2tHT0dPCiAgICAgIH0sCiAgICAgIGRvZ2U6IHsKICAgICAgICBuYW1lOiAnZG9nZScsCiAgICAgICAgQWRzU3R5bGVNb2RlOiAnMycsIC8vIDAt5LiN5bimY3Nz77ybMS3ljZXliJfpnaDlt6bvvJsyLeWNleWIl+WxheS4re+8mzMt5Y+M5YiX5bGF5LitCiAgICAgICAgSHVZYW5Nb2RlOiBmYWxzZSwgLy8g5oqk55y85qih5byPLUR1Y2tHT0dPCiAgICAgIH0sCiAgICAgIHNvZ291OiB7CiAgICAgICAgbmFtZTogJ3NvZ291JywKICAgICAgICBBZHNTdHlsZU1vZGU6ICcxJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8t5pCc54uXCiAgICAgIH0sCiAgICAgIHpoaWh1OiB7CiAgICAgICAgbmFtZTogJ3poaWh1JywKICAgICAgICBBZHNTdHlsZU1vZGU6ICcwJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8t5pCc54uXCiAgICAgIH0sCiAgICAgIG90aGVyOiB7CiAgICAgICAgbmFtZTogJ290aGVyJywKICAgICAgICBBZHNTdHlsZU1vZGU6ICcwJywgLy8gMC3kuI3luKZjc3PvvJsxLeWNleWIl+mdoOW3pu+8mzIt5Y2V5YiX5bGF5Lit77ybMy3lj4zliJflsYXkuK0KICAgICAgICBIdVlhbk1vZGU6IGZhbHNlLCAvLyDmiqTnnLzmqKHlvI8t5pCc54uXCiAgICAgIH0sCgogICAgICBTdHlsZV9CYWlkdUxpdGU6IGZhbHNlLCAvLyBCYWlkdV9MaXRl5qC35byP6KGoCgogICAgICBkZWZhdWx0SHVZYW5Db2xvcjogIiNERUYxRUYiLAogICAgICBpc1VzZXJDb2xvckVuYWJsZTogdHJ1ZSwgLy8g5piv5ZCm5byA5ZCvZmF2aWNvbuWbvuagh+WKn+iDvQogICAgICBpc0Zhdmljb25FbmFibGU6IHRydWUsIC8vIOaYr+WQpuW8gOWQr2Zhdmljb27lm77moIflip/og70KICAgICAgZGVmYXVsdEZhdmljb25Vcmw6ICJodHRwczovL2FlMDEuYWxpY2RuLmNvbS9rZi9IVEIxZFJZMFg4T0QzS1ZqU1pGRnE2QW45cFhheS5qcGciLCAvLyDpu5jorqTlm77moIflnLDlnYAKICAgICAgZG9EaXNhYmxlU3VnOiB0cnVlLCAvLyDmmK/lkKbnpoHmraLnmb7luqbmkJzntKLpooTmtYsKICAgICAgaXNSaWdodERpc3BsYXlFbmFibGU6IHRydWUsIC8vIOaYr+WQpuW8gOWQr+WPs+S+p+i+ueagjwogICAgICBpc0NvdW50ZXJFbmFibGU6IGZhbHNlLCAvLyDmmK/lkKbmmL7npLrorqHmlbDlmagKICAgICAgaXNBTGluZUVuYWJsZTogZmFsc2UsIC8vIOaYr+WQpuemgeatouS4i+WIkue6vwogICAgICBpc1VzZXJTdHlsZUVuYWJsZTogZmFsc2UsIC8vIOaYr+WQpuW8gOWQr+iHquWumuS5ieagt+W8jwogICAgICBub3JtYWxpemVEdWNrOiB0cnVlLCAvLyDmmK/lkKbmjInnhafluLjnlKjkuaDmg6/ljrvphY3nva5EdWNrRHVja0dvCiAgICAgIGFjY2VwdExpY2Vuc2U6IGZhbHNlLAogICAgICBpc0VuTGFuZzogZmFsc2UsCiAgICAgIGlzR29vbGVJbkJhaWR1TW9kZUVuYWJsZTogZmFsc2UsIC8vIOaYr+WQpuW8gOWQr+iwt+atjOaQnOe0oue7k+aenOmhteeahOeZvuW6puWbvuagh+aYvuekugogICAgICBVc2VyQmxvY2tMaXN0OiBbXSwKICAgICAgVXNlclN0eWxlVGV4dDoKICAgICAgICBgLyoq6K6h5pWw5Zmo55qE6aKc6Imy5qC35byPKi8KZGl2IC5BQy1Db3VudGVyVHsKICBiYWNrZ3JvdW5kOiAjRkQ5OTk5Owp9Ci8qKuWPs+S+p+agj+eahOagt+W8jy3lhbblrp7kuI3lvIDlkK/mm7Tlpb3nnIvkuIDkupsqLwojY29udGVudF9yaWdodHsKICBwYWRkaW5nOiAyMHB4IDE1cHggMTVweDsKICBib3JkZXItcmFkaXVzOiA1cHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGJveC1zaGFkb3c6IDAgMCAyMHB4IDJweCByZ2JhKDAsIDAsIDAsIC4xKTsKICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMCAyMHB4IDJweCByZ2JhKDAsIDAsIDAsIC4xKTsKICAtbW96LWJveC1zaGFkb3c6IDAgMCAyMHB4IDJweCByZ2JhKDAsIDAsIDAsIC4xKTsKfQpib2R5W2JhaWR1XSB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9CmJvZHlbYmFpZHVdOmJlZm9yZSB7CiAgcG9zaXRpb246IGZpeGVkOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICBjb250ZW50OiAnJzsKICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2h0dHBzOi8vaW1nLnR1amlkdS5jb20vaW1hZ2UvNWZkZGU4NDY4NDIzZS5qcGcnKTsKICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgYXV0bzsKICBvcGFjaXR5OiAxOyAvKuiDjOaZr+WbvumAj+aYjuW6pj0wLjjvvIzmnIDlpKcxKi8KfQovKirpmpDol4/pppbpobXnmoTlpKflm77moIct5L+u5aSN5Y+v6IO95a+86Ie05aSW5o+05qC35byP5byC5bi4KiovCmJvZHlbYmFpZHVdICNzX2xnX2ltZ19uZXd7CiAgZGlzcGxheTpub25lICFpbXBvcnRhbnQ7Cn0KYm9keVtiYWlkdV0gLmMtY29udGFpbmVyewogIGJvcmRlci1yYWRpdXM6IDVweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LCAwLjMpICFpbXBvcnRhbnQ7IC8q55m+5bqm5pCc57Si5Z2X5L2T55qE6aKc6Imy77yb6YCP5piO5bqmPTAuMe+8jOacgOWkpzEqLwp9CmJvZHlbYmFpZHVdIC5jLWNvbnRhaW5lciBoM3sKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI0OCwyNDgsMjQ4LCAwLjMpICFpbXBvcnRhbnQ7IC8q55m+5bqm5pCc57Si5Z2X5L2TIC0g5qCH6aKY55qE6aKc6Imy77yb6YCP5piO5bqmPTAuMe+8jOacgOWkpzEqLwp9YCwKICAgICAgb2xkVmVyc2lvbjogIiIsCiAgICAgIGxhc3RTYXZlVGltZTogbmV3IERhdGUoKS5nZXRUaW1lKCksCiAgICB9OwogICAgbGV0IENPTlNUID0gewogICAgICBoYXNOZXdGdW5jTmVlZERpc3BsYXk6IHRydWUsCiAgICAgIHNvcnRJbmRleDogMSwKICAgICAgaXNHb29nbGVJbWFnZVVybDogZmFsc2UsCiAgICAgIGlzR29vZ2xlU3BlY2lhbDogZmFsc2UsIC8vIOWIpOaWreaYr+WQpuWtmOWcqCNyc28+Lmc7IHRydWU95a2Y5ZyoCiAgICAgIHVzZUl0ZW06IHt9LAogICAgICBTdHlsZU1hbmdlcjogZnVuY3Rpb24gKCkgewogICAgICB9LAogICAgfTsKCiAgICB2YXIgY3VyU2l0ZSA9IHsKICAgICAgU2l0ZVR5cGVJRDogMSwgIC8vIOW9k+WJjeermeeCueeahElECiAgICAgIE1haW5UeXBlOiAiIiwgICAgLy8g5Li75L2T6IqC54K577yM5b6I5aSa5Liq55qE54i26IqC54K5CiAgICAgIFN0eXBlX05vcm1hbDogIiIsIC8vIOmHjeWumuWQkemAieaLqeWZqO+8jOWPquacieeZvuW6pi3mkJzni5ct5aW95pCcCiAgICAgIEZhdmljb25UeXBlOiAiIiwgIC8vIGZhdmljb27nmoTln5/lkI3mo4Dmn6XlmahjaXRl77yM55So5LqO6I635Y+WaG9zdOeUqAogICAgICBGYXZpY29uQWRkVG86ICIiLCAvLyBmYXZpY29u6YCJ5oup5Zmo77yM55So5LqO5o+S5YWl5YiwdGl0bGXkuYvliY3nmoQKICAgICAgQ291bnRlclR5cGU6ICIiLCAgLy8g6K6h5pWw5Zmo5re75Yqg55qE5L2N572u77yM5LiA6Iis5ZKMZmF2aWNvbuS9jee9ruS4gOiHtAogICAgICBCbG9ja1R5cGU6ICIiLCAgLy8g5bGP6JS95oyJ6ZKu55qE5L2N572u77yM5LiA6Iis5ZyodGl0bGXkuYvlkI4KICAgIH07CiAgICBsZXQgREJTaXRlID0gewogICAgICBiYWlkdTogewogICAgICAgIFNpdGVUeXBlSUQ6IDEsCiAgICAgICAgTWFpblR5cGU6ICIjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciIsCiAgICAgICAgU3R5cGVfTm9ybWFsOiAiaDMudD5hLCAuYy1jb250YWluZXIgYXJ0aWNsZSBhIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5jLXNob3d1cmwiLAogICAgICAgIEZhdmljb25BZGRUbzogImgzIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNjb250ZW50X2xlZnQ+I2RvdWJsZT5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dLCNjb250ZW50X2xlZnQ+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsCiAgICAgICAgcGFnZXI6IHsKICAgICAgICAgIG5leHRMaW5rOiAnLy9kaXZbQGlkPSJwYWdlIl0vL2FbY29udGFpbnModGV4dCgpLCLkuIvkuIDpobUiKV1bQGhyZWZdJywKICAgICAgICAgIHBhZ2VFbGVtZW50OiAiY3NzO2RpdiNjb250ZW50X2xlZnQgPiAqIiwKICAgICAgICAgIEhUX2luc2VydDogWyJjc3M7ZGl2I2NvbnRlbnRfbGVmdCIsIDJdLAogICAgICAgICAgcmVwbGFjZUU6ICJjc3M7I3BhZ2UiLAogICAgICAgICAgc3R5bGlzaDogIi5hdXRvcGFnZXJpemVfcGFnZV9pbmZvLCBkaXYuc3Atc2VwYXJhdG9yIHttYXJnaW4tYm90dG9tOiAxMHB4ICFpbXBvcnRhbnQ7fSIsCiAgICAgICAgfQogICAgICB9LAogICAgICBzb2dvdTogewogICAgICAgIFNpdGVUeXBlSUQ6IDIsCiAgICAgICAgTWFpblR5cGU6ICIjbWFpbiAucmVzdWx0cz5kaXYiLAogICAgICAgIFN0eXBlX05vcm1hbDogImgzLnB0PmEsIGgzLnZyVGl0bGU+YSIsCiAgICAgICAgRmF2aWNvblR5cGU6ICJjaXRlW2lkKj0nY2FjaGVyZXN1bHRfaW5mb18nXSIsCiAgICAgICAgRmF2aWNvbkFkZFRvOiAiaDMiLAogICAgICAgIENvdW50ZXJUeXBlOiAiLnJlc3VsdHM+ZGl2IiwKICAgICAgICBCbG9ja1R5cGU6ICJoMyBhIiwKICAgICAgICBwYWdlcjogewogICAgICAgICAgbmV4dExpbms6ICIvL2RpdltAaWQ9XCJwYWdlYmFyX2NvbnRhaW5lclwiXS8vYVtAaWQ9XCJzb2dvdV9uZXh0XCJdIiwKICAgICAgICAgIHBhZ2VFbGVtZW50OiAiLy9kaXZbQGNsYXNzPVwicmVzdWx0c1wiXS9kaXYiLAogICAgICAgICAgSFRfaW5zZXJ0OiBbIi8vZGl2W0BjbGFzcz1cInJlc3VsdHNcIl0iLCAyXSwKICAgICAgICAgIHJlcGxhY2VFOiAiaWQoXCJwYWdlYmFyX2NvbnRhaW5lclwiKSIKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGhhb3NvdTogewogICAgICAgIFNpdGVUeXBlSUQ6IDMsCiAgICAgICAgTWFpblR5cGU6ICIucmVzLWxpc3QiLAogICAgICAgIFN0eXBlX05vcm1hbDogIi5yZXMtbGlzdCBoMz5hIiwKICAgICAgICBGYXZpY29uVHlwZTogImNpdGUiLAogICAgICAgIEZhdmljb25BZGRUbzogImgzIiwKICAgICAgICBDb3VudGVyVHlwZTogIi5yZXN1bHRzPmRpdiIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsCiAgICAgICAgcGFnZXI6IHsKICAgICAgICAgIG5leHRMaW5rOiAiLy9kaXZbQGlkPSdwYWdlJ10vL2FbdGV4dCgpPSfkuIvkuIDpobU+J10gfCBpZCgnc25leHQnKSIsCiAgICAgICAgICBwYWdlRWxlbWVudDogIi8vZGl2W0BpZD0nY29udGFpbmVyJ10vZGl2IiwKICAgICAgICAgIEhUX2luc2VydDogWyIvL2RpdltAaWQ9J2NvbnRhaW5lciddIiwgMl0sCiAgICAgICAgICByZXBsYWNlRTogImlkKCdwYWdlJykiCiAgICAgICAgfQogICAgICB9LAogICAgICBnb29nbGU6IHsKICAgICAgICBTaXRlVHlwZUlEOiA0LAogICAgICAgIE1haW5UeXBlOiAiI3JzbyAuZyIsCiAgICAgICAgRmF2aWNvblR5cGU6ICIuaVVoMzAiLAogICAgICAgIEZhdmljb25BZGRUbzogImgzIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNyc28gLmcgaDMsLl95RT5kaXZbY2xhc3N+PV9ra10gaDMiLAogICAgICAgIEJsb2NrVHlwZTogIi5yYz4ucj5hIiwKICAgICAgICBwYWdlcjogewogICAgICAgICAgbmV4dExpbms6ICdpZCgicG5uZXh0IikgfCBpZCgibmF2YmFyIG5hdmNudCBuYXYiKS8vdGRbc3Bhbl0vZm9sbG93aW5nLXNpYmxpbmc6OnRkWzFdL2EgfCBpZCgibm4iKS9wYXJlbnQ6OmEnLAogICAgICAgICAgcGFnZUVsZW1lbnQ6ICcvL2RpdltAaWQ9InJlcyJdJywKICAgICAgICAgIEhUX2luc2VydDogWyJjc3M7I3JlcyIsIDJdLAogICAgICAgICAgcmVwbGFjZUU6ICcvL2RpdltAaWQ9Im5hdmNudCJdIHwgLy9kaXZbQGlkPSJyY250Il0vL2RpdltAcm9sZT0ibmF2aWdhdGlvbiJdJwogICAgICAgIH0KICAgICAgfSwKICAgICAgYmluZzogewogICAgICAgIFNpdGVUeXBlSUQ6IDUsCiAgICAgICAgTWFpblR5cGU6ICIjYl9yZXN1bHRzPmxpIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5iX2F0dHJpYnV0aW9uPmNpdGUiLAogICAgICAgIEZhdmljb25BZGRUbzogImgyIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYW5zXT5oMiwjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2FsZ29dPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIiLAogICAgICAgIEJsb2NrVHlwZTogImgyIGEiLAogICAgICAgIHBhZ2VyOiB7CiAgICAgICAgICBuZXh0TGluazogIi8vYVtjb250YWlucyhAY2xhc3MsXCJzYl9wYWdOXCIpXSIsCiAgICAgICAgICBwYWdlRWxlbWVudDogImlkKFwiYl9yZXN1bHRzXCIpL2xpW25vdChjb250YWlucyhAY2xhc3MsXCJiX3BhZ1wiKSBvciBjb250YWlucyhAY2xhc3MsXCJiX2FucyBiX3RvcFwiKSldIiwKICAgICAgICAgIEhUX2luc2VydDogWyJpZChcImJfcmVzdWx0c1wiKS9saVtAY2xhc3M9XCJiX3BhZ1wiXSIsIDFdLAogICAgICAgICAgcmVwbGFjZUU6ICJpZChcImJfcmVzdWx0c1wiKS8vbmF2W0Byb2xlPVwibmF2aWdhdGlvblwiXSIsCiAgICAgICAgfQogICAgICB9LAogICAgICBkdWNrOiB7CiAgICAgICAgU2l0ZVR5cGVJRDogMTAsCiAgICAgICAgTWFpblR5cGU6ICIjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCIsCiAgICAgICAgRmF2aWNvblR5cGU6ICIucmVzdWx0c19saW5rc19kZWVwIC5yZXN1bHRfX3VybF9fZG9tYWluIiwKICAgICAgICBGYXZpY29uQWRkVG86ICJoMiIsCiAgICAgICAgQ291bnRlclR5cGU6ICIjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDIgYSIsCiAgICAgICAgcGFnZXI6IHsKICAgICAgICAgIG5leHRMaW5rOiAiLy9hW2NvbnRhaW5zKEBjbGFzcyxcInNiX3BhZ05cIildIiwKICAgICAgICAgIHBhZ2VFbGVtZW50OiAiaWQoXCJiX3Jlc3VsdHNcIikvbGlbbm90KGNvbnRhaW5zKEBjbGFzcyxcImJfcGFnXCIpIG9yIGNvbnRhaW5zKEBjbGFzcyxcImJfYW5zIGJfdG9wXCIpKV0iLAogICAgICAgICAgSFRfaW5zZXJ0OiBbImlkKFwiYl9yZXN1bHRzXCIpL2xpW0BjbGFzcz1cImJfcGFnXCJdIiwgMV0sCiAgICAgICAgICByZXBsYWNlRTogImlkKFwiYl9yZXN1bHRzXCIpLy9uYXZbQHJvbGU9XCJuYXZpZ2F0aW9uXCJdIiwKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRvZ2U6IHsKICAgICAgICBTaXRlVHlwZUlEOiAxMSwKICAgICAgICBNYWluVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fdXJsX19kb21haW4iLAogICAgICAgIEZhdmljb25BZGRUbzogImgyIiwKICAgICAgICBDb3VudGVyVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIiwKICAgICAgICBCbG9ja1R5cGU6ICJoMiBhIiwKICAgICAgICBwYWdlcjogewogICAgICAgICAgbmV4dExpbms6ICIvL2FbY29udGFpbnMoQGNsYXNzLFwic2JfcGFnTlwiKV0iLAogICAgICAgICAgcGFnZUVsZW1lbnQ6ICJpZChcImJfcmVzdWx0c1wiKS9saVtub3QoY29udGFpbnMoQGNsYXNzLFwiYl9wYWdcIikgb3IgY29udGFpbnMoQGNsYXNzLFwiYl9hbnMgYl90b3BcIikpXSIsCiAgICAgICAgICBIVF9pbnNlcnQ6IFsiaWQoXCJiX3Jlc3VsdHNcIikvbGlbQGNsYXNzPVwiYl9wYWdcIl0iLCAxXSwKICAgICAgICAgIHJlcGxhY2VFOiAiaWQoXCJiX3Jlc3VsdHNcIikvL25hdltAcm9sZT1cIm5hdmlnYXRpb25cIl0iLAogICAgICAgIH0KICAgICAgfSwKICAgICAgbUJhaWR1OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogNiwKICAgICAgICBNYWluVHlwZTogIiNiX3Jlc3VsdHM+bGkiLAogICAgICAgIEZhdmljb25UeXBlOiAiLmJfYXR0cmlidXRpb24+Y2l0ZSIsCiAgICAgICAgRmF2aWNvbkFkZFRvOiAiaDIiLAogICAgICAgIENvdW50ZXJUeXBlOiAiI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbnNdPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIsI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXT5oMiIsCiAgICAgICAgQmxvY2tUeXBlOiAiaDIgYSIsCiAgICAgIH0sCiAgICAgIHpoaWh1OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogNywKICAgICAgfSwKICAgICAgYmFpZHVfeHVlc2h1OiB7CiAgICAgICAgU2l0ZVR5cGVJRDogOCwKICAgICAgICBNYWluVHlwZTogIiNjb250ZW50X2xlZnQgLnJlc3VsdCIsCiAgICAgICAgU3R5cGVfTm9ybWFsOiAiaDMudD5hLCAjcmVzdWx0cyAuYy1jb250YWluZXI+LmMtYmxvY2thIiwKICAgICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHQtb3AsIC5jLXNob3d1cmwiLCAvLyBiYWlkdSDkvLzkuY7opoHmlLnniYjkuobvvJ8KICAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsCiAgICAgICAgQ291bnRlclR5cGU6ICIjY29udGVudF9sZWZ0PiNkb3VibGU+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSwjY29udGVudF9sZWZ0PmRpdltzcmNpZF0gKltjbGFzc349dF0sW2NsYXNzfj1vcF9iZXN0X2Fuc3dlcl9xdWVzdGlvbl0iLAogICAgICAgIEJsb2NrVHlwZTogImgzIGEiLAogICAgICB9LAogICAgICBvdGhlcjogewogICAgICAgIFNpdGVUeXBlSUQ6IDksCiAgICAgIH0KICAgIH07CiAgICBsZXQgU2l0ZVR5cGUgPSB7CiAgICAgIEJBSURVOiBEQlNpdGUuYmFpZHUuU2l0ZVR5cGVJRCwKICAgICAgTUJBSURVOiBEQlNpdGUubUJhaWR1LlNpdGVUeXBlSUQsCiAgICAgIFNPR09VOiBEQlNpdGUuc29nb3UuU2l0ZVR5cGVJRCwKICAgICAgU086IERCU2l0ZS5oYW9zb3UuU2l0ZVR5cGVJRCwKICAgICAgR09PR0xFOiBEQlNpdGUuZ29vZ2xlLlNpdGVUeXBlSUQsCiAgICAgIEJJTkc6IERCU2l0ZS5iaW5nLlNpdGVUeXBlSUQsCiAgICAgIERVQ0s6IERCU2l0ZS5kdWNrLlNpdGVUeXBlSUQsCiAgICAgIERPR0U6IERCU2l0ZS5kb2dlLlNpdGVUeXBlSUQsCiAgICAgIFpISUhVOiBEQlNpdGUuemhpaHUuU2l0ZVR5cGVJRCwKICAgICAgQkFJRFVfWFVFU0hVOiBEQlNpdGUuYmFpZHVfeHVlc2h1LlNpdGVUeXBlSUQsCiAgICAgIE9USEVSUzogOAogICAgfTsKICAgIGxldCBvdGhlckRhdGEgPSB7CiAgICAgIG90aGVyOiB7CiAgICAgICAgY3VyVGFiOiAxLCAvLyDlsZXnpLrnrKzkuoxwYW5lbAogICAgICAgIHNob3dCbG9ja0xpc3RBcmVhOiBmYWxzZSwgLy8gYmxvY2tMaXN05bGV56S65L2NdGV4dGFyZWEKICAgICAgICBhZGRCbG9ja0l0ZW06ICIiLCAgICAgLy8g55So5oi35omL5Yqo6L6T5YWl55qE5oum5oiq6KeE5YiZCiAgICAgICAgY3VySG9zdHM6IFtdLCAgICAgICAgIC8vIOWtmOaUvuW3sue7j+iuv+mXrueahGhvc3Rz5pWw5o2u5YaF5a65CiAgICAgIH0KICAgIH07ICAvLyDliLDml7blgJnmjILovb3liLBvdGhlcuS4igogICAgbGV0IEFsbERhdGEgPSB7CiAgICAgIEFDQ29uZmlnOiB7fSwKICAgICAgb3RoZXI6IG90aGVyRGF0YS5vdGhlciwKICAgICAgQ09OU1Q6IENPTlNULAogICAgICBsYW46IHsKICAgICAgICB1c2U6IHt9LAogICAgICAgIHpoX2NuOiB7CiAgICAgICAgICBtZW51X3RleHQ6ICLoh6rlrprkuYkiLAogICAgICAgICAgY3VyTGFuZzogInpoX2NuIiwKICAgICAgICAgIGZpZWxkc2V0X3BhbmVsOiB7CiAgICAgICAgICAgIHBhbmVsX3RpdGxlOiAiQUMt6YeN5a6a5ZCR6K6+572uICIgKyBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uICsgKGluRXh0TW9kZT8gJ0V4dCc6JycpLAogICAgICAgICAgICBzZXR0aW5nX3BhbmVsOiB7CiAgICAgICAgICAgICAgcmVkaXJlY3RfdGV4dDogIuS4u+WKn+iDvS3ph43lrprlkJHlip/og70iLAogICAgICAgICAgICAgIHJlZGlyZWN0X3RpdGxlOiAi6YeN5a6a5ZCR5Yqf6IO955qE5byA5ZCv5LiO5ZCmIiwKICAgICAgICAgICAgICB1c2VFbl90ZXh0OiAiRW4tTGFuZ3VhZ2UiLAogICAgICAgICAgICAgIHVzZUVuX3RpdGxlOiAiVXNpbmcgRW5nbGlzaCBsYW5ndWFnZSB0byBkaXNwbGF5IiwKICAgICAgICAgICAgICBhZHNfdGV4dDogIumZhOWKoDEt5Y675bm/5ZGK5Yqf6IO9IiwKICAgICAgICAgICAgICBhZHNfdGl0bGU6ICLljrvpmaTpg6jliIbpobXpnaLnmoTlub/lkYrkv6Hmga/vvIzov5jkvaDkuIDkuKrlubLlh4DmlbTmtIHnmoTpobXpnaIiLAogICAgICAgICAgICAgIGF1dG9wYWdlX3RleHQ6ICLoh6rliqjnv7vpobUiLAogICAgICAgICAgICAgIGF1dG9wYWdlX3RpdGxlOiAi6Ieq5Yqo57+76aG1IiwKICAgICAgICAgICAgICBibG9ja2VuYWJsZV90ZXh0OiAi6ZmE5YqgMi3oh6rkuLvmi6bmiKrln5/lkI0iLAogICAgICAgICAgICAgIGJsb2NrZW5hYmxlX3RpdGxlOiAi54K55Ye76aG16Z2iYmxvY2vmjInpkq7mt7vliqDkvaDmg7PopoHpmpDol4/nmoTlnLDlnYDvvIzohJrmnKzlsIboh6rliqjpmpDol4/pg6jliIbnu5PmnpzkuLrlsI/mqKrluYXvvIxESVnmjInpkq7kuK3ngrnlh7vooajmoLzlhoXlrrnlj6/ku6Xlj5bmtojpmpDol48iLAogICAgICAgICAgICAgIGJsb2NrRGl5QnRuX3RleHQ6ICJESVkiLAogICAgICAgICAgICAgIGJsb2NrRGl5QnRuX3RpdGxlOiAi6Ieq5a6a5LmJQkxPQ0siLAogICAgICAgICAgICAgIGJsb2NrQXV0b1JlbW92ZV90ZXh0OiAi6ZqQ6JeP57uT5p6cIiwKICAgICAgICAgICAgICBibG9ja0F1dG9SZW1vdmVfdGl0bGU6ICLoh6rliqjpmpDol4/lt7Lnu4/lsY/olL3nmoTln5/lkI0iLAogICAgICAgICAgICAgIGJsb2NrQnRuU2hvd190ZXh0OiAi6ZqQ6JePJ2Jsb2NrJ+aMiemSriIsCiAgICAgICAgICAgICAgYmxvY2tCdG5TaG93X3RpdGxlOiAi6ZqQ6JeP5o6JYmxvY2vmjInpkq7nmoTmmL7npLoiLAoKICAgICAgICAgICAgICB1c2VyU3R5bGVfdGV4dDogIumZhOWKoDMt6Ieq5a6a5LmJ5qC35byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfbGFibGU6ICLlsZXlvIDnmb7luqborr7nva4+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1X29yaWdpbjogIueZvuW6pi3ljp/lp4vmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV9odXlhbjogIueZvuW6pi3miqTnnLzmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV9iYWlkdUxpdGU6ICLnmb7luqZMaXRl5qC35byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV8xbGluZV9lbnRlcjogIuWNleWIl+WxheS4rSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1XzJsaW5lOiAi5Y+M5YiXIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV80bGluZTogIuWbm+WIlyIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfbGFibGU6ICLlsZXlvIDosLfmrYzorr7nva4+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV9vcmlnaW46ICLosLfmrYwt5Y6f5aeL5qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlX2h1eWFuOiAi6LC35q2MLeaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV9nb29nbGVMaXRlOiAi6LC35q2MLeS8quijheeZvuW6piIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8xbGluZTogIuWNleWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8xbGluZV9lbnRlcjogIuWNleWIl+WxheS4rSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8ybGluZTogIuWPjOWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV8zbGluZTogIuS4ieWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV80bGluZTogIuWbm+WIlyIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nX2xhYmxlOiAi5bGV5byA5b+F5bqU6K6+572uPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nX29yaWdpbjogIuW/heW6lC3ljp/lp4vmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nX2h1eWFuOiAi5b+F5bqULeaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzFsaW5lX2VudGVyOiAi5Y2V5YiX5bGF5LitIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmluZ18ybGluZTogIuWPjOWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzRsaW5lOiAi5Zub5YiXIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291X2xhYmxlOiAi5bGV5byA5pCc54uX6K6+572uPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV9vcmlnaW46ICLmkJzni5ct5Y6f5aeL5qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfaHV5YW46ICLmkJzni5ct5oqk55y85qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV8xbGluZV9lbnRlcjogIuWNleWIl+WxheS4rSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291XzJsaW5lOiAi5Y+M5YiXIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV80bGluZTogIuWbm+WIlyIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX2xhYmxlOiAi5bGV5byA6bit6bit5pCc6K6+572uPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX29yaWdpbjogIum4rem4rS3ljp/lp4vmqKHlvI8iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX2h1eWFuOiAi6bit6bitLeaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfbm9ybWFsOiAi6bit6bitLeW4uOingemFjee9riIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfMWxpbmU6ICLljZXliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrXzFsaW5lX2VudGVyOiAi5Y2V5YiX5bGF5LitIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja18ybGluZTogIuWPjOWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfM2xpbmU6ICLkuInliJciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrXzRsaW5lOiAi5Zub5YiXIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfbGFibGU6ICLlsZXlvIDlpJrlkInorr7nva4+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2Vfb3JpZ2luOiAi5aSa5ZCJLeWOn+Wni+aooeW8jyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfaHV5YW46ICLlpJrlkIkt5oqk55y85qih5byPIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV9ub3JtYWw6ICLlpJrlkIkt5bi46KeB6YWN572uIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV8xbGluZTogIuWNleWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfMWxpbmVfZW50ZXI6ICLljZXliJflsYXkuK0iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kb2dlXzJsaW5lOiAi5Y+M5YiXIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV8zbGluZTogIuS4ieWIlyIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfNGxpbmU6ICLlm5vliJciLAoKICAgICAgICAgICAgICBodXlhbk1vZGVfdGV4dDogIumZhOWKoDQt5oqk55y86aKc6Imy6YWN572uLeiHquWumuS5iTPkuK3pnIDlr7nlupTlvIDlkK8iLAogICAgICAgICAgICAgIGh1eWFuTW9kZV90aXRsZTogIu+8gemcgOimgeWcqOiHquWumuS5ieagt+W8j+S4reWQr+eUqOaKpOecvOaooeW8jyIsCiAgICAgICAgICAgICAgaHV5YW5Db2xvcl90ZXh0OiAi6buY6K6k5oqk55y86aKc6Imy77yaIiwKICAgICAgICAgICAgICBodXlhbkNvbG9yX3RpdGxlOiAi6Ieq5a6a5LmJ55qE5oqk55y86aKc6Imy77yaIiwKICAgICAgICAgICAgICBodXlhbkNvbG9yTW9yZV90ZXh0OiAi5pu05aSa6aKc6Imy6YCJ5oupIiwKCiAgICAgICAgICAgICAgZmF2aWNvbl90ZXh0OiAi6ZmE5YqgNS1GYXZpY29u5Yqf6IO9IiwKICAgICAgICAgICAgICBmYXZpY29uX3RpdGxlOiAiQUMt5re75YqgRmF2aWNvbiIsCiAgICAgICAgICAgICAgZmF2aWNvbl9kZWZhdWx0SWNvbl90ZXh0OiAiRmF2aWNvbum7mOiupOWbvuagh++8miIsCgogICAgICAgICAgICAgIHNlYXJjaE9yaWdpbl90ZXh0OiAi6ZmE5YqgNi3np7vpmaTnmb7luqbmkJzntKLpooTmtYso5paH5a2X6Ieq5Yqo5pCc57SiKSIsCiAgICAgICAgICAgICAgc2VhcmNoT3JpZ2luX3RpdGxlOiAiQUMt56e76Zmk5pCc57Si6aKE5rWLIiwKCiAgICAgICAgICAgICAgc2hvd1JpZ2h0X3RleHQ6ICLpmYTliqA3LeaYvuekuuWPs+S+p+agjyIsCiAgICAgICAgICAgICAgc2hvd0NvdW50ZXJfdGV4dDogIumZhOWKoDgt57yW5Y+35Yqf6IO9IiwKICAgICAgICAgICAgICBoaW50U2hvd0NvdW50ZXJfdGV4dDogIuWPr+iDveS8muWvvOiHtOWbvueJh+WKoOi9veW8guW4uCIsCiAgICAgICAgICAgICAgc2hvd0FMaW5lX3RleHQ6ICLpmYTliqA5LeaWh+Wtl+S4i+WIkue6vyIsCiAgICAgICAgICAgICAgc2hvd1VzZXJTdHlsZV90ZXh0OiAi6ZmE5YqgMTAt6Ieq5a6a5LmJ5qC35byPIOaUr+aMgUxlc3MuanMiLAoKICAgICAgICAgICAgICBjb250YWN0TWVfdGV4dDogIuiBlOezu+S9nOiAhSzmj5Dlu7rorq4s5a+75rGC5biu5YqpLOiHquWumuS5ieagt+W8jyzohJrmnKzlrprliLbngrnmiJEiLAogICAgICAgICAgICAgIGNvbnRhY3RNZV91cmw6ICJodHRwczovL2dpdGh1Yi5jb20vbGFuZ3JlbjEzNTMvR01fc2NyaXB0IiwKCiAgICAgICAgICAgICAgc2V0dGluZ19wYW5lbF9zZWNvbmQ6IHsKICAgICAgICAgICAgICAgIGJhY2tCdG5fdGV4dDogIjwt6L+U5ZueIiwKICAgICAgICAgICAgICAgIGJsb2NrTGFiZWxfdGV4dDogIiDmi6bmiKrliJfooaggIOaDs+imgeeUn+aViOeahOivnemcgOimgeaJi+WKqOS/neWtmCIsCiAgICAgICAgICAgICAgICBibG9ja0VkaXRCdG5fdGV4dDogIue8lui+keWIl+ihqCIsCiAgICAgICAgICAgICAgICBibG9ja0VkaXRCdG5FbmRfdGV4dDogIue7k+adn+e8lui+kSIsCiAgICAgICAgICAgICAgICBhZGRCbG9ja0xhYmVsX3RleHQ6ICLlhajljLnphY3mi6bmiKrvvJoiLAogICAgICAgICAgICAgICAgYWRkQnRuTGFiZWxfdGV4dDogIua3u+WKoCIsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjYW5jZWxCdG5fdGV4dDogIuWPlua2iCIsCiAgICAgICAgICAgICAgb2tCdG5fdGV4dDogIuS/neWtmCIsCiAgICAgICAgICAgICAgcmVzZXRCdG5fdGV4dDogIumHjee9riIsCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGVuOiB7CiAgICAgICAgICBtZW51X3RleHQ6ICJDVVNUT00iLAogICAgICAgICAgY3VyTGFuZzogImVuIiwKICAgICAgICAgIGZpZWxkc2V0X3BhbmVsOiB7CiAgICAgICAgICAgIHBhbmVsX3RpdGxlOiAiQUMgUmVkaXJlY3QgU2V0dGluZ3MgIiArIEdNX2luZm8uc2NyaXB0LnZlcnNpb24gKyAoaW5FeHRNb2RlPyAnRXh0JzonJyksCiAgICAgICAgICAgIHNldHRpbmdfcGFuZWw6IHsKICAgICAgICAgICAgICByZWRpcmVjdF90ZXh0OiAiTWFpbi1SZWRpcmVjdEZ1bmMiLAogICAgICAgICAgICAgIHJlZGlyZWN0X3RpdGxlOiAiVHVybiBvbiBvciBvZmYgcmVkaXJlY3QiLAogICAgICAgICAgICAgIHVzZUVuX3RleHQ6ICJFbi1MYW5ndWFnZSIsCiAgICAgICAgICAgICAgdXNlRW5fdGl0bGU6ICLkvb/nlKjoi7HmlofmmL7npLrpobXpnaIiLAogICAgICAgICAgICAgIGFkc190ZXh0OiAiQWRkMS1SZW1vdmUgQWRzIiwKICAgICAgICAgICAgICBhZHNfdGl0bGU6ICJSZW1vdmUgdGhlIGFkcyBvbiB0aGUgcGFnZSwgYW5kIHJldHVybiB5b3UgYSBjbGVhbiBwYWdlIiwKICAgICAgICAgICAgICBhdXRvcGFnZV90ZXh0OiAiQXV0byBQYWdlciIsCiAgICAgICAgICAgICAgYXV0b3BhZ2VfdGl0bGU6ICJBdXRvIFBhZ2VyIiwKICAgICAgICAgICAgICBibG9ja2VuYWJsZV90ZXh0OiAiQWRkMi1CbG9jayBob3N0IiwKICAgICAgICAgICAgICBibG9ja2VuYWJsZV90aXRsZTogIkNsaWNrIHRoZSBCbG9jayBidXR0b24gdG8gYWRkIHRoZSBhZGRyZXNzIHdoaWNoIHlvdSB3YW50IHRvIGhpZGUuIFRoZSBzY3JpcHQgd2lsbCBoaWRlIGl0IHdpdGggc21hbGwgYmFubmVyIGF1dG9tYXRpY2FsbHkuIERJWSBidXR0b24gZm9yIGVkaXR0aW5nIHRoZSBoaWRpbmcgbGlzdCIsCiAgICAgICAgICAgICAgYmxvY2tEaXlCdG5fdGV4dDogIkRJWSIsCiAgICAgICAgICAgICAgYmxvY2tEaXlCdG5fdGl0bGU6ICJFZGl0IEJMT0NLIiwKICAgICAgICAgICAgICBibG9ja0F1dG9SZW1vdmVfdGV4dDogIkF1dG8gcmVtb3ZlIiwKICAgICAgICAgICAgICBibG9ja0F1dG9SZW1vdmVfdGl0bGU6ICJyZW1vdmUgdGhlIGJsb2NrIHJlc3VsdHMgYXV0b21hdGljYWxseSIsCiAgICAgICAgICAgICAgYmxvY2tCdG5TaG93X3RleHQ6ICJIaWRlICdCbG9jaycgYnV0dG9uIiwKICAgICAgICAgICAgICBibG9ja0J0blNob3dfdGl0bGU6ICJIaWRlICdCbG9jaycgYnV0dG9uIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX3RleHQ6ICJBZGQzLUN1c3RvbVN0eWxlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfbGFibGU6ICJFeHBhbmQgQmFpZHUgU2V0dGluZ3M+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1X29yaWdpbjogIkJhaWR1LU9yaWdpbiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1X2h1eWFuOiAiQmFpZHUtRXllU2F2ZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1X2JhaWR1TGl0ZTogIkJhaWR1TGl0ZVN0eWxlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iYWlkdV8xbGluZV9lbnRlcjogIlNpbmdsZUNlbnRlciIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1XzJsaW5lOiAiVHdvIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmFpZHVfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JhaWR1XzRsaW5lOiAiRm91ciIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfbGFibGU6ICJFeHBhbmQgR29vZ2xlIFNldHRpbmdzPj4iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfb3JpZ2luOiAiR29vZ2xlLU9yaWdpbiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2dvb2dsZV9odXlhbjogIkdvb2dsZS1FeWVTYXZlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlX2dvb2dsZUxpdGU6ICJGYWtlIEJhaWR1IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlXzFsaW5lOiAiU2luZ2xlUm93IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlXzFsaW5lX2VudGVyOiAiU2luZ2xlQ2VudGVyIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlXzJsaW5lOiAiVHdvIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZ29vZ2xlXzNsaW5lOiAiVGhyZWUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9nb29nbGVfNGxpbmU6ICJGb3VyIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfbGFibGU6ICJFeHBhbmQgQmluZyBTZXR0aW5ncz4+IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmluZ19vcmlnaW46ICJCaW5nLU9yaWdpbiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfaHV5YW46ICJCaW5nLUV5ZVNhdmUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzFsaW5lOiAiU2luZ2xlUm93IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfYmluZ18xbGluZV9lbnRlcjogIlNpbmdsZUNlbnRlciIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2JpbmdfMmxpbmU6ICJUd28iLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzNsaW5lOiAiVGhyZWUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9iaW5nXzRsaW5lOiAiRm91ciIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV9sYWJsZTogIkV4cGFuZCBTb0dvdSBTZXR0aW5ncz4+IiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3Vfb3JpZ2luOiAiU29Hb3UtT3JpZ2luIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfaHV5YW46ICJTb0dvdS1FeWVTYXZlIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9zb2dvdV8xbGluZV9lbnRlcjogIlNpbmdsZUNlbnRlciIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291XzJsaW5lOiAiVHdvIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfc29nb3VfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX3NvZ291XzRsaW5lOiAiRm91ciIsCgogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX2xhYmxlOiAiRXhwYW5kIER1Y2tEdWNrR28gU2V0dGluZ3M+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfb3JpZ2luOiAiRHVja0R1Y2stT3JpZ2luIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja19odXlhbjogIkR1Y2tEdWNrLUV5ZVNhdmUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrX25vcm1hbDogIkR1Y2tEdWNrLU5vcm1hbCIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kdWNrXzFsaW5lX2VudGVyOiAiU2luZ2xlQ2VudGVyIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZHVja18ybGluZTogIlR3byIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2R1Y2tfNGxpbmU6ICJGb3VyIiwKCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfbGFibGU6ICJFeHBhbmQgRG9nZURvZ2UgU2V0dGluZ3M+PiIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2Vfb3JpZ2luOiAiRG9nZURvZ2UtT3JpZ2luIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV9odXlhbjogIkRvZ2VEb2dlLUV5ZVNhdmUiLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kb2dlX25vcm1hbDogIkRvZ2VEb2dlLU5vcm1hbCIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfMWxpbmU6ICJTaW5nbGVSb3ciLAogICAgICAgICAgICAgIHVzZXJTdHlsZV9kb2dlXzFsaW5lX2VudGVyOiAiU2luZ2xlQ2VudGVyIiwKICAgICAgICAgICAgICB1c2VyU3R5bGVfZG9nZV8ybGluZTogIlR3byIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfM2xpbmU6ICJUaHJlZSIsCiAgICAgICAgICAgICAgdXNlclN0eWxlX2RvZ2VfNGxpbmU6ICJGb3VyIiwKCiAgICAgICAgICAgICAgaHV5YW5Nb2RlX3RleHQ6ICJBZGQ0LUV5ZVNhdmUgQ29sb3IgU2V0dGluZy1OZWVkIG9wZW5lZCBpbiBBZGQzIiwKICAgICAgICAgICAgICBodXlhbk1vZGVfdGl0bGU6ICLvvIFPcGVuIEV5ZVNhdmUgTW9kZSBpbiBDdXN0b21TdHlsZSBpcyBNdXN0IiwKICAgICAgICAgICAgICBodXlhbkNvbG9yX3RleHQ6ICJEZWZhdWx0IEV5ZVNhdmUgQ29sb3LvvJoiLAogICAgICAgICAgICAgIGh1eWFuQ29sb3JfdGl0bGU6ICJUaGUgY29sb3Igb2YgRXllU2F2Ze+8miIsCiAgICAgICAgICAgICAgaHV5YW5Db2xvck1vcmVfdGV4dDogIk1vcmUgQ29sb3IiLAoKICAgICAgICAgICAgICBmYXZpY29uX3RleHQ6ICJBZGQ1LUZhdmljb24uRnVuYyIsCiAgICAgICAgICAgICAgZmF2aWNvbl90aXRsZTogIkFDLUFkZEZhdmljb24iLAogICAgICAgICAgICAgIGZhdmljb25fZGVmYXVsdEljb25fdGV4dDogIkZhdmljb25GYWlsZWRJbWfvvJrvvJoiLAoKICAgICAgICAgICAgICBzZWFyY2hPcmlnaW5fdGV4dDogIkFDLVJlbW92ZSBCYWlkdSBBdXRvUHJlZGljdCBpbiB0ZXh0IHNlYXJjaCIsCiAgICAgICAgICAgICAgc2VhcmNoT3JpZ2luX3RpdGxlOiAiQWRkNi1SZW1vdmUgQmFpZHUgQXV0b1ByZWRpY3QgaW4gdGV4dCBzZWFyY2giLAoKICAgICAgICAgICAgICBzaG93UmlnaHRfdGV4dDogIkFkZDctUmlnaHQgU2lkZSBDb2x1bW4iLAogICAgICAgICAgICAgIHNob3dDb3VudGVyX3RleHQ6ICJBZGQ4LU51bUZ1bmMiLAogICAgICAgICAgICAgIGhpbnRTaG93Q291bnRlcl90ZXh0OiAiTWF5IENhdXNlIGltYWdlIGxvYWQgcHJvYmxlbSIsCiAgICAgICAgICAgICAgc2hvd0FMaW5lX3RleHQ6ICJBZGQ5LVRleHRVbmRlckxpbmUiLAogICAgICAgICAgICAgIHNob3dVc2VyU3R5bGVfdGV4dDogIkFkZDEwLVlvdXIgb3duIFN0eWxlIHN1cHBvcnQgTGVzcy5qcyIsCgogICAgICAgICAgICAgIGNvbnRhY3RNZV90ZXh0OiAiRm9yIGNvbnRhY3QgdGhlIHdyaXR0ZXIsIHN1Z2dlc3RzLCBhc2sgZm9yIGhlbHAgdGhlbiBjbGljayBtZSIsCiAgICAgICAgICAgICAgY29udGFjdE1lX3VybDogImh0dHBzOi8vZ2l0aHViLmNvbS9sYW5ncmVuMTM1My9HTV9zY3JpcHQvIiwKCiAgICAgICAgICAgICAgc2V0dGluZ19wYW5lbF9zZWNvbmQ6IHsKICAgICAgICAgICAgICAgIGJhY2tCdG5fdGV4dDogIjwtQmFjayIsCiAgICAgICAgICAgICAgICBibG9ja0xhYmVsX3RleHQ6ICImbmJzcDtCbG9jayBMaXN0Jm5ic3A7Jm5ic3A7Q2xpY2sgU2F2ZSBCdXR0b24gaWYgeW91IHdhbnQgd28gc2F2ZSB0aGUgbGlzdCIsCiAgICAgICAgICAgICAgICBibG9ja0VkaXRCdG5fdGV4dDogIkVkaXQgTGlzdCIsCiAgICAgICAgICAgICAgICBibG9ja0VkaXRCdG5FbmRfdGV4dDogIkVuZCBFZGl0IiwKICAgICAgICAgICAgICAgIGFkZEJsb2NrTGFiZWxfdGV4dDogIkFkZCBCbG9jayBpdGVt77yaIiwKICAgICAgICAgICAgICAgIGFkZEJ0bkxhYmVsX3RleHQ6ICJBZGQiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY2FuY2VsQnRuX3RleHQ6ICJDYW5jZWwiLAogICAgICAgICAgICAgIG9rQnRuX3RleHQ6ICJTYXZlIiwKICAgICAgICAgICAgICByZXNldEJ0bl90ZXh0OiAiUmVzZXQiLAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgbGV0IHZ1ZVZNID0gbnVsbDsKICAgIC8qKuWIneWni+WMluaJgOacieeahOiuvue9rioqLwogICAgUHJvbWlzZS5hbGwoW0dNLmdldFZhbHVlKCJDb25maWciKV0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgbGV0IHJlcyA9IGRhdGFbMF0KICAgICAgaWYgKHJlcyAhPSBudWxsKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIEFDQ29uZmlnID0gSlNPTi5wYXJzZShyZXMpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIEFDQ29uZmlnID0gcmVzOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBBQ0NvbmZpZyA9IERlZmF1bHRDb25maWc7CiAgICAgIH0KICAgICAgY29uc3QgbG9jYWxEYXRhID0gbG9jYWxTdG9yYWdlLkFDQ29uZmlnOyAvLyDlsI/lv4PpmpDnp4HmqKHlvI8KICAgICAgaWYobG9jYWxEYXRhICYmIGxvY2FsRGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgQUNDb25maWcgPSBKU09OLnBhcnNlKGxvY2FsRGF0YSk7CiAgICAgIH0KICAgICAgZm9yICh2YXIga2V5IGluIERlZmF1bHRDb25maWcpIHsKICAgICAgICBpZiAodHlwZW9mIChBQ0NvbmZpZ1trZXldKSA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgIEFDQ29uZmlnW2tleV0gPSBEZWZhdWx0Q29uZmlnW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChBQ0NvbmZpZy5pc1VzZXJTdHlsZUVuYWJsZSA9PT0gZmFsc2UgJiYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gQUNDb25maWcubGFzdFNhdmVUaW1lID4gMjU5MjAwMDAwMCkpIHsgLy8g5aSn57qmMzDlpKnml7bpl7QKICAgICAgICAvLyDlpoLmnpznlKjmiLflj5bmtojkuoborr7nva7vvIzlubbkuJTplb/ml7bpl7QoMzDlpKkp5rKh5pyJ6L+b6KGM6L+H5aSE55CG77yM6YKj5LmI55u05o6l5bCG5pWw5o2u572u56m6IC0+IOeUqOS6juWIt+aWsOaVsOaNrgogICAgICAgIGNvbnNvbGUubG9nKCJhYy1iYWlkdSBjc3MgcmVzZXQgZm9yIHRpbWUiKTsKICAgICAgICBBQ0NvbmZpZy5sYXN0U2F2ZVRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICBBQ0NvbmZpZy5Vc2VyU3R5bGVUZXh0ID0gRGVmYXVsdENvbmZpZy5Vc2VyU3R5bGVUZXh0OwogICAgICB9CiAgICAgIEFsbERhdGEuQUNDb25maWcgPSBBQ0NvbmZpZzsKICAgICAgREJDb25maWcgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KEFDQ29uZmlnKSk7IC8vIOaaguaXtuS9nOS4uuS4gOS4quWOn+Wni+S/neWtmAogICAgICBBbGxEYXRhLmxhbi51c2UgPSBBQ0NvbmZpZy5pc0VuTGFuZyA/IEFsbERhdGEubGFuLmVuIDogQWxsRGF0YS5sYW4uemhfY247CiAgICAgIC8vIOWIneWni+WMluWujOaIkOS5i+WQjuaJjeiDveiwg+eUqOato+W4uOWHveaVsAogICAgICBjYWxsYmFjaygpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGV4Y2VwdCkgewogICAgICBjb25zb2xlLmxvZyhleGNlcHQpOwogICAgfSk7CgogICAgZnVuY3Rpb24gUmVnX0dldChIVE1MLCByZWcpIHsKICAgICAgbGV0IFJlZ0UgPSBuZXcgUmVnRXhwKHJlZyk7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIFJlZ0UuZXhlYyhIVE1MKVsxXTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIEFDU2V0VmFsdWUoa2V5LCB2YWx1ZSkgewogICAgICBHTV9zZXRWYWx1ZShrZXksIHZhbHVlKTsKICAgICAgaWYoa2V5ID09PSAnQ29uZmlnJyl7CiAgICAgICAgbG9jYWxTdG9yYWdlLkFDQ29uZmlnID0gdmFsdWU7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRFbGVtZW50QnlYcGF0aChlLCB0LCByKSB7CiAgICAgIHIgPSByIHx8IGRvY3VtZW50LCB0ID0gdCB8fCByOwogICAgICB0cnkgewogICAgICAgIHJldHVybiByLmV2YWx1YXRlKGUsIHQsIG51bGwsIFhQYXRoUmVzdWx0LkZJUlNUX09SREVSRURfTk9ERV9UWVBFLCBudWxsKS5zaW5nbGVOb2RlVmFsdWU7CiAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICByZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCLml6DmlYjnmoR4cGF0aCIpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0QWxsRWxlbWVudHMoZSwgdCwgciwgbiwgbykgewogICAgICBsZXQgZ2V0QWxsRWxlbWVudHNCeVhwYXRoID0gZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgIHJldHVybiByID0gciB8fCBkb2N1bWVudCwgdCA9IHQgfHwgciwgci5ldmFsdWF0ZShlLCB0LCBudWxsLCBYUGF0aFJlc3VsdC5PUkRFUkVEX05PREVfU05BUFNIT1RfVFlQRSwgbnVsbCk7CiAgICAgIH0KCiAgICAgIHZhciBpLCBzID0gW107CiAgICAgIGlmICghZSkgcmV0dXJuIHM7CiAgICAgIGlmIChyID0gciB8fCBkb2N1bWVudCwgbiA9IG4gfHwgd2luZG93LCBvID0gbyB8fCB2b2lkIDAsIHQgPSB0IHx8IHIsICJzdHJpbmciID09PSB0eXBlb2YgZSkgaSA9IDAgPT09IGUuc2VhcmNoKC9eY3NzOy9pKSA/IGZ1bmN0aW9uIGdldEFsbEVsZW1lbnRzQnlDU1MoZSwgdCkgewogICAgICAgIHJldHVybiAodCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChlKTsKICAgICAgfShlLnNsaWNlKDQpLCB0KSA6IGdldEFsbEVsZW1lbnRzQnlYcGF0aChlLCB0LCByKTsgZWxzZSB7CiAgICAgICAgaWYgKCEoaSA9IGUociwgbiwgbykpKSByZXR1cm4gczsKICAgICAgICBpZiAoaS5ub2RlVHlwZSkgcmV0dXJuIHNbMF0gPSBpLCBzOwogICAgICB9CiAgICAgIHJldHVybiBmdW5jdGlvbiBtYWtlQXJyYXkoZSkgewogICAgICAgIHZhciB0LCByLCBuLCBvID0gW107CiAgICAgICAgaWYgKGUucG9wKSB7CiAgICAgICAgICBmb3IgKHQgPSAwLCByID0gZS5sZW5ndGg7IHQgPCByOyB0KyspIChuID0gZVt0XSkgJiYgKG4ubm9kZVR5cGUgPyBvLnB1c2gobikgOiBvID0gby5jb25jYXQobWFrZUFycmF5KG4pKSk7CiAgICAgICAgICByZXR1cm4gYSgpKG8pOwogICAgICAgIH0KICAgICAgICBpZiAoZS5pdGVtKSB7CiAgICAgICAgICBmb3IgKHQgPSBlLmxlbmd0aDsgdDspIG9bLS10XSA9IGVbdF07CiAgICAgICAgICByZXR1cm4gbzsKICAgICAgICB9CiAgICAgICAgaWYgKGUuaXRlcmF0ZU5leHQpIHsKICAgICAgICAgIGZvciAodCA9IGUuc25hcHNob3RMZW5ndGg7IHQ7KSBvWy0tdF0gPSBlLnNuYXBzaG90SXRlbSh0KTsKICAgICAgICAgIHJldHVybiBvOwogICAgICAgIH0KICAgICAgfShpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYWxsYmFjaygpIHsKICAgICAgaWYgKEFDQ29uZmlnLm9sZFZlcnNpb24gPT09IEdNX2luZm8uc2NyaXB0LnZlcnNpb24pIHsKICAgICAgICBDT05TVC5oYXNOZXdGdW5jTmVlZERpc3BsYXkgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBDT05TVC5oYXNOZXdGdW5jTmVlZERpc3BsYXkgPSBuZWVkRGlzcGxheU5ld0Z1bjsKICAgICAgfQoKICAgICAgIWZ1bmN0aW9uKCkgewogICAgICAgIC8qKgogICAgICAgICAqIOi/m+ihjOS4jemHjeWkjeaPkuWFpe+8jOaPkuWFpeWQjuaJp+ihjOWbnuiwg+WHveaVsAogICAgICAgICAqIEBwYXJhbSBkYXRhIOW+heaPkuWFpeaVsOaNrgogICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayDlm57osIPlh73mlbAKICAgICAgICAgKi8KICAgICAgICBmdW5jdGlvbiBhY3B1c2goZGF0YSwgY2FsbGJhY2spIHsKICAgICAgICAgIC8vIOWmguaenOaYr+Weg+WcvuaVsOaNru+8jOmCo+S5iOWPr+S7peS4ouW8g+eahAogICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47CiAgICAgICAgICAvLyDlpoLmnpzmlbDmja7kuK3mnInlm57ovabvvIzpgqPmlbDmja7kuZ/mmK/ml6DmlYjnmoTmraPmlofogIzlt7IKICAgICAgICAgIGlmIChkYXRhLnJlcGxhY2UoLyh7fH18LHxcK3zvvJp844CCfFxuKS8pICE9PSBkYXRhKSByZXR1cm47CiAgICAgICAgICBpZiAodGhpcy5maW5kSW5kZXgobSA9PiBtID09PSBkYXRhKSA8IDApIHsKICAgICAgICAgICAgdGhpcy5wdXNoKGRhdGEpOwogICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh0aGlzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYWNyZW1vdmUoZGF0YSwgY2FsbGJhY2spIHsKICAgICAgICAgIGxldCBkZWxJZCA9IHRoaXMuZmluZEluZGV4KG0gPT4gbSA9PT0gZGF0YSk7CiAgICAgICAgICBpZiAoZGVsSWQgPj0gMCkgewogICAgICAgICAgICB0aGlzLnNwbGljZShkZWxJZCwgMSk7CiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHRoaXMpOwogICAgICAgICAgfSAvLyDliKDpmaRkZWxJZOeahOaVsOaNru+8jOWIoOmZpOS4gOS4qgogICAgICAgIH0KICAgICAgICAvLyDpgb/lhY3msaHmn5PlhajlsYDljp/lnovpk74KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQUNDb25maWcuVXNlckJsb2NrTGlzdCwgJ2FjcHVzaCcsIHt2YWx1ZTogYWNwdXNofSkKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQUNDb25maWcuVXNlckJsb2NrTGlzdCwgJ2FjcmVtb3ZlJywge3ZhbHVlOiBhY3JlbW92ZX0pCiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG90aGVyRGF0YS5vdGhlci5jdXJIb3N0cywgJ2FjcHVzaCcsIHt2YWx1ZTogYWNwdXNofSkKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3RoZXJEYXRhLm90aGVyLmN1ckhvc3RzLCAnYWNyZW1vdmUnLCB7dmFsdWU6IGFjcmVtb3ZlfSkKICAgICAgfSgpOwoKCgogICAgICAhZnVuY3Rpb24gKCkgewogICAgICAgIGxldCBpbnNlcnRMb2NrZWQgPSBmYWxzZTsKICAgICAgICBpZiAodHlwZW9mIEdNX2dldFJlc291cmNlVGV4dCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIEdNLmdldFJlc291cmNlVGV4dCA9IEdNX2dldFJlc291cmNlVGV4dCA9IGFzeW5jIGZ1bmN0aW9uIChhUmVzb3VyY2VOYW1lKSB7CiAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCAoYXdhaXQgZmV0Y2goYXdhaXQgR00uZ2V0UmVzb3VyY2VVcmwoYVJlc291cmNlTmFtZSkpKS50ZXh0KCk7CiAgICAgICAgICAgIGxldCBzYXZlUmVzID0gYXdhaXQgR00uZ2V0VmFsdWUoYVJlc291cmNlTmFtZSk7CiAgICAgICAgICAgIGlmICh0eXBlb2YgKHNhdmVSZXMpID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgIEdNLnNldFZhbHVlKGFSZXNvdXJjZU5hbWUsIHJlcyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNhdmVSZXM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKEdNX2dldFJlc291cmNlVGV4dCkgewogICAgICAgICAgLy8g5LuF5Zyo5pSv5oyBR01fZ2V0UmVzb3VyY2VUZXh055qE5a655Zmo5LiK6L+b6KGM5Yqo5oCB5pWw5o2u5pu05pawCiAgICAgICAgICAvLyDkuJTog73pmLLmraLosLfmrYznmb7luqbpobXpnaLop4TliJnlpKflj5jliqjlj4jpnIDopoHmm7TmlrDohJrmnKwgLSDnibnliKvmmK/mtonlj4rnv7vpobXlj4LmlbAKICAgICAgICAgIGxldCBjb25maWcgPSBHTV9nZXRSZXNvdXJjZVRleHQoIlNpdGVDb25maWdSdWxlcyIpOwogICAgICAgICAgZXZhbChjb25maWcpOwogICAgICAgICAgaWYgKHR5cGVvZiAob25saW5lREIpID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCLnur/kuIrmlbDmja7kuLrnqboiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIERCU2l0ZSA9IG9ubGluZURCOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygieHVlc2h1LmJhaWR1LmNvbSIpKSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLmJhaWR1X3h1ZXNodTsKICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoIi5iYWlkdS5jb20iKSkgewogICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQucmVwbGFjZSgvKGFuZHJvaWR8bW9iaWxlfGlwaG9uZSkvaWdtLCAiIikgIT09IG5hdmlnYXRvci51c2VyQWdlbnQpIHsKICAgICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5tQmFpZHU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLmJhaWR1OwogICAgICAgICAgfQogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLmJhaWR1OwogICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygiemhpaHUuY29tIikpIHsKICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuemhpaHU7CiAgICAgICAgICBDT05TVC51c2VJdGVtID0gQUNDb25maWcuemhpaHU7CiAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5ob3N0LmluY2x1ZGVzKCJzb2dvdSIpKSB7CiAgICAgICAgICBjdXJTaXRlID0gREJTaXRlLnNvZ291OwogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLnNvZ291OwogICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygic28uY29tIikpIHsKICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuaGFvc291OwogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLm90aGVyOwogICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygiZ29vZ2xlIikpIHsKICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuZ29vZ2xlOwogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLmdvb2dsZTsKICAgICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhvc3QuaW5jbHVkZXMoImJpbmciKSkgewogICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5iaW5nOwogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLmJpbmc7CiAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5ob3N0LmluY2x1ZGVzKCJkdWNrZHVja2dvIikpIHsKICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUuZHVjazsKICAgICAgICAgIENPTlNULnVzZUl0ZW0gPSBBQ0NvbmZpZy5kdWNrOwogICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdC5pbmNsdWRlcygiZG9nZWRvZ2UiKSkgewogICAgICAgICAgY3VyU2l0ZSA9IERCU2l0ZS5kb2dlOwogICAgICAgICAgQ09OU1QudXNlSXRlbSA9IEFDQ29uZmlnLmRvZ2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGN1clNpdGUgPSBEQlNpdGUub3RoZXI7CiAgICAgICAgICBDT05TVC51c2VJdGVtID0gQUNDb25maWcub3RoZXI7CiAgICAgICAgfQogICAgICAgIGN1clNpdGUucGFnZU51bSA9IDE7IC8vIOW9k+WJjemhteaVsAogICAgICAgIGN1clNpdGUucGFnZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBjdXJTaXRlLnBhZ2VVcmwgPSAiIjsKICAgICAgICBpZiAoCiAgICAgICAgICAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5HT09HTEUgJiYgbG9jYXRpb24uaHJlZi5yZXBsYWNlKC90Ym09KGlzY2h8bGNsfHNob3B8ZmxtKS8sICIiKSAhPT0gbG9jYXRpb24uaHJlZiApIHx8CiAgICAgICAgICAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CSU5HICYmIGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvaW1hZ2VzXC9zZWFyY2gvLCAiIikgIT09IGxvY2F0aW9uLmhyZWYgKQogICAgICAgICkgewogICAgICAgICAgLy8g5Zu+54mH56uZIOOAgeWcsOWbvuermeOAgei0reeJqeermQogICAgICAgICAgY29uc29sZS5sb2coIueJueauiuermSzkuI3liqDovb3moLflvI/vvIzkuI3mt7vliqBtZW51Iik7CiAgICAgICAgICBDT05TVC5pc0dvb2dsZUltYWdlVXJsID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFVfWFVFU0hVKXsKICAgICAgICAgIENPTlNULnVzZUl0ZW0uQWRzU3R5bGVNb2RlID0gMjsgLy8g5Y2V5YiX5bGF5Lit5Y2z5Y+vCiAgICAgICAgfQoKICAgICAgICBpZiAoQUNDb25maWcuQWRzU3R5bGVFbmFibGUpIHsKICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyID0gRlNCYWlkdSgpOyAvLyDmt7vliqDorr7nva7pobkt5Y2V5Y+M5YiX5pi+56S6CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZygiJWNbQUMtUmVkaXJlY3RdICVjTGV0IE1lIEludHJvZHVjZSB5b3UgYSBWZXJ5IEdvb2QgU2VhcmNoIEVuZ2luZe+8miVjICVzICVjU2VhcmNoIEVuZ2luZS4iLCAiZm9udC13ZWlnaHQ6Ym9sZDtjb2xvcjpjb3JuZmxvd2VyYmx1ZSIsICJjb2xvcjowIiwgImZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6ZGFya29yYW5nZSIsIENPTlNULnVzZUl0ZW0ubmFtZS5yZXBsYWNlKENPTlNULnVzZUl0ZW0ubmFtZVswXSwgQ09OU1QudXNlSXRlbS5uYW1lWzBdLnRvVXBwZXJDYXNlKCkpLCAiZm9udC13ZWlnaHQ6bm9ybWFsO2NvbG9yOjAiKTsKCiAgICAgICAgbGV0IFNpdGVCbG9jayA9IHsKICAgICAgICAgIC8qKgogICAgICAgICAgICog5Yid5aeL5YyWQmxvY2vmoLflvI8KICAgICAgICAgICAqLwogICAgICAgICAgaW5pdFN0eWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIEFDX2FkZFN0eWxlKCJidXR0b24uZ2hoaWRlci5naGhiW2FjLXVzZXItYWx0ZXI9JzEnXTo6YmVmb3Jle2NvbnRlbnQ6J+WPlua2iCAtICc7fSNzcC1hYy1jb250YWluZXIgLmFjLWJsb2NrLWl0ZW17Y29sb3I6I0FBQTttYXJnaW4tbGVmdDo0OHB4O30jc3AtYWMtY29udGFpbmVyIC5hYy1ibG9jay1pdGVtZGVse2Zsb2F0OnJpZ2h0O21hcmdpbi1sZWZ0OjA7cGFkZGluZzowIDIwcHg7Y3Vyc29yOnBvaW50ZXI7fSNzcC1hYy1jb250YWluZXIgLmFjLWJsb2NrLWl0ZW1kZWw6aG92ZXJ7Y29sb3I6cmVkO30jc3AtYWMtY29udGFpbmVyIC5hYy1ibG9jay1oaWdoe2NvbG9yOiMwMDA7fS5hYy1ibG9ja0xpc3QgbGk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojYTNjYWZmO2NvbG9yOndoaXRlICFpbXBvcnRhbnQ7Y3Vyc29yOnBvaW50ZXI7fSAqW2FjLW5lZWRoaWRlXSAqe2Rpc3BsYXk6bm9uZX0gKlthYy1uZWVkaGlkZV0gLmJsb2NrU2hvd3tkaXNwbGF5OnVuc2V0O2N1cnNvcjpwb2ludGVyO30gKlthYy1uZWVkaGlkZV0gLmJsb2NrU2hvdzpob3Zlcntib3JkZXI6MXB4IHNvbGlkICNERER9YnV0dG9uLmdoaGlkZXJ7Y29sb3I6IzU1NTtiYWNrZ3JvdW5kLWNvbG9yOiNmY2ZjZmM7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZjttYXJnaW46YXV0byAycHg7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JvcmRlci1yYWRpdXM6NHB4O3BhZGRpbmc6MnB4IDNweH1idXR0b24uZ2hoaWRlcntmb250LXNpemU6MTJweH1idXR0b24uZ2hoaWRlcjpob3Zlcntjb2xvcjojMDA2YWZmO2JhY2tncm91bmQ6I2ZmZn0iLAogICAgICAgICAgICAgICJBQy1CbG9ja1N0eWxlIik7CiAgICAgICAgICB9LAogICAgICAgICAgLyoqCiAgICAgICAgICAgKiDliJ3lp4vljJblsY/olL3mjInpkq7liqDovb0KICAgICAgICAgICAqLwogICAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgY2hlY2tOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY3VyU2l0ZS5NYWluVHlwZSArICI6bm90KFthY2Jsb2NrXSkiKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGVja05vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxldCBjdXJOb2RlID0gY2hlY2tOb2Rlc1tpXTsKICAgICAgICAgICAgICAgIGxldCBmYXZpY29uTm9kZSA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcihjdXJTaXRlLkZhdmljb25UeXBlKTsKICAgICAgICAgICAgICAgIC8vIGlmKGN1ck5vZGUuaGFzQXR0cmlidXRlKCJhY2Jsb2NrIikpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgbGV0IGhvc3QgPSBnZXROb2RlSG9zdChmYXZpY29uTm9kZSkuY3VySG9zdDsKICAgICAgICAgICAgICAgIC8vIGlmKGhvc3QgPT09IG51bGwpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgbGV0IGZhTm9kZSA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcihjdXJTaXRlLkJsb2NrVHlwZSk7CiAgICAgICAgICAgICAgICBsZXQgbm9kZVN0eWxlID0gImRpc3BsYXk6dW5zZXQ7IjsKICAgICAgICAgICAgICAgIGlmIChBQ0NvbmZpZy5pc0Jsb2NrQnRuTm90RGlzcGxheSkgewogICAgICAgICAgICAgICAgICBub2RlU3R5bGUgPSAiZGlzcGxheTpub25lOyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmYU5vZGUuaW5zZXJ0QWRqYWNlbnRIVE1MKCJhZnRlcmVuZCIsIGA8YnV0dG9uIHN0eWxlPScke25vZGVTdHlsZX0nIGNsYXNzPSdnaGhpZGVyIGdoaGInIGhyZWY9IiR7ZmF2aWNvbk5vZGUuaHJlZiB8fCBmYXZpY29uTm9kZS5pbm5lclRleHR9IiBtZXRhPSIke2hvc3R9IiBkYXRhLWhvc3Q9IiR7aG9zdH0iIHRpdGxlPScke3RoaXMuZ2V0QmxvY2tCdG5UaXRsZShob3N0KX0nPmJsb2NrPC9idXR0b24+YCk7CgogICAgICAgICAgICAgICAgY3VyTm9kZS5zZXRBdHRyaWJ1dGUoImFjYmxvY2siLCAiMCIpOwogICAgICAgICAgICAgICAgY3VyTm9kZS5zZXRBdHRyaWJ1dGUoImFjYmxvY2siLCAiMCIpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5pbml0TGlzdGVuZXIoKTsKICAgICAgICAgICAgdGhpcy5yZW5kZXJEaXNwbGF5KCk7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0QmxvY2tCdG5UaXRsZShob3N0KXsKICAgICAgICAgICAgcmV0dXJuIGDngrnlh7vljbPlj6/lsY/olL0gJHtob3N0fSDmlL7lvIDvvIzpnIDopoHlnKjoh6rlrprkuYnkuK3miYvliqjphY3nva7mlL7lvIBgOwogICAgICAgICAgfSwKICAgICAgICAgIGluaXRMaXN0ZW5lcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgY2hlY2tOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImJ1dHRvbi5naGhpZGVyOm5vdChbYWNFbnZdKSIpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoZWNrTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBjaGVja05vZGVzW2ldLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdGhpcy5kb0hpZGVFbnYpOwogICAgICAgICAgICAgIGNoZWNrTm9kZXNbaV0uc2V0QXR0cmlidXRlKCJhY0VudiIsICIwIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBkb0hpZGVFbnY6IGZ1bmN0aW9uIChlbnYpIHsKICAgICAgICAgICAgLy8g5YWI5o+S5YWl5pWw5o2uLS0t6K6w5b6X6L+Y6KaB5YaZ5YWl5a2Y5YKoCiAgICAgICAgICAgIGxldCBub2RlID0gZW52LnNvdXJjZVRhcmdldCB8fCBlbnYudGFyZ2V0OwogICAgICAgICAgICBsZXQgaG9zdCA9IG5vZGUuZGF0YXNldC5ob3N0OwogICAgICAgICAgICBpZiAoK25vZGUuZ2V0QXR0cmlidXRlKCJhYy11c2VyLWFsdGVyIikgPT09IDEpIHsKICAgICAgICAgICAgICAvLyDlt7Lnu4/lsY/olL3kuYvlkI7vvIzlho3mrKHngrnlh7tibG9ja+W6lOivpeaYr+WPlua2iOeKtuaAgQogICAgICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKCJhYy11c2VyLWFsdGVyIik7CiAgICAgICAgICAgICAgQUNDb25maWcuVXNlckJsb2NrTGlzdC5hY3JlbW92ZShob3N0KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDmraPluLjlsY/olL3mk43kvZwKICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgiYWMtdXNlci1hbHRlciIpOwogICAgICAgICAgICAgIEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuYWNwdXNoKGhvc3QpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIERCQ29uZmlnLlVzZXJCbG9ja0xpc3QgPSBBQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0OwogICAgICAgICAgICBBQ1NldFZhbHVlKCJDb25maWciLCBKU09OLnN0cmluZ2lmeShEQkNvbmZpZykpOyAvLyDngrnlh7vkuIDmrKHvvIzkv53lrZjkuIDmrKEKICAgICAgICAgICAgU2l0ZUJsb2NrLnJlbmRlckRpc3BsYXkoKTsKICAgICAgICAgICAgZW52LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIOWIt+aWsOaYvuekuuaViOaenC0t6ICX5pe25pON5L2cCiAgICAgICAgICByZW5kZXJEaXNwbGF5OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGxldCBjaGVja05vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLk1haW5UeXBlKTsKICAgICAgICAgICAgbGV0IGZsYWcgPSAiYWMtbmVlZGhpZGUiOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoZWNrTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBjaGVja05vZGVzW2ldOwogICAgICAgICAgICAgICAgbGV0IHtjdXJIb3N0LCBjdXJVcmx9ID0gZ2V0Tm9kZUhvc3QoY3VyTm9kZS5xdWVyeVNlbGVjdG9yKGN1clNpdGUuRmF2aWNvblR5cGUpKTsKICAgICAgICAgICAgICAgIGN1clVybCA9IGN1clVybCB8fCAiIjsKICAgICAgICAgICAgICAgIGlmIChjdXJIb3N0ID09PSBudWxsKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgbGV0IEJsb2NrQnRuID0gY3VyTm9kZS5xdWVyeVNlbGVjdG9yKCIuZ2hoaWRlci5naGhiIik7CiAgICAgICAgICAgICAgICAgIEJsb2NrQnRuLmRhdGFzZXQuaG9zdCA9IEJsb2NrQnRuLmRhdGFzZXQubWV0YSA9IGN1ckhvc3Q7CiAgICAgICAgICAgICAgICAgIEJsb2NrQnRuLnRpdGxlID0gdGhpcy5nZXRCbG9ja0J0blRpdGxlKGN1ckhvc3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGN1ck5vZGUucXVlcnlTZWxlY3RvcigiYnV0dG9uW2FjLXVzZXItYWx0ZXJdIikgIT0gbnVsbCkgY29udGludWU7IC8vIOeUqOaIt+aJi+WKqOeCuei/h+aYvuekuueahO+8jOmCo+S5iOi3s+i/h2NoZWNrCiAgICAgICAgICAgICAgICBsZXQgcmVnTGlzdCA9IHZ1ZVZNLmNhbF9Vc2VyQmxvY2tMaXN0UmVnZXg7IC8vIOS9v+eUqFZ1ZeeahGNvbXB1dGVk5bGe5oCn6K6h566X55qE5pWw5o2u5YC877yM5LiA6Iis5qC55pys5LiN5pu05pawCiAgICAgICAgICAgICAgICBpZiAoIWN1clVybC5pbmNsdWRlcygid3d3LmJhaWR1LmNvbS9saW5rIikgJiYgcmVnTGlzdC5maW5kSW5kZXgob25lID0+IHsKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25lLnRlc3QoY3VySG9zdCkgfHwgb25lLnRlc3QoY3VyVXJsKTsgLy8g6ICX5pe25pON5L2cCiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSA9PT0gY3VySG9zdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkgPj0gMCkgewogICAgICAgICAgICAgICAgICAvLyDlj6rmo4Dmn6XlnKjlsY/olL3ooajkuK3nmoTmlbDmja4KICAgICAgICAgICAgICAgICAgaWYgKCFjdXJOb2RlLmhhc0F0dHJpYnV0ZShmbGFnKSkgewogICAgICAgICAgICAgICAgICAgIGlmIChBQ0NvbmZpZy5pc0Jsb2NrRGlzcGxheSkgeyAvLyDlr7nkuo7kuI3mmL7npLrnmoTmlbDmja7lj6/ku6Xov5vooYznp7vpmaTmk43kvZwKICAgICAgICAgICAgICAgICAgICAgIGN1ck5vZGUucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGV0IGN1clRpdGxlID0gY3VyTm9kZS5xdWVyeVNlbGVjdG9yKGN1clNpdGUuQmxvY2tUeXBlKTsKICAgICAgICAgICAgICAgICAgICBjdXJUaXRsZSA9IGN1clRpdGxlLmlubmVyVGV4dCB8fCBjdXJUaXRsZS50ZXh0Q29udGVudDsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGN1ck5vZGUuaGFzQXR0cmlidXRlKGZsYWcpKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi5Yay56qB5LqG77yB77yB77yBIik7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGN1ck5vZGUuc2V0QXR0cmlidXRlKGZsYWcsICIxIik7CiAgICAgICAgICAgICAgICAgICAgY3VyTm9kZS5pbnNlcnRBZGphY2VudEhUTUwoImFmdGVyQmVnaW4iLCBgPHNwYW4gY2xhc3M9ImJsb2NrU2hvdyIgdGl0bGU9IuWmguaenOmcgOimgeS4gOebtOaYvuekuu+8jOivt+WcqOiHquWumuS5ieS4rURJWeebruW9leenu+mZpOacrOWcsOWdgCI+JHtjdXJUaXRsZX0mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsgLWJsb2NrIGJ5ICR7Y3VySG9zdH08L3NwYW4+YCk7CgogICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoeGN1cikgewogICAgICAgICAgICAgICAgICAgICAgLy8g5bey57uP5bGP6JS95LmL5ZCO55qE5YaF5a6577yM54K55Ye75LiA5LiL5pi+56S65Y6f5aeL5YaF5a65CiAgICAgICAgICAgICAgICAgICAgICB4Y3VyLnF1ZXJ5U2VsZWN0b3IoIi5ibG9ja1Nob3ciKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uIChlbnYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoImJ1dHRvbi5naGhpZGVyIikuc2V0QXR0cmlidXRlKCJhYy11c2VyLWFsdGVyIiwgIjEiKTsgLy8g6L+Z5Liq5bGe5oCn55So5LqO5L+d5oyB5ZyoRE9N5pu05paw5pe277yM5oyJ6ZKu5LiN5Y+YCiAgICAgICAgICAgICAgICAgICAgICAgIHhjdXIucmVtb3ZlQXR0cmlidXRlKGZsYWcpOwogICAgICAgICAgICAgICAgICAgICAgICBzYWZlRnVuY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHhjdXIucXVlcnlTZWxlY3RvcigiLmJsb2NrU2hvdyIpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgZW52LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSkoY3VyTm9kZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGN1ck5vZGUucmVtb3ZlQXR0cmlidXRlKGZsYWcpOwogICAgICAgICAgICAgICAgICBzYWZlRnVuY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGN1ck5vZGUucXVlcnlTZWxlY3RvcigiLmJsb2NrU2hvdyIpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gYWRkU3R5bGUoY3NzKSB7IC8v5re75YqgQ1NT55qE5Luj56CBLS1jb3B555qECiAgICAgICAgICBsZXQgcGkgPSBkb2N1bWVudC5jcmVhdGVQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24oCiAgICAgICAgICAgICd4bWwtc3R5bGVzaGVldCcsCiAgICAgICAgICAgICd0eXBlPSJ0ZXh0L2NzcyIgbXVzdD0iZmFsc2UiIGhyZWY9ImRhdGE6dGV4dC9jc3M7dXRmLTgsJyArIGVuY29kZVVSSUNvbXBvbmVudChjc3MpICsgJyInCiAgICAgICAgICApOwogICAgICAgICAgcmV0dXJuIGRvY3VtZW50Lmluc2VydEJlZm9yZShwaSwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTsKICAgICAgICB9CgogICAgICAgIGlmIChBQ0NvbmZpZy5pc0Fkc0VuYWJsZSkgewogICAgICAgICAgLy8gZGlzcGxheeW3sue7j+aXoOazlemakOiXj+S7luS7rOS6hu+8jOmcgOimgeeUqOe7neWvueeahOmakOiXjwogICAgICAgICAgYWRkU3R5bGUoIiNib3R0b21hZHN7ZGlzcGxheTpub25lO30gI2NvbnRlbnRfbGVmdD5kaXY6bm90KFtpZF0pPmRpdltjbWF0Y2hpZF0sICNjb250ZW50X2xlZnQ+ZGl2W2lkKj0nMzAwJ106bm90KFtjbGFzcyo9J3Jlc3VsdCddKSwjY29udGVudF9yaWdodCB0ZD5kaXY6bm90KFtpZF0pLCNjb250ZW50X3JpZ2h0PmJye3Bvc2l0aW9uOmFic29sdXRlO3RvcDotNjY2NnB4O30iKTsKICAgICAgICB9CiAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFICYmIEFDQ29uZmlnLmlzR29vbGVJbkJhaWR1TW9kZUVuYWJsZSkgewogICAgICAgICAgc2FmZVdhaXRGdW5jKCIjbG9nbyBpbWcsICNsb2dvY29udCBpbWciLCBmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgICBsZXQgZmFOb2RlID0gbm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGU7CiAgICAgICAgICAgIGZhTm9kZS5jbGFzc0xpc3QuYWRkKCJiYWlkdSIpOwogICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgic3JjIik7CiAgICAgICAgICAgIG5vZGUuc3JjID0gImh0dHBzOi8vcGljLnJtYi5iZHN0YXRpYy5jb20vYzg2MjU1ZTgwMjg2OTYxMzlkM2UzZTRiYjQ0YzA0N2IucG5nIjsKICAgICAgICAgICAgbm9kZS53aWR0aCA9ICIxMjUiOwogICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgiaGVpZ2h0Iik7CiAgICAgICAgICB9KTsKICAgICAgICAgIHNhZmVXYWl0RnVuYygiI21haW4gLmxvZ28gaW1nW2FsdD0nR29vZ2xlJ10iLCBmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgic3Jjc2V0Iik7CiAgICAgICAgICAgIG5vZGUuc3JjID0gImh0dHBzOi8vd3d3LmJhaWR1LmNvbS9pbWcvYmRfbG9nbzEucG5nP3doZXJlPXN1cGVyIjsKICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoImhlaWdodCIsICI1OSIpOwogICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgIHNhZmVXYWl0RnVuYygiZm9ybVtyb2xlPSdzZWFyY2gnXSAubG9nbyBpbWciLCBmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgic3Jjc2V0Iik7CiAgICAgICAgICAgIG5vZGUuc3JjID0gImh0dHBzOi8vd3d3LmJhaWR1LmNvbS9pbWcvYmRfbG9nbzEucG5nP3doZXJlPXN1cGVyIjsKICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoImhlaWdodCIsICI1OSIpOwogICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gZG9jdW1lbnQudGl0bGUucmVwbGFjZSgvXkdvb2dsZS8sICLnmb7luqbkuIDkuIvvvIzkvaDlsLHnn6XpgZMiKQogICAgICAgICAgLnJlcGxhY2UoLyAtIEdvb2dsZSDmkJzntKIvLCAiX+eZvuW6puaQnOe0oiIpCiAgICAgICAgICAucmVwbGFjZSgvIC0gR29vZ2xlIFNlYXJjaC8sICJf55m+5bqm5pCc57SiIik7CiAgICAgICAgICBzYWZlV2FpdEZ1bmMoImhlYWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGxldCBsaW5rVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigibGlua1t0eXBlPSdpbWFnZS94LWljb24nXSIpIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTsKICAgICAgICAgICAgbGlua1RhcmdldC50eXBlID0gJ2ltYWdlL3gtaWNvbic7CiAgICAgICAgICAgIGxpbmtUYXJnZXQucmVsID0gJ3Nob3J0Y3V0IGljb24nOwogICAgICAgICAgICBsaW5rVGFyZ2V0LmhyZWYgPSAnaHR0cHM6Ly93d3cuYmFpZHUuY29tL2Zhdmljb24uaWNvJzsKICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rVGFyZ2V0KTsKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRVQ0spIHsKICAgICAgICAgIGFkZFN0eWxlID0gQUNfYWRkU3R5bGUgLy8g5YW85a65RHVja+eahENTUOWQjOa6kOinhOWImQogICAgICAgICAgaWYoQUNDb25maWcubm9ybWFsaXplRHVjayl7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBEREcuc2V0dGluZ3Muc2V0KCJrbiIsIDEsIHsgIC8vIOaWsOeql+WPo+aJk+W8gOmhtemdogogICAgICAgICAgICAgICAgICBzYXZlVG9DbG91ZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZm9yY2VUaGVtZTogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBEREcuc2V0dGluZ3Muc2V0KCJrYXYiLCAxLCB7IC8vIOi/nue7reaYvuekuuaQnOe0oue7k+aenAogICAgICAgICAgICAgICAgICBzYXZlVG9DbG91ZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgZm9yY2VUaGVtZTogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5PVEhFUlMpIHsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgTWFpbkNhbGxiYWNrLCBmYWxzZSk7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgTWFpbkNhbGxiYWNrLCBmYWxzZSk7CiAgICAgICAgICAgIHNhZmVXYWl0RnVuYygiYm9keSIsICgpID0+IHsKICAgICAgICAgICAgICAhZG9jdW1lbnQuYm9keS5oYXNBdHRyaWJ1dGUoQ09OU1QudXNlSXRlbS5uYW1lKSAmJiBkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZShDT05TVC51c2VJdGVtLm5hbWUsICIxIik7CiAgICAgICAgICAgICAgIWRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKENPTlNULnVzZUl0ZW0ubmFtZSkgJiYgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKENPTlNULnVzZUl0ZW0ubmFtZSk7CiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLkFkc1N0eWxlRW5hYmxlKSB7IC8vIOWNleeLrOS4jemcgOimgeWumuaXtuWZqC3poLvnuYHop6blj5Et6L295YWlY3NzCiAgICAgICAgICAgICAgICBGU0JhaWR1KCk7CiAgICAgICAgICAgICAgICBBZGRDdXN0b21TdHlsZSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgUkFGSW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmKGRvY3VtZW50LmJvZHkpIHsKICAgICAgICAgICAgICAgIHJhcGlkRGVhbCgpOyAvLyDlrprmnJ/osIPnlKjvvIzpgb/lhY3mnInml7blgJlET03mj5LlhaXmsqHmnInmiafooYzlr7zoh7TnmoTpl67popgKICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVICYmIGxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoInRuPW5ld3MiKSkgewogICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZSgibmV3cyIsICIxIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUF0dHJpYnV0ZSgibmV3cyIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgODAwKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICB9CiAgICAgICAgc2FmZVdhaXRGdW5jKCIjc3AtYWMtY29udGVudCIsIGZ1bmN0aW9uIChjaGVja05vZGUpIHsKICAgICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgICBlbDogY2hlY2tOb2RlLAogICAgICAgICAgICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIC4uLkFsbERhdGEsCiAgICAgICAgICAgICAgICBMaXZlQ29uZmlnOiB7CiAgICAgICAgICAgICAgICAgIGNzc19oYXNfZXJyb3I6IGZhbHNlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBtZXRob2RzOiB7CiAgICAgICAgICAgICAgbGFiZWxTaG93SGlkZUVudihlKSB7CiAgICAgICAgICAgICAgICBsZXQgY3VyID0gZS5zcmNFbGVtZW50IHx8IGUudGFyZ2V0OwogICAgICAgICAgICAgICAgbGV0IGNsYXNzTmFtZSA9IGN1ci5wYXJlbnROb2RlLmNsYXNzTmFtZS5yZXBsYWNlKCJjb250YWluZXItbGFiZWwgIiwgIiIpOwogICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoIi5YWD5sYWJlbCwuWFg+YnJ7ZGlzcGxheTp1bnNldCAhaW1wb3J0YW50O30uWFg+LmxhYmVsX2hpZGV7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fSIucmVwbGFjZSgvWFgvZ20sIGNsYXNzTmFtZSksCiAgICAgICAgICAgICAgICAgICJBQy1TaG93SGlkZUl0ZW0tIiArIGNsYXNzTmFtZSwgImJvZHkiKTsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzeW5jVG9CbG9ja0xpc3QoZW52KSB7CiAgICAgICAgICAgICAgICB0aGlzLkFDQ29uZmlnLlVzZXJCbG9ja0xpc3QgPSBlbnYudGFyZ2V0LnZhbHVlLnNwbGl0KCJcbiIpLmZpbHRlcihpdGVtID0+IGl0ZW0gIT09ICcnKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHJlbW92ZUFCbG9ja0xpc3RJdGVtKGUpIHsKICAgICAgICAgICAgICAgIC8vIOeCueWHu+enu+mZpOafkOS4qmhvc3TmlbDmja7ml7YKICAgICAgICAgICAgICAgIGxldCB0YXJnZXQgPSBlLnNyY0VsZW1lbnQgfHwgZS50YXJnZXQ7CiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gImxhYmVsIikgewogICAgICAgICAgICAgICAgICBsZXQgaG9zdCA9IHRhcmdldC5kYXRhc2V0Lmhvc3Q7CiAgICAgICAgICAgICAgICAgIEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuYWNyZW1vdmUoaG9zdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBja0FkZFJ1bGUoKSB7CiAgICAgICAgICAgICAgICAvLyDmiYvliqjlop7liqDnp7vpmaTop4TliJkKICAgICAgICAgICAgICAgIEFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuYWNwdXNoKHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtKTsKICAgICAgICAgICAgICAgIHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtID0gIiI7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBsb2FkQ3VzdG9tU3R5bGUoKSB7CiAgICAgICAgICAgICAgICBsZXNzLnJlbmRlcihBQ0NvbmZpZy5Vc2VyU3R5bGVUZXh0LCAoZSwgY3NzKSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLkxpdmVDb25maWcuY3NzX2hhc19lcnJvciA9IHRydWUKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLkxpdmVDb25maWcuY3NzX2hhc19lcnJvciA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgY3NzID0gY3NzLmNzcyB8fCAnJwogICAgICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKGNzcywgIkFDLXVzZXJTdHlsZSIsICJoZWFkIiwgdHJ1ZSk7IC8vIOeUqOaIt+iHquWumuS5ieeahOagt+W8j+ihqAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHNhdmVDb25maWcoKSB7CiAgICAgICAgICAgICAgICBpZih0aGlzLm90aGVyLmN1clRhYj09PTEgJiYgIXRoaXMuQUNDb25maWcuYWNjZXB0TGljZW5zZSl7CiAgICAgICAgICAgICAgICAgIHRoaXMub3RoZXIuY3VyVGFiID0gMwogICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuQUNDb25maWcuYWNjZXB0TGljZW5zZSA9IHRydWUKCiAgICAgICAgICAgICAgICB0aGlzLkFDQ29uZmlnLmxhc3RTYXZlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgICAgICAgQUNTZXRWYWx1ZSgiQ29uZmlnIiwgSlNPTi5zdHJpbmdpZnkodGhpcy5BQ0NvbmZpZykpOwogICAgICAgICAgICAgICAgaWYoIXRoaXMuQUNDb25maWcuZG9EaXNhYmxlU3VnKXsKICAgICAgICAgICAgICAgICAgYWNTZXRDb29raWUoIk9SSUdJTiIsIDEsICJ3d3cuYmFpZHUuY29tIiwgbmV3IERhdGUoKS5nZXRUaW1lKCkgLSA4NjQwMDAwMCk7CiAgICAgICAgICAgICAgICAgIGFjU2V0Q29va2llKCJJU1NXIiwgMSwgbnVsbCwgbmV3IERhdGUoKS5nZXRUaW1lKCkgLSA4NjQwMDAwMCk7CiAgICAgICAgICAgICAgICAgIGFjU2V0Q29va2llKCJJU1NXIiwgMSwgInd3dy5iYWlkdS5jb20iLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIDg2NDAwMDAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY2hhbmdlUmVzZXRUZXh0KCkgewogICAgICAgICAgICAgICAgdGhpcy5sYW4uemhfY24uZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5yZXNldEJ0bl90ZXh0ID0gJ+WPjOWHu+mHjee9ricKICAgICAgICAgICAgICAgIHRoaXMubGFuLmVuLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwucmVzZXRCdG5fdGV4dCA9ICdEQmwgY2xpY2sgdG8gUmVzZXQnCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICByZXNldENvbmZpZygpIHsKICAgICAgICAgICAgICAgIC8vIOaYvuekuuS4uuWPjOWHu+mHjee9rgogICAgICAgICAgICAgICAgQUNTZXRWYWx1ZSgiQ29uZmlnIiwgJ3t9Jyk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgfSwgMjAwKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNsb3NlUGFuZWwoKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB1c2VUaGlzSHV5YW5Db2xvcihlbnYpIHsKICAgICAgICAgICAgICAgIHRoaXMuQUNDb25maWcuZGVmYXVsdEh1WWFuQ29sb3IgPSBlbnYudGFyZ2V0LnZhbHVlIHx8IGVudi50YXJnZXQuZGF0YXNldC52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuQUNDb25maWcuZGVmYXVsdEh1WWFuQ29sb3IpOwogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZEh1WWFuU3R5bGUodGhpcy5BQ0NvbmZpZy5kZWZhdWx0SHVZYW5Db2xvcik7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBnZXRVc2VyQmxvY2tMaXN0UmVnZXgoKSB7CiAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy5BQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0LmZvckVhY2gob25lID0+IHsKICAgICAgICAgICAgICAgICAgb25lICE9PSBudWxsICYmIGxpc3QucHVzaChuZXcgUmVnRXhwKG9uZS5yZXBsYWNlKCIqIiwgIi4qIikpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzLm90aGVyLmFkZEJsb2NrSXRlbSkgIT09ICJ1bmRlZmluZWQiICYmIHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtICE9PSAiIikgewogICAgICAgICAgICAgICAgICBsaXN0LnB1c2gobmV3IFJlZ0V4cCh0aGlzLm90aGVyLmFkZEJsb2NrSXRlbS5yZXBsYWNlKCIqIiwgIi4qIikpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBsaXN0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29tcHV0ZWQ6IHsKICAgICAgICAgICAgICBnZXRCbG9ja0xpc3QoKSB7IC8vIOS8muiHquWKqOeahHJlbmRlcuWIsGh0bWzkuIrljrvvvIzkuI3nlKjmiYvliqjljrvmuLLmn5PkuIDpgY0KICAgICAgICAgICAgICAgIGxldCBpbnNIVE1MID0gIiI7CiAgICAgICAgICAgICAgICBsZXQgVXNlckJsb2NrUmVnTGlzdCA9IHRoaXMuY2FsX1VzZXJCbG9ja0xpc3RSZWdleDsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5BQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIGxldCBpbnNDbGFzcyA9IHRoaXMub3RoZXIuY3VySG9zdHMuZmluZEluZGV4KG0gPT4gewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgW2N1ckhvc3QsIGN1clVybF0gPSBtLnNwbGl0KCIjIyMiKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBVc2VyQmxvY2tSZWdMaXN0W2ldLnRlc3QoY3VySG9zdCkgfHwgVXNlckJsb2NrUmVnTGlzdFtpXS50ZXN0KGN1clVybCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0gPT09IEFDQ29uZmlnLlVzZXJCbG9ja0xpc3RbaV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KSA+PSAwID8gIiBhYy1ibG9jay1oaWdoIiA6ICIiOyAvLyDlpoLmnpzlvZPliY3pobXpnaLlrZjlnKjvvIzliJnpq5jkuq4KICAgICAgICAgICAgICAgICAgaW5zSFRNTCArPSBgPGxpPjxsYWJlbCBjbGFzcz0iYWMtYmxvY2staXRlbSR7aW5zQ2xhc3N9IiBkYXRhLWhvc3Q9IiR7dGhpcy5BQ0NvbmZpZy5Vc2VyQmxvY2tMaXN0W2ldfSI+JHt0aGlzLkFDQ29uZmlnLlVzZXJCbG9ja0xpc3RbaV19PC9sYWJlbD48bGFiZWwgY2xhc3M9ImFjLWJsb2NrLWl0ZW0gYWMtYmxvY2staXRlbWRlbCIgZGF0YS1ob3N0PSIke3RoaXMuQUNDb25maWcuVXNlckJsb2NrTGlzdFtpXX0iPng8L2xhYmVsPjwvbGk+XG5gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGluc0hUTUw7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjYWxfZGl5QmxvY2tMaXN0QnRuKCkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMub3RoZXIuc2hvd0Jsb2NrTGlzdEFyZWEpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNldHRpbmdfcGFuZWxfc2Vjb25kLmJsb2NrRWRpdEJ0bkVuZF90ZXh0OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNldHRpbmdfcGFuZWxfc2Vjb25kLmJsb2NrRWRpdEJ0bl90ZXh0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY2FsX1VzZXJCbG9ja0xpc3RSZWdleCgpIHsKICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gW107CiAgICAgICAgICAgICAgICB0aGlzLkFDQ29uZmlnLlVzZXJCbG9ja0xpc3QuZm9yRWFjaChvbmUgPT4gewogICAgICAgICAgICAgICAgICBvbmUgIT09IG51bGwgJiYgbGlzdC5wdXNoKG5ldyBSZWdFeHAob25lLnJlcGxhY2UoIioiLCAiLioiKSkpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtKSAhPT0gInVuZGVmaW5lZCIgJiYgdGhpcy5vdGhlci5hZGRCbG9ja0l0ZW0gIT09ICIiKSB7CiAgICAgICAgICAgICAgICAgIGxpc3QucHVzaChuZXcgUmVnRXhwKHRoaXMub3RoZXIuYWRkQmxvY2tJdGVtLnJlcGxhY2UoIioiLCAiLioiKSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGxpc3Q7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBBZHNTdHlsZU1vZGVDaGFuZ2UoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICB2MTogQ09OU1QudXNlSXRlbS5BZHNTdHlsZU1vZGUsCiAgICAgICAgICAgICAgICAgIHYyOiBDT05TVC51c2VJdGVtLkh1WWFuTW9kZSwKICAgICAgICAgICAgICAgICAgdjM6IEFDQ29uZmlnLlN0eWxlX0JhaWR1TGl0ZSwKICAgICAgICAgICAgICAgICAgdjQ6IEFDQ29uZmlnLmlzRmF2aWNvbkVuYWJsZSwKICAgICAgICAgICAgICAgICAgdjU6IENPTlNULmlzR29vZ2xlU3BlY2lhbCwKICAgICAgICAgICAgICAgICAgdjY6IEFDQ29uZmlnLmlzUmlnaHREaXNwbGF5RW5hYmxlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgVXNlclN0eWxlRW5hYmxlQ2hhbmdlKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgdjE6IEFDQ29uZmlnLmlzVXNlclN0eWxlRW5hYmxlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBsYW5DaGFuZ2UoKXsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIHYxOiBBQ0NvbmZpZy5pc0VuTGFuZwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGlzU2F2ZUJ1dHRvbkNhbkJlU2VlKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGlzRWxlbWVudFZpc2libGUodGhpcy4kcmVmcy5ib3R0b21TYXZlQnV0dG9uKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgd2F0Y2g6IHsKICAgICAgICAgICAgICAnQ09OU1QudXNlSXRlbS5IdVlhbk1vZGUnOiB7CiAgICAgICAgICAgICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgICAgICAgICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgICAgICAgICAgICBpZih2YWwpIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRIdVlhblN0eWxlKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIEFkc1N0eWxlTW9kZUNoYW5nZTogewogICAgICAgICAgICAgICAgaGFuZGxlcigpIHsKICAgICAgICAgICAgICAgICAgLy8g6ZyA6KaB5YWI5Yig6Zmk5Y6f5pyJ55qE6IqC54K55pWw5o2uCiAgICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qge3Jlcywgbm9kZX0gPSBjaGVja0RvY21lbnRIYXNOb2RlKCJBQy0iKQogICAgICAgICAgICAgICAgICAgIGlmIChyZXMpIG5vZGUucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBzYWZlUmVtb3ZlKCJzdHlsZVtjbGFzcz0nQUMtU3R5bGUtZXhwYW5kJ10sc3R5bGVbY2xhc3M9J0FDLVR3b1BhZ2VFeFN0eWxlJ10sc3R5bGVbY2xhc3M9J0FDLVRocmVlUGFnZUV4U3R5bGUnXSxzdHlsZVtjbGFzcz0nQUMtRm91clBhZ2VFeFN0eWxlJ10sc3R5bGVbY2xhc3M9J0FDLXN0eWxlLWxvZ28nXSxzdHlsZVtjbGFzcz0nQUMtYmFpZHVMaXRlU3R5bGUnXSxzdHlsZVtjbGFzcyo9J0h1WWFuU3R5bGUtRmlsZSddIik7CiAgICAgICAgICAgICAgICAgIGFjQ3NzTG9hZEZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIuaW5pdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgVXNlclN0eWxlRW5hYmxlQ2hhbmdlKCkgewogICAgICAgICAgICAgICAgaWYoQUNDb25maWcuaXNVc2VyU3R5bGVFbmFibGUpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkQ3VzdG9tU3R5bGUoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHNhZmVSZW1vdmUoInN0eWxlW2NsYXNzPSdBQy11c2VyU3R5bGUnXSIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBsYW5DaGFuZ2UoKXsKICAgICAgICAgICAgICAgIEFsbERhdGEubGFuLnVzZSA9IEFDQ29uZmlnLmlzRW5MYW5nID8gQWxsRGF0YS5sYW4uZW4gOiBBbGxEYXRhLmxhbi56aF9jbjsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNteXVzZXIiKS5yZW1vdmUoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICBpZiAodHlwZW9mIChWdWUpICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIGlmICgrVnVlLnZlcnNpb24uY2hhckF0KDApID09PSAyKSB7CiAgICAgICAgICAgICAgdnVlVk0gPSBuZXcgVnVlKG9wdGlvbnMpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZ1ZVZNID0gVnVlLmNyZWF0ZUFwcChvcHRpb25zKS5tb3VudChjaGVja05vZGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJWdWUg5pyq5a6M5oiQ5Yid5aeL5YyWLS3nqIvluo/ml6Dms5XmnInmlYjmiafooYwiKTsKICAgICAgICAgIH0KICAgICAgICB9LCAyNTApOwoKICAgICAgICBmdW5jdGlvbiBNYWluQ2FsbGJhY2soZSkgewogICAgICAgICAgaWYgKGUudGFyZ2V0ICE9IG51bGwgJiYgdHlwZW9mIChlLnRhcmdldC5jbGFzc05hbWUpID09PSAic3RyaW5nIiAmJiBlLnRhcmdldC5jbGFzc05hbWUudG9VcHBlckNhc2UoKS5pbmRleE9mKCJBQy0iKSA9PT0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IC8v5bGP6JS95o6J5Zug5Li65aKe5YqgY3Nz5a+86Ie055qE6Kem5Y+RaW5zZXJ05Yqo5L2cCiAgICAgICAgICByYXBpZERlYWwoKTsKICAgICAgICAgIEluc2VydFNldHRpbmdNZW51KCk7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgU2hvd1NldHRpbmcoKTsKICAgICAgICAgIH0sIDEwMDApIC8vIOa7nuWQjueql+WPo+eahOWKoOi9ve+8jOWHj+WwkeWJjeacn0NQVeS6ieeUqAogICAgICAgIH0KCiAgICAgICAgLyrku6XkuIvku6PnoIHlpKfpg6jliIbmnaXmupDkuo5TdXByZVByZWxvYWRlciDmhJ/osKIgc3dkeWggJiYgeXd6aGFpcWkgJiYgTkxGIOS7peWPiiBtYWNoNiDlpKfkvawqLwogICAgICAgIC8qCiAgICAgICAgU3VwZXJfcHJlbG9hZGVyUGx1c19vbmVfTmV3OiBQcmVsb2FkIGFuZCBBdXRvcGFnZXIuCiAgICAgICAgQ29weXJpZ2h0IChDKSAyMDIwIE1hY2g2CgogICAgICAgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIHZlcnNpb24gMy4KCiAgICAgICAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgoKICAgICAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KICAgICAgICAgKi8KICAgICAgICBmdW5jdGlvbiBhY19zcGZ1bmMoZSkgewogICAgICAgICAgY29uc29sZS5lcnJvcigi6L+Z6YeM5pyJ6Zeu6aKYIikKICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICB2YXIgdCwgciA9IGUuY3VycmVudFRhcmdldDsKICAgICAgICAgIHZhciBUd2VlbiA9IHsKICAgICAgICAgICAgICAgIExpbmVhcjogZnVuY3Rpb24gTGluZWFyKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiBlIC8gbiArIHQ7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgUXVhZDogewogICAgICAgICAgICAgICAgICBlYXNlSW46IGZ1bmN0aW9uIGVhc2VJbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiAoZSAvPSBuKSAqIGUgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXIgKiAoZSAvPSBuKSAqIChlIC0gMikgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIC89IG4gLyAyKSA8IDEgPyByIC8gMiAqIGUgKiBlICsgdCA6IC1yIC8gMiAqICgtLWUgKiAoZSAtIDIpIC0gMSkgKyB0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgQ3ViaWM6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogKGUgLz0gbikgKiBlICogZSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogKChlID0gZSAvIG4gLSAxKSAqIGUgKiBlICsgMSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIC89IG4gLyAyKSA8IDEgPyByIC8gMiAqIGUgKiBlICogZSArIHQgOiByIC8gMiAqICgoZSAtPSAyKSAqIGUgKiBlICsgMikgKyB0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgUXVhcnQ6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogKGUgLz0gbikgKiBlICogZSAqIGUgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlT3V0OiBmdW5jdGlvbiBlYXNlT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXIgKiAoKGUgPSBlIC8gbiAtIDEpICogZSAqIGUgKiBlIC0gMSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIC89IG4gLyAyKSA8IDEgPyByIC8gMiAqIGUgKiBlICogZSAqIGUgKyB0IDogLXIgLyAyICogKChlIC09IDIpICogZSAqIGUgKiBlIC0gMikgKyB0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgUXVpbnQ6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogKGUgLz0gbikgKiBlICogZSAqIGUgKiBlICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKiAoKGUgPSBlIC8gbiAtIDEpICogZSAqIGUgKiBlICogZSArIDEpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSAvPSBuIC8gMikgPCAxID8gciAvIDIgKiBlICogZSAqIGUgKiBlICogZSArIHQgOiByIC8gMiAqICgoZSAtPSAyKSAqIGUgKiBlICogZSAqIGUgKyAyKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBTaW5lOiB7CiAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXIgKiBNYXRoLmNvcyhlIC8gbiAqIChNYXRoLlBJIC8gMikpICsgciArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogTWF0aC5zaW4oZSAvIG4gKiAoTWF0aC5QSSAvIDIpKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXIgLyAyICogKE1hdGguY29zKE1hdGguUEkgKiBlIC8gbikgLSAxKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBFeHBvOiB7CiAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA9PSBlID8gdCA6IHIgKiBNYXRoLnBvdygyLCAxMCAqIChlIC8gbiAtIDEpKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlID09IG4gPyB0ICsgciA6IHIgKiAoMSAtIE1hdGgucG93KDIsIC0xMCAqIGUgLyBuKSkgKyB0OwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6IGZ1bmN0aW9uIGVhc2VJbk91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgPT0gZSA/IHQgOiBlID09IG4gPyB0ICsgciA6IChlIC89IG4gLyAyKSA8IDEgPyByIC8gMiAqIE1hdGgucG93KDIsIDEwICogKGUgLSAxKSkgKyB0IDogciAvIDIgKiAoMiAtIE1hdGgucG93KDIsIC0xMCAqIC0tZSkpICsgdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIENpcmM6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAtciAqIChNYXRoLnNxcnQoMSAtIChlIC89IG4pICogZSkgLSAxKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByICogTWF0aC5zcXJ0KDEgLSAoZSA9IGUgLyBuIC0gMSkgKiBlKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUgLz0gbiAvIDIpIDwgMSA/IC1yIC8gMiAqIChNYXRoLnNxcnQoMSAtIGUgKiBlKSAtIDEpICsgdCA6IHIgLyAyICogKE1hdGguc3FydCgxIC0gKGUgLT0gMikgKiBlKSArIDEpICsgdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIEVsYXN0aWM6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbiwgYSwgbykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAwID09IGUgPyB0IDogMSA9PSAoZSAvPSBuKSA/IHQgKyByIDogKG8gfHwgKG8gPSAuMyAqIG4pLCAhYSB8fCBhIDwgTWF0aC5hYnMocikgPyAoYSA9IHIsCiAgICAgICAgICAgICAgICAgICAgICBpID0gbyAvIDQpIDogaSA9IG8gLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKHIgLyBhKSwgLWEgKiBNYXRoLnBvdygyLCAxMCAqIChlIC09IDEpKSAqIE1hdGguc2luKChlICogbiAtIGkpICogKDIgKiBNYXRoLlBJKSAvIG8pICsgdCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbiwgYSwgbykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAwID09IGUgPyB0IDogMSA9PSAoZSAvPSBuKSA/IHQgKyByIDogKG8gfHwgKG8gPSAuMyAqIG4pLCAhYSB8fCBhIDwgTWF0aC5hYnMocikgPyAoYSA9IHIsCiAgICAgICAgICAgICAgICAgICAgICBpID0gbyAvIDQpIDogaSA9IG8gLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKHIgLyBhKSwgYSAqIE1hdGgucG93KDIsIC0xMCAqIGUpICogTWF0aC5zaW4oKGUgKiBuIC0gaSkgKiAoMiAqIE1hdGguUEkpIC8gbykgKyByICsgdCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4sIGEsIG8pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCA9PSBlID8gdCA6IDIgPT0gKGUgLz0gbiAvIDIpID8gdCArIHIgOiAobyB8fCAobyA9IG4gKiAoLjMgKiAxLjUpKSwgIWEgfHwgYSA8IE1hdGguYWJzKHIpID8gKGEgPSByLAogICAgICAgICAgICAgICAgICAgICAgaSA9IG8gLyA0KSA6IGkgPSBvIC8gKDIgKiBNYXRoLlBJKSAqIE1hdGguYXNpbihyIC8gYSksIGUgPCAxID8gYSAqIE1hdGgucG93KDIsIDEwICogKGUgLT0gMSkpICogTWF0aC5zaW4oKGUgKiBuIC0gaSkgKiAoMiAqIE1hdGguUEkpIC8gbykgKiAtLjUgKyB0IDogYSAqIE1hdGgucG93KDIsIC0xMCAqIChlIC09IDEpKSAqIE1hdGguc2luKChlICogbiAtIGkpICogKDIgKiBNYXRoLlBJKSAvIG8pICogLjUgKyByICsgdCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBCYWNrOiB7CiAgICAgICAgICAgICAgICAgIGVhc2VJbjogZnVuY3Rpb24gZWFzZUluKGUsIHQsIHIsIG4sIGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBhICYmIChhID0gMS43MDE1OCksIHIgKiAoZSAvPSBuKSAqIGUgKiAoKGEgKyAxKSAqIGUgLSBhKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VPdXQ6IGZ1bmN0aW9uIGVhc2VPdXQoZSwgdCwgciwgbiwgYSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09IGEgJiYgKGEgPSAxLjcwMTU4KSwgciAqICgoZSA9IGUgLyBuIC0gMSkgKiBlICogKChhICsgMSkgKiBlICsgYSkgKyAxKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGVhc2VJbk91dDogZnVuY3Rpb24gZWFzZUluT3V0KGUsIHQsIHIsIG4sIGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBhICYmIChhID0gMS43MDE1OCksIChlIC89IG4gLyAyKSA8IDEgPyByIC8gMiAqIChlICogZSAqICgoMSArIChhICo9IDEuNTI1KSkgKiBlIC0gYSkpICsgdCA6IHIgLyAyICogKChlIC09IDIpICogZSAqICgoMSArIChhICo9IDEuNTI1KSkgKiBlICsgYSkgKyAyKSArIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBCb3VuY2U6IHsKICAgICAgICAgICAgICAgICAgZWFzZUluOiBmdW5jdGlvbiBlYXNlSW4oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiByIC0gVHdlZW4uQm91bmNlLmVhc2VPdXQobiAtIGUsIDAsIHIsIG4pICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZU91dDogZnVuY3Rpb24gZWFzZU91dChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIC89IG4pIDwgMSAvIDIuNzUgPyByICogKDcuNTYyNSAqIGUgKiBlKSArIHQgOiBlIDwgMiAvIDIuNzUgPyByICogKDcuNTYyNSAqIChlIC09IDEuNSAvIDIuNzUpICogZSArIC43NSkgKyB0IDogZSA8IDIuNSAvIDIuNzUgPyByICogKDcuNTYyNSAqIChlIC09IDIuMjUgLyAyLjc1KSAqIGUgKyAuOTM3NSkgKyB0IDogciAqICg3LjU2MjUgKiAoZSAtPSAyLjYyNSAvIDIuNzUpICogZSArIC45ODQzNzUpICsgdDsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZWFzZUluT3V0OiBmdW5jdGlvbiBlYXNlSW5PdXQoZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlIDwgbiAvIDIgPyAuNSAqIFR3ZWVuLkJvdW5jZS5lYXNlSW4oMiAqIGUsIDAsIHIsIG4pICsgdCA6IC41ICogVHdlZW4uQm91bmNlLmVhc2VPdXQoMiAqIGUgLSBuLCAwLCByLCBuKSArIC41ICogciArIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFR3ZWVuTSA9IFsiTGluZWFyIiwgIlF1YWQiLCAiQ3ViaWMiLCAiUXVhcnQiLCAiUXVpbnQiLCAiU2luZSIsICJFeHBvIiwgIkNpcmMiLCAiRWxhc3RpYyIsICJCYWNrIiwgIkJvdW5jZSJdLAogICAgICAgICAgICAgIFR3ZWVuRWFzZSA9IFsiZWFzZUluIiwgImVhc2VPdXQiLCAiZWFzZUluT3V0Il07CiAgICAgICAgICB2YXIgcHJlZnMgPSB7CiAgICAgICAgICAgIHNfbWV0aG9kOiAzLAogICAgICAgICAgICBzX2Vhc2U6IDIsCiAgICAgICAgICAgIHNfRlBTOiA2MCwKICAgICAgICAgICAgc19kdXJhdGlvbjogMzMzLAogICAgICAgICAgfTsKCiAgICAgICAgICBmdW5jdGlvbiBnZXRSZWxhdGl2ZURpdihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gci5pZDsKICAgICAgICAgICAgcmV0dXJuICh0ID0gdC5yZXBsYWNlKC8oc3Atc2VwYXJhdG9yLSkoLispLywgKGZ1bmN0aW9uICh0LCByLCBuKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHIgKyBTdHJpbmcoTnVtYmVyKG4pICsgKCJwcmUiID09IGUgPyAtMSA6IDEpKTsKICAgICAgICAgICAgfSkpKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQpIDogbnVsbDsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBzcF90cmFuc2l0aW9uKGUsIHQpIHsKICAgICAgICAgICAgdmFyIHIgPSBzcF90cmFuc2l0aW9uLlR3ZWVuRjsKICAgICAgICAgICAgciB8fCAociA9IChyID0gVHdlZW5bVHdlZW5NW3ByZWZzLnNfbWV0aG9kXV0pW1R3ZWVuRWFzZVtwcmVmcy5zX2Vhc2VdXSB8fCByLCBzcF90cmFuc2l0aW9uLlR3ZWVuRiA9IHIpOwogICAgICAgICAgICB2YXIgbiA9IDFlMyAvIHByZWZzLnNfRlBTLCBhID0gMCwgbyA9IGUsIGkgPSB0IC0gZSwgcyA9IE1hdGguY2VpbChwcmVmcy5zX2R1cmF0aW9uIC8gbiksCiAgICAgICAgICAgICAgICBjID0gd2luZG93LnNjcm9sbFg7CiAgICAgICAgICAgICFmdW5jdGlvbiB0cmFuc2l0aW9uKCkgewogICAgICAgICAgICAgIHZhciBlID0gTWF0aC5jZWlsKHIoYSwgbywgaSwgcykpOwogICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGwoYywgZSksIGEgPCBzICYmIChhKyssIHNldFRpbWVvdXQodHJhbnNpdGlvbiwgbikpOwogICAgICAgICAgICB9KCk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gc2Nyb2xsSXQoZSwgdCkgewogICAgICAgICAgICBzcF90cmFuc2l0aW9uKGUsIHQpOwogICAgICAgICAgfQoKICAgICAgICAgIHN3aXRjaCAoZS50YXJnZXQuaWQpIHsKICAgICAgICAgICAgY2FzZSAic3Atc3AtZ290b3AiOgogICAgICAgICAgICAgIHNjcm9sbEl0KHdpbmRvdy5zY3JvbGxZLCAwKTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgInNwLXNwLWdvcHJlIjoKICAgICAgICAgICAgICB2YXIgbiA9IGdldFJlbGF0aXZlRGl2KCJwcmUiKTsKICAgICAgICAgICAgICBpZiAoIW4pIHJldHVybjsKICAgICAgICAgICAgICB0ID0gd2luZG93LnNjcm9sbFk7CiAgICAgICAgICAgICAgdmFyIGEgPSBuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDsKICAgICAgICAgICAgICBhID0gdCAtIChyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIGEpOwogICAgICAgICAgICAgIHNjcm9sbEl0KHQsIGEpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAic3Atc3AtZ29uZXh0IjoKICAgICAgICAgICAgICB2YXIgbyA9IGdldFJlbGF0aXZlRGl2KCJuZXh0Iik7CiAgICAgICAgICAgICAgaWYgKCFvKSByZXR1cm47CiAgICAgICAgICAgICAgdCA9IHdpbmRvdy5zY3JvbGxZOwogICAgICAgICAgICAgIHZhciBpID0gby5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7CiAgICAgICAgICAgICAgaSA9IHQgKyAoLXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgaSk7CiAgICAgICAgICAgICAgc2Nyb2xsSXQodCwgaSk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJzcC1zcC1nb2JvdHRvbSI6CiAgICAgICAgICAgICAgc2Nyb2xsSXQod2luZG93LnNjcm9sbFksIE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsIGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0KSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB3aW5kb3dzY3JvbGwoZm4gPSAoKT0+e30pIHsKICAgICAgICAgIHNhZmVXYWl0RnVuYygoKSA9PiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsICgpID0+IHsKICAgICAgICAgICAgdmFyIGJlZm9yZVNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IC8vIOW7tuaXtuaJp+ihjO+8jOmBv+WFjeWImui9veWFpeWIsOmhtemdouWwseinpuWPkee/u+mhteS6i+S7tgogICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgdmFyIGFmdGVyU2Nyb2xsVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCwKICAgICAgICAgICAgICAgICAgICBkZWx0YSA9IGFmdGVyU2Nyb2xsVG9wIC0gYmVmb3JlU2Nyb2xsVG9wOwogICAgICAgICAgICAgICAgaWYgKGRlbHRhID09PSAwKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICBmbihkZWx0YSA+IDAgPyAiZG93biIgOiAidXAiLCBlKTsKICAgICAgICAgICAgICAgIGJlZm9yZVNjcm9sbFRvcCA9IGFmdGVyU2Nyb2xsVG9wOwogICAgICAgICAgICAgIH0sIGZhbHNlKTsKICAgICAgICAgICAgfSwgMTAwMCkKICAgICAgICAgIH0pCiAgICAgICAgfQoKICAgICAgICB3aW5kb3dzY3JvbGwoZnVuY3Rpb24gKGRpcmVjdGlvbiwgZSkgewogICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gImRvd24iKSB7IC8vIOS4i+a7keaJjeWHhuWkh+e/u+mhtQogICAgICAgICAgICBsZXQgc3BsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWZ3LWFfZW5hYmxlIik7CiAgICAgICAgICAgIC8vIOW8gOWQr+WQju+8jOS4lOWcqOmdnu+8iHN1cHJlcHJlbG9hZGVy5ZCv55So77yJ5pe25Z2H5Y+vCiAgICAgICAgICAgIGlmIChBQ0NvbmZpZy5pc0F1dG9wYWdlID09PSB0cnVlICYmICEoc3BsICYmIHNwbC5jaGVja2VkID09PSB0cnVlKSkgewogICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICAgICAgICBsZXQgc2Nyb2xsRGVsdGEgPSA2NjY7CiAgICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFKSBzY3JvbGxEZWx0YSA9IDEwMjQ7IC8vIOavleern+iwt+atjOWKoOi9vee8k+aFoueahOmXrumimAogICAgICAgICAgICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IDw9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgKyBzY3JvbGxUb3AgKyBzY3JvbGxEZWx0YSAmJiBjdXJTaXRlLnBhZ2VMb2FkaW5nID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlTG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5EVUNLKSB7IC8vIOWPr+S7peeUqOW3suacieeahOaWueazleadpeWunueOsOS6hgogICAgICAgICAgICAgICAgICBpZiAoIUFDQ29uZmlnLm5vcm1hbGl6ZUR1Y2sgfHwgK0FDQ29uZmlnLmR1Y2suQWRzU3R5bGVNb2RlID49IDMpIHsgIC8vIOWmguaenOayoeacieW8gOWQr++8jOmCo+S5iOaJi+WKqOe/u+mhtSB8fCDlpoLmnpzmmK/lj4zliJfnmoTml7blgJnvvIzkvLzkuY7lubbkuI3kvJroh6rliqjop6blj5Hnv7vpobXmlYjmnpwKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjbGlua3MgLnJlc3VsdC0tbW9yZSBhIikuY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGN1clNpdGUucGFnZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9LCA1MDAwKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgU2hvd1BhZ2VyLmxvYWRNb3JlUGFnZSgpOwogICAgICAgICAgICAgICAgICBpZihjdXJTaXRlLnBhZ2VyICYmIGN1clNpdGUucGFnZXIuc3R5bGlzaCkgewogICAgICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKGN1clNpdGUucGFnZXIuc3R5bGlzaCwgIkFDLXBhZ2VyLXN0eWxpc2giKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIFNob3dQYWdlciA9IHsKICAgICAgICAgIGdldEZ1bGxIcmVmOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZihlID09PSBudWxsKSByZXR1cm4gJyc7CiAgICAgICAgICAgICJzdHJpbmciICE9IHR5cGVvZiBlICYmIChlID0gZS5nZXRBdHRyaWJ1dGUoImhyZWYiKSk7CiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5nZXRGdWxsSHJlZi5hOwogICAgICAgICAgICByZXR1cm4gdCB8fCAodGhpcy5nZXRGdWxsSHJlZi5hID0gdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKSksIHQuaHJlZiA9IGUsIHQuaHJlZjsKICAgICAgICAgIH0sCiAgICAgICAgICBjcmVhdGVEb2N1bWVudEJ5U3RyaW5nOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoZSkgewogICAgICAgICAgICAgIGlmICgiSFRNTCIgIT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSkgcmV0dXJuIChuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoZSwgImFwcGxpY2F0aW9uL3hodG1sK3htbCIpOwogICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0ID0gKG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhlLCAidGV4dC9odG1sIik7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCkgdCA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiQURvY3VtZW50Iik7IGVsc2UgdHJ5IHsKICAgICAgICAgICAgICAgICh0ID0gZG9jdW1lbnQuY2xvbmVOb2RlKCExKSkuYXBwZW5kQ2hpbGQodC5pbXBvcnROb2RlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgITEpKSwKICAgICAgICAgICAgICAgICAgdC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodC5jcmVhdGVFbGVtZW50KCJoZWFkIikpLCB0LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImJvZHkiKSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgICAgdmFyIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpOwogICAgICAgICAgICAgICAgci5zZWxlY3ROb2RlQ29udGVudHMoZG9jdW1lbnQuYm9keSk7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHIuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGUpOwogICAgICAgICAgICAgICAgdC5ib2R5LmFwcGVuZENoaWxkKG4pOwogICAgICAgICAgICAgICAgZm9yICh2YXIgYSwgbyA9IHsKICAgICAgICAgICAgICAgICAgVElUTEU6ICEwLAogICAgICAgICAgICAgICAgICBNRVRBOiAhMCwKICAgICAgICAgICAgICAgICAgTElOSzogITAsCiAgICAgICAgICAgICAgICAgIFNUWUxFOiAhMCwKICAgICAgICAgICAgICAgICAgQkFTRTogITAKICAgICAgICAgICAgICAgIH0sIGkgPSB0LmJvZHksIHMgPSBpLmNoaWxkTm9kZXMsIGMgPSBzLmxlbmd0aCAtIDE7IGMgPj0gMDsgYy0tKSBvWyhhID0gc1tjXSkubm9kZU5hbWVdICYmIGkucmVtb3ZlQ2hpbGQoYSk7CiAgICAgICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBjb25zb2xlLmVycm9yKCJbQUMtU2NyaXB0XSIsICLmsqHmnInmib7liLDopoHovazmiJBET03nmoTlrZfnrKbkuLIiKTsKICAgICAgICAgIH0sCiAgICAgICAgICBsb2FkTW9yZVBhZ2U6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKGN1clNpdGUucGFnZXIpIHsKICAgICAgICAgICAgICBsZXQgY3VyUGFnZUVsZSA9IGdldEVsZW1lbnRCeVhwYXRoKGN1clNpdGUucGFnZXIubmV4dExpbmspOwogICAgICAgICAgICAgIHZhciB1cmwgPSB0aGlzLmdldEZ1bGxIcmVmKGN1clBhZ2VFbGUpOwogICAgICAgICAgICAgIGlmKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFICkgewogICAgICAgICAgICAgICAgaWYobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdtYWNpbnRvc2gnKSkgewogICAgICAgICAgICAgICAgICAvLyBNQVJLIOS4uuS6huWFvOWuueeZvuW6puWcqHNhZmFyaeS4i+eahAogICAgICAgICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgnaHR0cHM6Ly8nLCAnaHR0cDovLycpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZih1cmwgPT09ICcnKSByZXR1cm47CiAgICAgICAgICAgICAgdmFyIHNlcEltZ3MgPSB7CiAgICAgICAgICAgICAgICB0b3A6ICJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJZQUFBQVdDQVlBQUFERXRHdzdBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQVd0SlJFRlVlTnJjbEUwclJHRVV4OGMxR1VwUkpJVklaR2RoWkNWcjM4R0doYUkwWlh3Q2tsaWdsQ2haRWN2SnhoZGdZV09qTEVVcG0vRXlpTHp6ZStvOGRUemRPM1Bsam9WVHY3clBjOC81ZCs2NTU1eFlyRWhXb3A2Ym9kYTUrNmw5d2pXY1dwRitXSWJxQ0pKOWhGUmNEcjNRQUlrSWhLdWd6NVBEZmtTaXhrcGh6NWFpQW5xZ0U4cmdXUnhHb1NPUHlCa3N3UXVVd3lzY3c0SHJtRkNaTDhLdC9KQWc3bUVGUEVtbzRGZFB3azBCVWNzZHpJYXAwVFE4cU1BUHVJQ2NFakxuZCtWalNqY2ZKTmdJYy9Ea1pHU3ltWUdzbks5RVpNcnhlNE1GYU5HaVpqQzJmVDV6UTNwN1FESzFkUjJHU2xqemljbEF2UlVlOG5IWVZBNGpqdkM0M05mQXVrL3NtQjJRTnFjc1d4S2NMYkFLVEZuUzBoV0Q2bjI3RmQ2RkxxaURJNWlRbVE5anBpVlQwc05KNmFZZDdkQUUzUUhCYmluU0FYNUpXV2F4dUxvOEYzNWpoL2JCSzlZKy9yL0NsNnBMY25uYThOdnVER01uc2xwYlpScFhaWVQvM3I0RUdBQ1pMM1pMMmFmTkZBQUFBQUJKUlU1RXJrSmdnZz09IiwKICAgICAgICAgICAgICAgIGJvdHRvbTogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBWEZKUkVGVWVOck0xYzhyQkdFY3gvRmR0Q0VrTHFZdHBkd2tLU1VIVWh4d0lUZEsrWjN5TTJjT0xuSjM5Q2M0NFNnSFNjbUp3bEZ4c0lkbENTY082LzJ0NzZPbnA1MmRYVHRibm5vMU04K1B6ODQrenpNemtjZy9LQTNvUlR6TTBBNGNJNFZUZElVVlBJTTNwUEdPNWFBQkpUa0d4MUJxalltRkZaeFc3bm5Cd1htWG9nV1g2YkVHYzJqRUlVNytrTldEVVNTd1p5cW5kU3ZKM04xZzJCbTBvTHRCMmordzdyUVA0TXBxWHpSVDBZUmFQVy9CdGhNZWRZTHM2MEhzb0UydnE5QnNQd0FKYThYRkxVYTBmVXJ2Uk9vL3NhVDFROWFkR2ltZGx0OHlqNlRUNlE2ZDJ2YWlkYTlZUmJ0UDZFcW1CWkM1ZkhBNlgrQUF6MWJ3RWM2Y2ZrOStvYVpNNE5vWkpMNzArSjJoVGFadE5wZXQwNDF6Szh5UC9NZ2wrck9GMWVtcjBVTTF4bkFmRVB5SVNkMEpubzZ2dHgrUXVNNlBaMjJscE83ZGJFVjJTaXY2clBlSWpOczFIZFlDN2l4ZkcrWUJxZFRWRHFQSXY2aUlXdk83aVhHVUZ4QXFpNzJQcmFKOUlIOEVHQUNRY1lqWVJkNUdId0FBQUFCSlJVNUVya0pnZ2c9PSIsCiAgICAgICAgICAgICAgICBwcmU6ICJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJZQUFBQVdDQVlBQUFERXRHdzdBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQVNsSlJFRlVlTnBpWUJqT29CaUlyd0p4RlJBelVzdlFWaUQrQ01UL2dmZ1RFUGRSeTlCUFVFTmgrQXNROTFKaWFBdVNTOUh4WjNJTmI4SGkwditVdXJ3RjZxTC9ST0J2UU54RHJLRmZrVFQrQStKblFQd0JLZkpBL0w5SWFuN2ljN2tNRUhjQzhRODBGM1VBY1JzUXY0YnkzMElOYVVKVDl3ZWFXaFNRRFJVQjR1Vll2TGtZaUFXQU9Cb3B2RUZCbEFyRVBFQThHNHVlOVVBc0FUTTRFWXVDSlVnS010QU1Mb1NLQ3dQeFhDeDZjMWlnQ2xUUWdtVVpWUE5ySE1FR3kzbWdZQ2tDWWlZZ1RrQ1NWNFVadkEySWpZQllESWd2UWJQdk95SlRFQ2lkNXdIeGJ5QTJCdUwzUUx3UldZRXNFSnZnMEl3ZUZFVTQxSUVNbGdjeFdKQUVIME14SmVBc2pNRkVxNkp3K0JyOEJpbVZmTUNUREVrRzdFQmNBOFQzb1dVSng0RFZZd0FCQmdDYW5ublN6Ymd3SVFBQUFBQkpSVTVFcmtKZ2dnPT0iLAogICAgICAgICAgICAgICAgbmV4dDogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQllBQUFBV0NBWUFBQURFdEd3N0FBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBVDFKUkVGVWVOcmMxYjFLQTBFWWhlRWwvaUFSRkZFa0tsNkQwVUs4Q3JFVnJDd0VleEZDdEJJbFJXSWpzZkVpTEwwRkt6czdRVVd4TTJwaUZNVWt2aFBPd0xBczJUR3VDbjd3a05sbDVqQzcrdzBKZ3Y5YXZkakFPYmJRbjFUd0N1N1F3aFdXNHhha1BJT0hNS3p4R0NhU0NtNmlvWEhMWjBIcXB6N0tyd1JQSXZ2TnZCbE0yell5Tlk4Y01qaERIbzlmQ0J6RXJuSXFLTmpnUlN4cHZJQUJiT0xlczJNS1dIZnVYZGhYY1IyYXZLcko0ekdoSTlnTGhRYnE5WGFaZ0dPMWt1dElPeklIcEtwN05hd2hqWU9JTlNlWTZsRndIYWN3MTdQNk5UV0hkNHhxbk5iY1M4M0xPYnRzYUNQYkVXK2dYVVc4T0Rzd0MyN3hvT3NuM09ERG1mT0dzczlYTHVFNTRqR2p2UHFHdXVHMW1GRHpaSWZkTkh5bm5kZTdEYlcxcjVEd1RzdEpIUDJpRTU1WXFEMzZlYlhaRHZyKzdML3NVNEFCQUlwVlpXbm9BNUdrQUFBQUFFbEZUa1N1UW1DQyIsCiAgICAgICAgICAgICAgICBuZXh0X2dyYXk6ICJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJZQUFBQVdDQVlBQUFERXRHdzdBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXR4SlJFRlVlTnJjbGM5TDJtRWN4Ny82TmJWWnFSVmo3cElPbElVdVoxSE1ndjBCRGNxVDdKcnNrSDEzRUxQQkY3ZVR2ejEwSHpuV1FCbEJSSWZCWElmQkxtcVhzY3ZZWldQS3JNTklVOUFwbXJyMzQvdzZpMG92TVpqdytIMCt6L044WHQrUG4vZm44MGhSLytXSFlSaEJJcEZ3UktQUnovRjQvS25ENFJCMjh4SDBBaDRjSEh5b1VDanNJcEZJSVpQSkhrbWwwbTlZZm4yWkQ3OFhjTDFlSDZyVmFsSU1DbU1VdHFLYkQ3L0hiTlF4YXExNW94Y0gvbFhwY21YZ3RuaDJ1LzJtWEM2L0RxRStzU3hMbFVxbG5pRTBUVlBCWUpBcUZvdDYrR1Y5UHQrUEp0aG1zODBzTFMyeEVvbmtobGdzL2pnd01PQmNYVjNONWZQNXJsQ2NwOWJYMXlXTGk0dWVjcms4VTZsVXNoRFkzd1JiTEpZRkdLWnNOa3NxNE43OC9Md1k5aE9uMDVrNU9qcWkrUHpUR2VQeGVGd1pVbDZ2ZDhoa012a1BEZzZzWkoyTTVlWGxyMXdxVXUya0E1Sk9weTJJQU8rb085ZlcxbjVtTXBrMm5Eam1jamtLTlUyNVhDNjUyV3gycFZJcDY1bVhKMm55alVQcHFha3BOWnh1QThZNVQ4N096c29iamNZSHBWS3BHaHNiZTFDdFZrWFlxeFFLaFRkcXRmcUwxV3IxSnBQSnh4eVU1THEvdno4YUNvWDhUVERhdFlpRmhGNnZ4eDV0QUp3bThPUGo0OG01dWJtS1NxVWFBV3dTYTllUXc2SkdvL2x1TkJvTmg0ZUhiQWUwSmhBSU5zTGg4TE5BSUpDaXVkaHhCK1FoMmx1ZFRpZkRBUUx2STNBSWNoK1JrbDhqSmxyaENiT3FnZm9MbURlcE9GL0JmR05yYTJzRkZaRnR2cWd6TWJGWWpBaXlwOVZxaDRWQzRjVEp5WW1ROTBlcElRSnRIUk8xYkE1YVJoQXZkbloyR0kvSDg3Y0V6NVlQZ2VPUzJSc2ZIeDlCN3UrZ09pNjh5UUF0WVg5emQzZVhnWkNuYS9zOEJ5NXlwR1VVemhPSVNIZ085QmZXWHdHNmNoWjZJYmlWYzZMd25zRmdHSVZBZXBMemprNHJZVzF6ZTN1YmNidmQ1M2ZqWlYyRmFxR1E2M2ZUMDlQRE1POWk5QkVvb24wSjlSbS8zMzl4bTNkcjJmMzlmVkxYN3dGdm9NVnZvWVdmUnlJUkZuZEQvWi84bmYwV1lBQThFQzFaL1pObTRnQUFBQUJKUlU1RXJrSmdnZz09IiwKICAgICAgICAgICAgICAgIHByZV9ncmF5OiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCWUFBQUFXQ0FZQUFBREV0R3c3QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFzbEpSRUZVZU5yY2xUdE1XbUVVeHovdXZUemxJVWhwTk1SMGFHTmpyTkhTbUhUcVJKeWFkdWpRRGJTR1J3SlVhWUNtRGl6cVVFdzZPRFZOR2dicFlDZlNwRklOQ1F6RlI5b3lNWFJzWEZDc0FYa0lLTkwvUjdnR1d4T3NTZFBFazV6YzNPK2U4N3ZuKzU5enYwdklwYlNKaVFteXVibjVMQktKcE5iWDExKzRYQzVCdXh5MlhZRE5aaU1PaDJPVzR6aVBUQ2JUaThYaWtlSGg0U3NTaWVRVFhuSXhzTjF1SjFhcmRWWWdFRGdQRHcrVjlYcWQxR28xTWN1eWc3QXV1Vnkrc3JhMjluZGdWRW5HeDhkbmhFS2hzMXF0S2dFL2VYWjhmQ3pDK3EzKy9uNnRTcVZhU1NRUzV3TTduVTVpTXBsbXNGMVhwVkk1QmVYdDZPaElCRmtHQWU5U0twVi93Tm16S2pXYnpSVDZ0Rnd1Szg2Q1VxUHJrSVZXUGpRd01LQldLQlNuNE96djBMR3hzUm1SU0RTRlNqdWEwRG84VFJXQVMrQjUrQjY4Zy9JaGl4Q052UVBOMVdqdWllWnNTL2YxYU5RMHd6QnVhQ3FsVUNRUnRWcjlFczFLNGtWRFdKTmhyUWpBSWlxTWxrcWxlODA0Rm5rakJvT2hFenY0dnJHeGtXMkFMUmFMRnJxK1FvQVYybkU4dExlM2R6RVlERTV2YjI5Mzl2WDFQY0JraUtWU2FRMWpGb3JGWXErTlJxTXVtODNlYnNZem1KcTdzR3U0eGhrS3hzRGZCL0F4bk84NjBldjFvZVhsWlU4Z0VNZ21rMGtGcW13OG85ZFVLaVdmbjU4dmhNUGg1NGg3UytPcFFYTlNMQllmZWp5ZVIxeXp3OWRiUm9uMDlQUzhXMTFkbmZMNWZKbDhQayswV2kzaGs1dnlDTkJZNHZWNmYwSW05K2pvS0pOT3A4MThvOEc3MGFoNGFXbnBJelNLWUNhL2RYZDNCK1B4dUhOeWNqS3pzN056QW1zMStxRlF5K1Z5ZERSejBXalVwZFBwM3RCOFRGTTBGQXFGR3hYUHpjMTlwbEpyTkpxcmFNb1h0OXROdDNTdWMrVGc0SUNlSmZtRmhRVkxvVkF3b0tHN2ZyLy9COGNIQUw2Rnk5WkZEaW5hRy9yNXc3N3lhOHkvT2hFdktSaGp0SXVwMllNVGVCYjNtWFk1M0huQW1Oa1ArL3Y3TnpIVFR3QU80Zjc5Zi91ZC9SSmdBT0xjUk5acUxvak1BQUFBQUVsRlRrU3VRbUNDIiwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIEFDX2FkZFN0eWxlKCIuc3Atc2VwYXJhdG9ye2xpbmUtaGVpZ2h0OjEuOCAhaW1wb3J0YW50O29wYWNpdHk6MSAhaW1wb3J0YW50O3Bvc2l0aW9uOnJlbGF0aXZlICFpbXBvcnRhbnQ7ZmxvYXQ6bm9uZSAhaW1wb3J0YW50O3RvcDowICFpbXBvcnRhbnQ7bGVmdDowICFpbXBvcnRhbnQ7bWluLXdpZHRoOjM2NnB4O3dpZHRoOmF1dG87dGV4dC1hbGlnbjpjZW50ZXIgIWltcG9ydGFudDtmb250LXNpemU6MTRweCAhaW1wb3J0YW50O2Rpc3BsYXk6YmxvY2sgIWltcG9ydGFudDtwYWRkaW5nOjNweCAwICFpbXBvcnRhbnQ7bWFyZ2luOjVweCAxMHB4IDhweDtjbGVhcjpib3RoICFpbXBvcnRhbnQ7Ym9yZGVyLXN0eWxlOnNvbGlkICFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNjY2NjY2MgIWltcG9ydGFudDtib3JkZXItd2lkdGg6MXB4ICFpbXBvcnRhbnQ7LW1vei1ib3JkZXItcmFkaXVzOjMwcHggIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjMwcHggIWltcG9ydGFudDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmYgIWltcG9ydGFudDt9LnNwLXNlcGFyYXRvcjpob3Zlcntib3gtc2hhZG93OjAgMCAxMXB4IHJnYmEoMzMsMzMsMzMsMC4yKTt9I3NwLXNlcGFyYXRvci1ob3ZlcntkaXNwbGF5Om5vbmU7fS5zcC1zZXBhcmF0b3I6aG92ZXIgI3NwLXNlcGFyYXRvci1ob3ZlcntkaXNwbGF5OmJsb2NrO30uc3Atc2VwYXJhdG9yIC5zcC1zb21laW5mb3twb3NpdGlvbjphYnNvbHV0ZSAhaW1wb3J0YW50O3JpZ2h0OjEwcHggIWltcG9ydGFudDtmb250LXNpemU6MTJweCAhaW1wb3J0YW50O2ZvbnQtc3R5bGU6aXRhbGljICFpbXBvcnRhbnQ7YmFja2dyb3VuZDpub25lICFpbXBvcnRhbnQ7fS5zcC1zZXBhcmF0b3Igc3Bhbnt2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO2N1cnNvcjogcG9pbnRlcjtwYWRkaW5nOiAwO21hcmdpbjogMCA1cHg7ZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aWR0aDoyMnB4O2hlaWdodDoyMnB4O30uc3Atc2VwYXJhdG9yIGF7bWFyZ2luOjAgMjBweCAwIC02cHggIWltcG9ydGFudDtkaXNwbGF5OmlubGluZSAhaW1wb3J0YW50O3RleHQtc2hhZG93OiNmZmYgMCAxcHggMCAhaW1wb3J0YW50O2JhY2tncm91bmQ6bm9uZSAhaW1wb3J0YW50O2NvbG9yOiM1OTU5NTkgIWltcG9ydGFudDt9LnNwLXNlcGFyYXRvciBpbnB1dHtwYWRkaW5nOjAgIWltcG9ydGFudDtsaW5lLWhlaWdodDoyM3B4ICFpbXBvcnRhbnQ7fS5zcC1zZXBhcmF0b3IgLnNwLW1kLXNwYW57Zm9udC13ZWlnaHQ6Ym9sZCAhaW1wb3J0YW50O21hcmdpbjowIDIwcHggIWltcG9ydGFudDt9I3NwLXNwLW1kLW51bWJlcnt3aWR0aDo2Y2ggIWltcG9ydGFudDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGUgIWltcG9ydGFudDtkaXNwbGF5OmlubGluZS1ibG9jayAhaW1wb3J0YW50O3RleHQtYWxpZ246bGVmdCAhaW1wb3J0YW50O30iICsKICAgICAgICAgICAgICAgIGAuYWNfc3BfdG9we2JhY2tncm91bmQtaW1hZ2U6dXJsKCcke3NlcEltZ3MudG9wfScpfWAgKwogICAgICAgICAgICAgICAgYC5hY19zcF9wcmV7YmFja2dyb3VuZC1pbWFnZTp1cmwoJyR7c2VwSW1ncy5wcmV9Jyl9YCArCiAgICAgICAgICAgICAgICBgLmFjX3NwX25leHR7YmFja2dyb3VuZC1pbWFnZTp1cmwoJyR7c2VwSW1ncy5uZXh0fScpfWAgKwogICAgICAgICAgICAgICAgYC5hY19zcF9ib3R0b217YmFja2dyb3VuZC1pbWFnZTp1cmwoJyR7c2VwSW1ncy5ib3R0b219Jyl9YCArCiAgICAgICAgICAgICAgICBgLmFjX3NwX25leHRfZ3JheXtiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtzZXBJbWdzLm5leHRfZ3JheX0nKX1gICsKICAgICAgICAgICAgICAgIGAuYWNfc3BfcHJlX2dyYXl7YmFja2dyb3VuZC1pbWFnZTp1cmwoJyR7c2VwSW1ncy5wcmVfZ3JheX0nKX1gLAogICAgICAgICAgICAgICAgIkFDLVByZWxvYWQiKQogICAgICAgICAgICAgIGlmIChjdXJTaXRlLnBhZ2VVcmwgPT09IHVybCkgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiW0FDLVNjcmlwdF0iLCAi57+76aG15Yiw6L6+5bqV6YOo5LqGIC0g5oiW6ICF5byC5bi4IC0g5Ye6546w5byC5bi46K+355u05o6l5Y+N6aaI5L2c6ICF5L+u5pS5Iik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfS8vIOS4jeS8mumHjeWkjeWKoOi9veebuOWQjOeahOmhtemdogogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLliqDovb3nv7vpobXlnLDlnYDvvJoiICsgdXJsKQogICAgICAgICAgICAgIGN1clNpdGUucGFnZVVybCA9IHVybDsKICAgICAgICAgICAgICAvLyDlr7l1cmznmoTmlbDmja7ov5vooYzor7vlj5YKICAgICAgICAgICAgICBjdXJTaXRlLnBhZ2VyLnN0YXJ0RmlsdGVyICYmIGN1clNpdGUucGFnZXIuc3RhcnRGaWx0ZXIoKTsKICAgICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgICAgICAgICB0aW1lb3V0OiA1MDAwLAogICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB2YXIgbmV3Qm9keSA9IFNob3dQYWdlci5jcmVhdGVEb2N1bWVudEJ5U3RyaW5nKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgLy8geHguZXZhbHVhdGUoeHBhdGgsIHh4KQogICAgICAgICAgICAgICAgICAgIGxldCBwYWdlRWxlbXMgPSBnZXRBbGxFbGVtZW50cyhjdXJTaXRlLnBhZ2VyLnBhZ2VFbGVtZW50LCBuZXdCb2R5LCBuZXdCb2R5KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzY3JpcHRFbGVtcyA9IGdldEFsbEVsZW1lbnRzKCcvL3NjcmlwdCcsIG5ld0JvZHksIG5ld0JvZHkpOwoKICAgICAgICAgICAgICAgICAgICBsZXQgdG9FbGVtZW50ID0gZ2V0QWxsRWxlbWVudHMoY3VyU2l0ZS5wYWdlci5IVF9pbnNlcnRbMF0pWzBdOwogICAgICAgICAgICAgICAgICAgIGlmIChwYWdlRWxlbXMubGVuZ3RoID49IDApIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhuacgOWQjuS4gOS4que/u+mhteaMiemSrgogICAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRFcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNzcC1zcC1nb25leHQiKTsKICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0RXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdEUgPSBuZXh0RXNbbmV4dEVzLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICBsYXN0RS5jbGFzc0xpc3QucmVwbGFjZSgiYWNfc3BfbmV4dF9ncmF5IiwgImFjX3NwX25leHQiKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIC8vIOaPkuWFpee/u+mhteaMiemSruWFg+e0oAogICAgICAgICAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlTnVtKys7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgYWRkVG8gPSAiYmVmb3JlZW5kIjsKICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLnBhZ2VyLkhUX2luc2VydFsxXSA9PT0gMSkgYWRkVG8gPSAiYmVmb3JlYmVnaW4iOwogICAgICAgICAgICAgICAgICAgICAgdG9FbGVtZW50Lmluc2VydEFkamFjZW50SFRNTChhZGRUbywgYDxkaXYgY2xhc3M9J3NwLXNlcGFyYXRvciBBQycgaWQ9J3NwLXNlcGFyYXRvci1BQ1gnPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSdzcC1zcC1uZXh0bGluaycgdGFyZ2V0PSdfYmxhbmsnPjxiPuesrCA8c3BhbiBzdHlsZT0nY29sb3I6IzU5NTk1OSFpbXBvcnRhbnQ7Jz5BQ1g8L3NwYW4+IOmhtTwvYj48L2E+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNwLXNwLWdvdG9wIiBjbGFzcz0nYWNfc3BfdG9wJyB0aXRsZT0n5Y675Yiw6aG26YOoJz48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNwLXNwLWdvcHJlIiBjbGFzcz0nJHtjdXJTaXRlLnBhZ2VOdW0gPD0gMiA/ICJhY19zcF9wcmVfZ3JheSIgOiAiYWNfc3BfcHJlIn0nIHRpdGxlPSfkuIrmu5rkuIDpobUnID48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNwLXNwLWdvbmV4dCIgY2xhc3M9J2FjX3NwX25leHRfZ3JheScgdGl0bGU9J+S4i+a7muS4gOmhtSc+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJzcC1zcC1nb2JvdHRvbSIgY2xhc3M9J2FjX3NwX2JvdHRvbScgdGl0bGU9J+WOu+WIsOW6lemDqCcgPjwvc3Bhbj48L2Rpdj5gCiAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvQUNYL2dtLCBjdXJTaXRlLnBhZ2VOdW0pKTsKICAgICAgICAgICAgICAgICAgICAgIC8vIOaPkuWFpeaWsOmhtemdouWFg+e0oAogICAgICAgICAgICAgICAgICAgICAgcGFnZUVsZW1zLmZvckVhY2goZnVuY3Rpb24gKG9uZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0b0VsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KGFkZFRvLCBvbmUpOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuc3Atc2VwYXJhdG9yLkFDOm5vdChbYmluZF0pIikuZm9yRWFjaChmdW5jdGlvbiAocGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlci5zZXRBdHRyaWJ1dGUoImJpbmQiLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgcGVyLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgYWNfc3BmdW5jKTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIC8vIOaPkuWFpXNjcmlwdHMgJiBzdHlsZSAtIOS/neivgWpz5Yqg6L29CiAgICAgICAgICAgICAgICAgICAgICBpZihjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2NyaXB0VGV4dCA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHRFbGVtcy5mb3JFYWNoKChvbmUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHRUZXh0ICs9IG9uZS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NyaXB0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwogICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHROb2RlLmlubmVySFRNTCA9IHNjcmlwdFRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvRWxlbWVudC5hcHBlbmRDaGlsZChzY3JpcHROb2RlKQogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIC8vIOabv+aNouW+heabv+aNouWFg+e0oAogICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9yaUUgPSBnZXRBbGxFbGVtZW50cyhjdXJTaXRlLnBhZ2VyLnJlcGxhY2VFKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlcEUgPSBnZXRBbGxFbGVtZW50cyhjdXJTaXRlLnBhZ2VyLnJlcGxhY2VFLCBuZXdCb2R5LCBuZXdCb2R5KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yaUUubGVuZ3RoID09PSByZXBFLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9yaUUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAi57+76aG1Leabv+aNoue/u+mhteWFg+e0oCAncmVwbGFjZUUnIOWkseaViCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JpRS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpRVtpXS5vdXRlckhUTUwgPSByZXBFW2ldLm91dGVySFRNTDsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgY3VyU2l0ZS5wYWdlTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIEFkZEN1c3RvbVN0eWxlKCkgewogICAgICAgICAgaWYgKEFDQ29uZmlnLmlzVXNlclN0eWxlRW5hYmxlKSB7CiAgICAgICAgICAgIEFDX2FkZFN0eWxlKEFDQ29uZmlnLlVzZXJTdHlsZVRleHQsICJBQy11c2VyU3R5bGUiKTsvLyDnlKjmiLfoh6rlrprkuYnnmoTmoLflvI/ooagKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOS4uuS6huaWueS+v+iwg+aVtOagt+W8j+WSjOafpeeci+aViOaenO+8jOaaguaXtuS4jeenu+mZpAogICAgICAgICAgICAvLyBzYWZlUmVtb3ZlKCJzdHlsZVtjbGFzcz0nQUMtdXNlclN0eWxlJ10iKQogICAgICAgICAgfQogICAgICAgICAgQUNfYWRkU3R5bGUoCiAgICAgICAgICAgICIub3ByLXJlY29tbWVuZHMtbWVyZ2UtaW1ndGV4dHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50O30iICsgLy8g56e76Zmk55m+5bqm5rWP6KeI5Zmo5o6o5bm/CiAgICAgICAgICAgICIucmVzX3RvcF9iYW5uZXJ7ZGlzcGxheTpub25lIWltcG9ydGFudDt9IiArIC8vIOenu+mZpOWPr+iDveeahOeZvuW6pkhUVFBT5Yqr5oyB5pi+56S66Zeu6aKYCiAgICAgICAgICAgICIuaGVhZEJsb2NrLCBib2R5PmRpdi5yZXN1bHQtb3B7ZGlzcGxheTpub25lO30iIC8vIOenu+mZpOeZvuW6pueahOaQnOe0oue7k+aenOmhtumDqOS4gOadoeeahOW7uuiuruaWh+WtlyAmIOenu+mZpOWPr+iDveWHuueOsOeahOeZveWxj+eOsOixoQogICAgICAgICAgICAsICJBQy1zcGVjaWFsLUJBSURVIgogICAgICAgICAgKTsKICAgICAgICAgIC8qIuiHquWumuS5iSLmjInpkq7mlYjmnpwqLwogICAgICAgICAgQUNfYWRkU3R5bGUoIi5hY2hpZGV7ZGlzcGxheTpub25lO30gLm5ld0Z1bmNIaWdoTGlnaHR7Y29sb3I6cmVkO2ZvbnQtd2VpZ2h0OiAxMDA7YmFja2dyb3VuZC1jb2xvcjogeWVsbG93O2ZvbnQtd2VpZ2h0OiA2MDA7fSNzcC1hYy1jb250YWluZXIgbGFiZWx7ZGlzcGxheTppbmxpbmU7fSN1e3dpZHRoOjMxOXB4fSN1ICNteXVzZXJ7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luOiAxM3B4IC0xMHB4IDAgMjRweDt9LnNpdGUtd3JhcHBlciAjbXl1c2VyLC5zb2dvdS1zZXQtYm94ICNteXVzZXIsI2didyAjbXl1c2Vye21hcmdpbi1yaWdodDoxNXB4O30gI215dXNlciwjbXl1c2VyIC5teXVzZXJjb25maWd7cGFkZGluZzowO21hcmdpbjowfSNteXVzZXJ7ZGlzcGxheTppbmxpbmUtYmxvY2s7fSNteXVzZXIgLm15dXNlcmNvbmZpZ3tkaXNwbGF5OmlubGluZS1ibG9jaztsaW5lLWhlaWdodDoxLjU7YmFja2dyb3VuZDojNGU2ZWYyO2NvbG9yOiNmZmY7Zm9udC13ZWlnaHQ6NzAwO3RleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6NnB4O2JvcmRlcjoycHggc29saWQgI0U1RTVFNTt9I215dXNlciAubXl1c2VyY29uZmlne2JveC1zaGFkb3c6MCAwIDEwcHggM3B4IHJnYmEoMCwwLDAsLjEpO2JvcmRlci1yYWRpdXM6IDZweH0jbXl1c2VyIC5teXVzZXJjb25maWc6aG92ZXJ7YmFja2dyb3VuZDojNDY2MmQ5ICFpbXBvcnRhbnQ7Y29sb3I6I2ZmZjtjdXJzb3I6cG9pbnRlcjtib3JkZXI6MnB4IHNvbGlkICM3M0E2Rjg7fWJvZHlbZG9nZV0gI2hlYWRlcnttYXgtd2lkdGg6IHVuc2V0O31ib2R5W2RvZ2VdICNteXVzZXJ7cG9zaXRpb246IGFic29sdXRlO3JpZ2h0OiA0MHB4O30iLAogICAgICAgICAgICAiQUMtTUVOVV9CdG4iKTsKICAgICAgICAgIC8q6Ieq5a6a5LmJ6aG16Z2i5YaF5a655pWI5p6cKi8KICAgICAgICAgIEFDX2FkZFN0eWxlKCdib2R5W2JhaWR1XSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9ImJhaWR1Il0pPmxhYmVsOm5vdChbY2xhc3M9ImxhYmVsX2hpZGUiXSksXG4nICsKICAgICAgICAgICAgJyAgYm9keVtnb29nbGVdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iZ29vZ2xlIl0pPmxhYmVsOm5vdChbY2xhc3M9ImxhYmVsX2hpZGUiXSksXG4nICsKICAgICAgICAgICAgJyAgYm9keVtiaW5nXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9ImJpbmciXSk+bGFiZWw6bm90KFtjbGFzcz0ibGFiZWxfaGlkZSJdKSxcbicgKwogICAgICAgICAgICAnICBib2R5W3NvZ291XSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9InNvZ291Il0pPmxhYmVsOm5vdChbY2xhc3M9ImxhYmVsX2hpZGUiXSksXG4nICsKICAgICAgICAgICAgJyAgYm9keVtkdWNrXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWw6bm90KFtjbGFzcyo9ImR1Y2siXSk+bGFiZWw6bm90KFtjbGFzcz0ibGFiZWxfaGlkZSJdKSxcbicgKwogICAgICAgICAgICAnICBib2R5W2RvZ2VdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iZG9nZSJdKT5sYWJlbDpub3QoW2NsYXNzPSJsYWJlbF9oaWRlIl0pLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbYmFpZHVdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iYmFpZHUiXSk+YnIsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtnb29nbGVdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0iZ29vZ2xlIl0pPmJyLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbYmluZ10gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJiaW5nIl0pPmJyLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbZHVja10gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJkdWNrIl0pPmJyLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbZG9nZV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsOm5vdChbY2xhc3MqPSJkb2dlIl0pPmJyLFxuJyArCiAgICAgICAgICAgICcgIGJvZHlbc29nb3VdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbDpub3QoW2NsYXNzKj0ic29nb3UiXSk+YnIsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtiYWlkdV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsW2NsYXNzKj0iYmFpZHUiXT4ubGFiZWxfaGlkZSxcbicgKwogICAgICAgICAgICAnICBib2R5W2dvb2dsZV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsW2NsYXNzKj0iZ29vZ2xlIl0+LmxhYmVsX2hpZGUsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtiaW5nXSAjc3AtYWMtY29udGFpbmVyIC5jb250YWluZXItbGFiZWxbY2xhc3MqPSJiaW5nIl0+LmxhYmVsX2hpZGUsXG4nICsKICAgICAgICAgICAgJyAgYm9keVtzb2dvdV0gI3NwLWFjLWNvbnRhaW5lciAuY29udGFpbmVyLWxhYmVsW2NsYXNzKj0ic29nb3UiXT4ubGFiZWxfaGlkZSxcbicgKwogICAgICAgICAgICAnICBib2R5W2R1Y2tdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbFtjbGFzcyo9ImR1Y2siXT4ubGFiZWxfaGlkZSxcbicgKwogICAgICAgICAgICAnICBib2R5W2RvZ2VdICNzcC1hYy1jb250YWluZXIgLmNvbnRhaW5lci1sYWJlbFtjbGFzcyo9ImRvZ2UiXT4ubGFiZWxfaGlkZVxuJyArIC8vIOazqOaEj+WwvumDqOmAl+WPtwogICAgICAgICAgICAneycgKwogICAgICAgICAgICAnZGlzcGxheTpub25lO1xuJyArCiAgICAgICAgICAgICd9I3NwLWFjLWNvbnRhaW5lciAubGFiZWxfaGlkZXtjdXJzb3I6cG9pbnRlcjttYXJnaW4tbGVmdDo4JTtjb2xvcjpibHVlfSNzcC1hYy1jb250YWluZXIgLmxpbmtocmVmLCNzcC1hYy1jb250YWluZXIgLmxhYmVsX2hpZGU6aG92ZXJ7Y29sb3I6cmVkfSNzcC1hYy1jb250YWluZXIgLmxpbmtocmVmOmhvdmVye2ZvbnQtd2VpZ2h0OmJvbGR9I3NwLWFjLWNvbnRhaW5lciBsYWJlbC5tZW51LWJveC1zbWFsbHttYXgtd2lkdGg6MTZweDttYXgtaGVpZ2h0OjE2cHg7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTppbmxpbmUtYmxvY2t9LkFDLUNvdW50ZXJUe2JhY2tncm91bmQ6I0ZEOTk5OX1ib2R5ICAjc3AtYWMtY29udGFpbmVye3Bvc2l0aW9uOmZpeGVkO3RvcDozLjl2dztyaWdodDo4Ljh2d30jc3AtYWMtY29udGFpbmVye3otaW5kZXg6OTk5OTk5O3RleHQtYWxpZ246bGVmdDtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlfSNzcC1hYy1jb250YWluZXIgKntmb250LXNpemU6MTNweDtjb2xvcjpibGFjaztmbG9hdDpub25lfSNzcC1hYy1tYWluLWhlYWR7cG9zaXRpb246cmVsYXRpdmU7dG9wOjA7bGVmdDowfSNzcC1hYy1zcGFuLWluZm97cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MXB4O3RvcDowO2ZvbnQtc2l6ZToxMHB4O2xpbmUtaGVpZ2h0OjEwcHg7YmFja2dyb3VuZDpub25lO2ZvbnQtc3R5bGU6aXRhbGljO2NvbG9yOiM1YTVhNWE7dGV4dC1zaGFkb3c6d2hpdGUgMHB4IDFweCAxcHh9I3NwLWFjLWNvbnRhaW5lciBpbnB1dHt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7ZGlzcGxheTppbmxpbmUtYmxvY2s7b3V0bGluZTpub25lO2hlaWdodDphdXRvO3BhZGRpbmc6MHB4O21hcmdpbi1ib3R0b206MHB4O21hcmdpbi10b3A6MHB4fSNzcC1hYy1jb250YWluZXIgaW5wdXRbdHlwZT0ibnVtYmVyIl17d2lkdGg6NTBweDt0ZXh0LWFsaWduOmxlZnR9I3NwLWFjLWNvbnRhaW5lciBpbnB1dFt0eXBlPSJjaGVja2JveCJde2JvcmRlcjoxcHggc29saWQgI0I0QjRCNDtwYWRkaW5nOjFweDttYXJnaW46M3B4O3dpZHRoOjEzcHg7aGVpZ2h0OjEzcHg7YmFja2dyb3VuZDpub25lO2N1cnNvcjpwb2ludGVyO3Zpc2liaWxpdHk6dmlzaWJsZTtwb3NpdGlvbjpzdGF0aWN9I3NwLWFjLWNvbnRhaW5lciBpbnB1dFt0eXBlPSJidXR0b24iXXtib3JkZXI6MXB4IHNvbGlkICNjY2M7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZDpub25lO3dpZHRoOmF1dG87aGVpZ2h0OmF1dG99I3NwLWFjLWNvbnRhaW5lciBsaXtsaXN0LXN0eWxlOm5vbmU7bWFyZ2luOjNweCAwO2JvcmRlcjpub25lO2Zsb2F0Om5vbmU7Y3Vyc29yOmRlZmF1bHQ7fSNzcC1hYy1jb250YWluZXIgZmllbGRzZXR7Ym9yZGVyOjJweCBncm9vdmUgI2NjYzstbW96LWJvcmRlci1yYWRpdXM6M3B4O2JvcmRlci1yYWRpdXM6M3B4O3BhZGRpbmc6NHB4IDlweCA2cHggOXB4O21hcmdpbjoycHg7ZGlzcGxheTpibG9jazt3aWR0aDphdXRvO2hlaWdodDphdXRvfSNzcC1hYy1jb250YWluZXIgbGVnZW5ke2xpbmUtaGVpZ2h0OjIwcHg7bWFyZ2luLWJvdHRvbTowcHh9I3NwLWFjLWNvbnRhaW5lciBmaWVsZHNldCA+IHVse3BhZGRpbmc6MDttYXJnaW46MH0jc3AtYWMtY29udGFpbmVyIHVsI3NwLWFjLWFfdXNlaWZyYW1lLWV4dGVuZHtwYWRkaW5nLWxlZnQ6NDBweH0jc3AtYWMtcmVjdHtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6MDtsZWZ0OjA7ZmxvYXQ6cmlnaHQ7aGVpZ2h0OjEwcHg7d2lkdGg6MTBweDtwYWRkaW5nOjA7bWFyZ2luOjA7LW1vei1ib3JkZXItcmFkaXVzOjNweDtib3JkZXItcmFkaXVzOjNweDtib3JkZXI6MXB4IHNvbGlkIHdoaXRlOy13ZWJraXQtYm94LXNoYWRvdzppbnNldCAwIDVweCAwIHJnYmEoMjU1LDI1NSwyNTUsMC4zKSwwIDAgM3B4IHJnYmEoMCwwLDAsMC44KTstbW96LWJveC1zaGFkb3c6aW5zZXQgMCA1cHggMCByZ2JhKDI1NSwyNTUsMjU1LDAuMyksMCAwIDNweCByZ2JhKDAsMCwwLDAuOCk7Ym94LXNoYWRvdzppbnNldCAwIDVweCAwIHJnYmEoMjU1LDI1NSwyNTUsMC4zKSwwIDAgM3B4IHJnYmEoMCwwLDAsMC44KTtvcGFjaXR5OjAuOH0jc3AtYWMtZG90LCNzcC1hYy1jdXItbW9kZXtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4Ojk5OTk7d2lkdGg6NXB4O2hlaWdodDo1cHg7cGFkZGluZzowOy1tb3otYm9yZGVyLXJhZGl1czozcHg7Ym9yZGVyLXJhZGl1czozcHg7Ym9yZGVyOjFweCBzb2xpZCB3aGl0ZTtvcGFjaXR5OjE7LXdlYmtpdC1ib3gtc2hhZG93Omluc2V0IDAgLTJweCAxcHggcmdiYSgwLDAsMCwwLjMpLGluc2V0IDAgMnB4IDFweCByZ2JhKDI1NSwyNTUsMjU1LDAuMyksMHB4IDFweCAycHggcmdiYSgwLDAsMCwwLjkpOy1tb3otYm94LXNoYWRvdzppbnNldCAwIC0ycHggMXB4IHJnYmEoMCwwLDAsMC4zKSxpbnNldCAwIDJweCAxcHggcmdiYSgyNTUsMjU1LDI1NSwwLjMpLDBweCAxcHggMnB4IHJnYmEoMCwwLDAsMC45KTtib3gtc2hhZG93Omluc2V0IDAgLTJweCAxcHggcmdiYSgwLDAsMCwwLjMpLGluc2V0IDAgMnB4IDFweCByZ2JhKDI1NSwyNTUsMjU1LDAuMyksMHB4IDFweCAycHggcmdiYSgwLDAsMCwwLjkpfSNzcC1hYy1kb3R7cmlnaHQ6LTNweDt0b3A6LTNweH0jc3AtYWMtY3VyLW1vZGV7bGVmdDotM3B4O3RvcDotM3B4O3dpZHRoOjZweDtoZWlnaHQ6NnB4fSNzcC1hYy1jb250ZW50e3BhZGRpbmc6MDttYXJnaW46MHB4Oy1tb3otYm9yZGVyLXJhZGl1czozcHg7Ym9yZGVyLXJhZGl1czozcHg7Ym9yZGVyOjFweCBzb2xpZCAjQTBBMEEwOy13ZWJraXQtYm94LXNoYWRvdzotMnB4IDJweCA1cHggcmdiYSgwLDAsMCwwLjMpOy1tb3otYm94LXNoYWRvdzotMnB4IDJweCA1cHggcmdiYSgwLDAsMCwwLjMpO2JveC1zaGFkb3c6LTJweCAycHggNXB4IHJnYmEoMCwwLDAsMC4zKX0jc3AtYWMtbWFpbntwYWRkaW5nOjVweDtib3JkZXI6MXB4IHNvbGlkIHdoaXRlOy1tb3otYm9yZGVyLXJhZGl1czozcHg7Ym9yZGVyLXJhZGl1czozcHg7YmFja2dyb3VuZC1jb2xvcjojRjJGMkY3O2JhY2tncm91bmQ6LW1vei1saW5lYXItZ3JhZGllbnQodG9wLCNGQ0ZDRkMsI0YyRjJGNyAxMDAlKTtiYWNrZ3JvdW5kOi13ZWJraXQtZ3JhZGllbnQobGluZWFyLDAgMCwwIDEwMCUsZnJvbSgjRkNGQ0ZDKSx0bygjRjJGMkY3KSl9I3NwLWFjLWZvb3R7cG9zaXRpb246cmVsYXRpdmU7bGVmdDowO3JpZ2h0OjA7bWluLWhlaWdodDoyMHB4fSNzcC1hYy1zYXZlYnV0dG9ue3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjJweH0jc3AtYWMtY29udGFpbmVyIC5lbmRidXR0b257bWFyZ2luLXRvcDo4cHh9I3NwLWFjLWNvbnRhaW5lciAuc3AtYWMtc3BhbmJ1dHRvbntib3JkZXI6MXB4IHNvbGlkICNjY2M7LW1vei1ib3JkZXItcmFkaXVzOjNweDtib3JkZXItcmFkaXVzOjNweDtwYWRkaW5nOjJweCAzcHg7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZC1jb2xvcjojRjlGOUY5Oy13ZWJraXQtYm94LXNoYWRvdzppbnNldCAwIDEwcHggNXB4IHdoaXRlOy1tb3otYm94LXNoYWRvdzppbnNldCAwIDEwcHggNXB4IHdoaXRlO2JveC1zaGFkb3c6aW5zZXQgMCAxMHB4IDVweCB3aGl0ZX0jc3AtYWMtY29udGFpbmVyIC5zcC1hYy1zcGFuYnV0dG9uOmhvdmVye2JhY2tncm91bmQtY29sb3I6I0RERH1sYWJlbFtjbGFzcz0ibmV3RnVuYyJde2NvbG9yOmJsdWV9JywKICAgICAgICAgICAgIkFDLU1FTlVfUGFnZSIpOwogICAgICAgIH0KCiAgICAgICAgQWRkQ3VzdG9tU3R5bGUoKTsKICAgICAgICB0cnkgewogICAgICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCgnQUMt6YeN5a6a5ZCR6ISa5pys6K6+572uJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIH0KCiAgICAgICAgLyoq6L+Z5Lic6KW/5Lul5ZCO5Lya55So5LiKKiovCiAgICAgICAgZnVuY3Rpb24gZ2V0U2VhcmNoVmFsdWUoKSB7CiAgICAgICAgICBsZXQga3ZsID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKS5zcGxpdCgiJiIpOwogICAgICAgICAgbGV0IHNlYXJjaFYgPSAiIjsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga3ZsLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxldCB2YWx1ZSA9IGt2bFtpXS5yZXBsYWNlKC9eKHdkfHF1ZXJ5fHEpPS8sICIiKTsKICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBrdmxbaV0pIHsKICAgICAgICAgICAgICBzZWFyY2hWID0gdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vICAnKycg55m+5bqm44CB5pCc54uX44CB5b+F5bqU44CB6LC35q2M44CB5aW95pCcCiAgICAgICAgICBzZWFyY2hWID0gc2VhcmNoVi5yZXBsYWNlKCIrIiwgIiAiKTsKICAgICAgICAgIHJldHVybiBzZWFyY2hWOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmFwaWREZWFsKCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKGluc2VydExvY2tlZCA9PT0gZmFsc2UgJiYgY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5PVEhFUlMpIHsKICAgICAgICAgICAgICBpbnNlcnRMb2NrZWQgPSB0cnVlOwogICAgICAgICAgICAgIEFDSGFuZGxlKCk7IC8vIOWkhOeQhuS4u+mHjeWumuWQkQogICAgICAgICAgICAgIGlmIChBQ0NvbmZpZy5pc0Zhdmljb25FbmFibGUgJiYgdHlwZW9mKGN1clNpdGUuRmF2aWNvblR5cGUpICE9PSAndW5kZWZpbmVkJykgeyAvLyDmmL7npLpmYXZpY29u5Zu+5qCHCiAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZSgiaDM6OmJlZm9yZSwgaDI6OmJlZm9yZSB7Y29udGVudDogJyAnO2Rpc3BsYXk6aW5saW5lLWJsb2NrfSIsICJBQy1TdHlsZS1GYXZpY29uIiwgImhlYWQiKTsKICAgICAgICAgICAgICAgIGFkZEZhdmljb24oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLkZhdmljb25UeXBlKSk7IC8vIOa3u+WKoEZhdmljb27mmL7npLoKICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHNhZmVSZW1vdmUoImltZy5BQy1mYXZpY29uVCIpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLkZhdmljb25UeXBlKS5mb3JFYWNoKChvbmUpID0+IHsKICAgICAgICAgICAgICAgICAgb25lLnJlbW92ZUF0dHJpYnV0ZSgiYWNfZmF2aWNvbnN0YXR1cyIpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8g5Yqo5oCB5LiL5YiS57q/CiAgICAgICAgICAgICAgaWYgKCFBQ0NvbmZpZy5pc0FMaW5lRW5hYmxlKSB7CiAgICAgICAgICAgICAgICBBQ19hZGRTdHlsZSgiYSxhIGVte3RleHQtZGVjb3JhdGlvbjpub25lICFpbXBvcnRhbnR9IiwgIkFDLU5vTGluZSIsICJib2R5Iik7Ly8g56e76Zmk6L+Z5Lqb5Liq5LiL5YiS57q/CiAgICAgICAgICAgICAgfSBlbHNlewogICAgICAgICAgICAgICAgc2FmZVJlbW92ZSgic3R5bGVbY2xhc3M9J0FDLU5vTGluZSddIikKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzQWRzRW5hYmxlKSB7IC8vIOenu+mZpOWkmuS9meeahOW5v+WRiuWGheWuuQogICAgICAgICAgICAgICAgcmVtb3ZlQURfYmFpZHVfc29nb3UoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzQ291bnRlckVuYWJsZSkgeyAvLyDmmL7npLrorqHmlbDlmagKICAgICAgICAgICAgICAgIGFkZENvdW50ZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXJTaXRlLkNvdW50ZXJUeXBlKSk7CiAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuQUMtQ291bnRlclQiKS5mb3JFYWNoKG9uZSA9PiB7CiAgICAgICAgICAgICAgICAgIG9uZS5wYXJlbnRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnU29ydEluZGV4Jyk7CiAgICAgICAgICAgICAgICAgIG9uZS5yZW1vdmUoKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmRvRGlzYWJsZVN1ZykgeyAvLyDkuI3lkK/nlKjnp7vliqjpooTmtYtb6buY6K6kXQogICAgICAgICAgICAgICAgYWNTZXRDb29raWUoIk9SSUdJTiIsIDIsICJ3d3cuYmFpZHUuY29tIik7CiAgICAgICAgICAgICAgICBhY1NldENvb2tpZSgiSVNTVyIsIDEpOwogICAgICAgICAgICAgICAgYWNTZXRDb29raWUoIklTU1ciLCAxLCAid3d3LmJhaWR1LmNvbSIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBpZihDT05TVC51c2VJdGVtLkh1WWFuTW9kZSA9PT0gZmFsc2UgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcigic3R5bGVbY2xhc3MqPSdkYXJrcmVhZGVyJ10iKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgLy8gICBDT05TVC51c2VJdGVtLkh1WWFuTW9kZSA9IHRydWU7CiAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgIGlmIChBQ0NvbmZpZy5pc0Jsb2NrRW5hYmxlICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuU09HT1UpIHsgLy8g5ZCv55So5bGP6JS95Yqf6IO9LSDlr7nmr4/kuIDkuKrmlrDlop7nmoTlnLDlnYDpg73opoHlpITnkIYKICAgICAgICAgICAgICAgIFNpdGVCbG9jay5pbml0U3R5bGUoKTsKICAgICAgICAgICAgICAgIFNpdGVCbG9jay5pbml0KCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmKGRvY3VtZW50LmJvZHkpewogICAgICAgICAgICAgICAgaWYgKCFBQ0NvbmZpZy5pc1JpZ2h0RGlzcGxheUVuYWJsZSkgeyAvLyDlj7PkvqfmoI/mmL7npLoKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCJzaG93UmlnaHQiKQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCJzaG93UmlnaHQiKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5HT09HTEUpIHsKICAgICAgICAgICAgICAgIGxldCBub2RlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNyc28iKQogICAgICAgICAgICAgICAgY29uc3QgaXNTcGVjaWFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3Jzbz4uZyIpICE9PSBudWxsIC8vIOWtmOWcqOS4gOS4quiKgueCueWNs+S4unNwZWNpYWwKICAgICAgICAgICAgICAgIGlmKGlzU3BlY2lhbCAhPT0gQ09OU1QuaXNHb29nbGVTcGVjaWFsICYmIENPTlNULmlzR29vZ2xlU3BlY2lhbCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICBDT05TVC5pc0dvb2dsZVNwZWNpYWwgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgc2FmZVJlbW92ZSgic3R5bGVbY2xhc3M9J0FDLVR3b1BhZ2VFeFN0eWxlJ10sc3R5bGVbY2xhc3M9J0FDLVRocmVlUGFnZUV4U3R5bGUnXSxzdHlsZVtjbGFzcz0nQUMtRm91clBhZ2VFeFN0eWxlJ10iKTsKICAgICAgICAgICAgICAgICAgICBhY0Nzc0xvYWRGbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIuaW5pdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYobm9kZUxpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICBub2RlTGlzdC5mb3JFYWNoKChub2RlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKENPTlNULmlzR29vZ2xlU3BlY2lhbCkgewogICAgICAgICAgICAgICAgICAgICAgbm9kZS5zdHlsZS5kaXNwbGF5ICE9PSAnZ3JpZCcgPyBub2RlLnN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc6ICcnCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSAhPT0gJ3Vuc2V0JyA/IG5vZGUuc3R5bGUuZGlzcGxheSA9ICd1bnNldCc6ICcnCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIOeJueauiuWFg+e0oOS4gOihjOWkhOeQhgogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI3Jzbz5kaXY6bm90KC5nKT5kaXZbanNtb2RlbF0iKS5mb3JFYWNoKG9uZSA9PiB7CiAgICAgICAgICAgICAgICAgIG9uZS5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXkgPSAidW5zZXQiCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGluc2VydExvY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgIH0sIDIwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhY1NldENvb2tpZShjbmFtZSwgY3ZhbHVlLCBkb21haW4sIGV4ZGF5cykgewogICAgICAgICAgdHJ5ewogICAgICAgICAgICBleGRheXMgPSBleGRheXMgfHwgMzA7CiAgICAgICAgICAgIGxldCBkID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgZG9tYWluID0gKGRvbWFpbiA/ICJkb21haW49IiArIGRvbWFpbiA6ICIiKSArICI7IjsKICAgICAgICAgICAgZC5zZXRUaW1lKGQuZ2V0VGltZSgpICsgKGV4ZGF5cyAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTsKICAgICAgICAgICAgbGV0IGV4cGlyZXMgPSAiZXhwaXJlcz0iICsgZC50b1VUQ1N0cmluZygpOwogICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjbmFtZSArICI9IiArIGN2YWx1ZSArICI7ICIgKyBkb21haW4gKyBleHBpcmVzICsgIjtwYXRoPS8iOwogICAgICAgICAgfWNhdGNoKGUpe30KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZ2V0Tm9kZUhvc3Qoc2l0ZXRwTm9kZSkgewogICAgICAgICAgaWYoc2l0ZXRwTm9kZSBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50KXsKICAgICAgICAgICAgcmV0dXJuIHtjdXJIb3N0OiBzaXRldHBOb2RlLmhvc3QsIGN1clVybDogc2l0ZXRwTm9kZS5ocmVmfTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVKSB7CiAgICAgICAgICAgIHZhciBocmVmID0gbnVsbDsKICAgICAgICAgICAgaWYgKHNpdGV0cE5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkgewogICAgICAgICAgICAgIGhyZWYgPSBzaXRldHBOb2RlLmdldEF0dHJpYnV0ZSgiaHJlZiIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGhyZWYgIT0gbnVsbCAmJiBocmVmLmluY2x1ZGVzKCJiYWlkdS5jb20vbGluayIpKSB7CiAgICAgICAgICAgICAgLy8g5bey57uP6Kej5p6Q5Ye65p2l5LqGCiAgICAgICAgICAgICAgcmV0dXJuICB7Y3VySG9zdDogZ2V0VGV4dEhvc3QoaHJlZiksIGN1clVybDogaHJlZn07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB7Y3VySG9zdDogZ2V0VGV4dEhvc3Qoc2l0ZXRwTm9kZS5pbm5lclRleHQgfHwgc2l0ZXRwTm9kZS50ZXh0Q29udGVudCksIGN1clVybDogbnVsbH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBBQ0hhbmRsZSgpIHsKICAgICAgICAgIC8vIOWkhOeQhuS4u+mHjeWumuWQkQogICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuT1RIRVJTIHx8IGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuU09HT1UpIHJldHVybjsKICAgICAgICAgIGlmIChBQ0NvbmZpZy5pc1JlZGlyZWN0RW5hYmxlKSB7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlN0eXBlX05vcm1hbCAhPT0gbnVsbCAmJiBjdXJTaXRlLlN0eXBlX05vcm1hbCAhPT0gIiIpIHsKICAgICAgICAgICAgICAvLyDnmb7luqbmkJzni5fljrvph43lrprlkJEt5pmu6YCa5qih5byP44CQ5rOo5oSP5LiN6IO95Li6ZG9jdW1lbnQucXVlcnkuLuOAkQogICAgICAgICAgICAgIHJlc2V0VVJMTm9ybWFsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY3VyU2l0ZS5TdHlwZV9Ob3JtYWwpKTsKICAgICAgICAgICAgICBpZiAoY2hlY2tJU0JhaWR1TWFpbigpKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuc19mb3JtIC5pbmRleC1sb2dvLXNyY1tzcmMqPSdnaWYnXSwgLnNfZm9ybSAuaW5kZXgtbG9nby1zcmNuZXdbc3JjKj0nZ2lmJ10iKS5mb3JFYWNoKGZ1bmN0aW9uIChwZXIpIHsKICAgICAgICAgICAgICAgICAgcGVyLnNyYyA9ICJodHRwczovL3BpYy5ybWIuYmRzdGF0aWMuY29tL2M4NjI1NWU4MDI4Njk2MTM5ZDNlM2U0YmI0NGMwNDdiLnBuZyI7CiAgICAgICAgICAgICAgICAgIC8vIOelnuWlh+eahOeZvuW6pueZvuWutuWPtwogICAgICAgICAgICAgICAgICAvLyBodHRwczovL2ltZ3NhLmJhaWR1LmNvbS9mZXgvcGljL2l0ZW0vODcxODM2N2FkYWI0NGFlZGNjOTFhYjJiYmUxYzg3MDFhMDhiZmIyNi5qcGcKICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9iYWlkdS5udGFvdy5jb20vbmV3Y3NzL2JhaWR1LnBuZwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSkgcmVtb3ZlT25Nb3VzZURvd25GdW5jKCk7IC8vIOenu+mZpG9uTW91c2VEb3du5LqL5Lu277yM6LC35q2M5Y676YeN5a6a5ZCRCiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLk1CQUlEVSkgcmVtb3ZlTW9iaWxlQmFpZHVEaXJlY3RMaW5rKCk7IC8vIOWkhOeQhueZvuW6puaJi+acuueJiOacrOeahOmHjeWumuWQkeWcsOWdgAogICAgICAgICAgICByZW1vdmVSZWRpcmVjdExpbmtUYXJnZXQoKTsgLy8g5Y+q56e76Zmk55+l5LmO55qE6YeN5a6a5ZCR6Zeu6aKYICYg55m+5bqm5a2m5pyv6YeN5a6a5ZCR6Zeu6aKYCiAgICAgICAgICAgIHNhZmVSZW1vdmUoIi5yZXNfdG9wX2Jhbm5lciIpOyAvLyDnp7vpmaTnmb7luqblj6/og73mmL7npLrnmoTliqvmjIEKICAgICAgICAgIH0KCiAgICAgICAgICB0cnkgeyAvLyDmlL7lhaXlvILluLjmjZXojrfvvIzpmLLmraLnlLHkuo5odG1s5o+S5YWl6L+H5oWi5a+86Ie055qEanPnu4jmraIKICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtc3R5bGUiKS5jaGVja2VkKSB7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZSo9J3NwLWFjLWFfZm9yY2Vfc3R5bGVfJ10iKS5mb3JFYWNoKHBlciA9PiB7CiAgICAgICAgICAgICAgICBwZXIuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsICJkaXNhYmxlZCIpOwogICAgICAgICAgICAgICAgcGVyLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCJ0aXRsZSIsICLor7flvIDlkK/oh6rlrprkuYnmoLflvI8iKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W25hbWUqPSdzcC1hYy1hX2ZvcmNlX3N0eWxlXyddIikuZm9yRWFjaChwZXIgPT4gewogICAgICAgICAgICAgICAgcGVyLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKICAgICAgICAgICAgICAgIHBlci5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgidGl0bGUiLCAiQUMt6Ieq5a6a5LmJ5qC35byP5YaF5a65IikKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzcC1hYy1ibG9jayIpLmNoZWNrZWQpIHsKICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIjc3AtYWMtcmVtb3ZlQmxvY2ssICNzcC1hYy1ibG9ja0J0bkRpc3BsYXkiKS5mb3JFYWNoKHBlciA9PiB7CiAgICAgICAgICAgICAgICBwZXIuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsICJkaXNhYmxlZCIpOwogICAgICAgICAgICAgICAgcGVyLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCJ0aXRsZSIsICLor7flvIDlkK/oh6rlrprkuYnmoLflvI8iKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNzcC1hYy1yZW1vdmVCbG9jaywgI3NwLWFjLWJsb2NrQnRuRGlzcGxheSIpLmZvckVhY2gocGVyID0+IHsKICAgICAgICAgICAgICAgIHBlci5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CiAgICAgICAgICAgICAgICBwZXIucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgIkFDLeiHquS4u+aLpuaIquWKn+iDvSIpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEFDdG9nZ2xlU2V0dGluZ0Rpc3BsYXkoZSkgewogICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgIC8vIOaYvuekuu+8n+makOiXj+iuvue9rueVjOmdogogICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5pZnJhbWUtZmF0aGVyIGlmcmFtZSIpID09PSBudWxsKSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5pZnJhbWUtZmF0aGVyIikuaW5zZXJ0QWRqYWNlbnRIVE1MKCJiZWZvcmVlbmQiLCAiPGlmcmFtZSBzcmM9J2h0dHBzOi8vZ2hidG5zLmNvbS9naXRodWItYnRuLmh0bWw/dXNlcj1sYW5ncmVuMTM1MyZyZXBvPUdNX3NjcmlwdCZ0eXBlPXN0YXImY291bnQ9dHJ1ZScgZnJhbWVib3JkZXI9JzAnIHNjcm9sbGluZz0nMCcgc3R5bGU9J2hlaWdodDogMjBweDttYXgtd2lkdGg6IDEwOHB4O3BhZGRpbmctbGVmdDo1cHg7Ym94LXNpemluZzogYm9yZGVyLWJveDttYXJnaW4tYm90dG9tOiAtNXB4O2Rpc3BsYXk6dW5zZXQgIWltcG9ydGFudDsnPjwvaWZyYW1lPiIpOwogICAgICAgICAgfQogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaycpIHsKICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc3AtYWMtY29udGVudCIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgREJDb25maWcub2xkVmVyc2lvbiA9IEFDQ29uZmlnLm9sZFZlcnNpb24gPSBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uOyAvLyDlj6rpnIDopoHlhpnlh7rkuIDpg6jliIbnmoTlhbPplK7mlbDmja7ljbPlj68KICAgICAgICAgICAgICBBQ1NldFZhbHVlKCJDb25maWciLCBKU09OLnN0cmluZ2lmeShEQkNvbmZpZykpOwogICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5hYy1uZXd2ZXJzaW9uRGlzcGxheSIpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWNvbnRlbnQiKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgMTAwKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFNob3dTZXR0aW5nKCkgewogICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuT1RIRVJTKSByZXR1cm47CiAgICAgICAgICAvLyDlpoLmnpzkuI3lrZjlnKjnmoTor53vvIzpgqPkuYjoh6rlt7HliJvlu7rkuIDkuKotY29weSBmcm9tIHN1cGVyUHJlbG9hZAogICAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkgIT09IG51bGwgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWNvbnRhaW5lciIpID09PSBudWxsKSB7CiAgICAgICAgICAgIGxldCBDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgQ29udGFpbmVyLmlkID0gInNwLWFjLWNvbnRhaW5lciI7CiAgICAgICAgICAgIENvbnRhaW5lci5pbm5lckhUTUwgPQogICAgICAgICAgICAgIGA8ZGl2IGlkPSJzcC1hYy1jb250ZW50IiBzdHlsZT0iZGlzcGxheTogbm9uZTsiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L2h0bWwiPgogICAgICAgICAgICAgICAgPGRpdiBpZD0ic3AtYWMtbWFpbiI+CiAgICAgICAgICAgICAgICAgIDxmaWVsZHNldCBpZD0ic3AtYWMtYXV0b3BhZ2VyLWZpZWxkIiBzdHlsZT0iZGlzcGxheTpibG9jazsiPgogICAgICAgICAgICAgICAgICAgIDxsZWdlbmQgY2xhc3M9ImlmcmFtZS1mYXRoZXIiPgogICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJsaW5raHJlZiIgaHJlZj0iaHR0cHM6Ly93d3cubnRhb3cuY29tL2Fib3V0c2NyaXB0Lmh0bWwiIHRhcmdldD0iX2JsYW5rIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwucGFuZWxfdGl0bGUiPjwvYT4KICAgICAgICAgICAgICAgICAgICA8L2xlZ2VuZD4KICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9InNldHRpbmctbWFpbiIgdi1zaG93PSJvdGhlci5jdXJUYWIgPT09IDEiPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwucmVkaXJlY3RfdGl0bGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtcmVkaXJlY3QiIG5hbWU9InNwLWFjLWFfc2VwYXJhdG9yIiB0eXBlPSJjaGVja2JveCIgIHYtbW9kZWw9IkFDQ29uZmlnLmlzUmVkaXJlY3RFbmFibGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5yZWRpcmVjdF90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLWlzRW5MYW5nIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCIgdi1tb2RlbD0iQUNDb25maWcuaXNFbkxhbmciPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VFbl90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJzcC1hYy1zYXZlYnV0dG9uIiBAY2xpY2s9InNhdmVDb25maWciIGNsYXNzPSJzcC1hYy1zcGFuYnV0dG9uIGVuZGJ1dHRvbiIgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwub2tCdG5fdGV4dCIgc3R5bGU9InBvc2l0aW9uOiByZWxhdGl2ZTtmbG9hdDogcmlnaHQ7bWFyZ2luLXRvcDogLTZweDsiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLm9rQnRuX3RleHQiPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNwLWFjLXJlc2V0YnV0dG9uIiBAY2xpY2s9ImNoYW5nZVJlc2V0VGV4dCIgQGRibGNsaWNrPSJyZXNldENvbmZpZyIgY2xhc3M9InNwLWFjLXNwYW5idXR0b24gZW5kYnV0dG9uIiA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5yZXNldEJ0bl90ZXh0IiBzdHlsZT0icG9zaXRpb246IHJlbGF0aXZlO2Zsb2F0OiByaWdodDttYXJnaW4tdG9wOiAtNnB4OyIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwucmVzZXRCdG5fdGV4dCI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmFkc190aXRsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcC1hYy1hZHMiIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94IiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0Fkc0VuYWJsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmFkc190ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5hdXRvcGFnZV90aXRsZSIgY2xhc3M9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcC1hYy1pc0F1dG9wYWdlIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCIgdi1tb2RlbD0iQUNDb25maWcuaXNBdXRvcGFnZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmF1dG9wYWdlX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrZW5hYmxlX3RpdGxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLWJsb2NrIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCIgdi1tb2RlbD0iQUNDb25maWcuaXNCbG9ja0VuYWJsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrZW5hYmxlX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InNwLWFjLWJsb2NrZGl5YnV0dG9uIiBjbGFzcz0ic3AtYWMtc3BhbmJ1dHRvbiIgQGNsaWNrPSJvdGhlci5jdXJUYWIgPSAyIiA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5ibG9ja0RpeUJ0bl90aXRsZSIgc3R5bGU9Im1hcmdpbi1sZWZ0OiA1cHg7Y29sb3I6ICM4ODg4ODg7IiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5ibG9ja0RpeUJ0bl90ZXh0Ij48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5ibG9ja2VuYWJsZV90ZXh0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuYmxvY2tBdXRvUmVtb3ZlX3RpdGxlIiB2LW1vZGVsPSJBQ0NvbmZpZy5pc0Jsb2NrRGlzcGxheSIgaWQ9InNwLWFjLXJlbW92ZUJsb2NrIiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmJsb2NrQXV0b1JlbW92ZV90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5ibG9ja0J0blNob3dfdGl0bGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5ibG9ja0J0blNob3dfdGl0bGUiICB2LW1vZGVsPSJBQ0NvbmZpZy5pc0Jsb2NrQnRuTm90RGlzcGxheSIgaWQ9InNwLWFjLWJsb2NrQnRuRGlzcGxheSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5ibG9ja0J0blNob3dfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV90ZXh0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLXN0eWxlIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCIgdi1tb2RlbD0iQUNDb25maWcuQWRzU3R5bGVFbmFibGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3nmb7luqbmoLflvI8tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJjb250YWluZXItbGFiZWwgYmFpZHUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibGFiZWxfaGlkZSIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JhaWR1X2xhYmxlIiBAY2xpY2s9ImxhYmVsU2hvd0hpZGVFbnYiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4Ij48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iYWlkdSIgdmFsdWU9IjAiIHYtbW9kZWw9IkFDQ29uZmlnLmJhaWR1LkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmFpZHVfb3JpZ2luIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0ICBuYW1lPSdzcC1hYy1odXlhbl9zdHlsZV9iYWlkdScgdHlwZT0nY2hlY2tib3gnIHYtbW9kZWw9IkFDQ29uZmlnLmJhaWR1Lkh1WWFuTW9kZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iYWlkdV9odXlhbiB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSIiPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JhaWR1bGl0ZSIgdHlwZT0iY2hlY2tib3giIHYtbW9kZWw9IkFDQ29uZmlnLlN0eWxlX0JhaWR1TGl0ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iYWlkdV9iYWlkdUxpdGUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JhaWR1IiB2YWx1ZT0iMSIgdi1tb2RlbD0iQUNDb25maWcuYmFpZHUuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iYWlkdV8xbGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JhaWR1IiB2YWx1ZT0iMiIgdHlwZT0icmFkaW8iIHYtbW9kZWw9IkFDQ29uZmlnLmJhaWR1LkFkc1N0eWxlTW9kZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iYWlkdV8xbGluZV9lbnRlciB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JhaWR1IiB2YWx1ZT0iMyIgdHlwZT0icmFkaW8iIHYtbW9kZWw9IkFDQ29uZmlnLmJhaWR1LkFkc1N0eWxlTW9kZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iYWlkdV8ybGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JhaWR1IiB2YWx1ZT0iNCIgdHlwZT0icmFkaW8iIHYtbW9kZWw9IkFDQ29uZmlnLmJhaWR1LkFkc1N0eWxlTW9kZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iYWlkdV8zbGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JhaWR1IiB2YWx1ZT0iNSIgdHlwZT0icmFkaW8iIHYtbW9kZWw9IkFDQ29uZmlnLmJhaWR1LkFkc1N0eWxlTW9kZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iYWlkdV80bGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyPgogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLeeZvuW6puagt+W8jy0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDFweDt3aWR0aDoyNjdweDttYXJnaW4tbGVmdDoyNXB4O2JhY2tncm91bmQtY29sb3I6I2Q4ZDhkODttYXJnaW4tdG9wOjFweDsiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLeiwt+atjOagt+W8jy0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImNvbnRhaW5lci1sYWJlbCBnb29nbGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibGFiZWxfaGlkZSIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2dvb2dsZV9sYWJsZSIgQGNsaWNrPSJsYWJlbFNob3dIaWRlRW52Ij48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlIiB2YWx1ZT0iMCIgdHlwZT0icmFkaW8iIHYtbW9kZWw9IkFDQ29uZmlnLmdvb2dsZS5BZHNTdHlsZU1vZGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlX29yaWdpbiB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfaHV5YW4iPjxpbnB1dCBuYW1lPSJzcC1hYy1odXlhbl9zdHlsZV9nb29nbGUiIHYtbW9kZWw9IkFDQ29uZmlnLmdvb2dsZS5IdVlhbk1vZGUiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2dvb2dsZV9odXlhbiB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9nb29nbGVfZ29vZ2xlTGl0ZSIgc3R5bGU9IiI+PGlucHV0IG5hbWU9InNwLWFjLWdvb2dsZV9pbl9iYWlkdW1vZGUiIHYtbW9kZWw9IkFDQ29uZmlnLmlzR29vbGVJbkJhaWR1TW9kZUVuYWJsZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlX2dvb2dsZUxpdGUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2dvb2dsZSIgdmFsdWU9IjEiIHYtbW9kZWw9IkFDQ29uZmlnLmdvb2dsZS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2dvb2dsZV8xbGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2dvb2dsZSIgdmFsdWU9IjIiIHYtbW9kZWw9IkFDQ29uZmlnLmdvb2dsZS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIiBjaGVja2VkPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlXzFsaW5lX2VudGVyIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlIiB2YWx1ZT0iMyIgdi1tb2RlbD0iQUNDb25maWcuZ29vZ2xlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlXzJsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlIiB2YWx1ZT0iNCIgdi1tb2RlbD0iQUNDb25maWcuZ29vZ2xlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlXzNsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IG5hbWU9InNwLWFjLWFfZm9yY2Vfc3R5bGVfZ29vZ2xlIiB2YWx1ZT0iNSIgdi1tb2RlbD0iQUNDb25maWcuZ29vZ2xlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZ29vZ2xlXzRsaW5lIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t6LC35q2M5qC35byPLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMXB4O3dpZHRoOjI2N3B4O21hcmdpbi1sZWZ0OjI1cHg7YmFja2dyb3VuZC1jb2xvcjojZDhkOGQ4O21hcmdpbi10b3A6MXB4OyI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t5b+F5bqU5qC35byPLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iY29udGFpbmVyLWxhYmVsIGJpbmciPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibGFiZWxfaGlkZSIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JpbmdfbGFibGUiIEBjbGljaz0ibGFiZWxTaG93SGlkZUVudiI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmciIHYtbW9kZWw9IkFDQ29uZmlnLmJpbmcuQWRzU3R5bGVNb2RlIiB2YWx1ZT0iMCIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmluZ19vcmlnaW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmluZ19odXlhbiI+PGlucHV0IG5hbWU9InNwLWFjLWh1eWFuX3N0eWxlX2JpbmciIHYtbW9kZWw9IkFDQ29uZmlnLmJpbmcuSHVZYW5Nb2RlIiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9iaW5nX2h1eWFuIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4Ij48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iaW5nIiB2LW1vZGVsPSJBQ0NvbmZpZy5iaW5nLkFkc1N0eWxlTW9kZSIgdmFsdWU9IjEiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JpbmdfMWxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iaW5nIiB2YWx1ZT0iMiIgdi1tb2RlbD0iQUNDb25maWcuYmluZy5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2JpbmdfMWxpbmVfZW50ZXIgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9iaW5nIiB2YWx1ZT0iMyIgdi1tb2RlbD0iQUNDb25maWcuYmluZy5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIiBjaGVja2VkPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmluZ18ybGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmciIHZhbHVlPSI0IiB2LW1vZGVsPSJBQ0NvbmZpZy5iaW5nLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmluZ18zbGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2JpbmciIHZhbHVlPSI1IiB2LW1vZGVsPSJBQ0NvbmZpZy5iaW5nLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfYmluZ180bGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t5b+F5bqU5qC35byPLS0tLS0tLS0tLS0tLS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDFweDt3aWR0aDoyNjdweDttYXJnaW4tbGVmdDoyNXB4O2JhY2tncm91bmQtY29sb3I6I2Q4ZDhkODttYXJnaW4tdG9wOjFweDsiPjwvZGl2Pi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgJmx0OyEmbmRhc2g7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTvmkJzni5fmoLflvI8mIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmbmRhc2g7Jmd0Oy0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJjb250YWluZXItbGFiZWwgc29nb3UiPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImxhYmVsX2hpZGUiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9zb2dvdV9sYWJsZSIgQGNsaWNrPSJsYWJlbFNob3dIaWRlRW52Ij48L2xhYmVsPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX3NvZ291IiB2LW1vZGVsPSJBQ0NvbmZpZy5zb2dvdS5BZHNTdHlsZU1vZGUiIHZhbHVlPSIwIiB0eXBlPSJyYWRpbyI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfc29nb3Vfb3JpZ2luIH19LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfc29nb3VfaHV5YW4iPjxpbnB1dCBuYW1lPSJzcC1hYy1odXlhbl9zdHlsZV9zb2dvdSIgdi1tb2RlbD0iQUNDb25maWcuc29nb3UuSHVZYW5Nb2RlIiB0eXBlPSJjaGVja2JveCI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfc29nb3VfaHV5YW4gfX0tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9zb2dvdSIgdmFsdWU9IjEiIHYtbW9kZWw9IkFDQ29uZmlnLnNvZ291LkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX3NvZ291XzFsaW5lIH19LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9zb2dvdSIgdmFsdWU9IjIiIHYtbW9kZWw9IkFDQ29uZmlnLnNvZ291LkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPi0tPgo8IS0tICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX3NvZ291XzFsaW5lX2VudGVyIH19LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9zb2dvdSIgdmFsdWU9IjMiIHYtbW9kZWw9IkFDQ29uZmlnLnNvZ291LkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iIGNoZWNrZWQ9IiI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfc29nb3VfMmxpbmUgfX0tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX3NvZ291IiB2YWx1ZT0iNCIgdi1tb2RlbD0iQUNDb25maWcuc29nb3UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfc29nb3VfM2xpbmUgfX0tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX3NvZ291IiB2YWx1ZT0iNSIgdi1tb2RlbD0iQUNDb25maWcuc29nb3UuQWRzU3R5bGVNb2RlIiB0eXBlPSJyYWRpbyI+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfc29nb3VfNGxpbmUgfX0tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4tLT4KPCEtLSAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+LS0+CjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAmbHQ7ISZuZGFzaDsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1O+aQnOeLl+agt+W8jyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyZuZGFzaDsmZ3Q7LS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMXB4O3dpZHRoOjI2N3B4O21hcmdpbi1sZWZ0OjI1cHg7YmFja2dyb3VuZC1jb2xvcjojZDhkOGQ4O21hcmdpbi10b3A6MXB4OyI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t6bit6bit5pCc5qC35byPLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iY29udGFpbmVyLWxhYmVsIGR1Y2siPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibGFiZWxfaGlkZSIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2R1Y2tfbGFibGUiIEBjbGljaz0ibGFiZWxTaG93SGlkZUVudiI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2R1Y2siIHYtbW9kZWw9IkFDQ29uZmlnLmR1Y2suQWRzU3R5bGVNb2RlIiB2YWx1ZT0iMCIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja19vcmlnaW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja19odXlhbiI+PGlucHV0IG5hbWU9InNwLWFjLWh1eWFuX3N0eWxlX2R1Y2siIHYtbW9kZWw9IkFDQ29uZmlnLmR1Y2suSHVZYW5Nb2RlIiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrX2h1eWFuIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kdWNrX25vcm1hbCIgc3R5bGU9IiI+PGlucHV0IHYtbW9kZWw9IkFDQ29uZmlnLm5vcm1hbGl6ZUR1Y2siIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2R1Y2tfbm9ybWFsIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9kdWNrIiB2YWx1ZT0iMSIgdi1tb2RlbD0iQUNDb25maWcuZHVjay5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2R1Y2tfMWxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9kdWNrIiB2YWx1ZT0iMiIgdi1tb2RlbD0iQUNDb25maWcuZHVjay5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2R1Y2tfMWxpbmVfZW50ZXIgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9kdWNrIiB2YWx1ZT0iMyIgdi1tb2RlbD0iQUNDb25maWcuZHVjay5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIiBjaGVja2VkPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja18ybGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2R1Y2siIHZhbHVlPSI0IiB2LW1vZGVsPSJBQ0NvbmZpZy5kdWNrLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja18zbGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2R1Y2siIHZhbHVlPSI1IiB2LW1vZGVsPSJBQ0NvbmZpZy5kdWNrLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZHVja180bGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t6bit6bit5pCc5qC35byPLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMXB4O3dpZHRoOjI2N3B4O21hcmdpbi1sZWZ0OjI1cHg7YmFja2dyb3VuZC1jb2xvcjojZDhkOGQ4O21hcmdpbi10b3A6MXB4OyI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t5aSa5ZCJ5qC35byPLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iY29udGFpbmVyLWxhYmVsIGRvZ2UiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibGFiZWxfaGlkZSIgdi10ZXh0PSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2RvZ2VfbGFibGUiIEBjbGljaz0ibGFiZWxTaG93SGlkZUVudiI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHgiPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2RvZ2UiIHYtbW9kZWw9IkFDQ29uZmlnLmRvZ2UuQWRzU3R5bGVNb2RlIiB2YWx1ZT0iMCIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV9vcmlnaW4gfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV9odXlhbiI+PGlucHV0IG5hbWU9InNwLWFjLWh1eWFuX3N0eWxlX2RvZ2UiIHYtbW9kZWw9IkFDQ29uZmlnLmRvZ2UuSHVZYW5Nb2RlIiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlX2h1eWFuIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnVzZXJTdHlsZV9kb2dlX25vcm1hbCIgc3R5bGU9IiI+PGlucHV0IHYtbW9kZWw9IkFDQ29uZmlnLm5vcm1hbGl6ZURvZ2UiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2RvZ2Vfbm9ybWFsIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9kb2dlIiB2YWx1ZT0iMSIgdi1tb2RlbD0iQUNDb25maWcuZG9nZS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2RvZ2VfMWxpbmUgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9kb2dlIiB2YWx1ZT0iMiIgdi1tb2RlbD0iQUNDb25maWcuZG9nZS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwudXNlclN0eWxlX2RvZ2VfMWxpbmVfZW50ZXIgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgbmFtZT0ic3AtYWMtYV9mb3JjZV9zdHlsZV9kb2dlIiB2YWx1ZT0iMyIgdi1tb2RlbD0iQUNDb25maWcuZG9nZS5BZHNTdHlsZU1vZGUiIHR5cGU9InJhZGlvIiBjaGVja2VkPSIiPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV8ybGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2RvZ2UiIHZhbHVlPSI0IiB2LW1vZGVsPSJBQ0NvbmZpZy5kb2dlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV8zbGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCBuYW1lPSJzcC1hYy1hX2ZvcmNlX3N0eWxlX2RvZ2UiIHZhbHVlPSI1IiB2LW1vZGVsPSJBQ0NvbmZpZy5kb2dlLkFkc1N0eWxlTW9kZSIgdHlwZT0icmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC51c2VyU3R5bGVfZG9nZV80bGluZSB9fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLeWkmuWQieagt+W8jy0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t5oqk55y85qih5byP6K6+572uLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5odXlhbk1vZGVfdGl0bGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtdXNlcmNvbG9yIiB2LW1vZGVsPSJBQ0NvbmZpZy5pc1VzZXJDb2xvckVuYWJsZSIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmh1eWFuTW9kZV90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9Im1lbnUtYm94LWNvbnRhaW5lciIgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuaHV5YW5Nb2RlX3RpdGxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHg7IiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5odXlhbkNvbG9yX3RleHQiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPSJzcC1hYy1tZW51aHV5YW5Db2xvciIgQGlucHV0LnN0b3A9InVzZVRoaXNIdXlhbkNvbG9yIiB2LW1vZGVsPSJBQ0NvbmZpZy5kZWZhdWx0SHVZYW5Db2xvciIgdHlwZT0iY29sb3IiIDp0aXRsZT0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmh1eWFuQ29sb3JfdGl0bGUiIHN0eWxlPSJjdXJzb3I6IHBvaW50ZXI7bWFyZ2luLXRvcDotMC4wNXJlbTtoZWlnaHQ6MjNweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibWVudS1ib3gtc21hbGwiIGRhdGEtdmFsdWU9IiNERUYxRUYiIEBjbGljay5zdG9wPSJ1c2VUaGlzSHV5YW5Db2xvciIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6I0RFRjFFRjsiPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOzwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJtZW51LWJveC1zbWFsbCIgZGF0YS12YWx1ZT0iI0YzRjJFRSIgQGNsaWNrLnN0b3A9InVzZVRoaXNIdXlhbkNvbG9yIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjojRjNGMkVFOyI+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9Im1lbnUtYm94LXNtYWxsIiBkYXRhLXZhbHVlPSIjRTVFNUU1IiBAY2xpY2suc3RvcD0idXNlVGhpc0h1eWFuQ29sb3IiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNFNUU1RTU7Ij4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDs8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0ibGlua2hyZWYiIGRhdGEtaHJlZj0iaHR0cHM6Ly93d3cubnRhb3cuY29tL2NvbG9ycGlja2VyLmh0bWwiIHN0eWxlPSJjdXJzb3I6cG9pbnRlcjttYXJnaW4tcmlnaHQ6IDEwcHg7IiBvbmNsaWNrPSJ3aW5kb3cub3Blbih0aGlzLmRhdGFzZXQuaHJlZikiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmh1eWFuQ29sb3JNb3JlX3RleHQiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS1GYXZpY29u5Zu+5qCH6K6+572uLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuZmF2aWNvbl90aXRsZSIgdi1tb2RlbD0iQUNDb25maWcuaXNGYXZpY29uRW5hYmxlIiBpZD0ic3AtYWMtZmF2aWNvbiIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9IiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmZhdmljb25fdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjBweDsiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLmZhdmljb25fZGVmYXVsdEljb25fdGV4dCI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLWZhdmljb25VcmwiIG5hbWU9InNwLWFjLWFfZm9yY2UiIHYtbW9kZWw9IkFDQ29uZmlnLmRlZmF1bHRGYXZpY29uVXJsIiB2YWx1ZT0iaHR0cHM6Ly9hZTAxLmFsaWNkbi5jb20va2YvSFRCMWRSWTBYOE9EM0tWalNaRkZxNkFuOXBYYXkuanBnIiBzdHlsZT0id2lkdGg6NTUlO21hcmdpbi10b3A6LTAuM2VtOyIgdHlwZT0iaW5wdXQiPgogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t56e76Zmk55m+5bqm5pCc57Si6aKE5rWLLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2VhcmNoT3JpZ2luX3RpdGxlIiB2LW1vZGVsPSJBQ0NvbmZpZy5kb0Rpc2FibGVTdWciIGlkPSJzcC1hYy1zdWdfb3JpZ2luIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2VhcmNoT3JpZ2luX3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8IS0tLS0tLS0tLS0tLemZhOWKoDfjgIE444CBOS0tLS0tLS0tLS0tLS0tPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcC1hYy1yaWdodCIgdi1tb2RlbD0iQUNDb25maWcuaXNSaWdodERpc3BsYXlFbmFibGUiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2hvd1JpZ2h0X3RleHQgfX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3AtYWMtY291bnRlciIgdi1tb2RlbD0iQUNDb25maWcuaXNDb3VudGVyRW5hYmxlIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiB0eXBlPSJjaGVja2JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuaGludFNob3dDb3VudGVyX3RleHQiPnt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zaG93Q291bnRlcl90ZXh0IH19PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcC1hYy1hbGluZSIgdi1tb2RlbD0iQUNDb25maWcuaXNBTGluZUVuYWJsZSIgbmFtZT0ic3AtYWMtYV9mb3JjZSIgdHlwZT0iY2hlY2tib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zaG93QUxpbmVfdGV4dCB9fQogICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t6Ieq5a6a5LmJ5qC35byP5YaF5a65LS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9InNwLWFjLXVzZXJzdHlsZSIgdi1tb2RlbD0iQUNDb25maWcuaXNVc2VyU3R5bGVFbmFibGUiIG5hbWU9InNwLWFjLWFfZm9yY2UiIHR5cGU9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2hvd1VzZXJTdHlsZV90ZXh0IH19CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCB2LWlmPSJMaXZlQ29uZmlnLmNzc19oYXNfZXJyb3IiIHN0eWxlPSJjb2xvcjogcmVkIj5lcnJvcjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9InNwLWFjLXVzZXJzdHlsZVRFWFQiIHYtbW9kZWw9IkFDQ29uZmlnLlVzZXJTdHlsZVRleHQiIEBrZXl1cD0ibG9hZEN1c3RvbVN0eWxlIiBAY2hhbmdlPSJsb2FkQ3VzdG9tU3R5bGUiIEBwYXN0ZT0ibG9hZEN1c3RvbVN0eWxlIiBuYW1lPSJzcC1hYy1hX2ZvcmNlIiBzdHlsZT0id2lkdGg6ODUlO2hlaWdodDogNjZweDttYXJnaW4tbGVmdDozMHB4OyIgdHlwZT0iaW5wdXQiID48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImxpbmtocmVmIiB0YXJnZXQ9Il9ibGFuayIgOmhyZWY9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5jb250YWN0TWVfdXJsIiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5jb250YWN0TWVfdGV4dCI+PC9hPgogICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgIDwhLS0tLS0tLS0tLS0t5oum5oiq5Z+f5ZCN6K6+572ucGFuZWwtLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9InNldHRpbmctc2Vjb25kIiB2LXNob3c9Im90aGVyLmN1clRhYiA9PT0gMiI+CiAgICAgICAgICAgICAgICAgICAgICA8bGkgc3R5bGU9J21hcmdpbi1ib3R0b206IDhweCAhaW1wb3J0YW50Oyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0nc3AtYWMtYmxvY2tkaXlidXR0b24tYmFjaycgQGNsaWNrPSJvdGhlci5jdXJUYWI9MSxvdGhlci5zaG93QmxvY2tMaXN0QXJlYSA9IGZhbHNlIiBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbic+e3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNldHRpbmdfcGFuZWxfc2Vjb25kLmJhY2tCdG5fdGV4dCB9fTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAge3sgbGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLnNldHRpbmdfcGFuZWxfc2Vjb25kLmJsb2NrTGFiZWxfdGV4dCB9fX0KICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICA8bGkgc3R5bGU9J21hcmdpbi1ib3R0b206IDhweCAhaW1wb3J0YW50Oyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSdzcC1hYy1ibG9ja2RpeWJ1dHRvbi1kaXlsaXN0JyBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbicgQGNsaWNrPSJvdGhlci5zaG93QmxvY2tMaXN0QXJlYSA9ICFvdGhlci5zaG93QmxvY2tMaXN0QXJlYSIgdi10ZXh0PSJjYWxfZGl5QmxvY2tMaXN0QnRuIj48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSdhYy1ibG9ja0xpc3QnIEBjbGljaz0icmVtb3ZlQUJsb2NrTGlzdEl0ZW0iIHN0eWxlPSdtYXgtaGVpZ2h0OjYwdmg7b3ZlcmZsb3cteTogc2Nyb2xsOyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCB2LXNob3c9IiFvdGhlci5zaG93QmxvY2tMaXN0QXJlYSIgdi1odG1sPSJnZXRCbG9ja0xpc3QiPjwvdWw+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSdhYy1ibG9ja0JveENvbicgc3R5bGU9J21heC1oZWlnaHQ6IDYwdmg7dGV4dC1hbGlnbjogY2VudGVyO21hcmdpbi1sZWZ0OiAyNnB4Oyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSB2LXNob3c9Im90aGVyLnNob3dCbG9ja0xpc3RBcmVhIiAgQGtleXVwPSJzeW5jVG9CbG9ja0xpc3QiIEBjaGFuZ2U9InN5bmNUb0Jsb2NrTGlzdCIgQHBhc3RlPSJzeW5jVG9CbG9ja0xpc3QiIHJvd3M9IjIwIiB2LXRleHQ9IkFDQ29uZmlnLlVzZXJCbG9ja0xpc3Quam9pbignXFxuJykiPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICB7eyBsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuc2V0dGluZ19wYW5lbF9zZWNvbmQuYWRkQmxvY2tMYWJlbF90ZXh0IH19PGlucHV0IGNsYXNzPSJzcC1hYy1hZGRSdWxlT25lIiBAa2V5dXAuZW50ZXI9ImNrQWRkUnVsZSIgdi1tb2RlbD0ib3RoZXIuYWRkQmxvY2tJdGVtIiBzdHlsZT0nd2lkdGg6NTUlOyc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSdzcC1hYy1hZGRSdWxlYnV0dG9uJyBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbiBlbmRidXR0b24nIEBjbGljaz0iY2tBZGRSdWxlIiBzdHlsZT0ncG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6IDE3cHg7JyB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5zZXR0aW5nX3BhbmVsX3NlY29uZC5hZGRCdG5MYWJlbF90ZXh0Ij7mlrDlop48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgPHVsIHYtc2hvdz0ib3RoZXIuY3VyVGFiID09PSAzIiBzdHlsZT0id2lkdGg6IDMwMHB4Ij4KICAgICAgICAgICAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGlhbG9nLWJvZHkiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSdzcC1hYy1ibG9ja2RpeWJ1dHRvbi1iYWNrJyBAY2xpY2s9Im90aGVyLmN1clRhYj0xIiBjbGFzcz0nc3AtYWMtc3BhbmJ1dHRvbic+6L+U5ZuePC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+5L2/55So6K+05piO77yaPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pi08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPjEuIOacrOiEmuacrOS4jeWMheWQq+S7u+S9leW5v+WRiuWGheWuue+8jOS5n+aXoOaEj+S6juegtOWdj+e9keermeeOsOacieWKn+iDveeahOWujOaVtOaAp++8jOS7heW4jOacm+mAmui/h+S4gOS6m+aYvuekuuaViOaenOeahOWPmOabtOiDveabtOWlveeahOeVmeWtmOWvueW6lOe9keermeeOsOacieeahOeUqOaIt++8jOS4gOWumueoi+W6puS4iuabtOWlveWcsOS/neivgeS6huebruagh+e9keermeeahOaXpea0u+OAgjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyLiDlkIzml7bmnKzohJrmnKzkuK3miYDmnInlip/og73lnYfkuLrlrabkuaDlkoznoJTnqbZ3ZWLliY3nq6/mioDmnK/nmoTlj5HlsZXogIzlvIDlj5HvvIzluIzmnJvkuLrlrabkuaDliY3nq6/mioDmnK/nmoTnoJTnqbbkurrlkZjmj5DkvpvkuIDkuKrmm7Tlpb3nmoTlj4LogIPku6PnoIHvvIzkv4Pov5t3ZWLliY3nq6/mioDmnK/nmoTlj5HlsZXvvIzkvr/kuo7mioDmnK/nmoTlrabkuaDlkozkuqTmtYHvvIzmnKzohJrmnKzkuI3mtonlj4rlr7nnvZHnq5nmupDnoIHnmoTosIPor5Xlkozkv67mlLnvvIzlm6Dkvb/nlKjmnKzohJrmnKzov5vooYzpnZ7ms5XnlKjpgJTkuI7mnKzohJrmnKzml6DlhbPjgIIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgPCEtLS0tLS0tLS0tLS3kv53lrZjjgIHlj5bmtojmjInpkq4tLS0tLS0tLS0tLS0tLT4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3AtYWMtY2FuY2VsYnV0dG9uIiBjbGFzcz0ic3AtYWMtc3BhbmJ1dHRvbiBlbmRidXR0b24iIEBjbGljaz0iY2xvc2VQYW5lbCIgOnRpdGxlPSJsYW4udXNlLmZpZWxkc2V0X3BhbmVsLnNldHRpbmdfcGFuZWwuY2FuY2VsQnRuX3RleHQiIHN0eWxlPSJwb3NpdGlvbjogcmVsYXRpdmU7ZmxvYXQ6IGxlZnQ7IiB2LXRleHQ9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5jYW5jZWxCdG5fdGV4dCI+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJzcC1hYy1zYXZlYnV0dG9uIiByZWY9ImJvdHRvbVNhdmVCdXR0b24iIEBjbGljaz0ic2F2ZUNvbmZpZyIgY2xhc3M9InNwLWFjLXNwYW5idXR0b24gZW5kYnV0dG9uIiA6dGl0bGU9Imxhbi51c2UuZmllbGRzZXRfcGFuZWwuc2V0dGluZ19wYW5lbC5va0J0bl90ZXh0IiBzdHlsZT0icG9zaXRpb246IHJlbGF0aXZlO2Zsb2F0OiByaWdodDsiIHYtdGV4dD0ibGFuLnVzZS5maWVsZHNldF9wYW5lbC5zZXR0aW5nX3BhbmVsLm9rQnRuX3RleHQiPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgPC9maWVsZHNldD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChDb250YWluZXIpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGxldCBhbGxOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5BQy1mYXZpY29uVCwgLkFDLUNvdW50ZXJUIik7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbE5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChhbGxOb2Rlc1tpXS5nZXRBdHRyaWJ1dGUoJ2FjQ2xpY2snKSA9PT0gbnVsbCkgewogICAgICAgICAgICAgIGFsbE5vZGVzW2ldLnNldEF0dHJpYnV0ZSgnYWNDbGljaycsICcxJyk7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGFsbE5vZGVzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIEFDdG9nZ2xlU2V0dGluZ0Rpc3BsYXkoZSk7CiAgICAgICAgICAgICAgICB9LCB0cnVlKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImJvZHkgI3NwLWFjLWNvbnRhaW5lciIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOyAvLyDpmLvmraLngrnlh7voh6rouqvnmoTml7blgJnlhbPpl60KICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJib2R5IikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHNhZmVGdW5jdGlvbiggKCkgPT4gewogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3NwLWFjLWNvbnRlbnQiKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sIGZhbHNlKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpc0VsZW1lbnRWaXNpYmxlKGRvbSkgewogICAgICAgICAgY29uc3Qgc2NyVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICAgIHJldHVybiAhKHNjclRvcCA+IChkb20ub2Zmc2V0VG9wICsgZG9tLm9mZnNldEhlaWdodCkgfHwgKHNjclRvcCArIHdpbmRvdy5pbm5lckhlaWdodCkgPCBkb20ub2Zmc2V0VG9wKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZU1vYmlsZUJhaWR1RGlyZWN0TGluaygpIHsKICAgICAgICAgIGxldCBub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNwYWdlICNwYWdlLWJkICNyZXN1bHRzIC5yZXN1bHQ6bm90KFthY19yZWRpcmVjdFN0YXR1c10pIik7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxldCBjdXJOb2RlID0gbm9kZXNbaV07CiAgICAgICAgICAgIHNhZmVGdW5jdGlvbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgbGV0IGN1ckRhdGEgPSBKU09OLnBhcnNlKGN1ck5vZGUuZGF0YXNldC5sb2cucmVwbGFjZSgvJy9nbSwgIlwiIikpOwogICAgICAgICAgICAgIGxldCB0cnVlTGluayA9IGN1ckRhdGEubXU7CiAgICAgICAgICAgICAgY3VyTm9kZS5xdWVyeVNlbGVjdG9yKCJhcnRpY2xlIikuc2V0QXR0cmlidXRlKCJybC1saW5rLWhyZWYiLCB0cnVlTGluayk7CiAgICAgICAgICAgICAgY3VyTm9kZS5xdWVyeVNlbGVjdG9yQWxsKCJhIikuZm9yRWFjaChmdW5jdGlvbiAocGVyKSB7CiAgICAgICAgICAgICAgICBwZXIuc2V0QXR0cmlidXRlKCJocmVmIiwgdHJ1ZUxpbmspOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY3VyTm9kZS5zZXRBdHRyaWJ1dGUoImFjX3JlZGlyZWN0U3RhdHVzIiwgIjEiKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZU9uTW91c2VEb3duRnVuYygpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGxldCByZXN1bHROb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5nIC5yYyBhLCAjcnMsICNyc28gLmcgYSIpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdE5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgbGV0IG9uZSA9IHJlc3VsdE5vZGVzW2ldOwogICAgICAgICAgICAgIG9uZS5zZXRBdHRyaWJ1dGUoIm9ubW91c2Vkb3duIiwgIiIpOyAvLyDosLfmrYzljrvph43lrprlkJHlubLmibAKICAgICAgICAgICAgICBvbmUuc2V0QXR0cmlidXRlKCJ0YXJnZXQiLCAiX2JsYW5rIik7IC8vIOiwt+atjOmTvuaOpeaWsOagh+etvuaJk+W8gAogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlUmVkaXJlY3RMaW5rVGFyZ2V0KCkgewogICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuWkhJSFUpIHsKICAgICAgICAgICAgbGV0IG5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLlJpY2hUZXh0IGFbaHJlZio9Jy8vbGluay56aGlodS5jb20vP3RhcmdldCddIik7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBsZXQgdXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KG5vZGVzW2ldLmhyZWYucmVwbGFjZSgvaHR0cHM/OlwvXC9saW5rXC56aGlodVwuY29tXC9cP3RhcmdldD0vLCAiIikpOwogICAgICAgICAgICAgIG5vZGVzW2ldLmhyZWYgPSB1cmw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CQUlEVV9YVUVTSFUpIHsKICAgICAgICAgICAgbGV0IHhub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImFbaHJlZio9J3NjX3Z1cmw9aHR0cCddIik7CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBpIDwgeG5vZGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgbGV0IHh1cmwgPSBnZXRVcmxBdHRyaWJ1dGUoeG5vZGVzW2pdLmhyZWYsICJzY192dXJsIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgeG5vZGVzW2pdLmhyZWYgPSB4dXJsOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyDmj5Dlj5Z1cmzlhYPntKDnmoTlj4LmlbDlgLwKICAgICAgICBmdW5jdGlvbiBnZXRVcmxBdHRyaWJ1dGUodXJsLCBhdHRyaWJ1dGUsIG5lZWREZWNvZGUpIHsKICAgICAgICAgIGxldCBzZWFyY2hWYWx1ZVMgPSAodXJsLnN1YnN0cigxKSArICIiKS5zcGxpdCgiJiIpOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWFyY2hWYWx1ZVMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbGV0IGtleV92YWx1ZSA9IHNlYXJjaFZhbHVlU1tpXS5zcGxpdCgiPSIpOwogICAgICAgICAgICBsZXQgcmVnID0gbmV3IFJlZ0V4cCgiXiIgKyBhdHRyaWJ1dGUgKyAiJCIpOwogICAgICAgICAgICBpZiAocmVnLnRlc3Qoa2V5X3ZhbHVlWzBdKSkgewogICAgICAgICAgICAgIGxldCBzZWFyY2hXb3JkcyA9IGtleV92YWx1ZVsxXTsKICAgICAgICAgICAgICByZXR1cm4gbmVlZERlY29kZSA/IGRlY29kZVVSSUNvbXBvbmVudChzZWFyY2hXb3JkcykgOiBzZWFyY2hXb3JkczsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVzZXRVUkxOb3JtYWwobGlzdCkgewogICAgICAgICAgLy8g5rOo5oSP5pyJ6YeN5aSN55qE5Zyw5Z2A77yM5bC96YeP5a+56YeN5aSN5Zyw5Z2A6L+b6KGM5Y676YeNCiAgICAgICAgICB2YXIgaGFzRGVhbEhyZWZTZXQgPSBuZXcgU2V0KCk7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgLy8g5q2k5pa55rOV5piv5byC5q2l77yM5pWF5Zyo57uT5p2f55qE5pe25YCZ5L2/55SoaeS8muWHuumXrumimC3kuKXph40hCiAgICAgICAgICAgIC8vIOmHh+eUqOmXreWMheeahOaWueazleadpei/m+ihjOaVsOaNrueahOS8oOmAkgogICAgICAgICAgICBsZXQgY3VyTm9kZSA9IGxpc3RbaV07CiAgICAgICAgICAgIGxldCBjdXJocmVmID0gY3VyTm9kZS5ocmVmOwogICAgICAgICAgICBpZiAobGlzdFtpXSAhPT0gbnVsbCAmJiBsaXN0W2ldLmdldEF0dHJpYnV0ZSgiYWNfcmVkaXJlY3RTdGF0dXMiKSA9PT0gbnVsbCkgewogICAgICAgICAgICAgIGxpc3RbaV0uc2V0QXR0cmlidXRlKCJhY19yZWRpcmVjdFN0YXR1cyIsICIwIik7CiAgICAgICAgICAgICAgbGV0IGxlbjEgPSBoYXNEZWFsSHJlZlNldC5zaXplOwogICAgICAgICAgICAgIGhhc0RlYWxIcmVmU2V0LmFkZChjdXJocmVmKTsKICAgICAgICAgICAgICBsZXQgbGVuMiA9IGhhc0RlYWxIcmVmU2V0LnNpemU7CiAgICAgICAgICAgICAgaWYgKGxlbjEgPT09IGxlbjIpIGNvbnRpbnVlOyAvLyDor7TmmI7mlbDmja7lt7Lnu4/lpITnkIbov4fvvIzlrZjlnKjnm7jlkIznmoTorrDlvZUKICAgICAgICAgICAgICBpZiAoY3VyaHJlZi5pbmNsdWRlcygid3d3LmJhaWR1LmNvbS9saW5rIikgfHwKICAgICAgICAgICAgICAgIGN1cmhyZWYuaW5jbHVkZXMoIm0uYmFpZHUuY29tL2Zyb20iKSB8fAogICAgICAgICAgICAgICAgY3VyaHJlZi5pbmNsdWRlcygid3d3LnNvZ291LmNvbS9saW5rIikgfHwKICAgICAgICAgICAgICAgIGN1cmhyZWYuaW5jbHVkZXMoInNvLmNvbS9saW5rIikpIHsKICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoY19jdXJub2RlLCBjX2N1cmhyZWYpIHsKICAgICAgICAgICAgICAgICAgbGV0IHVybCA9IGNfY3VyaHJlZi5yZXBsYWNlKC9eaHR0cDovLCAiaHR0cHM6Iik7CiAgICAgICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVICYmICF1cmwuaW5jbHVkZXMoImVxaWQiKSkgewogICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+eZvuW6pu+8jOW5tuS4lOayoeacieW4puacieino+aekOWPguaVsO+8jOmCo+S5iOaJi+WKqOW4puS4igogICAgICAgICAgICAgICAgICAgIHVybCA9IHVybCArICImd2Q9JmVxaWQ9IjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBsZXQgZ21SZXF1ZXN0Tm9kZSA9IEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAvLyBmcm9tOiAiYWN4aHIiLAogICAgICAgICAgICAgICAgICAgIGV4dERhdGE6IGNfY3VyaHJlZiwgLy8g55So5LqO5omp5bGVCiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyJBY2NlcHQiOiAiKi8qIiwgIlJlZmVyZXIiOiBjX2N1cmhyZWYucmVwbGFjZSgvXmh0dHA6LywgImh0dHBzOiIpfSwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDgwMDAsCiAgICAgICAgICAgICAgICAgICAgb25yZWFkeXN0YXRlY2hhbmdlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsgLy8gTUFSSyDmnInml7blgJnov5nkuKrlh73mlbDmoLnmnKzkuI3ov5vmnaUgLSDosIPor5XnmoTpl67popggLSB0aW1lb3V0CiAgICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5yZXNwb25zZVRleHQgfHwgcmVzcG9uc2UucmVzcG9uc2VIZWFkZXJzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOeUseS6juaYr+eJueauiui/lOWbni3lubbkuJTlpb3mkJwt5pCc54uXLeeZvuW6pumDveaYr+i/meS4quagvOW8j++8jOaVheaPkOWHugogICAgICAgICAgICAgICAgICAgICAgICBEZWFsUmVkaXJlY3QoZ21SZXF1ZXN0Tm9kZSwgY19jdXJocmVmLCByZXNwb25zZS5yZXNwb25zZVRleHQsICJVUkw9JyhbXiddKyknIikKICAgICAgICAgICAgICAgICAgICAgICAgLy8g6L+Z5Liq5piv5Zyo5LiK6Z2i5peg5rOV5aSE55CG55qE5oOF5Ya15LiL77yM5aSH55So55qEIHRtLWZpbmFsdXJsZGhkZyAgdG0tZmluYWx1cmxtZmRoCgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UucmVzcG9uc2VIZWFkZXJzLmluY2x1ZGVzKCJ0bS1maW5hbHVybCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlbFVSTCA9IFJlZ19HZXQocmVzcG9uc2UucmVzcG9uc2VIZWFkZXJzLCAidG0tZmluYWx1cmxcXHcrOiAoW15cXHNdKykiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVsVVJMID09PSBudWxsIHx8IHJlbFVSTCA9PT0gIiIgfHwgcmVsVVJMLmluY2x1ZGVzKCJ3d3cuYmFpZHUuY29tL3NlYXJjaC9lcnJvciIpKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgRGVhbFJlZGlyZWN0KGdtUmVxdWVzdE5vZGUsIGNfY3VyaHJlZiwgcmVsVVJMKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KShjdXJOb2RlLCBjdXJocmVmKTsgLy/kvKDpgJLml6fnmoTnvZHlnYDov4fljrvvvIzor7vkvZxjX2N1cmhyZWYKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gY3VyTm9kZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCAoKT0+IHsKICAgICAgICAgICAgICAvLyAgIGNvbnN0IEFCS2V5ID0gUmVkaXJlY3RNYXAuZ2V0KGN1ck5vZGUuaHJlZik7IC8vIOWOn+WniyAtPiDkuYvlkI7nmoTpk77mjqUKICAgICAgICAgICAgICAvLyAgIGlmKEFCS2V5KSBjdXJOb2RlLmhyZWYgPSBBQktleTsKICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICAgIC8vIGN1ck5vZGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCAoKT0+IHsKICAgICAgICAgICAgICAvLyAgIGNvbnN0IEJBS2V5ID0gUmVkaXJlY3RNYXAuZ2V0KGN1ck5vZGUuaHJlZik7IC8vIOS5i+WQjueahOi/nuaOpSAtPiDljp/lp4sKICAgICAgICAgICAgICAvLyAgIGlmKEJBS2V5KSBjdXJOb2RlLmhyZWYgPSBCQUtleTsKICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaGFzRGVhbEhyZWZTZXQuc2l6ZSA+IDAgJiYgbGlzdC5sZW5ndGggLSBoYXNEZWFsSHJlZlNldC5zaXplID4gMCkgY29uc29sZS5sb2coIuS4ouW8g+aOiSIsIGxpc3QubGVuZ3RoIC0gaGFzRGVhbEhyZWZTZXQuc2l6ZSwgIuS4qumHjeWkjemTvuaOpSIpOwogICAgICAgIH0KCiAgICAgICAgdmFyIERlYWxSZWRpcmVjdCA9IGZ1bmN0aW9uIChyZXF1ZXN0LCBjdXJOb2RlSHJlZiwgcmVzcFRleHQsIFJlZ1RleHQpIHsKICAgICAgICAgIGlmIChyZXNwVGV4dCA9PT0gbnVsbCB8fCB0eXBlb2YgKHJlc3BUZXh0KSA9PT0gInVuZGVmaW5lZCIpIHJldHVybjsKICAgICAgICAgIGxldCByZXN1bHRSZXNwb25zZVVybCA9ICIiOwogICAgICAgICAgaWYgKFJlZ1RleHQgIT0gbnVsbCkgewogICAgICAgICAgICByZXN1bHRSZXNwb25zZVVybCA9IFJlZ19HZXQocmVzcFRleHQsIFJlZ1RleHQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0UmVzcG9uc2VVcmwgPSByZXNwVGV4dDsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChyZXN1bHRSZXNwb25zZVVybCAhPT0gbnVsbCAmJiByZXN1bHRSZXNwb25zZVVybCAhPT0gIiIgJiYgIXJlc3VsdFJlc3BvbnNlVXJsLmluY2x1ZGVzKCJ3d3cuYmFpZHUuY29tL2xpbmsiKSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLlNPR09VKSBjdXJOb2RlSHJlZiA9IGN1ck5vZGVIcmVmLnJlcGxhY2UoL15odHRwczpcL1wvd3d3LnNvZ291LmNvbS8sICIiKTsKICAgICAgICAgICAgICBsZXQgaG9zdCA9IGdldFRleHRIb3N0KHJlc3VsdFJlc3BvbnNlVXJsKTsKICAgICAgICAgICAgICAvLyBSZWRpcmVjdE1hcC5zZXQoY3VyTm9kZUhyZWYsIHJlc3VsdFJlc3BvbnNlVXJsKTsgLy8g6L+b6KGM5LiA5Liq5pWw5o2u5YWz6IGUCiAgICAgICAgICAgICAgLy8gUmVkaXJlY3RNYXAuc2V0KHJlc3VsdFJlc3BvbnNlVXJsLCBjdXJOb2RlSHJlZik7IC8vIOi/m+ihjOS4gOS4quaVsOaNruWFs+iBlAogICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIipbaHJlZio9JyIgKyBjdXJOb2RlSHJlZiArICInXSIpLmZvckVhY2goIHBlciA9PiB7CiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlTm9kZSA9IHBlcjsKCiAgICAgICAgICAgICAgICBjaGFuZ2VOb2RlLnNldEF0dHJpYnV0ZSgiYWNfcmVkaXJlY3RTdGF0dXMiLCAiMiIpOwogICAgICAgICAgICAgICAgY2hhbmdlTm9kZS5ocmVmID0gcmVzdWx0UmVzcG9uc2VVcmw7CiAgICAgICAgICAgICAgICAvLyBjaGFuZ2VOb2RlLnNldEF0dHJpYnV0ZSgiZGF0YS1vcmlocmVmIiwgY2hhbmdlTm9kZS5ocmVmKTsKICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VOb2RlLmhhc0F0dHJpYnV0ZSgibWV0YSIpKSB7CiAgICAgICAgICAgICAgICAgIGNoYW5nZU5vZGUuc2V0QXR0cmlidXRlKCJtZXRhIiwgaG9zdCk7CiAgICAgICAgICAgICAgICAgIGNoYW5nZU5vZGUuZGF0YXNldC5ob3N0ID0gaG9zdDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VOb2RlLnRleHQgJiYgY2hhbmdlTm9kZS50ZXh0Lmxlbmd0aCA8IDEwICYmICFjaGFuZ2VOb2RlLnRleHQuaW5jbHVkZXMoaG9zdCkKICAgICAgICAgICAgICAgICAgLy8g5LiN6IO95pivcmVkaXJlY3QgdXJsIOS4jeiDveaYr2gyXGgz5LiL55u05bGe6ZO+5o6lCiAgICAgICAgICAgICAgICAgICYmICFjaGFuZ2VOb2RlLnBhcmVudEVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJoIikpIHsKICAgICAgICAgICAgICAgICAgY2hhbmdlTm9kZS5pbnNlcnRBZGphY2VudEhUTUwoImJlZm9yZUVuZCIsICImbmJzcDstJm5ic3A7IiArIGhvc3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgIG90aGVyRGF0YS5vdGhlci5jdXJIb3N0cy5hY3B1c2goaG9zdCArICIjIyMiICsgcmVzdWx0UmVzcG9uc2VVcmwpOwogICAgICAgICAgICAgIHJlcXVlc3QuYWJvcnQoKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQURfYmFpZHVfc29nb3UoKSB7IC8vIOenu+mZpOe9keermeiHquacieW5v+WRigogICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFUpIHsKCiAgICAgICAgICAgIC8vIOenu+mZpHNoYWRvd0RPTeW5v+WRiu+8m+aQnOe0ouWFs+mUruWtl++8mua3mOWune+8m+eEtuWQjueCueWHu+aQnOe0ouahhu+8jOW5v+WRiuS8muWkmuasoemHjeeOsHNoYWRvd2RvbQogICAgICAgICAgICBzYWZlRnVuY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICQoJy5jLWNvbnRhaW5lciA+Pj4gLmMtY29udGFpbmVyJykuaGFzKCcuZjEzPnNwYW46c3RhcnRzLXdpdGgoIuW5v+WRiiIpJykucmVtb3ZlKCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g56e76Zmk5Y+z5L6n5qCP5bm/5ZGKCiAgICAgICAgICAgIHNhZmVSZW1vdmVfeHBhdGgoImlkKCdjb250ZW50X3JpZ2h0JykvZGl2Wy4vL2Fbc3RhcnRzLXdpdGgodGV4dCgpLCAn5bm/5ZGKJyldXSIpOwogICAgICAgICAgICAvLyDnp7vpmaTmoIflh4blub/lkYoKICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ2NvbnRlbnRfbGVmdCcpL2RpdlsuLy9zcGFuW2NvbnRhaW5zKHRleHQoKSwgJ+W5v+WRiicpXV0iKTsKICAgICAgICAgICAgLy8g56e76Zmk5qCH5YeG5bm/5ZGKIC0g5pawCiAgICAgICAgICAgIHNhZmVSZW1vdmVfeHBhdGgoImlkKCdjb250ZW50X2xlZnQnKS9kaXZbLi8vYVt0ZXh0KCk9J+W5v+WRiiddXSIpOwogICAgICAgICAgICAvLyDnp7vpmaTlj7PkvqfmoI/pobbpg6gt5bqV6YOo5peg55So5bm/5ZGKCiAgICAgICAgICAgIHNhZmVSZW1vdmVfeHBhdGgoImlkKCdjb250ZW50X3JpZ2h0JykvYnIiKTsKICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ2NvbnRlbnRfcmlnaHQnKS9kaXZbbm90KEBpZCldIik7CiAgICAgICAgICAgIC8vIOenu+mZpOmhtumDqOWPr+iDveWHuueOsOeahCAi5Li65oKo5o6o6I2QIgogICAgICAgICAgICBzYWZlUmVtb3ZlX3hwYXRoKCJpZCgnY29udGVudF9sZWZ0JykvL2Rpdltjb250YWlucyhAY2xhc3MsICdfcnMnKV0iKTsKCiAgICAgICAgICB9IGVsc2UgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuTUJBSURVKSB7CiAgICAgICAgICAgIC8qKioq56e76Zmk5omL5py65qih5byP5LiK55qE6YOo5YiG5bm/5ZGKKioqKi8KICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ3BhZ2UtYmQnKS9kaXZbbm90KGNvbnRhaW5zKEBjbGFzcywgJ3Jlc3VsdCcpKV0iKTsKICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ3BhZ2UtYmQnKS9kaXZbbm90KEBjbGFzcyldIik7CiAgICAgICAgICAgIHNhZmVSZW1vdmVfeHBhdGgoIi8vZGl2W0BjbGFzcz0nbmEtbGlrZS1jb250YWluZXInXSIpOwogICAgICAgICAgICAvLyBzYWZlRnVuY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyAgICQoJyNwYWdlLWJkICNyZXN1bHRzPmRpdjpub3QoW2NsYXNzKj0icmVzdWx0Il0pJykucmVtb3ZlKCk7CiAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICAvLyBzYWZlRnVuY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyAgICQoJyNwYWdlLWJkICNyZXN1bHRzPmRpdjpub3QoW2NsYXNzXSknKS5yZW1vdmUoKTsKICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuU08pIHsKICAgICAgICAgICAgc2FmZVJlbW92ZSgiI3NvX2t3LWFkIik7CiAgICAgICAgICAgIHNhZmVSZW1vdmUoIiNtLXNwcmVhZC1sZWZ0Iik7CiAgICAgICAgICAgIC8vIOenu+mZpOaQnOe0ouS4reW6lemDqOW5v+WRigogICAgICAgICAgICBzYWZlUmVtb3ZlKCIjbS1zcHJlYWQtYm90dG9tIik7CiAgICAgICAgICAgIC8vIOenu+mZpOWPs+S+p+agj+mhtumDqOW5v+WRigogICAgICAgICAgICBzYWZlUmVtb3ZlX3hwYXRoKCJpZCgncmlnaHR0b3BfYm94JykvL2xpWy4vL3NwYW5bY29udGFpbnModGV4dCgpLCAn5bm/5ZGKJyldXSIpOwogICAgICAgICAgfSBlbHNlIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJJTkcpIHsKICAgICAgICAgICAgc2FmZVJlbW92ZSgiLmJfYWQiKTsKICAgICAgICAgICAgc2FmZVJlbW92ZV94cGF0aCgiaWQoJ2JfcmVzdWx0cycpL2xpWy4vZGl2W0BjbGFzcz0nYWRfZmxzJ11dIiwgdHJ1ZSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFKSB7CiAgICAgICAgICAgIHNhZmVSZW1vdmUoIiNib3R0b21hZHMiKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFkZENvdW50ZXIoY2l0ZUxpc3QpIHsKICAgICAgICAgIGxldCBjc3NUZXh0ID0gInBvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6MTttYXJnaW4tcmlnaHQ6NHB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrO2NvbG9yOndoaXRlO2ZvbnQtZmFtaWx5Oiflvq7ova/pm4Xpu5EnO2ZvbnQtc2l6ZToxNnB4O3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOjIycHg7bGluZS1oZWlnaHQ6MjJweDtib3JkZXItcmFkaXVzOjUwJTsiOwogICAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaXRlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBsZXQgY3VyID0gY2l0ZUxpc3RbaV0KICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjdXIuZ2V0QXR0cmlidXRlKCdTb3J0SW5kZXgnKTsKICAgICAgICAgICAgaWYgKGluZGV4ID09PSBudWxsIHx8IHR5cGVvZiAoaW5kZXgpID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgIGN1ci5zZXRBdHRyaWJ1dGUoJ1NvcnRJbmRleCcsIENPTlNULnNvcnRJbmRleCk7CiAgICAgICAgICAgICAgY3VyLmlubmVyID0gY3VyLmlubmVySFRNTDsKICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gIjxlbSBjbGFzcz0nQUMtQ291bnRlclQnIHN0eWxlPSIgKyBjc3NUZXh0ICsgIj4iICsgQ09OU1Quc29ydEluZGV4ICsgIjwvZW0+IjsKICAgICAgICAgICAgICBjdXIuaW5uZXJIVE1MID0gZGl2LmlubmVySFRNTCArIGN1ci5pbm5lcjsKICAgICAgICAgICAgICBDT05TVC5zb3J0SW5kZXgrKzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb25zdCBjdXJDb3VudGVyID0gY3VyLnF1ZXJ5U2VsZWN0b3IoIi5BQy1Db3VudGVyVCIpCiAgICAgICAgICAgICAgY29uc3Qgb3JpSW5kZXggPSBjdXJDb3VudGVyLmlubmVyVGV4dAogICAgICAgICAgICAgIGNvbnN0IGNoZWNrVmFsdWUgPSAoaSArIDEpICUgMTAwOwogICAgICAgICAgICAgIC8vIOaVsOaNruWAvOS4jeWQjAogICAgICAgICAgICAgIC8vIOaVsOaNruayoeacieiiq+e/u+ivkQogICAgICAgICAgICAgIGlmICgraW5kZXggIT09IGNoZWNrVmFsdWUgJiYgIS9eXGQrJC8udGVzdChvcmlJbmRleCkpIHsgLy8g5oyJ6ZyA5pu05pawCiAgICAgICAgICAgICAgICBjdXJDb3VudGVyLmlubmVyVGV4dCA9Y2hlY2tWYWx1ZTsKICAgICAgICAgICAgICAgIGN1ci5zZXRBdHRyaWJ1dGUoJ1NvcnRJbmRleCcsIGNoZWNrVmFsdWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIEhvc3RSZWcgPSBuZXcgUmVnRXhwKC8oaHR0cHM/OlwvXC8pPyhbXi9cc10rKS9pKTsKCiAgICAgICAgZnVuY3Rpb24gZ2V0VGV4dEhvc3Qoc2JlZm9yZSkgewogICAgICAgICAgc2JlZm9yZSA9IChzYmVmb3JlICYmIHNiZWZvcmUudHJpbSgpKS5yZXBsYWNlKC9ccy1cc1xkezR9LVxkezEsMn0tXGR7MSwyfS8sICIiKSB8fCAiIjsKICAgICAgICAgIGxldCBzZW5kOwogICAgICAgICAgbGV0IHJlc3VsdCA9IHNiZWZvcmUuc3BsaXQoJy0nKTsKICAgICAgICAgIC8vIC0t5pCc54uX55m+5bqm5LiT55So77yb5aaC5p6c56ys5LiA5Liq5piv5Lit5paH55qE6K+d77yM5Zyw5Z2A5bCx5piv56ys5LqM5LiqCiAgICAgICAgICBpZiAoKHJlc3VsdC5sZW5ndGggPiAxICYmIG5ldyBSZWdFeHAoIltcXHU0RTAwLVxcdTlGRkZdKyIsICJnIikudGVzdChzYmVmb3JlKSkgJiYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFUgfHwgY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5TT0dPVSkpIHsKICAgICAgICAgICAgc2JlZm9yZSA9IHJlc3VsdFsxXTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIOatpOaXtnNiZWZvcmXlh6DkuY7mmK/nrYnkuo7nvZHlnYDkuobvvIzkvYbmmK/mnInml7blgJnkvJrmnInlpJrnmoTnqbrmoLzvvIzlpJrnmoTlhoXlrrnvvIzlpJrnmoTliY3nvIBodHRw77yM5aSa5L2Z55qE6Lev5b6ECiAgICAgICAgICBsZXQgcmVzID0gSG9zdFJlZy5leGVjKHNiZWZvcmUpOwogICAgICAgICAgc2VuZCA9IChyZXMgJiYgcmVzWzJdLnRyaW0oKSkgfHwgIiI7CiAgICAgICAgICAvLyBzZW5kID0gc2JlZm9yZS5yZXBsYWNlKC8oXC9bXi9dKnxccyopLywgIiIpLnJlcGxhY2UoLzxbXj5dKj4vZywgIiIpLnJlcGxhY2UoL2h0dHBzPzpcL1wvL2csICIiKS5yZXBsYWNlKC88XC8/c3Ryb25nPi9nLCAiIikucmVwbGFjZSgvPFwvP2I+L2csICIiKS5yZXBsYWNlKC88Pz4/L2csICIiKS5yZXBsYWNlKC8oIHxcLykuKi9nLCAiIikucmVwbGFjZSgvXC5cLi4qLywgIiIpOwogICAgICAgICAgaWYgKHNlbmQgPT09ICIiKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGlmIChzZW5kLmluZGV4T2YoIi4iKSA8IDApIHJldHVybiBudWxsOwogICAgICAgICAgaWYgKHNlbmQuaW5kZXhPZigi4oa1IikgPj0gMCkgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4gc2VuZC50cmltKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhZGRGYXZpY29uKGNpdGVMaXN0KSB7CiAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5ET0dFKSB7CiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjaXRlTGlzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gY2l0ZUxpc3RbaW5kZXhdLmdldEF0dHJpYnV0ZSgiYWNfZmF2aWNvblN0YXR1cyIpKSB7CiAgICAgICAgICAgICAgICBsZXQgY3VyTm9kZSA9IGNpdGVMaXN0W2luZGV4XTsKICAgICAgICAgICAgICAgIGxldCB0YXJnZXROb2RlID0gY3VyTm9kZTsKICAgICAgICAgICAgICAgIGxldCB7IGN1ckhvc3QsIGN1clVybCB9ID0gZ2V0Tm9kZUhvc3QodGFyZ2V0Tm9kZSk7CiAgICAgICAgICAgICAgICBpZiAoY3VySG9zdCA9PT0gbnVsbCB8fCAoY3VyVXJsICYmIGN1clVybC5pbmNsdWRlcygid3d3LmJhaWR1LmNvbS9saW5rIikpKSB7IC8vIOi3s+i/h2JhaWR1LmNsaWNrCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgb3RoZXJEYXRhLm90aGVyLmN1ckhvc3RzLmFjcHVzaChjdXJIb3N0ICsgIiMjIyIgKyBjdXJVcmwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGV0IGZhdmljb25VcmwgPSBjdXJIb3N0OwogICAgICAgICAgICAgICAgbGV0IElJID0gMDsKICAgICAgICAgICAgICAgIGZvciAoOyBJSSA8PSA1OyBJSSsrKSB7CiAgICAgICAgICAgICAgICAgIHRhcmdldE5vZGUgPSB0YXJnZXROb2RlLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXROb2RlICE9IG51bGwgJiYgdGFyZ2V0Tm9kZS5xdWVyeVNlbGVjdG9yKGN1clNpdGUuRmF2aWNvbkFkZFRvKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKHRhcmdldE5vZGUucGFyZW50Tm9kZS5oYXNBdHRyaWJ1dGUoJ3RwbCcpICYmIHRhcmdldE5vZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ3RwbCcpLmluY2x1ZGVzKCdzdG9jaycpKSB7CiAgICAgICAgICAgICAgICAgIGN1ck5vZGUuc2V0QXR0cmlidXRlKCJhY19mYXZpY29uU3RhdHVzIiwgIi0zIik7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGluZGV4KyIuIitmYXZpY29uVXJsKyItLSIrSUkpOwogICAgICAgICAgICAgICAgaWYgKElJIDw9IDUpIHsKICAgICAgICAgICAgICAgICAgLy8g5YWI55So54i26IqC54K55Yik5pat5LiA5LiL5piv5ZCm5a2Y5ZyoaW1nCiAgICAgICAgICAgICAgICAgIGxldCB0bXBIVE1MID0gdGFyZ2V0Tm9kZS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICAgIGxldCBwb3MgPSB0bXBIVE1MLmluZGV4T2YoImZhdi11cmwiKQogICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJ3cl9mYXYiKQogICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJmYXZ1cmwiKQogICAgICAgICAgICAgICAgICAgICYgdG1wSFRNTC5pbmRleE9mKCJ0aXQtaWNvIikKICAgICAgICAgICAgICAgICAgICAmIHRtcEhUTUwuaW5kZXhPZigiaW1nX2ZhdiBybXNfaW1nIikKICAgICAgICAgICAgICAgICAgICAmIHRtcEhUTUwuaW5kZXhPZigiYy10b29sLSIpCiAgICAgICAgICAgICAgICAgICAgJiB0bXBIVE1MLmluZGV4T2YoInNwYW4gY2xhc3M9XCJjLWljb24gYy1pY29uLSIpCiAgICAgICAgICAgICAgICAgICAgJiB0bXBIVE1MLmluZGV4T2YoImltZyBjbGFzcz1cInhBMzNHYyIpOwogICAgICAgICAgICAgICAgICAvL+S7luiHquW3seW3sue7j+WBmuS6hmZhdmljb27kuoYKICAgICAgICAgICAgICAgICAgaWYgKHBvcyA+IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIuW3suacieWbvueJh++8miIpOwogICAgICAgICAgICAgICAgICAgIGN1ck5vZGUuc2V0QXR0cmlidXRlKCJhY19mYXZpY29uU3RhdHVzIiwgIi0yIik7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZSA9IHRhcmdldE5vZGUucXVlcnlTZWxlY3RvcihjdXJTaXRlLkZhdmljb25BZGRUbyk7CiAgICAgICAgICAgICAgICAgIC8vIOeJueauiuWkhOeQhkJJTkcKICAgICAgICAgICAgICAgICAgLy8gaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQklORykgY3VyTm9kZSA9IGN1ck5vZGUucXVlcnlTZWxlY3RvcigiaDIiKTsKICAgICAgICAgICAgICAgICAgLy9odHRwczovL2FwaS5ieWkucHcvZmF2aWNvbi8/dXJsPT8/Pz8g5LiN56iz5a6aCiAgICAgICAgICAgICAgICAgIC8vaHR0cDovLyIrZmF2aWNvblVybCsiL2Nkbi5pY28/ZGVmYXVsdGljb249aHR0cDovL3Nvei5pbS9mYXZpY29uLmljbyDkuI3nqLPlrpoKICAgICAgICAgICAgICAgICAgLy9odHRwczovL3d3dy54dHdpbmQuY29tL2FwaS9pbmRleC5waHA/dXJsPT8/Pz8g5oyC5LqG44CC44CC44CCCiAgICAgICAgICAgICAgICAgIC8vaHR0cHM6Ly9zdGF0aWNzLmRuc3BvZC5jbi9wcm94eV9mYXZpY29uL18vZmF2aWNvbj9kb21haW49c2luYS5jbgogICAgICAgICAgICAgICAgICAvL3d3dy5nb29nbGUuY29tL3MyL2Zhdmljb25zP2RvbWFpbj03NjQzNTAxNzcubG9mdGVyLmNvbQogICAgICAgICAgICAgICAgICAvL+WmguaenOWcsOWdgOS4jeato+ehru+8jOmCo+S5iOS4ouW8gwogICAgICAgICAgICAgICAgICBsZXQgaG9zdCA9IGZhdmljb25VcmwucmVwbGFjZSgvW14uXStcLihbXi5dKylcLihbXi5dKykvLCAiJDEuJDIiKTsKICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldE5vZGUucXVlcnlTZWxlY3RvcigiLkFDLWZhdmljb25UIikgPT09IG51bGwgJiYgaG9zdC5sZW5ndGggPiAzKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGluc05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKICAgICAgICAgICAgICAgICAgICAvLyBjdXJOb2RlID0gY3VyTm9kZS5jaGlsZHJlblswXSB8fCBjdXJOb2RlLmZpcnN0Q2hpbGQgOyAvLyBmaXJzdENoaWxk5a655piT6YGH5YiwdGV4dOWvueixoQogICAgICAgICAgICAgICAgICAgIGN1ck5vZGUuc2V0QXR0cmlidXRlKCJhY19mYXZpY29uU3RhdHVzIiwgIjEiKTsKICAgICAgICAgICAgICAgICAgICAvLyBjdXJOb2RlLmluc2VydEJlZm9yZShpbnNOb2RlLCBjdXJOb2RlLmZpcnN0Q2hpbGQpOwogICAgICAgICAgICAgICAgICAgIGluc05vZGUuY2xhc3NOYW1lID0gIkFDLWZhdmljb25UIjsKICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLnNldEF0dHJpYnV0ZSgicmVmZXJyZXJwb2xpY3kiLCAibm8tcmVmZXJyZXIiKTsKICAgICAgICAgICAgICAgICAgICBpbnNOb2RlLnN0eWxlID0gInBvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6MTt2ZXJ0aWNhbC1hbGlnbjpzdWI7aGVpZ2h0OjE2cHg7d2lkdGg6MTZweDttYXJnaW4tcmlnaHQ6NXB4O21hcmdpbi1ib3R0b206IDJweDt1c2VyLXNlbGVjdDpub25lOyI7CgogICAgICAgICAgICAgICAgICAgIGluc05vZGUuc3JjID0gImh0dHBzOi8vZmF2aWNvbi55YW5kZXgubmV0L2Zhdmljb24vdjIvIiArIChjdXJOb2RlLmhyZWYgfHwgaG9zdCk7IC8vIE1BUksgeWFuZGV45pSv5oyB6L+Z56eN5p+l6K+i6KeE5YiZCiAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5zZXRBdHRyaWJ1dGUoImZhdmljb25JRCIsICIwIik7CiAgICAgICAgICAgICAgICAgICAgaW5zTm9kZS5zZXRBdHRyaWJ1dGUoIm9uZHJhZ3N0YXJ0IiwgInJldHVybiBmYWxzZTsiKSAvLyDnpoHmraLmi5bliqjlm77niYct6YG/5YWN5ouW6ZSZ5LqGCiAgICAgICAgICAgICAgICAgICAgLy8gY3VyTm9kZS5pbm5lckhUTUwgPSBpbnNOb2RlLm91dGVySFRNTCArIGN1ck5vZGUuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgICAgIC8vIGN1ck5vZGUuaW5zZXJ0QWRqYWNlbnRIVE1MKCJhZnRlckVuZCIsIGluc05vZGUuaW5uZXJIVE1MKTsKICAgICAgICAgICAgICAgICAgICBsZXQgYmVmb3JlSW5kZXggPSAwOwogICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXROb2RlLmNoaWxkTm9kZXNbYmVmb3JlSW5kZXhdLmNsYXNzTmFtZSA9PT0gIkFDLUNvdW50ZXJUIikgewogICAgICAgICAgICAgICAgICAgICAgYmVmb3JlSW5kZXggPSAxOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0YXJnZXROb2RlLmluc2VydEJlZm9yZShpbnNOb2RlLCB0YXJnZXROb2RlLmNoaWxkTm9kZXNbYmVmb3JlSW5kZXhdKTsKICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKHhjdXIpIHsKICAgICAgICAgICAgICAgICAgICAgIGluc05vZGUub25sb2FkID0gZnVuY3Rpb24gKGVudikgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nTm9kZSA9IHhjdXIucXVlcnlTZWxlY3RvcigiLkFDLWZhdmljb25UIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoaW1nTm9kZSB8fCB7fSkubmF0dXJhbFdpZHRoIDwgMTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdOb2RlLnNldEF0dHJpYnV0ZSgib2xkLXNyYyIsIGltZ05vZGUuc3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdOb2RlLnNyYyA9IEFDQ29uZmlnLmRlZmF1bHRGYXZpY29uVXJsOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ05vZGUub25sb2FkID0gImphdmFzY3JpcHQ6dm9pZCgwKTsiOwogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9KSh0YXJnZXROb2RlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIGNoZWNrTm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCIpOwogICAgICAgICAgICBmb3IgKGxldCBmYU5vZGUgb2YgY2hlY2tOb2RlcykgewogICAgICAgICAgICAgIGxldCBmYXZpY29uTm9kZSA9IGZhTm9kZS5xdWVyeVNlbGVjdG9yKCIucmVzdWx0X19pY29uIGltZyIpOwogICAgICAgICAgICAgIGxldCBiZWZvcmVOb2RlID0gZmFOb2RlLnF1ZXJ5U2VsZWN0b3IoIi5yZXN1bHRfX3RpdGxlIGEiKTsKICAgICAgICAgICAgICBpZihmYXZpY29uTm9kZSAmJiBiZWZvcmVOb2RlKXsKICAgICAgICAgICAgICAgIGZhdmljb25Ob2RlLnN0eWxlID0gInZlcnRpY2FsLWFsaWduOm1pZGRsZTttYXJnaW4tcmlnaHQ6NXB4OyI7CiAgICAgICAgICAgICAgICBiZWZvcmVOb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGZhdmljb25Ob2RlLCBiZWZvcmVOb2RlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEluc2VydFNldHRpbmdNZW51KCkgewogICAgICAgICAgaWYgKChjdXJTaXRlLlNpdGVUeXBlSUQgIT09IFNpdGVUeXBlLk9USEVSUykgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI215dXNlciIpID09PSBudWxsKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgbGV0IHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN1LCAjZ2I+ZGl2PmRpdj5kaXYsICNiX2hlYWRlcj4jaWRfaCwgLnRvcC1iYXIgLnNvZ291LXNldC1ib3gsICNoZWFkZXJfd3JhcHBlciAuanMtaGwtYnV0dG9uLCBib2R5W2RvZ2VdICNoZWFkZXJfd3JhcHBlciAjaGVhZGVyIik7IC8vYmFpZHU7IGdvb2dsZTsgYmluZzsg5pCc54uXCiAgICAgICAgICAgICAgcGFyZW50LnN0eWxlID0gIndpZHRoOiBhdXRvOyI7CiAgICAgICAgICAgICAgbGV0IHVzZXJBZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgdXNlckFkaXYuaWQgPSAibXl1c2VyIjsKICAgICAgICAgICAgICB1c2VyQWRpdi5pbm5lckhUTUwgPSBgPGlucHV0IHR5cGU9J3N1Ym1pdCcgY2xhc3M9J215dXNlcmNvbmZpZycgdmFsdWU9JyR7QWxsRGF0YS5sYW4udXNlLm1lbnVfdGV4dH0nLz48c3BhbiBjbGFzcz0nYWMtbmV3dmVyc2lvbkRpc3BsYXknIHN0eWxlPSdiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7ZmxvYXQ6IGxlZnQ7aGVpZ2h0OiA4cHg7d2lkdGg6IDhweDtib3JkZXItcmFkaXVzOiA0cHg7ZGlzcGxheTokeyhDT05TVC5oYXNOZXdGdW5jTmVlZERpc3BsYXkgPyAidW5zZXQiIDogIm5vbmUiKX0nPiZuYnNwOzwvc3Bhbj5gOwogICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUodXNlckFkaXYsIHBhcmVudC5jaGlsZE5vZGVzWzBdKTsKICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjbXl1c2VyIC5teXVzZXJjb25maWciKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gQUN0b2dnbGVTZXR0aW5nRGlzcGxheShlKTsKICAgICAgICAgICAgICB9LCB0cnVlKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KCk7IC8vIOivu+WPluS4quS6uuiuvue9ruS/oeaBrwogICAgICAvKioKICAgICAgICogQHBhcmFtIGNhbGxiYWNrIOWbnuiwg+WHveaVsO+8jOmcgOimgei/lOWbnuaYr+WQpue7k+adn1RydWXjgIFGYWxzZeOAgeWQpuWImeebuOW9k+S6juWumuaXtuWZqAogICAgICAgKiBjYWxsYmFjayByZXR1cm46CiAgICAgICAqICB0cnVlID0g5YCS6K6h5pe2CiAgICAgICAqICBmYWxzZSA9IOiuoeaXtuWZqAogICAgICAgKiAgbm9uZSA9IOiuoeaXtuWZqAogICAgICAgKiBAcGFyYW0gcGVyaW9kIOWRqOacn++8jOWmgjoyMDBtcwogICAgICAgKiBAcGFyYW0gcnVuTm93IOeri+WNs+aJp+ihjAogICAgICAgKi8KICAgICAgZnVuY3Rpb24gUkFGSW50ZXJ2YWwoY2FsbGJhY2ssIHBlcmlvZCwgcnVuTm93KSB7CiAgICAgICAgLy8g5LiA56eSNjDmrKHvvIzlr7nlupQx56eSMTAwMG1zCiAgICAgICAgY29uc3QgbmVlZENvdW50ID0gcGVyaW9kIC8gMTAwMCAqIDYwOwogICAgICAgIGxldCB0aW1lcyA9IDA7IC8vIOW3sue7j+iuoeaVsOeahOaVsOmHjwoKICAgICAgICBpZihydW5Ob3cgPT09IHRydWUpeyAvLyDlr7nkuo7nq4vljbPmiafooYzlh73mlbDnmoTnq4vljbPliKTlrprvvIzlkKbliJnov5vooYwKICAgICAgICAgIGNvbnN0IHNob3VsZEZpbmlzaCA9IGNhbGxiYWNrKCk7CiAgICAgICAgICBpZihzaG91bGRGaW5pc2gpIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHN0ZXAoKSB7CiAgICAgICAgICBpZih0aW1lcyA8IG5lZWRDb3VudCl7CiAgICAgICAgICAgIC8vIOiuoeaVsOacque7k+adny3nu6fnu63orqHmlbAKICAgICAgICAgICAgdGltZXMrKzsKICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgLy8g6K6h5pWw57uT5p2fLeWBnOatouiuoeaVsO+8jOWIpOWumue7k+aenAogICAgICAgICAgICBjb25zdCBzaG91bGRGaW5pc2ggPSBjYWxsYmFjaygpIHx8IGZhbHNlOwogICAgICAgICAgICBpZighc2hvdWxkRmluaXNoKXsKICAgICAgICAgICAgICAvLyDov5Tlm57lgLzkuLpmYWxzZe+8jOmHjeWQr+iuoeaVsOWZqAogICAgICAgICAgICAgIHRpbWVzID0gMDsKICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCkKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgLy8g6L+U5Zue5YC85Li6dHJ1Ze+8jOe7k+adn+iuoeaVsOWZqAogICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gc2FmZUZ1bmN0aW9uKGZ1bmMpIHsKICAgICAgICB0cnkgewogICAgICAgICAgZnVuYygpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHNhZmVXYWl0RnVuYyhzZWxlY3RvciwgY2FsbGJhY2tGdW5jLCB0aW1lLCBub3RDbGVhcikgewogICAgICAgIHRpbWUgPSB0aW1lIHx8IDUwOwogICAgICAgIG5vdENsZWFyID0gbm90Q2xlYXIgfHwgZmFsc2U7CiAgICAgICAgbGV0IGRvQ2xlYXIgPSAhbm90Q2xlYXI7CiAgICAgICAgUkFGSW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKCh0eXBlb2YgKHNlbGVjdG9yKSA9PT0gInN0cmluZyIgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgIT0gbnVsbCkpIHsKICAgICAgICAgICAgY2FsbGJhY2tGdW5jKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpKTsKICAgICAgICAgICAgaWYgKGRvQ2xlYXIpIHJldHVybiB0cnVlOwogICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgKHNlbGVjdG9yKSA9PT0gImZ1bmN0aW9uIiAmJiAoc2VsZWN0b3IoKSAhPSBudWxsIHx8IChzZWxlY3RvcigpIHx8IFtdKS5sZW5ndGggPiAwKSkgewogICAgICAgICAgICBjYWxsYmFja0Z1bmMoc2VsZWN0b3IoKVswXSk7CiAgICAgICAgICAgIGlmIChkb0NsZWFyKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9LCB0aW1lLCB0cnVlKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gQUNfYWRkU3R5bGUoY3NzLCBjbGFzc05hbWUsIGFkZFRvVGFyZ2V0LCBpc1JlbG9hZCwgaW5pdFR5cGUpIHsgLy8g5re75YqgQ1NT5Luj56CB77yM5LiN6ICD6JmR5paH5pys6L295YWl5pe26Ze077yM5Y+q5omn6KGM5LiA5qyhLeaXoOiuuuaIkOWKn+S4juWQpu+8jOW4puaciWNsYXNzTmFtZQogICAgICAgIFJBRkludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8qKgogICAgICAgICAgICogYWRkVG9UYXJnZXTov5nph4zkuI3opoHkvb/nlKhoZWFk5qCH562+LGhlYWTmoIfnrb7nmoRjc3PkvJrlnKhodG1s6L295YWl5pe25Yqg6L2977yMCiAgICAgICAgICAgKiBodG1s5Yqg6L295ZCO5Ly85LmO5LiN5Lya5YaN5qyh5Yqg6L2977yMYm9keeS8muiHquWKqOWKoOi9vQogICAgICAgICAgICogKiovCiAgICAgICAgICBsZXQgYWRkVG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFkZFRvVGFyZ2V0KTsKICAgICAgICAgIGlmICh0eXBlb2YgKGFkZFRvVGFyZ2V0KSA9PT0gInVuZGVmaW5lZCIpCiAgICAgICAgICAgIGFkZFRvID0gKGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpOwogICAgICAgICAgaXNSZWxvYWQgPSBpc1JlbG9hZCB8fCBmYWxzZTsgLy8g6buY6K6k5piv6Z2e5Yqg6L295Z6LCiAgICAgICAgICBpbml0VHlwZSA9IGluaXRUeXBlIHx8ICJ0ZXh0L2NzcyI7CiAgICAgICAgICAvLyDlpoLmnpzmsqHmnInnm67moIfoioLngrko5YiZ55u05o6l5YqgKSB8fCDmnInnm67moIfoioLngrnkuJTmib7liLDkuoboioLngrko6L+b6KGM5paw5aKeKQogICAgICAgICAgaWYgKHR5cGVvZiAoYWRkVG9UYXJnZXQpID09PSAidW5kZWZpbmVkIiB8fCAodHlwZW9mIChhZGRUb1RhcmdldCkgIT0gInVuZGVmaW5lZCIgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhZGRUb1RhcmdldCkgIT0gbnVsbCkpIHsKICAgICAgICAgICAgLy8gY2xlYXJJbnRlcnZhbCh0b3V0KTsKICAgICAgICAgICAgLy8g5aaC5p6cdHJ1ZSDlvLrooYzopobnm5bvvIzkuI3nrqHmnInmsqHmnIktLeWFiOWIoOmZpAogICAgICAgICAgICAvLyDlpoLmnpxmYWxzZe+8jOS4jeimhueblu+8jOS9huaYr+WmguaenOacieeahOivne+8jOimgemAgOWHuu+8jOS4jeWtmOWcqOWImeaWsOWini0t5peg6ZyA5Yig6ZmkCiAgICAgICAgICAgIGlmIChpc1JlbG9hZCA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIHNhZmVSZW1vdmUoIi4iICsgY2xhc3NOYW1lKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChpc1JlbG9hZCA9PT0gZmFsc2UgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLiIgKyBjbGFzc05hbWUpICE9IG51bGwpIHsKICAgICAgICAgICAgICAvLyDoioLngrnlrZjlnKggJiYg5LiN5YeG5aSH6KaG55uWCiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOwogICAgICAgICAgICBpZiAoY2xhc3NOYW1lICE9IG51bGwpIGNzc05vZGUuY2xhc3NOYW1lID0gY2xhc3NOYW1lOwogICAgICAgICAgICBjc3NOb2RlLnNldEF0dHJpYnV0ZSgidHlwZSIsIGluaXRUeXBlKTsKICAgICAgICAgICAgY3NzTm9kZS5pbm5lckhUTUwgPSBjc3M7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgYWRkVG8uYXBwZW5kQ2hpbGQoY3NzTm9kZSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLm1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0sIDIwLCB0cnVlKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gc2FmZVJlbW92ZShjc3NTZWxlY3RvcikgewogICAgICAgIHNhZmVGdW5jdGlvbigoKSA9PiB7CiAgICAgICAgICBsZXQgcmVtb3ZlTm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNzc1NlbGVjdG9yKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVtb3ZlTm9kZXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIHJlbW92ZU5vZGVzW2ldLnJlbW92ZSgpOwogICAgICAgIH0pCiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGhpZGVOb2RlKG5vZGUpIHsKICAgICAgICBpZihub2RlLmhhc0F0dHJpYnV0ZSgnYWMtYWQtaGlkZScpKSByZXR1cm4KICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYWMtYWQtaGlkZScsICcxJykKICAgICAgICBub2RlLnN0eWxlID0gJ2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsnCiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHNhZmVSZW1vdmVfeHBhdGgoeHBhdGhTZWxlY3RvciwgaXNIaWRlPWZhbHNlKSB7CiAgICAgICAgc2FmZUZ1bmN0aW9uKCgpID0+IHsKICAgICAgICAgIGxldCByZW1vdmVOb2RlcyA9IGdldEFsbEVsZW1lbnRzKHhwYXRoU2VsZWN0b3IpOwogICAgICAgICAgaWYoaXNIaWRlKSB7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVtb3ZlTm9kZXMubGVuZ3RoOyBpKyspewogICAgICAgICAgICAgIGhpZGVOb2RlKHJlbW92ZU5vZGVzW2ldKQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbW92ZU5vZGVzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICByZW1vdmVOb2Rlc1tpXS5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGNoZWNrSVNCYWlkdU1haW4oKSB7IC8vIOmmlumhtT10cnVlO+mdnummlumhtT1mYWxzZQogICAgICAgIC8vIOWmguaenOaYr+eZvuW6piAmJiAg5rKh5pyJKOeZvuW6puaQnOe0oue7k+aenOeahOagh+W/ly1b5a2Y5ZyoXeeZvuW6pueahOWGheWuuSkgcmV0dXJuOwogICAgICAgIHJldHVybiAhKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFUgJiYgIShsb2NhdGlvbi5ocmVmLnJlcGxhY2UoLygmfFw/KSh3ZHx3b3JkKT0vLCAiIikgIT09IGxvY2F0aW9uLmhyZWYgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2NvbnRlbnRfbGVmdCIpIHx8CiAgICAgICAgICAgICgoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2t3IikgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2t3IikuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpKSB8fCAiIikgIT09ICIiKQogICAgICAgICkKICAgICAgfQoKICAgICAgLyoqCiAgICAgICAqIOajgOafpWRvY3VtZW5055qE5a2Q6IqC54K55piv5ZCm5ZCr5pyJ5YWD57SgCiAgICAgICAqIEBwYXJhbSBub2RlQ2xhc3Mg5b6F5qOA5p+l5YWD57SgCiAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUfEYKICAgICAgICovCiAgICAgIGZ1bmN0aW9uIGNoZWNrRG9jbWVudEhhc05vZGUobm9kZUNsYXNzKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoZG9jdW1lbnQuY2hpbGROb2Rlc1tpXS5kYXRhICYmIGRvY3VtZW50LmNoaWxkTm9kZXNbaV0uZGF0YS5pbmRleE9mKG5vZGVDbGFzcykgPiAwKQogICAgICAgICAgICByZXR1cm4ge3JlczogdHJ1ZSwgbm9kZTogZG9jdW1lbnQuY2hpbGROb2Rlc1tpXX07CiAgICAgICAgfQogICAgICAgIHJldHVybiB7cmVzOiBmYWxzZSwgbm9kZTogbnVsbH07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIEZTQmFpZHUoKSB7IC8vIHRoYW5rcyBmb3IgY29kZSBmcm9tIOa1rueUn0DmnKrmrYcgQHBhZ2UgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1UVy9zY3JpcHRzLzMxNjQyCiAgICAgICAgLy8gZGVidWcoIuWIneWni+WMlkZTQkFJRFUiKTsKCiAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIgPSB7CiAgICAgICAgICAvKioKICAgICAgICAgICAqIOWvvOWFpWNzc+WGheWuueS4uuOAkOaWh+acrOagvOW8j+OAke+8ge+8ge+8gQogICAgICAgICAgICogQHBhcmFtIGRhdGEgY3Nz5YaF5a65CiAgICAgICAgICAgKiBAcGFyYW0gdG9DbGFzc05hbWUg6aKE5pyf55qE57G75ZCNCiAgICAgICAgICAgKi8KICAgICAgICAgIGltcG9ydFN0eWxlOiBmdW5jdGlvbiAoZGF0YSwgdG9DbGFzc05hbWUsIHVzZU5vcm1hbENTUywgbXVzdExvYWQpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiAoZGF0YSkgPT09ICJ1bmRlZmluZWQiIHx8IGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgICAgICAvLyDov5nkuKrlsYXnhLblnKhWTeS4iuWHuumXrumimOS6hu+8jOW+iOWlh+aAqgogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkdNX2dldFJlc291cmNlVGV4dOiOt+WPluWGheWuueaVsOaNruW8guW4uCIpOwogICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIHVzZU5vcm1hbENTUyA9IHVzZU5vcm1hbENTUyB8fCBmYWxzZTsKICAgICAgICAgICAgbXVzdExvYWQgPSBtdXN0TG9hZCB8fCBmYWxzZTsKICAgICAgICAgICAgLy8g5pmu6YCa5rWP6KeI5Zmo5qih5byPLS3kvYbmmK/kvLzkuY7moLflvI/liqDovb3nmoTkvJjlhYjnuqfkvY7kuo5oZWFk5Lit55qEc3R5bGXkvJjlhYjnuqcKICAgICAgICAgICAgaWYgKCF1c2VOb3JtYWxDU1MgJiYgY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5EVUNLKSB7CiAgICAgICAgICAgICAgLy8g6YCa6L+HbXVzdOWPguaVsOadpeWIpOWumnN0eWxl5piv5ZCm5Yqg6L29CiAgICAgICAgICAgICAgLy8gZGF0YSA9IGRhdGEucmVwbGFjZSgvYmFpZHUuY29tI1wkIy9pZ20sICcnKTsKICAgICAgICAgICAgICBpZiAoZGF0YS5pbmRleE9mKCJodHRwIikgIT09IDApIGRhdGEgPSAiZGF0YTp0ZXh0L2Nzczt1dGYtOCwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEpOwogICAgICAgICAgICAgIHZhciB7cmVzLH0gPSBjaGVja0RvY21lbnRIYXNOb2RlKHRvQ2xhc3NOYW1lKTsKICAgICAgICAgICAgICBpZiAoIXJlcykgewogICAgICAgICAgICAgICAgbGV0IHBpID0gZG9jdW1lbnQuY3JlYXRlUHJvY2Vzc2luZ0luc3RydWN0aW9uKAogICAgICAgICAgICAgICAgICAieG1sLXN0eWxlc2hlZXQiLAogICAgICAgICAgICAgICAgICBgdHlwZT0idGV4dC9jc3MiIG11c3Q9IiR7bXVzdExvYWR9IiBjbGFzcz0iJHt0b0NsYXNzTmFtZX0iIGhyZWY9IiR7ZGF0YX0iYAogICAgICAgICAgICAgICAgKTsgLy8g5rOo5oSP5b+F6aG76KaB5Y+M5byV5Y+3CiAgICAgICAgICAgICAgICBkb2N1bWVudC5pbnNlcnRCZWZvcmUocGksIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8qICoqKioqKioqKirlpJrph43moLflvI8t5YW85a65ZWRnZSAmJiDpu5HlpJzohJrmnKwqKioqKioqKioqKiogKi8KICAgICAgICAgICAgICBBQ19hZGRTdHlsZShkYXRhLCB0b0NsYXNzTmFtZSwgImhlYWQiLCBmYWxzZSwgInRleHQvY3NzIik7CiAgICAgICAgICAgICAgLyogKioqKioqKioqKuWkmumHjeagt+W8jy3lhbzlrrllZGdlICYmIOm7keWknOiEmuacrCoqKioqKioqKioqKiAqLwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgLy/liqDovb3mma7pgJrmoLflvI8KICAgICAgICAgIGxvYWRDb21tb25TdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLmxvYWRTdHlsZShDT05TVC51c2VJdGVtLm5hbWUgKyAiQ29tbW9uU3R5bGUiLCBDT05TVC51c2VJdGVtLm5hbWUgKyAiQ29tbW9uU3R5bGUiKTsKICAgICAgICAgIH0sCiAgICAgICAgICBsb2FkQmFpZHVMaXRlU3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFN0eWxlKCJiYWlkdUxpdGVTdHlsZSIsICJiYWlkdUxpdGVTdHlsZSIsIG51bGwsIGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFBsYWluVG9DU1MoImJhaWR1TGl0ZVN0eWxlIik7CiAgICAgICAgICB9LAogICAgICAgICAgbG9hZFN0eWxlOiBhc3luYyBmdW5jdGlvbiAoc3R5bGVOYW1lLCBpbnNDbGFzc05hbWUsIHNldFVybCwgdXNlTm9ybWFsQ1NTLCBtdXN0TG9hZCkgewogICAgICAgICAgICAvLyDlhajpg6jph4fnlKh0ZXh0L2Nzc+eahOWGheWuueadpei9veWFpQogICAgICAgICAgICAvLyDlpoLmnpzmmK9kZWJ1Z+aooeW8j+OAguaIluiAheaYr2dt5qih5byPCiAgICAgICAgICAgIGlmIChpc0xvY2FsRGVidWcpIHsKICAgICAgICAgICAgICBkZWJ1Zygi5pys5ZywLeWKoOi9veagt+W8j++8miIgKyBpbnNDbGFzc05hbWUpOwogICAgICAgICAgICAgIHNldFVybCA9IHNldFVybCB8fCAiaHR0cDovLzEyNy4wLjAuMS8iICsgc3R5bGVOYW1lICsgIi5jc3MiOwogICAgICAgICAgICAgIHRoaXMuaW1wb3J0U3R5bGUoc2V0VXJsLCAiQUMtIiArIGluc0NsYXNzTmFtZSwgdXNlTm9ybWFsQ1NTLCBtdXN0TG9hZCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNOZXdHTSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIC8vIOS7heeUqOS6jkdyZWFzZU1vbmtleTQuMCsKICAgICAgICAgICAgICBkZWJ1Zygi54m55q6K5qih5byPLeWKoOi9veagt+W8j++8miIgKyBpbnNDbGFzc05hbWUpOwogICAgICAgICAgICAgIHNldFVybCA9IHNldFVybCB8fCAiaHR0cHM6Ly9zeW5jLnR1amlkdS5jb20vbmV3Y3NzLyIgKyBzdHlsZU5hbWUgKyAiLmNzcyI7CiAgICAgICAgICAgICAgdGhpcy5pbXBvcnRTdHlsZShzZXRVcmwsICJBQy0iICsgaW5zQ2xhc3NOYW1lLCB1c2VOb3JtYWxDU1MsIG11c3RMb2FkKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBkZWJ1Zygi5Yqg6L295qC35byP77yaIiArIGluc0NsYXNzTmFtZSk7CiAgICAgICAgICAgICAgLy8gVGFtcGVyTW9ua2V5ICsgR3JlYXNlTW9ua2V5IDwgNC4wICsgVmlvbGVudE1vbmtleSAoNC4wR3JlYXNlTW9ua2V55LiN5pSv5oyBR2V0UmVzb3VyY2Xmlrnms5UpCiAgICAgICAgICAgICAgdGhpcy5pbXBvcnRTdHlsZShhd2FpdCBHTV9nZXRSZXNvdXJjZVRleHQoc3R5bGVOYW1lKSwgIkFDLSIgKyBpbnNDbGFzc05hbWUsIHVzZU5vcm1hbENTUywgbXVzdExvYWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgLy/liqDovb3miqTnnLzmqKHlvI/moLflvI8KICAgICAgICAgIGxvYWRIdVlhblN0eWxlOiBmdW5jdGlvbiAoY29sb3IpIHsKICAgICAgICAgICAgbGV0IHN0eWxlID0gImJvZHlbYmFpZHVdLCN3cmFwcGVyICNoZWFkLCN3cmFwcGVyICNzX3RhYixmb3JtLmZtIC5zX2lwdF93ci5iZ3tiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9I2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AsI2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5yZXN1bHQsI2NvbnRhaW5lciAjcnMsI2NvbnRhaW5lciAjY29udGVudF9yaWdodHtiYWNrZ3JvdW5kLWNvbG9yOiNhYWE7Ym9yZGVyOjFweCBkb3VibGUgI2EyZDdkNDtib3JkZXItcmFkaXVzOjB9I2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3A6aG92ZXIsI2NvbnRhaW5lciAjY29udGVudF9sZWZ0IC5yZXN1bHQ6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojY2NjIWltcG9ydGFudH0jY29udGFpbmVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoMywjY29udGFpbmVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIGgzLCNjb250YWluZXIgI3JzIC50dHtiYWNrZ3JvdW5kLWNvbG9yOiNiYmJ9Lm5hX2NudCAubndzX2l0bSwubndzX2l0bWIsI2JfY29udGVudCAjYl9yZXN1bHRzIGxpLGJvZHkgI2JfaGVhZGVye2JhY2tncm91bmQtY29sb3I6I2FhYTtib3JkZXI6MXB4IGRvdWJsZSAjYTJkN2Q0O2JvcmRlci1yYWRpdXM6MH0jYl9jb250ZW50ICNiX3Jlc3VsdHMgbGk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojY2NjIWltcG9ydGFudH0jYl9jb250ZW50ICNiX3Jlc3VsdHMgbGkgaDJ7YmFja2dyb3VuZC1jb2xvcjojYmJifSNyc28gLmcsLmJrV01nZD4uZywuYmtXTWdkIGctaW5uZXItY2FyZCwjcmhzY29sICNyaHMsI3Joc2NvbCAjcmhzIC5nPmRpdiwuYzJ4elRiIC5nLC5ydVRjSWQgLmcsLmZtMDZJZiAuZywuY1VuUUtlIC5nLC5IYW5RbWYgLmd7YmFja2dyb3VuZC1jb2xvcjojYWFhO2JvcmRlcjoxcHggZG91YmxlICNhMmQ3ZDQ7Ym9yZGVyLXJhZGl1czowfSNyc28gLmc6aG92ZXIsLmJrV01nZD4uZzpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNjY2MhaW1wb3J0YW50fS5ia1dNZ2QgLmcgZGl2LnIsI3JzbyAuZyBoM3tiYWNrZ3JvdW5kLWNvbG9yOiNiYmJ9IjsKICAgICAgICAgICAgaWYgKEFDQ29uZmlnLmlzVXNlckNvbG9yRW5hYmxlKSB7CiAgICAgICAgICAgICAgY29sb3IgPSBjb2xvciB8fCBBQ0NvbmZpZy5kZWZhdWx0SHVZYW5Db2xvciB8fCAiI0ZGRkZGRiI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29sb3IgPSBjb2xvciB8fCAiI0ZGRkZGRiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNvbG9yLmluZGV4T2YoIiMiKSAhPT0gMCB8fCBjb2xvci5sZW5ndGggPCA3KSByZXR1cm47CiAgICAgICAgICAgIGlmIChpc05ld0dNID09PSBmYWxzZSkgewogICAgICAgICAgICAgIHN0eWxlID0gR01fZ2V0UmVzb3VyY2VUZXh0KCJNYWluSHVZYW5TdHlsZSIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0eWxlID0gc3R5bGUKICAgICAgICAgICAgLnJlcGxhY2UoLyNhYWEoYSopL2lnbSwgY29sb3IpCiAgICAgICAgICAgIC5yZXBsYWNlKC8jYmJiKGIqKS9pZ20sIHRoaXMuTGlnaHRlcihjb2xvciwgLTQwKSkKICAgICAgICAgICAgLnJlcGxhY2UoLyNjY2MoYyopL2lnbSwgdGhpcy5MaWdodGVyKGNvbG9yLCA0NSkpOwogICAgICAgICAgICBBQ19hZGRTdHlsZShzdHlsZSwgIkFDLSIgKyBDT05TVC51c2VJdGVtLm5hbWUgKyAiSHVZYW5TdHlsZSIgKyAoaXNOZXdHTSA/ICIiIDogIi1GaWxlIiksICJoZWFkIiwgdHJ1ZSk7IC8vIOmcgOimgeS/ruaUueeahO+8jOaJgOS7peS4unRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBjbGlwMjU1OiBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgaWYgKHZhbHVlID4gMjU1KSByZXR1cm4gMjU1OwogICAgICAgICAgICBpZiAodmFsdWUgPCAwKSByZXR1cm4gMDsKICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgfSwKICAgICAgICAgIExpZ2h0ZXI6IGZ1bmN0aW9uIChvcmlSR0IsIGRlbHRhWSkgewogICAgICAgICAgICAvLyDmjInmr5TkvovnvKnmlL4gKyAxL2RlbHRhWQogICAgICAgICAgICAvLyBIRVggMiBSR0IKICAgICAgICAgICAgbGV0IHJnYiA9IG9yaVJHQi5yZXBsYWNlKCIjIiwgIiIpOwogICAgICAgICAgICBsZXQgUiA9IHBhcnNlSW50KCIweCIgKyByZ2Iuc3Vic3RyKDAsIDIpKTsKICAgICAgICAgICAgbGV0IEcgPSBwYXJzZUludCgiMHgiICsgcmdiLnN1YnN0cigyLCAyKSk7CiAgICAgICAgICAgIGxldCBCID0gcGFyc2VJbnQoIjB4IiArIHJnYi5zdWJzdHIoNCwgMikpOwogICAgICAgICAgICAvLyBSR0IgMiBZVVYKICAgICAgICAgICAgbGV0IFkgPSAoKDY2ICogUiArIDEyOSAqIEcgKyAyNSAqIEIgKyAxMjgpID4+IDgpICsgMTY7CiAgICAgICAgICAgIGxldCBVID0gKCgtMzggKiBSIC0gNzQgKiBHICsgMTEyICogQiArIDEyOCkgPj4gOCkgKyAxMjg7CiAgICAgICAgICAgIGxldCBWID0gKCgxMTIgKiBSIC0gOTQgKiBHIC0gMTggKiBCICsgMTI4KSA+PiA4KSArIDEyODsKICAgICAgICAgICAgWSA9IFkgKiAoMSArIDEuMCAvIGRlbHRhWSk7Ly8g5o+Q6auY5Lqu5bqmCiAgICAgICAgICAgIC8vIFlVViAyIFJHQgogICAgICAgICAgICBSID0gdGhpcy5jbGlwMjU1KCgyOTggKiAoWSAtIDE2KSArIDQwOSAqIChWIC0gMTI4KSArIDEyOCkgPj4gOCk7CiAgICAgICAgICAgIEcgPSB0aGlzLmNsaXAyNTUoKDI5OCAqIChZIC0gMTYpIC0gMTAwICogKFUgLSAxMjgpIC0gMjA4ICogKFYgLSAxMjgpICsgMTI4KSA+PiA4KTsKICAgICAgICAgICAgQiA9IHRoaXMuY2xpcDI1NSgoMjk4ICogKFkgLSAxNikgKyA1MTYgKiAoVSAtIDEyOCkgKyAxMjgpID4+IDgpOwogICAgICAgICAgICByZXR1cm4gIiMiICsgKChSIDw8IDE2KSArIChHIDw8IDgpICsgQikudG9TdHJpbmcoMTYpOwogICAgICAgICAgfSwKICAgICAgICAgIC8v5Yqg6L295Y2V6aG15qC35byPCiAgICAgICAgICBsb2FkT25lUGFnZVN0eWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMubG9hZFN0eWxlKENPTlNULnVzZUl0ZW0ubmFtZSArICJPbmVQYWdlU3R5bGUiLCBDT05TVC51c2VJdGVtLm5hbWUgKyAiT25lUGFnZVN0eWxlIik7CiAgICAgICAgICB9LAogICAgICAgICAgLy/liqDovb3lj4zpobXmoLflvI8KICAgICAgICAgIGxvYWRUd29QYWdlU3R5bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5sb2FkU3R5bGUoQ09OU1QudXNlSXRlbS5uYW1lICsgIlR3b1BhZ2VTdHlsZSIsIENPTlNULnVzZUl0ZW0ubmFtZSArICJUd29QYWdlU3R5bGUiKTsKICAgICAgICAgICAgbGV0IGNzc0hlYWQgPSAiIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQkFJRFUgfHwgY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5NQkFJRFUpIGNzc0hlYWQgPSAiI2NvbnRhaW5lciAjY29udGVudF9sZWZ0LCBib2R5W25ld3NdICNjb250YWluZXIgI2NvbnRlbnRfbGVmdD5kaXY6bm90KFtjbGFzc10pOm5vdChbaWRdKSI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkdPT0dMRSkgQ09OU1QuaXNHb29nbGVTcGVjaWFsID8gY3NzSGVhZCA9ICIuc3JnLCAjcnNvIiA6IGNzc0hlYWQgPSAiLnNyZywgI3Jzbz5kaXY6bm90KC5nKSI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJJTkcpIGNzc0hlYWQgPSAiI2JfY29udGVudCAjYl9yZXN1bHRzIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuU09HT1UpIGNzc0hlYWQgPSAiI21haW4gLnJlc3VsdHMiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5EVUNLKSBjc3NIZWFkID0gIiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluICNsaW5rcyI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRPR0UpIGNzc0hlYWQgPSAiI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzIjsKICAgICAgICAgICAgQUNfYWRkU3R5bGUoY3NzSGVhZCArICJ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgbWlubWF4KDUwJSwxZnIpKTtncmlkLXRlbXBsYXRlLWFyZWFzOid4bWFpbiB4bWFpbic7Z3JpZC1jb2x1bW4tZ2FwOiAxcHg7fS5BQy5zcC1zZXBhcmF0b3J7Z3JpZC1jb2x1bW4tc3RhcnQ6IDE7Z3JpZC1jb2x1bW4tZW5kOiB4bWFpbi1lbmQ7fSIsCiAgICAgICAgICAgICAgIkFDLVR3b1BhZ2VFeFN0eWxlIiwgImhlYWQiKTsKICAgICAgICAgIH0sCiAgICAgICAgICAvLyDliqDovb3kuInliJfmoLflvI8KICAgICAgICAgIGxvYWRUaHJlZVBhZ2VTdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgY3NzSGVhZCA9ICIiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CQUlEVSB8fCBjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLk1CQUlEVSkgY3NzSGVhZCA9ICIjY29udGFpbmVyICNjb250ZW50X2xlZnQsIGJvZHlbbmV3c10gI2NvbnRhaW5lciAjY29udGVudF9sZWZ0PmRpdjpub3QoW2NsYXNzXSk6bm90KFtpZF0pIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFKSBDT05TVC5pc0dvb2dsZVNwZWNpYWwgPyBjc3NIZWFkID0gIi5zcmcsICNyc28iIDogY3NzSGVhZCA9ICIuc3JnLCAjcnNvPmRpdjpub3QoLmcpIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQklORykgY3NzSGVhZCA9ICIjYl9jb250ZW50ICNiX3Jlc3VsdHMiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5TT0dPVSkgY3NzSGVhZCA9ICIjbWFpbiAucmVzdWx0cyI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRVQ0spIGNzc0hlYWQgPSAiI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuRE9HRSkgY3NzSGVhZCA9ICIjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbiAjbGlua3MiOwogICAgICAgICAgICBBQ19hZGRTdHlsZShjc3NIZWFkICsgIntncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCBtaW5tYXgoMzMuMyUsMWZyKSk7Z3JpZC10ZW1wbGF0ZS1hcmVhczoneG1haW4geG1haW4geG1haW4nO2dyaWQtY29sdW1uLWdhcDogMTBweDt9IiwKICAgICAgICAgICAgICAiQUMtVGhyZWVQYWdlRXhTdHlsZSIsICJoZWFkIik7CiAgICAgICAgICB9LAogICAgICAgICAgLy8g5Yqg6L295Zub5YiX5qC35byPCiAgICAgICAgICBsb2FkRm91clBhZ2VTdHlsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgY3NzSGVhZCA9ICIiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5CQUlEVSB8fCBjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLk1CQUlEVSkgY3NzSGVhZCA9ICIjY29udGFpbmVyICNjb250ZW50X2xlZnQsIGJvZHlbbmV3c10gI2NvbnRhaW5lciAjY29udGVudF9sZWZ0PmRpdjpub3QoW2NsYXNzXSk6bm90KFtpZF0pIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuR09PR0xFKSBDT05TVC5pc0dvb2dsZVNwZWNpYWwgPyBjc3NIZWFkID0gIi5zcmcsICNyc28iIDogY3NzSGVhZCA9ICIuc3JnLCAjcnNvPmRpdjpub3QoLmcpIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuQklORykgY3NzSGVhZCA9ICIjYl9jb250ZW50ICNiX3Jlc3VsdHMiOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5TT0dPVSkgY3NzSGVhZCA9ICIjbWFpbiAucmVzdWx0cyI7CiAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkRPR0UpIGNzc0hlYWQgPSAiI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzIjsKICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCA9PT0gU2l0ZVR5cGUuRE9HRSkgY3NzSGVhZCA9ICIjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbiAjbGlua3MiOwogICAgICAgICAgICBBQ19hZGRTdHlsZShjc3NIZWFkICsgIntncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCg0LCBtaW5tYXgoMjUlLDFmcikpO2dyaWQtdGVtcGxhdGUtYXJlYXM6J3htYWluIHhtYWluIHhtYWluIHhtYWluJztncmlkLWNvbHVtbi1nYXA6IDFweDt9IiwKICAgICAgICAgICAgICAiQUMtRm91clBhZ2VFeFN0eWxlIiwgImhlYWQiKTsKICAgICAgICAgIH0sCiAgICAgICAgICBsb2FkUGxhaW5Ub0NTUzogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3VtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBsZXQgY3VyTm9kZSA9IGRvY3VtZW50LmNoaWxkTm9kZXNbaV07CiAgICAgICAgICAgICAgaWYgKGN1ck5vZGUuZGVsKSBjdXJOb2RlLnJlbW92ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNhZmVSZW1vdmUoInN0eWxlW2NsYXNzKj0nQUMnXVtkZWw9JzEnXSIpOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIOemgeatoueLrOeri+eahOagt+W8j+WKoOi9vQogICAgICAgICAgbG9hZENTU1RvUGxhaW46IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgbGV0IGN1ck5vZGUgPSBkb2N1bWVudC5jaGlsZE5vZGVzW2ldOwogICAgICAgICAgICAgIC8vIOWmguaenOaYr+WtmOWcqGNzc++8jCDkuJTpnZ7lv4XpobvmlbDmja4KICAgICAgICAgICAgICBpZiAoY3VyTm9kZS50YXJnZXQgPT09ICJ4bWwtc3R5bGVzaGVldCIgJiYgY3VyTm9kZS5kYXRhLmluZGV4T2YoIm11c3Q9XCJ0cnVlIikgPCAwKSB7CiAgICAgICAgICAgICAgICBjdXJOb2RlLmRhdGEgPSAiIjsKICAgICAgICAgICAgICAgIGN1ck5vZGUuZGVsID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAvLyDlr7nkuo5lZGdl5ZKMc2FmYXJp6YO954m55q6K5aSE55CG5LiA5LiL5ZCnCiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImVkZ2UiKSA+IDAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoInNhZmFyaSIpID4gMCkgewogICAgICAgICAgICAgICAgICBjdXJOb2RlLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGluaXQoKSB7CiAgICAgICAgICAgIENvbnRyb2xNYW5hZ2VyLmluaXQoKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHZhciBDb250cm9sTWFuYWdlciA9IHsKICAgICAgICAgIC8v5bGF5Lit5pi+56S6IC0tLSDlv4XpobvmmK/nmb7luqblkozosLfmrYznmoTmkJzntKLnu5PmnpzpobXpnaLvvIzlhbbku5bpobXpnaLkuI3og73liqDovb3nmoQtLeW3sue7j+mAmui/h+iEmuacrGluY2x1ZGXmoIfnrb7pmZDliLbkuobkuIDpg6jliIYKICAgICAgICAgIGNlbnRlckRpc3BsYXk6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8g5aaC5p6c5piv55m+5bqmICYmICgo5Zyw5Z2A5pu/5o2iLT7ljIXlkKt3ZOWFs+mUruivjVvmm7/mjaLkuYvlkI7kuI3nrYkt5piv55m+5bqm57uT5p6c6aG16Z2iXSkgfHwg5pyJ5Y+z6L655qCPLeiCr+WumuaYr+eZvuW6puaQnOe0oue7k+aenOmhtSB8fCB2YWx1ZeS4reWtmOWcqOaQnOe0ouWGheWuuSkgcmV0dXJuOwogICAgICAgICAgICBpZiAoIWNoZWNrSVNCYWlkdU1haW4oKSkgewogICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRDU1NUb1BsYWluKCk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIEFDX2FkZFN0eWxlKCIubWluaWRpdiAjbG9nbyBpbWd7d2lkdGg6IDEwMHB4O2hlaWdodDogdW5zZXQ7bWFyZ2luLXRvcDogMC4zcmVtO30iLCAiQUMtc3R5bGUtbG9nbyIsICJoZWFkIik7CiAgICAgICAgICAgIGxldCByZXN1bHQgPSBwYXJzZUludChDT05TVC51c2VJdGVtLkFkc1N0eWxlTW9kZSB8fCAtMSk7CiAgICAgICAgICAgIGlmIChhY0Nzc0xvYWRGbGFnID09PSBmYWxzZSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuQUNFeHRlbnNpb24iKSA9PT0gbnVsbCkgewogICAgICAgICAgICAgIGRlYnVnKCJpbuagt+W8j+WNs+WwhuWKoOi9vToiICsgcmVzdWx0KTsKICAgICAgICAgICAgICBsZXQgZXhwYW5kU3R5bGUgPSAiI3dyYXBwZXIgI3JzLCAjd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQsICN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVye21pbi13aWR0aDo2NzBweDt9LmMtc3BhbjE4e3dpZHRoOjc4JSFpbXBvcnRhbnQ7bWluLXdpZHRoOjU1MHB4O30uYy1zcGFuMjR7d2lkdGg6IGF1dG8haW1wb3J0YW50O30iOwogICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IDEpIHsKICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKGV4cGFuZFN0eWxlLCAiQUMtU3R5bGUtZXhwYW5kIiwgImhlYWQiKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRDb21tb25TdHlsZSgpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSAyKSB7Ly/ljZXpobXlsYXkuK0KICAgICAgICAgICAgICAgIEFDX2FkZFN0eWxlKGV4cGFuZFN0eWxlLCAiQUMtU3R5bGUtZXhwYW5kIiwgImhlYWQiKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRDb21tb25TdHlsZSgpOwogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZE9uZVBhZ2VTdHlsZSgpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSAzKSB7IC8v5Y+M6aG15bGF5LitCiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ29tbW9uU3R5bGUoKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRUd29QYWdlU3R5bGUoKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gNCkgeyAvLyDkuInliJcKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRDb21tb25TdHlsZSgpOwogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFR3b1BhZ2VTdHlsZSgpOwogICAgICAgICAgICAgICAgQ09OU1QuU3R5bGVNYW5nZXIubG9hZFRocmVlUGFnZVN0eWxlKCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IDUpIHsgLy8g5Zub5YiXCiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQ29tbW9uU3R5bGUoKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRUd29QYWdlU3R5bGUoKTsKICAgICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRGb3VyUGFnZVN0eWxlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGFjQ3NzTG9hZEZsYWcgPSB0cnVlOwogICAgICAgICAgICAgIGRlYnVnKCJpbuagt+W8j+i/kOihjOe7k+adnyIpOwogICAgICAgICAgICAgIGlmIChjdXJTaXRlLlNpdGVUeXBlSUQgPT09IFNpdGVUeXBlLkJBSURVICYmIEFDQ29uZmlnLlN0eWxlX0JhaWR1TGl0ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgQUNfYWRkU3R5bGUoR01fZ2V0UmVzb3VyY2VUZXh0KCJiYWlkdUxpdGVTdHlsZSIpLCAiQUMtYmFpZHVMaXRlU3R5bGUiLCAiaGVhZCIpCiAgICAgICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkQmFpZHVMaXRlU3R5bGUoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuQkFJRFUgJiYgY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5CQUlEVV9YVUVTSFUgJiYgY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5HT09HTEUgJiYgY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5CSU5HICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuU09HT1UgJiYgY3VyU2l0ZS5TaXRlVHlwZUlEICE9PSBTaXRlVHlwZS5EVUNLICYmIGN1clNpdGUuU2l0ZVR5cGVJRCAhPT0gU2l0ZVR5cGUuRE9HRSkgcmV0dXJuOwoKICAgICAgICAgICAgLy8g5aaC5p6c5piv6LC35q2MICYmICjlnLDlnYDmm7/mjaItPuaYr+iwt+atjOWbvuWDj+mhtemdoiB8fCDmmK/lnLDlm77pobXpnaIpW+abv+aNouimgeWPmF0gcmV0dXJuOwogICAgICAgICAgICBpZiAoY3VyU2l0ZS5TaXRlVHlwZUlEID09PSBTaXRlVHlwZS5HT09HTEUgJiYgbG9jYXRpb24uaHJlZi5yZXBsYWNlKC90Ym09KGlzY2h8bGNsfHNob3B8ZmxtKS8sICIiKSAhPT0gbG9jYXRpb24uaHJlZikgewogICAgICAgICAgICAgIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRDU1NUb1BsYWluKCk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8qKuaKpOecvFN0eWxl5pyA5ZCO6L295YWlKiovCiAgICAgICAgICAgIGlmIChDT05TVC51c2VJdGVtLkh1WWFuTW9kZSA9PT0gdHJ1ZSB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJzdHlsZVtjbGFzcyo9J2RhcmtyZWFkZXInXSIpICE9IG51bGwpIENPTlNULlN0eWxlTWFuZ2VyLmxvYWRIdVlhblN0eWxlKCk7CgogICAgICAgICAgICBDT05TVC5TdHlsZU1hbmdlci5sb2FkUGxhaW5Ub0NTUygpOwogICAgICAgICAgfSwKICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKENPTlNULmlzR29vZ2xlSW1hZ2VVcmwpIHJldHVybjsKICAgICAgICAgICAgdGhpcy5jZW50ZXJEaXNwbGF5KCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICAvLyBkZWJ1Zygi6LCD55So5Yqg6L296Ieq5a6a5LmJY3NzIik7CiAgICAgICAgQ29udHJvbE1hbmFnZXIuaW5pdCgpOwogICAgICAgIHJldHVybiBDT05TVC5TdHlsZU1hbmdlcjsKICAgICAgfQogICAgfQogIH0pKCk7Cn0oKTsK","resources":[{"meta":{"name":"baiduCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/baiduCommonStyle.css?t=24.26","ts":1638677801117,"mimetype":"text/css"},"source":"LyoqU3RvcmUgQmFpZHVDb21tb25TdHlsZSoqLw0KaWZyYW1lOm5vdChbc3JjKj0nY2hyb21lJ10pLA0KLnJlc190b3BfYmFubmVyICNmb290LA0KI3BhZ2UgLmZrLA0KI2hlYWQgLmhlYWRCbG9jaywNCiNyc190b3BfbmV3LA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD50YWJsZSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtcmVjb21tZW5kLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAubGVmdEJsb2NrLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucnJlY29tLWJ0bi1wYXJlbnQsDQojZGVtbywNCiN3cmFwcGVyICNnb3RvUGFnZSwNCmJvZHk+ZGl2LnJlc3VsdC1vcCwNCi5ycmVjb20tY29udGFpbmVyLA0KLmNodW53YW4td3JhcHBlcnsNCiAgICBkaXNwbGF5OiBub25lIWltcG9ydGFudDsNCn0NCmJvZHlbYmFpZHVdIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1Ow0KICAgIHRyYW5zaXRpb246IGFsbCAxLjVzOw0KfQ0KI2FsYV9pbWdfcmVzdWx0c3sNCiAgICBvdmVyZmxvdzpoaWRkZW47DQp9DQpib2R5IGEsDQpib2R5IGEgZW0sDQojdSBhICwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYSBlbSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhIGVtIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQoNCmJvZHkgYTpob3ZlciwNCmJvZHkgYTpob3ZlciBlbXsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQojd3JhcHBlciAjc190YWIgew0KICAgIGJvcmRlci1ib3R0b206ICNlMGUwZTAgMXB4IHNvbGlkOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7DQp9DQpib2R5ICNoZWFkew0KICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQ4LCAyNDgsIDI0OCwgMC40KTsNCiAgICBib3JkZXItYm90dG9tOiBub25lOw0KICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KQ0KfQ0KZm9ybS5mbSB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogdW5zZXQ7DQp9DQpmb3JtLmZtIC5iZHN1ZyBsaSB7DQogICAgd2lkdGg6IGF1dG87DQogICAgY29sb3I6ICMwMDA7DQogICAgZm9udDogMTVweCBhcmlhbDsNCiAgICBsaW5lLWhlaWdodDogMjZweDsNCn0NCmZvcm0uZm0gLnNfaXB0X3dyLmJnew0KICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgd2lkdGg6IDY2JTsNCiAgICBtaW4td2lkdGg6IDU3MHB4Ow0KfQ0KI2NvbnRlbnRfbGVmdCAubmV3LXBtZCAuYy1zcGFuOSwNCiNjb250ZW50X2xlZnQgLm5ldy1wbWQgLmMtc3BhbjEwew0KICAgIHdpZHRoOiB1bnNldDsNCiAgICBmbG9hdDogdW5zZXQ7DQp9DQovKioqZml4IDJrKyBwcm9ibGVtKioqLw0KI2hlYWQgLmhlYWRfd3JhcHBlcnsNCiAgICB3aWR0aDogdW5zZXQ7IC8qZWRpdDogZml4IGJhaWR1IGJhbm5lciBwb3NpdGlvbiovDQp9DQpmb3JtLmZtIC5zX2J0biB7DQogICAgYmFja2dyb3VuZDogIzM0NzZkMjsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzM0NzZkMjsNCn0NCmZvcm0uZm0gLnNfYnRuOmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kOiAjNEY3RmJGOw0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMzQ3NmQyOw0KfQ0KI3dyYXBwZXIgI3NfdGFiIGIgew0KICAgIGNvbG9yOiAjMzQ3NmQyOw0KICAgIGJvcmRlci1ib3R0b206IDNweCAjMzQ3NmQyIHNvbGlkOw0KfQ0KDQojd3JhcHBlciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLnNlYXJjaF90b29sX2NvbnRlciwNCiN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAubnVtcyB7DQogICAgd2lkdGg6IDYzMHB4Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCB7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9ib3R0b21Ub3RvcDsNCiAgICAtd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjogLjJzOw0KICAgIC13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsNCn0NCiNoZWFkIC5oZWFkX3dyYXBwZXJ7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9sZWZ0VG9yaWdodDsNCiAgICAtd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjogLjJzOw0KICAgIC13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1vdXQ7DQp9DQoNCiN3cmFwcGVyICNycywNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQ+LmMtY29udGFpbmVyIHsNCiAgICB3aWR0aDogNjcwcHg7DQogICAgcGFkZGluZzogMHB4IDIwcHggMTVweDsNCiAgICBtYXJnaW4tdG9wOiAwcHg7DQogICAgbWFyZ2luLWJvdHRvbTogMzBweDsNCiAgICBib3JkZXItcmFkaXVzOiAwOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuMSk7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD4uYy1jb250YWluZXI6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5yZXN1bHQ6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5jLWNvbnRhaW5lcjpob3ZlciBhcnRpY2xlew0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsLjMpOw0KICAgIGJveC1zaGFkb3c6IDAgMCAxcHggZ3JleTsNCiAgICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMCAxcHggZ3JleTsNCiAgICAtbW96LWJveC1zaGFkb3c6IDAgMCAxcHggZ3JheTsNCn0NCiN3cmFwcGVyICNyc1thYy1uZWVkaGlkZV0sDQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5yZXN1bHRbYWMtbmVlZGhpZGVdLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD4uYy1jb250YWluZXJbYWMtbmVlZGhpZGVdew0KICAgIHBhZGRpbmc6IDVweDsNCiAgICBwYWRkaW5nLWxlZnQ6IDE1cHg7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5yZXN1bHRbdHBsPSdzb2Z0J10gLm9wLXNvZnQtdGl0bGUsDQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5yZXN1bHQgaDMsDQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5jLWNvbnRhaW5lciBoMyB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODsNCiAgICBtYXJnaW46IDBweCAtMjBweCAxMHB4IC0yMHB4Ow0KICAgIHBhZGRpbmc6IDhweCAyMHB4IDVweDsNCiAgICBib3JkZXItcmFkaXVzOiA1cHggNXB4IDBweCAwcHg7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5mMTMgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmYxMyBlbSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtc3BhbjE4IGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5zdWJMaW5rX2ZhY3RvcnkgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnN1YkxpbmtfYW5zd2VyIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLXRhYnMtY29udGVudCBhLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Bfb2ZmaWNhbF93ZWlib19jb250ZW50IGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF9vZmZpY2FsX3dlaWJvX3B6IGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF90aWViYTJfdGFibGlua3NfY29udGFpbmVyIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC10aWViYS1nZW5lcmFsLXJpZ2h0LA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfZHEwMV90aXRsZSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX2RxMDFfdGFibGUgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX2RxMDFfbW9yZWxpbmsgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXRpZWJhLWdlbmVyYWwtbWFpbnBsIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zZS1saXN0ZW4tcmVjb21tZW5kLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1vZmZzZXQ+ZGl2IGEgew0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmYxMyBhOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuZjEzIGVtOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuc3ViTGlua19mYWN0b3J5IGE6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5zdWJMaW5rX2Fuc3dlciBhOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy10YWJzLWNvbnRlbnQgYTpob3ZlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wX3RpZWJhMl90YWJsaW5rc19jb250YWluZXIgYTpob3ZlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXRpZWJhLWdlbmVyYWwtcmlnaHQ6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcF9kcTAxX3RpdGxlOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfZHEwMV90YWJsZSBhOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfZHEwMV9tb3JlbGluayBhOmhvdmVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3AtdGllYmEtZ2VuZXJhbC1tYWlucGwgYTpob3ZlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNlLWxpc3Rlbi1yZWNvbW1lbmQ6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLW9mZnNldD5kaXYgYTpob3ZlciB7DQogICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmUhaW1wb3J0YW50Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuZjEzIGEgew0KICAgIGNvbG9yOiAjMDA4MDAwOw0KfQ0KDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLXNwYW4xOCwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtc3BhbjI0ew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIG1pbi13aWR0aDogdW5zZXQ7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWJvcmRlciB7DQogICAgd2lkdGg6IGF1dG87DQogICAgYm9yZGVyOiBub25lOw0KICAgIGJvcmRlci1ib3R0b20tY29sb3I6IHRyYW5zcGFyZW50Ow0KICAgIGJvcmRlci1yaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7DQogICAgYm94LXNoYWRvdzogMHB4IDBweCAwcHggdHJhbnNwYXJlbnQ7DQogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwcHggMHB4IDBweCB0cmFuc3BhcmVudDsNCiAgICAtbW96LWJveC1zaGFkb3c6IDBweCAwcHggMHB4IHRyYW5zcGFyZW50Ow0KICAgIC1vLWJveC1zaGFkb3c6IDBweCAwcHggMHB4IHRyYW5zcGFyZW50Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuc2VfY29tX2lycmVndWxhcl9nYWxsZXJ5IHVsIGxpLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3BfamluZ3lhbl9saXN0LA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IC5vcC1pbWctYWRkcmVzcy1saW5rLXR5cGUgew0KICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICBtYXJnaW4tbGVmdDogMTBweDsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQ+LmMtY29udGFpbmVyW3RwbD0nc29mdCddIC5vcC1zb2Z0LXRpdGxlIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0Pi5jLWNvbnRhaW5lclt0cGw9J3NvZnQnXSAub3Atc29mdC10aXRsZSBhIGVtLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD4uYy1jb250YWluZXIgaDMgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhIGVtLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzIGEgZW0gew0KICAgIGNvbG9yOiAjMzQ3NmQyOw0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGEsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMgYSB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOmhvdmVyOmFmdGVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGE6aG92ZXI6YWZ0ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMgYTpob3ZlcjphZnRlciB7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zb2Z0LXRpdGxlIGE6YWZ0ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYTphZnRlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoMyBhOmFmdGVyIHsNCiAgICBjb250ZW50OiAiIjsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMzNDc2ZDI7DQogICAgYm90dG9tOiAtMnB4Ow0KICAgIGxlZnQ6IDEwMCU7DQogICAgd2lkdGg6IDA7DQogICAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICAtbW96LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KICAgIHRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD4uYy1jb250YWluZXIgaDN7DQogICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgZm9udC1zaXplOiBtZWRpdW07DQp9DQoNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYSAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYSAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMgYSB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZCBlbSwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdCBoMyBhOnZpc2l0ZWQsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYTp2aXNpdGVkIGVtIHsNCiAgICBjb2xvcjogIzY2MDA5OTsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLm9wLXNvZnQtdGl0bGUgYTp2aXNpdGVkOmhvdmVyOmFmdGVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0IGgzIGE6dmlzaXRlZDpob3ZlcjphZnRlciwNCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLnJlc3VsdC1vcCBoMyBhOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXIgew0KICAgIGxlZnQ6IDA7DQogICAgd2lkdGg6IDEwMCU7DQogICAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICAtbW96LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIHRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAub3Atc29mdC10aXRsZSBhOnZpc2l0ZWQ6YWZ0ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMgYTp2aXNpdGVkOmFmdGVyLA0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAucmVzdWx0LW9wIGgzIGE6dmlzaXRlZDphZnRlciB7DQogICAgY29udGVudDogIiI7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNjYwMDk5Ow0KICAgIGJvdHRvbTogLTJweDsNCiAgICBsZWZ0OiAxMDAlOw0KICAgIHdpZHRoOiAwOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtZ3JvdXAtd3JhcHBlcnsNCiAgICBwYWRkaW5nOiAzMHB4Ow0KICAgIG1hcmdpbjogMCAwIDIwcHggMDsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnQgLmMtZ3JvdXAtd3JhcHBlciAuYy1ncm91cHsNCiAgICBtYXJnaW46IDA7DQogICAgcGFkZGluZy10b3A6IDEwcHg7DQp9DQojd3JhcHBlciAjcnN7DQogICAgcGFkZGluZzogdW5zZXQ7DQogICAgbWFyZ2luOiAyMHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICB6LWluZGV4OiAxOw0KfQ0KI3dyYXBwZXIgI3JzIC5uZXctcG1kew0KICAgIHBhZGRpbmc6IDIwcHg7DQp9DQoud3JhcHBlcl9uZXcgI2Zvcm0gLmJkc3VnLW5ld3sNCiAgICBwYWRkaW5nLXJpZ2h0OiAxMXB4Ow0KfQ0KI3dyYXBwZXIgI3JzIC50dCB7DQogICAgbWFyZ2luOiAtMjBweCAtMjBweCA1cHggLTIwcHg7DQogICAgcGFkZGluZzogMTVweCAyMHB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KI3dyYXBwZXIgI3JzIHRhYmxlIHsNCiAgICB3aWR0aDogNjMwcHg7DQogICAgcGFkZGluZzogNXB4IDE1cHg7DQp9DQojd3JhcHBlciAjcnMgdGFibGUgdHIgYSB7DQogICAgbWFyZ2luLXRvcDogNXB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDVweDsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiN3cmFwcGVyICNycyB0YWJsZSB0ciBhOmhvdmVyIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCn0NCiN3cmFwcGVyICNwYWdlIHsNCiAgICBtaW4td2lkdGg6IDcxMHB4Ow0KICAgIGhlaWdodDogNDBweDsNCiAgICBsaW5lLWhlaWdodDogNDBweDsNCiAgICBwYWRkaW5nLXRvcDogNXB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDUwcHg7DQogICAgbWFyZ2luLWxlZnQ6IDBweDsNCn0NCi5vcC1pbWctYWRkcmVzcy1kZXNrdG9wLWNvbnR7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCiN3cmFwcGVyICNwYWdlIGEsDQojd3JhcHBlciAjcGFnZSBzdHJvbmcgew0KICAgIGNvbG9yOiMzNDc2ZDI7DQogICAgaGVpZ2h0OiBhdXRvOw0KfQ0KI3dyYXBwZXIgI3BhZ2UgLm57DQogICAgaGVpZ2h0OiAzNHB4Ow0KfQ0KI3dyYXBwZXIgI3BhZ2UgLm46aG92ZXIsDQojd3JhcHBlciAjcGFnZSBhOmhvdmVyIC5wYyB7DQogICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7DQogICAgYmFja2dyb3VuZDogI2Q4ZDhkODsNCiAgICBjb2xvcjogIzAwNTdkYTsNCn0NCiN3cmFwcGVyICNwYWdlIHN0cm9uZyAucGMgew0KICAgIGJhY2tncm91bmQ6ICMzNDc2ZDI7DQogICAgY29sb3I6IHdoaXRlOw0KfQ0KLm9wLWltZy1hZGRyZXNzLWRpdmlkZS1oaWdoew0KICAgIG92ZXJmbG93OiBoaWRkZW47DQp9DQojd3JhcHBlciAja3d7DQogICAgd2lkdGg6IDk0JTsNCn0NCiNjb250YWluZXIuc2FtX25ld2dyaWQgLmMtY29udGFpbmVyIC50IC5BQy1mYXZpY29uVH5hLCAjY29udGFpbmVyLnNhbV9uZXdncmlkIC5jLWNvbnRhaW5lciAudCAuYy1pY29ufmF7DQogICAgZGlzcGxheTppbmxpbmUNCn0NCmJvZHkgI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCBhW2hyZWYqPSdvZmZpY2lhbCddIHsNCiAgICBjb2xvcjogd2hpdGU7DQp9DQojY29udGVudF9sZWZ0IC5jLWdyb3VwLW1pZGRsZSwjY29udGVudF9sZWZ0ICAuYy1ncm91cC10b3B7DQogICAgbWFyZ2luLWJvdHRvbTogMzBweCAhaW1wb3J0YW50Ow0KfQ0KQC13ZWJraXQta2V5ZnJhbWVzIGFuaV9ib3R0b21Ub3RvcCB7DQogICAgMCUgew0KICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWSgzMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQpALXdlYmtpdC1rZXlmcmFtZXMgYW5pX2xlZnRUb3JpZ2h0IHsNCiAgICAwJSB7DQogICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQpALXdlYmtpdC1rZXlmcmFtZXMgYW5pX3RvcFRvYnV0dG9tIHsNCiAgICAwJSB7DQogICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQojY29udGFpbmVyLnNhbV9uZXdncmlkICNjb250ZW50X2xlZnQgLmMtY29udGFpbmVyIC5jLWNvbnRhaW5lcnsNCiAgICB3aWR0aDogYXV0bzsNCiAgICBtaW4td2lkdGg6IHVuc2V0Ow0KfQ0KLmMtY29udGFpbmVyIC5jLXJlc3VsdC1jb250ZW50ew0KICAgIHBhZGRpbmctdG9wOiAyMHB4Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAgLmMtY29udGFpbmVyIGFydGljbGV7DQogICAgcGFkZGluZy10b3A6IDE1cHg7DQogICAgYm9yZGVyOiB1bnNldCAhaW1wb3J0YW50Ow0KICAgIGJveC1zaGFkb3c6IHVuc2V0ICFpbXBvcnRhbnQ7DQp9DQpib2R5IC53cmFwcGVyX25ldyAjaGVhZC5maXgtaGVhZCAuc19mb3Jtew0KICAgIGhlaWdodDogNzBweDsNCn0NCi5BQy5zcC1zZXBhcmF0b3J7DQogICAgbWFyZ2luLXRvcDogLTEwcHg7DQogICAgd2lkdGg6IDY1MHB4Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfcmlnaHR7DQogICAgZGlzcGxheTogbm9uZTsNCn0NCmJvZHkuc2hvd1JpZ2h0ICN3cmFwcGVyICNjb250ZW50X3JpZ2h0ew0KICAgIGRpc3BsYXk6IHVuc2V0Ow0KfQ0KI3dyYXBwZXIgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXJbdHBsPSdyZWNvbW1lbmRfbGlzdCddew0KICAgIHBhZGRpbmctdG9wOiAxMHB4Ow0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCn0NCiNjb250ZW50X2xlZnQgLmhpdC10b3B0aXB7DQogICAgZ3JpZC1jb2x1bW4tc3RhcnQ6IDE7DQogICAgZ3JpZC1jb2x1bW4tZW5kOiB4bWFpbi1lbmQ7DQp9DQpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjEyODBweCl7DQogICAgI3UgLnRvaW5kZXgsICN1ICNpbXNnew0KICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgIH0NCn0NCkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDE5MjFweCl7DQogICAgLypCYWlkdSBpbiAySyBzY3JlZW4gZGVmYXVsdCBpbiA6IGNlbnRlciovDQogICAgI2hlYWQgLmhlYWRfd3JhcHBlcnsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgtMTIwcHgsMCwxcHgpOw0KICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICB9DQp9DQo="},{"meta":{"name":"baiduOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/baiduOnePageStyle.css?t=24.26","ts":1638677801124,"mimetype":"text/css"},"source":"LyoqU3RvcmUgQmFpZHVPbmVQYWdlU3R5bGUqKi8NCiN3cmFwcGVyX3dyYXBwZXIgI2NvbnRhaW5lcnsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBtYXJnaW4tbGVmdDogdW5zZXQ7DQp9DQpmb3JtLmZtew0KICAgIHBvc2l0aW9uOnJlbGF0aXZlOw0KICAgIGJhY2tncm91bmQtY29sb3I6IHVuc2V0Ow0KfQ0KYm9keVtiYWlkdV0gLnBhZ2Vmb290Lmdqew0KICAgIG1hcmdpbi10b3A6IDEwMHB4Ow0KfQ0KLndyYXBwZXJfbmV3IC5oZWFkX3dyYXBwZXIgI3Jlc3VsdF9sb2dvew0KICAgIG1hcmdpbi1sZWZ0OiAtMTUwcHg7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KI3NfdGFiIGIsI3NfdGFiIGF7DQogICAgcG9zaXRpb246cmVsYXRpdmU7DQp9DQojd3JhcHBlciAgLmhlYWRfbnVtc19jb250X291dGVyew0KICAgIHBvc2l0aW9uOmFic29sdXRlOw0KICAgIGxlZnQ6IDIwJTsNCiAgICB3aWR0aDogNjAlOw0KfQ0KI3dyYXBwZXIgICNjb250ZW50X2xlZnQsI3dyYXBwZXIgI2NvbnRhaW5lci5zYW1fbmV3Z3JpZCAjcnMsICN3cmFwcGVyICNwYWdlew0KICAgIHRvcDogMzVweDsNCiAgICBwb3NpdGlvbjpyZWxhdGl2ZTsNCiAgICBwYWRkaW5nLWxlZnQ6IDBweDsNCiAgICB3aWR0aDogNDAlICFpbXBvcnRhbnQ7DQogICAgbWluLXdpZHRoOiA2NzBweDsNCiAgICBmbG9hdDp1bnNldDsNCiAgICBtYXJnaW4tbGVmdDogdW5zZXQ7DQogICAgbWFyZ2luOiAwIGF1dG87DQp9DQoNCiN3cmFwcGVyICNwYWdlew0KICAgIGJhY2tncm91bmQ6IHVuc2V0Ow0KfQ0KI3dyYXBwZXIgI3JzIHRoew0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCiN3cmFwcGVyICNyc3sNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgbWFyZ2luOiAzMHB4IGF1dG8gLTIwcHggYXV0bzsNCn0NCiN3cmFwcGVyICAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lcnsNCiAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50Ow0KICAgIG1pbi13aWR0aDo2NTBweDsNCn0NCkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEwMDBweCkgew0KICAgICN3cmFwcGVyICAjY29udGVudF9sZWZ0LCAjd3JhcHBlciAgI3Jzew0KICAgICAgICBtaW4td2lkdGg6ODAwcHg7DQogICAgfQ0KfQ0KI3dyYXBwZXIgI2NvbnRhaW5lci5zYW1fbmV3Z3JpZCAjY29udGVudF9sZWZ0ew0KICAgIHBhZGRpbmctbGVmdDogMjBweDsNCiAgICBkaXNwbGF5OiBibG9jazsNCn0NCiN3cmFwcGVyICNjb250ZW50X3JpZ2h0ew0KICAgIGZsb2F0OiB1bnNldDsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQp9DQpib2R5LnNob3dSaWdodCAjd3JhcHBlciAjY29udGFpbmVyLnNhbV9uZXdncmlkICNjb250ZW50X2xlZnR7DQogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKGNhbGMoNnZ3IC0gMjUxcHgpKTsNCn0NCmJvZHkuc2hvd1JpZ2h0ICN3cmFwcGVyICNjb250ZW50X3JpZ2h0ew0KICAgIHJpZ2h0OiBjYWxjKDM3LjV2dyAtIDQ3MHB4KTsNCn0NCkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDEyODBweCl7DQogICAgYm9keS5zaG93UmlnaHQgI3dyYXBwZXIgI2NvbnRhaW5lci5zYW1fbmV3Z3JpZCAjY29udGVudF9sZWZ0ew0KICAgICAgICB0cmFuc2Zvcm06IHVuc2V0Ow0KICAgIH0NCiAgICBib2R5LnNob3dSaWdodCAjd3JhcHBlciAjY29udGVudF9yaWdodHsNCiAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICB9DQp9DQojd3JhcHBlciAjcGFnZSBhLCAjd3JhcHBlciAjcGFnZSBzdHJvbmd7DQogICAgbWFyZ2luLXJpZ2h0OiAyMnB4ICFpbXBvcnRhbnQ7DQp9DQojd3JhcHBlciAjcGFnZSAucGFnZS1pbm5lcnsNCiAgICBwYWRkaW5nLWxlZnQ6IDIycHg7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCn0NCi5zX3RhYl9pbm5lcnsNCiAgICBkaXNwbGF5OmJsb2NrICFpbXBvcnRhbnQ7DQp9DQojY29udGFpbmVyIC5oaW50X2NvbW1vbl9yZXN0b3B7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGxlZnQ6IGNhbGMoNDV2dyAtIDUwMHB4KTsNCiAgICBtYXJnaW4tdG9wOiAyNXB4Ow0KfQ0KLkFDLnNwLXNlcGFyYXRvcnsNCiAgICB3aWR0aDogYXV0bzsNCn0NCi8qc2VhcmNoIGVuZ2luZSBqdW1wKi8NCiNzZWotY29udGFpbmVyew0KICAgIHBhZGRpbmctbGVmdDogMDsNCiAgICBtYXJnaW4tbGVmdDogMDsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQouc19mb3JtX3dyYXBwZXIgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQp9DQojd3JhcHBlciAjc190YWJ7DQogICAgcGFkZGluZy1sZWZ0OiAwOw0KICAgIG1hcmdpbi1sZWZ0OiAwOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQp9DQojd3JhcHBlciAjY29udGFpbmVyIC5oZWFkX251bXNfY29udF9vdXRlciAuc2VhcmNoX3Rvb2xfY29udGVyLA0KI3dyYXBwZXIgI2NvbnRhaW5lciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLm51bXMgew0KICAgIHdpZHRoOiA2OSU7DQogICAgbWFyZ2luLWxlZnQ6IDE2JTsNCn0NCmZvcm0uZm0gLnNfaXB0X3dyLmJnew0KICAgIG1pbi13aWR0aDogY2FsYygzNy41dncgLSAxNTBweCk7DQp9DQoNCi5yZXN1bHQtbW9sZWN1bGUubmV3LXBtZCB7DQogICAgbWFyZ2luOiAwIGF1dG87DQogICAgbWluLXdpZHRoOiA4MDBweDsNCiAgICB3aWR0aDogNDAlICFpbXBvcnRhbnQ7DQogICAgbWFyZ2luLXRvcDogNjBweDsNCiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7DQp9DQoNCi5uZXctcG1kICNyc19uZXcgew0KICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOw0KICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAyMHB4KTsNCiAgICBwYWRkaW5nOiAxMHB4IDAgMTBweCAyMHB4Ow0KfQ0KDQoubmV3LXBtZCAjcnNfbmV3IHRhYmxlew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIG1hcmdpbi10b3A6IDEycHg7DQp9DQoNCkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDE5MjFweCkgew0KICAgICNoZWFkIC5oZWFkX3dyYXBwZXJ7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMTQwcHgsMCwxcHgpOw0KICAgIH0NCiAgICAud3JhcHBlcl9uZXcgI3NfdGFiLnNfdGFiIC5zX3RhYl9pbm5lciB7DQogICAgICAgIHdpZHRoOiA5MDBweDsNCiAgICAgICAgcGFkZGluZy1sZWZ0OiAyOTZweDsNCiAgICB9DQogICAgZm9ybS5mbSAuc19pcHRfd3IuYmd7DQogICAgICAgIG1pbi13aWR0aDogY2FsYygzNy41dncgLSAxNTBweCk7DQogICAgfQ0KICAgIC5oZWFkX3dyYXBwZXIgI3Ugew0KICAgICAgICByaWdodDogMjAwcHg7DQogICAgfQ0KfQ0KQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTM2NnB4KSBhbmQgKG1heC13aWR0aDogMTkyMHB4KSB7DQogICAgLndyYXBwZXJfbmV3IC5oZWFkX3dyYXBwZXIgI3Jlc3VsdF9sb2dvew0KICAgICAgICBtYXJnaW4tbGVmdDogMHB4Ow0KICAgIH0NCn0="},{"meta":{"name":"baiduTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/baiduTwoPageStyle.css?t=24.26","ts":1638677801128,"mimetype":"text/css"},"source":"LyoqU3RvcmUgQmFpZHVUb3dQYWdlU3R5bGUqKi8NCiN3cmFwcGVyX3dyYXBwZXIgI2NvbnRhaW5lciB7DQogICAgd2lkdGg6IGF1dG87DQp9DQpmb3JtLmZtew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB1bnNldDsNCn0NCiNzX3RhYiBiLCAjc190YWIgYSB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KI3dyYXBwZXIgI3NfdGFiew0KICAgIHBhZGRpbmctbGVmdDogMDsNCiAgICBtYXJnaW4tbGVmdDogMDsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KfQ0KI3dyYXBwZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5zZWFyY2hfdG9vbF9jb250ZXIsDQojd3JhcHBlciAuaGVhZF9udW1zX2NvbnRfb3V0ZXIgLm51bXMgew0KICAgIHdpZHRoOiA4MCU7DQogICAgbWFyZ2luLWxlZnQ6IDEwJTsNCn0NCiN3cmFwcGVyICAuaGVhZF9udW1zX2NvbnRfb3V0ZXIsDQouaGludF9jb21tb25fcmVzdG9wLA0KI2hlYWRlcl90b3BfYmFyIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgbGVmdDogMTAlOw0KICAgIHdpZHRoOiA4MCU7DQp9DQojd3JhcHBlciAjaGVhZGVyX3RvcF9iYXJ7DQogICAgbWFyZ2luLWJvdHRvbTogMHB4Ow0KfQ0KYm9keSAjY29udGFpbmVyLnNhbV9uZXdncmlkICNjb250ZW50X2xlZnR7DQogICAgd2lkdGg6IDgwJTsNCn0NCiN3cmFwcGVyICNjb250ZW50X2xlZnR7DQogICAgZGlzcGxheTogaW5saW5lLWdyaWQ7DQogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiA1MCUgNTAlOw0KICAgIGdyaWQtdGVtcGxhdGUtYXJlYXM6ICJ4bWFpbiB4bWFpbiI7DQogICAgbWFyZ2luOiAwIGF1dG87DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHBhZGRpbmctbGVmdDogNSU7DQogICAgZmxvYXQ6IHVuc2V0Ow0KICAgIHdpZHRoOiA4MCU7DQogICAgbWFyZ2luLWxlZnQ6NyU7DQogICAgbWFyZ2luLWJvdHRvbTogMzBweDsNCn0NCmJvZHlbbmV3c10gI3dyYXBwZXIgI2NvbnRlbnRfbGVmdD5kaXY6bm90KFtjbGFzc10pOm5vdChbaWRdKXsNCiAgICBkaXNwbGF5OiBpbmxpbmUtZ3JpZDsNCiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDUwJSA1MCU7DQogICAgZ3JpZC10ZW1wbGF0ZS1hcmVhczogInhtYWluIHhtYWluIjsNCn0NCiN3cmFwcGVyICNjb250ZW50X3JpZ2h0ew0KICAgIGRpc3BsYXk6bm9uZSAhaW1wb3J0YW50Ow0KfQ0KI3dyYXBwZXJfd3JhcHBlciAjY29udGFpbmVyICNyc3sNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgbWFyZ2luOiAwIGF1dG87DQp9DQojd3JhcHBlciAjcGFnZSB7DQogICAgbWluLXdpZHRoOiA3MTBweDsNCiAgICBoZWlnaHQ6IDQwcHg7DQogICAgbGluZS1oZWlnaHQ6IDQwcHg7DQogICAgcGFkZGluZzogNXB4IDEwcHg7DQogICAgbWFyZ2luOiAwIGF1dG87DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCn0NCiN3cmFwcGVyICNwYWdlIC5wYWdlLWlubmVyew0KICAgIHBhZGRpbmctbGVmdDogMDsNCn0NCiN3cmFwcGVyICAjY29udGVudF9sZWZ0IC5yZXN1bHQsDQojd3JhcHBlciAgI2NvbnRlbnRfbGVmdCAuYy1jb250YWluZXIgew0KICAgIHdpZHRoOiB1bnNldCAhaW1wb3J0YW50Ow0KICAgIG1heC13aWR0aDogMTAwJTsNCiAgICBtYXJnaW4tbGVmdDogNXB4Ow0KICAgIG1hcmdpbi1yaWdodDogMTVweDsNCn0NCg0KI3dyYXBwZXIgICNjb250ZW50X2xlZnQ+Kjpub3QoW2NsYXNzKj0ncmVzdWx0J10pOm5vdChbY2xhc3MqPSdjLWdyb3VwLXdyYXBwZXInXSl7DQoJZ3JpZC1jb2x1bW4tc3RhcnQ6IDE7DQogICAgZ3JpZC1jb2x1bW4tZW5kOiB4bWFpbi1lbmQ7DQp9DQouYy1jb250YWluZXIgaDMgYXsNCiAgICB6LWluZGV4OjE7DQp9DQouQUMuc3Atc2VwYXJhdG9yew0KICAgIHdpZHRoOiBhdXRvOw0KfQ0KLypzZWFyY2ggZW5naW5lIGp1bXAqLw0KI3Nlai1jb250YWluZXJ7DQogICAgcGFkZGluZy1sZWZ0OiAwOw0KICAgIG1hcmdpbi1sZWZ0OiAwOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi5zX2Zvcm1fd3JhcHBlciB7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgZGlzcGxheTogZmxleDsNCn0NCg0KLnJlc3VsdC1tb2xlY3VsZS5uZXctcG1kIHsNCiAgICBtYXJnaW46IDAgYXV0bzsNCiAgICBtaW4td2lkdGg6IDgwMHB4Ow0KICAgIHdpZHRoOiA0MCUgIWltcG9ydGFudDsNCiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7DQp9DQoNCi5uZXctcG1kICNyc19uZXcgew0KICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOw0KICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAyMHB4KTsNCiAgICBwYWRkaW5nOiAxMHB4IDAgMTBweCAyMHB4Ow0KfQ0KDQoubmV3LXBtZCAjcnNfbmV3IHRhYmxlew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIG1hcmdpbi10b3A6IDEycHg7DQp9DQoNCiN3cmFwcGVyIC5oZWFkX251bXNfY29udF9vdXRlciAuc2VhcmNoX3Rvb2xfY29udGVyLA0KI3dyYXBwZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5udW1zIHsNCiAgICB3aWR0aDogODAlOw0KfQ0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTUwMHB4KSB7DQogICAgZm9ybS5mbSAuc19pcHRfd3IuYmd7DQogICAgICAgIG1pbi13aWR0aDogNDUwcHgNCiAgICB9DQogICAgLndyYXBwZXJfbmV3IC5oZWFkX3dyYXBwZXIgI3Jlc3VsdF9sb2dvew0KICAgICAgICBtYXJnaW4tbGVmdDogLTE3MHB4Ow0KICAgIH0NCn0NCkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDE5MjFweCkgew0KICAgICNzX3RhYi5zX3RhYiAuc190YWJfaW5uZXIgew0KICAgICAgICB3aWR0aDogOTAwcHg7DQogICAgfQ0KICAgIGZvcm0uZm0gLnNfaXB0X3dyLmJnew0KICAgICAgICBtaW4td2lkdGg6IDkwMHB4DQogICAgfQ0KfQ=="},{"meta":{"name":"baiduLiteStyle.css","url":"http://ibaidu.tujidu.com/newcss/baiduLiteStyle.css?t=24.26","ts":1638677801137,"mimetype":"text/css"},"source":"LyoNCiEgVmVyc2lvbjogMjAxODA0MjcwMDANCiEgVGl0bGU6ICBiYWlkdS1saXRlWzIwMTgwNDI3MDAwXQ0KISBMYXN0IG1vZGlmaWVkOiAyMDE5LzA5LzA1DQohIEV4cGlyZXM6IDEgZGF5cyAodXBkYXRlIGZyZXF1ZW5jeSkNCg0KVGhpcyBzdHlsZSBpcyBmcm9tIHd3dy55aWNsZWFyLmNvbSwgYW5kIHRoYW5rcyB0aGUgYXV0aG9yIG9mIHRoZSBzaXRlLg0KKi8NCip7Zm9udC1mYW1pbHk6LWFwcGxlLXN5c3RlbSwiSGVsdmV0aWNhIE5ldWUiLEhlbHZldGljYSwiTmltYnVzIFNhbnMgTCIsQXJpYWwsIkxpYmVyYXRpb24gU2FucyIsIlBpbmdGYW5nIFNDIiwiSGlyYWdpbm8gU2FucyBHQiIsIlNvdXJjZSBIYW4gU2FucyBDTiIsIlNvdXJjZSBIYW4gU2FucyBTQyIsIk1pY3Jvc29mdCBZYUhlaSIsIldlbnF1YW55aSBNaWNybyBIZWkiLCJXZW5RdWFuWWkgWmVuIEhlaSIsIlNUIEhlaXRpIixTaW1IZWksIldlblF1YW5ZaSBaZW4gSGVpIFNoYXJwIixzYW5zLXNlcmlmfQ0KOjotd2Via2l0LXNjcm9sbGJhcnt3aWR0aDo2cHg7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLDApfQ0KOjotd2Via2l0LXNjcm9sbGJhci10cmFja3tiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjEpfQ0KOjotd2Via2l0LXNjcm9sbGJhci10aHVtYntib3JkZXItcmFkaXVzOjNweDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjIpO3RyYW5zaXRpb246YWxsIC40cyBlYXNlOy1tb3otdHJhbnNpdGlvbjphbGwgLjRzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuNHMgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuNHMgZWFzZX0NCjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXJ7Ym9yZGVyLXJhZGl1czozcHg7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC40KTt0cmFuc2l0aW9uOmFsbCAuNHMgZWFzZTstbW96LXRyYW5zaXRpb246YWxsIC40cyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjRzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjRzIGVhc2V9DQouYW5pbWF0ZWR7LXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246MXM7YW5pbWF0aW9uLWR1cmF0aW9uOjFzO2FuaW1hdGlvbi1maWxsLW1vZGU6Ym90aH0NCkAtd2Via2l0LWtleWZyYW1lcyBmYWRlSW5VcHtmcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwMCUsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMTAwJSwwKX10b3tvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19DQpAa2V5ZnJhbWVzIGZhZGVJblVwe2Zyb217b3BhY2l0eTowOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMTAwJSwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwxMDAlLDApfXRve29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTpub25lO3RyYW5zZm9ybTpub25lfX0NCi5mYWRlSW5VcHstd2Via2l0LWFuaW1hdGlvbi1uYW1lOmZhZGVJblVwO2FuaW1hdGlvbi1uYW1lOmZhZGVJblVwfQ0KQC13ZWJraXQta2V5ZnJhbWVzIGJvdW5jZUluUmlnaHR7NjAlLDc1JSw5MCUsZnJvbSx0b3std2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSk7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoLjIxNSwuNjEsLjM1NSwxKX1mcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgzMDAwcHgsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMzAwMHB4LDAsMCl9NjAle29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApfTc1JXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgxMHB4LDAsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEwcHgsMCwwKX05MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtNXB4LDAsMCl9dG97LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19DQpAa2V5ZnJhbWVzIGJvdW5jZUluUmlnaHR7NjAlLDc1JSw5MCUsZnJvbSx0b3std2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSk7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoLjIxNSwuNjEsLjM1NSwxKX1mcm9te29wYWNpdHk6MDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgzMDAwcHgsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMzAwMHB4LDAsMCl9NjAle29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMjVweCwwLDApfTc1JXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgxMHB4LDAsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEwcHgsMCwwKX05MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTVweCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtNXB4LDAsMCl9dG97LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX19DQouYm91bmNlSW5SaWdodHstd2Via2l0LWFuaW1hdGlvbi1uYW1lOmJvdW5jZUluUmlnaHQ7YW5pbWF0aW9uLW5hbWU6Ym91bmNlSW5SaWdodH0NCkAtd2Via2l0LWtleWZyYW1lcyBib3VuY2VJblVwezYwJSw3NSUsOTAlLGZyb20sdG97LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllciguMjE1LC42MSwuMzU1LDEpO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKC4yMTUsLjYxLC4zNTUsMSl9ZnJvbXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwzMDAwcHgsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMzAwMHB4LDApfTYwJXtvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMjBweCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMjBweCwwKX03NSV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwxMHB4LDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwcHgsMCl9OTAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsLTVweCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtNXB4LDApfXRvey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwwLDApfX0NCmF7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bWFyZ2luLWJvdHRvbToycHh9DQouYy1zaG93dXJsOmhvdmVye3RleHQtZGVjb3JhdGlvbjpub25lO2JvcmRlcjpub25lO29wYWNpdHk6Ljg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQoucmVzLWdhcC1yaWdodDE2OmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxLjJweCBzb2xpZH0NCi5jLXNob3d1cmx7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQouYy10aXAtYXJyb3c6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyOm5vbmV9DQouYy1kZWZhdWx0IGF7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyOm5vbmV9DQouYy1nYXAtYm90dG9tIGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0NCi5vcF9kaWN0M19tb3JlbGluayBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9DQouYy1idG46aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fQ0KdGQgYTpob3Zlcnt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfQ0KZW17dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fQ0KI3Nfd3JhcHtkaXNwbGF5Om5vbmV9DQoucy10b3AtbmF2e2Rpc3BsYXk6bm9uZX0NCiNzX2N0bmVyX21lbnVze2Rpc3BsYXk6bm9uZX0NCiNzX21lbnVfZ3VyZHtkaXNwbGF5Om5vbmV9DQojc19zdHJweF9zcGFuMXtkaXNwbGF5Om5vbmV9DQojZnRDb257ZGlzcGxheTpub25lfQ0KI2JvdHRvbV9jb250YWluZXJ7ZGlzcGxheTpub25lfQ0KI2xne2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtoZWlnaHQ6NzBweDtwYWRkaW5nLXRvcDoxNTBweH0NCiNsZyBpbWd7ZGlzcGxheTpub25lfQ0KI2xnIGF7ZGlzcGxheTpub25lfQ0KI2hlYWRfd3JhcHBlcntwYWRkaW5nLWJvdHRvbTowfQ0KLnNfZm9ybV93cmFwcGVye21hcmdpbi10b3A6YXV0bztkaXNwbGF5OiBmbGV4O30NCiNzX2xnX2ltZywjc19sZ19pbWdfbmV3e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9DQojZm9ybSAuc19pcHRfd3J7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czozcHg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7YmFja2dyb3VuZC1wb3NpdGlvbjoxMDAlIWltcG9ydGFudDtoZWlnaHQ6MzlweDtmb250LWZhbWlseTotYXBwbGUtc3lzdGVtLCJIZWx2ZXRpY2EgTmV1ZSIsSGVsdmV0aWNhLCJOaW1idXMgU2FucyBMIixBcmlhbCwiTGliZXJhdGlvbiBTYW5zIiwiUGluZ0ZhbmcgU0MiLCJIaXJhZ2lubyBTYW5zIEdCIiwiU291cmNlIEhhbiBTYW5zIENOIiwiU291cmNlIEhhbiBTYW5zIFNDIiwiTWljcm9zb2Z0IFlhSGVpIiwiV2VucXVhbnlpIE1pY3JvIEhlaSIsIldlblF1YW5ZaSBaZW4gSGVpIiwiU1QgSGVpdGkiLFNpbUhlaSwiV2VuUXVhbllpIFplbiBIZWkgU2hhcnAiLHNhbnMtc2VyaWY7cGFkZGluZy10b3A6NHB4fQ0KLnNfaXB0e2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0sIkhlbHZldGljYSBOZXVlIixIZWx2ZXRpY2EsIk5pbWJ1cyBTYW5zIEwiLEFyaWFsLCJMaWJlcmF0aW9uIFNhbnMiLCJQaW5nRmFuZyBTQyIsIkhpcmFnaW5vIFNhbnMgR0IiLCJTb3VyY2UgSGFuIFNhbnMgQ04iLCJTb3VyY2UgSGFuIFNhbnMgU0MiLCJNaWNyb3NvZnQgWWFIZWkiLCJXZW5xdWFueWkgTWljcm8gSGVpIiwiV2VuUXVhbllpIFplbiBIZWkiLCJTVCBIZWl0aSIsU2ltSGVpLCJXZW5RdWFuWWkgWmVuIEhlaSBTaGFycCIsc2Fucy1zZXJpZn0NCiNmb3JtIC5zX2lwdF93cjpob3Zlcntib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjJweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5pcHRob3Zlcnt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5pcHRmb2N1c3tib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpfQ0KYm9keSAjZm9ybSAuc19idG57d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtib3JkZXItcmFkaXVzOjUwJTtmb250LXNpemU6MDtib3JkZXI6bm9uZTtib3gtc2hhZG93Om5vbmU7bWFyZ2luLWxlZnQ6MDt6LWluZGV4OjEwMDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczttYXJnaW4tdG9wOjA7b3BhY2l0eTowfQ0KYm9keSAjZm9ybSAuc19idG46aG92ZXJ7b3BhY2l0eTouNTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMCk7Ym9yZGVyOm5vbmU7Ym94LXNoYWRvdzpub25lO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KYm9keSAjZm9ybSAuc19idG5fd3J7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtib3JkZXItcmFkaXVzOjUwJTtmb250LXNpemU6MDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMCk7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCU7Ym9yZGVyOm5vbmU7Ym94LXNoYWRvdzpub25lO21hcmdpbi1sZWZ0OjVweDt6LWluZGV4OjEwMDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczttYXJnaW4tdG9wOjZweH0NCmJvZHkgI2Zvcm0gLnNfYnRuX3dyOmhvdmVye29wYWNpdHk6LjU7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDApO2JvcmRlcjpub25lO2JveC1zaGFkb3c6bm9uZTt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5idG5ob3ZlcntvcGFjaXR5Oi41O2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwwKSFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2JveC1zaGFkb3c6bm9uZTt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5oaW50X3RvcHJxX3RpcHN7bWFyZ2luLWJvdHRvbToxMnB4fQ0KLnNfZm9ybXtoZWlnaHQ6NzVweDtwYWRkaW5nLXRvcDoxMHB4fQ0KI3NfdGFie3BhZGRpbmc6ODdweCAwIDAgMTIxcHg7fQ0KI2hlYWQuc19kb3due2JveC1zaGFkb3c6MCAwIDVweCAjNjY2O3BhZGRpbmctYm90dG9tOiA4cHg7fQ0KLmJkc3Vne3RvcDo0MnB4O2JveC1zaGFkb3c6MCAycHggNXB4IDAgcmdiYSgwLDAsMCwuMTYpLDAgMnB4IDEwcHggMCByZ2JhKDAsMCwwLC4xMik7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czowIDAgMnB4IDJweDtmb250LWZhbWlseTotYXBwbGUtc3lzdGVtLCJIZWx2ZXRpY2EgTmV1ZSIsSGVsdmV0aWNhLCJOaW1idXMgU2FucyBMIixBcmlhbCwiTGliZXJhdGlvbiBTYW5zIiwiUGluZ0ZhbmcgU0MiLCJIaXJhZ2lubyBTYW5zIEdCIiwiU291cmNlIEhhbiBTYW5zIENOIiwiU291cmNlIEhhbiBTYW5zIFNDIiwiTWljcm9zb2Z0IFlhSGVpIiwiV2VucXVhbnlpIE1pY3JvIEhlaSIsIldlblF1YW5ZaSBaZW4gSGVpIiwiU1QgSGVpdGkiLFNpbUhlaSwiV2VuUXVhbllpIFplbiBIZWkgU2hhcnAiLHNhbnMtc2VyaWY7fQ0KLmJnc3VnIGxpe2ZvbnQtZmFtaWx5OkhlbHZldGljYSwiTWljcm9zb2Z0IFlhaGVpIFVJIiFpbXBvcnRhbnQ7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6MzZweCFpbXBvcnRhbnR9DQouYmdzdWcgdWwgbGl7bGluZS1oZWlnaHQ6MzJweCFpbXBvcnRhbnR9DQouYmRzdWctb3ZlcmZsb3d7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLCJNaWNyb3NvZnQgWWFoZWkgVUkiIWltcG9ydGFudDt3aWR0aDo1ODNweCFpbXBvcnRhbnR9DQojcXVpY2tkZWxldGV7dG9wOjVweCFpbXBvcnRhbnQ7b3BhY2l0eTouNX0NCiNrd190aXB7Zm9udC1mYW1pbHk6SGVsdmV0aWNhLCJNaWNyb3NvZnQgWWFoZWkgVUkgTGlnaHQifQ0KI3Jlc3VsdF9sb2dve2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTVRBeElETXpJaUJ6ZEhsc1pUMGlaVzVoWW14bExXSmhZMnRuY205MWJtUTZibVYzSURBZ01DQXhNREVnTXpNN0lpQjRiV3c2YzNCaFkyVTlJbkJ5WlhObGNuWmxJajRLUEhOMGVXeGxJSFI1Y0dVOUluUmxlSFF2WTNOeklqNEtDUzV6ZERCN1ptbHNiRG9qTkRnM09VSkVPMzBLQ1M1emRERjdabWxzYkRvalJFUTBORE0yTzMwS0NTNXpkREo3Wm1sc2JEb2pSa1pHUmtaR08zMEtQQzl6ZEhsc1pUNEtQSEJoZEdnZ1kyeGhjM005SW5OME1DSWdaRDBpVFRVd0xqUXNNVFV1TTJNdE15NDRMREF1TXkwMExESXVOaTAxTGpjc05DNDNZeTB4TGpnc01pNHlMVFV1TlN3MExqRXROaXcyTGpkakxUQXVOaXd6TGpNc01TNHpMRFV1TVN3ekxEVXVOMk14TGprc01DNDJMRFl1TWkwd0xqVXNPQzQwTFRBdU5XZ3dMaklLQ1dnd0xqSmpNaTR5TERBc05pNDBMREV1TVN3NExqUXNNQzQxWXpFdU9DMHdMallzTXk0MUxUTXVNaXd6TFRVdU4yTXRNQzQwTFRJdU1TMDBMalF0TkM0MUxUWXVNaTAyTGpkRE5UUXVNaXd4T0N3MU5DNHpMREUxTGpZc05UQXVOQ3d4TlM0emVpQk5NemNzTVRRdU9Bb0pZekFzTWk0MExERXVOaXcwTGpNc015NDBMRFF1TTJNeExqa3NNQ3d6TGpRdE1TNDVMRE11TkMwMExqTmpNQzB5TGpRdE1TNDJMVFF1TXkwekxqUXROQzR6VXpNM0xERXlMalVzTXpjc01UUXVPSG9nVFRRekxqa3NPQzQyWXpBc01pNDFMREV1TlN3MExqVXNNeTR6TERRdU5Rb0pZekV1T0N3d0xETXVNeTB5TGpFc015NHpMVFF1TlZNME9TdzBMakVzTkRjdU1TdzBMakZETkRVdU15dzBMRFF6TGprc05pdzBNeTQ1TERndU5ub2dUVFV5TGpJc09DNDFZekFzTWk0ekxERXVOQ3cwTGpNc015NHlMRFF1TTNNekxqSXRNUzQ1TERNdU1pMDBMak56TFRFdU5DMDBMak10TXk0eUxUUXVNd29KVXpVeUxqSXNOaTR5TERVeUxqSXNPQzQxZWlCTk5UY3VOU3d4TlM0NVl6QXNNaTR6TERFdU5TdzBMak1zTXk0ekxEUXVNMk14TGpnc01Dd3pMak10TVM0NUxETXVNeTAwTGpOekxURXVOUzAwTGpNdE15NHpMVFF1TTBNMU9DNDVMREV4TGpZc05UY3VOU3d4TXk0MkxEVTNMalVzTVRVdU9Yb2lMejRLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUUXNNekF1TkhZdE5TNHhhRFl1TkdNeExqWXNNQ3d4TGpZc01DNHpMREV1Tml3eWRqRXVOR013TERFdU5pMHlMak1zTVM0NExUTXVPU3d4TGpoTU5Dd3pNQzQwVERRc016QXVOSG9nVFRRc01qTjJMVFF1T0dnMExqRUtDV014TGpZc01Dd3pMamtzTUN3ekxqa3NNaTR4ZGpBdU1XTXdMREV1TkMwd0xqVXNNaTQyTFRFdU9Dd3lMalpETVRBdU15d3lNeXcwTERJekxEUXNNak42SUUweExqY3NNVFoyTVRZdU0yZzJMalJqTXl3d0xEWXVNaXd3TERZdU1pMHpMaloyTFRFdU1XTXdMVEV1Tmkwd0xqRXRNaTQzTFRFdU1TMHpMalVLQ1dNeExUQXVPQ3d4TGpFdE1pNHpMREV1TVMwekxqWnNNQ3d3WXpBdE5DNDFMVE11TWkwMExqVXROaTR5TFRRdU5Vd3hMamNzTVRaTU1TNDNMREUyZWlJdlBnbzhjR0YwYUNCamJHRnpjejBpYzNReElpQmtQU0pOTWpVc01qZ3VPV010TVM0eExERXVNUzB6TGpNc01TNHpMVE11TlN3eExqTmpMVEV1TXl3d0xUSXVOeTB3TGpVdE1pNDNMVEl1TVdNd0xURXVOQ3d3TGpVdE1pNHpMREl1TVMweUxqTmpNUzR6TERBc01pNDRMREF1TVN3MExqRXNNQzQyVmpJNExqbDZDZ2tnVFRJeExqUXNNekl1TTJNd0xqUXNNQ3d5TGpNdE1DNHhMRE11Tnkwd0xqbHNNQzR5TERBdU4yZ3lMakYyTFRndU9XTXdMVE11TmkweUxqTXROUzAxTGpjdE5XTXRNUzQ0TERBdE5DNHpMREF1TnkwMExqY3NNQzQ1YkRBdU5Dd3lMak5qTVM0MkxUQXVOaXd6TFRBdU5pdzBMakl0TUM0MkNnbGpNUzQ0TERBc015NHpMREF1Tml3ekxqTXNNaTQyVmpJMFl5MHhMVEF1TkMweUxqUXRNQzQyTFRRdU1TMHdMalpqTFRNc01DMDBMalVzTVM0MkxUUXVOU3cwTGpkRE1UWXVOQ3d6TVM0NExERTVMallzTXpJdU15d3lNUzQwTERNeUxqTjZJaTgrQ2p4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMHpNQzR5TERFMkxqRmpNQ3d3TGpZc01DNDJMREV1TWl3eExqTXNNUzR5WXpBdU9Dd3dMREV1TXkwd0xqWXNNUzR6TFRFdU1tTXdMVEF1Tnkwd0xqWXRNUzR6TFRFdU15MHhMak5ETXpBdU9Dd3hOQzQ0TERNd0xqSXNNVFV1TXl3ek1DNHlMREUyTGpGNkNna2dUVE13TGpNc016SXVNV2d5TGpSV01UZ3VOV2d0TWk0MFZqTXlMakY2SWk4K0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazAzTVM0eUxESXlMakZvT0M0MFl6QXVOQ3d3TGpFc01DNDJMREF1TXl3d0xqWXNNQzQzZGpJdU5tZ3RPUzQzZGkweUxqWkROekF1Tml3eU1pNDBMRGN3TGpnc01qSXVNaXczTVM0eUxESXlMakY2SUUwM01TNHlMRE13TGpVS0NXTXRNQzQwTERBdE1DNDJMVEF1TXkwd0xqY3RNQzQ0ZGkweUxqWm9PUzQzZGpJdU5tTXdMREF1TkMwd0xqSXNNQzQzTFRBdU5pd3dMamRJTnpFdU1ub2dUVGN6TGpZc01UaGpMVEF1TVN3d0xqUXRNQzR4TERBdU9TMHdMalFzTVM0M1l5MHdMakVzTUM0ekxUQXVNU3d3TGpVdE1DNHhMREF1TndvSmFDMHlMalpqTFRFdU15d3dMakV0TVM0NUxEQXVPQzB5TERKMk55NDVZekF1TVN3eExqRXNNQzQ0TERFdU9Dd3lMREV1T1dneE1HTXhMakl0TUM0eExERXVPQzB3TGpjc01TNDVMVEV1T0hZdE55NDVZeTB3TGpFdE1TNHpMVEF1TnkweExqa3RNUzQ1TFRJdU1XZ3ROUW9KWXpBdU1TMHdMak1zTUM0eExUQXVPQ3d3TGpNdE1TNDBZekF1TVMwd0xqUXNNQzR4TFRBdU55d3dMakV0TUM0NWFEY3VNbll0TVM0NFNEWTNMalJXTVRoTU56TXVOaXd4T0V3M015NDJMREU0ZWlJdlBnbzhjR0YwYUNCamJHRnpjejBpYzNReElpQmtQU0pOT1RNdU55d3lNaTQzWXkwd0xqUXRNQzR4TFRBdU5TMHdMakl0TUM0MUxUQXVOWFl0TUM0MmFETXVNbll3TGpaakxUQXVNU3d3TGpNdE1DNHlMREF1TkMwd0xqVXNNQzQxU0RrekxqZDZJRTA1Tmk0MkxESTBMakVLQ1dNeExqRXRNQzR4TERFdU5pMHdMalVzTVM0MkxURXVOSFl0TVdneUxqTjJMVEV1TldndE1pNHpkaTB4TGpGb0xURXVPSFl4TGpGb0xUTXVNbll0TVM0eGFDMHhMamgyTVM0eGFDMHlMak4yTVM0MWFESXVNM1l4WXpBdU1Td3dMamtzTUM0MkxERXVOQ3d4TGpZc01TNDBTRGsyTGpaNkNna2dUVGswTGpnc016QXVOR014TGpZc01DNDRMRE11TkN3eExqTXNOUzQwTERFdU9Hd3dMamt0TVM0M1l5MHhMalF0TUM0eUxUSXVPUzB3TGpZdE5DNDBMVEV1TVdNeExqRXRNQzQ0TERJdE1TNDJMREl1TnkweUxqVmpNQzR6TFRBdU5Dd3dMalF0TUM0NUxEQXVNaTB4TGpNS0NXTXRNQzR6TFRBdU5pMHdMamd0TUM0NUxURXVOQzB3TGpsb0xUbDJNUzQxYURjdU4yTXdMaklzTUN3d0xqUXNNQzR4TERBdU5Dd3dMakZ6TUN3d0xqRXRNQzR4TERBdU0yTXRNQzQyTERBdU5pMHhMalFzTVM0ekxUSXVNeXd4TGpoakxURXVNaTB3TGpjdE1pNHhMVEV1TXkweUxqUXRNUzQ0YUMweUxqSUtDV013TGprc01Td3hMamdzTVM0NUxESXVPU3d5TGpkakxURXVOaXd3TGpZdE15NHpMREV1TVMwMExqa3NNUzR6YkRBdU9Td3hMalpET1RFdU15d3pNUzQ0TERrekxqSXNNekV1TVN3NU5DNDRMRE13TGpSNklFMDRPQzR6TERJMUxqSjJMVFpqTUM0eExUQXVOaXd3TGpNdE1DNDVMREF1T0Mwd0xqa0tDV2d4TVM0NGRpMHhMalpJT1RWakxUQXVNUzB3TGpFdE1pNHlMVEF1TVMweUxqSXNNR2d0TkM0M1l5MHhMakVzTUM0eExURXVOeXd3TGprdE1TNDRMREl1TWxZeU5XTXdMakVzTWk0eExUQXVOQ3cwTGpRdE1TNHhMRFl1TjJ3eExqa3NNQzQyQ2dsRE9EY3VPU3d5T1M0NUxEZzRMak1zTWpjdU5pdzRPQzR6TERJMUxqSjZJaTgrQ2p4d1lYUm9JR05zWVhOelBTSnpkRElpSUdROUlrMDBOaTR6TERJMExqSmpNQzQyTERBc01TNHlMREF1TVN3eExqY3NNQzQwZGpNdU5HTXdMREF1TXkwd0xqWXNNUzB4TGprc01XTXRNUzQxTERBdE1TNDRMVEF1TmkweExqZ3RNaTR4ZGkwd0xqWUtDVU0wTkM0eUxESTBMamdzTkRRdU55d3lOQzR5TERRMkxqTXNNalF1TW5vZ1RUUTVMaklzTWpBdU4wZzBPSFl5TGpWRE5EY3VOaXd5TXk0eExEUTNMREl6TERRMkxqTXNNak5qTFRJdU55d3dMVE11TXl3eExUTXVNeXd6TGpWMk1DNHpZekFzTWk0MExEQXVPU3d6TGpNc015NHlMRE11TXdvSll6QXVPQ3d3TERFdU15MHdMakVzTVM0NExUQXVOV3d3TGpFc01DNDJhREV1TVV3ME9TNHlMREl3TGpkTU5Ea3VNaXd5TUM0M2VpSXZQZ284Y0dGMGFDQmpiR0Z6Y3owaWMzUXlJaUJrUFNKTk5UWXVOeXd5TTJndE1TNHlkalV1TW1NdE1DNDJMREF1TkMweExqY3NNQzQyTFRJdU5Dd3dMalpqTFRBdU9Dd3dMVEV0TUM0MExURXRNUzR6ZGkwMExqWm9MVEV1TVhZMExqaGpNQ3d4TGpZc01DNDFMREl1TXl3eUxqRXNNaTR6Q2dsak1Td3dMREl1TVMwd0xqTXNNaTQyTFRBdU5td3dMakVzTUM0MmFERXVNVll5TTNvaUx6NEtQSEJoZEdnZ1kyeGhjM005SW5OME1TSWdaRDBpVFRreUxqY3NNVFV1TjJNd0xUQXVOeXd3TGpZdE1TNHpMREV1TWkweExqTmpNQzQyTERBc01TNHlMREF1Tml3eExqSXNNUzR6VXprMExqVXNNVGNzT1RNdU9Td3hOME01TXk0ekxERTJMamtzT1RJdU55d3hOaTR6TERreUxqY3NNVFV1TjNvaUx6NEtQQzl6ZG1jK0NnPT0iKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7d2lkdGg6MTAxcHg7aGVpZ2h0OjMzcHg7bWFyZ2luLXRvcDo5cHh9DQojcmVzdWx0X2xvZ28gaW1ne2Rpc3BsYXk6bm9uZTt2aXNpYmlsaXR5OmhpZGRlbn0NCiNyZXN1bHRfbG9nbyBhIGltZ3tkaXNwbGF5Om5vbmU7dmlzaWJpbGl0eTpoaWRkZW59DQouYy1jb250YWluZXJ7bGluZS1oZWlnaHQ6MS42NX0NCiNyc3tiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMCkhaW1wb3J0YW50fQ0KLmMtYm9yZGVyey13ZWJraXQtYm94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpO2JvcmRlci1yYWRpdXM6MnB4O2JvcmRlcjpub25lO3BhZGRpbmc6MjBweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5jLWJvcmRlcjpob3Zlcntib3gtc2hhZG93OjAgM3B4IDEwcHggcmdiYSgwLDAsMCwuMTYpLDAgM3B4IDEwcHggcmdiYSgwLDAsMCwuMjMpO3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5jLXRhYnMtbmF2e2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MnB4IDJweCAwIDA7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KLmMtdGFicy1uYXYtbW92ZXRvcHttYXJnaW4tbGVmdDotMjBweDttYXJnaW4tcmlnaHQ6LTIwcHg7bWFyZ2luLXRvcDotMjBweDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQouYy10YWJzLW5hdi1zZWxlY3RlZHtib3JkZXItdG9wOm5vbmUhaW1wb3J0YW50O2JvcmRlci1sZWZ0Om5vbmUhaW1wb3J0YW50O2JvcmRlci1yaWdodDpub25lIWltcG9ydGFudDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQouYy10YWJzLW5hdi1zZXB7ZGlzcGxheTpub25lIWltcG9ydGFudH0NCiNwYWdlIGF7aGVpZ2h0OjM0cHg7Ym9yZGVyLXJhZGl1czoycHg7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwwKTt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojcGFnZSBhOmhvdmVye3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCiNwYWdlIGEgLnBjOmhvdmVye3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCiNwYWdlIHN0cm9uZ3toZWlnaHQ6MzRweDtib3JkZXItcmFkaXVzOjJweDtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6LTJweDt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojcGFnZSBzdHJvbmcgLnBje2xpbmUtaGVpZ2h0OjM0cHg7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KLmZre2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9DQoucGN7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2hlaWdodDozNXB4O3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5wYzpob3Zlcnt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojc190YWIgYXt3aWR0aDo1OXB4O2xpbmUtaGVpZ2h0OjQ0cHh9DQojc190YWIgYnt3aWR0aDo1OXB4O2xpbmUtaGVpZ2h0OjQ0cHh9DQojc190YWJ7cGFkZGluZy1ib3R0b206OHB4O3BhZGRpbmctdG9wOjg5cHh9DQouYy1pY29uLXRpZWJhe2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcn0NCi50b2luZGV4e2Rpc3BsYXk6bm9uZX0NCi53cmFwcGVyX25ldyAuc190YWJfaW5uZXJ7cGFkZGluZy10b3A6IDEwcHg7fQ0KLndyYXBwZXJfbmV3IC5zX2lwdF93cntiYWNrZ3JvdW5kOiAjZmZmZmZmO30NCi53cmFwcGVyX25ldy53cmFwcGVyX3MgI2Zvcm0gLmJkc3VnLW5ld3t3aWR0aDogOTMlO30NCiN1IC5wZntiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Zm9udC1zaXplOjA7cGFkZGluZzoxNHB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3BhZGRpbmctdG9wOjE4cHg7cGFkZGluZy1ib3R0b206MTBweDt9DQojdSAucGY6aG92ZXJ7b3BhY2l0eToxOyAtbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2V9DQoud3JhcHBlcl9uZXcgI3U+YS5wZntjb2xvcjpyZ2JhKDAsMCwwLDApOyBtYXJnaW46IDRweCAwIDAgMjRweDt9DQoud3JhcHBlcl9uZXcgI3U+YS5wZjpob3Zlcntjb2xvcjpyZ2JhKDAsMCwwLDApfQ0KLnBmIC5jLWljb257ZGlzcGxheTpub25lIWltcG9ydGFudH0NCi5jLWljb24tdHJpYW5nbGUtZG93bntkaXNwbGF5Om5vbmV9DQouYmRwZm1lbnV7Ym94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtib3JkZXItcmFkaXVzOjJweCFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmU7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7bWFyZ2luLWxlZnQ6LTEwcHg7bWFyZ2luLXRvcDozMHB4O3otaW5kZXg6ODg4OCFpbXBvcnRhbnR9DQouYmRwZm1lbnUgYTpob3Zlcnt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5iZG51YXJyb3d7ZGlzcGxheTpub25lIWltcG9ydGFudH0NCi5zZXRwcmVme2JvcmRlci1yYWRpdXM6MnB4IDJweCAwIDA7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQouc2V0cHJlZjpob3Zlcnt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCiN1IC5sYntwYWRkaW5nOjIzcHg7Ym9yZGVyLXJhZGl1czo1MHB4O2ZvbnQtc2l6ZTowO3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjUwcHg7dG9wOjM4MDAlO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHg7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojdSAubGI6aG92ZXJ7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojdSAubGI6YWN0aXZle2JveC1zaGFkb3c6MCAxMHB4IDMwcHggcmdiYSgwLDAsMCwuMTkpLDAgNnB4IDEwcHggcmdiYSgwLDAsMCwuMjMpO3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KLnRhbmctZm9yZWdyb3VuZHtib3JkZXItcmFkaXVzOjJweDtib3gtc2hhZG93OjAgMTlweCA2MHB4IHJnYmEoMCwwLDAsLjMpLDAgMTVweCAyMHB4IHJnYmEoMCwwLDAsLjIyKX0NCiNzX3VwZnVuY19tZW51c3tkaXNwbGF5Om5vbmV9DQojYmd7YmFja2dyb3VuZC1jb2xvcjojRkZGRkZGIWltcG9ydGFudDtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjNweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztiYWNrZ3JvdW5kLXBvc2l0aW9uOjEwMCUhaW1wb3J0YW50O3otaW5kZXg6LTE7d2lkdGg6NjAwcHg7aGVpZ2h0OjM5cHg7Zm9udC1mYW1pbHk6LWFwcGxlLXN5c3RlbSwiSGVsdmV0aWNhIE5ldWUiLEhlbHZldGljYSwiTmltYnVzIFNhbnMgTCIsQXJpYWwsIkxpYmVyYXRpb24gU2FucyIsIlBpbmdGYW5nIFNDIiwiSGlyYWdpbm8gU2FucyBHQiIsIlNvdXJjZSBIYW4gU2FucyBDTiIsIlNvdXJjZSBIYW4gU2FucyBTQyIsIk1pY3Jvc29mdCBZYUhlaSIsIldlbnF1YW55aSBNaWNybyBIZWkiLCJXZW5RdWFuWWkgWmVuIEhlaSIsIlNUIEhlaXRpIixTaW1IZWksIldlblF1YW5ZaSBaZW4gSGVpIFNoYXJwIixzYW5zLXNlcmlmO3BhZGRpbmctdG9wOjVweCFpbXBvcnRhbnR9DQojaGVhZF93cmFwcGVyIC5zX2lwdHtib3JkZXI6MCFpbXBvcnRhbnQ7aGVpZ2h0OjIwcHghaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MnB4O3dpZHRoOjU4NnB4IWltcG9ydGFudH0NCiNoZWFkX3dyYXBwZXIgLm5vYmdfc19mbV9ob3Zlcntib3JkZXI6MCFpbXBvcnRhbnR9DQojaGVhZF93cmFwcGVyIC5ub2JnX3NfZm1fZm9jdXN7Ym9yZGVyOjAhaW1wb3J0YW50O2JvcmRlci10b3A6MCBzb2xpZCAjZmZmIWltcG9ydGFudDtib3JkZXItYm90dG9tOjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLWxlZnQ6MCBzb2xpZCAjZmZmIWltcG9ydGFudDtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICMzOGZ9DQoucy10aXRsZS1pbWFnZXtib3JkZXI6bm9uZSFpbXBvcnRhbnQ7Ym9yZGVyLXRvcDowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1ib3R0b206MCBzb2xpZCAjZmZmIWltcG9ydGFudDtib3JkZXItbGVmdDowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1yaWdodDowIHNvbGlkICNmZmYhaW1wb3J0YW50fQ0KI3NfbGdfaW1ne2Rpc3BsYXk6bm9uZX0NCiNmb3Jtey13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOjAuMnM7YW5pbWF0aW9uLWR1cmF0aW9uOjAuMnM7LXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlOmJvdGg7YW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO2FuaW1hdGlvbi1uYW1lOmZhZGVJblVwOy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6ZmFkZUluVXA7YW5pbWF0aW9uLWRlbGF5Oi4zczstd2Via2l0LWFuaW1hdGlvbi1kZWxheTouM3N9DQpib2R5Om5vdChbbmV3c10pICNoZWFkX3dyYXBwZXIgI2Zvcm0uZm17bWluLXdpZHRoOiA1MCU7d2lkdGg6IDExMCU7fQ0KLnMtcC10b3B7dHJhbnNmb3JtOnNjYWxlKC44KTtib3R0b206OXB4IWltcG9ydGFudH0NCi5tbmF2e2Rpc3BsYXk6bm9uZX0NCiN1X3NwIC5tbmF2e2Rpc3BsYXk6bm9uZX0NCiN1MSBhLmxie3BhZGRpbmc6MjNweDtib3JkZXItcmFkaXVzOjUwJTtmb250LXNpemU6MDtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDo0NHB4O3RvcDoxMDQwJTtiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ05EWWdORFlpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRFEySURRMk95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krQ2p4emRIbHNaU0IwZVhCbFBTSjBaWGgwTDJOemN5SStDZ2t1YzNRd2UyWnBiR3c2STBaR1JrWkdSanQ5Q2p3dmMzUjViR1UrQ2p4d1lYUm9JR05zWVhOelBTSnpkREFpSUdROUlrMHlNeXd5TTJNeUxqa3NNQ3cxTGpJdE1pNHpMRFV1TWkwMUxqSnpMVEl1TXkwMUxqSXROUzR5TFRVdU1uTXROUzR5TERJdU15MDFMaklzTlM0eVV6SXdMakVzTWpNc01qTXNNak42SUUweU15d3lOUzQyQ2dsakxUTXVOU3d3TFRFd0xqUXNNUzQzTFRFd0xqUXNOUzR5ZGpJdU5tZ3lNQzQzZGkweUxqWkRNek11TkN3eU55NHpMREkyTGpVc01qVXVOaXd5TXl3eU5TNDJlaUl2UGdvOEwzTjJaejRLIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweDt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1tb3otdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstd2Via2l0LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW8tdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztsaW5lLWhlaWdodDowO3otaW5kZXg6MTAwfQ0KI3UxIGEubGI6aG92ZXJ7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojdTEgYS5sYjphY3RpdmV7Ym94LXNoYWRvdzowIDEwcHggMzBweCByZ2JhKDAsMCwwLC4xOSksMCA2cHggMTBweCByZ2JhKDAsMCwwLC4yMyk7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstbW96LXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy1vLXRyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQojdTEgYS5wZntiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Zm9udC1zaXplOjA7cGFkZGluZzoxNHB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3otaW5kZXg6MH0NCiN1MSBhLmJyaXtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMCk7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2ZvbnQtc2l6ZTowO3BhZGRpbmc6MnB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO2JvcmRlcjpub25lO21hcmdpbi10b3A6MTJweH0NCiN3cmFwcGVyIC5iZGJyaWltZ3RpdGxle3BhZGRpbmctdG9wOjIzcHh9DQojd3JhcHBlciAuYmRicmkuYmRicmlpbWcgLmJkbWFpbmxpbmsgYXtib3JkZXI6bm9uZX0NCiN3cmFwcGVyIC5iZGJyaXt6LWluZGV4OjJ9DQojd3JhcHBlciAjdV9zcCAuc19icml7cGFkZGluZzo1cHg7Ym9yZGVyLXJhZGl1czo1MCU7Zm9udC1zaXplOjA7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejROQ2p3aExTMGdSMlZ1WlhKaGRHOXlPaUJCWkc5aVpTQkpiR3gxYzNSeVlYUnZjaUF4T1M0eUxqRXNJRk5XUnlCRmVIQnZjblFnVUd4MVp5MUpiaUF1SUZOV1J5QldaWEp6YVc5dU9pQTJMakF3SUVKMWFXeGtJREFwSUNBdExUNE5Danh6ZG1jZ2RtVnljMmx2YmowaU1TNHhJaUJwWkQwaTVadSs1YkdDWHpFaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpSUhnOUlqQndlQ0lnZVQwaU1IQjRJZzBLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0RRbzhjM1I1YkdVZ2RIbHdaVDBpZEdWNGRDOWpjM01pUGcwS0NTNXpkREI3Wm1sc2JEb2pSa1pHUmtaR08zME5Dand2YzNSNWJHVStEUW84Y0dGMGFDQmpiR0Z6Y3owaWMzUXdJaUJrUFNKTk1UQXNNVE5vTTNZdE0yZ3RNMVl4TTNvZ1RURTBMalVzTWpKb00zWXRNMmd0TTBNeE5DNDFMREU1TERFMExqVXNNaklzTVRRdU5Td3lNbm9nVFRFd0xESXlhRE4yTFROb0xUTldNako2SUUweE1Dd3hOeTQxYUROMkxUTm9MVE5XTVRjdU5Yb05DZ2tnVFRFMExqVXNNVGN1TldnemRpMHphQzB6UXpFMExqVXNNVFF1TlN3eE5DNDFMREUzTGpVc01UUXVOU3d4Tnk0MWVpQk5NVGtzTVRCMk0yZ3pkaTB6U0RFNWVpQk5NVFF1TlN3eE0yZ3pkaTB6YUMwelF6RTBMalVzTVRBc01UUXVOU3d4TXl3eE5DNDFMREV6ZWlCTk1Ua3NNVGN1TldnemRpMHphQzB6RFFvSlZqRTNMalY2SUUweE9Td3lNbWd6ZGkwemFDMHpWakl5ZWlJdlBnMEtQQzl6ZG1jK0RRbz0iKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7LW1vei10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczstby10cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzO2xpbmUtaGVpZ2h0OjA7ei1pbmRleDoxMDA7bWFyZ2luLXJpZ2h0OjIycHg7bWFyZ2luLXRvcDoxcHh9DQojdV9zcCAuc19iZGJyaWltZ3RpdGxle3BhZGRpbmctdG9wOjczcHh9DQojc191c2Vyc2V0dGluZ190b3B7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2ZvbnQtc2l6ZTowO3BhZGRpbmc6MTRweDtvcGFjaXR5Oi44Oy1tb3otdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTttYXJnaW4tdG9wOjEycHg7bWFyZ2luLXJpZ2h0OjRweDt6LWluZGV4Oi0xMDB9DQojc190b3Bfd3JhcHt6LWluZGV4Oi0xMDtib3JkZXItYm90dG9tOnVuc2V0O30NCiN1IC50b2luZGV4e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9DQojc191c2VybmFtZV90b3B7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bWFyZ2luLXRvcDoyNnB4O21hcmdpbi1sZWZ0OjVweDtib3JkZXI6bm9uZTtwYWRkaW5nLWxlZnQ6MTBweDtwYWRkaW5nLXJpZ2h0OjEwcHg7Ym9yZGVyLXJhZGl1czoxNnB4O21hcmdpbi1yaWdodDotM3B4fQ0KLnVzZXItbmFtZXt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnR9DQoubWVudS1hcnJvd3tkaXNwbGF5Om5vbmUhaW1wb3J0YW50fQ0KLnNfdXNlcl9uYW1lX21lbnV7dGV4dC1hbGlnbjpjZW50ZXIhaW1wb3J0YW50fQ0KLnMtdXNlci1zZXQtbWVudS5tZW51LXRvcHt3aWR0aDoxMDBweH0NCi5zLXVzZXItc2V0LW1lbnUgZGl2e2JvcmRlcjpub25lIWltcG9ydGFudDtib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHh9DQoucy11c2VyLXNldC1tZW51e3BhZGRpbmctdG9wOjA7bWFyZ2luLXRvcDozNnB4O2JvcmRlci1yYWRpdXM6MnB4IWltcG9ydGFudH0NCi5zLXVzZXItc2V0LW1lbnUgYXtwYWRkaW5nLWxlZnQ6MjVweDstbW96LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LW8tdHJhbnNpdGlvbjphbGwgLjNzIGVhc2V9DQoucy11c2VyLXNldC1tZW51IGE6aG92ZXJ7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlfQ0KI3VzZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50O21hcmdpbi10b3A6MzBweDttYXJnaW4tbGVmdDo1cHg7Ym9yZGVyOm5vbmU7cGFkZGluZy1sZWZ0OjEwcHg7cGFkZGluZy1yaWdodDoxMHB4O2JvcmRlci1yYWRpdXM6MTZweDttYXJnaW4tcmlnaHQ6LTNweDtoZWlnaHQ6MjNweDtwYWRkaW5nLXRvcDo4cHg7LXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246MXM7YW5pbWF0aW9uLWR1cmF0aW9uOjFzOy13ZWJraXQtYW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO2FuaW1hdGlvbi1maWxsLW1vZGU6Ym90aDthbmltYXRpb24tbmFtZTpib3VuY2VJblJpZ2h0Oy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6Ym91bmNlSW5SaWdodH0NCi51c2VybWVudXtib3JkZXI6bm9uZSFpbXBvcnRhbnQ7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4IWltcG9ydGFudDstd2Via2l0LWJveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7d2lkdGg6ODNweDtib3JkZXItcmFkaXVzOjJweCFpbXBvcnRhbnQ7dG9wOjM1cHghaW1wb3J0YW50O21hcmdpbjogMCBhdXRvO30NCi51c2VybmFtZSBhey1tb3otdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstby10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtib3JkZXItcmFkaXVzOjJweH0NCi51c2VybmFtZSBhOmhvdmVye2JhY2tncm91bmQ6IzM0NzZkMiFpbXBvcnRhbnQ7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlfQ0KLnVzZXJuYW1lIGE6YWN0aXZle2JhY2tncm91bmQ6IzM0NzZkMiFpbXBvcnRhbnQ7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlfQ0KI3VzZXIgLmMtaWNvbntkaXNwbGF5Om5vbmV9DQojaW1zZ3tiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7Zm9udC1zaXplOjA7cGFkZGluZzoxNHB4O29wYWNpdHk6Ljg7LW1vei10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlOy1vLXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3otaW5kZXg6MDtwYWRkaW5nLXRvcDoyNXB4O3BhZGRpbmctYm90dG9tOjIxcHh9DQojaW1zZzpob3ZlcntvcGFjaXR5OjF9DQouaGVhZF93cmFwcGVyICNiZHMtbWVzc2FnZS13cmFwcGVye3RvcDo2NHB4fQ0KLnMtbW9kLW1zZ3tib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50Oy13ZWJraXQtYm94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xNTY4NjMpIDAgM3B4IDEwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDNweCAxMHB4IWltcG9ydGFudDtib3JkZXItcmFkaXVzOjNweH0NCi5tc2ctYnRue2JvcmRlci1yYWRpdXM6MnB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQoubXNnLWJ0bjpob3Zlcntib3JkZXItcmFkaXVzOjJweDtib3gtc2hhZG93OjAgMXB4IDZweCByZ2JhKDAsMCwwLC4xMiksMCAxcHggNHB4IHJnYmEoMCwwLDAsLjEyKTt0cmFuc2l0aW9uOmFsbCA0NTBtcyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzfQ0KLm1zZy1idG46YWN0aXZle2JvcmRlci1yYWRpdXM6MnB4O2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHN9DQoubm8tdXNlOmhvdmVye2JveC1zaGFkb3c6bm9uZSFpbXBvcnRhbnR9DQoudG9wLWxvZ28gaW1ne2Rpc3BsYXk6bm9uZX0NCi50b3AtbG9nb3tiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENFdExTQkhaVzVsY21GMGIzSTZJRUZrYjJKbElFbHNiSFZ6ZEhKaGRHOXlJREU1TGpJdU1Td2dVMVpISUVWNGNHOXlkQ0JRYkhWbkxVbHVJQzRnVTFaSElGWmxjbk5wYjI0NklEWXVNREFnUW5WcGJHUWdNQ2tnSUMwdFBnbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SXVXYnZ1V3hnbDh4SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSUtDU0IyYVdWM1FtOTRQU0l3SURBZ01UQXhJRE16SWlCemRIbHNaVDBpWlc1aFlteGxMV0poWTJ0bmNtOTFibVE2Ym1WM0lEQWdNQ0F4TURFZ016TTdJaUI0Yld3NmMzQmhZMlU5SW5CeVpYTmxjblpsSWo0S1BITjBlV3hsSUhSNWNHVTlJblJsZUhRdlkzTnpJajRLQ1M1emREQjdabWxzYkRvak5EZzNPVUpFTzMwS0NTNXpkREY3Wm1sc2JEb2pSRVEwTkRNMk8zMEtDUzV6ZERKN1ptbHNiRG9qUmtaR1JrWkdPMzBLUEM5emRIbHNaVDRLUEhCaGRHZ2dZMnhoYzNNOUluTjBNQ0lnWkQwaVRUVXdMalFzTVRVdU0yTXRNeTQ0TERBdU15MDBMREl1TmkwMUxqY3NOQzQzWXkweExqZ3NNaTR5TFRVdU5TdzBMakV0Tml3MkxqZGpMVEF1Tml3ekxqTXNNUzR6TERVdU1Td3pMRFV1TjJNeExqa3NNQzQyTERZdU1pMHdMalVzT0M0MExUQXVOV2d3TGpJS0NXZ3dMakpqTWk0eUxEQXNOaTQwTERFdU1TdzRMalFzTUM0MVl6RXVPQzB3TGpZc015NDFMVE11TWl3ekxUVXVOMk10TUM0MExUSXVNUzAwTGpRdE5DNDFMVFl1TWkwMkxqZEROVFF1TWl3eE9DdzFOQzR6TERFMUxqWXNOVEF1TkN3eE5TNHplaUJOTXpjc01UUXVPQW9KWXpBc01pNDBMREV1Tml3MExqTXNNeTQwTERRdU0yTXhMamtzTUN3ekxqUXRNUzQ1TERNdU5DMDBMak5qTUMweUxqUXRNUzQyTFRRdU15MHpMalF0TkM0elV6TTNMREV5TGpVc016Y3NNVFF1T0hvZ1RUUXpMamtzT0M0Mll6QXNNaTQxTERFdU5TdzBMalVzTXk0ekxEUXVOUW9KWXpFdU9Dd3dMRE11TXkweUxqRXNNeTR6TFRRdU5WTTBPU3cwTGpFc05EY3VNU3cwTGpGRE5EVXVNeXcwTERRekxqa3NOaXcwTXk0NUxEZ3VObm9nVFRVeUxqSXNPQzQxWXpBc01pNHpMREV1TkN3MExqTXNNeTR5TERRdU0zTXpMakl0TVM0NUxETXVNaTAwTGpOekxURXVOQzAwTGpNdE15NHlMVFF1TXdvSlV6VXlMaklzTmk0eUxEVXlMaklzT0M0MWVpQk5OVGN1TlN3eE5TNDVZekFzTWk0ekxERXVOU3cwTGpNc015NHpMRFF1TTJNeExqZ3NNQ3d6TGpNdE1TNDVMRE11TXkwMExqTnpMVEV1TlMwMExqTXRNeTR6TFRRdU0wTTFPQzQ1TERFeExqWXNOVGN1TlN3eE15NDJMRFUzTGpVc01UVXVPWG9pTHo0S1BIQmhkR2dnWTJ4aGMzTTlJbk4wTVNJZ1pEMGlUVFFzTXpBdU5IWXROUzR4YURZdU5HTXhMallzTUN3eExqWXNNQzR6TERFdU5pd3lkakV1TkdNd0xERXVOaTB5TGpNc01TNDRMVE11T1N3eExqaE1OQ3d6TUM0MFREUXNNekF1TkhvZ1RUUXNNak4yTFRRdU9HZzBMakVLQ1dNeExqWXNNQ3d6TGprc01Dd3pMamtzTWk0eGRqQXVNV013TERFdU5DMHdMalVzTWk0MkxURXVPQ3d5TGpaRE1UQXVNeXd5TXl3MExESXpMRFFzTWpONklFMHhMamNzTVRaMk1UWXVNMmcyTGpSak15d3dMRFl1TWl3d0xEWXVNaTB6TGpaMkxURXVNV013TFRFdU5pMHdMakV0TWk0M0xURXVNUzB6TGpVS0NXTXhMVEF1T0N3eExqRXRNaTR6TERFdU1TMHpMalpzTUN3d1l6QXROQzQxTFRNdU1pMDBMalV0Tmk0eUxUUXVOVXd4TGpjc01UWk1NUzQzTERFMmVpSXZQZ284Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1qVXNNamd1T1dNdE1TNHhMREV1TVMwekxqTXNNUzR6TFRNdU5Td3hMak5qTFRFdU15d3dMVEl1Tnkwd0xqVXRNaTQzTFRJdU1XTXdMVEV1TkN3d0xqVXRNaTR6TERJdU1TMHlMak5qTVM0ekxEQXNNaTQ0TERBdU1TdzBMakVzTUM0MlZqSTRMamw2Q2drZ1RUSXhMalFzTXpJdU0yTXdMalFzTUN3eUxqTXRNQzR4TERNdU55MHdMamxzTUM0eUxEQXVOMmd5TGpGMkxUZ3VPV013TFRNdU5pMHlMak10TlMwMUxqY3ROV010TVM0NExEQXROQzR6TERBdU55MDBMamNzTUM0NWJEQXVOQ3d5TGpOak1TNDJMVEF1Tml3ekxUQXVOaXcwTGpJdE1DNDJDZ2xqTVM0NExEQXNNeTR6TERBdU5pd3pMak1zTWk0MlZqSTBZeTB4TFRBdU5DMHlMalF0TUM0MkxUUXVNUzB3TGpaakxUTXNNQzAwTGpVc01TNDJMVFF1TlN3MExqZERNVFl1TkN3ek1TNDRMREU1TGpZc016SXVNeXd5TVM0MExETXlMak42SWk4K0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazB6TUM0eUxERTJMakZqTUN3d0xqWXNNQzQyTERFdU1pd3hMak1zTVM0eVl6QXVPQ3d3TERFdU15MHdMallzTVM0ekxURXVNbU13TFRBdU55MHdMall0TVM0ekxURXVNeTB4TGpORE16QXVPQ3d4TkM0NExETXdMaklzTVRVdU15d3pNQzR5TERFMkxqRjZDZ2tnVFRNd0xqTXNNekl1TVdneUxqUldNVGd1TldndE1pNDBWak15TGpGNklpOCtDanh3WVhSb0lHTnNZWE56UFNKemRERWlJR1E5SWswM01TNHlMREl5TGpGb09DNDBZekF1TkN3d0xqRXNNQzQyTERBdU15d3dMallzTUM0M2RqSXVObWd0T1M0M2RpMHlMalpETnpBdU5pd3lNaTQwTERjd0xqZ3NNakl1TWl3M01TNHlMREl5TGpGNklFMDNNUzR5TERNd0xqVUtDV010TUM0MExEQXRNQzQyTFRBdU15MHdMamN0TUM0NGRpMHlMalpvT1M0M2RqSXVObU13TERBdU5DMHdMaklzTUM0M0xUQXVOaXd3TGpkSU56RXVNbm9nVFRjekxqWXNNVGhqTFRBdU1Td3dMalF0TUM0eExEQXVPUzB3TGpRc01TNDNZeTB3TGpFc01DNHpMVEF1TVN3d0xqVXRNQzR4TERBdU53b0phQzB5TGpaakxURXVNeXd3TGpFdE1TNDVMREF1T0MweUxESjJOeTQ1WXpBdU1Td3hMakVzTUM0NExERXVPQ3d5TERFdU9XZ3hNR014TGpJdE1DNHhMREV1T0Mwd0xqY3NNUzQ1TFRFdU9IWXROeTQ1WXkwd0xqRXRNUzR6TFRBdU55MHhMamt0TVM0NUxUSXVNV2d0TlFvSll6QXVNUzB3TGpNc01DNHhMVEF1T0N3d0xqTXRNUzQwWXpBdU1TMHdMalFzTUM0eExUQXVOeXd3TGpFdE1DNDVhRGN1TW5ZdE1TNDRTRFkzTGpSV01UaE1Oek11Tml3eE9FdzNNeTQyTERFNGVpSXZQZ284Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk9UTXVOeXd5TWk0M1l5MHdMalF0TUM0eExUQXVOUzB3TGpJdE1DNDFMVEF1TlhZdE1DNDJhRE11TW5Zd0xqWmpMVEF1TVN3d0xqTXRNQzR5TERBdU5DMHdMalVzTUM0MVNEa3pMamQ2SUUwNU5pNDJMREkwTGpFS0NXTXhMakV0TUM0eExERXVOaTB3TGpVc01TNDJMVEV1TkhZdE1XZ3lMak4yTFRFdU5XZ3RNaTR6ZGkweExqRm9MVEV1T0hZeExqRm9MVE11TW5ZdE1TNHhhQzB4TGpoMk1TNHhhQzB5TGpOMk1TNDFhREl1TTNZeFl6QXVNU3d3TGprc01DNDJMREV1TkN3eExqWXNNUzQwU0RrMkxqWjZDZ2tnVFRrMExqZ3NNekF1TkdNeExqWXNNQzQ0TERNdU5Dd3hMak1zTlM0MExERXVPR3d3TGprdE1TNDNZeTB4TGpRdE1DNHlMVEl1T1Mwd0xqWXROQzQwTFRFdU1XTXhMakV0TUM0NExESXRNUzQyTERJdU55MHlMalZqTUM0ekxUQXVOQ3d3TGpRdE1DNDVMREF1TWkweExqTUtDV010TUM0ekxUQXVOaTB3TGpndE1DNDVMVEV1TkMwd0xqbG9MVGwyTVM0MWFEY3VOMk13TGpJc01Dd3dMalFzTUM0eExEQXVOQ3d3TGpGek1Dd3dMakV0TUM0eExEQXVNMk10TUM0MkxEQXVOaTB4TGpRc01TNHpMVEl1TXl3eExqaGpMVEV1TWkwd0xqY3RNaTR4TFRFdU15MHlMalF0TVM0NGFDMHlMaklLQ1dNd0xqa3NNU3d4TGpnc01TNDVMREl1T1N3eUxqZGpMVEV1Tml3d0xqWXRNeTR6TERFdU1TMDBMamtzTVM0emJEQXVPU3d4TGpaRE9URXVNeXd6TVM0NExEa3pMaklzTXpFdU1TdzVOQzQ0TERNd0xqUjZJRTA0T0M0ekxESTFMakoyTFRaak1DNHhMVEF1Tml3d0xqTXRNQzQ1TERBdU9DMHdMamtLQ1dneE1TNDRkaTB4TGpaSU9UVmpMVEF1TVMwd0xqRXRNaTR5TFRBdU1TMHlMaklzTUdndE5DNDNZeTB4TGpFc01DNHhMVEV1Tnl3d0xqa3RNUzQ0TERJdU1sWXlOV013TGpFc01pNHhMVEF1TkN3MExqUXRNUzR4TERZdU4yd3hMamtzTUM0MkNnbERPRGN1T1N3eU9TNDVMRGc0TGpNc01qY3VOaXc0T0M0ekxESTFMako2SWk4K0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERJaUlHUTlJazAwTmk0ekxESTBMakpqTUM0MkxEQXNNUzR5TERBdU1Td3hMamNzTUM0MGRqTXVOR013TERBdU15MHdMallzTVMweExqa3NNV010TVM0MUxEQXRNUzQ0TFRBdU5pMHhMamd0TWk0eGRpMHdMallLQ1VNME5DNHlMREkwTGpnc05EUXVOeXd5TkM0eUxEUTJMak1zTWpRdU1ub2dUVFE1TGpJc01qQXVOMGcwT0hZeUxqVkRORGN1Tml3eU15NHhMRFEzTERJekxEUTJMak1zTWpOakxUSXVOeXd3TFRNdU15d3hMVE11TXl3ekxqVjJNQzR6WXpBc01pNDBMREF1T1N3ekxqTXNNeTR5TERNdU13b0pZekF1T0N3d0xERXVNeTB3TGpFc01TNDRMVEF1Tld3d0xqRXNNQzQyYURFdU1VdzBPUzR5TERJd0xqZE1ORGt1TWl3eU1DNDNlaUl2UGdvOGNHRjBhQ0JqYkdGemN6MGljM1F5SWlCa1BTSk5OVFl1Tnl3eU0yZ3RNUzR5ZGpVdU1tTXRNQzQyTERBdU5DMHhMamNzTUM0MkxUSXVOQ3d3TGpaakxUQXVPQ3d3TFRFdE1DNDBMVEV0TVM0emRpMDBMalpvTFRFdU1YWTBMamhqTUN3eExqWXNNQzQxTERJdU15d3lMakVzTWk0ekNnbGpNU3d3TERJdU1TMHdMak1zTWk0MkxUQXVObXd3TGpFc01DNDJhREV1TVZZeU0zb2lMejRLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUa3lMamNzTVRVdU4yTXdMVEF1Tnl3d0xqWXRNUzR6TERFdU1pMHhMak5qTUM0MkxEQXNNUzR5TERBdU5pd3hMaklzTVM0elV6azBMalVzTVRjc09UTXVPU3d4TjBNNU15NHpMREUyTGprc09USXVOeXd4Tmk0ekxEa3lMamNzTVRVdU4zb2lMejRLUEM5emRtYytDZz09Iik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyO2hlaWdodDoxMDBweDt3aWR0aDoyMDBweH0NCiN1X3NwIC5zX2JyaXtib3JkZXI6MCFpbXBvcnRhbnR9DQoucGFzcy10ZXh0LWlucHV0e2JhY2tncm91bmQtaW1hZ2U6bm9uZSFpbXBvcnRhbnR9DQoucGFzcy10ZXh0LWlucHV0LWZvY3Vze2JhY2tncm91bmQtaW1hZ2U6bm9uZSFpbXBvcnRhbnR9DQojcGFzc3BvcnQtbG9naW4tcG9we2ZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0sIkhlbHZldGljYSBOZXVlIixIZWx2ZXRpY2EsIk5pbWJ1cyBTYW5zIEwiLEFyaWFsLCJMaWJlcmF0aW9uIFNhbnMiLCJQaW5nRmFuZyBTQyIsIkhpcmFnaW5vIFNhbnMgR0IiLCJTb3VyY2UgSGFuIFNhbnMgQ04iLCJTb3VyY2UgSGFuIFNhbnMgU0MiLCJNaWNyb3NvZnQgWWFIZWkiLCJXZW5xdWFueWkgTWljcm8gSGVpIiwiV2VuUXVhbllpIFplbiBIZWkiLCJTVCBIZWl0aSIsU2ltSGVpLCJXZW5RdWFuWWkgWmVuIEhlaSBTaGFycCIsc2Fucy1zZXJpZjtib3JkZXItcmFkaXVzOjJweH0NCiNUQU5HUkFNX19QU1BfMl9fdGl0bGVUZXh0e2ZvbnQtZmFtaWx5OkhlbHZldGljYSwiTWljcm9zb2Z0IFlhaGVpIFVJIExpZ2h0In0NCi5wYXNzLWZndHB3ZHtmb250LWZhbWlseTpIZWx2ZXRpY2EsIk1pY3Jvc29mdCBZYWhlaSBVSSIhaW1wb3J0YW50fQ0KLnBhc3Mtc21zLWJ0bntmb250LWZhbWlseTpIZWx2ZXRpY2EsIk1pY3Jvc29mdCBZYWhlaSBVSSIhaW1wb3J0YW50fQ0KLnBhc3MtcmVnbGlua3tmb250LWZhbWlseTpIZWx2ZXRpY2EsIk1pY3Jvc29mdCBZYWhlaSBVSSIhaW1wb3J0YW50fQ0KLnRhbmctZm9yZWdyb3VuZHtib3JkZXItcmFkaXVzOjJweCFpbXBvcnRhbnQ7Ym9yZGVyOjAhaW1wb3J0YW50fQ0KLnRhbmctdGl0bGV7Ym9yZGVyLXJhZGl1czoycHggMnB4IDAgMCFpbXBvcnRhbnR9DQoudGFuZy1wYXNzLXBvcC1sb2dpbiBkaXYudGFuZy10aXRsZXtib3JkZXItcmFkaXVzOjJweCAycHggMCAwIWltcG9ydGFudH0NCi5wYXNzLWNoZWNrYm94LWlucHV0e3dpZHRoOjE3cHg7aGVpZ2h0OjE3cHg7Ym9yZGVyOiNlMGUwZTAgM3B4IHNvbGlkIWltcG9ydGFudDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmYhaW1wb3J0YW50O2JveC1zaGFkb3c6bm9uZX0NCi50YW5nLXBhc3MtcG9wLWxvZ2luLWNvbG9yLWJsdWUgLnBhc3MtYnV0dG9uOmZvY3Vze2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMTU2ODYzKSAwIDNweCAxMHB4LHJnYmEoMCwwLDAsLjIyNzQ1MSkgMCAzcHggMTBweCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE1Njg2MykgMCAzcHggMTBweCxyZ2JhKDAsMCwwLC4yMjc0NTEpIDAgM3B4IDEwcHghaW1wb3J0YW50fQ0KLnJyZWNvbS1idG4tcGFyZW50e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9DQoucy1wLXRvcHtib3R0b206LThweCFpbXBvcnRhbnR9DQppbnB1dFt0eXBlPXRleHRdOmZvY3Vze2JvcmRlcjpub25lIWltcG9ydGFudDtib3JkZXItdG9wOjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLWJvdHRvbTowIHNvbGlkICNmZmYhaW1wb3J0YW50O2JvcmRlci1sZWZ0OjAgc29saWQgI2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLXJpZ2h0OjAgc29saWQgI2ZmZiFpbXBvcnRhbnR9DQphW3NvZnRfaWRde2Rpc3BsYXk6bm9uZX0NCi5vcC1zb2Z0LWJ0bmJveCAuYy1nYXAtbGVmdC1zbWFsbHttYXJnaW4tbGVmdDowIWltcG9ydGFudDtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzM0NzZkMjtwYWRkaW5nOjdweCAxNXB4O2JvcmRlci1yYWRpdXM6MnB4O2ZvbnQtc2l6ZToxNHB4O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlfQ0KLm9wLXNvZnQtYnRuYm94IC5jLWdhcC1sZWZ0LXNtYWxsOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzcwOThEMDt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpfQ0KLnNvdXR1LWlucHV0LWltYWdle3RvcDo2cHg7bGVmdDo1cHh9DQoja3d7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0NCi5zLXNraW4taGFzYmcgI2t3e2JveC1zaGFkb3c6MCAwIDAgcmdiYSgwLDAsMCwuMil9DQoucy1za2luLWhhc2JnIC5idG5fd3J7d2lkdGg6MzVweH0NCiNzX3VzZXJzZXR0aW5nX3RvcHttYXJnaW4tdG9wOi03cHh9DQojc191c2VybmFtZV90b3B7bWFyZ2luLXRvcDo3cHh9DQojdV9zcHtwYWRkaW5nLXRvcDoxNnB4fQ0KLmlwdF9yZWN7YmFja2dyb3VuZDowIDA7YmFja2dyb3VuZC1pbWFnZTpub25lfQ0KLmlwdF9yZWM6aG92ZXJ7YmFja2dyb3VuZDowIDA7YmFja2dyb3VuZC1pbWFnZTpub25lfQ0KLmlwdF9yZWM6YWZ0ZXJ7ZGlzcGxheTpub25lO21hcmdpbi10b3A6NTBweH0NCi5iZHBmbWVudSwudXNlcm1lbnV7Ym9yZGVyOm5vbmU7Ym94LXNoYWRvdzpub25lOy13ZWJraXQtYm94LXNoYWRvdzpub25lOy1tb3otYm94LXNoYWRvdzpub25lOy1vLWJveC1zaGFkb3c6bm9uZX0NCi5xcmNvZGVDb257dmlzaWJpbGl0eTpoaWRkZW59DQojaGVhZCAuaGVhZEJsb2Nre21hcmdpbjoxMnB4IDAgNnB4IDEyMXB4fQ0KYXtjb2xvcjojMzQ3NmQyfQ0KaDMgYTpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMS4ycHggc29saWR9DQouYy1zaG93dXJse2NvbG9yOiM0Q0FGNTB9DQoub3Atc2UtbGlzdGVuLXJlY29tbWVuZDpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMS4ycHggc29saWR9DQouYy1nYXAtYm90dG9tLXNtYWxsIGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDEuMnB4IHNvbGlkfQ0KLmMtcm93IGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDEuMnB4IHNvbGlkfQ0KI3JzIGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDEuMnB4IHNvbGlkfQ0KLmhpbnRfdG9wcnFfdGlwc19pdGVtcyBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxLjJweCBzb2xpZH0NCi5jOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxLjJweCBzb2xpZH0NCmVte2NvbG9yOiNFQTQzMzV9DQoub3AtdmlkZW8tdmFzdC11bCBsaSBhe21hcmdpbi1ib3R0b206IHVuc2V0O30NCmJvZHl7YmFja2dyb3VuZC1jb2xvcjojRjdGN0Y3fQ0KI2Zvcm0gLnNfYnRue2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwwKX0NCiN3cmFwcGVyICNoZWFkIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI0OCwgMjQ4LCAyNDgsIDAuNCk7DQogICAgYm9yZGVyLWJvdHRvbTogbm9uZTsNCiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCkNCn0NCi5jLXRhYnMtbmF2e2JhY2tncm91bmQtY29sb3I6I0VFRX0NCi5jLXRhYnMtbmF2LXNlbGVjdGVke2JvcmRlci1ib3R0b206I0Y0NDMzNiAycHggc29saWQhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6IzIxOTZGMyFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiFpbXBvcnRhbnR9DQojcGFnZSBhe2JhY2tncm91bmQ6I2ZmZjtjb2xvcjojNDI0MjQyfQ0KI3BhZ2UgYTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlMGUwZTAhaW1wb3J0YW50fQ0KI3BhZ2UgYSAucGM6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZTBlMGUwfQ0KI3BhZ2Ugc3Ryb25ne2JhY2tncm91bmQtY29sb3I6IzQyODVGNCFpbXBvcnRhbnQ7Y29sb3I6I2ZmZn0NCiNwYWdlIHN0cm9uZyAucGN7YmFja2dyb3VuZC1jb2xvcjojNDI4NUY0IWltcG9ydGFudH0NCi5wYzpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlMGUwZTB9DQojc190YWIgYntib3JkZXItYm90dG9tOjNweCAjMzQ3NmQyIHNvbGlkO2NvbG9yOiMzNDc2ZDJ9DQojc190YWJ7Ym9yZGVyLWJvdHRvbTojZTBlMGUwIDFweCBzb2xpZH0NCi5iZHBmbWVudSBhOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzM0NzZkMiFpbXBvcnRhbnR9DQouc2V0cHJlZjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMzNDc2ZDIhaW1wb3J0YW50fQ0KI3UgLmxie2JhY2tncm91bmQtY29sb3I6IzM0NzZkMn0NCiN1IC5sYjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM2MThDQzd9DQojdSAubGI6YWN0aXZle2JhY2tncm91bmQtY29sb3I6IzdEQTBEMH0NCiNiZ3tiYWNrZ3JvdW5kLWNvbG9yOiNGRkYhaW1wb3J0YW50O2JhY2tncm91bmQ6I0ZGRn0NCiN1MSBhLmxie2JhY2tncm91bmQtY29sb3I6IzM0NzZkMn0NCiN1MSBhLmxiOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzYxOENDN30NCiN1MSBhLmxiOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiM3REEwRDB9DQojdV9zcCAuc19icml7YmFja2dyb3VuZC1jb2xvcjojRjQ0MzM2fQ0KI3NfdXNlcm5hbWVfdG9we2JhY2tncm91bmQtY29sb3I6I2UwZTBlMH0NCi5zLXVzZXItc2V0LW1lbnUgYTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMzNDc2ZDIhaW1wb3J0YW50fQ0KI3VzZXJ7YmFja2dyb3VuZC1jb2xvcjojZTBlMGUwfQ0KLm1zZy1zZXR0aW5nLWJ0bntiYWNrZ3JvdW5kLWNvbG9yOiMzNDc2ZDIhaW1wb3J0YW50fQ0KLm5vLXVzZXtiYWNrZ3JvdW5kLWNvbG9yOiNFNUU1RTUhaW1wb3J0YW50fQ0KLnBhc3MtdGV4dC1pbnB1dHtib3JkZXItYm90dG9tOiNlMGUwZTAgMnB4IHNvbGlkIWltcG9ydGFudDtib3JkZXItbGVmdDojZmZmIDAgc29saWQhaW1wb3J0YW50O2JvcmRlci1yaWdodDojZmZmIDAgc29saWQhaW1wb3J0YW50O2JvcmRlci10b3A6I2ZmZiAwIHNvbGlkIWltcG9ydGFudH0NCi5wYXNzLXRleHQtaW5wdXQtZm9jdXN7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDJweCBzb2xpZCFpbXBvcnRhbnQ7Ym9yZGVyLWxlZnQ6I2ZmZiAwIHNvbGlkIWltcG9ydGFudDtib3JkZXItcmlnaHQ6I2ZmZiAwIHNvbGlkIWltcG9ydGFudDtib3JkZXItdG9wOiNmZmYgMCBzb2xpZCFpbXBvcnRhbnR9DQoudGFuZy1wYXNzLXBvcC1sb2dpbi1jb2xvci1ibHVlIC5wYXNzLWJ1dHRvbntiYWNrZ3JvdW5kLWNvbG9yOiMzNDc2ZDJ9DQoudGFuZy1wYXNzLXBvcC1sb2dpbi1jb2xvci1ibHVlIC5wYXNzLWJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM2MThDQzd9DQojbGd7bWFyZ2luLWxlZnQ6LTNyZW07YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0TkNqd2hMUzBnUjJWdVpYSmhkRzl5T2lCQlpHOWlaU0JKYkd4MWMzUnlZWFJ2Y2lBeE9TNHlMakVzSUZOV1J5QkZlSEJ2Y25RZ1VHeDFaeTFKYmlBdUlGTldSeUJXWlhKemFXOXVPaUEyTGpBd0lFSjFhV3hrSURBcElDQXRMVDROQ2p4emRtY2dkbVZ5YzJsdmJqMGlNUzR4SWlCcFpEMGk1YkdDWHpFaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpSUhnOUlqQndlQ0lnZVQwaU1IQjRJZzBLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNalU1SURFeE5pSWdjM1I1YkdVOUltVnVZV0pzWlMxaVlXTnJaM0p2ZFc1a09tNWxkeUF3SURBZ01qVTVJREV4TmpzaUlIaHRiRHB6Y0dGalpUMGljSEpsYzJWeWRtVWlQZzBLUEhOMGVXeGxJSFI1Y0dVOUluUmxlSFF2WTNOeklqNE5DZ2t1YzNRd2UyWnBiR3c2SXpReU9EVkdORHQ5RFFvSkxuTjBNWHRtYVd4c09pTkZRVFF6TXpVN2ZRMEtDUzV6ZERKN1ptbHNiRG9qUmtaR1JrWkdPMzBOQ2p3dmMzUjViR1UrRFFvOGNHRjBhQ0JqYkdGemN6MGljM1F3SWlCa1BTSk5NVEk0TGpJc056ZGpMVFV1TkN3d0xqUXROUzQyTERNdU55MDRMakVzTmk0M1l5MHlMalVzTXk0eExUY3VOeXcxTGpndE9DNDBMRGt1TldNdE1DNDRMRFF1Tnl3eExqZ3NOeTR5TERRdU15dzRZekl1Tnl3d0xqa3NPQzQ0TFRBdU55d3hNUzQ1TFRBdU53MEtDV2d3TGpOb01DNHpZek11TVN3d0xEa3VNU3d4TGpZc01URXVPU3d3TGpkak1pNDFMVEF1T1N3MExqa3ROQzQxTERRdU15MDRZeTB3TGpVdE15MDJMakl0Tmk0MExUZ3VOeTA1TGpWRE1UTXpMallzT0RBdU55d3hNek11Tnl3M055NDBMREV5T0M0eUxEYzNlaUJOTVRBNUxqTXNOell1TXcwS0NXTXdMRE11TkN3eUxqSXNOaTR4TERRdU9DdzJMakZqTWk0M0xEQXNOQzQ0TFRJdU55dzBMamd0Tmk0eGN5MHlMakl0Tmk0eExUUXVPQzAyTGpGVE1UQTVMak1zTnpNc01UQTVMak1zTnpZdU0zb2dUVEV4T1N3Mk55NDFZekFzTXk0MUxESXVNU3cyTGpRc05DNDJMRFl1TkEwS0NXTXlMallzTUN3MExqY3RNaTQ1TERRdU55MDJMalJ6TFRJdU1TMDJMalF0TkM0M0xUWXVORU14TWpFc05qRXNNVEU1TERZekxqa3NNVEU1TERZM0xqVjZJRTB4TXpBdU55dzJOeTQwWXpBc015NHpMRElzTml3MExqVXNObk0wTGpVdE1pNDNMRFF1TlMwMll6QXRNeTR6TFRJdE5pMDBMalV0TmcwS0NWTXhNekF1Tnl3Mk5DNHhMREV6TUM0M0xEWTNMalI2SUUweE16Z3VNaXczTnk0NFl6QXNNeTR6TERJdU1TdzJMRFF1Tml3Mll6SXVOaXd3TERRdU55MHlMamNzTkM0M0xUWmpNQzB6TGpNdE1pNHhMVFl0TkM0M0xUWkRNVFF3TGpJc056RXVPQ3d4TXpndU1pdzNOQzQxTERFek9DNHlMRGMzTGpoNklnMEtDUzgrRFFvOGNHRjBhQ0JqYkdGemN6MGljM1F4SWlCa1BTSk5Oakl1T0N3NU9DNHlWamt4YURsak1pNHlMREFzTWk0ekxEQXVOQ3d5TGpNc01pNDRkakpqTUN3eUxqTXRNeTR5TERJdU5TMDFMalVzTWk0MWFDMDFMamhXT1RndU1ub2dUVFl5TGpnc09EY3VPRlk0TVdnMUxqZ05DZ2xqTWk0ekxEQXNOUzQxTERBc05TNDFMRE4yTUM0eFl6QXNNaTB3TGpjc015NDNMVEl1TlN3ekxqZEROekV1Tml3NE55NDRMRFl5TGpnc09EY3VPQ3cyTWk0NExEZzNMamg2SUUwMU9TNDFMRGMzTGpsMk1qTm9PUzR4WXpRdU15d3dMRGd1Tnl3d0xEZ3VOeTAxTGpGMkxURXVOUTBLQ1dNd0xUSXVNeTB3TGpJdE15NDRMVEV1TlMwMExqbGpNUzQwTFRFdU1Td3hMalV0TXk0eUxERXVOUzAxTGpGc01Dd3dZekF0Tmk0ekxUUXVOUzAyTGpNdE9DNDNMVFl1TTB3MU9TNDFMRGMzTGpsTU5Ua3VOU3czTnk0NWVpSXZQZzBLUEhCaGRHZ2dZMnhoYzNNOUluTjBNU0lnWkQwaVRUa3lMalFzT1RZdU1XTXRNUzQxTERFdU5pMDBMallzTVM0NExUUXVPU3d4TGpoakxURXVPU3d3TFRNdU9DMHdMamN0TXk0NExUSXVPV013TFRJc01DNDNMVE11TXl3eUxqa3RNeTR6WXpFdU9Dd3dMRFFzTUM0eUxEVXVPQ3d3TGpoV09UWXVNWG9OQ2drZ1RUZzNMak1zTVRBd0xqbGpNQzQxTERBc015NHpMVEF1TWl3MUxqSXRNUzR6YkRBdU15d3hhREl1T1ZZNE9HTXdMVFV1TVMwekxqSXROeTR4TFRndE55NHhZeTB5TGpVc01DMDJMakVzTVMwMkxqWXNNUzR5YkRBdU5pd3pMakpqTWk0eUxUQXVPQ3cwTGpJdE1DNDVMRFV1T1Mwd0xqa05DZ2xqTWk0MkxEQXNOQzQyTERBdU9TdzBMallzTXk0M2RqRXVNV010TVM0MExUQXVOUzB6TGpRdE1DNDVMVFV1T0Mwd0xqbGpMVFF1TWl3d0xUWXVNeXd5TGpNdE5pNHpMRFl1TmtNNE1DNHpMREV3TUM0ekxEZzBMamNzTVRBd0xqa3NPRGN1TXl3eE1EQXVPWG9pTHo0TkNqeHdZWFJvSUdOc1lYTnpQU0p6ZERFaUlHUTlJazA1T1M0M0xEYzRMakZqTUN3d0xqa3NNQzQ1TERFdU55d3hMamdzTVM0M1l6RXVNU3d3TERFdU9TMHdMamdzTVM0NUxURXVOMk13TFRFdE1DNDRMVEV1T0MweExqa3RNUzQ0UXpFd01DNDJMRGMyTGpNc09Ua3VOeXczTnl3NU9TNDNMRGM0TGpGNkRRb0pJRTA1T1M0NUxERXdNQzQyYURNdU5GWTRNUzQxYUMwekxqUldNVEF3TGpaNklpOCtEUW84Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1UVTNMallzT0RZdU5tZ3hNUzQ0WXpBdU5Td3dMakVzTUM0NExEQXVOQ3d3TGprc01YWXpMalpvTFRFekxqZDJMVE11TmtNeE5UWXVOeXc0Tnl3eE5UY3NPRFl1Tnl3eE5UY3VOaXc0Tmk0MmVpQk5NVFUzTGpZc09UZ3VOQTBLQ1dNdE1DNDJMREF0TUM0NUxUQXVOQzB4TFRFdU1YWXRNeTQyYURFekxqZDJNeTQzWXpBc01DNDJMVEF1TXl3eExUQXVPU3d4U0RFMU55NDJlaUJOTVRZd0xqa3NPREF1TjJNdE1DNHhMREF1TlMwd0xqSXNNUzR6TFRBdU5Td3lMalJqTFRBdU1Td3dMalF0TUM0eExEQXVOeTB3TGpJc01XZ3RNeTQzRFFvSll5MHhMamdzTUM0eExUSXVOeXd4TGpFdE1pNDRMREl1T0ZZNU9HTXdMakVzTVM0MkxERXVNU3d5TGpVc01pNDRMREl1TjJneE5DNHhZekV1Tnkwd0xqRXNNaTQyTFRFc01pNDNMVEl1TlZZNE4yTXRNQzR4TFRFdU9DMHhMVEl1TnkweUxqY3RNaTQ1YUMwM0RRb0pZekF1TVMwd0xqUXNNQzR5TFRFdU1Td3dMalF0TW1Nd0xqRXRNQzQyTERBdU1TMHhMREF1TWkweExqTm9NVEF1TW5ZdE1pNDJhQzB5TWk0eWRqSXVOa3d4TmpBdU9TdzRNQzQzVERFMk1DNDVMRGd3TGpkNklpOCtEUW84Y0dGMGFDQmpiR0Z6Y3owaWMzUXhJaUJrUFNKTk1UZzVMalFzT0RjdU5HTXRNQzQxTFRBdU1TMHdMamN0TUM0ekxUQXVOeTB3TGpkMkxUQXVPV2cwTGpWMk1DNDVZeTB3TGpFc01DNDBMVEF1TXl3d0xqWXRNQzQzTERBdU4wZ3hPRGt1TkhvZ1RURTVNeTQwTERnNUxqUU5DZ2xqTVM0MUxUQXVNU3d5TGpJdE1DNDNMREl1TXkweVZqZzJhRE11TW5ZdE1pNHhhQzB6TGpKMkxURXVObWd0TWk0MWRqRXVObWd0TkM0MWRpMHhMalpvTFRJdU5uWXhMalpvTFRNdU1sWTRObWd6TGpKMk1TNDBZekF1TVN3eExqTXNNQzQ0TERJc01pNHlMREpJTVRrekxqUjZJRTB4T1RBdU9TdzVPQzR6RFFvSll6SXVNeXd4TGpFc05DNDRMREV1T1N3M0xqWXNNaTQyYkRFdU1pMHlMalJqTFRJdE1DNHpMVFF1TVMwd0xqZ3ROaTR5TFRFdU5tTXhMalV0TVM0eExESXVPQzB5TGpJc015NDRMVE11TldNd0xqUXRNQzQyTERBdU5TMHhMaklzTUM0ekxURXVPV010TUM0MExUQXVPQzB4TGpFdE1TNHlMVEl0TVM0eURRb0phQzB4TWk0M2RqSXVNV2d4TUM0NFl6QXVNeXd3TERBdU5Td3dMakVzTUM0MkxEQXVNbk13TERBdU1pMHdMaklzTUM0MFl5MHdMamtzTUM0NUxUSXNNUzQ0TFRNdU15d3lMalpqTFRFdU55MHhMVEl1T1MweExqa3RNeTQwTFRJdU5tZ3RNeTR4WXpFdU1pd3hMalFzTWk0MkxESXVOeXcwTGpFc015NDREUW9KWXkweUxqTXNNQzQ1TFRRdU5pd3hMalV0Tmk0NUxERXVPR3d4TGpNc01pNHlRekU0TlM0NUxERXdNQzR5TERFNE9DNDJMRGs1TGpNc01Ua3dMamtzT1RndU0zb2dUVEU0TVM0M0xEa3dMamwyTFRndU5XTXdMakV0TUM0NExEQXVOQzB4TGpJc01TNHhMVEV1TTJneE5pNDNkaTB5TGpOb0xUZ3VNdzBLQ1dNdE1DNHhMVEF1TWkwekxqRXRNQzR4TFRNdU1Td3dhQzAyTGpkakxURXVOU3d3TGpJdE1pNDBMREV1TXkweUxqVXNNeTR4ZGpndU4yTXdMakVzTXkwd0xqVXNOaTR5TFRFdU5pdzVMalJzTWk0M0xEQXVPRU14T0RFdU1TdzVOeTQyTERFNE1TNDNMRGswTGpNc01UZ3hMamNzT1RBdU9Yb2lMejROQ2p4d1lYUm9JR05zWVhOelBTSnpkRElpSUdROUlrMHhNakl1TlN3NE9TNDFZekF1T0N3d0xERXVOeXd3TGpJc01pNDBMREF1TlhZMExqaGpNQ3d3TGpRdE1DNDVMREV1TkMweUxqY3NNUzQwWXkweUxqRXNNQzB5TGpZdE1DNDVMVEl1TmkweUxqbDJMVEF1T0EwS0NVTXhNVGt1TlN3NU1DNDBMREV5TUM0eUxEZzVMalVzTVRJeUxqVXNPRGt1TlhvZ1RURXlOaTQyTERnMExqWm9MVEV1TjNZekxqVmpMVEF1Tmkwd0xqSXRNUzQxTFRBdU15MHlMalF0TUM0ell5MHpMamdzTUMwMExqWXNNUzQwTFRRdU5pdzBMamwyTUM0MERRb0pZekFzTXk0MExERXVNeXcwTGpZc05DNDFMRFF1Tm1NeExqRXNNQ3d4TGprdE1DNHlMREl1Tmkwd0xqZHNNQzR5TERBdU9HZ3hMalZNTVRJMkxqWXNPRFF1Tmt3eE1qWXVOaXc0TkM0MmVpSXZQZzBLUEhCaGRHZ2dZMnhoYzNNOUluTjBNaUlnWkQwaVRURXpOeTR4TERnM0xqaG9MVEV1TjNZM0xqUmpMVEF1T1N3d0xqVXRNaTQwTERBdU9DMHpMalFzTUM0NFl5MHhMakVzTUMweExqUXRNQzQyTFRFdU5DMHhMamwyTFRZdU5VZ3hNamwyTmk0NFl6QXNNaTR6TERBdU55d3pMaklzTWk0NUxETXVNZzBLQ1dNeExqUXNNQ3d5TGprdE1DNDBMRE11Tmkwd0xqaHNNQzR4TERBdU9HZ3hMalZXT0RjdU9Ib2lMejROQ2p4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMHhPRGN1T1N3M055NDFZekF0TVN3d0xqZ3RNUzQ0TERFdU55MHhMamh6TVM0M0xEQXVPQ3d4TGpjc01TNDRjeTB3TGpnc01TNDRMVEV1Tnl3eExqaERNVGc0TGpjc056a3VNaXd4T0RjdU9TdzNPQzQwTERFNE55NDVMRGMzTGpWNklpOCtEUW84TDNOMlp6NE5DZz09Iil9DQojZm9ybSAuc19idG57YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6UTNOemxDUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB4TkM0NExESXhMalZqTFRBdU5Dd3dMVEF1Tnl3d0xURXVNUzB3TGpGakxUSXVNUzB3TGpNdE15NDVMVEV1TkMwMUxqSXRNMk10TVM0ekxURXVOeTB4TGpndE15NDNMVEV1TmkwMUxqaGpNQzR6TFRJdU1Td3hMalF0TXk0NUxETXROUzR5Q2dsak1TNDNMVEV1TXl3ekxqZ3RNUzQ0TERVdU9DMHhMalpqTWk0eExEQXVNeXd6TGprc01TNDBMRFV1TWl3ell6RXVNeXd4TGpjc01TNDRMRE11T0N3eExqWXNOUzQ0WXkwd0xqTXNNaTR4TFRFdU5Dd3pMamt0TXl3MUxqSkRNVGd1TWl3eU1Td3hOaTQxTERJeExqVXNNVFF1T0N3eU1TNDFlZ29KSUUweE5DNDRMRGd1TVdNdE1TNHlMREF0TWk0MExEQXVOQzB6TGpNc01TNHhZeTB5TGpRc01TNDRMVEl1T1N3MUxqTXRNU3czTGpkak1TNDRMREl1TkN3MUxqTXNNaTQ1TERjdU55d3hZekV1TWkwd0xqa3NNUzQ1TFRJdU1pd3lMakV0TXk0Mll6QXVNaTB4TGpVdE1DNHlMVEl1T1MweExqRXROQzR4Q2dsVE1UY3NPQzQwTERFMUxqVXNPQzR5UXpFMUxqTXNPQzR5TERFMUxEZ3VNU3d4TkM0NExEZ3VNWG9pTHo0S1BHYytDZ2s4Wno0S0NRazhjR0YwYUNCamJHRnpjejBpYzNRd0lpQmtQU0pOTWpVdU15d3lOeTQxVERJMUxqTXNNamN1TldNdE1DNDJMREF1TkMweExqUXNNQzR6TFRFdU9DMHdMakpzTFRVdU1TMDJMamRqTFRBdU5DMHdMall0TUM0ekxURXVOQ3d3TGpJdE1TNDRiREFzTUFvSkNRbGpNQzQyTFRBdU5Dd3hMalF0TUM0ekxERXVPQ3d3TGpKc05TNHhMRFl1TjBNeU5pd3lOaTR6TERJMUxqa3NNamN1TVN3eU5TNHpMREkzTGpWNklpOCtDZ2s4TDJjK0Nqd3ZaejRLUEM5emRtYytDZz09IikhaW1wb3J0YW50fQ0KI2Zvcm0gLnNfYnRuX3dye2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTXpJZ016SWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lETXlJRE15T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStDanh6ZEhsc1pTQjBlWEJsUFNKMFpYaDBMMk56Y3lJK0Nna3VjM1F3ZTJacGJHdzZJelEzTnpsQ1JEdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWsweE5DNDRMREl4TGpWakxUQXVOQ3d3TFRBdU55d3dMVEV1TVMwd0xqRmpMVEl1TVMwd0xqTXRNeTQ1TFRFdU5DMDFMakl0TTJNdE1TNHpMVEV1TnkweExqZ3RNeTQzTFRFdU5pMDFMamhqTUM0ekxUSXVNU3d4TGpRdE15NDVMRE10TlM0eUNnbGpNUzQzTFRFdU15d3pMamd0TVM0NExEVXVPQzB4TGpaak1pNHhMREF1TXl3ekxqa3NNUzQwTERVdU1pd3pZekV1TXl3eExqY3NNUzQ0TERNdU9Dd3hMallzTlM0NFl5MHdMak1zTWk0eExURXVOQ3d6TGprdE15dzFMakpETVRndU1pd3lNU3d4Tmk0MUxESXhMalVzTVRRdU9Dd3lNUzQxZWdvSklFMHhOQzQ0TERndU1XTXRNUzR5TERBdE1pNDBMREF1TkMwekxqTXNNUzR4WXkweUxqUXNNUzQ0TFRJdU9TdzFMak10TVN3M0xqZGpNUzQ0TERJdU5DdzFMak1zTWk0NUxEY3VOeXd4WXpFdU1pMHdMamtzTVM0NUxUSXVNaXd5TGpFdE15NDJZekF1TWkweExqVXRNQzR5TFRJdU9TMHhMakV0TkM0eENnbFRNVGNzT0M0MExERTFMalVzT0M0eVF6RTFMak1zT0M0eUxERTFMRGd1TVN3eE5DNDRMRGd1TVhvaUx6NEtQR2MrQ2drOFp6NEtDUWs4Y0dGMGFDQmpiR0Z6Y3owaWMzUXdJaUJrUFNKTk1qVXVNeXd5Tnk0MVRESTFMak1zTWpjdU5XTXRNQzQyTERBdU5DMHhMalFzTUM0ekxURXVPQzB3TGpKc0xUVXVNUzAyTGpkakxUQXVOQzB3TGpZdE1DNHpMVEV1TkN3d0xqSXRNUzQ0YkRBc01Bb0pDUWxqTUM0MkxUQXVOQ3d4TGpRdE1DNHpMREV1T0N3d0xqSnNOUzR4TERZdU4wTXlOaXd5Tmk0ekxESTFMamtzTWpjdU1Td3lOUzR6TERJM0xqVjZJaTgrQ2drOEwyYytDand2Wno0S1BDOXpkbWMrQ2c9PSIpIWltcG9ydGFudH0NCi5jLWljb24tdGllYmF7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNalFnTWpRaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURJMElESTBPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6TTNRVUpGTXp0OUNna3VjM1F4ZTJacGJHdzZJMFpHUmtaR1JqdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWsweU1DNDVMREl6TGpOSU15NHhZeTB4TGpFc01DMHlMVEF1T1MweUxUSldNaTQ0WXpBdE1TNHhMREF1T1MweUxESXRNbWd4Tnk0NFl6RXVNU3d3TERJc01DNDVMRElzTW5ZeE9DNDFRekl5TGprc01qSXVOQ3d5TWl3eU15NHpMREl3TGprc01qTXVNM29pQ2drdlBnbzhaejRLQ1R4d1lYUm9JR05zWVhOelBTSnpkREVpSUdROUlrMDFMaklzTVRrdU9VdzBMREU1TGpKak1TNDFMVEV1T1N3eUxqTXRNeTQ1TERJdU5DMDFMamhqTUMweExEQXVNUzB6TGpFc01DNHhMVFl1TTBnNFl6QXNNaTR5TERBc05DNHpMVEF1TVN3MkxqUmpNQ3d3TGpZdE1DNHhMREV1TWkwd0xqTXNNUzQ0Q2drSmFERXVNV013TGpVc01DNDRMREV1TWl3eUxqUXNNaTR5TERRdU5rZzVZeTB3TGpZdE1TNDFMVEV1TWkweUxqZ3RNUzQyTFRNdU9VTTNMREUzTGpJc05pNHpMREU0TGpZc05TNHlMREU1TGpsNklFMDBMakVzTVRRdU9GWTJMakZqTUMweExqSXNNQzQxTFRFdU9Dd3hMall0TVM0NGFETUtDUWxqTVN3d0xERXVOaXd3TGpjc01TNDJMREV1T0hZNExqWklPQzQ1VmpZdU0yTXdMVEF1TkMwd0xqTXRNQzQyTFRBdU5pMHdMalpvTFRKakxUQXVOQ3d3TFRBdU5pd3dMakl0TUM0MkxEQXVOblk0TGpWSU5DNHhlaUJOTVRJdU9Td3hPUzQxWXkweExqRXNNQzB4TGpjdE1DNDJMVEV1T0MweExqWldNVE1LQ1Fsak1DMHhMakVzTUM0M0xURXVOeXd4TGpndE1TNDRhREZXTkM0eGFERXVOM1l5TGpWSU1qQldPR2d0TkM0emRqTXVNbWd4TGpoak1TNHhMREFzTVM0M0xEQXVOeXd4TGpnc01TNDRkalF1T0dNd0xERXVNUzB3TGpZc01TNDJMVEV1T0N3eExqZElNVEl1T1hvZ1RURXlMamdzTVRNdU0zWTBMak1LQ1Fsak1Dd3dMalFzTUM0ekxEQXVOeXd3TGpjc01DNDNhRE11TW1Nd0xqVXNNQ3d3TGpjdE1DNHpMREF1T0Mwd0xqZDJMVFF1TkdNd0xUQXVOQzB3TGpNdE1DNDNMVEF1Tnkwd0xqZG9MVE11TTBNeE15NHhMREV5TGpZc01USXVPU3d4TWk0NExERXlMamdzTVRNdU0zb2lMejRLUEM5blBnbzhMM04yWno0SyIpfQ0KI3UgLnBme2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTXpJZ016SWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lETXlJRE15T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStDanh6ZEhsc1pTQjBlWEJsUFNKMFpYaDBMMk56Y3lJK0Nna3VjM1F3ZTJacGJHdzZJelpFTmtRMlJEdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWsweU5TNHlMREUzTGpKak1DMHdMalFzTUM0eExUQXVPQ3d3TGpFdE1TNHlZekF0TUM0MExEQXRNQzQ0TFRBdU1TMHhMakpzTWk0MkxUSmpNQzR5TFRBdU1pd3dMak10TUM0MUxEQXVNUzB3TGpoc0xUSXVOUzAwTGpNS0NXTXRNQzR4TFRBdU15MHdMalV0TUM0MExUQXVPQzB3TGpOc0xUTXVNU3d4TGpKakxUQXVOaTB3TGpVdE1TNHpMVEF1T1MweUxqRXRNUzR5YkMwd0xqVXRNeTR6WXpBdE1DNHpMVEF1TXkwd0xqVXRNQzQyTFRBdU5XZ3ROV010TUM0ekxEQXRNQzQyTERBdU1pMHdMallzTUM0MWJDMHdMalVzTXk0ekNnbGpMVEF1T0N3d0xqTXRNUzQwTERBdU55MHlMakVzTVM0eVREY3VNeXczTGpSRE55dzNMak1zTmk0M0xEY3VOQ3cyTGpVc055NDNURFFzTVRFdU9XTXRNQzR5TERBdU15MHdMakVzTUM0MkxEQXVNU3d3TGpoc01pNDJMREpqTUN3d0xqUXRNQzR4TERBdU9DMHdMakVzTVM0eUNnbGpNQ3d3TGpRc01Dd3dMamdzTUM0eExERXVNbXd0TWk0MkxESmpMVEF1TWl3d0xqSXRNQzR6TERBdU5TMHdMakVzTUM0NGJESXVOU3cwTGpOak1DNHhMREF1TXl3d0xqVXNNQzQwTERBdU9Dd3dMak5zTXk0eExURXVNbU13TGpZc01DNDFMREV1TXl3d0xqa3NNaTR4TERFdU1td3dMalVzTXk0ekNnbGpNQ3d3TGpNc01DNHpMREF1TlN3d0xqWXNNQzQxYURWak1DNHpMREFzTUM0MkxUQXVNaXd3TGpZdE1DNDFiREF1TlMwekxqTmpNQzQ0TFRBdU15d3hMalF0TUM0M0xESXVNUzB4TGpKc015NHhMREV1TW1Nd0xqTXNNQzR4TERBdU5pd3dMREF1T0Mwd0xqTnNNaTQxTFRRdU13b0pZekF1TVMwd0xqTXNNQzR4TFRBdU5pMHdMakV0TUM0NFRESTFMaklzTVRjdU1ub2dUVEUyTERJd0xqTmpMVEl1TkN3d0xUUXVNeTB4TGprdE5DNHpMVFF1TTNNeExqa3ROQzR6TERRdU15MDBMak56TkM0ekxERXVPU3cwTGpNc05DNHpVekU0TGpRc01qQXVNeXd4Tml3eU1DNHplaUl2UGdvOEwzTjJaejRLIil9DQojdSAubGJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdORFlnTkRZaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURRMklEUTJPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3NkkwWkdSa1pHUmp0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TXl3eU0yTXlMamtzTUN3MUxqSXRNaTR6TERVdU1pMDFMakp6TFRJdU15MDFMakl0TlM0eUxUVXVNbk10TlM0eUxESXVNeTAxTGpJc05TNHlVekl3TGpFc01qTXNNak1zTWpONklFMHlNeXd5TlM0MkNnbGpMVE11TlN3d0xURXdMalFzTVM0M0xURXdMalFzTlM0eWRqSXVObWd5TUM0M2RpMHlMalpETXpNdU5Dd3lOeTR6TERJMkxqVXNNalV1Tml3eU15d3lOUzQyZWlJdlBnbzhMM04yWno0SyIpfQ0KI3UxIGEucGZ7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6WkVOa1EyUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TlM0eUxERTNMakpqTUMwd0xqUXNNQzR4TFRBdU9Dd3dMakV0TVM0eVl6QXRNQzQwTERBdE1DNDRMVEF1TVMweExqSnNNaTQyTFRKak1DNHlMVEF1TWl3d0xqTXRNQzQxTERBdU1TMHdMamhzTFRJdU5TMDBMak1LQ1dNdE1DNHhMVEF1TXkwd0xqVXRNQzQwTFRBdU9DMHdMak5zTFRNdU1Td3hMakpqTFRBdU5pMHdMalV0TVM0ekxUQXVPUzB5TGpFdE1TNHliQzB3TGpVdE15NHpZekF0TUM0ekxUQXVNeTB3TGpVdE1DNDJMVEF1TldndE5XTXRNQzR6TERBdE1DNDJMREF1TWkwd0xqWXNNQzQxYkMwd0xqVXNNeTR6Q2dsakxUQXVPQ3d3TGpNdE1TNDBMREF1TnkweUxqRXNNUzR5VERjdU15dzNMalJETnl3M0xqTXNOaTQzTERjdU5DdzJMalVzTnk0M1REUXNNVEV1T1dNdE1DNHlMREF1TXkwd0xqRXNNQzQyTERBdU1Td3dMamhzTWk0MkxESmpNQ3d3TGpRdE1DNHhMREF1T0Mwd0xqRXNNUzR5Q2dsak1Dd3dMalFzTUN3d0xqZ3NNQzR4TERFdU1td3RNaTQyTERKakxUQXVNaXd3TGpJdE1DNHpMREF1TlMwd0xqRXNNQzQ0YkRJdU5TdzBMak5qTUM0eExEQXVNeXd3TGpVc01DNDBMREF1T0N3d0xqTnNNeTR4TFRFdU1tTXdMallzTUM0MUxERXVNeXd3TGprc01pNHhMREV1TW13d0xqVXNNeTR6Q2dsak1Dd3dMak1zTUM0ekxEQXVOU3d3TGpZc01DNDFhRFZqTUM0ekxEQXNNQzQyTFRBdU1pd3dMall0TUM0MWJEQXVOUzB6TGpOak1DNDRMVEF1TXl3eExqUXRNQzQzTERJdU1TMHhMakpzTXk0eExERXVNbU13TGpNc01DNHhMREF1Tml3d0xEQXVPQzB3TGpOc01pNDFMVFF1TXdvSll6QXVNUzB3TGpNc01DNHhMVEF1Tmkwd0xqRXRNQzQ0VERJMUxqSXNNVGN1TW5vZ1RURTJMREl3TGpOakxUSXVOQ3d3TFRRdU15MHhMamt0TkM0ekxUUXVNM014TGprdE5DNHpMRFF1TXkwMExqTnpOQzR6TERFdU9TdzBMak1zTkM0elV6RTRMalFzTWpBdU15d3hOaXd5TUM0emVpSXZQZ284TDNOMlp6NEsiKX0NCiN1MSBhLnBmLCAjdTEgYS5sYntjb2xvcjogcmdiYSgwLDAsMCwwKSFpbXBvcnRhbnQ7fQ0KI3UxIGEuYnJpe2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0V0TFNCSFpXNWxjbUYwYjNJNklFRmtiMkpsSUVsc2JIVnpkSEpoZEc5eUlERTVMakl1TVN3Z1UxWkhJRVY0Y0c5eWRDQlFiSFZuTFVsdUlDNGdVMVpISUZabGNuTnBiMjQ2SURZdU1EQWdRblZwYkdRZ01Da2dJQzB0UGdvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJdVdidnVXeGdsOHhJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJS0NTQjJhV1YzUW05NFBTSXdJREFnTXpJZ016SWlJSE4wZVd4bFBTSmxibUZpYkdVdFltRmphMmR5YjNWdVpEcHVaWGNnTUNBd0lETXlJRE15T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStDanh6ZEhsc1pTQjBlWEJsUFNKMFpYaDBMMk56Y3lJK0Nna3VjM1F3ZTJacGJHdzZJelpFTmtRMlJEdDlDand2YzNSNWJHVStDanh3WVhSb0lHTnNZWE56UFNKemREQWlJR1E5SWswekxqY3NPUzQ0YURZdU1sWXpMamRJTXk0M1Zqa3VPSG9nVFRFeUxqa3NNamd1TTJnMkxqSjJMVFl1TW1ndE5pNHlWakk0TGpONklFMHpMamNzTWpndU0yZzJMakoyTFRZdU1rZ3pMamRXTWpndU0zb2dUVE11Tnl3eE9TNHhhRFl1TW5ZdE5pNHlDZ2xJTXk0M1ZqRTVMakY2SUUweE1pNDVMREU1TGpGb05pNHlkaTAyTGpKb0xUWXVNbFl4T1M0eGVpQk5Nakl1TWl3ekxqZDJOaTR5YURZdU1sWXpMamRJTWpJdU1ub2dUVEV5TGprc09TNDRhRFl1TWxZekxqZG9MVFl1TWxZNUxqaDZJRTB5TWk0eUxERTVMakZvTmk0eWRpMDJMakpvTFRZdU1sWXhPUzR4Q2dsNklFMHlNaTR5TERJNExqTm9OaTR5ZGkwMkxqSm9MVFl1TWxZeU9DNHplaUl2UGdvOEwzTjJaejRLIil9DQojc191c2Vyc2V0dGluZ190b3B7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0S1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURFNUxqSXVNU3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZ284YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUl1V2J2dVd4Z2w4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNeklnTXpJaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURNeUlETXlPeUlnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0NqeHpkSGxzWlNCMGVYQmxQU0owWlhoMEwyTnpjeUkrQ2drdWMzUXdlMlpwYkd3Nkl6WkVOa1EyUkR0OUNqd3ZjM1I1YkdVK0NqeHdZWFJvSUdOc1lYTnpQU0p6ZERBaUlHUTlJazB5TlM0eUxERTNMakpqTUMwd0xqUXNNQzR4TFRBdU9Dd3dMakV0TVM0eVl6QXRNQzQwTERBdE1DNDRMVEF1TVMweExqSnNNaTQyTFRKak1DNHlMVEF1TWl3d0xqTXRNQzQxTERBdU1TMHdMamhzTFRJdU5TMDBMak1LQ1dNdE1DNHhMVEF1TXkwd0xqVXRNQzQwTFRBdU9DMHdMak5zTFRNdU1Td3hMakpqTFRBdU5pMHdMalV0TVM0ekxUQXVPUzB5TGpFdE1TNHliQzB3TGpVdE15NHpZekF0TUM0ekxUQXVNeTB3TGpVdE1DNDJMVEF1TldndE5XTXRNQzR6TERBdE1DNDJMREF1TWkwd0xqWXNNQzQxYkMwd0xqVXNNeTR6Q2dsakxUQXVPQ3d3TGpNdE1TNDBMREF1TnkweUxqRXNNUzR5VERjdU15dzNMalJETnl3M0xqTXNOaTQzTERjdU5DdzJMalVzTnk0M1REUXNNVEV1T1dNdE1DNHlMREF1TXkwd0xqRXNNQzQyTERBdU1Td3dMamhzTWk0MkxESmpNQ3d3TGpRdE1DNHhMREF1T0Mwd0xqRXNNUzR5Q2dsak1Dd3dMalFzTUN3d0xqZ3NNQzR4TERFdU1td3RNaTQyTERKakxUQXVNaXd3TGpJdE1DNHpMREF1TlMwd0xqRXNNQzQ0YkRJdU5TdzBMak5qTUM0eExEQXVNeXd3TGpVc01DNDBMREF1T0N3d0xqTnNNeTR4TFRFdU1tTXdMallzTUM0MUxERXVNeXd3TGprc01pNHhMREV1TW13d0xqVXNNeTR6Q2dsak1Dd3dMak1zTUM0ekxEQXVOU3d3TGpZc01DNDFhRFZqTUM0ekxEQXNNQzQyTFRBdU1pd3dMall0TUM0MWJEQXVOUzB6TGpOak1DNDRMVEF1TXl3eExqUXRNQzQzTERJdU1TMHhMakpzTXk0eExERXVNbU13TGpNc01DNHhMREF1Tml3d0xEQXVPQzB3TGpOc01pNDFMVFF1TXdvSll6QXVNUzB3TGpNc01DNHhMVEF1Tmkwd0xqRXRNQzQ0VERJMUxqSXNNVGN1TW5vZ1RURTJMREl3TGpOakxUSXVOQ3d3TFRRdU15MHhMamt0TkM0ekxUUXVNM014TGprdE5DNHpMRFF1TXkwMExqTnpOQzR6TERFdU9TdzBMak1zTkM0elV6RTRMalFzTWpBdU15d3hOaXd5TUM0emVpSXZQZ284TDNOMlp6NEsiKX0NCiNpbXNne2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NE5DandoTFMwZ1IyVnVaWEpoZEc5eU9pQkJaRzlpWlNCSmJHeDFjM1J5WVhSdmNpQXhPUzR5TGpFc0lGTldSeUJGZUhCdmNuUWdVR3gxWnkxSmJpQXVJRk5XUnlCV1pYSnphVzl1T2lBMkxqQXdJRUoxYVd4a0lEQXBJQ0F0TFQ0TkNqeHpkbWNnZG1WeWMybHZiajBpTVM0eElpQnBaRDBpNVp1KzViR0NYekVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lJSGc5SWpCd2VDSWdlVDBpTUhCNElnMEtDU0IyYVdWM1FtOTRQU0l3SURBZ016SWdNeklpSUhOMGVXeGxQU0psYm1GaWJHVXRZbUZqYTJkeWIzVnVaRHB1WlhjZ01DQXdJRE15SURNeU95SWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krRFFvOGMzUjViR1VnZEhsd1pUMGlkR1Y0ZEM5amMzTWlQZzBLQ1M1emREQjdabWxzYkRvak5rUTJSRFpFTzMwTkNqd3ZjM1I1YkdVK0RRbzhjR0YwYUNCamJHRnpjejBpYzNRd0lpQmtQU0pOTWpVdU15dzBMalpvTFRFNVF6VXNOQzQyTERNdU9TdzFMamNzTXk0NUxEZHNNQ3d5TVM0MGJEUXVPQzAwTGpob01UWXVObU14TGpNc01Dd3lMalF0TVM0eExESXVOQzB5TGpSV04wTXlOeTQzTERVdU55d3lOaTQyTERRdU5pd3lOUzR6TERRdU5ub05DZ2tnVFRJeUxqa3NNVGd1T1VnNExqWjJMVEl1TkdneE5DNHpWakU0TGpsNklFMHlNaTQ1TERFMUxqTklPQzQyZGkweUxqUm9NVFF1TTFZeE5TNHplaUJOTWpJdU9Td3hNUzQzU0RndU5sWTVMalJvTVRRdU0xWXhNUzQzZWlJdlBnMEtQQzl6ZG1jK0RRbz0iKX0NCi5jLWNvbnRhaW5lcntiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLXJhZGl1czoycHg7cGFkZGluZzoyNXB4O3RyYW5zaXRpb246YWxsIDQ1MG1zIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7Ym94LXNoYWRvdzowIDFweCA0cHggMCByZ2JhKDAsMCwwLC4xNCk7d2lkdGg6NTQ5cHh9DQpoMyBhOnZpc2l0ZWR7b3BhY2l0eTouNCFpbXBvcnRhbnQ7Y29sb3I6I2JiYiFpbXBvcnRhbnR9DQouYy1jb250YWluZXI6aG92ZXJ7dHJhbnNpdGlvbjphbGwgLjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7Ym94LXNoYWRvdzpyZ2JhKDAsMCwwLC4xMTc2NDcpIDAgMXB4IDZweCxyZ2JhKDAsMCwwLC4xMTc2NDcpIDAgMXB4IDRweH0NCi5jLWNvbnRhaW5lcjphY3RpdmV7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwcztib3gtc2hhZG93OnJnYmEoMCwwLDAsLjE4ODIzNSkgMCAxMHB4IDMwcHgscmdiYSgwLDAsMCwuMjI3NDUxKSAwIDZweCAxMHB4fQ0KLnR7cGFkZGluZy1ib3R0b206MTBweH0NCi5jLWJvcmRlcnt3aWR0aDo1NTlweDtib3gtc2hhZG93Om5vbmUhaW1wb3J0YW50O21hcmdpbi10b3A6MTdweDttYXJnaW4tYm90dG9tOjIzcHg7Ym9yZGVyLXRvcDojRUVFIDFweCBzb2xpZDtib3JkZXItYm90dG9tOiNFRUUgMXB4IHNvbGlkfQ0KI2hlbHB7cGFkZGluZy1sZWZ0OjEwN3B4IWltcG9ydGFudH0NCi5jLXRvb2xzIGF7Ym9yZGVyOjAhaW1wb3J0YW50fQ0KLmYxMyBhOmhvdmVye2JvcmRlcjpub25lIWltcG9ydGFudH0NCi5mMTMgLm06aG92ZXJ7Ym9yZGVyLWJvdHRvbTpzb2xpZCAxcHggIzY2NiFpbXBvcnRhbnR9DQouZyAubTpob3Zlcntib3JkZXItYm90dG9tOnNvbGlkIDFweCAjNjY2IWltcG9ydGFudH0NCi5jLXJvdyBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxcHggc29saWR9DQouYy1zcGFuNiBhOmhvdmVye2JvcmRlci1ib3R0b206bm9uZX0NCi5vcF92ZF9taW5pbmV3ZXN0X2xpbms6aG92ZXJ7b3BhY2l0eTouOH0NCi5vcC10aWViYS1vZmZpY2FsLWxvb2ttb3JlIGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDFweCBzb2xpZH0NCm9wLXRpZWJhLWdlbmVyYWwtbG9va21vcmUgYTpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMXB4IHNvbGlkfQ0KLmMtdGlwLW1lbnUgdWwgbGkgYXtjb2xvcjojMzQ3NmQyIWltcG9ydGFudH0NCmgzIGE6aG92ZXJ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O29wYWNpdHk6Ljc7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCmgzIGF7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5zaXRlbGlua19zdW1tYXJ5IGE6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojMzQ3NmQyIDFweCBzb2xpZH0NCi5jLWdyYXk6aG92ZXJ7Ym9yZGVyLWJvdHRvbTojNjY2IDFweCBzb2xpZH0NCi5vcF9rZWZ1dGFibGVfY29tbWl0dGVsOmhvdmVye2JvcmRlci1ib3R0b206IzY2NiAxcHggc29saWR9DQoub3Atc29mdC1idG5ib3ggYTpob3Zlcntib3JkZXI6bm9uZSFpbXBvcnRhbnR9DQoub3Atc29mdC1hcy1wYy1kb3duYnRue21hcmdpbi1sZWZ0OjAhaW1wb3J0YW50O2NvbG9yOiNmZmY7YmFja2dyb3VuZC1jb2xvcjojMzQ3NmQyO3BhZGRpbmc6M3B4IDE1cHg7Ym9yZGVyLXJhZGl1czoycHg7Zm9udC1zaXplOjE0cHg7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7Ym9yZGVyOm5vbmU7bWFyZ2luLXRvcDotM3B4fQ0KLm9wLXNvZnQtYXMtcGMtZG93bmJ0bjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM3MDk4RDA7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7Ym94LXNoYWRvdzowIDJweCA1cHggMCByZ2JhKDAsMCwwLC4xNiksMCAycHggMTBweCAwIHJnYmEoMCwwLDAsLjEyKTtiYWNrZ3JvdW5kLWltYWdlOm5vbmV9DQouYy1idG4tcHJpbWFyeXttYXJnaW4tbGVmdDowIWltcG9ydGFudDtjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6IzM0NzZkMjtwYWRkaW5nOjNweCAxNXB4O2JvcmRlci1yYWRpdXM6MnB4O2ZvbnQtc2l6ZToxNHB4O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlO2JvcmRlcjpub25lO21hcmdpbi10b3A6LTNweH0NCi5jLWJ0bi1wcmltYXJ5OmhvdmVye2JhY2tncm91bmQtY29sb3I6IzcwOThEMDt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTtib3gtc2hhZG93OjAgMnB4IDVweCAwIHJnYmEoMCwwLDAsLjE2KSwwIDJweCAxMHB4IDAgcmdiYSgwLDAsMCwuMTIpO2JhY2tncm91bmQtaW1hZ2U6bm9uZX0NCi5vcC1zb2Z0LXRpdGxlIGE6aG92ZXJ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O29wYWNpdHk6Ljc7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5vcC1zb2Z0LXRpdGxlIGF7dHJhbnNpdGlvbjphbGwgNDUwbXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwc30NCi5udW1ze3dpZHRoOjU5OHB4fQ0KLnNlYXJjaF90b29sX2NvbnRlcnt3aWR0aDo1OThweH0NCi5vcF9vZmZpY2FsX3dlaWJvX290aGVyIGE6aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50fQ0KLm9wX29mZmljYWxfd2VpYm9faW5mbyBhOmhvdmVye3RleHQtZGVjb3JhdGlvbjpub25lIWltcG9ydGFudH0NCi5vcF9vZmZpY2FsX3dlaWJvX2NvbnRlbnQgYTpob3Zlcnt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnR9DQouYy1idG57Ym9yZGVyOm5vbmUhaW1wb3J0YW50fQ0KLm9wLXp4LW5ldy1tdmlkZW8taW5mbzpob3Zlcntib3JkZXItYm90dG9tOm5vbmV9DQoub3AtengtbmV3LW12aWRlby1ybHQgYTpob3Zlcntib3JkZXItYm90dG9tOiMzNDc2ZDIgMXB4IHNvbGlkfQ0KLm9wLXp4LW5ldy1tdmlkZW8tb25lbGluZSBhOmhvdmVye2JvcmRlci1ib3R0b206IzM0NzZkMiAxcHggc29saWR9DQouaGludF9jb21tb25fcmVzdG9we2NvbG9yOiNFQTQzMzU7Zm9udC1zaXplOm1lZGl1bTtmb250LXdlaWdodDo3MDB9DQoub3AtdGllYmEtZ2VuZXJhbC1tYWluLWNvbCBwOmhvdmVye2JvcmRlcjpub25lIWltcG9ydGFudH0NCi5jLXRleHR7YmFja2dyb3VuZDojMzQ3NmQyO2NvbG9yOiNmZmY7Ym9yZGVyOiMzNDc2ZDIgMXB4IHNvbGlkO3BhZGRpbmctdG9wOjNweDtib3JkZXItcmFkaXVzOjJweH0NCi5jLXRleHQ6aG92ZXJ7YmFja2dyb3VuZDowIDA7Y29sb3I6IzM0NzZkMjtib3JkZXI6IzM0NzZkMiAxcHggc29saWQhaW1wb3J0YW50O3BhZGRpbmctdG9wOjNweDtib3JkZXItcmFkaXVzOjJweH0NCg=="},{"meta":{"name":"googleCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/googleCommonStyle.css?t=24.26","ts":1638677801141,"mimetype":"text/css"},"source":"LyoqKioqKioqKioqKioqKioqKiogU3RvcmUgR29vZ2xlQ29tbW9uU3R5bGUgKioqKioqKioqKioqKioqKioqKi8NCi8qIHJlZ3VsYXIgaXRlbXMsIHdhcnJpbmc6IGlmcmFtZXMgY291bGQgYmUgdmlkZW9zKi8NCmRpdi5yZXNfdG9wX2Jhbm5lciwNCiNwYWdlIC5maywNCiNoZWFkIC5oZWFkQmxvY2ssDQojcnNfdG9wX25ldywNCiNjb250ZW50X3JpZ2h0LA0KI3Jzbz50YWJsZSwNCiNyc28+ZGl2W2lkKj0iMzAiXSwNCiNyc28gLmMtcmVjb21tZW5kLA0KI3JzbyAubGVmdEJsb2NrLA0KI3JzbyAuaGl0X3RvcF9uZXcsDQojcnNvICNmbGQsDQojcnNvIGRpdi5ycmVjb20tYnRuLXBhcmVudCwNCiNjb250ZW50X3JpZ2h0LA0KI2NlbnRlcl9jb2w+I3RhdywNCiNmbGQsDQojZGVtbyB7DQogICAgZGlzcGxheTogbm9uZSFpbXBvcnRhbnQ7DQp9DQovKioqKioqKioqKioqKioqKioqKiBpbml0ICoqKioqKioqKioqKioqKioqKiovDQpib2R5W2dvb2dsZV0gew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmRGZEZkQ7DQp9DQojdG9wX25hdiAjaGR0YnsNCiAgICBiYWNrZ3JvdW5kOiB1bnNldDsNCn0NCiNjbnQgI2hkdGJTdW0sICNjbnQ+I2FwcGJhcnsNCiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDApOw0KfQ0KI2Zvcm0gLmJkc3Vnew0KICAgIHdpZHRoOiA3NiU7DQp9DQojYWxhX2ltZ19yZXN1bHRzew0KICAgIG92ZXJmbG93OmhpZGRlbjsNCn0NCmEsDQphIGVtLA0KI3UgYSB7DQogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KfQ0KYTpob3ZlciwNCmE6aG92ZXIgaDN7DQogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7DQp9DQovKioqKioqKioqKioqKioqKioqKiByZXdyaXRlIGhlYWRlciAqKioqKioqKioqKioqKioqKioqLw0KDQojaGVhZCwNCiNzX3RhYiB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODsNCn0NCiNoZWFkIHsNCiAgICBib3JkZXItYm90dG9tOiBub25lOw0KfQ0KI2Zvcm0gew0KICAgIGJhY2tncm91bmQtY29sb3I6IHVuc2V0Ow0KfQ0KI2Zvcm0gLmJkc3VnIGxpIHsNCiAgICB3aWR0aDogYXV0bzsNCiAgICBjb2xvcjogIzAwMDsNCiAgICBmb250OiAxNXB4IGFyaWFsOw0KICAgIGxpbmUtaGVpZ2h0OiAyNnB4Ow0KfQ0KI2Zvcm0gLnNfaXB0X3dyLmJnIHsNCiAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgIHdpZHRoOiA3NiU7DQp9DQojZm9ybSAuc19idG4gew0KICAgIGJhY2tncm91bmQ6ICMzNDc2ZDI7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMzNDc2ZDI7DQp9DQojZm9ybSAuc19idG46aG92ZXIgew0KICAgIGJhY2tncm91bmQ6ICMzNDc2ZDI7DQogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMzNDc2ZDI7DQp9DQojc190YWIgYiB7DQogICAgY29sb3I6ICMzNDc2ZDI7DQogICAgYm9yZGVyLWJvdHRvbTogM3B4ICMzNDc2ZDIgc29saWQ7DQp9DQojc190YWIgew0KICAgIGJvcmRlci1ib3R0b206ICNlMGUwZTAgMXB4IHNvbGlkOw0KfQ0KLyoqKioqKioqKioqKioqKioqKiogcmV3cml0ZSAtIHNlYXJjaEJveCAqKioqKioqKioqKioqKioqKioqLw0KLyogU2VhcmNoVG9vbHMgKi8NCiNjb250YWluZXIgLmhlYWRfbnVtc19jb250X291dGVyIC5zZWFyY2hfdG9vbF9jb250ZXIsDQojY29udGFpbmVyIC5oZWFkX251bXNfY29udF9vdXRlciAubnVtcyB7DQogICAgd2lkdGg6IDYzMHB4Ow0KfQ0KDQovKiBTZWFyY2hJdG1lcyBCb3R0b20gdG8gVG9wIGFuaSAqLw0KI3NlYXJjaCAjcnNvew0KICAgIGFuaW1hdGlvbi1uYW1lOiBhbmlfYm90dG9tVG90b3A7DQogICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAuM3M7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsNCn0NCi8qIFNlYXJjaEJhciBMZWZ0IHRvIFJpZ2h0IGFuaSAqLw0KLnNycCBmb3Jtew0KICAgIGFuaW1hdGlvbi1uYW1lOiBhbmlfbGVmdFRvcmlnaHQ7DQogICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAuM3M7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1vdXQ7DQp9DQoNCiNyc28gLmpVbWtGYjpob3ZlciB7DQogICAgbWFyZ2luOiAwIGF1dG87DQogICAgYm9yZGVyLWxlZnQ6dW5zZXQ7DQogICAgcGFkZGluZzogMHB4IDIwcHggMTVweDsNCiAgICBtYXJnaW4tYm90dG9tOiA0MHB4Ow0KfQ0KI3JzLCAjcnNvIC5new0KICAgIHdpZHRoOiA3NjBweDsNCiAgICBwYWRkaW5nOiAwcHggMjBweCAxNXB4Ow0KICAgIG1hcmdpbi10b3A6IDBweDsNCiAgICBtYXJnaW4tYm90dG9tOiA0MHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjEpOw0KICAgIHRyYW5zaXRpb246IGFsbCAwLjI1cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOw0KfQ0KI3JzLCAjcnNvIC5nIGRpdi5yYyAuc3sNCiAgICBtYXgtd2lkdGg6dW5zZXQ7DQp9DQojcnNvIC5nOmhvdmVyew0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsMC4zKTsNCiAgICBib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLW1vei1ib3gtc2hhZG93OiAwIDAgMXB4IGdyYXk7DQp9DQojcnNvIC5nW3RwbD0nc29mdCddIC5vcC1zb2Z0LXRpdGxlLA0KI3JzbyAuZyBkaXYuciB7DQogICAgbWFyZ2luOiAwcHggLTIwcHggMTBweCAtMjBweDsNCiAgICBwYWRkaW5nOiA4cHggMjBweCA1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KLyogSXRlbXMgLSBDb2xvciAqLw0KI3JzbyAuZjEzIGEsDQojcnNvIC5mMTMgZW0sDQojcnNvIC5jLXNwYW4xOCBhLA0KI3JzbyAuc3ViTGlua19mYWN0b3J5IGEsDQojcnNvIC5jLXRhYnMtY29udGVudCBhLA0KI3JzbyAub3Bfb2ZmaWNhbF93ZWlib19jb250ZW50IGEsDQojcnNvIC5vcF9vZmZpY2FsX3dlaWJvX3B6IGEsDQojcnNvIC5vcF90aWViYTJfdGFibGlua3NfY29udGFpbmVyIGEsDQojcnNvIC5vcC10aWViYS1nZW5lcmFsLXJpZ2h0LA0KI3JzbyAub3BfZHEwMV90aXRsZSwNCiNyc28gLm9wX2RxMDFfdGFibGUgYSwNCiNyc28gLm9wX2RxMDFfbW9yZWxpbmsgYSwNCiNyc28gLm9wLXRpZWJhLWdlbmVyYWwtbWFpbnBsIGEsDQojcnNvIC5vcC1zZS1saXN0ZW4tcmVjb21tZW5kLA0KI3JzbyAuYy1vZmZzZXQ+ZGl2IGEgew0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiNyc28gLmYxMyBhOmhvdmVyLA0KI3JzbyAuZjEzIGVtOmhvdmVyLA0KI3JzbyAuc3ViTGlua19mYWN0b3J5IGE6aG92ZXIsDQojcnNvIC5jLXRhYnMtY29udGVudCBhOmhvdmVyLA0KI3JzbyAub3BfdGllYmEyX3RhYmxpbmtzX2NvbnRhaW5lciBhOmhvdmVyLA0KI3JzbyAub3AtdGllYmEtZ2VuZXJhbC1yaWdodDpob3ZlciwNCiNyc28gLm9wX2RxMDFfdGl0bGU6aG92ZXIsDQojcnNvIC5vcF9kcTAxX3RhYmxlIGE6aG92ZXIsDQojcnNvIC5vcF9kcTAxX21vcmVsaW5rIGE6aG92ZXIsDQojcnNvIC5vcC10aWViYS1nZW5lcmFsLW1haW5wbCBhOmhvdmVyLA0KI3JzbyAub3Atc2UtbGlzdGVuLXJlY29tbWVuZDpob3ZlciwNCiNyc28gLmMtb2Zmc2V0PmRpdiBhOmhvdmVyIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZSFpbXBvcnRhbnQ7DQp9DQojcnNvIC5mMTMgYSB7DQogICAgY29sb3I6ICMwMDgwMDA7DQp9DQovKiBJdGVtcyAtIEFkaiAqLw0KDQojcnNvIC5jLXNwYW4xOCwgI3JzbyAuYy1zcGFuMjR7DQogICAgd2lkdGg6IDEwMCU7DQogICAgbWluLXdpZHRoOiB1bnNldDsNCn0NCiNyc28gLmMtYm9yZGVyIHsNCiAgICB3aWR0aDogYXV0bzsNCiAgICBib3JkZXI6IG5vbmU7DQogICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogdHJhbnNwYXJlbnQ7DQogICAgYm9yZGVyLXJpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDsNCiAgICBib3gtc2hhZG93OiAwcHggMHB4IDBweCB0cmFuc3BhcmVudDsNCiAgICAtd2Via2l0LWJveC1zaGFkb3c6IDBweCAwcHggMHB4IHRyYW5zcGFyZW50Ow0KICAgIC1tb3otYm94LXNoYWRvdzogMHB4IDBweCAwcHggdHJhbnNwYXJlbnQ7DQogICAgLW8tYm94LXNoYWRvdzogMHB4IDBweCAwcHggdHJhbnNwYXJlbnQ7DQp9DQovKiBJbWcgKi8NCg0KI3JzbyAuc2VfY29tX2lycmVndWxhcl9nYWxsZXJ5IHVsIGxpLA0KI3JzbyAub3BfamluZ3lhbl9saXN0LA0KI3JzbyAuZyAub3AtaW1nLWFkZHJlc3MtbGluay10eXBlIHsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQp9DQovKiB0aXRsZSAqLw0KI3JzbyAuZ1t0cGw9J3NvZnQnXSAub3Atc29mdC10aXRsZSBhLA0KI3JzbyAuZ1t0cGw9J3NvZnQnXSAub3Atc29mdC10aXRsZSBhIGVtLA0KI3JzbyAuZyBkaXYucj4gYSwNCiNyc28gLmcgYSBoMywNCiNyc28gLmcgZGl2LnI+IGEgZW0sDQojcmNudCAjcmVzIGgzLA0KI3JjbnQgI2V4dHJhcmVzIGgzew0KICAgIGNvbG9yOiAjMzQ3NmQyOw0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KLyogdGl0bGU6dmlzaWVkICovDQojcnNvIC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZCwNCiNyc28gLm9wLXNvZnQtdGl0bGUgYTp2aXNpdGVkIGVtLA0KI3JzbyAuZyBkaXYucj4gYTp2aXNpdGVkLA0KI3JzbyAuZyBkaXYucj4gYTp2aXNpdGVkIGVtLA0KI3JjbnQgI3JlcyBhOnZpc2l0ZWQgaDMsDQojcnNvIC5nIGE6dmlzaXRlZCBoMyB7DQogICAgY29sb3I6ICM2NjAwOTk7DQp9DQojcnNvIC5vcC1zb2Z0LXRpdGxlIGEsDQojcnNvIC5nIGRpdi5yPiBhIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQojcnNvIC5vcC1zb2Z0LXRpdGxlIGEgZW0sDQojcnNvIC5nIGRpdi5yPiBhIGVtIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQojcnNvIC5vcC1zb2Z0LXRpdGxlIGE6aG92ZXI6YWZ0ZXIsDQojcnNvIC5nIGRpdi5yPiBhOmhvdmVyOmFmdGVyIHsNCiAgICBsZWZ0OiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCn0NCiNyc28gLm9wLXNvZnQtdGl0bGUgYTphZnRlciwNCiNyc28gLmcgZGl2LnI+IGE6YWZ0ZXIgew0KICAgIGNvbnRlbnQ6ICIiOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzM0NzZkMjsNCiAgICBib3R0b206IC0ycHg7DQogICAgbGVmdDogMTAwJTsNCiAgICB3aWR0aDogMDsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQp9DQoNCiNyc28gLm9wLXNvZnQtdGl0bGUgYSwgI3JzbyAuZyBkaXYucj4gYSB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KDQojcnNvIC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZDpob3ZlcjphZnRlciwNCiNyc28gLmcgZGl2LnI+IGE6dmlzaXRlZDpob3ZlcjphZnRlciB7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQp9DQojcnNvIC5vcC1zb2Z0LXRpdGxlIGE6dmlzaXRlZDphZnRlciwNCiNyc28gLmcgZGl2LnI+IGE6dmlzaXRlZDphZnRlciB7DQogICAgY29udGVudDogIiI7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNjYwMDk5Ow0KICAgIGJvdHRvbTogLTJweDsNCiAgICBsZWZ0OiAxMDAlOw0KICAgIHdpZHRoOiAwOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCn0NCi8qICBBYm91dCBTZWFyY2ggUmVzdWx0ICovDQoNCiNycyB7DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICAgIHBhZGRpbmc6IDBweCAyMHB4IDE1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KfQ0KI3JzIC50dCB7DQogICAgbWFyZ2luOiAwcHggLTIwcHggNXB4IC0yMHB4Ow0KICAgIHBhZGRpbmc6IDVweCAyMHB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KI3JzIHRhYmxlIHsNCiAgICB3aWR0aDogNjMwcHg7DQogICAgcGFkZGluZzogNXB4IDE1cHg7DQp9DQojcnMgdGFibGUgdHIgYSB7DQogICAgbWFyZ2luLXRvcDogNXB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDVweDsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiNycyB0YWJsZSB0ciBhOmhvdmVyIHsNCiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCn0NCi8qIHBhZ2UgbnVtcyAqLw0KDQojcGFnZSB7DQogICAgbWluLXdpZHRoOiA3MTBweDsNCiAgICBoZWlnaHQ6IDQwcHg7DQogICAgbGluZS1oZWlnaHQ6IDQwcHg7DQogICAgcGFkZGluZy10b3A6IDVweDsNCiAgICBtYXJnaW46IDBweCAwcHggNTBweCA4MHB4Ow0KfQ0KLm9wLWltZy1hZGRyZXNzLWRlc2t0b3AtY29udHsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KI3BhZ2UgYSwNCiNwYWdlIHN0cm9uZyB7DQogICAgY29sb3I6IzM0NzZkMjsNCiAgICBoZWlnaHQ6IGF1dG87DQogICAgYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOw0KICAgIC13ZWJraXQtYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOw0KICAgIC1tb3otYm94LXNoYWRvdzogMCAwIDIwcHggMnB4IHJnYmEoMCwgMCwgMCwgLjEpOw0KfQ0KI3BhZ2UgLm46aG92ZXIsDQojcGFnZSBhOmhvdmVyIC5wYyB7DQogICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7DQogICAgYmFja2dyb3VuZDogI2Q4ZDhkODsNCiAgICBjb2xvcjogIzAwNTdkYTsNCn0NCiNwYWdlIHN0cm9uZyAucGMgew0KICAgIGJhY2tncm91bmQ6ICMzNDc2ZDI7DQogICAgY29sb3I6IHdoaXRlOw0KfQ0KLyogYW5pICovDQpAa2V5ZnJhbWVzIGFuaV9ib3R0b21Ub3RvcCB7DQogICAgMCUgew0KICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMzJweCk7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDIwJSB7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDMwJSB7DQogICAgICAgIG9wYWNpdHk6IDAuODsNCiAgICB9DQogICAgMTAwJSB7DQogICAgICAgIG9wYWNpdHk6IDE7DQogICAgfQ0KfQ0KQGtleWZyYW1lcyBhbmlfbGVmdFRvcmlnaHQgew0KICAgIDAlIHsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQojcnNvIGRpdi5nOm5vdChbY2xhc3NdKXsNCiAgICBtYXJnaW4tbGVmdDogMThweDsNCiAgICBtYXJnaW4tcmlnaHQ6IDE4cHg7DQp9DQojcnNvIC5nIC5leHAtb3V0bGluZXsNCiAgICBkaXNwbGF5Om5vbmU7DQp9DQojbWFpbiAjcmNudCAjcmhzIHsNCiAgICBtYXJnaW4tbGVmdDogMTAyMHB4Ow0KfQ0KI3JlcyAuZyAudHN7DQogICAgbWF4LXdpZHRoOiB1bnNldDsNCn0NCiNtYWluICNyY250ICNyaHN7DQogICAgZGlzcGxheTpub25lOw0KfQ0KLnNob3dSaWdodCAjbWFpbiAjcmNudCAjcmhzew0KICAgIGRpc3BsYXk6dW5zZXQ7DQp9DQpjaXRlew0KICAgIGZvbnQtd2VpZ2h0Om5vcm1hbDsNCiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KfQ0KLyoqTW9vbmNhbiAtU1RBUlQqKi8NCi8qKkFqYSBMaW5lSGVpZ2h0Ki8NCmRpdi5yZXNfdG9wX2Jhbm5lciAjZm9vdCwjcGFnDQojcmVzIC5yew0KICAgIGxpbmUtaGVpZ2h0OiAxLjM7DQp9DQojcmVzew0KICAgIHBhZGRpbmc6IDA7DQp9DQovKipHb29nbGUgQ29ubmVjdGlvbkJveCovDQojcnMsICNyc28gLmcgew0KICAgIG1hcmdpbi1ib3R0b206IDIwcHg7DQogICAgYm9yZGVyLXJhZGl1czogMTBweDsNCn0NCiNyc28gLmcgZGl2LnIgew0KICAgIGJvcmRlci1yYWRpdXM6IDEwcHggMTBweCAwcHggMHB4Ow0KfQ0KI3JzbyAuZyAuY2FyZC1zZWN0aW9uLCAjY2VudGVyX2NvbCAua3AtYmxrew0KICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7DQp9DQovKipSZXdyaXRlIG1haW4gcGFnZSAtPiB3ZWIgc3VtbWFyeSovDQouYzJ4elRiIC5nLCAucnVUY0lkIC5nLCAuZm0wNklmIC5nLCAuY1VuUUtlIC5nLCAuSGFuUW1mIC5nIHsNCiAgICB3aWR0aDogNzU4cHg7DQogICAgcGFkZGluZy1sZWZ0OiAgMjBweCAhaW1wb3J0YW50Ow0KICAgIHBhZGRpbmctcmlnaHQ6IDIwcHggIWltcG9ydGFudDsNCiAgICBib3gtc2hhZG93OiAwIDAgMHB4IDBweCByZ2IoMCwgMCwgMCk7IC8qcmVtb3ZlIHRoZSBzaGFkb3cqLw0KfQ0KZGl2IC54Znh4NWQgew0KICAgIG1hcmdpbi1ib3R0b206IC0xOHB4ICFpbXBvcnRhbnQ7DQogICAgbWFyZ2luLXRvcDogLTI1cHggIWltcG9ydGFudDsNCn0NCmRpdiAueGFxSnpmLnhmeHg1ZCAua25vLWZ0cnsNCiAgICBtYXJnaW4tdG9wOiAxMHB4ICFpbXBvcnRhbnQ7DQp9DQpkaXYgLmtuby1mdHIgYXsNCiAgICBwb3NpdGlvbjogc3RpY2t5Ow0KfQ0KLyoqVGhhbmtzIHRvIE1vb25jYW4gLUVORCoqLw0KI3JjbnQgI3JlcyBoMywgI3JjbnQgI2V4dHJhcmVzIGgzew0KICAgIC8qKnJlc2V0IGZvbnQgc2l6ZSoqLw0KICAgIGZvbnQtc2l6ZTogbWVkaXVtOw0KfQ0KI3JjbnQgI3JlcyBoMyBkaXYsICNyY250ICNleHRyYXJlcyBoMyBkaXZ7DQogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KfQ0KLypkZWFsIHdpdGggY2l0ZSB0b28gbG9uZyBhbmQgdGl0bGUgdG9vIHNob3J0Ki8NCiNyc28gLmcgLnI+YT5kaXZ7DQogICAgd2lkdGg6IDM1cmVtOw0KfQ0KZGl2LnJjW2FjLW5lZWRoaWRlXXsNCiAgICBtYXJnaW4tdG9wOiA1cHg7DQogICAgbWFyZ2luLWJvdHRvbTogLTE1cHg7DQp9DQovKnJlc2V0IGxvZ28gcG9zaXRpb24gYXQgZHJvcCAqLw0KLmxvZ297DQogICAgdG9wOnVuc2V0Ow0KfQ0KYm9keVtnb29nbGVdIC5iaWcgLmJhaWR1ew0KICAgIHRyYW5zZm9ybTogdW5zZXQgIWltcG9ydGFudDsNCiAgICBtYXJnaW4tdG9wOiAtMTBweDsNCiAgICBtYXJnaW4tbGVmdDogLTJyZW07DQp9DQpib2R5W2dvb2dsZV0gLmJpZyAuYmFpZHUgI2xvZ28gaW1new0KICAgIG1hcmdpbi10b3A6IC0xNXB4Ow0KfQ0KYm9keVtnb29nbGVdIC5iaWcubWluaWRpdiAuYmFpZHUgI2xvZ28gaW1new0KICAgIGhlaWdodDogNTlweDsNCiAgICB3aWR0aDogdW5zZXQ7DQogICAgbWFyZ2luLXRvcDogLTE4cHg7DQp9DQpib2R5W2dvb2dsZV0gLkE4U0J3ZnsNCiAgICBtYXgtd2lkdGg6IDY5MnB4Ow0KICAgIHdpZHRoOiB1bnNldDsNCiAgICBtYXJnaW4tbGVmdDogMjUlOw0KfQ0KLkFDLnNwLXNlcGFyYXRvcnsNCiAgICBtYXJnaW4tdG9wOiAtMjBweDsNCn0NCiNyc28+ZGl2IC5Jc1p2ZWN7DQogICAgbWF4LXdpZHRoOiB1bnNldDsNCn0NCg=="},{"meta":{"name":"googleOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/googleOnePageStyle.css?t=24.26","ts":1638677801144,"mimetype":"text/css"},"source":"LyoqU3RvcmUgR29vZ2xlVHdvUGFnZVN0eWxlKiovDQojcnNvIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgZmxvYXQ6IHVuc2V0Ow0KfQ0KI3JzbyAualVta0ZiOmhvdmVyIHsNCiAgICBtYXJnaW4tYm90dG9tOiAzMHB4Ow0KICAgIG1hcmdpbi1sZWZ0OiAyMHB4Ow0KfQ0KI3JzbyAuZ3sNCiAgICB3aWR0aDogdW5zZXQ7DQogICAgbWFyZ2luLWxlZnQ6IDIwcHg7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICBwYWRkaW5nOiAwcHggMjBweCAxNXB4Ow0KICAgIG1hcmdpbi10b3A6IDBweDsNCiAgICBtYXJnaW4tYm90dG9tOiAzMHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7DQp9DQouc2VhcmNoPiNpcmVzICNyc28+Lmd7DQogICAgbWF4LXdpZHRoOiB1bnNldDsNCn0NCiNyc28+LmcgfiBkaXY6bm90KC5nKXsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KI21haW4gI3JjbnR7DQogICAgbWF4LXdpZHRoOiB1bnNldDsNCn0NCmJvZHkgI2FwcGJhcixib2R5IC5yaHNjb2wsIGJvZHkgI3RvcF9uYXYsIGJvZHkgI2ZiYXJ7DQogICAgbWluLXdpZHRoOiB1bnNldDsNCn0NCiNyc28gZy1zY3JvbGxpbmctY2Fyb3VzZWx7DQogICAgbWFyZ2luOiB1bnNldDsNCiAgICBtYXJnaW4tbGVmdDogMjBweDsNCn0NCi5jb2x7DQogICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsNCn0NCi5jb2wgI2NlbnRlcl9jb2x7DQogICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsNCiAgICBtYXJnaW4tbGVmdDogdW5zZXQgIWltcG9ydGFudDsNCn0NCi5zcnAgLmJpZyAjdHNmew0KICAgIHdpZHRoOiA4MzNweDsNCn0NCi8qKnNlYXJjaCBib3ggYWxpZ24gY2VudGVyKiovDQouc3JwIGZvcm17DQogICAgbWFyZ2luOiAwIGF1dG87DQp9DQojdG9wX25hdnsNCiAgICBtaW4td2lkdGg6IHVuc2V0Ow0KfQ0KLyoqdmlkZW8gYm94IGFsaWduIGNlbnRlcioqLw0KZy1zZWN0aW9uLXdpdGgtaGVhZGVyew0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCiNoZHRiICNoZHRiLW1zYnsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICB3aWR0aDogMTAwJTsNCn0NCiNoZHRiICNoZHRiLW1zYi12aXN7DQogICAgbWFyZ2luLWxlZnQ6IC0xNjlweDsNCn0NCiNtYWluICNjbnQsICNjbnQgI2NlbnRlcl9jb2wsICNjbnQgI2Zvb3R7DQogICAgd2lkdGg6IGNhbGMoMzYuM3Z3ICsgNTI1cHgpOw0KfQ0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDoxNDQwcHgpew0KICAgIC5STk5YZ2J7DQogICAgICAgIHdpZHRoOiA4MCUgIWltcG9ydGFudDsNCiAgICB9DQp9"},{"meta":{"name":"googleTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/googleTwoPageStyle.css?t=24.26","ts":1638677801147,"mimetype":"text/css"},"source":"LyoqU3RvcmUgR29vZ2xlVHdvUGFnZVN0eWxlKiovDQojcnNvIHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgZmxvYXQ6IHVuc2V0Ow0KfQ0KI3JzbyAualVta0ZiOmhvdmVyIHsNCiAgICBtYXJnaW4tYm90dG9tOiAzMHB4Ow0KICAgIG1hcmdpbi1sZWZ0OiAyMHB4Ow0KfQ0KI3JzbyAuZywgLnZrX2N7DQogICAgd2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbi1sZWZ0OiAyMHB4Ow0KICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgcGFkZGluZzogMTBweCAyMHB4IDE1cHg7DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDI1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICB0cmFuc2l0aW9uOiBhbGwgMC4yNXMgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKSAwczsNCn0NCi5zZWFyY2g+I2lyZXMgI3JzbyAuZ3sNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KI21haW4gI3JjbnQgI3Joc3sNCiAgICBkaXNwbGF5Om5vbmU7DQp9DQojbWFpbiAjcmNudHsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KI21haW4gI2NudCwgI2NudCAjY2VudGVyX2NvbCwgI2NudCAjZm9vdHsNCiAgICB3aWR0aDogY2FsYyg1NHZ3ICsgMzYwcHgpOw0KfQ0KYm9keSAjYXBwYmFyLGJvZHkgLnJoc2NvbCwgYm9keSAjdG9wX25hdiwgYm9keSAjZmJhcnsNCiAgICBtaW4td2lkdGg6IHVuc2V0Ow0KfQ0KI3JzbyAuQ09Fb2lkew0KICAgIG1hcmdpbjogdW5zZXQ7DQp9DQouY29sew0KICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7DQp9DQouY29sICNjZW50ZXJfY29sew0KICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7DQogICAgbWFyZ2luLWxlZnQ6IHVuc2V0ICFpbXBvcnRhbnQ7DQp9DQouc3JnLCAjcnNvLCAjcnNvPmRpdnsNCglkaXNwbGF5OiBncmlkOw0KCWdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LG1pbm1heCg1MCUsMWZyKSk7DQogICAgZ3JpZC10ZW1wbGF0ZS1hcmVhczogInhtYWluIHhtYWluIjsNCn0NCi8qI3Jzbz5kaXY6bm90KC5nKSwgI3JzbyAuc3JneyovDQovKiAgICBncmlkLWNvbHVtbi1zdGFydDogMTsqLw0KLyogICAgZ3JpZC1jb2x1bW4tZW5kOiB4bWFpbi1lbmQ7Ki8NCi8qfSovDQovKipzZWFyY2ggYm94IGFsaWduIGNlbnRlcioqLw0KLnNycCBmb3Jtew0KICAgIG1hcmdpbjowIGF1dG87DQp9DQpnLXNlY3Rpb24td2l0aC1oZWFkZXJ7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KI2hkdGIgI2hkdGItbXNiew0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIHdpZHRoOiAxMDAlOw0KfQ0KI2hkdGIgI2hkdGItbXNiLXZpc3sNCiAgICBtYXJnaW4tbGVmdDogLTE2OXB4Ow0KfQ=="},{"meta":{"name":"bingCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/bingCommonStyle.css?t=24.26","ts":1638677801154,"mimetype":"text/css"},"source":"LypTdG9yZSBCaW5nQ29tbW9uU3R5bGUqLw0KYm9keSB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTsNCn0NCi5zaF9mYXZpY29uew0KICAgIG1hcmdpbi1sZWZ0OiAxNnB4Ow0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzPmxpOm5vdCgjbWZhX3Jvb3QpIHsNCiAgICB3aWR0aDogNjcwcHg7DQogICAgcGFkZGluZzogMTJweCAyMHB4ICFpbXBvcnRhbnQ7DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDI1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuMSk7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBhLA0KI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGEgew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBjb2xvcjogIzM0NzZkMjsNCn0NCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhLCAjYl9yZXN1bHRzIGgyIHN0cm9uZ3sNCiAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICBmb250LXNpemU6IG1lZGl1bTsNCn0NCiNiX2NvbnRlbnQgI2JfcmVzdWx0cz5saTpob3ZlciB7DQogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjMpOw0KICAgIGJhY2tncm91bmQ6ICNGQ0ZDRkMgIWltcG9ydGFudDsNCiAgICBib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLW1vei1ib3gtc2hhZG93OiAwIDAgMXB4IGdyYXk7DQp9DQojYl9jb250ZW50ID4jYl9yZXN1bHRzIGxpOm5vdCgjbWZhX3Jvb3QpIGgyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOGY4Ow0KICAgIG1hcmdpbjogLTEycHggLTIwcHggMTBweCAtMjBweDsNCiAgICBwYWRkaW5nOiA4cHggMjBweCA1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KDQphLCBhIHN0cm9uZyB7DQogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KfQ0KDQojYl9jb250ZW50ICNiX3Jlc3VsdHMgYSBzdHJvbmcsDQojYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgYSBzdHJvbmcgew0KICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCn0NCi5iX2FsZ286Zmlyc3QtY2hpbGQ6aG92ZXIgaDIgYXsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsNCn0NCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBhOmhvdmVyOmFmdGVyLA0KI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGE6aG92ZXI6YWZ0ZXIgew0KICAgIGxlZnQ6IDA7DQogICAgd2lkdGg6IDEwMCU7DQogICAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICAtbW96LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIHRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzIGE6aG92ZXIsDQojYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgYTpob3ZlcnsNCiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHMgYTphZnRlciwNCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhOmFmdGVyIHsNCiAgICBjb250ZW50OiAiIjsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMzNDc2ZDI7DQogICAgYm90dG9tOiAtMnB4Ow0KICAgIGxlZnQ6IDEwMCU7DQogICAgd2lkdGg6IDA7DQogICAgLXdlYmtpdC10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICAtbW96LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KICAgIHRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGE6dmlzaXRlZCwNCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhOnZpc2l0ZWQgc3Ryb25nLA0KI2JfY29udGVudCAjYl9yZXN1bHRzIGgyIGgyIGE6dmlzaXRlZCwNCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBoMiBhOnZpc2l0ZWQgc3Ryb25nIHsNCiAgICBjb2xvcjogIzY2MDA5OTsNCn0NCiNiX2NvbnRlbnQgI2JfcmVzdWx0cyBoMiBhOnZpc2l0ZWQ6aG92ZXI6YWZ0ZXIsDQojYl9jb250ZW50ICNiX3Jlc3VsdHMgaDIgaDIgYTp2aXNpdGVkOmhvdmVyOmFmdGVyIHsNCiAgICBsZWZ0OiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCn0NCiNiX2NvbnRlbnQ+b2wjYl9jb250ZXh0ew0KICAgIGRpc3BsYXk6bm9uZTsNCn0NCmJvZHkgI2JfaGVhZGVyew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7DQp9DQojYl9jb250ZW50IC5iX3VuZGVyU2VhcmNoYm94ew0KICAgIG1hcmdpbi10b3A6IDEwcHg7DQp9DQojYl9oZWFkZXIgLmJfc2NvcGViYXJ7DQogICAgbWFyZ2luOiB1bnNldDsNCn0NCi8qc2VhcmNoIGVuZ2luZSBqdW1wKi8NCi50c2YtcD4ubG9nb2NvbnQsICNzZWotY29udGFpbmVyew0KICAgIG1hcmdpbi1yaWdodDogMzUwcHg7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KLnRzZi1wPi5zZmliYmJjew0KICAgIG1hcmdpbi1yaWdodDogMzUwcHg7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KLmJfc2VhcmNoYm94Rm9ybSAuc2FfdG17DQogICAgdGV4dC1hbGlnbjogbGVmdDsgLyogU2VhcmNoQm94IHRleHQgQ2VudGVyICovDQp9DQpib2R5ICNiX2hlYWRlciAjZXN0X3N3aXRjaHsNCiAgICBtYXJnaW46IDAgYXV0bzsNCiAgICBwYWRkaW5nLXJpZ2h0OiAxMCU7IC8qKlRPRE8qKiovDQp9DQpib2R5ICNlc3RfY246OmFmdGVyLCBib2R5ICNlc3RfZW46OmFmdGVyew0KICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xLDEuMykgcGVyc3BlY3RpdmUoLjVlbSkgcm90YXRlWCgwZGVnKTsNCiAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMS4xLDEuMykgcGVyc3BlY3RpdmUoLjVlbSkgcm90YXRlWCgwZGVnKTsNCn0NCkBtZWRpYSAobWF4LXdpZHRoOiAxMTAwcHgpew0KICAgIGJvZHkgI2JfaGVhZGVyICNlc3Rfc3dpdGNoew0KICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMS4ycmVtKTsNCiAgICB9DQp9DQovKiBTZWFyY2hJdG1lcyBCb3R0b20gdG8gVG9wIGFuaSAqLw0KI2JfY29udGVudHsNCiAgICBhbmltYXRpb24tbmFtZTogYW5pX2JvdHRvbVRvdG9wOw0KICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMC42czsNCiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOw0KfQ0KDQovKiBTZWFyY2hCYXIgTGVmdCB0byBSaWdodCBhbmkgKi8NCmJvZHkgI2JfaGVhZGVyIHsNCiAgICBhbmltYXRpb24tbmFtZTogYW5pX3RvcFRvYnV0dG9tOw0KICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMC42czsNCiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLW91dDsNCn0NCmJvZHl7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9oaWRlVG9TaG93Ow0KICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMC42czsNCiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLW91dDsNCn0NCi5BQy5zcC1zZXBhcmF0b3J7DQogICAgbWFyZ2luLXRvcDogLTE1cHg7DQp9DQpAa2V5ZnJhbWVzIGFuaV9sZWZ0VG9yaWdodCB7DQogICAgMCUgew0KICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTMycHgpOw0KICAgICAgICBvcGFjaXR5OiAwOw0KICAgIH0NCiAgICAyMCUgew0KICAgICAgICBvcGFjaXR5OiAwOw0KICAgIH0NCiAgICAzMCUgew0KICAgICAgICBvcGFjaXR5OiAwLjg7DQogICAgfQ0KICAgIDEwMCUgew0KICAgICAgICBvcGFjaXR5OiAxOw0KICAgIH0NCn0NCi8qIGFuaSAqLw0KQGtleWZyYW1lcyBhbmlfYm90dG9tVG90b3Agew0KICAgIDAlIHsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDMycHgpOw0KICAgICAgICBvcGFjaXR5OiAwOw0KICAgIH0NCiAgICAyMCUgew0KICAgICAgICBvcGFjaXR5OiAwOw0KICAgIH0NCiAgICAzMCUgew0KICAgICAgICBvcGFjaXR5OiAwLjg7DQogICAgfQ0KICAgIDEwMCUgew0KICAgICAgICBvcGFjaXR5OiAxOw0KICAgIH0NCn0NCkAtd2Via2l0LWtleWZyYW1lcyBhbmlfdG9wVG9idXR0b20gew0KICAgIDAlIHsNCiAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTMycHgpOw0KICAgICAgICBvcGFjaXR5OiAwOw0KICAgIH0NCiAgICAyMCUgew0KICAgICAgICBvcGFjaXR5OiAwOw0KICAgIH0NCiAgICAzMCUgew0KICAgICAgICBvcGFjaXR5OiAwLjg7DQogICAgfQ0KICAgIDEwMCUgew0KICAgICAgICBvcGFjaXR5OiAxOw0KICAgIH0NCn0NCkAtd2Via2l0LWtleWZyYW1lcyBhbmlfaGlkZVRvU2hvdyB7DQogICAgMCUgew0KICAgICAgICBkaXNwbGF5Om5vbmU7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDIwJSB7DQogICAgICAgIGRpc3BsYXk6bm9uZTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgZGlzcGxheTpub25lOw0KICAgICAgICBvcGFjaXR5OiAwLjg7DQogICAgfQ0KICAgIDEwMCUgew0KICAgICAgICBvcGFjaXR5OiAxOw0KICAgIH0NCn0NCg=="},{"meta":{"name":"bingOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/bingOnePageStyle.css?t=24.26","ts":1638677801156,"mimetype":"text/css"},"source":"LypTdG9yZSBCaW5nT25lUGFnZVN0eWxlKi8NCiNiX2NvbnRlbnQgYXNpZGV7DQogICAgZGlzcGxheTpub25lOw0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzew0KICAgIHdpZHRoOiA3M3Z3Ow0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIG1heC13aWR0aDogMTAwMHB4Ow0KfQ0KYm9keSAjYl9oZWFkZXJ7DQogICAgd2lkdGg6IDcydnc7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIG1hcmdpbjogMCBhdXRvOw0KfQ0KYm9keSAjYl9jb250ZW50ew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgbWFyZ2luLWxlZnQ6IHVuc2V0Ow0KICAgIHBhZGRpbmctbGVmdDogdW5zZXQ7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHM+bGk6bm90KCNtZmFfcm9vdCkgew0KICAgIHdpZHRoOjk4JTsNCn0NCg=="},{"meta":{"name":"bingTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/bingTwoPageStyle.css?t=24.26","ts":1638677801160,"mimetype":"text/css"},"source":"LypTdG9yZSBCaW5nVHdvUGFnZVN0eWxlKi8NCiNjb250YWluZXIgI2NvbnRlbnRfbGVmdCAuaGl0X3RvcF9uZXcsDQojYl9jb250ZW50IGFzaWRlLCAjYl9yZXN1bHRzICNtZmFfcm9vdHsNCiAgICBkaXNwbGF5Om5vbmU7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHN7DQogICAgd2lkdGg6IDczdnc7DQogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsbWlubWF4KDUwJSwxZnIpKTsNCiAgICBncmlkLXRlbXBsYXRlLWFyZWFzOiAieG1haW4geG1haW4iOw0KICAgIGRpc3BsYXk6IGlubGluZS1ncmlkOw0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzPmxpOm5vdCgjbWZhX3Jvb3QpIHsNCiAgICB3aWR0aDo5OCU7DQogICAgbWFyZ2luLWxlZnQ6IDElOw0KfQ0KI2JfcmVzdWx0cyAuYl9hbGdvIC5iX2RlZXAgdWx7DQogICAgd2lkdGg6IDUwJTsNCn0NCiNiX21zZywgI2JfcGFnew0KICAgIGdyaWQtY29sdW1uLWVuZDogeG1haW4tZW5kOw0KICAgIGdyaWQtY29sdW1uLXN0YXJ0OiAxOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7DQp9DQpib2R5ICNiX2NvbnRlbnR7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBtYXJnaW4tbGVmdDogdW5zZXQ7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldDsNCn0NCmJvZHkgI2JfaGVhZGVyew0KICAgIHdpZHRoOiA3MnZ3Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBtYXJnaW46IDAgYXV0bzsNCn0NCg=="},{"meta":{"name":"duckCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/duckCommonStyle.css?t=24.26","ts":1638677801163,"mimetype":"text/css"},"source":"LypTdG9yZTogRHVja0R1Y2tHb0NvbW1vblN0eWxlKi8NCmJvZHkgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7DQp9DQoucmVzdWx0X19pY29uIC5yZXN1bHRfX2ljb25fX2ltZywgLnJlc3VsdF9faWNvbiAucmVzdWx0X19pY29uIGltZ3sNCiAgICBkaXNwbGF5OiBub25lOw0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDJ7DQogICAgZm9udC13ZWlnaHQ6IDYwMDsNCn0NCiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluew0KICAgIG1heC13aWR0aDogNjcwcHg7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCB7DQogICAgd2lkdGg6IDY3MHB4Ow0KICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgbWFyZ2luLXRvcDogMHB4Ow0KICAgIG1hcmdpbi1ib3R0b206IDI1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuMSk7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuMjVzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSkgMHM7DQp9DQouZGFyay1iZyAjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzOw0KfQ0KLmRhcmstYmcgI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMzNDU7DQp9DQouZGFyay1iZyAjbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X190aXRsZSBhIHsNCiAgICBjb2xvcjogI0NDQ0NDQzsNCn0NCi5kYXJrLWJnICNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIC5yZXN1bHRfX3RpdGxlIGE6dmlzaXRlZCB7DQogICAgY29sb3I6ICNiNzY2M2U7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X190aXRsZSBhIHsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOw0KICAgIG1heC13aWR0aDogNjQwcHg7DQogICAgY29sb3I6ICMzNDc2ZDI7DQogICAgZm9udC1zaXplOiBzbWFsbGVyOw0KfQ0KDQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X19ib2R5ew0KICAgIHBhZGRpbmc6IDEycHggMjBweCAhaW1wb3J0YW50Ow0KfQ0KDQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcDpob3ZlciB7DQogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjMpOw0KICAgIGJveC1zaGFkb3c6IDAgMCAxcHggZ3JleTsNCiAgICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMCAxcHggZ3JleTsNCiAgICAtbW96LWJveC1zaGFkb3c6IDAgMCAxcHggZ3JheTsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOGY4Ow0KICAgIG1hcmdpbjogLTEycHggLTIwcHggMHB4IC0yMHB4Ow0KICAgIHBhZGRpbmc6IDhweCAyMHB4IDVweDsNCiAgICBib3JkZXItcmFkaXVzOiA1cHggNXB4IDBweCAwcHg7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOmhvdmVyOmFmdGVyIHsNCiAgICBsZWZ0OiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6YWZ0ZXIgew0KICAgIGNvbnRlbnQ6ICIiOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzM0NzZkMjsNCiAgICBib3R0b206IDFweDsNCiAgICBsZWZ0OiAxMDAlOw0KICAgIHdpZHRoOiAwOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtcywgbGVmdCAzNTBtczsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZCwNCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZCBzdHJvbmcgew0KICAgIGNvbG9yOiAjNjYwMDk5Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTp2aXNpdGVkOmhvdmVyOmFmdGVyLA0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTp2aXNpdGVkOmhvdmVyOmFmdGVyIHsNCiAgICBsZWZ0OiAwOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC13ZWJraXQtdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAzNTBtczsNCn0NCg0KLyogU2VhcmNoSXRtZXMgQm90dG9tIHRvIFRvcCBhbmkgKi8NCiNsaW5rc193cmFwcGVyICNsaW5rcyB7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9ib3R0b21Ub3RvcDsNCiAgICBhbmltYXRpb24tZHVyYXRpb246IC4zczsNCiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlOw0KfQ0KDQovKiBTZWFyY2hCYXIgTGVmdCB0byBSaWdodCBhbmkgKi8NCiNoZWFkZXJfd3JhcHBlciAuaGVhZGVyX19zZWFyY2gtd3JhcCB7DQogICAgYW5pbWF0aW9uLW5hbWU6IGFuaV9sZWZ0VG9yaWdodDsNCiAgICBhbmltYXRpb24tZHVyYXRpb246IC4zczsNCiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLW91dDsNCn0NCkBrZXlmcmFtZXMgYW5pX2xlZnRUb3JpZ2h0IHsNCiAgICAwJSB7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMzJweCk7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDIwJSB7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDMwJSB7DQogICAgICAgIG9wYWNpdHk6IDAuODsNCiAgICB9DQogICAgMTAwJSB7DQogICAgICAgIG9wYWNpdHk6IDE7DQogICAgfQ0KfQ0KLyogYW5pICovDQpAa2V5ZnJhbWVzIGFuaV9ib3R0b21Ub3RvcCB7DQogICAgMCUgew0KICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMzJweCk7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDIwJSB7DQogICAgICAgIG9wYWNpdHk6IDA7DQogICAgfQ0KICAgIDMwJSB7DQogICAgICAgIG9wYWNpdHk6IDAuODsNCiAgICB9DQogICAgMTAwJSB7DQogICAgICAgIG9wYWNpdHk6IDE7DQogICAgfQ0KfQ0K"},{"meta":{"name":"duckOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/duckOnePageStyle.css?t=24.26","ts":1638677801165,"mimetype":"text/css"},"source":"LypTdG9yZTogRHVja0R1Y2tHb09uZVBhZ2VTdHlsZSovDQouanMtc2lkZWJhci1hZHMsICNvcmdhbmljLW1vZHVsZSwgLnBpbm5lZC10by1ib3R0b217DQogICAgZGlzcGxheTogbm9uZTsNCn0NCi5qcy1yZXN1bHQtaGlkZGVuLWVsew0KICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsNCn0NCi5zaXRlLXdyYXBwZXIgI3dlYl9jb250ZW50X3dyYXBwZXIgLmN3IHsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIG1heC13aWR0aDogdW5zZXQ7DQogICAgbWFyZ2luLWxlZnQ6IC0xNTBweDsNCn0NCg0KI2hlYWRlcl93cmFwcGVyICNoZWFkZXIsDQojd2ViX2NvbnRlbnRfd3JhcHBlciAjbGlua3Nfd3JhcHBlciAuc2VhcmNoLWZpbHRlcnMtd3JhcCwNCiN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tZXNzYWdlew0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIGRpc3BsYXk6IGdyaWQ7DQp9DQojaGVhZGVyX3dyYXBwZXIgI2hlYWRlciB7DQogICAgbWF4LXdpZHRoOiB1bnNldDsNCn0NCg0KDQojaGVhZGVyX3dyYXBwZXIgI2hlYWRlciAuaGVhZGVyX19zZWFyY2gtd3JhcCB7DQogICAgd2lkdGg6IDUwMHB4Ow0KfQ0KI2xpbmtzX3dyYXBwZXJ7DQogICAgZGlzcGxheTogaW5saW5lLWZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbnsNCiAgICBmbG9hdDogdW5zZXQ7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tc2lkZWJhcnsNCiAgICBtaW4td2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbjogdW5zZXQ7DQp9DQouYm9keS0tc2VycCAuZm9vdGVyew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldDsNCn0NCg=="},{"meta":{"name":"duckTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/duckTwoPageStyle.css?t=24.26","ts":1638677801166,"mimetype":"text/css"},"source":"LypTdG9yZTogRHVja0R1Y2tHb1R3b1BhZ2VTdHlsZSovDQouanMtc2lkZWJhci1hZHMsDQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tc2lkZWJhciwNCiNvcmdhbmljLW1vZHVsZSwNCi5waW5uZWQtdG8tYm90dG9tew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQouanMtcmVzdWx0LWhpZGRlbi1lbHsNCiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7DQp9DQouc2l0ZS13cmFwcGVyICN3ZWJfY29udGVudF93cmFwcGVyIC5jdyB7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbi1sZWZ0OiAtMTUwcHg7DQp9DQoNCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyLA0KI3dlYl9jb250ZW50X3dyYXBwZXIgI2xpbmtzX3dyYXBwZXIgLnNlYXJjaC1maWx0ZXJzLXdyYXAsDQojd2ViX2NvbnRlbnRfd3JhcHBlciAjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWVzc2FnZXsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBkaXNwbGF5OiBncmlkOw0KfQ0KI2hlYWRlcl93cmFwcGVyICNoZWFkZXIgew0KICAgIG1heC13aWR0aDogdW5zZXQ7DQp9DQoNCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyIC5oZWFkZXJfX3NlYXJjaC13cmFwIHsNCiAgICB3aWR0aDogNTAwcHg7DQp9DQojbGlua3Nfd3JhcHBlcnsNCiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCn0NCiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluew0KICAgIGZsb2F0OiB1bnNldDsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLXNpZGViYXJ7DQogICAgbWluLXdpZHRoOiB1bnNldDsNCiAgICBtYXJnaW46IHVuc2V0Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzew0KICAgIHdpZHRoOiA4MHZ3Ow0KICAgIC8qIFRoaXMgbWF5IGNhdXNlIFBhZ2UgZmFpbGVkICovDQogICAgZGlzcGxheTogaW5saW5lLWdyaWQ7DQogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiA1MCUgNTAlOw0KICAgIGdyaWQtdGVtcGxhdGUtYXJlYXM6ICJ4bWFpbiB4bWFpbiI7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbiAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcHsNCiAgICB3aWR0aDogdW5zZXQ7DQogICAgbWFyZ2luLXJpZ2h0OiAxNXB4Ow0KfQ0KI2xpbmtzIC5yZXN1bHQtLW1vcmUsICNsaW5rcyAucmVzdWx0LS1zZXB7DQogICAgZ3JpZC1jb2x1bW4tc3RhcnQ6IDE7DQogICAgZ3JpZC1jb2x1bW4tZW5kOiB4bWFpbi1lbmQ7DQogICAgd2lkdGg6IHVuc2V0ICFpbXBvcnRhbnQ7DQogICAgcGFkZGluZzogMDsNCiAgICBwYWRkaW5nLXJpZ2h0OiAxNXB4Ow0KfQ0KI2xpbmtzIC5yZXN1bHQtLXNlcHsNCiAgICBtYXJnaW4tYm90dG9tOiAyZW07DQp9DQouYm9keS0tc2VycCAuZm9vdGVyew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldDsNCn0NCg=="},{"meta":{"name":"dogeCommonStyle.css","url":"http://ibaidu.tujidu.com/newcss/dogeCommonStyle.css?t=24.26","ts":1638677801166,"mimetype":"text/css"},"source":"LypTdG9yZTogRG9nZUNvbW1vblN0eWxlKi8NCmJvZHkgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7DQp9DQoucmVzdWx0c19saW5rc19kZWVwIC5yZXN1bHRfX2ljb257DQogICAgZGlzcGxheTogbm9uZTsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyew0KICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbnsNCiAgICBtYXgtd2lkdGg6IDY3MHB4Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgew0KICAgIHdpZHRoOiA2NzBweDsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIG1hcmdpbi10b3A6IDBweDsNCiAgICBtYXJnaW4tYm90dG9tOiAyNXB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjEpOw0KICAgIHRyYW5zaXRpb246IGFsbCAwLjI1cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpIDBzOw0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fdGl0bGUgYSB7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsNCiAgICBtYXgtd2lkdGg6IDY0MHB4Ow0KICAgIGNvbG9yOiAjMzQ3NmQyOw0KICAgIGZvbnQtc2l6ZTogc21hbGxlcjsNCn0NCg0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fYm9keXsNCiAgICBwYWRkaW5nOiAxMnB4IDIwcHggIWltcG9ydGFudDsNCn0NCg0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXA6aG92ZXIgew0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsMC4zKTsNCiAgICBib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgMXB4IGdyZXk7DQogICAgLW1vei1ib3gtc2hhZG93OiAwIDAgMXB4IGdyYXk7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODsNCiAgICBtYXJnaW46IC0xMnB4IC0yMHB4IDBweCAtMjBweDsNCiAgICBwYWRkaW5nOiA4cHggMjBweCA1cHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwcHggMHB4Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDIgYTpob3ZlcjphZnRlciB7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOmFmdGVyIHsNCiAgICBjb250ZW50OiAiIjsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMzNDc2ZDI7DQogICAgYm90dG9tOiAxcHg7DQogICAgbGVmdDogMTAwJTsNCiAgICB3aWR0aDogMDsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zLCBsZWZ0IDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXMsIGxlZnQgMzUwbXM7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOnZpc2l0ZWQsDQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcCBoMiBhOnZpc2l0ZWQgc3Ryb25nIHsNCiAgICBjb2xvcjogIzY2MDA5OTsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZDpob3ZlcjphZnRlciwNCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIGE6dmlzaXRlZDpob3ZlcjphZnRlciB7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDM1MG1zOw0KICAgIC1tb3otdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQogICAgdHJhbnNpdGlvbjogd2lkdGggMzUwbXM7DQp9DQoNCi8qIFNlYXJjaEl0bWVzIEJvdHRvbSB0byBUb3AgYW5pICovDQojbGlua3Nfd3JhcHBlciAjbGlua3Mgew0KICAgIGFuaW1hdGlvbi1uYW1lOiBhbmlfYm90dG9tVG90b3A7DQogICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAuM3M7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTsNCn0NCg0KLyogU2VhcmNoQmFyIExlZnQgdG8gUmlnaHQgYW5pICovDQojaGVhZGVyX3dyYXBwZXIgLmhlYWRlcl9fc2VhcmNoLXdyYXAgew0KICAgIGFuaW1hdGlvbi1uYW1lOiBhbmlfbGVmdFRvcmlnaHQ7DQogICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAuM3M7DQogICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1vdXQ7DQp9DQouQUMuc3Atc2VwYXJhdG9yew0KICAgIG1hcmdpbi10b3A6IC0xNXB4Ow0KfQ0KQGtleWZyYW1lcyBhbmlfbGVmdFRvcmlnaHQgew0KICAgIDAlIHsNCiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0zMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQovKiBhbmkgKi8NCkBrZXlmcmFtZXMgYW5pX2JvdHRvbVRvdG9wIHsNCiAgICAwJSB7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgzMnB4KTsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMjAlIHsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICB9DQogICAgMzAlIHsNCiAgICAgICAgb3BhY2l0eTogMC44Ow0KICAgIH0NCiAgICAxMDAlIHsNCiAgICAgICAgb3BhY2l0eTogMTsNCiAgICB9DQp9DQo="},{"meta":{"name":"dogeOnePageStyle.css","url":"http://ibaidu.tujidu.com/newcss/dogeOnePageStyle.css?t=24.26","ts":1638677801168,"mimetype":"text/css"},"source":"LypTdG9yZTogRG9nZU9uZVBhZ2VTdHlsZSovDQouanMtc2lkZWJhci1hZHMsICNvcmdhbmljLW1vZHVsZSwgLnBpbm5lZC10by1ib3R0b217DQogICAgZGlzcGxheTogbm9uZTsNCn0NCi5qcy1yZXN1bHQtaGlkZGVuLWVsew0KICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsNCn0NCi5zaXRlLXdyYXBwZXIgI3dlYl9jb250ZW50X3dyYXBwZXIgLmN3IHsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIG1heC13aWR0aDogdW5zZXQ7DQp9DQoNCkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEwMDBweCkgew0KICAgICNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIHsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgfQ0KfQ0KDQojaGVhZGVyX3dyYXBwZXIgI2hlYWRlciwNCiN3ZWJfY29udGVudF93cmFwcGVyICNsaW5rc193cmFwcGVyIC5zZWFyY2gtZmlsdGVycy13cmFwLA0KI3dlYl9jb250ZW50X3dyYXBwZXIgI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1lc3NhZ2V7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgZGlzcGxheTogZ3JpZDsNCn0NCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyIHsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KDQojaGVhZGVyX3dyYXBwZXIgI2hlYWRlciAuaGVhZGVyX19zZWFyY2gtd3JhcCB7DQogICAgd2lkdGg6IDUwMHB4Ow0KfQ0KI2xpbmtzX3dyYXBwZXJ7DQogICAgZGlzcGxheTogaW5saW5lLWZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgcGFkZGluZy1sZWZ0OiAwOw0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW57DQogICAgZmxvYXQ6IHVuc2V0Ow0KICAgIG1heC13aWR0aDogODYwcHg7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tc2lkZWJhcnsNCiAgICBtaW4td2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbjogdW5zZXQ7DQp9DQouYm9keS0tc2VycCAuZm9vdGVyew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldDsNCn0NCg=="},{"meta":{"name":"dogeTwoPageStyle.css","url":"http://ibaidu.tujidu.com/newcss/dogeTwoPageStyle.css?t=24.26","ts":1638677801169,"mimetype":"text/css"},"source":"LypTdG9yZTogRG9nZVR3b1BhZ2VTdHlsZSovDQouanMtc2lkZWJhci1hZHMsDQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tc2lkZWJhciwNCiNvcmdhbmljLW1vZHVsZSwNCi5waW5uZWQtdG8tYm90dG9tew0KICAgIGRpc3BsYXk6IG5vbmU7DQp9DQouanMtcmVzdWx0LWhpZGRlbi1lbHsNCiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7DQp9DQouc2l0ZS13cmFwcGVyICN3ZWJfY29udGVudF93cmFwcGVyIC5jdyB7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KICAgIG1hcmdpbi1sZWZ0OiAtMTUwcHg7DQp9DQoNCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyLA0KI3dlYl9jb250ZW50X3dyYXBwZXIgI2xpbmtzX3dyYXBwZXIgLnNlYXJjaC1maWx0ZXJzLXdyYXAsDQojd2ViX2NvbnRlbnRfd3JhcHBlciAjbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWVzc2FnZXsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBkaXNwbGF5OiBncmlkOw0KfQ0KI2hlYWRlcl93cmFwcGVyICNoZWFkZXIgew0KICAgIG1heC13aWR0aDogdW5zZXQ7DQp9DQoNCiNoZWFkZXJfd3JhcHBlciAjaGVhZGVyIC5oZWFkZXJfX3NlYXJjaC13cmFwIHsNCiAgICB3aWR0aDogNTAwcHg7DQp9DQojbGlua3Nfd3JhcHBlcnsNCiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCn0NCiNsaW5rc193cmFwcGVyIC5yZXN1bHRzLS1tYWluew0KICAgIGZsb2F0OiB1bnNldDsNCiAgICBtYXgtd2lkdGg6IHVuc2V0Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLXNpZGViYXJ7DQogICAgbWluLXdpZHRoOiB1bnNldDsNCiAgICBtYXJnaW46IHVuc2V0Ow0KfQ0KI2xpbmtzX3dyYXBwZXIgLnJlc3VsdHMtLW1haW4gI2xpbmtzew0KICAgIHdpZHRoOiA4MHZ3Ow0KICAgIC8qIFRoaXMgbWF5IGNhdXNlIFBhZ2UgZmFpbGVkICovDQogICAgZGlzcGxheTogaW5saW5lLWdyaWQ7DQogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiA1MCUgNTAlOw0KICAgIGdyaWQtdGVtcGxhdGUtYXJlYXM6ICJ4bWFpbiB4bWFpbiI7DQp9DQojbGlua3Nfd3JhcHBlciAucmVzdWx0cy0tbWFpbiAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcHsNCiAgICB3aWR0aDogdW5zZXQ7DQogICAgbWFyZ2luLXJpZ2h0OiAxNXB4Ow0KfQ0KI2xpbmtzIC5yZXN1bHQtLW1vcmUsICNsaW5rcyAucmVzdWx0LS1zZXB7DQogICAgZ3JpZC1jb2x1bW4tc3RhcnQ6IDE7DQogICAgZ3JpZC1jb2x1bW4tZW5kOiB4bWFpbi1lbmQ7DQogICAgd2lkdGg6IHVuc2V0ICFpbXBvcnRhbnQ7DQogICAgcGFkZGluZzogMDsNCiAgICBwYWRkaW5nLXJpZ2h0OiAxNXB4Ow0KfQ0KI2xpbmtzIC5yZXN1bHQtLXNlcHsNCiAgICBtYXJnaW4tYm90dG9tOiAyZW07DQp9DQouYm9keS0tc2VycCAuZm9vdGVyew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgcGFkZGluZy1sZWZ0OiB1bnNldDsNCn0NCg=="},{"meta":{"name":"HuYanStyle.css","url":"http://ibaidu.tujidu.com/newcss/HuYanStyle.css?t=24.26","ts":1638677801171,"mimetype":"text/css"},"source":"LyoqU3RvcmUgSHVZYW5TdHlsZSoqLw0KLyoqKioqQmFpZHUtSHVZYW5TdHlsZSoqKioqLw0KYm9keVtiYWlkdV0sDQojd3JhcHBlciAjaGVhZCwNCiN3cmFwcGVyICNzX3RhYiwNCmZvcm0uZm0gLnNfaXB0X3dyLmJnew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IGFydGljbGUsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciwNCiN3cmFwcGVyICNycywNCiN3cmFwcGVyICNjb250ZW50X3JpZ2h0ew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNBQUFBQUEgOw0KICAgIGJvcmRlcjogMXB4IGRvdWJsZSAjQTJEN0Q0IDsNCiAgICBib3JkZXItcmFkaXVzOiAwcHg7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3A6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQ6aG92ZXIsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3A6aG92ZXIgYXJ0aWNsZXsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDICFpbXBvcnRhbnQ7DQp9DQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQgaDMsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5yZXN1bHQtb3AgaDMsDQojd3JhcHBlciAjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciBoMywNCiN3cmFwcGVyICNycyAudHR7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0JCQkJCQiA7DQp9DQovKioqQmluZy1IdVlhblN0eWxlKioqKi8NCi5uYV9jbnQgLm53c19pdG0sDQoubndzX2l0bWIsDQojYl9jb250ZW50ICNiX3Jlc3VsdHM+bGk6bm90KCNtZmFfcm9vdCksDQpib2R5ICNiX2hlYWRlcnsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQUFBQUFBIDsNCiAgICBib3JkZXI6IDFweCBkb3VibGUgI0EyRDdENCA7DQogICAgYm9yZGVyLXJhZGl1czogMHB4Ow0KfQ0KI2JfY29udGVudCAjYl9yZXN1bHRzIGxpOmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDICFpbXBvcnRhbnQ7DQp9DQojYl9jb250ZW50ICNiX3Jlc3VsdHMgbGkgaDJ7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0JCQkJCQiA7DQp9DQovKioqR29vZ2xlLUh1WWFuU3R5bGUqKioqLw0KYm9keVtnb29nbGVdew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmRGZEZkQ7DQp9DQojcnNvIC5nLCAuYmtXTWdkPi5nLA0KLmJrV01nZCBnLWlubmVyLWNhcmQsDQojcmhzY29sICNyaHMsDQojcmhzY29sICNyaHMgLmc+ZGl2LA0KLmMyeHpUYiAuZywNCi5ydVRjSWQgLmcsDQouZm0wNklmIC5nLA0KLmNVblFLZSAuZywNCi5IYW5RbWYgLmcsDQojcnNvIC5nLA0KI3JzbyAua3AtYmxrLA0KI3JzbyAuTUdxakssDQojcnNvPmRpdjpub3QoLmcpPip7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0FBQUFBQSA7DQogICAgYm9yZGVyOiAxcHggc29saWQgIzljZDJjZkFBOw0KICAgIGJvcmRlci1yYWRpdXM6IDBweDsNCn0NCiNyc28gLmc6aG92ZXIsDQouYmtXTWdkPi5nOmhvdmVyIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDICFpbXBvcnRhbnQ7DQogICAgYm9yZGVyOiAxcHggZG91YmxlICM5Y2QyY2Y7DQp9DQouYmtXTWdkIC5nIGRpdi5yLA0KI3JzbyAuZyBoM3sNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQkJCQkJCIDsNCn0NCi8qKipTb2dvdS1IdVlhblN0eWxlKioqKi8NCmJvZHlbc29nb3VdLCAjcGFnZWJhcl9jb250YWluZXIgYXsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZkRmRGZEOw0KfQ0KI21haW4gLnJlc3VsdHM+ZGl2ew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNBQUFBQUEgOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkICM5Y2QyY2ZBQTsNCiAgICBib3JkZXItcmFkaXVzOiAwcHg7DQp9DQojbWFpbiAucmVzdWx0cz5kaXY6aG92ZXIgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNDQ0NDQ0MgIWltcG9ydGFudDsNCiAgICBib3JkZXI6IDFweCBkb3VibGUgIzljZDJjZjsNCn0NCiNtYWluIC5yZXN1bHRzPmRpdiBoM3sNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjQkJCQkJCIDsNCn0NCi8qKipEdWNrX0RvZ2UtSHVZYW5TdHlsZSoqKiovDQpib2R5W2R1Y2tdLGJvZHlbZG9nZV17DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZEZkRmRDsNCn0NCiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNBQUFBQUEgOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkICM5Y2QyY2ZBQTsNCiAgICBib3JkZXItcmFkaXVzOiAwcHg7DQp9DQojbGlua3Nfd3JhcHBlciAjbGlua3MgLnJlc3VsdHNfbGlua3NfZGVlcDpob3ZlciB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0NDQ0NDQyAhaW1wb3J0YW50Ow0KICAgIGJvcmRlcjogMXB4IGRvdWJsZSAjOWNkMmNmOw0KfQ0KI2xpbmtzX3dyYXBwZXIgI2xpbmtzIC5yZXN1bHRzX2xpbmtzX2RlZXAgaDJ7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0JCQkJCQiA7DQp9DQo="},{"meta":{"name":"SiteConfigRules.conf","url":"http://ibaidu.tujidu.com/newcss/SiteConfigRules.conf?t=24.26","ts":1638677801173,"mimetype":"text/plain"},"source":"b25saW5lREIgPSB7DQogICBiYWlkdTogew0KICAgICAgIFNpdGVUeXBlSUQ6IDEsDQogICAgICAgTWFpblR5cGU6ICIjY29udGVudF9sZWZ0IC5jLWNvbnRhaW5lciIsDQogICAgICAgU3R5cGVfTm9ybWFsOiAiaDMudD5hLCAuYy1jb250YWluZXIgYXJ0aWNsZSBhIiwNCiAgICAgICBGYXZpY29uVHlwZTogIi5jLXNob3d1cmwiLA0KICAgICAgIEZhdmljb25BZGRUbzogImgzIiwNCiAgICAgICBDb3VudGVyVHlwZTogIiNjb250ZW50X2xlZnQ+I2RvdWJsZT5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dLCNjb250ZW50X2xlZnQ+ZGl2W3NyY2lkXSAqW2NsYXNzfj10XSxbY2xhc3N+PW9wX2Jlc3RfYW5zd2VyX3F1ZXN0aW9uXSIsDQogICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsDQogICAgICAgcGFnZXI6ew0KICAgICAgICAgICBuZXh0TGluazogJy8vZGl2W0BpZD0icGFnZSJdLy9hW2NvbnRhaW5zKHRleHQoKSwiw6TCuMKLw6TCuMKAw6nCocK1IildW0BocmVmXScsDQogICAgICAgICAgIHBhZ2VFbGVtZW50OiAiY3NzO2RpdiNjb250ZW50X2xlZnQgPiAqIiwNCiAgICAgICAgICAgSFRfaW5zZXJ0OiBbICJjc3M7ZGl2I2NvbnRlbnRfbGVmdCIsIDIgXSwNCiAgICAgICAgICAgcmVwbGFjZUU6ICJjc3M7I3BhZ2UiLA0KICAgICAgICAgICBzdHlsaXNoOiAiLmF1dG9wYWdlcml6ZV9wYWdlX2luZm8sIGRpdi5zcC1zZXBhcmF0b3Ige21hcmdpbi1ib3R0b206IDEwcHggIWltcG9ydGFudDt9LmMtaW1nLWJvcmRlcntkaXNwbGF5Om5vbmV9IiwNCiAgICAgICB9DQogICB9LA0KICAgc29nb3U6IHsNCiAgICAgICBTaXRlVHlwZUlEOiAyLA0KICAgICAgIE1haW5UeXBlOiAiI21haW4gLnJlc3VsdHM+ZGl2IiwNCiAgICAgICBTdHlwZV9Ob3JtYWw6ICJoMy5wdD5hLCBoMy52clRpdGxlPmEiLA0KICAgICAgIEZhdmljb25UeXBlOiAiY2l0ZVtpZCo9J2NhY2hlcmVzdWx0X2luZm9fJ10iLA0KICAgICAgIEZhdmljb25BZGRUbzogImgzIiwNCiAgICAgICBDb3VudGVyVHlwZTogIi5yZXN1bHRzPmRpdiIsDQogICAgICAgQmxvY2tUeXBlOiAiaDMgYSIsDQogICAgICAgcGFnZXI6ew0KICAgICAgICAgICBuZXh0TGluazogIi8vZGl2W0BpZD1cInBhZ2ViYXJfY29udGFpbmVyXCJdLy9hW0BpZD1cInNvZ291X25leHRcIl0iLA0KICAgICAgICAgICBwYWdlRWxlbWVudDogIi8vZGl2W0BjbGFzcz0ncmVzdWx0cyddL2RpdiIsDQogICAgICAgICAgIEhUX2luc2VydDogWyIvL2RpdltAY2xhc3M9J3Jlc3VsdHMnXSIsIDJdLA0KICAgICAgICAgICByZXBsYWNlRTogImlkKCdwYWdlYmFyX2NvbnRhaW5lcicpIg0KICAgICAgIH0NCiAgIH0sDQogICBoYW9zb3U6IHsNCiAgICAgICBTaXRlVHlwZUlEOiAzLA0KICAgICAgIE1haW5UeXBlOiAiLnJlcy1saXN0IiwNCiAgICAgICBTdHlwZV9Ob3JtYWw6ICIucmVzLWxpc3QgaDM+YSIsDQogICAgICAgRmF2aWNvblR5cGU6ICJjaXRlIiwNCiAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsDQogICAgICAgQ291bnRlclR5cGU6ICIucmVzdWx0cz5kaXYiLA0KICAgICAgIEJsb2NrVHlwZTogImgzIGEiLA0KICAgICAgIHBhZ2VyOnsNCiAgICAgICAgICAgbmV4dExpbms6ICIvL2RpdltAaWQ9J3BhZ2UnXS8vYVt0ZXh0KCk9J8OkwrjCi8OkwrjCgMOpwqHCtT4nXSB8IGlkKCdzbmV4dCcpIiwNCiAgICAgICAgICAgcGFnZUVsZW1lbnQ6ICIvL2RpdltAaWQ9J2NvbnRhaW5lciddL2RpdiIsDQogICAgICAgICAgIEhUX2luc2VydDogWyIvL2RpdltAaWQ9J2NvbnRhaW5lciddIiwgMl0sDQogICAgICAgICAgIHJlcGxhY2VFOiAiaWQoJ3BhZ2UnKSINCiAgICAgICB9DQogICB9LA0KICAgZ29vZ2xlOiB7DQogICAgICAgU2l0ZVR5cGVJRDogNCwNCiAgICAgICBNYWluVHlwZTogIiNyc28gLmciLA0KICAgICAgIEZhdmljb25UeXBlOiAiLmlVaDMwIiwNCiAgICAgICBGYXZpY29uQWRkVG86ICJoMyIsDQogICAgICAgQ291bnRlclR5cGU6ICIjcnNvIC5nIGgzLC5feUU+ZGl2W2NsYXNzfj1fa2tdIGgzIiwNCiAgICAgICBCbG9ja1R5cGU6ICIucmM+ZGl2PmEsICNycywgI3JzbyAuZyBhIiwNCiAgICAgICBwYWdlcjp7DQogICAgICAgICAgIG5leHRMaW5rOiAnaWQoInBubmV4dCIpIHwgaWQoIm5hdmJhciBuYXZjbnQgbmF2IikvL3RkW3NwYW5dL2ZvbGxvd2luZy1zaWJsaW5nOjp0ZFsxXS9hIHwgaWQoIm5uIikvcGFyZW50OjphJywNCiAgICAgICAgICAgcGFnZUVsZW1lbnQ6ICcvL2RpdltAaWQ9InJlcyJdJywNCiAgICAgICAgICAgSFRfaW5zZXJ0OiBbICJjc3M7I3JlcyIsIDIgXSwNCiAgICAgICAgICAgcmVwbGFjZUU6ICcvL2RpdltAaWQ9Im5hdmNudCJdIHwgLy9kaXZbQGlkPSJyY250Il0vL2RpdltAcm9sZT0ibmF2aWdhdGlvbiJdJw0KICAgICAgIH0NCiAgIH0sDQogICBiaW5nOiB7DQogICAgICAgU2l0ZVR5cGVJRDogNSwNCiAgICAgICBNYWluVHlwZTogIiNiX3Jlc3VsdHM+bGkiLA0KICAgICAgIEZhdmljb25UeXBlOiAiLmJfYXR0cmlidXRpb24+Y2l0ZSIsDQogICAgICAgRmF2aWNvbkFkZFRvOiAiaDIiLA0KICAgICAgIENvdW50ZXJUeXBlOiAiI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbnNdPmgyLCNiX3Jlc3VsdHM+bGlbY2xhc3N+PWJfYWxnb10+aDIsI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXT5oMiIsDQogICAgICAgQmxvY2tUeXBlOiAiaDIgYSIsDQogICAgICAgcGFnZXI6ew0KICAgICAgICAgICBuZXh0TGluazogIi8vYVtjb250YWlucyhAY2xhc3MsXCJzYl9wYWdOXCIpXSIsDQogICAgICAgICAgIHBhZ2VFbGVtZW50OiAiaWQoXCJiX3Jlc3VsdHNcIikvbGlbbm90KGNvbnRhaW5zKEBjbGFzcyxcImJfcGFnXCIpIG9yIGNvbnRhaW5zKEBjbGFzcyxcImJfYW5zIGJfdG9wXCIpKV0iLA0KICAgICAgICAgICBIVF9pbnNlcnQ6IFsiaWQoXCJiX3Jlc3VsdHNcIikvbGlbQGNsYXNzPVwiYl9wYWdcIl0iLCAxXSwNCiAgICAgICAgICAgcmVwbGFjZUU6ICJpZChcImJfcmVzdWx0c1wiKS8vbmF2W0Byb2xlPVwibmF2aWdhdGlvblwiXSIsDQogICAgICAgfQ0KICAgfSwNCiAgIGR1Y2s6IHsNCiAgICAgICBTaXRlVHlwZUlEOiAxMCwNCiAgICAgICBNYWluVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIiwNCiAgICAgICBGYXZpY29uVHlwZTogIi5yZXN1bHRzX2xpbmtzX2RlZXAgLnJlc3VsdF9fdXJsX19kb21haW4iLA0KICAgICAgIEZhdmljb25BZGRUbzogImgyIiwNCiAgICAgICBDb3VudGVyVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIiwNCiAgICAgICBCbG9ja1R5cGU6ICJoMiBhIiwNCiAgICAgICBwYWdlcjp7DQogICAgICAgICAgIG5leHRMaW5rOiAiLy9hW2NvbnRhaW5zKEBjbGFzcyxcInNiX3BhZ05cIildIiwNCiAgICAgICAgICAgcGFnZUVsZW1lbnQ6ICJpZChcImJfcmVzdWx0c1wiKS9saVtub3QoY29udGFpbnMoQGNsYXNzLFwiYl9wYWdcIikgb3IgY29udGFpbnMoQGNsYXNzLFwiYl9hbnMgYl90b3BcIikpXSIsDQogICAgICAgICAgIEhUX2luc2VydDogWyJpZChcImJfcmVzdWx0c1wiKS9saVtAY2xhc3M9XCJiX3BhZ1wiXSIsIDFdLA0KICAgICAgICAgICByZXBsYWNlRTogImlkKFwiYl9yZXN1bHRzXCIpLy9uYXZbQHJvbGU9XCJuYXZpZ2F0aW9uXCJdIiwNCiAgICAgICB9DQogICB9LA0KICAgZG9nZTogew0KICAgICAgU2l0ZVR5cGVJRDogMTEsDQogICAgICBNYWluVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIiwNCiAgICAgIEZhdmljb25UeXBlOiAiLnJlc3VsdHNfbGlua3NfZGVlcCAucmVzdWx0X191cmxfX2RvbWFpbiIsDQogICAgICBGYXZpY29uQWRkVG86ICJoMiIsDQogICAgICBDb3VudGVyVHlwZTogIiNsaW5rc193cmFwcGVyICNsaW5rcyAucmVzdWx0c19saW5rc19kZWVwIGgyIiwNCiAgICAgIEJsb2NrVHlwZTogImgyIGEiLA0KICAgICAgcGFnZXI6ew0KICAgICAgICAgIG5leHRMaW5rOiAiLy9hW2NvbnRhaW5zKEBjbGFzcywgJ3Jlc3VsdC0tbW9yZScpXSIsDQogICAgICAgICAgcGFnZUVsZW1lbnQ6ICJpZCgnbGlua3Nfd3JhcHBlcicpLy9kaXZbY29udGFpbnMoQGNsYXNzLCAncmVzdWx0c19saW5rc19kZWVwJyldIiwNCiAgICAgICAgICBIVF9pbnNlcnQ6IFsiaWQoJ2xpbmtzX3dyYXBwZXInKS8vZGl2W0BpZD0nbGlua3MnXS9kaXZbY29udGFpbnMoQGNsYXNzLCAncmVzdWx0LS1tb3JlJyldIiwgMV0sDQogICAgICAgICAgcmVwbGFjZUU6ICJpZCgnbGlua3Nfd3JhcHBlcicpLy9kaXZbY29udGFpbnMoQGNsYXNzLCAncmVzdWx0LS1tb3JlJyldL2FbY29udGFpbnModGV4dCgpLCAnw6TCuMKLw6TCuMKAw6nCocK1JyldW0BocmVmXSIsDQogICAgICB9DQogICB9LA0KICAgbUJhaWR1OnsNCiAgICAgICBTaXRlVHlwZUlEOiA2LA0KICAgICAgIE1haW5UeXBlOiAiI2JfcmVzdWx0cz5saSIsDQogICAgICAgRmF2aWNvblR5cGU6ICIuYl9hdHRyaWJ1dGlvbj5jaXRlIiwNCiAgICAgICBGYXZpY29uQWRkVG86ICJoMiIsDQogICAgICAgQ291bnRlclR5cGU6ICIjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2Fuc10+aDIsI2JfcmVzdWx0cz5saVtjbGFzc349Yl9hbGdvXT5oMiwjYl9yZXN1bHRzPmxpW2NsYXNzfj1iX2FsZ29dPmgyIiwNCiAgICAgICBCbG9ja1R5cGU6ICJoMiBhIiwNCiAgIH0sDQogICB6aGlodTogew0KICAgICAgIFNpdGVUeXBlSUQ6IDcsDQogICB9LA0KICAgYmFpZHVfeHVlc2h1OnsNCiAgICAgICBTaXRlVHlwZUlEOiA4LA0KICAgICAgIE1haW5UeXBlOiAiI2NvbnRlbnRfbGVmdCAucmVzdWx0IiwNCiAgICAgICBTdHlwZV9Ob3JtYWw6ICJoMy50PmEsICNyZXN1bHRzIC5jLWNvbnRhaW5lcj4uYy1ibG9ja2EiLA0KICAgICAgIEZhdmljb25UeXBlOiAiLnJlc3VsdC1vcCwgLmMtc2hvd3VybCIsDQogICAgICAgRmF2aWNvbkFkZFRvOiAiaDMiLA0KICAgICAgIENvdW50ZXJUeXBlOiAiI2NvbnRlbnRfbGVmdD4jZG91YmxlPmRpdltzcmNpZF0gKltjbGFzc349dF0sW2NsYXNzfj1vcF9iZXN0X2Fuc3dlcl9xdWVzdGlvbl0sI2NvbnRlbnRfbGVmdD5kaXZbc3JjaWRdICpbY2xhc3N+PXRdLFtjbGFzc349b3BfYmVzdF9hbnN3ZXJfcXVlc3Rpb25dIiwNCiAgICAgICBCbG9ja1R5cGU6ICJoMyBhIiwNCiAgIH0sDQogICBvdGhlcjogew0KICAgICAgIFNpdGVUeXBlSUQ6IDksDQogICB9DQp9DQo="}],"requires":[{"meta":{"name":"vue.min.js","url":"https://cdn.staticfile.org/vue/2.6.11/vue.min.js","ts":1638677801301,"mimetype":"text/javascript"},"source":"LyohCiAqIFZ1ZS5qcyB2Mi42LjExCiAqIChjKSAyMDE0LTIwMTkgRXZhbiBZb3UKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgogKi8KIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6KGU9ZXx8c2VsZikuVnVlPXQoKX0odGhpcyxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QuZnJlZXplKHt9KTtmdW5jdGlvbiB0KGUpe3JldHVybiBudWxsPT1lfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIG51bGwhPWV9ZnVuY3Rpb24gcihlKXtyZXR1cm4hMD09PWV9ZnVuY3Rpb24gaShlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV8fCJudW1iZXIiPT10eXBlb2YgZXx8InN5bWJvbCI9PXR5cGVvZiBlfHwiYm9vbGVhbiI9PXR5cGVvZiBlfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIG51bGwhPT1lJiYib2JqZWN0Ij09dHlwZW9mIGV9dmFyIGE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBzKGUpe3JldHVybiJbb2JqZWN0IE9iamVjdF0iPT09YS5jYWxsKGUpfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9cGFyc2VGbG9hdChTdHJpbmcoZSkpO3JldHVybiB0Pj0wJiZNYXRoLmZsb29yKHQpPT09dCYmaXNGaW5pdGUoZSl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gbihlKSYmImZ1bmN0aW9uIj09dHlwZW9mIGUudGhlbiYmImZ1bmN0aW9uIj09dHlwZW9mIGUuY2F0Y2h9ZnVuY3Rpb24gbChlKXtyZXR1cm4gbnVsbD09ZT8iIjpBcnJheS5pc0FycmF5KGUpfHxzKGUpJiZlLnRvU3RyaW5nPT09YT9KU09OLnN0cmluZ2lmeShlLG51bGwsMik6U3RyaW5nKGUpfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9cGFyc2VGbG9hdChlKTtyZXR1cm4gaXNOYU4odCk/ZTp0fWZ1bmN0aW9uIHAoZSx0KXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPWUuc3BsaXQoIiwiKSxpPTA7aTxyLmxlbmd0aDtpKyspbltyW2ldXT0hMDtyZXR1cm4gdD9mdW5jdGlvbihlKXtyZXR1cm4gbltlLnRvTG93ZXJDYXNlKCldfTpmdW5jdGlvbihlKXtyZXR1cm4gbltlXX19dmFyIGQ9cCgic2xvdCxjb21wb25lbnQiLCEwKSx2PXAoImtleSxyZWYsc2xvdCxzbG90LXNjb3BlLGlzIik7ZnVuY3Rpb24gaChlLHQpe2lmKGUubGVuZ3RoKXt2YXIgbj1lLmluZGV4T2YodCk7aWYobj4tMSlyZXR1cm4gZS5zcGxpY2UobiwxKX19dmFyIG09T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiB5KGUsdCl7cmV0dXJuIG0uY2FsbChlLHQpfWZ1bmN0aW9uIGcoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHRbbl18fCh0W25dPWUobikpfX12YXIgXz0vLShcdykvZyxiPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShfLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/dC50b1VwcGVyQ2FzZSgpOiIifSl9KSwkPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKX0pLHc9L1xCKFtBLVpdKS9nLEM9ZyhmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKHcsIi0kMSIpLnRvTG93ZXJDYXNlKCl9KTt2YXIgeD1GdW5jdGlvbi5wcm90b3R5cGUuYmluZD9mdW5jdGlvbihlLHQpe3JldHVybiBlLmJpbmQodCl9OmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihuKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoO3JldHVybiByP3I+MT9lLmFwcGx5KHQsYXJndW1lbnRzKTplLmNhbGwodCxuKTplLmNhbGwodCl9cmV0dXJuIG4uX2xlbmd0aD1lLmxlbmd0aCxufTtmdW5jdGlvbiBrKGUsdCl7dD10fHwwO2Zvcih2YXIgbj1lLmxlbmd0aC10LHI9bmV3IEFycmF5KG4pO24tLTspcltuXT1lW24rdF07cmV0dXJuIHJ9ZnVuY3Rpb24gQShlLHQpe2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBPKGUpe2Zvcih2YXIgdD17fSxuPTA7bjxlLmxlbmd0aDtuKyspZVtuXSYmQSh0LGVbbl0pO3JldHVybiB0fWZ1bmN0aW9uIFMoZSx0LG4pe312YXIgVD1mdW5jdGlvbihlLHQsbil7cmV0dXJuITF9LEU9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9O2Z1bmN0aW9uIE4oZSx0KXtpZihlPT09dClyZXR1cm4hMDt2YXIgbj1vKGUpLHI9byh0KTtpZighbnx8IXIpcmV0dXJuIW4mJiFyJiZTdHJpbmcoZSk9PT1TdHJpbmcodCk7dHJ5e3ZhciBpPUFycmF5LmlzQXJyYXkoZSksYT1BcnJheS5pc0FycmF5KHQpO2lmKGkmJmEpcmV0dXJuIGUubGVuZ3RoPT09dC5sZW5ndGgmJmUuZXZlcnkoZnVuY3Rpb24oZSxuKXtyZXR1cm4gTihlLHRbbl0pfSk7aWYoZSBpbnN0YW5jZW9mIERhdGUmJnQgaW5zdGFuY2VvZiBEYXRlKXJldHVybiBlLmdldFRpbWUoKT09PXQuZ2V0VGltZSgpO2lmKGl8fGEpcmV0dXJuITE7dmFyIHM9T2JqZWN0LmtleXMoZSksYz1PYmplY3Qua2V5cyh0KTtyZXR1cm4gcy5sZW5ndGg9PT1jLmxlbmd0aCYmcy5ldmVyeShmdW5jdGlvbihuKXtyZXR1cm4gTihlW25dLHRbbl0pfSl9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIGooZSx0KXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylpZihOKGVbbl0sdCkpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gRChlKXt2YXIgdD0hMTtyZXR1cm4gZnVuY3Rpb24oKXt0fHwodD0hMCxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fXZhciBMPSJkYXRhLXNlcnZlci1yZW5kZXJlZCIsTT1bImNvbXBvbmVudCIsImRpcmVjdGl2ZSIsImZpbHRlciJdLEk9WyJiZWZvcmVDcmVhdGUiLCJjcmVhdGVkIiwiYmVmb3JlTW91bnQiLCJtb3VudGVkIiwiYmVmb3JlVXBkYXRlIiwidXBkYXRlZCIsImJlZm9yZURlc3Ryb3kiLCJkZXN0cm95ZWQiLCJhY3RpdmF0ZWQiLCJkZWFjdGl2YXRlZCIsImVycm9yQ2FwdHVyZWQiLCJzZXJ2ZXJQcmVmZXRjaCJdLEY9e29wdGlvbk1lcmdlU3RyYXRlZ2llczpPYmplY3QuY3JlYXRlKG51bGwpLHNpbGVudDohMSxwcm9kdWN0aW9uVGlwOiExLGRldnRvb2xzOiExLHBlcmZvcm1hbmNlOiExLGVycm9ySGFuZGxlcjpudWxsLHdhcm5IYW5kbGVyOm51bGwsaWdub3JlZEVsZW1lbnRzOltdLGtleUNvZGVzOk9iamVjdC5jcmVhdGUobnVsbCksaXNSZXNlcnZlZFRhZzpULGlzUmVzZXJ2ZWRBdHRyOlQsaXNVbmtub3duRWxlbWVudDpULGdldFRhZ05hbWVzcGFjZTpTLHBhcnNlUGxhdGZvcm1UYWdOYW1lOkUsbXVzdFVzZVByb3A6VCxhc3luYzohMCxfbGlmZWN5Y2xlSG9va3M6SX0sUD0vYS16QS1aXHUwMEI3XHUwMEMwLVx1MDBENlx1MDBEOC1cdTAwRjZcdTAwRjgtXHUwMzdEXHUwMzdGLVx1MUZGRlx1MjAwQy1cdTIwMERcdTIwM0YtXHUyMDQwXHUyMDcwLVx1MjE4Rlx1MkMwMC1cdTJGRUZcdTMwMDEtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRkQvO2Z1bmN0aW9uIFIoZSx0LG4scil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEhcix3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX12YXIgSD1uZXcgUmVnRXhwKCJbXiIrUC5zb3VyY2UrIi4kX1xcZF0iKTt2YXIgQixVPSJfX3Byb3RvX18iaW57fSx6PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LFY9InVuZGVmaW5lZCIhPXR5cGVvZiBXWEVudmlyb25tZW50JiYhIVdYRW52aXJvbm1lbnQucGxhdGZvcm0sSz1WJiZXWEVudmlyb25tZW50LnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksSj16JiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLHE9SiYmL21zaWV8dHJpZGVudC8udGVzdChKKSxXPUomJkouaW5kZXhPZigibXNpZSA5LjAiKT4wLFo9SiYmSi5pbmRleE9mKCJlZGdlLyIpPjAsRz0oSiYmSi5pbmRleE9mKCJhbmRyb2lkIiksSiYmL2lwaG9uZXxpcGFkfGlwb2R8aW9zLy50ZXN0KEopfHwiaW9zIj09PUspLFg9KEomJi9jaHJvbWVcL1xkKy8udGVzdChKKSxKJiYvcGhhbnRvbWpzLy50ZXN0KEopLEomJkoubWF0Y2goL2ZpcmVmb3hcLyhcZCspLykpLFk9e30ud2F0Y2gsUT0hMTtpZih6KXRyeXt2YXIgZWU9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KGVlLCJwYXNzaXZlIix7Z2V0OmZ1bmN0aW9uKCl7UT0hMH19KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidGVzdC1wYXNzaXZlIixudWxsLGVlKX1jYXRjaChlKXt9dmFyIHRlPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PUImJihCPSF6JiYhViYmInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJihnbG9iYWwucHJvY2VzcyYmInNlcnZlciI9PT1nbG9iYWwucHJvY2Vzcy5lbnYuVlVFX0VOVikpLEJ9LG5lPXomJndpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO2Z1bmN0aW9uIHJlKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiYvbmF0aXZlIGNvZGUvLnRlc3QoZS50b1N0cmluZygpKX12YXIgaWUsb2U9InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJnJlKFN5bWJvbCkmJiJ1bmRlZmluZWQiIT10eXBlb2YgUmVmbGVjdCYmcmUoUmVmbGVjdC5vd25LZXlzKTtpZT0idW5kZWZpbmVkIiE9dHlwZW9mIFNldCYmcmUoU2V0KT9TZXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5zZXQ9T2JqZWN0LmNyZWF0ZShudWxsKX1yZXR1cm4gZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiEwPT09dGhpcy5zZXRbZV19LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt0aGlzLnNldFtlXT0hMH0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNldD1PYmplY3QuY3JlYXRlKG51bGwpfSxlfSgpO3ZhciBhZT1TLHNlPTAsY2U9ZnVuY3Rpb24oKXt0aGlzLmlkPXNlKyssdGhpcy5zdWJzPVtdfTtjZS5wcm90b3R5cGUuYWRkU3ViPWZ1bmN0aW9uKGUpe3RoaXMuc3Vicy5wdXNoKGUpfSxjZS5wcm90b3R5cGUucmVtb3ZlU3ViPWZ1bmN0aW9uKGUpe2godGhpcy5zdWJzLGUpfSxjZS5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Y2UudGFyZ2V0JiZjZS50YXJnZXQuYWRkRGVwKHRoaXMpfSxjZS5wcm90b3R5cGUubm90aWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuc3Vicy5zbGljZSgpLHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspZVt0XS51cGRhdGUoKX0sY2UudGFyZ2V0PW51bGw7dmFyIHVlPVtdO2Z1bmN0aW9uIGxlKGUpe3VlLnB1c2goZSksY2UudGFyZ2V0PWV9ZnVuY3Rpb24gZmUoKXt1ZS5wb3AoKSxjZS50YXJnZXQ9dWVbdWUubGVuZ3RoLTFdfXZhciBwZT1mdW5jdGlvbihlLHQsbixyLGksbyxhLHMpe3RoaXMudGFnPWUsdGhpcy5kYXRhPXQsdGhpcy5jaGlsZHJlbj1uLHRoaXMudGV4dD1yLHRoaXMuZWxtPWksdGhpcy5ucz12b2lkIDAsdGhpcy5jb250ZXh0PW8sdGhpcy5mbkNvbnRleHQ9dm9pZCAwLHRoaXMuZm5PcHRpb25zPXZvaWQgMCx0aGlzLmZuU2NvcGVJZD12b2lkIDAsdGhpcy5rZXk9dCYmdC5rZXksdGhpcy5jb21wb25lbnRPcHRpb25zPWEsdGhpcy5jb21wb25lbnRJbnN0YW5jZT12b2lkIDAsdGhpcy5wYXJlbnQ9dm9pZCAwLHRoaXMucmF3PSExLHRoaXMuaXNTdGF0aWM9ITEsdGhpcy5pc1Jvb3RJbnNlcnQ9ITAsdGhpcy5pc0NvbW1lbnQ9ITEsdGhpcy5pc0Nsb25lZD0hMSx0aGlzLmlzT25jZT0hMSx0aGlzLmFzeW5jRmFjdG9yeT1zLHRoaXMuYXN5bmNNZXRhPXZvaWQgMCx0aGlzLmlzQXN5bmNQbGFjZWhvbGRlcj0hMX0sZGU9e2NoaWxkOntjb25maWd1cmFibGU6ITB9fTtkZS5jaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocGUucHJvdG90eXBlLGRlKTt2YXIgdmU9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9IiIpO3ZhciB0PW5ldyBwZTtyZXR1cm4gdC50ZXh0PWUsdC5pc0NvbW1lbnQ9ITAsdH07ZnVuY3Rpb24gaGUoZSl7cmV0dXJuIG5ldyBwZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCxTdHJpbmcoZSkpfWZ1bmN0aW9uIG1lKGUpe3ZhciB0PW5ldyBwZShlLnRhZyxlLmRhdGEsZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5zbGljZSgpLGUudGV4dCxlLmVsbSxlLmNvbnRleHQsZS5jb21wb25lbnRPcHRpb25zLGUuYXN5bmNGYWN0b3J5KTtyZXR1cm4gdC5ucz1lLm5zLHQuaXNTdGF0aWM9ZS5pc1N0YXRpYyx0LmtleT1lLmtleSx0LmlzQ29tbWVudD1lLmlzQ29tbWVudCx0LmZuQ29udGV4dD1lLmZuQ29udGV4dCx0LmZuT3B0aW9ucz1lLmZuT3B0aW9ucyx0LmZuU2NvcGVJZD1lLmZuU2NvcGVJZCx0LmFzeW5jTWV0YT1lLmFzeW5jTWV0YSx0LmlzQ2xvbmVkPSEwLHR9dmFyIHllPUFycmF5LnByb3RvdHlwZSxnZT1PYmplY3QuY3JlYXRlKHllKTtbInB1c2giLCJwb3AiLCJzaGlmdCIsInVuc2hpZnQiLCJzcGxpY2UiLCJzb3J0IiwicmV2ZXJzZSJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9eWVbZV07UihnZSxlLGZ1bmN0aW9uKCl7Zm9yKHZhciBuPVtdLHI9YXJndW1lbnRzLmxlbmd0aDtyLS07KW5bcl09YXJndW1lbnRzW3JdO3ZhciBpLG89dC5hcHBseSh0aGlzLG4pLGE9dGhpcy5fX29iX187c3dpdGNoKGUpe2Nhc2UicHVzaCI6Y2FzZSJ1bnNoaWZ0IjppPW47YnJlYWs7Y2FzZSJzcGxpY2UiOmk9bi5zbGljZSgyKX1yZXR1cm4gaSYmYS5vYnNlcnZlQXJyYXkoaSksYS5kZXAubm90aWZ5KCksb30pfSk7dmFyIF9lPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdlKSxiZT0hMDtmdW5jdGlvbiAkZShlKXtiZT1lfXZhciB3ZT1mdW5jdGlvbihlKXt2YXIgdDt0aGlzLnZhbHVlPWUsdGhpcy5kZXA9bmV3IGNlLHRoaXMudm1Db3VudD0wLFIoZSwiX19vYl9fIix0aGlzKSxBcnJheS5pc0FycmF5KGUpPyhVPyh0PWdlLGUuX19wcm90b19fPXQpOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspe3ZhciBvPW5bcl07UihlLG8sdFtvXSl9fShlLGdlLF9lKSx0aGlzLm9ic2VydmVBcnJheShlKSk6dGhpcy53YWxrKGUpfTtmdW5jdGlvbiBDZShlLHQpe3ZhciBuO2lmKG8oZSkmJiEoZSBpbnN0YW5jZW9mIHBlKSlyZXR1cm4geShlLCJfX29iX18iKSYmZS5fX29iX18gaW5zdGFuY2VvZiB3ZT9uPWUuX19vYl9fOmJlJiYhdGUoKSYmKEFycmF5LmlzQXJyYXkoZSl8fHMoZSkpJiZPYmplY3QuaXNFeHRlbnNpYmxlKGUpJiYhZS5faXNWdWUmJihuPW5ldyB3ZShlKSksdCYmbiYmbi52bUNvdW50Kyssbn1mdW5jdGlvbiB4ZShlLHQsbixyLGkpe3ZhciBvPW5ldyBjZSxhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtpZighYXx8ITEhPT1hLmNvbmZpZ3VyYWJsZSl7dmFyIHM9YSYmYS5nZXQsYz1hJiZhLnNldDtzJiYhY3x8MiE9PWFyZ3VtZW50cy5sZW5ndGh8fChuPWVbdF0pO3ZhciB1PSFpJiZDZShuKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1zP3MuY2FsbChlKTpuO3JldHVybiBjZS50YXJnZXQmJihvLmRlcGVuZCgpLHUmJih1LmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KHQpJiZmdW5jdGlvbiBlKHQpe2Zvcih2YXIgbj12b2lkIDAscj0wLGk9dC5sZW5ndGg7cjxpO3IrKykobj10W3JdKSYmbi5fX29iX18mJm4uX19vYl9fLmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KG4pJiZlKG4pfSh0KSkpLHR9LHNldDpmdW5jdGlvbih0KXt2YXIgcj1zP3MuY2FsbChlKTpuO3Q9PT1yfHx0IT10JiZyIT1yfHxzJiYhY3x8KGM/Yy5jYWxsKGUsdCk6bj10LHU9IWkmJkNlKHQpLG8ubm90aWZ5KCkpfX0pfX1mdW5jdGlvbiBrZShlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSYmYyh0KSlyZXR1cm4gZS5sZW5ndGg9TWF0aC5tYXgoZS5sZW5ndGgsdCksZS5zcGxpY2UodCwxLG4pLG47aWYodCBpbiBlJiYhKHQgaW4gT2JqZWN0LnByb3RvdHlwZSkpcmV0dXJuIGVbdF09bixuO3ZhciByPWUuX19vYl9fO3JldHVybiBlLl9pc1Z1ZXx8ciYmci52bUNvdW50P246cj8oeGUoci52YWx1ZSx0LG4pLHIuZGVwLm5vdGlmeSgpLG4pOihlW3RdPW4sbil9ZnVuY3Rpb24gQWUoZSx0KXtpZihBcnJheS5pc0FycmF5KGUpJiZjKHQpKWUuc3BsaWNlKHQsMSk7ZWxzZXt2YXIgbj1lLl9fb2JfXztlLl9pc1Z1ZXx8biYmbi52bUNvdW50fHx5KGUsdCkmJihkZWxldGUgZVt0XSxuJiZuLmRlcC5ub3RpZnkoKSl9fXdlLnByb3RvdHlwZS53YWxrPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxuPTA7bjx0Lmxlbmd0aDtuKyspeGUoZSx0W25dKX0sd2UucHJvdG90eXBlLm9ic2VydmVBcnJheT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspQ2UoZVt0XSl9O3ZhciBPZT1GLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztmdW5jdGlvbiBTZShlLHQpe2lmKCF0KXJldHVybiBlO2Zvcih2YXIgbixyLGksbz1vZT9SZWZsZWN0Lm93bktleXModCk6T2JqZWN0LmtleXModCksYT0wO2E8by5sZW5ndGg7YSsrKSJfX29iX18iIT09KG49b1thXSkmJihyPWVbbl0saT10W25dLHkoZSxuKT9yIT09aSYmcyhyKSYmcyhpKSYmU2UocixpKTprZShlLG4saSkpO3JldHVybiBlfWZ1bmN0aW9uIFRlKGUsdCxuKXtyZXR1cm4gbj9mdW5jdGlvbigpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbChuLG4pOnQsaT0iZnVuY3Rpb24iPT10eXBlb2YgZT9lLmNhbGwobixuKTplO3JldHVybiByP1NlKHIsaSk6aX06dD9lP2Z1bmN0aW9uKCl7cmV0dXJuIFNlKCJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbCh0aGlzLHRoaXMpOnQsImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5jYWxsKHRoaXMsdGhpcyk6ZSl9OnQ6ZX1mdW5jdGlvbiBFZShlLHQpe3ZhciBuPXQ/ZT9lLmNvbmNhdCh0KTpBcnJheS5pc0FycmF5KHQpP3Q6W3RdOmU7cmV0dXJuIG4/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MDtuPGUubGVuZ3RoO24rKyktMT09PXQuaW5kZXhPZihlW25dKSYmdC5wdXNoKGVbbl0pO3JldHVybiB0fShuKTpufWZ1bmN0aW9uIE5lKGUsdCxuLHIpe3ZhciBpPU9iamVjdC5jcmVhdGUoZXx8bnVsbCk7cmV0dXJuIHQ/QShpLHQpOml9T2UuZGF0YT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG4/VGUoZSx0LG4pOnQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6VGUoZSx0KX0sSS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2VdPUVlfSksTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2UrInMiXT1OZX0pLE9lLndhdGNoPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKGU9PT1ZJiYoZT12b2lkIDApLHQ9PT1ZJiYodD12b2lkIDApLCF0KXJldHVybiBPYmplY3QuY3JlYXRlKGV8fG51bGwpO2lmKCFlKXJldHVybiB0O3ZhciBpPXt9O2Zvcih2YXIgbyBpbiBBKGksZSksdCl7dmFyIGE9aVtvXSxzPXRbb107YSYmIUFycmF5LmlzQXJyYXkoYSkmJihhPVthXSksaVtvXT1hP2EuY29uY2F0KHMpOkFycmF5LmlzQXJyYXkocyk/czpbc119cmV0dXJuIGl9LE9lLnByb3BzPU9lLm1ldGhvZHM9T2UuaW5qZWN0PU9lLmNvbXB1dGVkPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKCFlKXJldHVybiB0O3ZhciBpPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIEEoaSxlKSx0JiZBKGksdCksaX0sT2UucHJvdmlkZT1UZTt2YXIgamU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9lOnR9O2Z1bmN0aW9uIERlKGUsdCxuKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHQ9dC5vcHRpb25zKSxmdW5jdGlvbihlLHQpe3ZhciBuPWUucHJvcHM7aWYobil7dmFyIHIsaSxvPXt9O2lmKEFycmF5LmlzQXJyYXkobikpZm9yKHI9bi5sZW5ndGg7ci0tOykic3RyaW5nIj09dHlwZW9mKGk9bltyXSkmJihvW2IoaSldPXt0eXBlOm51bGx9KTtlbHNlIGlmKHMobikpZm9yKHZhciBhIGluIG4paT1uW2FdLG9bYihhKV09cyhpKT9pOnt0eXBlOml9O2UucHJvcHM9b319KHQpLGZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5pbmplY3Q7aWYobil7dmFyIHI9ZS5pbmplY3Q9e307aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKylyW25baV1dPXtmcm9tOm5baV19O2Vsc2UgaWYocyhuKSlmb3IodmFyIG8gaW4gbil7dmFyIGE9bltvXTtyW29dPXMoYSk/QSh7ZnJvbTpvfSxhKTp7ZnJvbTphfX19fSh0KSxmdW5jdGlvbihlKXt2YXIgdD1lLmRpcmVjdGl2ZXM7aWYodClmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTsiZnVuY3Rpb24iPT10eXBlb2YgciYmKHRbbl09e2JpbmQ6cix1cGRhdGU6cn0pfX0odCksIXQuX2Jhc2UmJih0LmV4dGVuZHMmJihlPURlKGUsdC5leHRlbmRzLG4pKSx0Lm1peGlucykpZm9yKHZhciByPTAsaT10Lm1peGlucy5sZW5ndGg7cjxpO3IrKyllPURlKGUsdC5taXhpbnNbcl0sbik7dmFyIG8sYT17fTtmb3IobyBpbiBlKWMobyk7Zm9yKG8gaW4gdCl5KGUsbyl8fGMobyk7ZnVuY3Rpb24gYyhyKXt2YXIgaT1PZVtyXXx8amU7YVtyXT1pKGVbcl0sdFtyXSxuLHIpfXJldHVybiBhfWZ1bmN0aW9uIExlKGUsdCxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2Ygbil7dmFyIGk9ZVt0XTtpZih5KGksbikpcmV0dXJuIGlbbl07dmFyIG89YihuKTtpZih5KGksbykpcmV0dXJuIGlbb107dmFyIGE9JChvKTtyZXR1cm4geShpLGEpP2lbYV06aVtuXXx8aVtvXXx8aVthXX19ZnVuY3Rpb24gTWUoZSx0LG4scil7dmFyIGk9dFtlXSxvPSF5KG4sZSksYT1uW2VdLHM9UGUoQm9vbGVhbixpLnR5cGUpO2lmKHM+LTEpaWYobyYmIXkoaSwiZGVmYXVsdCIpKWE9ITE7ZWxzZSBpZigiIj09PWF8fGE9PT1DKGUpKXt2YXIgYz1QZShTdHJpbmcsaS50eXBlKTsoYzwwfHxzPGMpJiYoYT0hMCl9aWYodm9pZCAwPT09YSl7YT1mdW5jdGlvbihlLHQsbil7aWYoIXkodCwiZGVmYXVsdCIpKXJldHVybjt2YXIgcj10LmRlZmF1bHQ7aWYoZSYmZS4kb3B0aW9ucy5wcm9wc0RhdGEmJnZvaWQgMD09PWUuJG9wdGlvbnMucHJvcHNEYXRhW25dJiZ2b2lkIDAhPT1lLl9wcm9wc1tuXSlyZXR1cm4gZS5fcHJvcHNbbl07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHImJiJGdW5jdGlvbiIhPT1JZSh0LnR5cGUpP3IuY2FsbChlKTpyfShyLGksZSk7dmFyIHU9YmU7JGUoITApLENlKGEpLCRlKHUpfXJldHVybiBhfWZ1bmN0aW9uIEllKGUpe3ZhciB0PWUmJmUudG9TdHJpbmcoKS5tYXRjaCgvXlxzKmZ1bmN0aW9uIChcdyspLyk7cmV0dXJuIHQ/dFsxXToiIn1mdW5jdGlvbiBGZShlLHQpe3JldHVybiBJZShlKT09PUllKHQpfWZ1bmN0aW9uIFBlKGUsdCl7aWYoIUFycmF5LmlzQXJyYXkodCkpcmV0dXJuIEZlKHQsZSk/MDotMTtmb3IodmFyIG49MCxyPXQubGVuZ3RoO248cjtuKyspaWYoRmUodFtuXSxlKSlyZXR1cm4gbjtyZXR1cm4tMX1mdW5jdGlvbiBSZShlLHQsbil7bGUoKTt0cnl7aWYodClmb3IodmFyIHI9dDtyPXIuJHBhcmVudDspe3ZhciBpPXIuJG9wdGlvbnMuZXJyb3JDYXB0dXJlZDtpZihpKWZvcih2YXIgbz0wO288aS5sZW5ndGg7bysrKXRyeXtpZighMT09PWlbb10uY2FsbChyLGUsdCxuKSlyZXR1cm59Y2F0Y2goZSl7QmUoZSxyLCJlcnJvckNhcHR1cmVkIGhvb2siKX19QmUoZSx0LG4pfWZpbmFsbHl7ZmUoKX19ZnVuY3Rpb24gSGUoZSx0LG4scixpKXt2YXIgbzt0cnl7KG89bj9lLmFwcGx5KHQsbik6ZS5jYWxsKHQpKSYmIW8uX2lzVnVlJiZ1KG8pJiYhby5faGFuZGxlZCYmKG8uY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIFJlKGUscixpKyIgKFByb21pc2UvYXN5bmMpIil9KSxvLl9oYW5kbGVkPSEwKX1jYXRjaChlKXtSZShlLHIsaSl9cmV0dXJuIG99ZnVuY3Rpb24gQmUoZSx0LG4pe2lmKEYuZXJyb3JIYW5kbGVyKXRyeXtyZXR1cm4gRi5lcnJvckhhbmRsZXIuY2FsbChudWxsLGUsdCxuKX1jYXRjaCh0KXt0IT09ZSYmVWUodCxudWxsLCJjb25maWcuZXJyb3JIYW5kbGVyIil9VWUoZSx0LG4pfWZ1bmN0aW9uIFVlKGUsdCxuKXtpZigheiYmIVZ8fCJ1bmRlZmluZWQiPT10eXBlb2YgY29uc29sZSl0aHJvdyBlO2NvbnNvbGUuZXJyb3IoZSl9dmFyIHplLFZlPSExLEtlPVtdLEplPSExO2Z1bmN0aW9uIHFlKCl7SmU9ITE7dmFyIGU9S2Uuc2xpY2UoMCk7S2UubGVuZ3RoPTA7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspZVt0XSgpfWlmKCJ1bmRlZmluZWQiIT10eXBlb2YgUHJvbWlzZSYmcmUoUHJvbWlzZSkpe3ZhciBXZT1Qcm9taXNlLnJlc29sdmUoKTt6ZT1mdW5jdGlvbigpe1dlLnRoZW4ocWUpLEcmJnNldFRpbWVvdXQoUyl9LFZlPSEwfWVsc2UgaWYocXx8InVuZGVmaW5lZCI9PXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyfHwhcmUoTXV0YXRpb25PYnNlcnZlcikmJiJbb2JqZWN0IE11dGF0aW9uT2JzZXJ2ZXJDb25zdHJ1Y3Rvcl0iIT09TXV0YXRpb25PYnNlcnZlci50b1N0cmluZygpKXplPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2V0SW1tZWRpYXRlJiZyZShzZXRJbW1lZGlhdGUpP2Z1bmN0aW9uKCl7c2V0SW1tZWRpYXRlKHFlKX06ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHFlLDApfTtlbHNle3ZhciBaZT0xLEdlPW5ldyBNdXRhdGlvbk9ic2VydmVyKHFlKSxYZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShTdHJpbmcoWmUpKTtHZS5vYnNlcnZlKFhlLHtjaGFyYWN0ZXJEYXRhOiEwfSksemU9ZnVuY3Rpb24oKXtaZT0oWmUrMSklMixYZS5kYXRhPVN0cmluZyhaZSl9LFZlPSEwfWZ1bmN0aW9uIFllKGUsdCl7dmFyIG47aWYoS2UucHVzaChmdW5jdGlvbigpe2lmKGUpdHJ5e2UuY2FsbCh0KX1jYXRjaChlKXtSZShlLHQsIm5leHRUaWNrIil9ZWxzZSBuJiZuKHQpfSksSmV8fChKZT0hMCx6ZSgpKSwhZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBQcm9taXNlKXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtuPWV9KX12YXIgUWU9bmV3IGllO2Z1bmN0aW9uIGV0KGUpeyFmdW5jdGlvbiBlKHQsbil7dmFyIHIsaTt2YXIgYT1BcnJheS5pc0FycmF5KHQpO2lmKCFhJiYhbyh0KXx8T2JqZWN0LmlzRnJvemVuKHQpfHx0IGluc3RhbmNlb2YgcGUpcmV0dXJuO2lmKHQuX19vYl9fKXt2YXIgcz10Ll9fb2JfXy5kZXAuaWQ7aWYobi5oYXMocykpcmV0dXJuO24uYWRkKHMpfWlmKGEpZm9yKHI9dC5sZW5ndGg7ci0tOyllKHRbcl0sbik7ZWxzZSBmb3IoaT1PYmplY3Qua2V5cyh0KSxyPWkubGVuZ3RoO3ItLTspZSh0W2lbcl1dLG4pfShlLFFlKSxRZS5jbGVhcigpfXZhciB0dD1nKGZ1bmN0aW9uKGUpe3ZhciB0PSImIj09PWUuY2hhckF0KDApLG49In4iPT09KGU9dD9lLnNsaWNlKDEpOmUpLmNoYXJBdCgwKSxyPSIhIj09PShlPW4/ZS5zbGljZSgxKTplKS5jaGFyQXQoMCk7cmV0dXJue25hbWU6ZT1yP2Uuc2xpY2UoMSk6ZSxvbmNlOm4sY2FwdHVyZTpyLHBhc3NpdmU6dH19KTtmdW5jdGlvbiBudChlLHQpe2Z1bmN0aW9uIG4oKXt2YXIgZT1hcmd1bWVudHMscj1uLmZucztpZighQXJyYXkuaXNBcnJheShyKSlyZXR1cm4gSGUocixudWxsLGFyZ3VtZW50cyx0LCJ2LW9uIGhhbmRsZXIiKTtmb3IodmFyIGk9ci5zbGljZSgpLG89MDtvPGkubGVuZ3RoO28rKylIZShpW29dLG51bGwsZSx0LCJ2LW9uIGhhbmRsZXIiKX1yZXR1cm4gbi5mbnM9ZSxufWZ1bmN0aW9uIHJ0KGUsbixpLG8sYSxzKXt2YXIgYyx1LGwsZjtmb3IoYyBpbiBlKXU9ZVtjXSxsPW5bY10sZj10dChjKSx0KHUpfHwodChsKT8odCh1LmZucykmJih1PWVbY109bnQodSxzKSkscihmLm9uY2UpJiYodT1lW2NdPWEoZi5uYW1lLHUsZi5jYXB0dXJlKSksaShmLm5hbWUsdSxmLmNhcHR1cmUsZi5wYXNzaXZlLGYucGFyYW1zKSk6dSE9PWwmJihsLmZucz11LGVbY109bCkpO2ZvcihjIGluIG4pdChlW2NdKSYmbygoZj10dChjKSkubmFtZSxuW2NdLGYuY2FwdHVyZSl9ZnVuY3Rpb24gaXQoZSxpLG8pe3ZhciBhO2UgaW5zdGFuY2VvZiBwZSYmKGU9ZS5kYXRhLmhvb2t8fChlLmRhdGEuaG9vaz17fSkpO3ZhciBzPWVbaV07ZnVuY3Rpb24gYygpe28uYXBwbHkodGhpcyxhcmd1bWVudHMpLGgoYS5mbnMsYyl9dChzKT9hPW50KFtjXSk6bihzLmZucykmJnIocy5tZXJnZWQpPyhhPXMpLmZucy5wdXNoKGMpOmE9bnQoW3MsY10pLGEubWVyZ2VkPSEwLGVbaV09YX1mdW5jdGlvbiBvdChlLHQscixpLG8pe2lmKG4odCkpe2lmKHkodCxyKSlyZXR1cm4gZVtyXT10W3JdLG98fGRlbGV0ZSB0W3JdLCEwO2lmKHkodCxpKSlyZXR1cm4gZVtyXT10W2ldLG98fGRlbGV0ZSB0W2ldLCEwfXJldHVybiExfWZ1bmN0aW9uIGF0KGUpe3JldHVybiBpKGUpP1toZShlKV06QXJyYXkuaXNBcnJheShlKT9mdW5jdGlvbiBlKG8sYSl7dmFyIHM9W107dmFyIGMsdSxsLGY7Zm9yKGM9MDtjPG8ubGVuZ3RoO2MrKyl0KHU9b1tjXSl8fCJib29sZWFuIj09dHlwZW9mIHV8fChsPXMubGVuZ3RoLTEsZj1zW2xdLEFycmF5LmlzQXJyYXkodSk/dS5sZW5ndGg+MCYmKHN0KCh1PWUodSwoYXx8IiIpKyJfIitjKSlbMF0pJiZzdChmKSYmKHNbbF09aGUoZi50ZXh0K3VbMF0udGV4dCksdS5zaGlmdCgpKSxzLnB1c2guYXBwbHkocyx1KSk6aSh1KT9zdChmKT9zW2xdPWhlKGYudGV4dCt1KToiIiE9PXUmJnMucHVzaChoZSh1KSk6c3QodSkmJnN0KGYpP3NbbF09aGUoZi50ZXh0K3UudGV4dCk6KHIoby5faXNWTGlzdCkmJm4odS50YWcpJiZ0KHUua2V5KSYmbihhKSYmKHUua2V5PSJfX3ZsaXN0IithKyJfIitjKyJfXyIpLHMucHVzaCh1KSkpO3JldHVybiBzfShlKTp2b2lkIDB9ZnVuY3Rpb24gc3QoZSl7cmV0dXJuIG4oZSkmJm4oZS50ZXh0KSYmITE9PT1lLmlzQ29tbWVudH1mdW5jdGlvbiBjdChlLHQpe2lmKGUpe2Zvcih2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9b2U/UmVmbGVjdC5vd25LZXlzKGUpOk9iamVjdC5rZXlzKGUpLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG89cltpXTtpZigiX19vYl9fIiE9PW8pe2Zvcih2YXIgYT1lW29dLmZyb20scz10O3M7KXtpZihzLl9wcm92aWRlZCYmeShzLl9wcm92aWRlZCxhKSl7bltvXT1zLl9wcm92aWRlZFthXTticmVha31zPXMuJHBhcmVudH1pZighcyYmImRlZmF1bHQiaW4gZVtvXSl7dmFyIGM9ZVtvXS5kZWZhdWx0O25bb109ImZ1bmN0aW9uIj09dHlwZW9mIGM/Yy5jYWxsKHQpOmN9fX1yZXR1cm4gbn19ZnVuY3Rpb24gdXQoZSx0KXtpZighZXx8IWUubGVuZ3RoKXJldHVybnt9O2Zvcih2YXIgbj17fSxyPTAsaT1lLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1lW3JdLGE9by5kYXRhO2lmKGEmJmEuYXR0cnMmJmEuYXR0cnMuc2xvdCYmZGVsZXRlIGEuYXR0cnMuc2xvdCxvLmNvbnRleHQhPT10JiZvLmZuQ29udGV4dCE9PXR8fCFhfHxudWxsPT1hLnNsb3QpKG4uZGVmYXVsdHx8KG4uZGVmYXVsdD1bXSkpLnB1c2gobyk7ZWxzZXt2YXIgcz1hLnNsb3QsYz1uW3NdfHwobltzXT1bXSk7InRlbXBsYXRlIj09PW8udGFnP2MucHVzaC5hcHBseShjLG8uY2hpbGRyZW58fFtdKTpjLnB1c2gobyl9fWZvcih2YXIgdSBpbiBuKW5bdV0uZXZlcnkobHQpJiZkZWxldGUgblt1XTtyZXR1cm4gbn1mdW5jdGlvbiBsdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJiFlLmFzeW5jRmFjdG9yeXx8IiAiPT09ZS50ZXh0fWZ1bmN0aW9uIGZ0KHQsbixyKXt2YXIgaSxvPU9iamVjdC5rZXlzKG4pLmxlbmd0aD4wLGE9dD8hIXQuJHN0YWJsZTohbyxzPXQmJnQuJGtleTtpZih0KXtpZih0Ll9ub3JtYWxpemVkKXJldHVybiB0Ll9ub3JtYWxpemVkO2lmKGEmJnImJnIhPT1lJiZzPT09ci4ka2V5JiYhbyYmIXIuJGhhc05vcm1hbClyZXR1cm4gcjtmb3IodmFyIGMgaW4gaT17fSx0KXRbY10mJiIkIiE9PWNbMF0mJihpW2NdPXB0KG4sYyx0W2NdKSl9ZWxzZSBpPXt9O2Zvcih2YXIgdSBpbiBuKXUgaW4gaXx8KGlbdV09ZHQobix1KSk7cmV0dXJuIHQmJk9iamVjdC5pc0V4dGVuc2libGUodCkmJih0Ll9ub3JtYWxpemVkPWkpLFIoaSwiJHN0YWJsZSIsYSksUihpLCIka2V5IixzKSxSKGksIiRoYXNOb3JtYWwiLG8pLGl9ZnVuY3Rpb24gcHQoZSx0LG4pe3ZhciByPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD9uLmFwcGx5KG51bGwsYXJndW1lbnRzKTpuKHt9KTtyZXR1cm4oZT1lJiYib2JqZWN0Ij09dHlwZW9mIGUmJiFBcnJheS5pc0FycmF5KGUpP1tlXTphdChlKSkmJigwPT09ZS5sZW5ndGh8fDE9PT1lLmxlbmd0aCYmZVswXS5pc0NvbW1lbnQpP3ZvaWQgMDplfTtyZXR1cm4gbi5wcm94eSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Z2V0OnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyfWZ1bmN0aW9uIGR0KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGVbdF19fWZ1bmN0aW9uIHZ0KGUsdCl7dmFyIHIsaSxhLHMsYztpZihBcnJheS5pc0FycmF5KGUpfHwic3RyaW5nIj09dHlwZW9mIGUpZm9yKHI9bmV3IEFycmF5KGUubGVuZ3RoKSxpPTAsYT1lLmxlbmd0aDtpPGE7aSsrKXJbaV09dChlW2ldLGkpO2Vsc2UgaWYoIm51bWJlciI9PXR5cGVvZiBlKWZvcihyPW5ldyBBcnJheShlKSxpPTA7aTxlO2krKylyW2ldPXQoaSsxLGkpO2Vsc2UgaWYobyhlKSlpZihvZSYmZVtTeW1ib2wuaXRlcmF0b3JdKXtyPVtdO2Zvcih2YXIgdT1lW1N5bWJvbC5pdGVyYXRvcl0oKSxsPXUubmV4dCgpOyFsLmRvbmU7KXIucHVzaCh0KGwudmFsdWUsci5sZW5ndGgpKSxsPXUubmV4dCgpfWVsc2UgZm9yKHM9T2JqZWN0LmtleXMoZSkscj1uZXcgQXJyYXkocy5sZW5ndGgpLGk9MCxhPXMubGVuZ3RoO2k8YTtpKyspYz1zW2ldLHJbaV09dChlW2NdLGMsaSk7cmV0dXJuIG4ocil8fChyPVtdKSxyLl9pc1ZMaXN0PSEwLHJ9ZnVuY3Rpb24gaHQoZSx0LG4scil7dmFyIGksbz10aGlzLiRzY29wZWRTbG90c1tlXTtvPyhuPW58fHt9LHImJihuPUEoQSh7fSxyKSxuKSksaT1vKG4pfHx0KTppPXRoaXMuJHNsb3RzW2VdfHx0O3ZhciBhPW4mJm4uc2xvdDtyZXR1cm4gYT90aGlzLiRjcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIse3Nsb3Q6YX0saSk6aX1mdW5jdGlvbiBtdChlKXtyZXR1cm4gTGUodGhpcy4kb3B0aW9ucywiZmlsdGVycyIsZSl8fEV9ZnVuY3Rpb24geXQoZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT8tMT09PWUuaW5kZXhPZih0KTplIT09dH1mdW5jdGlvbiBndChlLHQsbixyLGkpe3ZhciBvPUYua2V5Q29kZXNbdF18fG47cmV0dXJuIGkmJnImJiFGLmtleUNvZGVzW3RdP3l0KGkscik6bz95dChvLGUpOnI/QyhyKSE9PXQ6dm9pZCAwfWZ1bmN0aW9uIF90KGUsdCxuLHIsaSl7aWYobilpZihvKG4pKXt2YXIgYTtBcnJheS5pc0FycmF5KG4pJiYobj1PKG4pKTt2YXIgcz1mdW5jdGlvbihvKXtpZigiY2xhc3MiPT09b3x8InN0eWxlIj09PW98fHYobykpYT1lO2Vsc2V7dmFyIHM9ZS5hdHRycyYmZS5hdHRycy50eXBlO2E9cnx8Ri5tdXN0VXNlUHJvcCh0LHMsbyk/ZS5kb21Qcm9wc3x8KGUuZG9tUHJvcHM9e30pOmUuYXR0cnN8fChlLmF0dHJzPXt9KX12YXIgYz1iKG8pLHU9QyhvKTtjIGluIGF8fHUgaW4gYXx8KGFbb109bltvXSxpJiYoKGUub258fChlLm9uPXt9KSlbInVwZGF0ZToiK29dPWZ1bmN0aW9uKGUpe25bb109ZX0pKX07Zm9yKHZhciBjIGluIG4pcyhjKX1lbHNlO3JldHVybiBlfWZ1bmN0aW9uIGJ0KGUsdCl7dmFyIG49dGhpcy5fc3RhdGljVHJlZXN8fCh0aGlzLl9zdGF0aWNUcmVlcz1bXSkscj1uW2VdO3JldHVybiByJiYhdD9yOih3dChyPW5bZV09dGhpcy4kb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnNbZV0uY2FsbCh0aGlzLl9yZW5kZXJQcm94eSxudWxsLHRoaXMpLCJfX3N0YXRpY19fIitlLCExKSxyKX1mdW5jdGlvbiAkdChlLHQsbil7cmV0dXJuIHd0KGUsIl9fb25jZV9fIit0KyhuPyJfIituOiIiKSwhMCksZX1mdW5jdGlvbiB3dChlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyllW3JdJiYic3RyaW5nIiE9dHlwZW9mIGVbcl0mJkN0KGVbcl0sdCsiXyIrcixuKTtlbHNlIEN0KGUsdCxuKX1mdW5jdGlvbiBDdChlLHQsbil7ZS5pc1N0YXRpYz0hMCxlLmtleT10LGUuaXNPbmNlPW59ZnVuY3Rpb24geHQoZSx0KXtpZih0KWlmKHModCkpe3ZhciBuPWUub249ZS5vbj9BKHt9LGUub24pOnt9O2Zvcih2YXIgciBpbiB0KXt2YXIgaT1uW3JdLG89dFtyXTtuW3JdPWk/W10uY29uY2F0KGksbyk6b319ZWxzZTtyZXR1cm4gZX1mdW5jdGlvbiBrdChlLHQsbixyKXt0PXR8fHskc3RhYmxlOiFufTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG89ZVtpXTtBcnJheS5pc0FycmF5KG8pP2t0KG8sdCxuKTpvJiYoby5wcm94eSYmKG8uZm4ucHJveHk9ITApLHRbby5rZXldPW8uZm4pfXJldHVybiByJiYodC4ka2V5PXIpLHR9ZnVuY3Rpb24gQXQoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRbbl07InN0cmluZyI9PXR5cGVvZiByJiZyJiYoZVt0W25dXT10W24rMV0pfXJldHVybiBlfWZ1bmN0aW9uIE90KGUsdCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP3QrZTplfWZ1bmN0aW9uIFN0KGUpe2UuX289JHQsZS5fbj1mLGUuX3M9bCxlLl9sPXZ0LGUuX3Q9aHQsZS5fcT1OLGUuX2k9aixlLl9tPWJ0LGUuX2Y9bXQsZS5faz1ndCxlLl9iPV90LGUuX3Y9aGUsZS5fZT12ZSxlLl91PWt0LGUuX2c9eHQsZS5fZD1BdCxlLl9wPU90fWZ1bmN0aW9uIFR0KHQsbixpLG8sYSl7dmFyIHMsYz10aGlzLHU9YS5vcHRpb25zO3kobywiX3VpZCIpPyhzPU9iamVjdC5jcmVhdGUobykpLl9vcmlnaW5hbD1vOihzPW8sbz1vLl9vcmlnaW5hbCk7dmFyIGw9cih1Ll9jb21waWxlZCksZj0hbDt0aGlzLmRhdGE9dCx0aGlzLnByb3BzPW4sdGhpcy5jaGlsZHJlbj1pLHRoaXMucGFyZW50PW8sdGhpcy5saXN0ZW5lcnM9dC5vbnx8ZSx0aGlzLmluamVjdGlvbnM9Y3QodS5pbmplY3QsbyksdGhpcy5zbG90cz1mdW5jdGlvbigpe3JldHVybiBjLiRzbG90c3x8ZnQodC5zY29wZWRTbG90cyxjLiRzbG90cz11dChpLG8pKSxjLiRzbG90c30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInNjb3BlZFNsb3RzIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZnQodC5zY29wZWRTbG90cyx0aGlzLnNsb3RzKCkpfX0pLGwmJih0aGlzLiRvcHRpb25zPXUsdGhpcy4kc2xvdHM9dGhpcy5zbG90cygpLHRoaXMuJHNjb3BlZFNsb3RzPWZ0KHQuc2NvcGVkU2xvdHMsdGhpcy4kc2xvdHMpKSx1Ll9zY29wZUlkP3RoaXMuX2M9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9UHQocyxlLHQsbixyLGYpO3JldHVybiBpJiYhQXJyYXkuaXNBcnJheShpKSYmKGkuZm5TY29wZUlkPXUuX3Njb3BlSWQsaS5mbkNvbnRleHQ9byksaX06dGhpcy5fYz1mdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gUHQocyxlLHQsbixyLGYpfX1mdW5jdGlvbiBFdChlLHQsbixyLGkpe3ZhciBvPW1lKGUpO3JldHVybiBvLmZuQ29udGV4dD1uLG8uZm5PcHRpb25zPXIsdC5zbG90JiYoKG8uZGF0YXx8KG8uZGF0YT17fSkpLnNsb3Q9dC5zbG90KSxvfWZ1bmN0aW9uIE50KGUsdCl7Zm9yKHZhciBuIGluIHQpZVtiKG4pXT10W25dfVN0KFR0LnByb3RvdHlwZSk7dmFyIGp0PXtpbml0OmZ1bmN0aW9uKGUsdCl7aWYoZS5jb21wb25lbnRJbnN0YW5jZSYmIWUuY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkJiZlLmRhdGEua2VlcEFsaXZlKXt2YXIgcj1lO2p0LnByZXBhdGNoKHIscil9ZWxzZXsoZS5jb21wb25lbnRJbnN0YW5jZT1mdW5jdGlvbihlLHQpe3ZhciByPXtfaXNDb21wb25lbnQ6ITAsX3BhcmVudFZub2RlOmUscGFyZW50OnR9LGk9ZS5kYXRhLmlubGluZVRlbXBsYXRlO24oaSkmJihyLnJlbmRlcj1pLnJlbmRlcixyLnN0YXRpY1JlbmRlckZucz1pLnN0YXRpY1JlbmRlckZucyk7cmV0dXJuIG5ldyBlLmNvbXBvbmVudE9wdGlvbnMuQ3RvcihyKX0oZSxXdCkpLiRtb3VudCh0P2UuZWxtOnZvaWQgMCx0KX19LHByZXBhdGNoOmZ1bmN0aW9uKHQsbil7dmFyIHI9bi5jb21wb25lbnRPcHRpb25zOyFmdW5jdGlvbih0LG4scixpLG8pe3ZhciBhPWkuZGF0YS5zY29wZWRTbG90cyxzPXQuJHNjb3BlZFNsb3RzLGM9ISEoYSYmIWEuJHN0YWJsZXx8cyE9PWUmJiFzLiRzdGFibGV8fGEmJnQuJHNjb3BlZFNsb3RzLiRrZXkhPT1hLiRrZXkpLHU9ISEob3x8dC4kb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW58fGMpO3QuJG9wdGlvbnMuX3BhcmVudFZub2RlPWksdC4kdm5vZGU9aSx0Ll92bm9kZSYmKHQuX3Zub2RlLnBhcmVudD1pKTtpZih0LiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbj1vLHQuJGF0dHJzPWkuZGF0YS5hdHRyc3x8ZSx0LiRsaXN0ZW5lcnM9cnx8ZSxuJiZ0LiRvcHRpb25zLnByb3BzKXskZSghMSk7Zm9yKHZhciBsPXQuX3Byb3BzLGY9dC4kb3B0aW9ucy5fcHJvcEtleXN8fFtdLHA9MDtwPGYubGVuZ3RoO3ArKyl7dmFyIGQ9ZltwXSx2PXQuJG9wdGlvbnMucHJvcHM7bFtkXT1NZShkLHYsbix0KX0kZSghMCksdC4kb3B0aW9ucy5wcm9wc0RhdGE9bn1yPXJ8fGU7dmFyIGg9dC4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO3QuJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycz1yLHF0KHQscixoKSx1JiYodC4kc2xvdHM9dXQobyxpLmNvbnRleHQpLHQuJGZvcmNlVXBkYXRlKCkpfShuLmNvbXBvbmVudEluc3RhbmNlPXQuY29tcG9uZW50SW5zdGFuY2Usci5wcm9wc0RhdGEsci5saXN0ZW5lcnMsbixyLmNoaWxkcmVuKX0saW5zZXJ0OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5jb250ZXh0LHI9ZS5jb21wb25lbnRJbnN0YW5jZTtyLl9pc01vdW50ZWR8fChyLl9pc01vdW50ZWQ9ITAsWXQociwibW91bnRlZCIpKSxlLmRhdGEua2VlcEFsaXZlJiYobi5faXNNb3VudGVkPygodD1yKS5faW5hY3RpdmU9ITEsZW4ucHVzaCh0KSk6WHQociwhMCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29tcG9uZW50SW5zdGFuY2U7dC5faXNEZXN0cm95ZWR8fChlLmRhdGEua2VlcEFsaXZlP2Z1bmN0aW9uIGUodCxuKXtpZihuJiYodC5fZGlyZWN0SW5hY3RpdmU9ITAsR3QodCkpKXJldHVybjtpZighdC5faW5hY3RpdmUpe3QuX2luYWN0aXZlPSEwO2Zvcih2YXIgcj0wO3I8dC4kY2hpbGRyZW4ubGVuZ3RoO3IrKyllKHQuJGNoaWxkcmVuW3JdKTtZdCh0LCJkZWFjdGl2YXRlZCIpfX0odCwhMCk6dC4kZGVzdHJveSgpKX19LER0PU9iamVjdC5rZXlzKGp0KTtmdW5jdGlvbiBMdChpLGEscyxjLGwpe2lmKCF0KGkpKXt2YXIgZj1zLiRvcHRpb25zLl9iYXNlO2lmKG8oaSkmJihpPWYuZXh0ZW5kKGkpKSwiZnVuY3Rpb24iPT10eXBlb2YgaSl7dmFyIHA7aWYodChpLmNpZCkmJnZvaWQgMD09PShpPWZ1bmN0aW9uKGUsaSl7aWYocihlLmVycm9yKSYmbihlLmVycm9yQ29tcCkpcmV0dXJuIGUuZXJyb3JDb21wO2lmKG4oZS5yZXNvbHZlZCkpcmV0dXJuIGUucmVzb2x2ZWQ7dmFyIGE9SHQ7YSYmbihlLm93bmVycykmJi0xPT09ZS5vd25lcnMuaW5kZXhPZihhKSYmZS5vd25lcnMucHVzaChhKTtpZihyKGUubG9hZGluZykmJm4oZS5sb2FkaW5nQ29tcCkpcmV0dXJuIGUubG9hZGluZ0NvbXA7aWYoYSYmIW4oZS5vd25lcnMpKXt2YXIgcz1lLm93bmVycz1bYV0sYz0hMCxsPW51bGwsZj1udWxsO2EuJG9uKCJob29rOmRlc3Ryb3llZCIsZnVuY3Rpb24oKXtyZXR1cm4gaChzLGEpfSk7dmFyIHA9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1zLmxlbmd0aDt0PG47dCsrKXNbdF0uJGZvcmNlVXBkYXRlKCk7ZSYmKHMubGVuZ3RoPTAsbnVsbCE9PWwmJihjbGVhclRpbWVvdXQobCksbD1udWxsKSxudWxsIT09ZiYmKGNsZWFyVGltZW91dChmKSxmPW51bGwpKX0sZD1EKGZ1bmN0aW9uKHQpe2UucmVzb2x2ZWQ9QnQodCxpKSxjP3MubGVuZ3RoPTA6cCghMCl9KSx2PUQoZnVuY3Rpb24odCl7bihlLmVycm9yQ29tcCkmJihlLmVycm9yPSEwLHAoITApKX0pLG09ZShkLHYpO3JldHVybiBvKG0pJiYodShtKT90KGUucmVzb2x2ZWQpJiZtLnRoZW4oZCx2KTp1KG0uY29tcG9uZW50KSYmKG0uY29tcG9uZW50LnRoZW4oZCx2KSxuKG0uZXJyb3IpJiYoZS5lcnJvckNvbXA9QnQobS5lcnJvcixpKSksbihtLmxvYWRpbmcpJiYoZS5sb2FkaW5nQ29tcD1CdChtLmxvYWRpbmcsaSksMD09PW0uZGVsYXk/ZS5sb2FkaW5nPSEwOmw9c2V0VGltZW91dChmdW5jdGlvbigpe2w9bnVsbCx0KGUucmVzb2x2ZWQpJiZ0KGUuZXJyb3IpJiYoZS5sb2FkaW5nPSEwLHAoITEpKX0sbS5kZWxheXx8MjAwKSksbihtLnRpbWVvdXQpJiYoZj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zj1udWxsLHQoZS5yZXNvbHZlZCkmJnYobnVsbCl9LG0udGltZW91dCkpKSksYz0hMSxlLmxvYWRpbmc/ZS5sb2FkaW5nQ29tcDplLnJlc29sdmVkfX0ocD1pLGYpKSlyZXR1cm4gZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz12ZSgpO3JldHVybiBvLmFzeW5jRmFjdG9yeT1lLG8uYXN5bmNNZXRhPXtkYXRhOnQsY29udGV4dDpuLGNoaWxkcmVuOnIsdGFnOml9LG99KHAsYSxzLGMsbCk7YT1hfHx7fSwkbihpKSxuKGEubW9kZWwpJiZmdW5jdGlvbihlLHQpe3ZhciByPWUubW9kZWwmJmUubW9kZWwucHJvcHx8InZhbHVlIixpPWUubW9kZWwmJmUubW9kZWwuZXZlbnR8fCJpbnB1dCI7KHQuYXR0cnN8fCh0LmF0dHJzPXt9KSlbcl09dC5tb2RlbC52YWx1ZTt2YXIgbz10Lm9ufHwodC5vbj17fSksYT1vW2ldLHM9dC5tb2RlbC5jYWxsYmFjaztuKGEpPyhBcnJheS5pc0FycmF5KGEpPy0xPT09YS5pbmRleE9mKHMpOmEhPT1zKSYmKG9baV09W3NdLmNvbmNhdChhKSk6b1tpXT1zfShpLm9wdGlvbnMsYSk7dmFyIGQ9ZnVuY3Rpb24oZSxyLGkpe3ZhciBvPXIub3B0aW9ucy5wcm9wcztpZighdChvKSl7dmFyIGE9e30scz1lLmF0dHJzLGM9ZS5wcm9wcztpZihuKHMpfHxuKGMpKWZvcih2YXIgdSBpbiBvKXt2YXIgbD1DKHUpO290KGEsYyx1LGwsITApfHxvdChhLHMsdSxsLCExKX1yZXR1cm4gYX19KGEsaSk7aWYocihpLm9wdGlvbnMuZnVuY3Rpb25hbCkpcmV0dXJuIGZ1bmN0aW9uKHQscixpLG8sYSl7dmFyIHM9dC5vcHRpb25zLGM9e30sdT1zLnByb3BzO2lmKG4odSkpZm9yKHZhciBsIGluIHUpY1tsXT1NZShsLHUscnx8ZSk7ZWxzZSBuKGkuYXR0cnMpJiZOdChjLGkuYXR0cnMpLG4oaS5wcm9wcykmJk50KGMsaS5wcm9wcyk7dmFyIGY9bmV3IFR0KGksYyxhLG8sdCkscD1zLnJlbmRlci5jYWxsKG51bGwsZi5fYyxmKTtpZihwIGluc3RhbmNlb2YgcGUpcmV0dXJuIEV0KHAsaSxmLnBhcmVudCxzKTtpZihBcnJheS5pc0FycmF5KHApKXtmb3IodmFyIGQ9YXQocCl8fFtdLHY9bmV3IEFycmF5KGQubGVuZ3RoKSxoPTA7aDxkLmxlbmd0aDtoKyspdltoXT1FdChkW2hdLGksZi5wYXJlbnQscyk7cmV0dXJuIHZ9fShpLGQsYSxzLGMpO3ZhciB2PWEub247aWYoYS5vbj1hLm5hdGl2ZU9uLHIoaS5vcHRpb25zLmFic3RyYWN0KSl7dmFyIG09YS5zbG90O2E9e30sbSYmKGEuc2xvdD1tKX0hZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuaG9va3x8KGUuaG9vaz17fSksbj0wO248RHQubGVuZ3RoO24rKyl7dmFyIHI9RHRbbl0saT10W3JdLG89anRbcl07aT09PW98fGkmJmkuX21lcmdlZHx8KHRbcl09aT9NdChvLGkpOm8pfX0oYSk7dmFyIHk9aS5vcHRpb25zLm5hbWV8fGw7cmV0dXJuIG5ldyBwZSgidnVlLWNvbXBvbmVudC0iK2kuY2lkKyh5PyItIit5OiIiKSxhLHZvaWQgMCx2b2lkIDAsdm9pZCAwLHMse0N0b3I6aSxwcm9wc0RhdGE6ZCxsaXN0ZW5lcnM6dix0YWc6bCxjaGlsZHJlbjpjfSxwKX19fWZ1bmN0aW9uIE10KGUsdCl7dmFyIG49ZnVuY3Rpb24obixyKXtlKG4sciksdChuLHIpfTtyZXR1cm4gbi5fbWVyZ2VkPSEwLG59dmFyIEl0PTEsRnQ9MjtmdW5jdGlvbiBQdChlLGEscyxjLHUsbCl7cmV0dXJuKEFycmF5LmlzQXJyYXkocyl8fGkocykpJiYodT1jLGM9cyxzPXZvaWQgMCkscihsKSYmKHU9RnQpLGZ1bmN0aW9uKGUsaSxhLHMsYyl7aWYobihhKSYmbihhLl9fb2JfXykpcmV0dXJuIHZlKCk7bihhKSYmbihhLmlzKSYmKGk9YS5pcyk7aWYoIWkpcmV0dXJuIHZlKCk7QXJyYXkuaXNBcnJheShzKSYmImZ1bmN0aW9uIj09dHlwZW9mIHNbMF0mJigoYT1hfHx7fSkuc2NvcGVkU2xvdHM9e2RlZmF1bHQ6c1swXX0scy5sZW5ndGg9MCk7Yz09PUZ0P3M9YXQocyk6Yz09PUl0JiYocz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylpZihBcnJheS5pc0FycmF5KGVbdF0pKXJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGUpO3JldHVybiBlfShzKSk7dmFyIHUsbDtpZigic3RyaW5nIj09dHlwZW9mIGkpe3ZhciBmO2w9ZS4kdm5vZGUmJmUuJHZub2RlLm5zfHxGLmdldFRhZ05hbWVzcGFjZShpKSx1PUYuaXNSZXNlcnZlZFRhZyhpKT9uZXcgcGUoRi5wYXJzZVBsYXRmb3JtVGFnTmFtZShpKSxhLHMsdm9pZCAwLHZvaWQgMCxlKTphJiZhLnByZXx8IW4oZj1MZShlLiRvcHRpb25zLCJjb21wb25lbnRzIixpKSk/bmV3IHBlKGksYSxzLHZvaWQgMCx2b2lkIDAsZSk6THQoZixhLGUscyxpKX1lbHNlIHU9THQoaSxhLGUscyk7cmV0dXJuIEFycmF5LmlzQXJyYXkodSk/dTpuKHUpPyhuKGwpJiZmdW5jdGlvbiBlKGksbyxhKXtpLm5zPW87ImZvcmVpZ25PYmplY3QiPT09aS50YWcmJihvPXZvaWQgMCxhPSEwKTtpZihuKGkuY2hpbGRyZW4pKWZvcih2YXIgcz0wLGM9aS5jaGlsZHJlbi5sZW5ndGg7czxjO3MrKyl7dmFyIHU9aS5jaGlsZHJlbltzXTtuKHUudGFnKSYmKHQodS5ucyl8fHIoYSkmJiJzdmciIT09dS50YWcpJiZlKHUsbyxhKX19KHUsbCksbihhKSYmZnVuY3Rpb24oZSl7byhlLnN0eWxlKSYmZXQoZS5zdHlsZSk7byhlLmNsYXNzKSYmZXQoZS5jbGFzcyl9KGEpLHUpOnZlKCl9KGUsYSxzLGMsdSl9dmFyIFJ0LEh0PW51bGw7ZnVuY3Rpb24gQnQoZSx0KXtyZXR1cm4oZS5fX2VzTW9kdWxlfHxvZSYmIk1vZHVsZSI9PT1lW1N5bWJvbC50b1N0cmluZ1RhZ10pJiYoZT1lLmRlZmF1bHQpLG8oZSk/dC5leHRlbmQoZSk6ZX1mdW5jdGlvbiBVdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJmUuYXN5bmNGYWN0b3J5fWZ1bmN0aW9uIHp0KGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07aWYobihyKSYmKG4oci5jb21wb25lbnRPcHRpb25zKXx8VXQocikpKXJldHVybiByfX1mdW5jdGlvbiBWdChlLHQpe1J0LiRvbihlLHQpfWZ1bmN0aW9uIEt0KGUsdCl7UnQuJG9mZihlLHQpfWZ1bmN0aW9uIEp0KGUsdCl7dmFyIG49UnQ7cmV0dXJuIGZ1bmN0aW9uIHIoKXtudWxsIT09dC5hcHBseShudWxsLGFyZ3VtZW50cykmJm4uJG9mZihlLHIpfX1mdW5jdGlvbiBxdChlLHQsbil7UnQ9ZSxydCh0LG58fHt9LFZ0LEt0LEp0LGUpLFJ0PXZvaWQgMH12YXIgV3Q9bnVsbDtmdW5jdGlvbiBadChlKXt2YXIgdD1XdDtyZXR1cm4gV3Q9ZSxmdW5jdGlvbigpe1d0PXR9fWZ1bmN0aW9uIEd0KGUpe2Zvcig7ZSYmKGU9ZS4kcGFyZW50KTspaWYoZS5faW5hY3RpdmUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gWHQoZSx0KXtpZih0KXtpZihlLl9kaXJlY3RJbmFjdGl2ZT0hMSxHdChlKSlyZXR1cm59ZWxzZSBpZihlLl9kaXJlY3RJbmFjdGl2ZSlyZXR1cm47aWYoZS5faW5hY3RpdmV8fG51bGw9PT1lLl9pbmFjdGl2ZSl7ZS5faW5hY3RpdmU9ITE7Zm9yKHZhciBuPTA7bjxlLiRjaGlsZHJlbi5sZW5ndGg7bisrKVh0KGUuJGNoaWxkcmVuW25dKTtZdChlLCJhY3RpdmF0ZWQiKX19ZnVuY3Rpb24gWXQoZSx0KXtsZSgpO3ZhciBuPWUuJG9wdGlvbnNbdF0scj10KyIgaG9vayI7aWYobilmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspSGUobltpXSxlLG51bGwsZSxyKTtlLl9oYXNIb29rRXZlbnQmJmUuJGVtaXQoImhvb2s6Iit0KSxmZSgpfXZhciBRdD1bXSxlbj1bXSx0bj17fSxubj0hMSxybj0hMSxvbj0wO3ZhciBhbj0wLHNuPURhdGUubm93O2lmKHomJiFxKXt2YXIgY249d2luZG93LnBlcmZvcm1hbmNlO2NuJiYiZnVuY3Rpb24iPT10eXBlb2YgY24ubm93JiZzbigpPmRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLnRpbWVTdGFtcCYmKHNuPWZ1bmN0aW9uKCl7cmV0dXJuIGNuLm5vdygpfSl9ZnVuY3Rpb24gdW4oKXt2YXIgZSx0O2Zvcihhbj1zbigpLHJuPSEwLFF0LnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5pZC10LmlkfSksb249MDtvbjxRdC5sZW5ndGg7b24rKykoZT1RdFtvbl0pLmJlZm9yZSYmZS5iZWZvcmUoKSx0PWUuaWQsdG5bdF09bnVsbCxlLnJ1bigpO3ZhciBuPWVuLnNsaWNlKCkscj1RdC5zbGljZSgpO29uPVF0Lmxlbmd0aD1lbi5sZW5ndGg9MCx0bj17fSxubj1ybj0hMSxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdLl9pbmFjdGl2ZT0hMCxYdChlW3RdLCEwKX0obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7Zm9yKDt0LS07KXt2YXIgbj1lW3RdLHI9bi52bTtyLl93YXRjaGVyPT09biYmci5faXNNb3VudGVkJiYhci5faXNEZXN0cm95ZWQmJll0KHIsInVwZGF0ZWQiKX19KHIpLG5lJiZGLmRldnRvb2xzJiZuZS5lbWl0KCJmbHVzaCIpfXZhciBsbj0wLGZuPWZ1bmN0aW9uKGUsdCxuLHIsaSl7dGhpcy52bT1lLGkmJihlLl93YXRjaGVyPXRoaXMpLGUuX3dhdGNoZXJzLnB1c2godGhpcykscj8odGhpcy5kZWVwPSEhci5kZWVwLHRoaXMudXNlcj0hIXIudXNlcix0aGlzLmxhenk9ISFyLmxhenksdGhpcy5zeW5jPSEhci5zeW5jLHRoaXMuYmVmb3JlPXIuYmVmb3JlKTp0aGlzLmRlZXA9dGhpcy51c2VyPXRoaXMubGF6eT10aGlzLnN5bmM9ITEsdGhpcy5jYj1uLHRoaXMuaWQ9Kytsbix0aGlzLmFjdGl2ZT0hMCx0aGlzLmRpcnR5PXRoaXMubGF6eSx0aGlzLmRlcHM9W10sdGhpcy5uZXdEZXBzPVtdLHRoaXMuZGVwSWRzPW5ldyBpZSx0aGlzLm5ld0RlcElkcz1uZXcgaWUsdGhpcy5leHByZXNzaW9uPSIiLCJmdW5jdGlvbiI9PXR5cGVvZiB0P3RoaXMuZ2V0dGVyPXQ6KHRoaXMuZ2V0dGVyPWZ1bmN0aW9uKGUpe2lmKCFILnRlc3QoZSkpe3ZhciB0PWUuc3BsaXQoIi4iKTtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe2lmKCFlKXJldHVybjtlPWVbdFtuXV19cmV0dXJuIGV9fX0odCksdGhpcy5nZXR0ZXJ8fCh0aGlzLmdldHRlcj1TKSksdGhpcy52YWx1ZT10aGlzLmxhenk/dm9pZCAwOnRoaXMuZ2V0KCl9O2ZuLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgZTtsZSh0aGlzKTt2YXIgdD10aGlzLnZtO3RyeXtlPXRoaXMuZ2V0dGVyLmNhbGwodCx0KX1jYXRjaChlKXtpZighdGhpcy51c2VyKXRocm93IGU7UmUoZSx0LCdnZXR0ZXIgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZmluYWxseXt0aGlzLmRlZXAmJmV0KGUpLGZlKCksdGhpcy5jbGVhbnVwRGVwcygpfXJldHVybiBlfSxmbi5wcm90b3R5cGUuYWRkRGVwPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaWQ7dGhpcy5uZXdEZXBJZHMuaGFzKHQpfHwodGhpcy5uZXdEZXBJZHMuYWRkKHQpLHRoaXMubmV3RGVwcy5wdXNoKGUpLHRoaXMuZGVwSWRzLmhhcyh0KXx8ZS5hZGRTdWIodGhpcykpfSxmbi5wcm90b3R5cGUuY2xlYW51cERlcHM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5kZXBzLmxlbmd0aDtlLS07KXt2YXIgdD10aGlzLmRlcHNbZV07dGhpcy5uZXdEZXBJZHMuaGFzKHQuaWQpfHx0LnJlbW92ZVN1Yih0aGlzKX12YXIgbj10aGlzLmRlcElkczt0aGlzLmRlcElkcz10aGlzLm5ld0RlcElkcyx0aGlzLm5ld0RlcElkcz1uLHRoaXMubmV3RGVwSWRzLmNsZWFyKCksbj10aGlzLmRlcHMsdGhpcy5kZXBzPXRoaXMubmV3RGVwcyx0aGlzLm5ld0RlcHM9bix0aGlzLm5ld0RlcHMubGVuZ3RoPTB9LGZuLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmxhenk/dGhpcy5kaXJ0eT0hMDp0aGlzLnN5bmM/dGhpcy5ydW4oKTpmdW5jdGlvbihlKXt2YXIgdD1lLmlkO2lmKG51bGw9PXRuW3RdKXtpZih0blt0XT0hMCxybil7Zm9yKHZhciBuPVF0Lmxlbmd0aC0xO24+b24mJlF0W25dLmlkPmUuaWQ7KW4tLTtRdC5zcGxpY2UobisxLDAsZSl9ZWxzZSBRdC5wdXNoKGUpO25ufHwobm49ITAsWWUodW4pKX19KHRoaXMpfSxmbi5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpe3ZhciBlPXRoaXMuZ2V0KCk7aWYoZSE9PXRoaXMudmFsdWV8fG8oZSl8fHRoaXMuZGVlcCl7dmFyIHQ9dGhpcy52YWx1ZTtpZih0aGlzLnZhbHVlPWUsdGhpcy51c2VyKXRyeXt0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfWNhdGNoKGUpe1JlKGUsdGhpcy52bSwnY2FsbGJhY2sgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZWxzZSB0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfX19LGZuLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbigpe3RoaXMudmFsdWU9dGhpcy5nZXQoKSx0aGlzLmRpcnR5PSExfSxmbi5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuZGVwcy5sZW5ndGg7ZS0tOyl0aGlzLmRlcHNbZV0uZGVwZW5kKCl9LGZuLnByb3RvdHlwZS50ZWFyZG93bj1mdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZlKXt0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkfHxoKHRoaXMudm0uX3dhdGNoZXJzLHRoaXMpO2Zvcih2YXIgZT10aGlzLmRlcHMubGVuZ3RoO2UtLTspdGhpcy5kZXBzW2VdLnJlbW92ZVN1Yih0aGlzKTt0aGlzLmFjdGl2ZT0hMX19O3ZhciBwbj17ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0OlMsc2V0OlN9O2Z1bmN0aW9uIGRuKGUsdCxuKXtwbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1t0XVtuXX0scG4uc2V0PWZ1bmN0aW9uKGUpe3RoaXNbdF1bbl09ZX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbixwbil9ZnVuY3Rpb24gdm4oZSl7ZS5fd2F0Y2hlcnM9W107dmFyIHQ9ZS4kb3B0aW9uczt0LnByb3BzJiZmdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnMucHJvcHNEYXRhfHx7fSxyPWUuX3Byb3BzPXt9LGk9ZS4kb3B0aW9ucy5fcHJvcEtleXM9W107ZS4kcGFyZW50JiYkZSghMSk7dmFyIG89ZnVuY3Rpb24obyl7aS5wdXNoKG8pO3ZhciBhPU1lKG8sdCxuLGUpO3hlKHIsbyxhKSxvIGluIGV8fGRuKGUsIl9wcm9wcyIsbyl9O2Zvcih2YXIgYSBpbiB0KW8oYSk7JGUoITApfShlLHQucHJvcHMpLHQubWV0aG9kcyYmZnVuY3Rpb24oZSx0KXtlLiRvcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWVbbl09ImZ1bmN0aW9uIiE9dHlwZW9mIHRbbl0/Uzp4KHRbbl0sZSl9KGUsdC5tZXRob2RzKSx0LmRhdGE/ZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5kYXRhO3ModD1lLl9kYXRhPSJmdW5jdGlvbiI9PXR5cGVvZiB0P2Z1bmN0aW9uKGUsdCl7bGUoKTt0cnl7cmV0dXJuIGUuY2FsbCh0LHQpfWNhdGNoKGUpe3JldHVybiBSZShlLHQsImRhdGEoKSIpLHt9fWZpbmFsbHl7ZmUoKX19KHQsZSk6dHx8e30pfHwodD17fSk7dmFyIG49T2JqZWN0LmtleXModCkscj1lLiRvcHRpb25zLnByb3BzLGk9KGUuJG9wdGlvbnMubWV0aG9kcyxuLmxlbmd0aCk7Zm9yKDtpLS07KXt2YXIgbz1uW2ldO3ImJnkocixvKXx8KGE9dm9pZCAwLDM2IT09KGE9KG8rIiIpLmNoYXJDb2RlQXQoMCkpJiY5NSE9PWEmJmRuKGUsIl9kYXRhIixvKSl9dmFyIGE7Q2UodCwhMCl9KGUpOkNlKGUuX2RhdGE9e30sITApLHQuY29tcHV0ZWQmJmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5fY29tcHV0ZWRXYXRjaGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGUoKTtmb3IodmFyIGkgaW4gdCl7dmFyIG89dFtpXSxhPSJmdW5jdGlvbiI9PXR5cGVvZiBvP286by5nZXQ7cnx8KG5baV09bmV3IGZuKGUsYXx8UyxTLGhuKSksaSBpbiBlfHxtbihlLGksbyl9fShlLHQuY29tcHV0ZWQpLHQud2F0Y2gmJnQud2F0Y2ghPT1ZJiZmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dO2lmKEFycmF5LmlzQXJyYXkocikpZm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspX24oZSxuLHJbaV0pO2Vsc2UgX24oZSxuLHIpfX0oZSx0LndhdGNoKX12YXIgaG49e2xhenk6ITB9O2Z1bmN0aW9uIG1uKGUsdCxuKXt2YXIgcj0hdGUoKTsiZnVuY3Rpb24iPT10eXBlb2Ygbj8ocG4uZ2V0PXI/eW4odCk6Z24obikscG4uc2V0PVMpOihwbi5nZXQ9bi5nZXQ/ciYmITEhPT1uLmNhY2hlP3luKHQpOmduKG4uZ2V0KTpTLHBuLnNldD1uLnNldHx8UyksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxwbil9ZnVuY3Rpb24geW4oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY29tcHV0ZWRXYXRjaGVycyYmdGhpcy5fY29tcHV0ZWRXYXRjaGVyc1tlXTtpZih0KXJldHVybiB0LmRpcnR5JiZ0LmV2YWx1YXRlKCksY2UudGFyZ2V0JiZ0LmRlcGVuZCgpLHQudmFsdWV9fWZ1bmN0aW9uIGduKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyx0aGlzKX19ZnVuY3Rpb24gX24oZSx0LG4scil7cmV0dXJuIHMobikmJihyPW4sbj1uLmhhbmRsZXIpLCJzdHJpbmciPT10eXBlb2YgbiYmKG49ZVtuXSksZS4kd2F0Y2godCxuLHIpfXZhciBibj0wO2Z1bmN0aW9uICRuKGUpe3ZhciB0PWUub3B0aW9ucztpZihlLnN1cGVyKXt2YXIgbj0kbihlLnN1cGVyKTtpZihuIT09ZS5zdXBlck9wdGlvbnMpe2Uuc3VwZXJPcHRpb25zPW47dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLm9wdGlvbnMscj1lLnNlYWxlZE9wdGlvbnM7Zm9yKHZhciBpIGluIG4pbltpXSE9PXJbaV0mJih0fHwodD17fSksdFtpXT1uW2ldKTtyZXR1cm4gdH0oZSk7ciYmQShlLmV4dGVuZE9wdGlvbnMsciksKHQ9ZS5vcHRpb25zPURlKG4sZS5leHRlbmRPcHRpb25zKSkubmFtZSYmKHQuY29tcG9uZW50c1t0Lm5hbWVdPWUpfX1yZXR1cm4gdH1mdW5jdGlvbiB3bihlKXt0aGlzLl9pbml0KGUpfWZ1bmN0aW9uIENuKGUpe2UuY2lkPTA7dmFyIHQ9MTtlLmV4dGVuZD1mdW5jdGlvbihlKXtlPWV8fHt9O3ZhciBuPXRoaXMscj1uLmNpZCxpPWUuX0N0b3J8fChlLl9DdG9yPXt9KTtpZihpW3JdKXJldHVybiBpW3JdO3ZhciBvPWUubmFtZXx8bi5vcHRpb25zLm5hbWUsYT1mdW5jdGlvbihlKXt0aGlzLl9pbml0KGUpfTtyZXR1cm4oYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWEsYS5jaWQ9dCsrLGEub3B0aW9ucz1EZShuLm9wdGlvbnMsZSksYS5zdXBlcj1uLGEub3B0aW9ucy5wcm9wcyYmZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWRuKGUucHJvdG90eXBlLCJfcHJvcHMiLG4pfShhKSxhLm9wdGlvbnMuY29tcHV0ZWQmJmZ1bmN0aW9uKGUpe3ZhciB0PWUub3B0aW9ucy5jb21wdXRlZDtmb3IodmFyIG4gaW4gdCltbihlLnByb3RvdHlwZSxuLHRbbl0pfShhKSxhLmV4dGVuZD1uLmV4dGVuZCxhLm1peGluPW4ubWl4aW4sYS51c2U9bi51c2UsTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2FbZV09bltlXX0pLG8mJihhLm9wdGlvbnMuY29tcG9uZW50c1tvXT1hKSxhLnN1cGVyT3B0aW9ucz1uLm9wdGlvbnMsYS5leHRlbmRPcHRpb25zPWUsYS5zZWFsZWRPcHRpb25zPUEoe30sYS5vcHRpb25zKSxpW3JdPWEsYX19ZnVuY3Rpb24geG4oZSl7cmV0dXJuIGUmJihlLkN0b3Iub3B0aW9ucy5uYW1lfHxlLnRhZyl9ZnVuY3Rpb24ga24oZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lLmluZGV4T2YodCk+LTE6InN0cmluZyI9PXR5cGVvZiBlP2Uuc3BsaXQoIiwiKS5pbmRleE9mKHQpPi0xOihuPWUsIltvYmplY3QgUmVnRXhwXSI9PT1hLmNhbGwobikmJmUudGVzdCh0KSk7dmFyIG59ZnVuY3Rpb24gQW4oZSx0KXt2YXIgbj1lLmNhY2hlLHI9ZS5rZXlzLGk9ZS5fdm5vZGU7Zm9yKHZhciBvIGluIG4pe3ZhciBhPW5bb107aWYoYSl7dmFyIHM9eG4oYS5jb21wb25lbnRPcHRpb25zKTtzJiYhdChzKSYmT24obixvLHIsaSl9fX1mdW5jdGlvbiBPbihlLHQsbixyKXt2YXIgaT1lW3RdOyFpfHxyJiZpLnRhZz09PXIudGFnfHxpLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCksZVt0XT1udWxsLGgobix0KX0hZnVuY3Rpb24odCl7dC5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcztuLl91aWQ9Ym4rKyxuLl9pc1Z1ZT0hMCx0JiZ0Ll9pc0NvbXBvbmVudD9mdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLmNvbnN0cnVjdG9yLm9wdGlvbnMpLHI9dC5fcGFyZW50Vm5vZGU7bi5wYXJlbnQ9dC5wYXJlbnQsbi5fcGFyZW50Vm5vZGU9cjt2YXIgaT1yLmNvbXBvbmVudE9wdGlvbnM7bi5wcm9wc0RhdGE9aS5wcm9wc0RhdGEsbi5fcGFyZW50TGlzdGVuZXJzPWkubGlzdGVuZXJzLG4uX3JlbmRlckNoaWxkcmVuPWkuY2hpbGRyZW4sbi5fY29tcG9uZW50VGFnPWkudGFnLHQucmVuZGVyJiYobi5yZW5kZXI9dC5yZW5kZXIsbi5zdGF0aWNSZW5kZXJGbnM9dC5zdGF0aWNSZW5kZXJGbnMpfShuLHQpOm4uJG9wdGlvbnM9RGUoJG4obi5jb25zdHJ1Y3RvciksdHx8e30sbiksbi5fcmVuZGVyUHJveHk9bixuLl9zZWxmPW4sZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucyxuPXQucGFyZW50O2lmKG4mJiF0LmFic3RyYWN0KXtmb3IoO24uJG9wdGlvbnMuYWJzdHJhY3QmJm4uJHBhcmVudDspbj1uLiRwYXJlbnQ7bi4kY2hpbGRyZW4ucHVzaChlKX1lLiRwYXJlbnQ9bixlLiRyb290PW4/bi4kcm9vdDplLGUuJGNoaWxkcmVuPVtdLGUuJHJlZnM9e30sZS5fd2F0Y2hlcj1udWxsLGUuX2luYWN0aXZlPW51bGwsZS5fZGlyZWN0SW5hY3RpdmU9ITEsZS5faXNNb3VudGVkPSExLGUuX2lzRGVzdHJveWVkPSExLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITF9KG4pLGZ1bmN0aW9uKGUpe2UuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLGUuX2hhc0hvb2tFdmVudD0hMTt2YXIgdD1lLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7dCYmcXQoZSx0KX0obiksZnVuY3Rpb24odCl7dC5fdm5vZGU9bnVsbCx0Ll9zdGF0aWNUcmVlcz1udWxsO3ZhciBuPXQuJG9wdGlvbnMscj10LiR2bm9kZT1uLl9wYXJlbnRWbm9kZSxpPXImJnIuY29udGV4dDt0LiRzbG90cz11dChuLl9yZW5kZXJDaGlsZHJlbixpKSx0LiRzY29wZWRTbG90cz1lLHQuX2M9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMSl9LHQuJGNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMCl9O3ZhciBvPXImJnIuZGF0YTt4ZSh0LCIkYXR0cnMiLG8mJm8uYXR0cnN8fGUsbnVsbCwhMCkseGUodCwiJGxpc3RlbmVycyIsbi5fcGFyZW50TGlzdGVuZXJzfHxlLG51bGwsITApfShuKSxZdChuLCJiZWZvcmVDcmVhdGUiKSxmdW5jdGlvbihlKXt2YXIgdD1jdChlLiRvcHRpb25zLmluamVjdCxlKTt0JiYoJGUoITEpLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7eGUoZSxuLHRbbl0pfSksJGUoITApKX0obiksdm4obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5wcm92aWRlO3QmJihlLl9wcm92aWRlZD0iZnVuY3Rpb24iPT10eXBlb2YgdD90LmNhbGwoZSk6dCl9KG4pLFl0KG4sImNyZWF0ZWQiKSxuLiRvcHRpb25zLmVsJiZuLiRtb3VudChuLiRvcHRpb25zLmVsKX19KHduKSxmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fSxuPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcHN9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRkYXRhIix0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRwcm9wcyIsbiksZS5wcm90b3R5cGUuJHNldD1rZSxlLnByb3RvdHlwZS4kZGVsZXRlPUFlLGUucHJvdG90eXBlLiR3YXRjaD1mdW5jdGlvbihlLHQsbil7aWYocyh0KSlyZXR1cm4gX24odGhpcyxlLHQsbik7KG49bnx8e30pLnVzZXI9ITA7dmFyIHI9bmV3IGZuKHRoaXMsZSx0LG4pO2lmKG4uaW1tZWRpYXRlKXRyeXt0LmNhbGwodGhpcyxyLnZhbHVlKX1jYXRjaChlKXtSZShlLHRoaXMsJ2NhbGxiYWNrIGZvciBpbW1lZGlhdGUgd2F0Y2hlciAiJytyLmV4cHJlc3Npb24rJyInKX1yZXR1cm4gZnVuY3Rpb24oKXtyLnRlYXJkb3duKCl9fX0od24pLGZ1bmN0aW9uKGUpe3ZhciB0PS9eaG9vazovO2UucHJvdG90eXBlLiRvbj1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXM7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIGk9MCxvPWUubGVuZ3RoO2k8bztpKyspci4kb24oZVtpXSxuKTtlbHNlKHIuX2V2ZW50c1tlXXx8KHIuX2V2ZW50c1tlXT1bXSkpLnB1c2gobiksdC50ZXN0KGUpJiYoci5faGFzSG9va0V2ZW50PSEwKTtyZXR1cm4gcn0sZS5wcm90b3R5cGUuJG9uY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2Z1bmN0aW9uIHIoKXtuLiRvZmYoZSxyKSx0LmFwcGx5KG4sYXJndW1lbnRzKX1yZXR1cm4gci5mbj10LG4uJG9uKGUsciksbn0sZS5wcm90b3R5cGUuJG9mZj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG4uX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLG47aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciByPTAsaT1lLmxlbmd0aDtyPGk7cisrKW4uJG9mZihlW3JdLHQpO3JldHVybiBufXZhciBvLGE9bi5fZXZlbnRzW2VdO2lmKCFhKXJldHVybiBuO2lmKCF0KXJldHVybiBuLl9ldmVudHNbZV09bnVsbCxuO2Zvcih2YXIgcz1hLmxlbmd0aDtzLS07KWlmKChvPWFbc10pPT09dHx8by5mbj09PXQpe2Euc3BsaWNlKHMsMSk7YnJlYWt9cmV0dXJuIG59LGUucHJvdG90eXBlLiRlbWl0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2V2ZW50c1tlXTtpZih0KXt0PXQubGVuZ3RoPjE/ayh0KTp0O2Zvcih2YXIgbj1rKGFyZ3VtZW50cywxKSxyPSdldmVudCBoYW5kbGVyIGZvciAiJytlKyciJyxpPTAsbz10Lmxlbmd0aDtpPG87aSsrKUhlKHRbaV0sdGhpcyxuLHRoaXMscil9cmV0dXJuIHRoaXN9fSh3biksZnVuY3Rpb24oZSl7ZS5wcm90b3R5cGUuX3VwZGF0ZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMscj1uLiRlbCxpPW4uX3Zub2RlLG89WnQobik7bi5fdm5vZGU9ZSxuLiRlbD1pP24uX19wYXRjaF9fKGksZSk6bi5fX3BhdGNoX18obi4kZWwsZSx0LCExKSxvKCksciYmKHIuX192dWVfXz1udWxsKSxuLiRlbCYmKG4uJGVsLl9fdnVlX189biksbi4kdm5vZGUmJm4uJHBhcmVudCYmbi4kdm5vZGU9PT1uLiRwYXJlbnQuX3Zub2RlJiYobi4kcGFyZW50LiRlbD1uLiRlbCl9LGUucHJvdG90eXBlLiRmb3JjZVVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXImJnRoaXMuX3dhdGNoZXIudXBkYXRlKCl9LGUucHJvdG90eXBlLiRkZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighZS5faXNCZWluZ0Rlc3Ryb3llZCl7WXQoZSwiYmVmb3JlRGVzdHJveSIpLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITA7dmFyIHQ9ZS4kcGFyZW50OyF0fHx0Ll9pc0JlaW5nRGVzdHJveWVkfHxlLiRvcHRpb25zLmFic3RyYWN0fHxoKHQuJGNoaWxkcmVuLGUpLGUuX3dhdGNoZXImJmUuX3dhdGNoZXIudGVhcmRvd24oKTtmb3IodmFyIG49ZS5fd2F0Y2hlcnMubGVuZ3RoO24tLTspZS5fd2F0Y2hlcnNbbl0udGVhcmRvd24oKTtlLl9kYXRhLl9fb2JfXyYmZS5fZGF0YS5fX29iX18udm1Db3VudC0tLGUuX2lzRGVzdHJveWVkPSEwLGUuX19wYXRjaF9fKGUuX3Zub2RlLG51bGwpLFl0KGUsImRlc3Ryb3llZCIpLGUuJG9mZigpLGUuJGVsJiYoZS4kZWwuX192dWVfXz1udWxsKSxlLiR2bm9kZSYmKGUuJHZub2RlLnBhcmVudD1udWxsKX19fSh3biksZnVuY3Rpb24oZSl7U3QoZS5wcm90b3R5cGUpLGUucHJvdG90eXBlLiRuZXh0VGljaz1mdW5jdGlvbihlKXtyZXR1cm4gWWUoZSx0aGlzKX0sZS5wcm90b3R5cGUuX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuJG9wdGlvbnMscj1uLnJlbmRlcixpPW4uX3BhcmVudFZub2RlO2kmJih0LiRzY29wZWRTbG90cz1mdChpLmRhdGEuc2NvcGVkU2xvdHMsdC4kc2xvdHMsdC4kc2NvcGVkU2xvdHMpKSx0LiR2bm9kZT1pO3RyeXtIdD10LGU9ci5jYWxsKHQuX3JlbmRlclByb3h5LHQuJGNyZWF0ZUVsZW1lbnQpfWNhdGNoKG4pe1JlKG4sdCwicmVuZGVyIiksZT10Ll92bm9kZX1maW5hbGx5e0h0PW51bGx9cmV0dXJuIEFycmF5LmlzQXJyYXkoZSkmJjE9PT1lLmxlbmd0aCYmKGU9ZVswXSksZSBpbnN0YW5jZW9mIHBlfHwoZT12ZSgpKSxlLnBhcmVudD1pLGV9fSh3bik7dmFyIFNuPVtTdHJpbmcsUmVnRXhwLEFycmF5XSxUbj17S2VlcEFsaXZlOntuYW1lOiJrZWVwLWFsaXZlIixhYnN0cmFjdDohMCxwcm9wczp7aW5jbHVkZTpTbixleGNsdWRlOlNuLG1heDpbU3RyaW5nLE51bWJlcl19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5rZXlzPVtdfSxkZXN0cm95ZWQ6ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gdGhpcy5jYWNoZSlPbih0aGlzLmNhY2hlLGUsdGhpcy5rZXlzKX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy4kd2F0Y2goImluY2x1ZGUiLGZ1bmN0aW9uKHQpe0FuKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGtuKHQsZSl9KX0pLHRoaXMuJHdhdGNoKCJleGNsdWRlIixmdW5jdGlvbih0KXtBbihlLGZ1bmN0aW9uKGUpe3JldHVybiFrbih0LGUpfSl9KX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kc2xvdHMuZGVmYXVsdCx0PXp0KGUpLG49dCYmdC5jb21wb25lbnRPcHRpb25zO2lmKG4pe3ZhciByPXhuKG4pLGk9dGhpcy5pbmNsdWRlLG89dGhpcy5leGNsdWRlO2lmKGkmJighcnx8IWtuKGkscikpfHxvJiZyJiZrbihvLHIpKXJldHVybiB0O3ZhciBhPXRoaXMuY2FjaGUscz10aGlzLmtleXMsYz1udWxsPT10LmtleT9uLkN0b3IuY2lkKyhuLnRhZz8iOjoiK24udGFnOiIiKTp0LmtleTthW2NdPyh0LmNvbXBvbmVudEluc3RhbmNlPWFbY10uY29tcG9uZW50SW5zdGFuY2UsaChzLGMpLHMucHVzaChjKSk6KGFbY109dCxzLnB1c2goYyksdGhpcy5tYXgmJnMubGVuZ3RoPnBhcnNlSW50KHRoaXMubWF4KSYmT24oYSxzWzBdLHMsdGhpcy5fdm5vZGUpKSx0LmRhdGEua2VlcEFsaXZlPSEwfXJldHVybiB0fHxlJiZlWzBdfX19OyFmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEZ9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiY29uZmlnIix0KSxlLnV0aWw9e3dhcm46YWUsZXh0ZW5kOkEsbWVyZ2VPcHRpb25zOkRlLGRlZmluZVJlYWN0aXZlOnhlfSxlLnNldD1rZSxlLmRlbGV0ZT1BZSxlLm5leHRUaWNrPVllLGUub2JzZXJ2YWJsZT1mdW5jdGlvbihlKXtyZXR1cm4gQ2UoZSksZX0sZS5vcHRpb25zPU9iamVjdC5jcmVhdGUobnVsbCksTS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Uub3B0aW9uc1t0KyJzIl09T2JqZWN0LmNyZWF0ZShudWxsKX0pLGUub3B0aW9ucy5fYmFzZT1lLEEoZS5vcHRpb25zLmNvbXBvbmVudHMsVG4pLGZ1bmN0aW9uKGUpe2UudXNlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2luc3RhbGxlZFBsdWdpbnN8fCh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zPVtdKTtpZih0LmluZGV4T2YoZSk+LTEpcmV0dXJuIHRoaXM7dmFyIG49ayhhcmd1bWVudHMsMSk7cmV0dXJuIG4udW5zaGlmdCh0aGlzKSwiZnVuY3Rpb24iPT10eXBlb2YgZS5pbnN0YWxsP2UuaW5zdGFsbC5hcHBseShlLG4pOiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmFwcGx5KG51bGwsbiksdC5wdXNoKGUpLHRoaXN9fShlKSxmdW5jdGlvbihlKXtlLm1peGluPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnM9RGUodGhpcy5vcHRpb25zLGUpLHRoaXN9fShlKSxDbihlKSxmdW5jdGlvbihlKXtNLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBuPygiY29tcG9uZW50Ij09PXQmJnMobikmJihuLm5hbWU9bi5uYW1lfHxlLG49dGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChuKSksImRpcmVjdGl2ZSI9PT10JiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmKG49e2JpbmQ6bix1cGRhdGU6bn0pLHRoaXMub3B0aW9uc1t0KyJzIl1bZV09bixuKTp0aGlzLm9wdGlvbnNbdCsicyJdW2VdfX0pfShlKX0od24pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRpc1NlcnZlciIse2dldDp0ZX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRzc3JDb250ZXh0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHZub2RlJiZ0aGlzLiR2bm9kZS5zc3JDb250ZXh0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3biwiRnVuY3Rpb25hbFJlbmRlckNvbnRleHQiLHt2YWx1ZTpUdH0pLHduLnZlcnNpb249IjIuNi4xMSI7dmFyIEVuPXAoInN0eWxlLGNsYXNzIiksTm49cCgiaW5wdXQsdGV4dGFyZWEsb3B0aW9uLHNlbGVjdCxwcm9ncmVzcyIpLGpuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4idmFsdWUiPT09biYmTm4oZSkmJiJidXR0b24iIT09dHx8InNlbGVjdGVkIj09PW4mJiJvcHRpb24iPT09ZXx8ImNoZWNrZWQiPT09biYmImlucHV0Ij09PWV8fCJtdXRlZCI9PT1uJiYidmlkZW8iPT09ZX0sRG49cCgiY29udGVudGVkaXRhYmxlLGRyYWdnYWJsZSxzcGVsbGNoZWNrIiksTG49cCgiZXZlbnRzLGNhcmV0LHR5cGluZyxwbGFpbnRleHQtb25seSIpLE1uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEhuKHQpfHwiZmFsc2UiPT09dD8iZmFsc2UiOiJjb250ZW50ZWRpdGFibGUiPT09ZSYmTG4odCk/dDoidHJ1ZSJ9LEluPXAoImFsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLGVuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSxyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLHRydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUiKSxGbj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsUG49ZnVuY3Rpb24oZSl7cmV0dXJuIjoiPT09ZS5jaGFyQXQoNSkmJiJ4bGluayI9PT1lLnNsaWNlKDAsNSl9LFJuPWZ1bmN0aW9uKGUpe3JldHVybiBQbihlKT9lLnNsaWNlKDYsZS5sZW5ndGgpOiIifSxIbj1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZXx8ITE9PT1lfTtmdW5jdGlvbiBCbihlKXtmb3IodmFyIHQ9ZS5kYXRhLHI9ZSxpPWU7bihpLmNvbXBvbmVudEluc3RhbmNlKTspKGk9aS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpJiZpLmRhdGEmJih0PVVuKGkuZGF0YSx0KSk7Zm9yKDtuKHI9ci5wYXJlbnQpOylyJiZyLmRhdGEmJih0PVVuKHQsci5kYXRhKSk7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYobihlKXx8bih0KSlyZXR1cm4gem4oZSxWbih0KSk7cmV0dXJuIiJ9KHQuc3RhdGljQ2xhc3MsdC5jbGFzcyl9ZnVuY3Rpb24gVW4oZSx0KXtyZXR1cm57c3RhdGljQ2xhc3M6em4oZS5zdGF0aWNDbGFzcyx0LnN0YXRpY0NsYXNzKSxjbGFzczpuKGUuY2xhc3MpP1tlLmNsYXNzLHQuY2xhc3NdOnQuY2xhc3N9fWZ1bmN0aW9uIHpuKGUsdCl7cmV0dXJuIGU/dD9lKyIgIit0OmU6dHx8IiJ9ZnVuY3Rpb24gVm4oZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9IiIsaT0wLG89ZS5sZW5ndGg7aTxvO2krKyluKHQ9Vm4oZVtpXSkpJiYiIiE9PXQmJihyJiYocis9IiAiKSxyKz10KTtyZXR1cm4gcn0oZSk6byhlKT9mdW5jdGlvbihlKXt2YXIgdD0iIjtmb3IodmFyIG4gaW4gZSllW25dJiYodCYmKHQrPSIgIiksdCs9bik7cmV0dXJuIHR9KGUpOiJzdHJpbmciPT10eXBlb2YgZT9lOiIifXZhciBLbj17c3ZnOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsbWF0aDoiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCJ9LEpuPXAoImh0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGgxLGgyLGgzLGg0LGg1LGg2LGhncm91cCxuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSxkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnRjLHJ1YnkscyxzYW1wLHNtYWxsLHNwYW4sc3Ryb25nLHN1YixzdXAsdGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSxjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsY2FwdGlvbixjb2wsY29sZ3JvdXAsdGFibGUsdGhlYWQsdGJvZHksdGQsdGgsdHIsYnV0dG9uLGRhdGFsaXN0LGZpZWxkc2V0LGZvcm0saW5wdXQsbGFiZWwsbGVnZW5kLG1ldGVyLG9wdGdyb3VwLG9wdGlvbixvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLGRldGFpbHMsZGlhbG9nLG1lbnUsbWVudWl0ZW0sc3VtbWFyeSxjb250ZW50LGVsZW1lbnQsc2hhZG93LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290IikscW49cCgic3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLGZvcmVpZ25PYmplY3QsZyxnbHlwaCxpbWFnZSxsaW5lLG1hcmtlcixtYXNrLG1pc3NpbmctZ2x5cGgscGF0aCxwYXR0ZXJuLHBvbHlnb24scG9seWxpbmUscmVjdCxzd2l0Y2gsc3ltYm9sLHRleHQsdGV4dHBhdGgsdHNwYW4sdXNlLHZpZXciLCEwKSxXbj1mdW5jdGlvbihlKXtyZXR1cm4gSm4oZSl8fHFuKGUpfTtmdW5jdGlvbiBabihlKXtyZXR1cm4gcW4oZSk/InN2ZyI6Im1hdGgiPT09ZT8ibWF0aCI6dm9pZCAwfXZhciBHbj1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBYbj1wKCJ0ZXh0LG51bWJlcixwYXNzd29yZCxzZWFyY2gsZW1haWwsdGVsLHVybCIpO2Z1bmN0aW9uIFluKGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSl7dmFyIHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKTtyZXR1cm4gdHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iil9cmV0dXJuIGV9dmFyIFFuPU9iamVjdC5mcmVlemUoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiJzZWxlY3QiIT09ZT9uOih0LmRhdGEmJnQuZGF0YS5hdHRycyYmdm9pZCAwIT09dC5kYXRhLmF0dHJzLm11bHRpcGxlJiZuLnNldEF0dHJpYnV0ZSgibXVsdGlwbGUiLCJtdWx0aXBsZSIpLG4pfSxjcmVhdGVFbGVtZW50TlM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKEtuW2VdLHQpfSxjcmVhdGVUZXh0Tm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSl9LGNyZWF0ZUNvbW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoZSl9LGluc2VydEJlZm9yZTpmdW5jdGlvbihlLHQsbil7ZS5pbnNlcnRCZWZvcmUodCxuKX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oZSx0KXtlLnJlbW92ZUNoaWxkKHQpfSxhcHBlbmRDaGlsZDpmdW5jdGlvbihlLHQpe2UuYXBwZW5kQ2hpbGQodCl9LHBhcmVudE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZX0sbmV4dFNpYmxpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubmV4dFNpYmxpbmd9LHRhZ05hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnTmFtZX0sc2V0VGV4dENvbnRlbnQ6ZnVuY3Rpb24oZSx0KXtlLnRleHRDb250ZW50PXR9LHNldFN0eWxlU2NvcGU6ZnVuY3Rpb24oZSx0KXtlLnNldEF0dHJpYnV0ZSh0LCIiKX19KSxlcj17Y3JlYXRlOmZ1bmN0aW9uKGUsdCl7dHIodCl9LHVwZGF0ZTpmdW5jdGlvbihlLHQpe2UuZGF0YS5yZWYhPT10LmRhdGEucmVmJiYodHIoZSwhMCksdHIodCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3RyKGUsITApfX07ZnVuY3Rpb24gdHIoZSx0KXt2YXIgcj1lLmRhdGEucmVmO2lmKG4ocikpe3ZhciBpPWUuY29udGV4dCxvPWUuY29tcG9uZW50SW5zdGFuY2V8fGUuZWxtLGE9aS4kcmVmczt0P0FycmF5LmlzQXJyYXkoYVtyXSk/aChhW3JdLG8pOmFbcl09PT1vJiYoYVtyXT12b2lkIDApOmUuZGF0YS5yZWZJbkZvcj9BcnJheS5pc0FycmF5KGFbcl0pP2Fbcl0uaW5kZXhPZihvKTwwJiZhW3JdLnB1c2gobyk6YVtyXT1bb106YVtyXT1vfX12YXIgbnI9bmV3IHBlKCIiLHt9LFtdKSxycj1bImNyZWF0ZSIsImFjdGl2YXRlIiwidXBkYXRlIiwicmVtb3ZlIiwiZGVzdHJveSJdO2Z1bmN0aW9uIGlyKGUsaSl7cmV0dXJuIGUua2V5PT09aS5rZXkmJihlLnRhZz09PWkudGFnJiZlLmlzQ29tbWVudD09PWkuaXNDb21tZW50JiZuKGUuZGF0YSk9PT1uKGkuZGF0YSkmJmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0IiE9PWUudGFnKXJldHVybiEwO3ZhciByLGk9bihyPWUuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlLG89bihyPXQuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlO3JldHVybiBpPT09b3x8WG4oaSkmJlhuKG8pfShlLGkpfHxyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSYmZS5hc3luY0ZhY3Rvcnk9PT1pLmFzeW5jRmFjdG9yeSYmdChpLmFzeW5jRmFjdG9yeS5lcnJvcikpfWZ1bmN0aW9uIG9yKGUsdCxyKXt2YXIgaSxvLGE9e307Zm9yKGk9dDtpPD1yOysraSluKG89ZVtpXS5rZXkpJiYoYVtvXT1pKTtyZXR1cm4gYX12YXIgYXI9e2NyZWF0ZTpzcix1cGRhdGU6c3IsZGVzdHJveTpmdW5jdGlvbihlKXtzcihlLG5yKX19O2Z1bmN0aW9uIHNyKGUsdCl7KGUuZGF0YS5kaXJlY3RpdmVzfHx0LmRhdGEuZGlyZWN0aXZlcykmJmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG89ZT09PW5yLGE9dD09PW5yLHM9dXIoZS5kYXRhLmRpcmVjdGl2ZXMsZS5jb250ZXh0KSxjPXVyKHQuZGF0YS5kaXJlY3RpdmVzLHQuY29udGV4dCksdT1bXSxsPVtdO2ZvcihuIGluIGMpcj1zW25dLGk9Y1tuXSxyPyhpLm9sZFZhbHVlPXIudmFsdWUsaS5vbGRBcmc9ci5hcmcsZnIoaSwidXBkYXRlIix0LGUpLGkuZGVmJiZpLmRlZi5jb21wb25lbnRVcGRhdGVkJiZsLnB1c2goaSkpOihmcihpLCJiaW5kIix0LGUpLGkuZGVmJiZpLmRlZi5pbnNlcnRlZCYmdS5wdXNoKGkpKTtpZih1Lmxlbmd0aCl7dmFyIGY9ZnVuY3Rpb24oKXtmb3IodmFyIG49MDtuPHUubGVuZ3RoO24rKylmcih1W25dLCJpbnNlcnRlZCIsdCxlKX07bz9pdCh0LCJpbnNlcnQiLGYpOmYoKX1sLmxlbmd0aCYmaXQodCwicG9zdHBhdGNoIixmdW5jdGlvbigpe2Zvcih2YXIgbj0wO248bC5sZW5ndGg7bisrKWZyKGxbbl0sImNvbXBvbmVudFVwZGF0ZWQiLHQsZSl9KTtpZighbylmb3IobiBpbiBzKWNbbl18fGZyKHNbbl0sInVuYmluZCIsZSxlLGEpfShlLHQpfXZhciBjcj1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIHVyKGUsdCl7dmFyIG4scixpPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoIWUpcmV0dXJuIGk7Zm9yKG49MDtuPGUubGVuZ3RoO24rKykocj1lW25dKS5tb2RpZmllcnN8fChyLm1vZGlmaWVycz1jciksaVtscihyKV09cixyLmRlZj1MZSh0LiRvcHRpb25zLCJkaXJlY3RpdmVzIixyLm5hbWUpO3JldHVybiBpfWZ1bmN0aW9uIGxyKGUpe3JldHVybiBlLnJhd05hbWV8fGUubmFtZSsiLiIrT2JqZWN0LmtleXMoZS5tb2RpZmllcnN8fHt9KS5qb2luKCIuIil9ZnVuY3Rpb24gZnIoZSx0LG4scixpKXt2YXIgbz1lLmRlZiYmZS5kZWZbdF07aWYobyl0cnl7byhuLmVsbSxlLG4scixpKX1jYXRjaChyKXtSZShyLG4uY29udGV4dCwiZGlyZWN0aXZlICIrZS5uYW1lKyIgIit0KyIgaG9vayIpfX12YXIgcHI9W2VyLGFyXTtmdW5jdGlvbiBkcihlLHIpe3ZhciBpPXIuY29tcG9uZW50T3B0aW9ucztpZighKG4oaSkmJiExPT09aS5DdG9yLm9wdGlvbnMuaW5oZXJpdEF0dHJzfHx0KGUuZGF0YS5hdHRycykmJnQoci5kYXRhLmF0dHJzKSkpe3ZhciBvLGEscz1yLmVsbSxjPWUuZGF0YS5hdHRyc3x8e30sdT1yLmRhdGEuYXR0cnN8fHt9O2ZvcihvIGluIG4odS5fX29iX18pJiYodT1yLmRhdGEuYXR0cnM9QSh7fSx1KSksdSlhPXVbb10sY1tvXSE9PWEmJnZyKHMsbyxhKTtmb3IobyBpbihxfHxaKSYmdS52YWx1ZSE9PWMudmFsdWUmJnZyKHMsInZhbHVlIix1LnZhbHVlKSxjKXQodVtvXSkmJihQbihvKT9zLnJlbW92ZUF0dHJpYnV0ZU5TKEZuLFJuKG8pKTpEbihvKXx8cy5yZW1vdmVBdHRyaWJ1dGUobykpfX1mdW5jdGlvbiB2cihlLHQsbil7ZS50YWdOYW1lLmluZGV4T2YoIi0iKT4tMT9ocihlLHQsbik6SW4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGUodCk6KG49ImFsbG93ZnVsbHNjcmVlbiI9PT10JiYiRU1CRUQiPT09ZS50YWdOYW1lPyJ0cnVlIjp0LGUuc2V0QXR0cmlidXRlKHQsbikpOkRuKHQpP2Uuc2V0QXR0cmlidXRlKHQsTW4odCxuKSk6UG4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGVOUyhGbixSbih0KSk6ZS5zZXRBdHRyaWJ1dGVOUyhGbix0LG4pOmhyKGUsdCxuKX1mdW5jdGlvbiBocihlLHQsbil7aWYoSG4obikpZS5yZW1vdmVBdHRyaWJ1dGUodCk7ZWxzZXtpZihxJiYhVyYmIlRFWFRBUkVBIj09PWUudGFnTmFtZSYmInBsYWNlaG9sZGVyIj09PXQmJiIiIT09biYmIWUuX19pZXBoKXt2YXIgcj1mdW5jdGlvbih0KXt0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiaW5wdXQiLHIpfTtlLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IixyKSxlLl9faWVwaD0hMH1lLnNldEF0dHJpYnV0ZSh0LG4pfX12YXIgbXI9e2NyZWF0ZTpkcix1cGRhdGU6ZHJ9O2Z1bmN0aW9uIHlyKGUscil7dmFyIGk9ci5lbG0sbz1yLmRhdGEsYT1lLmRhdGE7aWYoISh0KG8uc3RhdGljQ2xhc3MpJiZ0KG8uY2xhc3MpJiYodChhKXx8dChhLnN0YXRpY0NsYXNzKSYmdChhLmNsYXNzKSkpKXt2YXIgcz1CbihyKSxjPWkuX3RyYW5zaXRpb25DbGFzc2VzO24oYykmJihzPXpuKHMsVm4oYykpKSxzIT09aS5fcHJldkNsYXNzJiYoaS5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKSxpLl9wcmV2Q2xhc3M9cyl9fXZhciBncixfcixiciwkcix3cixDcix4cj17Y3JlYXRlOnlyLHVwZGF0ZTp5cn0sa3I9L1tcdykuK1wtXyRcXV0vO2Z1bmN0aW9uIEFyKGUpe3ZhciB0LG4scixpLG8sYT0hMSxzPSExLGM9ITEsdT0hMSxsPTAsZj0wLHA9MCxkPTA7Zm9yKHI9MDtyPGUubGVuZ3RoO3IrKylpZihuPXQsdD1lLmNoYXJDb2RlQXQociksYSkzOT09PXQmJjkyIT09biYmKGE9ITEpO2Vsc2UgaWYocykzND09PXQmJjkyIT09biYmKHM9ITEpO2Vsc2UgaWYoYyk5Nj09PXQmJjkyIT09biYmKGM9ITEpO2Vsc2UgaWYodSk0Nz09PXQmJjkyIT09biYmKHU9ITEpO2Vsc2UgaWYoMTI0IT09dHx8MTI0PT09ZS5jaGFyQ29kZUF0KHIrMSl8fDEyND09PWUuY2hhckNvZGVBdChyLTEpfHxsfHxmfHxwKXtzd2l0Y2godCl7Y2FzZSAzNDpzPSEwO2JyZWFrO2Nhc2UgMzk6YT0hMDticmVhaztjYXNlIDk2OmM9ITA7YnJlYWs7Y2FzZSA0MDpwKys7YnJlYWs7Y2FzZSA0MTpwLS07YnJlYWs7Y2FzZSA5MTpmKys7YnJlYWs7Y2FzZSA5MzpmLS07YnJlYWs7Y2FzZSAxMjM6bCsrO2JyZWFrO2Nhc2UgMTI1OmwtLX1pZig0Nz09PXQpe2Zvcih2YXIgdj1yLTEsaD12b2lkIDA7dj49MCYmIiAiPT09KGg9ZS5jaGFyQXQodikpO3YtLSk7aCYma3IudGVzdChoKXx8KHU9ITApfX1lbHNlIHZvaWQgMD09PWk/KGQ9cisxLGk9ZS5zbGljZSgwLHIpLnRyaW0oKSk6bSgpO2Z1bmN0aW9uIG0oKXsob3x8KG89W10pKS5wdXNoKGUuc2xpY2UoZCxyKS50cmltKCkpLGQ9cisxfWlmKHZvaWQgMD09PWk/aT1lLnNsaWNlKDAscikudHJpbSgpOjAhPT1kJiZtKCksbylmb3Iocj0wO3I8by5sZW5ndGg7cisrKWk9T3IoaSxvW3JdKTtyZXR1cm4gaX1mdW5jdGlvbiBPcihlLHQpe3ZhciBuPXQuaW5kZXhPZigiKCIpO2lmKG48MClyZXR1cm4nX2YoIicrdCsnIikoJytlKyIpIjt2YXIgcj10LnNsaWNlKDAsbiksaT10LnNsaWNlKG4rMSk7cmV0dXJuJ19mKCInK3IrJyIpKCcrZSsoIikiIT09aT8iLCIraTppKX1mdW5jdGlvbiBTcihlLHQpe2NvbnNvbGUuZXJyb3IoIltWdWUgY29tcGlsZXJdOiAiK2UpfWZ1bmN0aW9uIFRyKGUsdCl7cmV0dXJuIGU/ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbdF19KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KTpbXX1mdW5jdGlvbiBFcihlLHQsbixyLGkpeyhlLnByb3BzfHwoZS5wcm9wcz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24gTnIoZSx0LG4scixpKXsoaT9lLmR5bmFtaWNBdHRyc3x8KGUuZHluYW1pY0F0dHJzPVtdKTplLmF0dHJzfHwoZS5hdHRycz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24ganIoZSx0LG4scil7ZS5hdHRyc01hcFt0XT1uLGUuYXR0cnNMaXN0LnB1c2goUnIoe25hbWU6dCx2YWx1ZTpufSxyKSl9ZnVuY3Rpb24gRHIoZSx0LG4scixpLG8sYSxzKXsoZS5kaXJlY3RpdmVzfHwoZS5kaXJlY3RpdmVzPVtdKSkucHVzaChScih7bmFtZTp0LHJhd05hbWU6bix2YWx1ZTpyLGFyZzppLGlzRHluYW1pY0FyZzpvLG1vZGlmaWVyczphfSxzKSksZS5wbGFpbj0hMX1mdW5jdGlvbiBMcihlLHQsbil7cmV0dXJuIG4/Il9wKCIrdCsnLCInK2UrJyIpJzplK3R9ZnVuY3Rpb24gTXIodCxuLHIsaSxvLGEscyxjKXt2YXIgdTsoaT1pfHxlKS5yaWdodD9jP249IigiK24rIik9PT0nY2xpY2snPydjb250ZXh0bWVudSc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJjb250ZXh0bWVudSIsZGVsZXRlIGkucmlnaHQpOmkubWlkZGxlJiYoYz9uPSIoIituKyIpPT09J2NsaWNrJz8nbW91c2V1cCc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJtb3VzZXVwIikpLGkuY2FwdHVyZSYmKGRlbGV0ZSBpLmNhcHR1cmUsbj1McigiISIsbixjKSksaS5vbmNlJiYoZGVsZXRlIGkub25jZSxuPUxyKCJ+IixuLGMpKSxpLnBhc3NpdmUmJihkZWxldGUgaS5wYXNzaXZlLG49THIoIiYiLG4sYykpLGkubmF0aXZlPyhkZWxldGUgaS5uYXRpdmUsdT10Lm5hdGl2ZUV2ZW50c3x8KHQubmF0aXZlRXZlbnRzPXt9KSk6dT10LmV2ZW50c3x8KHQuZXZlbnRzPXt9KTt2YXIgbD1Scih7dmFsdWU6ci50cmltKCksZHluYW1pYzpjfSxzKTtpIT09ZSYmKGwubW9kaWZpZXJzPWkpO3ZhciBmPXVbbl07QXJyYXkuaXNBcnJheShmKT9vP2YudW5zaGlmdChsKTpmLnB1c2gobCk6dVtuXT1mP28/W2wsZl06W2YsbF06bCx0LnBsYWluPSExfWZ1bmN0aW9uIElyKGUsdCxuKXt2YXIgcj1GcihlLCI6Iit0KXx8RnIoZSwidi1iaW5kOiIrdCk7aWYobnVsbCE9cilyZXR1cm4gQXIocik7aWYoITEhPT1uKXt2YXIgaT1GcihlLHQpO2lmKG51bGwhPWkpcmV0dXJuIEpTT04uc3RyaW5naWZ5KGkpfX1mdW5jdGlvbiBGcihlLHQsbil7dmFyIHI7aWYobnVsbCE9KHI9ZS5hdHRyc01hcFt0XSkpZm9yKHZhciBpPWUuYXR0cnNMaXN0LG89MCxhPWkubGVuZ3RoO288YTtvKyspaWYoaVtvXS5uYW1lPT09dCl7aS5zcGxpY2UobywxKTticmVha31yZXR1cm4gbiYmZGVsZXRlIGUuYXR0cnNNYXBbdF0scn1mdW5jdGlvbiBQcihlLHQpe2Zvcih2YXIgbj1lLmF0dHJzTGlzdCxyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1uW3JdO2lmKHQudGVzdChvLm5hbWUpKXJldHVybiBuLnNwbGljZShyLDEpLG99fWZ1bmN0aW9uIFJyKGUsdCl7cmV0dXJuIHQmJihudWxsIT10LnN0YXJ0JiYoZS5zdGFydD10LnN0YXJ0KSxudWxsIT10LmVuZCYmKGUuZW5kPXQuZW5kKSksZX1mdW5jdGlvbiBIcihlLHQsbil7dmFyIHI9bnx8e30saT1yLm51bWJlcixvPSIkJHYiO3IudHJpbSYmKG89Iih0eXBlb2YgJCR2ID09PSAnc3RyaW5nJz8gJCR2LnRyaW0oKTogJCR2KSIpLGkmJihvPSJfbigiK28rIikiKTt2YXIgYT1Ccih0LG8pO2UubW9kZWw9e3ZhbHVlOiIoIit0KyIpIixleHByZXNzaW9uOkpTT04uc3RyaW5naWZ5KHQpLGNhbGxiYWNrOiJmdW5jdGlvbiAoJCR2KSB7IithKyJ9In19ZnVuY3Rpb24gQnIoZSx0KXt2YXIgbj1mdW5jdGlvbihlKXtpZihlPWUudHJpbSgpLGdyPWUubGVuZ3RoLGUuaW5kZXhPZigiWyIpPDB8fGUubGFzdEluZGV4T2YoIl0iKTxnci0xKXJldHVybigkcj1lLmxhc3RJbmRleE9mKCIuIikpPi0xP3tleHA6ZS5zbGljZSgwLCRyKSxrZXk6JyInK2Uuc2xpY2UoJHIrMSkrJyInfTp7ZXhwOmUsa2V5Om51bGx9O19yPWUsJHI9d3I9Q3I9MDtmb3IoOyF6cigpOylWcihicj1VcigpKT9Kcihicik6OTE9PT1iciYmS3IoYnIpO3JldHVybntleHA6ZS5zbGljZSgwLHdyKSxrZXk6ZS5zbGljZSh3cisxLENyKX19KGUpO3JldHVybiBudWxsPT09bi5rZXk/ZSsiPSIrdDoiJHNldCgiK24uZXhwKyIsICIrbi5rZXkrIiwgIit0KyIpIn1mdW5jdGlvbiBVcigpe3JldHVybiBfci5jaGFyQ29kZUF0KCsrJHIpfWZ1bmN0aW9uIHpyKCl7cmV0dXJuICRyPj1ncn1mdW5jdGlvbiBWcihlKXtyZXR1cm4gMzQ9PT1lfHwzOT09PWV9ZnVuY3Rpb24gS3IoZSl7dmFyIHQ9MTtmb3Iod3I9JHI7IXpyKCk7KWlmKFZyKGU9VXIoKSkpSnIoZSk7ZWxzZSBpZig5MT09PWUmJnQrKyw5Mz09PWUmJnQtLSwwPT09dCl7Q3I9JHI7YnJlYWt9fWZ1bmN0aW9uIEpyKGUpe2Zvcih2YXIgdD1lOyF6cigpJiYoZT1VcigpKSE9PXQ7KTt9dmFyIHFyLFdyPSJfX3IiLFpyPSJfX2MiO2Z1bmN0aW9uIEdyKGUsdCxuKXt2YXIgcj1xcjtyZXR1cm4gZnVuY3Rpb24gaSgpe251bGwhPT10LmFwcGx5KG51bGwsYXJndW1lbnRzKSYmUXIoZSxpLG4scil9fXZhciBYcj1WZSYmIShYJiZOdW1iZXIoWFsxXSk8PTUzKTtmdW5jdGlvbiBZcihlLHQsbixyKXtpZihYcil7dmFyIGk9YW4sbz10O3Q9by5fd3JhcHBlcj1mdW5jdGlvbihlKXtpZihlLnRhcmdldD09PWUuY3VycmVudFRhcmdldHx8ZS50aW1lU3RhbXA+PWl8fGUudGltZVN0YW1wPD0wfHxlLnRhcmdldC5vd25lckRvY3VtZW50IT09ZG9jdW1lbnQpcmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX1xci5hZGRFdmVudExpc3RlbmVyKGUsdCxRP3tjYXB0dXJlOm4scGFzc2l2ZTpyfTpuKX1mdW5jdGlvbiBRcihlLHQsbixyKXsocnx8cXIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0Ll93cmFwcGVyfHx0LG4pfWZ1bmN0aW9uIGVpKGUscil7aWYoIXQoZS5kYXRhLm9uKXx8IXQoci5kYXRhLm9uKSl7dmFyIGk9ci5kYXRhLm9ufHx7fSxvPWUuZGF0YS5vbnx8e307cXI9ci5lbG0sZnVuY3Rpb24oZSl7aWYobihlW1dyXSkpe3ZhciB0PXE/ImNoYW5nZSI6ImlucHV0IjtlW3RdPVtdLmNvbmNhdChlW1dyXSxlW3RdfHxbXSksZGVsZXRlIGVbV3JdfW4oZVtacl0pJiYoZS5jaGFuZ2U9W10uY29uY2F0KGVbWnJdLGUuY2hhbmdlfHxbXSksZGVsZXRlIGVbWnJdKX0oaSkscnQoaSxvLFlyLFFyLEdyLHIuY29udGV4dCkscXI9dm9pZCAwfX12YXIgdGksbmk9e2NyZWF0ZTplaSx1cGRhdGU6ZWl9O2Z1bmN0aW9uIHJpKGUscil7aWYoIXQoZS5kYXRhLmRvbVByb3BzKXx8IXQoci5kYXRhLmRvbVByb3BzKSl7dmFyIGksbyxhPXIuZWxtLHM9ZS5kYXRhLmRvbVByb3BzfHx7fSxjPXIuZGF0YS5kb21Qcm9wc3x8e307Zm9yKGkgaW4gbihjLl9fb2JfXykmJihjPXIuZGF0YS5kb21Qcm9wcz1BKHt9LGMpKSxzKWkgaW4gY3x8KGFbaV09IiIpO2ZvcihpIGluIGMpe2lmKG89Y1tpXSwidGV4dENvbnRlbnQiPT09aXx8ImlubmVySFRNTCI9PT1pKXtpZihyLmNoaWxkcmVuJiYoci5jaGlsZHJlbi5sZW5ndGg9MCksbz09PXNbaV0pY29udGludWU7MT09PWEuY2hpbGROb2Rlcy5sZW5ndGgmJmEucmVtb3ZlQ2hpbGQoYS5jaGlsZE5vZGVzWzBdKX1pZigidmFsdWUiPT09aSYmIlBST0dSRVNTIiE9PWEudGFnTmFtZSl7YS5fdmFsdWU9bzt2YXIgdT10KG8pPyIiOlN0cmluZyhvKTtpaShhLHUpJiYoYS52YWx1ZT11KX1lbHNlIGlmKCJpbm5lckhUTUwiPT09aSYmcW4oYS50YWdOYW1lKSYmdChhLmlubmVySFRNTCkpeyh0aT10aXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmlubmVySFRNTD0iPHN2Zz4iK28rIjwvc3ZnPiI7Zm9yKHZhciBsPXRpLmZpcnN0Q2hpbGQ7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7Zm9yKDtsLmZpcnN0Q2hpbGQ7KWEuYXBwZW5kQ2hpbGQobC5maXJzdENoaWxkKX1lbHNlIGlmKG8hPT1zW2ldKXRyeXthW2ldPW99Y2F0Y2goZSl7fX19fWZ1bmN0aW9uIGlpKGUsdCl7cmV0dXJuIWUuY29tcG9zaW5nJiYoIk9QVElPTiI9PT1lLnRhZ05hbWV8fGZ1bmN0aW9uKGUsdCl7dmFyIG49ITA7dHJ5e249ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCE9PWV9Y2F0Y2goZSl7fXJldHVybiBuJiZlLnZhbHVlIT09dH0oZSx0KXx8ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnZhbHVlLGk9ZS5fdk1vZGlmaWVycztpZihuKGkpKXtpZihpLm51bWJlcilyZXR1cm4gZihyKSE9PWYodCk7aWYoaS50cmltKXJldHVybiByLnRyaW0oKSE9PXQudHJpbSgpfXJldHVybiByIT09dH0oZSx0KSl9dmFyIG9pPXtjcmVhdGU6cmksdXBkYXRlOnJpfSxhaT1nKGZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49LzooLispLztyZXR1cm4gZS5zcGxpdCgvOyg/IVteKF0qXCkpL2cpLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHI9ZS5zcGxpdChuKTtyLmxlbmd0aD4xJiYodFtyWzBdLnRyaW0oKV09clsxXS50cmltKCkpfX0pLHR9KTtmdW5jdGlvbiBzaShlKXt2YXIgdD1jaShlLnN0eWxlKTtyZXR1cm4gZS5zdGF0aWNTdHlsZT9BKGUuc3RhdGljU3R5bGUsdCk6dH1mdW5jdGlvbiBjaShlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9PKGUpOiJzdHJpbmciPT10eXBlb2YgZT9haShlKTplfXZhciB1aSxsaT0vXi0tLyxmaT0vXHMqIWltcG9ydGFudCQvLHBpPWZ1bmN0aW9uKGUsdCxuKXtpZihsaS50ZXN0KHQpKWUuc3R5bGUuc2V0UHJvcGVydHkodCxuKTtlbHNlIGlmKGZpLnRlc3QobikpZS5zdHlsZS5zZXRQcm9wZXJ0eShDKHQpLG4ucmVwbGFjZShmaSwiIiksImltcG9ydGFudCIpO2Vsc2V7dmFyIHI9dmkodCk7aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspZS5zdHlsZVtyXT1uW2ldO2Vsc2UgZS5zdHlsZVtyXT1ufX0sZGk9WyJXZWJraXQiLCJNb3oiLCJtcyJdLHZpPWcoZnVuY3Rpb24oZSl7aWYodWk9dWl8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLCJmaWx0ZXIiIT09KGU9YihlKSkmJmUgaW4gdWkpcmV0dXJuIGU7Zm9yKHZhciB0PWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPTA7bjxkaS5sZW5ndGg7bisrKXt2YXIgcj1kaVtuXSt0O2lmKHIgaW4gdWkpcmV0dXJuIHJ9fSk7ZnVuY3Rpb24gaGkoZSxyKXt2YXIgaT1yLmRhdGEsbz1lLmRhdGE7aWYoISh0KGkuc3RhdGljU3R5bGUpJiZ0KGkuc3R5bGUpJiZ0KG8uc3RhdGljU3R5bGUpJiZ0KG8uc3R5bGUpKSl7dmFyIGEscyxjPXIuZWxtLHU9by5zdGF0aWNTdHlsZSxsPW8ubm9ybWFsaXplZFN0eWxlfHxvLnN0eWxlfHx7fSxmPXV8fGwscD1jaShyLmRhdGEuc3R5bGUpfHx7fTtyLmRhdGEubm9ybWFsaXplZFN0eWxlPW4ocC5fX29iX18pP0Eoe30scCk6cDt2YXIgZD1mdW5jdGlvbihlLHQpe3ZhciBuLHI9e307aWYodClmb3IodmFyIGk9ZTtpLmNvbXBvbmVudEluc3RhbmNlOykoaT1pLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSkmJmkuZGF0YSYmKG49c2koaS5kYXRhKSkmJkEocixuKTsobj1zaShlLmRhdGEpKSYmQShyLG4pO2Zvcih2YXIgbz1lO289by5wYXJlbnQ7KW8uZGF0YSYmKG49c2koby5kYXRhKSkmJkEocixuKTtyZXR1cm4gcn0ociwhMCk7Zm9yKHMgaW4gZil0KGRbc10pJiZwaShjLHMsIiIpO2ZvcihzIGluIGQpKGE9ZFtzXSkhPT1mW3NdJiZwaShjLHMsbnVsbD09YT8iIjphKX19dmFyIG1pPXtjcmVhdGU6aGksdXBkYXRlOmhpfSx5aT0vXHMrLztmdW5jdGlvbiBnaShlLHQpe2lmKHQmJih0PXQudHJpbSgpKSlpZihlLmNsYXNzTGlzdCl0LmluZGV4T2YoIiAiKT4tMT90LnNwbGl0KHlpKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmNsYXNzTGlzdC5hZGQodCl9KTplLmNsYXNzTGlzdC5hZGQodCk7ZWxzZXt2YXIgbj0iICIrKGUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIikrIiAiO24uaW5kZXhPZigiICIrdCsiICIpPDAmJmUuc2V0QXR0cmlidXRlKCJjbGFzcyIsKG4rdCkudHJpbSgpKX19ZnVuY3Rpb24gX2koZSx0KXtpZih0JiYodD10LnRyaW0oKSkpaWYoZS5jbGFzc0xpc3QpdC5pbmRleE9mKCIgIik+LTE/dC5zcGxpdCh5aSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5jbGFzc0xpc3QucmVtb3ZlKHQpfSk6ZS5jbGFzc0xpc3QucmVtb3ZlKHQpLGUuY2xhc3NMaXN0Lmxlbmd0aHx8ZS5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIik7ZWxzZXtmb3IodmFyIG49IiAiKyhlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpKyIgIixyPSIgIit0KyIgIjtuLmluZGV4T2Yocik+PTA7KW49bi5yZXBsYWNlKHIsIiAiKTsobj1uLnRyaW0oKSk/ZS5zZXRBdHRyaWJ1dGUoImNsYXNzIixuKTplLnJlbW92ZUF0dHJpYnV0ZSgiY2xhc3MiKX19ZnVuY3Rpb24gYmkoZSl7aWYoZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXt2YXIgdD17fTtyZXR1cm4hMSE9PWUuY3NzJiZBKHQsJGkoZS5uYW1lfHwidiIpKSxBKHQsZSksdH1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/JGkoZSk6dm9pZCAwfX12YXIgJGk9ZyhmdW5jdGlvbihlKXtyZXR1cm57ZW50ZXJDbGFzczplKyItZW50ZXIiLGVudGVyVG9DbGFzczplKyItZW50ZXItdG8iLGVudGVyQWN0aXZlQ2xhc3M6ZSsiLWVudGVyLWFjdGl2ZSIsbGVhdmVDbGFzczplKyItbGVhdmUiLGxlYXZlVG9DbGFzczplKyItbGVhdmUtdG8iLGxlYXZlQWN0aXZlQ2xhc3M6ZSsiLWxlYXZlLWFjdGl2ZSJ9fSksd2k9eiYmIVcsQ2k9InRyYW5zaXRpb24iLHhpPSJhbmltYXRpb24iLGtpPSJ0cmFuc2l0aW9uIixBaT0idHJhbnNpdGlvbmVuZCIsT2k9ImFuaW1hdGlvbiIsU2k9ImFuaW1hdGlvbmVuZCI7d2kmJih2b2lkIDA9PT13aW5kb3cub250cmFuc2l0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kJiYoa2k9IldlYmtpdFRyYW5zaXRpb24iLEFpPSJ3ZWJraXRUcmFuc2l0aW9uRW5kIiksdm9pZCAwPT09d2luZG93Lm9uYW5pbWF0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQmJihPaT0iV2Via2l0QW5pbWF0aW9uIixTaT0id2Via2l0QW5pbWF0aW9uRW5kIikpO3ZhciBUaT16P3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdyk6c2V0VGltZW91dDpmdW5jdGlvbihlKXtyZXR1cm4gZSgpfTtmdW5jdGlvbiBFaShlKXtUaShmdW5jdGlvbigpe1RpKGUpfSl9ZnVuY3Rpb24gTmkoZSx0KXt2YXIgbj1lLl90cmFuc2l0aW9uQ2xhc3Nlc3x8KGUuX3RyYW5zaXRpb25DbGFzc2VzPVtdKTtuLmluZGV4T2YodCk8MCYmKG4ucHVzaCh0KSxnaShlLHQpKX1mdW5jdGlvbiBqaShlLHQpe2UuX3RyYW5zaXRpb25DbGFzc2VzJiZoKGUuX3RyYW5zaXRpb25DbGFzc2VzLHQpLF9pKGUsdCl9ZnVuY3Rpb24gRGkoZSx0LG4pe3ZhciByPU1pKGUsdCksaT1yLnR5cGUsbz1yLnRpbWVvdXQsYT1yLnByb3BDb3VudDtpZighaSlyZXR1cm4gbigpO3ZhciBzPWk9PT1DaT9BaTpTaSxjPTAsdT1mdW5jdGlvbigpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihzLGwpLG4oKX0sbD1mdW5jdGlvbih0KXt0LnRhcmdldD09PWUmJisrYz49YSYmdSgpfTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YzxhJiZ1KCl9LG8rMSksZS5hZGRFdmVudExpc3RlbmVyKHMsbCl9dmFyIExpPS9cYih0cmFuc2Zvcm18YWxsKSgsfCQpLztmdW5jdGlvbiBNaShlLHQpe3ZhciBuLHI9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSksaT0ocltraSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLG89KHJba2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSxhPUlpKGksbykscz0ocltPaSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLGM9KHJbT2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSx1PUlpKHMsYyksbD0wLGY9MDtyZXR1cm4gdD09PUNpP2E+MCYmKG49Q2ksbD1hLGY9by5sZW5ndGgpOnQ9PT14aT91PjAmJihuPXhpLGw9dSxmPWMubGVuZ3RoKTpmPShuPShsPU1hdGgubWF4KGEsdSkpPjA/YT51P0NpOnhpOm51bGwpP249PT1DaT9vLmxlbmd0aDpjLmxlbmd0aDowLHt0eXBlOm4sdGltZW91dDpsLHByb3BDb3VudDpmLGhhc1RyYW5zZm9ybTpuPT09Q2kmJkxpLnRlc3QocltraSsiUHJvcGVydHkiXSl9fWZ1bmN0aW9uIElpKGUsdCl7Zm9yKDtlLmxlbmd0aDx0Lmxlbmd0aDspZT1lLmNvbmNhdChlKTtyZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCx0Lm1hcChmdW5jdGlvbih0LG4pe3JldHVybiBGaSh0KStGaShlW25dKX0pKX1mdW5jdGlvbiBGaShlKXtyZXR1cm4gMWUzKk51bWJlcihlLnNsaWNlKDAsLTEpLnJlcGxhY2UoIiwiLCIuIikpfWZ1bmN0aW9uIFBpKGUscil7dmFyIGk9ZS5lbG07bihpLl9sZWF2ZUNiKSYmKGkuX2xlYXZlQ2IuY2FuY2VsbGVkPSEwLGkuX2xlYXZlQ2IoKSk7dmFyIGE9YmkoZS5kYXRhLnRyYW5zaXRpb24pO2lmKCF0KGEpJiYhbihpLl9lbnRlckNiKSYmMT09PWkubm9kZVR5cGUpe2Zvcih2YXIgcz1hLmNzcyxjPWEudHlwZSx1PWEuZW50ZXJDbGFzcyxsPWEuZW50ZXJUb0NsYXNzLHA9YS5lbnRlckFjdGl2ZUNsYXNzLGQ9YS5hcHBlYXJDbGFzcyx2PWEuYXBwZWFyVG9DbGFzcyxoPWEuYXBwZWFyQWN0aXZlQ2xhc3MsbT1hLmJlZm9yZUVudGVyLHk9YS5lbnRlcixnPWEuYWZ0ZXJFbnRlcixfPWEuZW50ZXJDYW5jZWxsZWQsYj1hLmJlZm9yZUFwcGVhciwkPWEuYXBwZWFyLHc9YS5hZnRlckFwcGVhcixDPWEuYXBwZWFyQ2FuY2VsbGVkLHg9YS5kdXJhdGlvbixrPVd0LEE9V3QuJHZub2RlO0EmJkEucGFyZW50OylrPUEuY29udGV4dCxBPUEucGFyZW50O3ZhciBPPSFrLl9pc01vdW50ZWR8fCFlLmlzUm9vdEluc2VydDtpZighT3x8JHx8IiI9PT0kKXt2YXIgUz1PJiZkP2Q6dSxUPU8mJmg/aDpwLEU9TyYmdj92OmwsTj1PJiZifHxtLGo9TyYmImZ1bmN0aW9uIj09dHlwZW9mICQ/JDp5LEw9TyYmd3x8ZyxNPU8mJkN8fF8sST1mKG8oeCk/eC5lbnRlcjp4KSxGPSExIT09cyYmIVcsUD1CaShqKSxSPWkuX2VudGVyQ2I9RChmdW5jdGlvbigpe0YmJihqaShpLEUpLGppKGksVCkpLFIuY2FuY2VsbGVkPyhGJiZqaShpLFMpLE0mJk0oaSkpOkwmJkwoaSksaS5fZW50ZXJDYj1udWxsfSk7ZS5kYXRhLnNob3d8fGl0KGUsImluc2VydCIsZnVuY3Rpb24oKXt2YXIgdD1pLnBhcmVudE5vZGUsbj10JiZ0Ll9wZW5kaW5nJiZ0Ll9wZW5kaW5nW2Uua2V5XTtuJiZuLnRhZz09PWUudGFnJiZuLmVsbS5fbGVhdmVDYiYmbi5lbG0uX2xlYXZlQ2IoKSxqJiZqKGksUil9KSxOJiZOKGkpLEYmJihOaShpLFMpLE5pKGksVCksRWkoZnVuY3Rpb24oKXtqaShpLFMpLFIuY2FuY2VsbGVkfHwoTmkoaSxFKSxQfHwoSGkoSSk/c2V0VGltZW91dChSLEkpOkRpKGksYyxSKSkpfSkpLGUuZGF0YS5zaG93JiYociYmcigpLGomJmooaSxSKSksRnx8UHx8UigpfX19ZnVuY3Rpb24gUmkoZSxyKXt2YXIgaT1lLmVsbTtuKGkuX2VudGVyQ2IpJiYoaS5fZW50ZXJDYi5jYW5jZWxsZWQ9ITAsaS5fZW50ZXJDYigpKTt2YXIgYT1iaShlLmRhdGEudHJhbnNpdGlvbik7aWYodChhKXx8MSE9PWkubm9kZVR5cGUpcmV0dXJuIHIoKTtpZighbihpLl9sZWF2ZUNiKSl7dmFyIHM9YS5jc3MsYz1hLnR5cGUsdT1hLmxlYXZlQ2xhc3MsbD1hLmxlYXZlVG9DbGFzcyxwPWEubGVhdmVBY3RpdmVDbGFzcyxkPWEuYmVmb3JlTGVhdmUsdj1hLmxlYXZlLGg9YS5hZnRlckxlYXZlLG09YS5sZWF2ZUNhbmNlbGxlZCx5PWEuZGVsYXlMZWF2ZSxnPWEuZHVyYXRpb24sXz0hMSE9PXMmJiFXLGI9QmkodiksJD1mKG8oZyk/Zy5sZWF2ZTpnKSx3PWkuX2xlYXZlQ2I9RChmdW5jdGlvbigpe2kucGFyZW50Tm9kZSYmaS5wYXJlbnROb2RlLl9wZW5kaW5nJiYoaS5wYXJlbnROb2RlLl9wZW5kaW5nW2Uua2V5XT1udWxsKSxfJiYoamkoaSxsKSxqaShpLHApKSx3LmNhbmNlbGxlZD8oXyYmamkoaSx1KSxtJiZtKGkpKToocigpLGgmJmgoaSkpLGkuX2xlYXZlQ2I9bnVsbH0pO3k/eShDKTpDKCl9ZnVuY3Rpb24gQygpe3cuY2FuY2VsbGVkfHwoIWUuZGF0YS5zaG93JiZpLnBhcmVudE5vZGUmJigoaS5wYXJlbnROb2RlLl9wZW5kaW5nfHwoaS5wYXJlbnROb2RlLl9wZW5kaW5nPXt9KSlbZS5rZXldPWUpLGQmJmQoaSksXyYmKE5pKGksdSksTmkoaSxwKSxFaShmdW5jdGlvbigpe2ppKGksdSksdy5jYW5jZWxsZWR8fChOaShpLGwpLGJ8fChIaSgkKT9zZXRUaW1lb3V0KHcsJCk6RGkoaSxjLHcpKSl9KSksdiYmdihpLHcpLF98fGJ8fHcoKSl9fWZ1bmN0aW9uIEhpKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmIWlzTmFOKGUpfWZ1bmN0aW9uIEJpKGUpe2lmKHQoZSkpcmV0dXJuITE7dmFyIHI9ZS5mbnM7cmV0dXJuIG4ocik/QmkoQXJyYXkuaXNBcnJheShyKT9yWzBdOnIpOihlLl9sZW5ndGh8fGUubGVuZ3RoKT4xfWZ1bmN0aW9uIFVpKGUsdCl7ITAhPT10LmRhdGEuc2hvdyYmUGkodCl9dmFyIHppPWZ1bmN0aW9uKGUpe3ZhciBvLGEscz17fSxjPWUubW9kdWxlcyx1PWUubm9kZU9wcztmb3Iobz0wO288cnIubGVuZ3RoOysrbylmb3Ioc1tycltvXV09W10sYT0wO2E8Yy5sZW5ndGg7KythKW4oY1thXVtycltvXV0pJiZzW3JyW29dXS5wdXNoKGNbYV1bcnJbb11dKTtmdW5jdGlvbiBsKGUpe3ZhciB0PXUucGFyZW50Tm9kZShlKTtuKHQpJiZ1LnJlbW92ZUNoaWxkKHQsZSl9ZnVuY3Rpb24gZihlLHQsaSxvLGEsYyxsKXtpZihuKGUuZWxtKSYmbihjKSYmKGU9Y1tsXT1tZShlKSksZS5pc1Jvb3RJbnNlcnQ9IWEsIWZ1bmN0aW9uKGUsdCxpLG8pe3ZhciBhPWUuZGF0YTtpZihuKGEpKXt2YXIgYz1uKGUuY29tcG9uZW50SW5zdGFuY2UpJiZhLmtlZXBBbGl2ZTtpZihuKGE9YS5ob29rKSYmbihhPWEuaW5pdCkmJmEoZSwhMSksbihlLmNvbXBvbmVudEluc3RhbmNlKSlyZXR1cm4gZChlLHQpLHYoaSxlLmVsbSxvKSxyKGMpJiZmdW5jdGlvbihlLHQscixpKXtmb3IodmFyIG8sYT1lO2EuY29tcG9uZW50SW5zdGFuY2U7KWlmKGE9YS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUsbihvPWEuZGF0YSkmJm4obz1vLnRyYW5zaXRpb24pKXtmb3Iobz0wO288cy5hY3RpdmF0ZS5sZW5ndGg7KytvKXMuYWN0aXZhdGVbb10obnIsYSk7dC5wdXNoKGEpO2JyZWFrfXYocixlLmVsbSxpKX0oZSx0LGksbyksITB9fShlLHQsaSxvKSl7dmFyIGY9ZS5kYXRhLHA9ZS5jaGlsZHJlbixtPWUudGFnO24obSk/KGUuZWxtPWUubnM/dS5jcmVhdGVFbGVtZW50TlMoZS5ucyxtKTp1LmNyZWF0ZUVsZW1lbnQobSxlKSxnKGUpLGgoZSxwLHQpLG4oZikmJnkoZSx0KSx2KGksZS5lbG0sbykpOnIoZS5pc0NvbW1lbnQpPyhlLmVsbT11LmNyZWF0ZUNvbW1lbnQoZS50ZXh0KSx2KGksZS5lbG0sbykpOihlLmVsbT11LmNyZWF0ZVRleHROb2RlKGUudGV4dCksdihpLGUuZWxtLG8pKX19ZnVuY3Rpb24gZChlLHQpe24oZS5kYXRhLnBlbmRpbmdJbnNlcnQpJiYodC5wdXNoLmFwcGx5KHQsZS5kYXRhLnBlbmRpbmdJbnNlcnQpLGUuZGF0YS5wZW5kaW5nSW5zZXJ0PW51bGwpLGUuZWxtPWUuY29tcG9uZW50SW5zdGFuY2UuJGVsLG0oZSk/KHkoZSx0KSxnKGUpKToodHIoZSksdC5wdXNoKGUpKX1mdW5jdGlvbiB2KGUsdCxyKXtuKGUpJiYobihyKT91LnBhcmVudE5vZGUocik9PT1lJiZ1Lmluc2VydEJlZm9yZShlLHQscik6dS5hcHBlbmRDaGlsZChlLHQpKX1mdW5jdGlvbiBoKGUsdCxuKXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7KytyKWYodFtyXSxuLGUuZWxtLG51bGwsITAsdCxyKTtlbHNlIGkoZS50ZXh0KSYmdS5hcHBlbmRDaGlsZChlLmVsbSx1LmNyZWF0ZVRleHROb2RlKFN0cmluZyhlLnRleHQpKSl9ZnVuY3Rpb24gbShlKXtmb3IoO2UuY29tcG9uZW50SW5zdGFuY2U7KWU9ZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7cmV0dXJuIG4oZS50YWcpfWZ1bmN0aW9uIHkoZSx0KXtmb3IodmFyIHI9MDtyPHMuY3JlYXRlLmxlbmd0aDsrK3Ipcy5jcmVhdGVbcl0obnIsZSk7bihvPWUuZGF0YS5ob29rKSYmKG4oby5jcmVhdGUpJiZvLmNyZWF0ZShucixlKSxuKG8uaW5zZXJ0KSYmdC5wdXNoKGUpKX1mdW5jdGlvbiBnKGUpe3ZhciB0O2lmKG4odD1lLmZuU2NvcGVJZCkpdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpO2Vsc2UgZm9yKHZhciByPWU7cjspbih0PXIuY29udGV4dCkmJm4odD10LiRvcHRpb25zLl9zY29wZUlkKSYmdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpLHI9ci5wYXJlbnQ7bih0PVd0KSYmdCE9PWUuY29udGV4dCYmdCE9PWUuZm5Db250ZXh0JiZuKHQ9dC4kb3B0aW9ucy5fc2NvcGVJZCkmJnUuc2V0U3R5bGVTY29wZShlLmVsbSx0KX1mdW5jdGlvbiBfKGUsdCxuLHIsaSxvKXtmb3IoO3I8PWk7KytyKWYobltyXSxvLGUsdCwhMSxuLHIpfWZ1bmN0aW9uIGIoZSl7dmFyIHQscixpPWUuZGF0YTtpZihuKGkpKWZvcihuKHQ9aS5ob29rKSYmbih0PXQuZGVzdHJveSkmJnQoZSksdD0wO3Q8cy5kZXN0cm95Lmxlbmd0aDsrK3Qpcy5kZXN0cm95W3RdKGUpO2lmKG4odD1lLmNoaWxkcmVuKSlmb3Iocj0wO3I8ZS5jaGlsZHJlbi5sZW5ndGg7KytyKWIoZS5jaGlsZHJlbltyXSl9ZnVuY3Rpb24gJChlLHQscil7Zm9yKDt0PD1yOysrdCl7dmFyIGk9ZVt0XTtuKGkpJiYobihpLnRhZyk/KHcoaSksYihpKSk6bChpLmVsbSkpfX1mdW5jdGlvbiB3KGUsdCl7aWYobih0KXx8bihlLmRhdGEpKXt2YXIgcixpPXMucmVtb3ZlLmxlbmd0aCsxO2ZvcihuKHQpP3QubGlzdGVuZXJzKz1pOnQ9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKCl7MD09LS1uLmxpc3RlbmVycyYmbChlKX1yZXR1cm4gbi5saXN0ZW5lcnM9dCxufShlLmVsbSxpKSxuKHI9ZS5jb21wb25lbnRJbnN0YW5jZSkmJm4ocj1yLl92bm9kZSkmJm4oci5kYXRhKSYmdyhyLHQpLHI9MDtyPHMucmVtb3ZlLmxlbmd0aDsrK3Ipcy5yZW1vdmVbcl0oZSx0KTtuKHI9ZS5kYXRhLmhvb2spJiZuKHI9ci5yZW1vdmUpP3IoZSx0KTp0KCl9ZWxzZSBsKGUuZWxtKX1mdW5jdGlvbiBDKGUsdCxyLGkpe2Zvcih2YXIgbz1yO288aTtvKyspe3ZhciBhPXRbb107aWYobihhKSYmaXIoZSxhKSlyZXR1cm4gb319ZnVuY3Rpb24geChlLGksbyxhLGMsbCl7aWYoZSE9PWkpe24oaS5lbG0pJiZuKGEpJiYoaT1hW2NdPW1lKGkpKTt2YXIgcD1pLmVsbT1lLmVsbTtpZihyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSluKGkuYXN5bmNGYWN0b3J5LnJlc29sdmVkKT9PKGUuZWxtLGksbyk6aS5pc0FzeW5jUGxhY2Vob2xkZXI9ITA7ZWxzZSBpZihyKGkuaXNTdGF0aWMpJiZyKGUuaXNTdGF0aWMpJiZpLmtleT09PWUua2V5JiYocihpLmlzQ2xvbmVkKXx8cihpLmlzT25jZSkpKWkuY29tcG9uZW50SW5zdGFuY2U9ZS5jb21wb25lbnRJbnN0YW5jZTtlbHNle3ZhciBkLHY9aS5kYXRhO24odikmJm4oZD12Lmhvb2spJiZuKGQ9ZC5wcmVwYXRjaCkmJmQoZSxpKTt2YXIgaD1lLmNoaWxkcmVuLHk9aS5jaGlsZHJlbjtpZihuKHYpJiZtKGkpKXtmb3IoZD0wO2Q8cy51cGRhdGUubGVuZ3RoOysrZClzLnVwZGF0ZVtkXShlLGkpO24oZD12Lmhvb2spJiZuKGQ9ZC51cGRhdGUpJiZkKGUsaSl9dChpLnRleHQpP24oaCkmJm4oeSk/aCE9PXkmJmZ1bmN0aW9uKGUscixpLG8sYSl7Zm9yKHZhciBzLGMsbCxwPTAsZD0wLHY9ci5sZW5ndGgtMSxoPXJbMF0sbT1yW3ZdLHk9aS5sZW5ndGgtMSxnPWlbMF0sYj1pW3ldLHc9IWE7cDw9diYmZDw9eTspdChoKT9oPXJbKytwXTp0KG0pP209clstLXZdOmlyKGgsZyk/KHgoaCxnLG8saSxkKSxoPXJbKytwXSxnPWlbKytkXSk6aXIobSxiKT8oeChtLGIsbyxpLHkpLG09clstLXZdLGI9aVstLXldKTppcihoLGIpPyh4KGgsYixvLGkseSksdyYmdS5pbnNlcnRCZWZvcmUoZSxoLmVsbSx1Lm5leHRTaWJsaW5nKG0uZWxtKSksaD1yWysrcF0sYj1pWy0teV0pOmlyKG0sZyk/KHgobSxnLG8saSxkKSx3JiZ1Lmluc2VydEJlZm9yZShlLG0uZWxtLGguZWxtKSxtPXJbLS12XSxnPWlbKytkXSk6KHQocykmJihzPW9yKHIscCx2KSksdChjPW4oZy5rZXkpP3NbZy5rZXldOkMoZyxyLHAsdikpP2YoZyxvLGUsaC5lbG0sITEsaSxkKTppcihsPXJbY10sZyk/KHgobCxnLG8saSxkKSxyW2NdPXZvaWQgMCx3JiZ1Lmluc2VydEJlZm9yZShlLGwuZWxtLGguZWxtKSk6ZihnLG8sZSxoLmVsbSwhMSxpLGQpLGc9aVsrK2RdKTtwPnY/XyhlLHQoaVt5KzFdKT9udWxsOmlbeSsxXS5lbG0saSxkLHksbyk6ZD55JiYkKHIscCx2KX0ocCxoLHksbyxsKTpuKHkpPyhuKGUudGV4dCkmJnUuc2V0VGV4dENvbnRlbnQocCwiIiksXyhwLG51bGwseSwwLHkubGVuZ3RoLTEsbykpOm4oaCk/JChoLDAsaC5sZW5ndGgtMSk6bihlLnRleHQpJiZ1LnNldFRleHRDb250ZW50KHAsIiIpOmUudGV4dCE9PWkudGV4dCYmdS5zZXRUZXh0Q29udGVudChwLGkudGV4dCksbih2KSYmbihkPXYuaG9vaykmJm4oZD1kLnBvc3RwYXRjaCkmJmQoZSxpKX19fWZ1bmN0aW9uIGsoZSx0LGkpe2lmKHIoaSkmJm4oZS5wYXJlbnQpKWUucGFyZW50LmRhdGEucGVuZGluZ0luc2VydD10O2Vsc2UgZm9yKHZhciBvPTA7bzx0Lmxlbmd0aDsrK28pdFtvXS5kYXRhLmhvb2suaW5zZXJ0KHRbb10pfXZhciBBPXAoImF0dHJzLGNsYXNzLHN0YXRpY0NsYXNzLHN0YXRpY1N0eWxlLGtleSIpO2Z1bmN0aW9uIE8oZSx0LGksbyl7dmFyIGEscz10LnRhZyxjPXQuZGF0YSx1PXQuY2hpbGRyZW47aWYobz1vfHxjJiZjLnByZSx0LmVsbT1lLHIodC5pc0NvbW1lbnQpJiZuKHQuYXN5bmNGYWN0b3J5KSlyZXR1cm4gdC5pc0FzeW5jUGxhY2Vob2xkZXI9ITAsITA7aWYobihjKSYmKG4oYT1jLmhvb2spJiZuKGE9YS5pbml0KSYmYSh0LCEwKSxuKGE9dC5jb21wb25lbnRJbnN0YW5jZSkpKXJldHVybiBkKHQsaSksITA7aWYobihzKSl7aWYobih1KSlpZihlLmhhc0NoaWxkTm9kZXMoKSlpZihuKGE9YykmJm4oYT1hLmRvbVByb3BzKSYmbihhPWEuaW5uZXJIVE1MKSl7aWYoYSE9PWUuaW5uZXJIVE1MKXJldHVybiExfWVsc2V7Zm9yKHZhciBsPSEwLGY9ZS5maXJzdENoaWxkLHA9MDtwPHUubGVuZ3RoO3ArKyl7aWYoIWZ8fCFPKGYsdVtwXSxpLG8pKXtsPSExO2JyZWFrfWY9Zi5uZXh0U2libGluZ31pZighbHx8ZilyZXR1cm4hMX1lbHNlIGgodCx1LGkpO2lmKG4oYykpe3ZhciB2PSExO2Zvcih2YXIgbSBpbiBjKWlmKCFBKG0pKXt2PSEwLHkodCxpKTticmVha30hdiYmYy5jbGFzcyYmZXQoYy5jbGFzcyl9fWVsc2UgZS5kYXRhIT09dC50ZXh0JiYoZS5kYXRhPXQudGV4dCk7cmV0dXJuITB9cmV0dXJuIGZ1bmN0aW9uKGUsaSxvLGEpe2lmKCF0KGkpKXt2YXIgYyxsPSExLHA9W107aWYodChlKSlsPSEwLGYoaSxwKTtlbHNle3ZhciBkPW4oZS5ub2RlVHlwZSk7aWYoIWQmJmlyKGUsaSkpeChlLGkscCxudWxsLG51bGwsYSk7ZWxzZXtpZihkKXtpZigxPT09ZS5ub2RlVHlwZSYmZS5oYXNBdHRyaWJ1dGUoTCkmJihlLnJlbW92ZUF0dHJpYnV0ZShMKSxvPSEwKSxyKG8pJiZPKGUsaSxwKSlyZXR1cm4gayhpLHAsITApLGU7Yz1lLGU9bmV3IHBlKHUudGFnTmFtZShjKS50b0xvd2VyQ2FzZSgpLHt9LFtdLHZvaWQgMCxjKX12YXIgdj1lLmVsbSxoPXUucGFyZW50Tm9kZSh2KTtpZihmKGkscCx2Ll9sZWF2ZUNiP251bGw6aCx1Lm5leHRTaWJsaW5nKHYpKSxuKGkucGFyZW50KSlmb3IodmFyIHk9aS5wYXJlbnQsZz1tKGkpO3k7KXtmb3IodmFyIF89MDtfPHMuZGVzdHJveS5sZW5ndGg7KytfKXMuZGVzdHJveVtfXSh5KTtpZih5LmVsbT1pLmVsbSxnKXtmb3IodmFyIHc9MDt3PHMuY3JlYXRlLmxlbmd0aDsrK3cpcy5jcmVhdGVbd10obnIseSk7dmFyIEM9eS5kYXRhLmhvb2suaW5zZXJ0O2lmKEMubWVyZ2VkKWZvcih2YXIgQT0xO0E8Qy5mbnMubGVuZ3RoO0ErKylDLmZuc1tBXSgpfWVsc2UgdHIoeSk7eT15LnBhcmVudH1uKGgpPyQoW2VdLDAsMCk6bihlLnRhZykmJmIoZSl9fXJldHVybiBrKGkscCxsKSxpLmVsbX1uKGUpJiZiKGUpfX0oe25vZGVPcHM6UW4sbW9kdWxlczpbbXIseHIsbmksb2ksbWksej97Y3JlYXRlOlVpLGFjdGl2YXRlOlVpLHJlbW92ZTpmdW5jdGlvbihlLHQpeyEwIT09ZS5kYXRhLnNob3c/UmkoZSx0KTp0KCl9fTp7fV0uY29uY2F0KHByKX0pO1cmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2UmJmUudm1vZGVsJiZYaShlLCJpbnB1dCIpfSk7dmFyIFZpPXtpbnNlcnRlZDpmdW5jdGlvbihlLHQsbixyKXsic2VsZWN0Ij09PW4udGFnPyhyLmVsbSYmIXIuZWxtLl92T3B0aW9ucz9pdChuLCJwb3N0cGF0Y2giLGZ1bmN0aW9uKCl7VmkuY29tcG9uZW50VXBkYXRlZChlLHQsbil9KTpLaShlLHQsbi5jb250ZXh0KSxlLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpKTooInRleHRhcmVhIj09PW4udGFnfHxYbihlLnR5cGUpKSYmKGUuX3ZNb2RpZmllcnM9dC5tb2RpZmllcnMsdC5tb2RpZmllcnMubGF6eXx8KGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25zdGFydCIsWmkpLGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25lbmQiLEdpKSxlLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsR2kpLFcmJihlLnZtb2RlbD0hMCkpKX0sY29tcG9uZW50VXBkYXRlZDpmdW5jdGlvbihlLHQsbil7aWYoInNlbGVjdCI9PT1uLnRhZyl7S2koZSx0LG4uY29udGV4dCk7dmFyIHI9ZS5fdk9wdGlvbnMsaT1lLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpO2lmKGkuc29tZShmdW5jdGlvbihlLHQpe3JldHVybiFOKGUsclt0XSl9KSkoZS5tdWx0aXBsZT90LnZhbHVlLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIHFpKGUsaSl9KTp0LnZhbHVlIT09dC5vbGRWYWx1ZSYmcWkodC52YWx1ZSxpKSkmJlhpKGUsImNoYW5nZSIpfX19O2Z1bmN0aW9uIEtpKGUsdCxuKXtKaShlLHQsbiksKHF8fFopJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7SmkoZSx0LG4pfSwwKX1mdW5jdGlvbiBKaShlLHQsbil7dmFyIHI9dC52YWx1ZSxpPWUubXVsdGlwbGU7aWYoIWl8fEFycmF5LmlzQXJyYXkocikpe2Zvcih2YXIgbyxhLHM9MCxjPWUub3B0aW9ucy5sZW5ndGg7czxjO3MrKylpZihhPWUub3B0aW9uc1tzXSxpKW89aihyLFdpKGEpKT4tMSxhLnNlbGVjdGVkIT09byYmKGEuc2VsZWN0ZWQ9byk7ZWxzZSBpZihOKFdpKGEpLHIpKXJldHVybiB2b2lkKGUuc2VsZWN0ZWRJbmRleCE9PXMmJihlLnNlbGVjdGVkSW5kZXg9cykpO2l8fChlLnNlbGVjdGVkSW5kZXg9LTEpfX1mdW5jdGlvbiBxaShlLHQpe3JldHVybiB0LmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiFOKHQsZSl9KX1mdW5jdGlvbiBXaShlKXtyZXR1cm4iX3ZhbHVlImluIGU/ZS5fdmFsdWU6ZS52YWx1ZX1mdW5jdGlvbiBaaShlKXtlLnRhcmdldC5jb21wb3Npbmc9ITB9ZnVuY3Rpb24gR2koZSl7ZS50YXJnZXQuY29tcG9zaW5nJiYoZS50YXJnZXQuY29tcG9zaW5nPSExLFhpKGUudGFyZ2V0LCJpbnB1dCIpKX1mdW5jdGlvbiBYaShlLHQpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7bi5pbml0RXZlbnQodCwhMCwhMCksZS5kaXNwYXRjaEV2ZW50KG4pfWZ1bmN0aW9uIFlpKGUpe3JldHVybiFlLmNvbXBvbmVudEluc3RhbmNlfHxlLmRhdGEmJmUuZGF0YS50cmFuc2l0aW9uP2U6WWkoZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpfXZhciBRaT17bW9kZWw6Vmksc2hvdzp7YmluZDpmdW5jdGlvbihlLHQsbil7dmFyIHI9dC52YWx1ZSxpPShuPVlpKG4pKS5kYXRhJiZuLmRhdGEudHJhbnNpdGlvbixvPWUuX192T3JpZ2luYWxEaXNwbGF5PSJub25lIj09PWUuc3R5bGUuZGlzcGxheT8iIjplLnN0eWxlLmRpc3BsYXk7ciYmaT8obi5kYXRhLnNob3c9ITAsUGkobixmdW5jdGlvbigpe2Uuc3R5bGUuZGlzcGxheT1vfSkpOmUuc3R5bGUuZGlzcGxheT1yP286Im5vbmUifSx1cGRhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQudmFsdWU7IXIhPSF0Lm9sZFZhbHVlJiYoKG49WWkobikpLmRhdGEmJm4uZGF0YS50cmFuc2l0aW9uPyhuLmRhdGEuc2hvdz0hMCxyP1BpKG4sZnVuY3Rpb24oKXtlLnN0eWxlLmRpc3BsYXk9ZS5fX3ZPcmlnaW5hbERpc3BsYXl9KTpSaShuLGZ1bmN0aW9uKCl7ZS5zdHlsZS5kaXNwbGF5PSJub25lIn0pKTplLnN0eWxlLmRpc3BsYXk9cj9lLl9fdk9yaWdpbmFsRGlzcGxheToibm9uZSIpfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0LG4scixpKXtpfHwoZS5zdHlsZS5kaXNwbGF5PWUuX192T3JpZ2luYWxEaXNwbGF5KX19fSxlbz17bmFtZTpTdHJpbmcsYXBwZWFyOkJvb2xlYW4sY3NzOkJvb2xlYW4sbW9kZTpTdHJpbmcsdHlwZTpTdHJpbmcsZW50ZXJDbGFzczpTdHJpbmcsbGVhdmVDbGFzczpTdHJpbmcsZW50ZXJUb0NsYXNzOlN0cmluZyxsZWF2ZVRvQ2xhc3M6U3RyaW5nLGVudGVyQWN0aXZlQ2xhc3M6U3RyaW5nLGxlYXZlQWN0aXZlQ2xhc3M6U3RyaW5nLGFwcGVhckNsYXNzOlN0cmluZyxhcHBlYXJBY3RpdmVDbGFzczpTdHJpbmcsYXBwZWFyVG9DbGFzczpTdHJpbmcsZHVyYXRpb246W051bWJlcixTdHJpbmcsT2JqZWN0XX07ZnVuY3Rpb24gdG8oZSl7dmFyIHQ9ZSYmZS5jb21wb25lbnRPcHRpb25zO3JldHVybiB0JiZ0LkN0b3Iub3B0aW9ucy5hYnN0cmFjdD90byh6dCh0LmNoaWxkcmVuKSk6ZX1mdW5jdGlvbiBubyhlKXt2YXIgdD17fSxuPWUuJG9wdGlvbnM7Zm9yKHZhciByIGluIG4ucHJvcHNEYXRhKXRbcl09ZVtyXTt2YXIgaT1uLl9wYXJlbnRMaXN0ZW5lcnM7Zm9yKHZhciBvIGluIGkpdFtiKG8pXT1pW29dO3JldHVybiB0fWZ1bmN0aW9uIHJvKGUsdCl7aWYoL1xkLWtlZXAtYWxpdmUkLy50ZXN0KHQudGFnKSlyZXR1cm4gZSgia2VlcC1hbGl2ZSIse3Byb3BzOnQuY29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGF9KX12YXIgaW89ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnfHxVdChlKX0sb289ZnVuY3Rpb24oZSl7cmV0dXJuInNob3ciPT09ZS5uYW1lfSxhbz17bmFtZToidHJhbnNpdGlvbiIscHJvcHM6ZW8sYWJzdHJhY3Q6ITAscmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLiRzbG90cy5kZWZhdWx0O2lmKG4mJihuPW4uZmlsdGVyKGlvKSkubGVuZ3RoKXt2YXIgcj10aGlzLm1vZGUsbz1uWzBdO2lmKGZ1bmN0aW9uKGUpe2Zvcig7ZT1lLnBhcmVudDspaWYoZS5kYXRhLnRyYW5zaXRpb24pcmV0dXJuITB9KHRoaXMuJHZub2RlKSlyZXR1cm4gbzt2YXIgYT10byhvKTtpZighYSlyZXR1cm4gbztpZih0aGlzLl9sZWF2aW5nKXJldHVybiBybyhlLG8pO3ZhciBzPSJfX3RyYW5zaXRpb24tIit0aGlzLl91aWQrIi0iO2Eua2V5PW51bGw9PWEua2V5P2EuaXNDb21tZW50P3MrImNvbW1lbnQiOnMrYS50YWc6aShhLmtleSk/MD09PVN0cmluZyhhLmtleSkuaW5kZXhPZihzKT9hLmtleTpzK2Eua2V5OmEua2V5O3ZhciBjPShhLmRhdGF8fChhLmRhdGE9e30pKS50cmFuc2l0aW9uPW5vKHRoaXMpLHU9dGhpcy5fdm5vZGUsbD10byh1KTtpZihhLmRhdGEuZGlyZWN0aXZlcyYmYS5kYXRhLmRpcmVjdGl2ZXMuc29tZShvbykmJihhLmRhdGEuc2hvdz0hMCksbCYmbC5kYXRhJiYhZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5rZXk9PT1lLmtleSYmdC50YWc9PT1lLnRhZ30oYSxsKSYmIVV0KGwpJiYoIWwuY29tcG9uZW50SW5zdGFuY2V8fCFsLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZS5pc0NvbW1lbnQpKXt2YXIgZj1sLmRhdGEudHJhbnNpdGlvbj1BKHt9LGMpO2lmKCJvdXQtaW4iPT09cilyZXR1cm4gdGhpcy5fbGVhdmluZz0hMCxpdChmLCJhZnRlckxlYXZlIixmdW5jdGlvbigpe3QuX2xlYXZpbmc9ITEsdC4kZm9yY2VVcGRhdGUoKX0pLHJvKGUsbyk7aWYoImluLW91dCI9PT1yKXtpZihVdChhKSlyZXR1cm4gdTt2YXIgcCxkPWZ1bmN0aW9uKCl7cCgpfTtpdChjLCJhZnRlckVudGVyIixkKSxpdChjLCJlbnRlckNhbmNlbGxlZCIsZCksaXQoZiwiZGVsYXlMZWF2ZSIsZnVuY3Rpb24oZSl7cD1lfSl9fXJldHVybiBvfX19LHNvPUEoe3RhZzpTdHJpbmcsbW92ZUNsYXNzOlN0cmluZ30sZW8pO2Z1bmN0aW9uIGNvKGUpe2UuZWxtLl9tb3ZlQ2ImJmUuZWxtLl9tb3ZlQ2IoKSxlLmVsbS5fZW50ZXJDYiYmZS5lbG0uX2VudGVyQ2IoKX1mdW5jdGlvbiB1byhlKXtlLmRhdGEubmV3UG9zPWUuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWZ1bmN0aW9uIGxvKGUpe3ZhciB0PWUuZGF0YS5wb3Msbj1lLmRhdGEubmV3UG9zLHI9dC5sZWZ0LW4ubGVmdCxpPXQudG9wLW4udG9wO2lmKHJ8fGkpe2UuZGF0YS5tb3ZlZD0hMDt2YXIgbz1lLmVsbS5zdHlsZTtvLnRyYW5zZm9ybT1vLldlYmtpdFRyYW5zZm9ybT0idHJhbnNsYXRlKCIrcisicHgsIitpKyJweCkiLG8udHJhbnNpdGlvbkR1cmF0aW9uPSIwcyJ9fWRlbGV0ZSBzby5tb2RlO3ZhciBmbz17VHJhbnNpdGlvbjphbyxUcmFuc2l0aW9uR3JvdXA6e3Byb3BzOnNvLGJlZm9yZU1vdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX3VwZGF0ZTt0aGlzLl91cGRhdGU9ZnVuY3Rpb24obixyKXt2YXIgaT1adChlKTtlLl9fcGF0Y2hfXyhlLl92bm9kZSxlLmtlcHQsITEsITApLGUuX3Zub2RlPWUua2VwdCxpKCksdC5jYWxsKGUsbixyKX19LHJlbmRlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50YWd8fHRoaXMuJHZub2RlLmRhdGEudGFnfHwic3BhbiIsbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGhpcy5wcmV2Q2hpbGRyZW49dGhpcy5jaGlsZHJlbixpPXRoaXMuJHNsb3RzLmRlZmF1bHR8fFtdLG89dGhpcy5jaGlsZHJlbj1bXSxhPW5vKHRoaXMpLHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGM9aVtzXTtjLnRhZyYmbnVsbCE9Yy5rZXkmJjAhPT1TdHJpbmcoYy5rZXkpLmluZGV4T2YoIl9fdmxpc3QiKSYmKG8ucHVzaChjKSxuW2Mua2V5XT1jLChjLmRhdGF8fChjLmRhdGE9e30pKS50cmFuc2l0aW9uPWEpfWlmKHIpe2Zvcih2YXIgdT1bXSxsPVtdLGY9MDtmPHIubGVuZ3RoO2YrKyl7dmFyIHA9cltmXTtwLmRhdGEudHJhbnNpdGlvbj1hLHAuZGF0YS5wb3M9cC5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbltwLmtleV0/dS5wdXNoKHApOmwucHVzaChwKX10aGlzLmtlcHQ9ZSh0LG51bGwsdSksdGhpcy5yZW1vdmVkPWx9cmV0dXJuIGUodCxudWxsLG8pfSx1cGRhdGVkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcmV2Q2hpbGRyZW4sdD10aGlzLm1vdmVDbGFzc3x8KHRoaXMubmFtZXx8InYiKSsiLW1vdmUiO2UubGVuZ3RoJiZ0aGlzLmhhc01vdmUoZVswXS5lbG0sdCkmJihlLmZvckVhY2goY28pLGUuZm9yRWFjaCh1byksZS5mb3JFYWNoKGxvKSx0aGlzLl9yZWZsb3c9ZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQsZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5tb3ZlZCl7dmFyIG49ZS5lbG0scj1uLnN0eWxlO05pKG4sdCksci50cmFuc2Zvcm09ci5XZWJraXRUcmFuc2Zvcm09ci50cmFuc2l0aW9uRHVyYXRpb249IiIsbi5hZGRFdmVudExpc3RlbmVyKEFpLG4uX21vdmVDYj1mdW5jdGlvbiBlKHIpe3ImJnIudGFyZ2V0IT09bnx8ciYmIS90cmFuc2Zvcm0kLy50ZXN0KHIucHJvcGVydHlOYW1lKXx8KG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihBaSxlKSxuLl9tb3ZlQ2I9bnVsbCxqaShuLHQpKX0pfX0pKX0sbWV0aG9kczp7aGFzTW92ZTpmdW5jdGlvbihlLHQpe2lmKCF3aSlyZXR1cm4hMTtpZih0aGlzLl9oYXNNb3ZlKXJldHVybiB0aGlzLl9oYXNNb3ZlO3ZhciBuPWUuY2xvbmVOb2RlKCk7ZS5fdHJhbnNpdGlvbkNsYXNzZXMmJmUuX3RyYW5zaXRpb25DbGFzc2VzLmZvckVhY2goZnVuY3Rpb24oZSl7X2kobixlKX0pLGdpKG4sdCksbi5zdHlsZS5kaXNwbGF5PSJub25lIix0aGlzLiRlbC5hcHBlbmRDaGlsZChuKTt2YXIgcj1NaShuKTtyZXR1cm4gdGhpcy4kZWwucmVtb3ZlQ2hpbGQobiksdGhpcy5faGFzTW92ZT1yLmhhc1RyYW5zZm9ybX19fX07d24uY29uZmlnLm11c3RVc2VQcm9wPWpuLHduLmNvbmZpZy5pc1Jlc2VydmVkVGFnPVduLHduLmNvbmZpZy5pc1Jlc2VydmVkQXR0cj1Fbix3bi5jb25maWcuZ2V0VGFnTmFtZXNwYWNlPVpuLHduLmNvbmZpZy5pc1Vua25vd25FbGVtZW50PWZ1bmN0aW9uKGUpe2lmKCF6KXJldHVybiEwO2lmKFduKGUpKXJldHVybiExO2lmKGU9ZS50b0xvd2VyQ2FzZSgpLG51bGwhPUduW2VdKXJldHVybiBHbltlXTt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiBlLmluZGV4T2YoIi0iKT4tMT9HbltlXT10LmNvbnN0cnVjdG9yPT09d2luZG93LkhUTUxVbmtub3duRWxlbWVudHx8dC5jb25zdHJ1Y3Rvcj09PXdpbmRvdy5IVE1MRWxlbWVudDpHbltlXT0vSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KHQudG9TdHJpbmcoKSl9LEEod24ub3B0aW9ucy5kaXJlY3RpdmVzLFFpKSxBKHduLm9wdGlvbnMuY29tcG9uZW50cyxmbyksd24ucHJvdG90eXBlLl9fcGF0Y2hfXz16P3ppOlMsd24ucHJvdG90eXBlLiRtb3VudD1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGUuJGVsPXQsZS4kb3B0aW9ucy5yZW5kZXJ8fChlLiRvcHRpb25zLnJlbmRlcj12ZSksWXQoZSwiYmVmb3JlTW91bnQiKSxyPWZ1bmN0aW9uKCl7ZS5fdXBkYXRlKGUuX3JlbmRlcigpLG4pfSxuZXcgZm4oZSxyLFMse2JlZm9yZTpmdW5jdGlvbigpe2UuX2lzTW91bnRlZCYmIWUuX2lzRGVzdHJveWVkJiZZdChlLCJiZWZvcmVVcGRhdGUiKX19LCEwKSxuPSExLG51bGw9PWUuJHZub2RlJiYoZS5faXNNb3VudGVkPSEwLFl0KGUsIm1vdW50ZWQiKSksZX0odGhpcyxlPWUmJno/WW4oZSk6dm9pZCAwLHQpfSx6JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Ri5kZXZ0b29scyYmbmUmJm5lLmVtaXQoImluaXQiLHduKX0sMCk7dmFyIHBvPS9ce1x7KCg/Oi58XHI/XG4pKz8pXH1cfS9nLHZvPS9bLS4qKz9eJHt9KCl8W1xdXC9cXF0vZyxobz1nKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0ucmVwbGFjZSh2bywiXFwkJiIpLG49ZVsxXS5yZXBsYWNlKHZvLCJcXCQmIik7cmV0dXJuIG5ldyBSZWdFeHAodCsiKCg/Oi58XFxuKSs/KSIrbiwiZyIpfSk7dmFyIG1vPXtzdGF0aWNLZXlzOlsic3RhdGljQ2xhc3MiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsImNsYXNzIik7biYmKGUuc3RhdGljQ2xhc3M9SlNPTi5zdHJpbmdpZnkobikpO3ZhciByPUlyKGUsImNsYXNzIiwhMSk7ciYmKGUuY2xhc3NCaW5kaW5nPXIpfSxnZW5EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PSIiO3JldHVybiBlLnN0YXRpY0NsYXNzJiYodCs9InN0YXRpY0NsYXNzOiIrZS5zdGF0aWNDbGFzcysiLCIpLGUuY2xhc3NCaW5kaW5nJiYodCs9ImNsYXNzOiIrZS5jbGFzc0JpbmRpbmcrIiwiKSx0fX07dmFyIHlvLGdvPXtzdGF0aWNLZXlzOlsic3RhdGljU3R5bGUiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsInN0eWxlIik7biYmKGUuc3RhdGljU3R5bGU9SlNPTi5zdHJpbmdpZnkoYWkobikpKTt2YXIgcj1JcihlLCJzdHlsZSIsITEpO3ImJihlLnN0eWxlQmluZGluZz1yKX0sZ2VuRGF0YTpmdW5jdGlvbihlKXt2YXIgdD0iIjtyZXR1cm4gZS5zdGF0aWNTdHlsZSYmKHQrPSJzdGF0aWNTdHlsZToiK2Uuc3RhdGljU3R5bGUrIiwiKSxlLnN0eWxlQmluZGluZyYmKHQrPSJzdHlsZTooIitlLnN0eWxlQmluZGluZysiKSwiKSx0fX0sX289ZnVuY3Rpb24oZSl7cmV0dXJuKHlvPXlvfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWUseW8udGV4dENvbnRlbnR9LGJvPXAoImFyZWEsYmFzZSxicixjb2wsZW1iZWQsZnJhbWUsaHIsaW1nLGlucHV0LGlzaW5kZXgsa2V5Z2VuLGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyIiksJG89cCgiY29sZ3JvdXAsZGQsZHQsbGksb3B0aW9ucyxwLHRkLHRmb290LHRoLHRoZWFkLHRyLHNvdXJjZSIpLHdvPXAoImFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxiYXNlLGJsb2NrcXVvdGUsYm9keSxjYXB0aW9uLGNvbCxjb2xncm91cCxkZCxkZXRhaWxzLGRpYWxvZyxkaXYsZGwsZHQsZmllbGRzZXQsZmlnY2FwdGlvbixmaWd1cmUsZm9vdGVyLGZvcm0saDEsaDIsaDMsaDQsaDUsaDYsaGVhZCxoZWFkZXIsaGdyb3VwLGhyLGh0bWwsbGVnZW5kLGxpLG1lbnVpdGVtLG1ldGEsb3B0Z3JvdXAsb3B0aW9uLHBhcmFtLHJwLHJ0LHNvdXJjZSxzdHlsZSxzdW1tYXJ5LHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRpdGxlLHRyLHRyYWNrIiksQ289L15ccyooW15ccyInPD5cLz1dKykoPzpccyooPSlccyooPzoiKFteIl0qKSIrfCcoW14nXSopJyt8KFteXHMiJz08PmBdKykpKT8vLHhvPS9eXHMqKCg/OnYtW1x3LV0rOnxAfDp8IylcW1tePV0rXF1bXlxzIic8PlwvPV0qKSg/OlxzKig9KVxzKig/OiIoW14iXSopIit8JyhbXiddKiknK3woW15ccyInPTw+YF0rKSkpPy8sa289IlthLXpBLVpfXVtcXC1cXC4wLTlfYS16QS1aIitQLnNvdXJjZSsiXSoiLEFvPSIoKD86IitrbysiXFw6KT8iK2tvKyIpIixPbz1uZXcgUmVnRXhwKCJePCIrQW8pLFNvPS9eXHMqKFwvPyk+LyxUbz1uZXcgUmVnRXhwKCJePFxcLyIrQW8rIltePl0qPiIpLEVvPS9ePCFET0NUWVBFIFtePl0rPi9pLE5vPS9ePCFcLS0vLGpvPS9ePCFcWy8sRG89cCgic2NyaXB0LHN0eWxlLHRleHRhcmVhIiwhMCksTG89e30sTW89eyImbHQ7IjoiPCIsIiZndDsiOiI+IiwiJnF1b3Q7IjonIicsIiZhbXA7IjoiJiIsIiYjMTA7IjoiXG4iLCImIzk7IjoiXHQiLCImIzM5OyI6IicifSxJbz0vJig/Omx0fGd0fHF1b3R8YW1wfCMzOSk7L2csRm89LyYoPzpsdHxndHxxdW90fGFtcHwjMzl8IzEwfCM5KTsvZyxQbz1wKCJwcmUsdGV4dGFyZWEiLCEwKSxSbz1mdW5jdGlvbihlLHQpe3JldHVybiBlJiZQbyhlKSYmIlxuIj09PXRbMF19O2Z1bmN0aW9uIEhvKGUsdCl7dmFyIG49dD9GbzpJbztyZXR1cm4gZS5yZXBsYWNlKG4sZnVuY3Rpb24oZSl7cmV0dXJuIE1vW2VdfSl9dmFyIEJvLFVvLHpvLFZvLEtvLEpvLHFvLFdvLFpvPS9eQHxedi1vbjovLEdvPS9edi18XkB8Xjp8XiMvLFhvPS8oW1xzXFNdKj8pXHMrKD86aW58b2YpXHMrKFtcc1xTXSopLyxZbz0vLChbXixcfVxdXSopKD86LChbXixcfVxdXSopKT8kLyxRbz0vXlwofFwpJC9nLGVhPS9eXFsuKlxdJC8sdGE9LzooLiopJC8sbmE9L146fF5cLnxedi1iaW5kOi8scmE9L1wuW14uXF1dKyg/PVteXF1dKiQpL2csaWE9L152LXNsb3QoOnwkKXxeIy8sb2E9L1tcclxuXS8sYWE9L1xzKy9nLHNhPWcoX28pLGNhPSJfZW1wdHlfIjtmdW5jdGlvbiB1YShlLHQsbil7cmV0dXJue3R5cGU6MSx0YWc6ZSxhdHRyc0xpc3Q6dCxhdHRyc01hcDptYSh0KSxyYXdBdHRyc01hcDp7fSxwYXJlbnQ6bixjaGlsZHJlbjpbXX19ZnVuY3Rpb24gbGEoZSx0KXtCbz10Lndhcm58fFNyLEpvPXQuaXNQcmVUYWd8fFQscW89dC5tdXN0VXNlUHJvcHx8VCxXbz10LmdldFRhZ05hbWVzcGFjZXx8VDt0LmlzUmVzZXJ2ZWRUYWc7em89VHIodC5tb2R1bGVzLCJ0cmFuc2Zvcm1Ob2RlIiksVm89VHIodC5tb2R1bGVzLCJwcmVUcmFuc2Zvcm1Ob2RlIiksS289VHIodC5tb2R1bGVzLCJwb3N0VHJhbnNmb3JtTm9kZSIpLFVvPXQuZGVsaW1pdGVyczt2YXIgbixyLGk9W10sbz0hMSE9PXQucHJlc2VydmVXaGl0ZXNwYWNlLGE9dC53aGl0ZXNwYWNlLHM9ITEsYz0hMTtmdW5jdGlvbiB1KGUpe2lmKGwoZSksc3x8ZS5wcm9jZXNzZWR8fChlPWZhKGUsdCkpLGkubGVuZ3RofHxlPT09bnx8bi5pZiYmKGUuZWxzZWlmfHxlLmVsc2UpJiZkYShuLHtleHA6ZS5lbHNlaWYsYmxvY2s6ZX0pLHImJiFlLmZvcmJpZGRlbilpZihlLmVsc2VpZnx8ZS5lbHNlKWE9ZSwodT1mdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aDtmb3IoO3QtLTspe2lmKDE9PT1lW3RdLnR5cGUpcmV0dXJuIGVbdF07ZS5wb3AoKX19KHIuY2hpbGRyZW4pKSYmdS5pZiYmZGEodSx7ZXhwOmEuZWxzZWlmLGJsb2NrOmF9KTtlbHNle2lmKGUuc2xvdFNjb3BlKXt2YXIgbz1lLnNsb3RUYXJnZXR8fCciZGVmYXVsdCInOyhyLnNjb3BlZFNsb3RzfHwoci5zY29wZWRTbG90cz17fSkpW29dPWV9ci5jaGlsZHJlbi5wdXNoKGUpLGUucGFyZW50PXJ9dmFyIGEsdTtlLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlLnNsb3RTY29wZX0pLGwoZSksZS5wcmUmJihzPSExKSxKbyhlLnRhZykmJihjPSExKTtmb3IodmFyIGY9MDtmPEtvLmxlbmd0aDtmKyspS29bZl0oZSx0KX1mdW5jdGlvbiBsKGUpe2lmKCFjKWZvcih2YXIgdDsodD1lLmNoaWxkcmVuW2UuY2hpbGRyZW4ubGVuZ3RoLTFdKSYmMz09PXQudHlwZSYmIiAiPT09dC50ZXh0OyllLmNoaWxkcmVuLnBvcCgpfXJldHVybiBmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyLGk9W10sbz10LmV4cGVjdEhUTUwsYT10LmlzVW5hcnlUYWd8fFQscz10LmNhbkJlTGVmdE9wZW5UYWd8fFQsYz0wO2U7KXtpZihuPWUsciYmRG8ocikpe3ZhciB1PTAsbD1yLnRvTG93ZXJDYXNlKCksZj1Mb1tsXXx8KExvW2xdPW5ldyBSZWdFeHAoIihbXFxzXFxTXSo/KSg8LyIrbCsiW14+XSo+KSIsImkiKSkscD1lLnJlcGxhY2UoZixmdW5jdGlvbihlLG4scil7cmV0dXJuIHU9ci5sZW5ndGgsRG8obCl8fCJub3NjcmlwdCI9PT1sfHwobj1uLnJlcGxhY2UoLzwhXC0tKFtcc1xTXSo/KS0tPi9nLCIkMSIpLnJlcGxhY2UoLzwhXFtDREFUQVxbKFtcc1xTXSo/KV1dPi9nLCIkMSIpKSxSbyhsLG4pJiYobj1uLnNsaWNlKDEpKSx0LmNoYXJzJiZ0LmNoYXJzKG4pLCIifSk7Yys9ZS5sZW5ndGgtcC5sZW5ndGgsZT1wLEEobCxjLXUsYyl9ZWxzZXt2YXIgZD1lLmluZGV4T2YoIjwiKTtpZigwPT09ZCl7aWYoTm8udGVzdChlKSl7dmFyIHY9ZS5pbmRleE9mKCItLVx4M2UiKTtpZih2Pj0wKXt0LnNob3VsZEtlZXBDb21tZW50JiZ0LmNvbW1lbnQoZS5zdWJzdHJpbmcoNCx2KSxjLGMrdiszKSxDKHYrMyk7Y29udGludWV9fWlmKGpvLnRlc3QoZSkpe3ZhciBoPWUuaW5kZXhPZigiXT4iKTtpZihoPj0wKXtDKGgrMik7Y29udGludWV9fXZhciBtPWUubWF0Y2goRW8pO2lmKG0pe0MobVswXS5sZW5ndGgpO2NvbnRpbnVlfXZhciB5PWUubWF0Y2goVG8pO2lmKHkpe3ZhciBnPWM7Qyh5WzBdLmxlbmd0aCksQSh5WzFdLGcsYyk7Y29udGludWV9dmFyIF89eCgpO2lmKF8pe2soXyksUm8oXy50YWdOYW1lLGUpJiZDKDEpO2NvbnRpbnVlfX12YXIgYj12b2lkIDAsJD12b2lkIDAsdz12b2lkIDA7aWYoZD49MCl7Zm9yKCQ9ZS5zbGljZShkKTshKFRvLnRlc3QoJCl8fE9vLnRlc3QoJCl8fE5vLnRlc3QoJCl8fGpvLnRlc3QoJCl8fCh3PSQuaW5kZXhPZigiPCIsMSkpPDApOylkKz13LCQ9ZS5zbGljZShkKTtiPWUuc3Vic3RyaW5nKDAsZCl9ZDwwJiYoYj1lKSxiJiZDKGIubGVuZ3RoKSx0LmNoYXJzJiZiJiZ0LmNoYXJzKGIsYy1iLmxlbmd0aCxjKX1pZihlPT09bil7dC5jaGFycyYmdC5jaGFycyhlKTticmVha319ZnVuY3Rpb24gQyh0KXtjKz10LGU9ZS5zdWJzdHJpbmcodCl9ZnVuY3Rpb24geCgpe3ZhciB0PWUubWF0Y2goT28pO2lmKHQpe3ZhciBuLHIsaT17dGFnTmFtZTp0WzFdLGF0dHJzOltdLHN0YXJ0OmN9O2ZvcihDKHRbMF0ubGVuZ3RoKTshKG49ZS5tYXRjaChTbykpJiYocj1lLm1hdGNoKHhvKXx8ZS5tYXRjaChDbykpOylyLnN0YXJ0PWMsQyhyWzBdLmxlbmd0aCksci5lbmQ9YyxpLmF0dHJzLnB1c2gocik7aWYobilyZXR1cm4gaS51bmFyeVNsYXNoPW5bMV0sQyhuWzBdLmxlbmd0aCksaS5lbmQ9YyxpfX1mdW5jdGlvbiBrKGUpe3ZhciBuPWUudGFnTmFtZSxjPWUudW5hcnlTbGFzaDtvJiYoInAiPT09ciYmd28obikmJkEocikscyhuKSYmcj09PW4mJkEobikpO2Zvcih2YXIgdT1hKG4pfHwhIWMsbD1lLmF0dHJzLmxlbmd0aCxmPW5ldyBBcnJheShsKSxwPTA7cDxsO3ArKyl7dmFyIGQ9ZS5hdHRyc1twXSx2PWRbM118fGRbNF18fGRbNV18fCIiLGg9ImEiPT09biYmImhyZWYiPT09ZFsxXT90LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzO2ZbcF09e25hbWU6ZFsxXSx2YWx1ZTpIbyh2LGgpfX11fHwoaS5wdXNoKHt0YWc6bixsb3dlckNhc2VkVGFnOm4udG9Mb3dlckNhc2UoKSxhdHRyczpmLHN0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kfSkscj1uKSx0LnN0YXJ0JiZ0LnN0YXJ0KG4sZix1LGUuc3RhcnQsZS5lbmQpfWZ1bmN0aW9uIEEoZSxuLG8pe3ZhciBhLHM7aWYobnVsbD09biYmKG49YyksbnVsbD09byYmKG89YyksZSlmb3Iocz1lLnRvTG93ZXJDYXNlKCksYT1pLmxlbmd0aC0xO2E+PTAmJmlbYV0ubG93ZXJDYXNlZFRhZyE9PXM7YS0tKTtlbHNlIGE9MDtpZihhPj0wKXtmb3IodmFyIHU9aS5sZW5ndGgtMTt1Pj1hO3UtLSl0LmVuZCYmdC5lbmQoaVt1XS50YWcsbixvKTtpLmxlbmd0aD1hLHI9YSYmaVthLTFdLnRhZ31lbHNlImJyIj09PXM/dC5zdGFydCYmdC5zdGFydChlLFtdLCEwLG4sbyk6InAiPT09cyYmKHQuc3RhcnQmJnQuc3RhcnQoZSxbXSwhMSxuLG8pLHQuZW5kJiZ0LmVuZChlLG4sbykpfUEoKX0oZSx7d2FybjpCbyxleHBlY3RIVE1MOnQuZXhwZWN0SFRNTCxpc1VuYXJ5VGFnOnQuaXNVbmFyeVRhZyxjYW5CZUxlZnRPcGVuVGFnOnQuY2FuQmVMZWZ0T3BlblRhZyxzaG91bGREZWNvZGVOZXdsaW5lczp0LnNob3VsZERlY29kZU5ld2xpbmVzLHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZixzaG91bGRLZWVwQ29tbWVudDp0LmNvbW1lbnRzLG91dHB1dFNvdXJjZVJhbmdlOnQub3V0cHV0U291cmNlUmFuZ2Usc3RhcnQ6ZnVuY3Rpb24oZSxvLGEsbCxmKXt2YXIgcD1yJiZyLm5zfHxXbyhlKTtxJiYic3ZnIj09PXAmJihvPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07eWEudGVzdChyLm5hbWUpfHwoci5uYW1lPXIubmFtZS5yZXBsYWNlKGdhLCIiKSx0LnB1c2gocikpfXJldHVybiB0fShvKSk7dmFyIGQsdj11YShlLG8scik7cCYmKHYubnM9cCksInN0eWxlIiE9PShkPXYpLnRhZyYmKCJzY3JpcHQiIT09ZC50YWd8fGQuYXR0cnNNYXAudHlwZSYmInRleHQvamF2YXNjcmlwdCIhPT1kLmF0dHJzTWFwLnR5cGUpfHx0ZSgpfHwodi5mb3JiaWRkZW49ITApO2Zvcih2YXIgaD0wO2g8Vm8ubGVuZ3RoO2grKyl2PVZvW2hdKHYsdCl8fHY7c3x8KCFmdW5jdGlvbihlKXtudWxsIT1GcihlLCJ2LXByZSIpJiYoZS5wcmU9ITApfSh2KSx2LnByZSYmKHM9ITApKSxKbyh2LnRhZykmJihjPSEwKSxzP2Z1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cnNMaXN0LG49dC5sZW5ndGg7aWYobilmb3IodmFyIHI9ZS5hdHRycz1uZXcgQXJyYXkobiksaT0wO2k8bjtpKyspcltpXT17bmFtZTp0W2ldLm5hbWUsdmFsdWU6SlNPTi5zdHJpbmdpZnkodFtpXS52YWx1ZSl9LG51bGwhPXRbaV0uc3RhcnQmJihyW2ldLnN0YXJ0PXRbaV0uc3RhcnQscltpXS5lbmQ9dFtpXS5lbmQpO2Vsc2UgZS5wcmV8fChlLnBsYWluPSEwKX0odik6di5wcm9jZXNzZWR8fChwYSh2KSxmdW5jdGlvbihlKXt2YXIgdD1GcihlLCJ2LWlmIik7aWYodCllLmlmPXQsZGEoZSx7ZXhwOnQsYmxvY2s6ZX0pO2Vsc2V7bnVsbCE9RnIoZSwidi1lbHNlIikmJihlLmVsc2U9ITApO3ZhciBuPUZyKGUsInYtZWxzZS1pZiIpO24mJihlLmVsc2VpZj1uKX19KHYpLGZ1bmN0aW9uKGUpe251bGwhPUZyKGUsInYtb25jZSIpJiYoZS5vbmNlPSEwKX0odikpLG58fChuPXYpLGE/dSh2KToocj12LGkucHVzaCh2KSl9LGVuZDpmdW5jdGlvbihlLHQsbil7dmFyIG89aVtpLmxlbmd0aC0xXTtpLmxlbmd0aC09MSxyPWlbaS5sZW5ndGgtMV0sdShvKX0sY2hhcnM6ZnVuY3Rpb24oZSx0LG4pe2lmKHImJighcXx8InRleHRhcmVhIiE9PXIudGFnfHxyLmF0dHJzTWFwLnBsYWNlaG9sZGVyIT09ZSkpe3ZhciBpLHUsbCxmPXIuY2hpbGRyZW47aWYoZT1jfHxlLnRyaW0oKT8ic2NyaXB0Ij09PShpPXIpLnRhZ3x8InN0eWxlIj09PWkudGFnP2U6c2EoZSk6Zi5sZW5ndGg/YT8iY29uZGVuc2UiPT09YSYmb2EudGVzdChlKT8iIjoiICI6bz8iICI6IiI6IiIpY3x8ImNvbmRlbnNlIiE9PWF8fChlPWUucmVwbGFjZShhYSwiICIpKSwhcyYmIiAiIT09ZSYmKHU9ZnVuY3Rpb24oZSx0KXt2YXIgbj10P2hvKHQpOnBvO2lmKG4udGVzdChlKSl7Zm9yKHZhciByLGksbyxhPVtdLHM9W10sYz1uLmxhc3RJbmRleD0wO3I9bi5leGVjKGUpOyl7KGk9ci5pbmRleCk+YyYmKHMucHVzaChvPWUuc2xpY2UoYyxpKSksYS5wdXNoKEpTT04uc3RyaW5naWZ5KG8pKSk7dmFyIHU9QXIoclsxXS50cmltKCkpO2EucHVzaCgiX3MoIit1KyIpIikscy5wdXNoKHsiQGJpbmRpbmciOnV9KSxjPWkrclswXS5sZW5ndGh9cmV0dXJuIGM8ZS5sZW5ndGgmJihzLnB1c2gobz1lLnNsaWNlKGMpKSxhLnB1c2goSlNPTi5zdHJpbmdpZnkobykpKSx7ZXhwcmVzc2lvbjphLmpvaW4oIisiKSx0b2tlbnM6c319fShlLFVvKSk/bD17dHlwZToyLGV4cHJlc3Npb246dS5leHByZXNzaW9uLHRva2Vuczp1LnRva2Vucyx0ZXh0OmV9OiIgIj09PWUmJmYubGVuZ3RoJiYiICI9PT1mW2YubGVuZ3RoLTFdLnRleHR8fChsPXt0eXBlOjMsdGV4dDplfSksbCYmZi5wdXNoKGwpfX0sY29tbWVudDpmdW5jdGlvbihlLHQsbil7aWYocil7dmFyIGk9e3R5cGU6Myx0ZXh0OmUsaXNDb21tZW50OiEwfTtyLmNoaWxkcmVuLnB1c2goaSl9fX0pLG59ZnVuY3Rpb24gZmEoZSx0KXt2YXIgbixyOyhyPUlyKG49ZSwia2V5IikpJiYobi5rZXk9ciksZS5wbGFpbj0hZS5rZXkmJiFlLnNjb3BlZFNsb3RzJiYhZS5hdHRyc0xpc3QubGVuZ3RoLGZ1bmN0aW9uKGUpe3ZhciB0PUlyKGUsInJlZiIpO3QmJihlLnJlZj10LGUucmVmSW5Gb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtmb3IoO3Q7KXtpZih2b2lkIDAhPT10LmZvcilyZXR1cm4hMDt0PXQucGFyZW50fXJldHVybiExfShlKSl9KGUpLGZ1bmN0aW9uKGUpe3ZhciB0OyJ0ZW1wbGF0ZSI9PT1lLnRhZz8odD1GcihlLCJzY29wZSIpLGUuc2xvdFNjb3BlPXR8fEZyKGUsInNsb3Qtc2NvcGUiKSk6KHQ9RnIoZSwic2xvdC1zY29wZSIpKSYmKGUuc2xvdFNjb3BlPXQpO3ZhciBuPUlyKGUsInNsb3QiKTtuJiYoZS5zbG90VGFyZ2V0PSciIic9PT1uPyciZGVmYXVsdCInOm4sZS5zbG90VGFyZ2V0RHluYW1pYz0hKCFlLmF0dHJzTWFwWyI6c2xvdCJdJiYhZS5hdHRyc01hcFsidi1iaW5kOnNsb3QiXSksInRlbXBsYXRlIj09PWUudGFnfHxlLnNsb3RTY29wZXx8TnIoZSwic2xvdCIsbixmdW5jdGlvbihlLHQpe3JldHVybiBlLnJhd0F0dHJzTWFwWyI6Iit0XXx8ZS5yYXdBdHRyc01hcFsidi1iaW5kOiIrdF18fGUucmF3QXR0cnNNYXBbdF19KGUsInNsb3QiKSkpO2lmKCJ0ZW1wbGF0ZSI9PT1lLnRhZyl7dmFyIHI9UHIoZSxpYSk7aWYocil7dmFyIGk9dmEociksbz1pLm5hbWUsYT1pLmR5bmFtaWM7ZS5zbG90VGFyZ2V0PW8sZS5zbG90VGFyZ2V0RHluYW1pYz1hLGUuc2xvdFNjb3BlPXIudmFsdWV8fGNhfX1lbHNle3ZhciBzPVByKGUsaWEpO2lmKHMpe3ZhciBjPWUuc2NvcGVkU2xvdHN8fChlLnNjb3BlZFNsb3RzPXt9KSx1PXZhKHMpLGw9dS5uYW1lLGY9dS5keW5hbWljLHA9Y1tsXT11YSgidGVtcGxhdGUiLFtdLGUpO3Auc2xvdFRhcmdldD1sLHAuc2xvdFRhcmdldER5bmFtaWM9ZixwLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe2lmKCFlLnNsb3RTY29wZSlyZXR1cm4gZS5wYXJlbnQ9cCwhMH0pLHAuc2xvdFNjb3BlPXMudmFsdWV8fGNhLGUuY2hpbGRyZW49W10sZS5wbGFpbj0hMX19fShlKSxmdW5jdGlvbihlKXsic2xvdCI9PT1lLnRhZyYmKGUuc2xvdE5hbWU9SXIoZSwibmFtZSIpKX0oZSksZnVuY3Rpb24oZSl7dmFyIHQ7KHQ9SXIoZSwiaXMiKSkmJihlLmNvbXBvbmVudD10KTtudWxsIT1GcihlLCJpbmxpbmUtdGVtcGxhdGUiKSYmKGUuaW5saW5lVGVtcGxhdGU9ITApfShlKTtmb3IodmFyIGk9MDtpPHpvLmxlbmd0aDtpKyspZT16b1tpXShlLHQpfHxlO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscyxjLHU9ZS5hdHRyc0xpc3Q7Zm9yKHQ9MCxuPXUubGVuZ3RoO3Q8bjt0KyspaWYocj1pPXVbdF0ubmFtZSxvPXVbdF0udmFsdWUsR28udGVzdChyKSlpZihlLmhhc0JpbmRpbmdzPSEwLChhPWhhKHIucmVwbGFjZShHbywiIikpKSYmKHI9ci5yZXBsYWNlKHJhLCIiKSksbmEudGVzdChyKSlyPXIucmVwbGFjZShuYSwiIiksbz1BcihvKSwoYz1lYS50ZXN0KHIpKSYmKHI9ci5zbGljZSgxLC0xKSksYSYmKGEucHJvcCYmIWMmJiJpbm5lckh0bWwiPT09KHI9YihyKSkmJihyPSJpbm5lckhUTUwiKSxhLmNhbWVsJiYhYyYmKHI9YihyKSksYS5zeW5jJiYocz1CcihvLCIkZXZlbnQiKSxjP01yKGUsJyJ1cGRhdGU6IisoJytyKyIpIixzLG51bGwsITEsMCx1W3RdLCEwKTooTXIoZSwidXBkYXRlOiIrYihyKSxzLG51bGwsITEsMCx1W3RdKSxDKHIpIT09YihyKSYmTXIoZSwidXBkYXRlOiIrQyhyKSxzLG51bGwsITEsMCx1W3RdKSkpKSxhJiZhLnByb3B8fCFlLmNvbXBvbmVudCYmcW8oZS50YWcsZS5hdHRyc01hcC50eXBlLHIpP0VyKGUscixvLHVbdF0sYyk6TnIoZSxyLG8sdVt0XSxjKTtlbHNlIGlmKFpvLnRlc3Qocikpcj1yLnJlcGxhY2UoWm8sIiIpLChjPWVhLnRlc3QocikpJiYocj1yLnNsaWNlKDEsLTEpKSxNcihlLHIsbyxhLCExLDAsdVt0XSxjKTtlbHNle3ZhciBsPShyPXIucmVwbGFjZShHbywiIikpLm1hdGNoKHRhKSxmPWwmJmxbMV07Yz0hMSxmJiYocj1yLnNsaWNlKDAsLShmLmxlbmd0aCsxKSksZWEudGVzdChmKSYmKGY9Zi5zbGljZSgxLC0xKSxjPSEwKSksRHIoZSxyLGksbyxmLGMsYSx1W3RdKX1lbHNlIE5yKGUscixKU09OLnN0cmluZ2lmeShvKSx1W3RdKSwhZS5jb21wb25lbnQmJiJtdXRlZCI9PT1yJiZxbyhlLnRhZyxlLmF0dHJzTWFwLnR5cGUscikmJkVyKGUsciwidHJ1ZSIsdVt0XSl9KGUpLGV9ZnVuY3Rpb24gcGEoZSl7dmFyIHQ7aWYodD1GcihlLCJ2LWZvciIpKXt2YXIgbj1mdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKFhvKTtpZighdClyZXR1cm47dmFyIG49e307bi5mb3I9dFsyXS50cmltKCk7dmFyIHI9dFsxXS50cmltKCkucmVwbGFjZShRbywiIiksaT1yLm1hdGNoKFlvKTtpPyhuLmFsaWFzPXIucmVwbGFjZShZbywiIikudHJpbSgpLG4uaXRlcmF0b3IxPWlbMV0udHJpbSgpLGlbMl0mJihuLml0ZXJhdG9yMj1pWzJdLnRyaW0oKSkpOm4uYWxpYXM9cjtyZXR1cm4gbn0odCk7biYmQShlLG4pfX1mdW5jdGlvbiBkYShlLHQpe2UuaWZDb25kaXRpb25zfHwoZS5pZkNvbmRpdGlvbnM9W10pLGUuaWZDb25kaXRpb25zLnB1c2godCl9ZnVuY3Rpb24gdmEoZSl7dmFyIHQ9ZS5uYW1lLnJlcGxhY2UoaWEsIiIpO3JldHVybiB0fHwiIyIhPT1lLm5hbWVbMF0mJih0PSJkZWZhdWx0IiksZWEudGVzdCh0KT97bmFtZTp0LnNsaWNlKDEsLTEpLGR5bmFtaWM6ITB9OntuYW1lOiciJyt0KyciJyxkeW5hbWljOiExfX1mdW5jdGlvbiBoYShlKXt2YXIgdD1lLm1hdGNoKHJhKTtpZih0KXt2YXIgbj17fTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe25bZS5zbGljZSgxKV09ITB9KSxufX1mdW5jdGlvbiBtYShlKXtmb3IodmFyIHQ9e30sbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl0W2Vbbl0ubmFtZV09ZVtuXS52YWx1ZTtyZXR1cm4gdH12YXIgeWE9L154bWxuczpOU1xkKy8sZ2E9L15OU1xkKzovO2Z1bmN0aW9uIF9hKGUpe3JldHVybiB1YShlLnRhZyxlLmF0dHJzTGlzdC5zbGljZSgpLGUucGFyZW50KX12YXIgYmE9W21vLGdvLHtwcmVUcmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0Ij09PWUudGFnKXt2YXIgbixyPWUuYXR0cnNNYXA7aWYoIXJbInYtbW9kZWwiXSlyZXR1cm47aWYoKHJbIjp0eXBlIl18fHJbInYtYmluZDp0eXBlIl0pJiYobj1JcihlLCJ0eXBlIikpLHIudHlwZXx8bnx8IXJbInYtYmluZCJdfHwobj0iKCIrclsidi1iaW5kIl0rIikudHlwZSIpLG4pe3ZhciBpPUZyKGUsInYtaWYiLCEwKSxvPWk/IiYmKCIraSsiKSI6IiIsYT1udWxsIT1GcihlLCJ2LWVsc2UiLCEwKSxzPUZyKGUsInYtZWxzZS1pZiIsITApLGM9X2EoZSk7cGEoYyksanIoYywidHlwZSIsImNoZWNrYm94IiksZmEoYyx0KSxjLnByb2Nlc3NlZD0hMCxjLmlmPSIoIituKyIpPT09J2NoZWNrYm94JyIrbyxkYShjLHtleHA6Yy5pZixibG9jazpjfSk7dmFyIHU9X2EoZSk7RnIodSwidi1mb3IiLCEwKSxqcih1LCJ0eXBlIiwicmFkaW8iKSxmYSh1LHQpLGRhKGMse2V4cDoiKCIrbisiKT09PSdyYWRpbyciK28sYmxvY2s6dX0pO3ZhciBsPV9hKGUpO3JldHVybiBGcihsLCJ2LWZvciIsITApLGpyKGwsIjp0eXBlIixuKSxmYShsLHQpLGRhKGMse2V4cDppLGJsb2NrOmx9KSxhP2MuZWxzZT0hMDpzJiYoYy5lbHNlaWY9cyksY319fX1dO3ZhciAkYSx3YSxDYT17ZXhwZWN0SFRNTDohMCxtb2R1bGVzOmJhLGRpcmVjdGl2ZXM6e21vZGVsOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10LnZhbHVlLGk9dC5tb2RpZmllcnMsbz1lLnRhZyxhPWUuYXR0cnNNYXAudHlwZTtpZihlLmNvbXBvbmVudClyZXR1cm4gSHIoZSxyLGkpLCExO2lmKCJzZWxlY3QiPT09bykhZnVuY3Rpb24oZSx0LG4pe3ZhciByPSd2YXIgJCRzZWxlY3RlZFZhbCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsZnVuY3Rpb24obyl7cmV0dXJuIG8uc2VsZWN0ZWR9KS5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9ICJfdmFsdWUiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7cmV0dXJuICcrKG4mJm4ubnVtYmVyPyJfbih2YWwpIjoidmFsIikrIn0pOyI7cj1yKyIgIitCcih0LCIkZXZlbnQudGFyZ2V0Lm11bHRpcGxlID8gJCRzZWxlY3RlZFZhbCA6ICQkc2VsZWN0ZWRWYWxbMF0iKSxNcihlLCJjaGFuZ2UiLHIsbnVsbCwhMCl9KGUscixpKTtlbHNlIGlmKCJpbnB1dCI9PT1vJiYiY2hlY2tib3giPT09YSkhZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4mJm4ubnVtYmVyLGk9SXIoZSwidmFsdWUiKXx8Im51bGwiLG89SXIoZSwidHJ1ZS12YWx1ZSIpfHwidHJ1ZSIsYT1JcihlLCJmYWxzZS12YWx1ZSIpfHwiZmFsc2UiO0VyKGUsImNoZWNrZWQiLCJBcnJheS5pc0FycmF5KCIrdCsiKT9faSgiK3QrIiwiK2krIik+LTEiKygidHJ1ZSI9PT1vPyI6KCIrdCsiKSI6IjpfcSgiK3QrIiwiK28rIikiKSksTXIoZSwiY2hhbmdlIiwidmFyICQkYT0iK3QrIiwkJGVsPSRldmVudC50YXJnZXQsJCRjPSQkZWwuY2hlY2tlZD8oIitvKyIpOigiK2ErIik7aWYoQXJyYXkuaXNBcnJheSgkJGEpKXt2YXIgJCR2PSIrKHI/Il9uKCIraSsiKSI6aSkrIiwkJGk9X2koJCRhLCQkdik7aWYoJCRlbC5jaGVja2VkKXskJGk8MCYmKCIrQnIodCwiJCRhLmNvbmNhdChbJCR2XSkiKSsiKX1lbHNleyQkaT4tMSYmKCIrQnIodCwiJCRhLnNsaWNlKDAsJCRpKS5jb25jYXQoJCRhLnNsaWNlKCQkaSsxKSkiKSsiKX19ZWxzZXsiK0JyKHQsIiQkYyIpKyJ9IixudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW8mJiJyYWRpbyI9PT1hKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9biYmbi5udW1iZXIsaT1JcihlLCJ2YWx1ZSIpfHwibnVsbCI7RXIoZSwiY2hlY2tlZCIsIl9xKCIrdCsiLCIrKGk9cj8iX24oIitpKyIpIjppKSsiKSIpLE1yKGUsImNoYW5nZSIsQnIodCxpKSxudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW98fCJ0ZXh0YXJlYSI9PT1vKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9ZS5hdHRyc01hcC50eXBlLGk9bnx8e30sbz1pLmxhenksYT1pLm51bWJlcixzPWkudHJpbSxjPSFvJiYicmFuZ2UiIT09cix1PW8/ImNoYW5nZSI6InJhbmdlIj09PXI/V3I6ImlucHV0IixsPSIkZXZlbnQudGFyZ2V0LnZhbHVlIjtzJiYobD0iJGV2ZW50LnRhcmdldC52YWx1ZS50cmltKCkiKSxhJiYobD0iX24oIitsKyIpIik7dmFyIGY9QnIodCxsKTtjJiYoZj0iaWYoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpcmV0dXJuOyIrZiksRXIoZSwidmFsdWUiLCIoIit0KyIpIiksTXIoZSx1LGYsbnVsbCwhMCksKHN8fGEpJiZNcihlLCJibHVyIiwiJGZvcmNlVXBkYXRlKCkiKX0oZSxyLGkpO2Vsc2UgaWYoIUYuaXNSZXNlcnZlZFRhZyhvKSlyZXR1cm4gSHIoZSxyLGkpLCExO3JldHVybiEwfSx0ZXh0OmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwidGV4dENvbnRlbnQiLCJfcygiK3QudmFsdWUrIikiLHQpfSxodG1sOmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwiaW5uZXJIVE1MIiwiX3MoIit0LnZhbHVlKyIpIix0KX19LGlzUHJlVGFnOmZ1bmN0aW9uKGUpe3JldHVybiJwcmUiPT09ZX0saXNVbmFyeVRhZzpibyxtdXN0VXNlUHJvcDpqbixjYW5CZUxlZnRPcGVuVGFnOiRvLGlzUmVzZXJ2ZWRUYWc6V24sZ2V0VGFnTmFtZXNwYWNlOlpuLHN0YXRpY0tleXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29uY2F0KHQuc3RhdGljS2V5c3x8W10pfSxbXSkuam9pbigiLCIpfShiYSl9LHhhPWcoZnVuY3Rpb24oZSl7cmV0dXJuIHAoInR5cGUsdGFnLGF0dHJzTGlzdCxhdHRyc01hcCxwbGFpbixwYXJlbnQsY2hpbGRyZW4sYXR0cnMsc3RhcnQsZW5kLHJhd0F0dHJzTWFwIisoZT8iLCIrZToiIikpfSk7ZnVuY3Rpb24ga2EoZSx0KXtlJiYoJGE9eGEodC5zdGF0aWNLZXlzfHwiIiksd2E9dC5pc1Jlc2VydmVkVGFnfHxULGZ1bmN0aW9uIGUodCl7dC5zdGF0aWM9ZnVuY3Rpb24oZSl7aWYoMj09PWUudHlwZSlyZXR1cm4hMTtpZigzPT09ZS50eXBlKXJldHVybiEwO3JldHVybiEoIWUucHJlJiYoZS5oYXNCaW5kaW5nc3x8ZS5pZnx8ZS5mb3J8fGQoZS50YWcpfHwhd2EoZS50YWcpfHxmdW5jdGlvbihlKXtmb3IoO2UucGFyZW50Oyl7aWYoInRlbXBsYXRlIiE9PShlPWUucGFyZW50KS50YWcpcmV0dXJuITE7aWYoZS5mb3IpcmV0dXJuITB9cmV0dXJuITF9KGUpfHwhT2JqZWN0LmtleXMoZSkuZXZlcnkoJGEpKSl9KHQpO2lmKDE9PT10LnR5cGUpe2lmKCF3YSh0LnRhZykmJiJzbG90IiE9PXQudGFnJiZudWxsPT10LmF0dHJzTWFwWyJpbmxpbmUtdGVtcGxhdGUiXSlyZXR1cm47Zm9yKHZhciBuPTAscj10LmNoaWxkcmVuLmxlbmd0aDtuPHI7bisrKXt2YXIgaT10LmNoaWxkcmVuW25dO2UoaSksaS5zdGF0aWN8fCh0LnN0YXRpYz0hMSl9aWYodC5pZkNvbmRpdGlvbnMpZm9yKHZhciBvPTEsYT10LmlmQ29uZGl0aW9ucy5sZW5ndGg7bzxhO28rKyl7dmFyIHM9dC5pZkNvbmRpdGlvbnNbb10uYmxvY2s7ZShzKSxzLnN0YXRpY3x8KHQuc3RhdGljPSExKX19fShlKSxmdW5jdGlvbiBlKHQsbil7aWYoMT09PXQudHlwZSl7aWYoKHQuc3RhdGljfHx0Lm9uY2UpJiYodC5zdGF0aWNJbkZvcj1uKSx0LnN0YXRpYyYmdC5jaGlsZHJlbi5sZW5ndGgmJigxIT09dC5jaGlsZHJlbi5sZW5ndGh8fDMhPT10LmNoaWxkcmVuWzBdLnR5cGUpKXJldHVybiB2b2lkKHQuc3RhdGljUm9vdD0hMCk7aWYodC5zdGF0aWNSb290PSExLHQuY2hpbGRyZW4pZm9yKHZhciByPTAsaT10LmNoaWxkcmVuLmxlbmd0aDtyPGk7cisrKWUodC5jaGlsZHJlbltyXSxufHwhIXQuZm9yKTtpZih0LmlmQ29uZGl0aW9ucylmb3IodmFyIG89MSxhPXQuaWZDb25kaXRpb25zLmxlbmd0aDtvPGE7bysrKWUodC5pZkNvbmRpdGlvbnNbb10uYmxvY2ssbil9fShlLCExKSl9dmFyIEFhPS9eKFtcdyRfXSt8XChbXildKj9cKSlccyo9PnxeZnVuY3Rpb24oPzpccytbXHckXSspP1xzKlwoLyxPYT0vXChbXildKj9cKTsqJC8sU2E9L15bQS1aYS16XyRdW1x3JF0qKD86XC5bQS1aYS16XyRdW1x3JF0qfFxbJ1teJ10qPyddfFxbIlteIl0qPyJdfFxbXGQrXXxcW1tBLVphLXpfJF1bXHckXSpdKSokLyxUYT17ZXNjOjI3LHRhYjo5LGVudGVyOjEzLHNwYWNlOjMyLHVwOjM4LGxlZnQ6MzcscmlnaHQ6MzksZG93bjo0MCxkZWxldGU6WzgsNDZdfSxFYT17ZXNjOlsiRXNjIiwiRXNjYXBlIl0sdGFiOiJUYWIiLGVudGVyOiJFbnRlciIsc3BhY2U6WyIgIiwiU3BhY2ViYXIiXSx1cDpbIlVwIiwiQXJyb3dVcCJdLGxlZnQ6WyJMZWZ0IiwiQXJyb3dMZWZ0Il0scmlnaHQ6WyJSaWdodCIsIkFycm93UmlnaHQiXSxkb3duOlsiRG93biIsIkFycm93RG93biJdLGRlbGV0ZTpbIkJhY2tzcGFjZSIsIkRlbGV0ZSIsIkRlbCJdfSxOYT1mdW5jdGlvbihlKXtyZXR1cm4iaWYoIitlKyIpcmV0dXJuIG51bGw7In0samE9e3N0b3A6IiRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsiLHByZXZlbnQ6IiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyIsc2VsZjpOYSgiJGV2ZW50LnRhcmdldCAhPT0gJGV2ZW50LmN1cnJlbnRUYXJnZXQiKSxjdHJsOk5hKCIhJGV2ZW50LmN0cmxLZXkiKSxzaGlmdDpOYSgiISRldmVudC5zaGlmdEtleSIpLGFsdDpOYSgiISRldmVudC5hbHRLZXkiKSxtZXRhOk5hKCIhJGV2ZW50Lm1ldGFLZXkiKSxsZWZ0Ok5hKCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMCIpLG1pZGRsZTpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDEiKSxyaWdodDpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDIiKX07ZnVuY3Rpb24gRGEoZSx0KXt2YXIgbj10PyJuYXRpdmVPbjoiOiJvbjoiLHI9IiIsaT0iIjtmb3IodmFyIG8gaW4gZSl7dmFyIGE9TGEoZVtvXSk7ZVtvXSYmZVtvXS5keW5hbWljP2krPW8rIiwiK2ErIiwiOnIrPSciJytvKyciOicrYSsiLCJ9cmV0dXJuIHI9InsiK3Iuc2xpY2UoMCwtMSkrIn0iLGk/bisiX2QoIityKyIsWyIraS5zbGljZSgwLC0xKSsiXSkiOm4rcn1mdW5jdGlvbiBMYShlKXtpZighZSlyZXR1cm4iZnVuY3Rpb24oKXt9IjtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiJbIitlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gTGEoZSl9KS5qb2luKCIsIikrIl0iO3ZhciB0PVNhLnRlc3QoZS52YWx1ZSksbj1BYS50ZXN0KGUudmFsdWUpLHI9U2EudGVzdChlLnZhbHVlLnJlcGxhY2UoT2EsIiIpKTtpZihlLm1vZGlmaWVycyl7dmFyIGk9IiIsbz0iIixhPVtdO2Zvcih2YXIgcyBpbiBlLm1vZGlmaWVycylpZihqYVtzXSlvKz1qYVtzXSxUYVtzXSYmYS5wdXNoKHMpO2Vsc2UgaWYoImV4YWN0Ij09PXMpe3ZhciBjPWUubW9kaWZpZXJzO28rPU5hKFsiY3RybCIsInNoaWZ0IiwiYWx0IiwibWV0YSJdLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hY1tlXX0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iJGV2ZW50LiIrZSsiS2V5In0pLmpvaW4oInx8IikpfWVsc2UgYS5wdXNoKHMpO3JldHVybiBhLmxlbmd0aCYmKGkrPWZ1bmN0aW9uKGUpe3JldHVybiJpZighJGV2ZW50LnR5cGUuaW5kZXhPZigna2V5JykmJiIrZS5tYXAoTWEpLmpvaW4oIiYmIikrIilyZXR1cm4gbnVsbDsifShhKSksbyYmKGkrPW8pLCJmdW5jdGlvbigkZXZlbnQpeyIraSsodD8icmV0dXJuICIrZS52YWx1ZSsiKCRldmVudCkiOm4/InJldHVybiAoIitlLnZhbHVlKyIpKCRldmVudCkiOnI/InJldHVybiAiK2UudmFsdWU6ZS52YWx1ZSkrIn0ifXJldHVybiB0fHxuP2UudmFsdWU6ImZ1bmN0aW9uKCRldmVudCl7Iisocj8icmV0dXJuICIrZS52YWx1ZTplLnZhbHVlKSsifSJ9ZnVuY3Rpb24gTWEoZSl7dmFyIHQ9cGFyc2VJbnQoZSwxMCk7aWYodClyZXR1cm4iJGV2ZW50LmtleUNvZGUhPT0iK3Q7dmFyIG49VGFbZV0scj1FYVtlXTtyZXR1cm4iX2soJGV2ZW50LmtleUNvZGUsIitKU09OLnN0cmluZ2lmeShlKSsiLCIrSlNPTi5zdHJpbmdpZnkobikrIiwkZXZlbnQua2V5LCIrSlNPTi5zdHJpbmdpZnkocikrIikifXZhciBJYT17b246ZnVuY3Rpb24oZSx0KXtlLndyYXBMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIl9nKCIrZSsiLCIrdC52YWx1ZSsiKSJ9fSxiaW5kOmZ1bmN0aW9uKGUsdCl7ZS53cmFwRGF0YT1mdW5jdGlvbihuKXtyZXR1cm4iX2IoIituKyIsJyIrZS50YWcrIicsIit0LnZhbHVlKyIsIisodC5tb2RpZmllcnMmJnQubW9kaWZpZXJzLnByb3A/InRydWUiOiJmYWxzZSIpKyh0Lm1vZGlmaWVycyYmdC5tb2RpZmllcnMuc3luYz8iLHRydWUiOiIiKSsiKSJ9fSxjbG9hazpTfSxGYT1mdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZSx0aGlzLndhcm49ZS53YXJufHxTcix0aGlzLnRyYW5zZm9ybXM9VHIoZS5tb2R1bGVzLCJ0cmFuc2Zvcm1Db2RlIiksdGhpcy5kYXRhR2VuRm5zPVRyKGUubW9kdWxlcywiZ2VuRGF0YSIpLHRoaXMuZGlyZWN0aXZlcz1BKEEoe30sSWEpLGUuZGlyZWN0aXZlcyk7dmFyIHQ9ZS5pc1Jlc2VydmVkVGFnfHxUO3RoaXMubWF5YmVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuISFlLmNvbXBvbmVudHx8IXQoZS50YWcpfSx0aGlzLm9uY2VJZD0wLHRoaXMuc3RhdGljUmVuZGVyRm5zPVtdLHRoaXMucHJlPSExfTtmdW5jdGlvbiBQYShlLHQpe3ZhciBuPW5ldyBGYSh0KTtyZXR1cm57cmVuZGVyOiJ3aXRoKHRoaXMpe3JldHVybiAiKyhlP1JhKGUsbik6J19jKCJkaXYiKScpKyJ9IixzdGF0aWNSZW5kZXJGbnM6bi5zdGF0aWNSZW5kZXJGbnN9fWZ1bmN0aW9uIFJhKGUsdCl7aWYoZS5wYXJlbnQmJihlLnByZT1lLnByZXx8ZS5wYXJlbnQucHJlKSxlLnN0YXRpY1Jvb3QmJiFlLnN0YXRpY1Byb2Nlc3NlZClyZXR1cm4gSGEoZSx0KTtpZihlLm9uY2UmJiFlLm9uY2VQcm9jZXNzZWQpcmV0dXJuIEJhKGUsdCk7aWYoZS5mb3ImJiFlLmZvclByb2Nlc3NlZClyZXR1cm4gemEoZSx0KTtpZihlLmlmJiYhZS5pZlByb2Nlc3NlZClyZXR1cm4gVWEoZSx0KTtpZigidGVtcGxhdGUiIT09ZS50YWd8fGUuc2xvdFRhcmdldHx8dC5wcmUpe2lmKCJzbG90Ij09PWUudGFnKXJldHVybiBmdW5jdGlvbihlLHQpe3ZhciBuPWUuc2xvdE5hbWV8fCciZGVmYXVsdCInLHI9cWEoZSx0KSxpPSJfdCgiK24rKHI/IiwiK3I6IiIpLG89ZS5hdHRyc3x8ZS5keW5hbWljQXR0cnM/R2EoKGUuYXR0cnN8fFtdKS5jb25jYXQoZS5keW5hbWljQXR0cnN8fFtdKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6YihlLm5hbWUpLHZhbHVlOmUudmFsdWUsZHluYW1pYzplLmR5bmFtaWN9fSkpOm51bGwsYT1lLmF0dHJzTWFwWyJ2LWJpbmQiXTshbyYmIWF8fHJ8fChpKz0iLG51bGwiKTtvJiYoaSs9IiwiK28pO2EmJihpKz0obz8iIjoiLG51bGwiKSsiLCIrYSk7cmV0dXJuIGkrIikifShlLHQpO3ZhciBuO2lmKGUuY29tcG9uZW50KW49ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQuaW5saW5lVGVtcGxhdGU/bnVsbDpxYSh0LG4sITApO3JldHVybiJfYygiK2UrIiwiK1ZhKHQsbikrKHI/IiwiK3I6IiIpKyIpIn0oZS5jb21wb25lbnQsZSx0KTtlbHNle3ZhciByOyghZS5wbGFpbnx8ZS5wcmUmJnQubWF5YmVDb21wb25lbnQoZSkpJiYocj1WYShlLHQpKTt2YXIgaT1lLmlubGluZVRlbXBsYXRlP251bGw6cWEoZSx0LCEwKTtuPSJfYygnIitlLnRhZysiJyIrKHI/IiwiK3I6IiIpKyhpPyIsIitpOiIiKSsiKSJ9Zm9yKHZhciBvPTA7bzx0LnRyYW5zZm9ybXMubGVuZ3RoO28rKyluPXQudHJhbnNmb3Jtc1tvXShlLG4pO3JldHVybiBufXJldHVybiBxYShlLHQpfHwidm9pZCAwIn1mdW5jdGlvbiBIYShlLHQpe2Uuc3RhdGljUHJvY2Vzc2VkPSEwO3ZhciBuPXQucHJlO3JldHVybiBlLnByZSYmKHQucHJlPWUucHJlKSx0LnN0YXRpY1JlbmRlckZucy5wdXNoKCJ3aXRoKHRoaXMpe3JldHVybiAiK1JhKGUsdCkrIn0iKSx0LnByZT1uLCJfbSgiKyh0LnN0YXRpY1JlbmRlckZucy5sZW5ndGgtMSkrKGUuc3RhdGljSW5Gb3I/Iix0cnVlIjoiIikrIikifWZ1bmN0aW9uIEJhKGUsdCl7aWYoZS5vbmNlUHJvY2Vzc2VkPSEwLGUuaWYmJiFlLmlmUHJvY2Vzc2VkKXJldHVybiBVYShlLHQpO2lmKGUuc3RhdGljSW5Gb3Ipe2Zvcih2YXIgbj0iIixyPWUucGFyZW50O3I7KXtpZihyLmZvcil7bj1yLmtleTticmVha31yPXIucGFyZW50fXJldHVybiBuPyJfbygiK1JhKGUsdCkrIiwiK3Qub25jZUlkKysrIiwiK24rIikiOlJhKGUsdCl9cmV0dXJuIEhhKGUsdCl9ZnVuY3Rpb24gVWEoZSx0LG4scil7cmV0dXJuIGUuaWZQcm9jZXNzZWQ9ITAsZnVuY3Rpb24gZSh0LG4scixpKXtpZighdC5sZW5ndGgpcmV0dXJuIGl8fCJfZSgpIjt2YXIgbz10LnNoaWZ0KCk7cmV0dXJuIG8uZXhwPyIoIitvLmV4cCsiKT8iK2Eoby5ibG9jaykrIjoiK2UodCxuLHIsaSk6IiIrYShvLmJsb2NrKTtmdW5jdGlvbiBhKGUpe3JldHVybiByP3IoZSxuKTplLm9uY2U/QmEoZSxuKTpSYShlLG4pfX0oZS5pZkNvbmRpdGlvbnMuc2xpY2UoKSx0LG4scil9ZnVuY3Rpb24gemEoZSx0LG4scil7dmFyIGk9ZS5mb3Isbz1lLmFsaWFzLGE9ZS5pdGVyYXRvcjE/IiwiK2UuaXRlcmF0b3IxOiIiLHM9ZS5pdGVyYXRvcjI/IiwiK2UuaXRlcmF0b3IyOiIiO3JldHVybiBlLmZvclByb2Nlc3NlZD0hMCwocnx8Il9sIikrIigoIitpKyIpLGZ1bmN0aW9uKCIrbythK3MrIil7cmV0dXJuICIrKG58fFJhKShlLHQpKyJ9KSJ9ZnVuY3Rpb24gVmEoZSx0KXt2YXIgbj0ieyIscj1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZGlyZWN0aXZlcztpZighbilyZXR1cm47dmFyIHIsaSxvLGEscz0iZGlyZWN0aXZlczpbIixjPSExO2ZvcihyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXtvPW5bcl0sYT0hMDt2YXIgdT10LmRpcmVjdGl2ZXNbby5uYW1lXTt1JiYoYT0hIXUoZSxvLHQud2FybikpLGEmJihjPSEwLHMrPSd7bmFtZToiJytvLm5hbWUrJyIscmF3TmFtZToiJytvLnJhd05hbWUrJyInKyhvLnZhbHVlPyIsdmFsdWU6KCIrby52YWx1ZSsiKSxleHByZXNzaW9uOiIrSlNPTi5zdHJpbmdpZnkoby52YWx1ZSk6IiIpKyhvLmFyZz8iLGFyZzoiKyhvLmlzRHluYW1pY0FyZz9vLmFyZzonIicrby5hcmcrJyInKToiIikrKG8ubW9kaWZpZXJzPyIsbW9kaWZpZXJzOiIrSlNPTi5zdHJpbmdpZnkoby5tb2RpZmllcnMpOiIiKSsifSwiKX1pZihjKXJldHVybiBzLnNsaWNlKDAsLTEpKyJdIn0oZSx0KTtyJiYobis9cisiLCIpLGUua2V5JiYobis9ImtleToiK2Uua2V5KyIsIiksZS5yZWYmJihuKz0icmVmOiIrZS5yZWYrIiwiKSxlLnJlZkluRm9yJiYobis9InJlZkluRm9yOnRydWUsIiksZS5wcmUmJihuKz0icHJlOnRydWUsIiksZS5jb21wb25lbnQmJihuKz0ndGFnOiInK2UudGFnKyciLCcpO2Zvcih2YXIgaT0wO2k8dC5kYXRhR2VuRm5zLmxlbmd0aDtpKyspbis9dC5kYXRhR2VuRm5zW2ldKGUpO2lmKGUuYXR0cnMmJihuKz0iYXR0cnM6IitHYShlLmF0dHJzKSsiLCIpLGUucHJvcHMmJihuKz0iZG9tUHJvcHM6IitHYShlLnByb3BzKSsiLCIpLGUuZXZlbnRzJiYobis9RGEoZS5ldmVudHMsITEpKyIsIiksZS5uYXRpdmVFdmVudHMmJihuKz1EYShlLm5hdGl2ZUV2ZW50cywhMCkrIiwiKSxlLnNsb3RUYXJnZXQmJiFlLnNsb3RTY29wZSYmKG4rPSJzbG90OiIrZS5zbG90VGFyZ2V0KyIsIiksZS5zY29wZWRTbG90cyYmKG4rPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lLmZvcnx8T2JqZWN0LmtleXModCkuc29tZShmdW5jdGlvbihlKXt2YXIgbj10W2VdO3JldHVybiBuLnNsb3RUYXJnZXREeW5hbWljfHxuLmlmfHxuLmZvcnx8S2Eobil9KSxpPSEhZS5pZjtpZighcilmb3IodmFyIG89ZS5wYXJlbnQ7bzspe2lmKG8uc2xvdFNjb3BlJiZvLnNsb3RTY29wZSE9PWNhfHxvLmZvcil7cj0hMDticmVha31vLmlmJiYoaT0hMCksbz1vLnBhcmVudH12YXIgYT1PYmplY3Qua2V5cyh0KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIEphKHRbZV0sbil9KS5qb2luKCIsIik7cmV0dXJuInNjb3BlZFNsb3RzOl91KFsiK2ErIl0iKyhyPyIsbnVsbCx0cnVlIjoiIikrKCFyJiZpPyIsbnVsbCxmYWxzZSwiK2Z1bmN0aW9uKGUpe3ZhciB0PTUzODEsbj1lLmxlbmd0aDtmb3IoO247KXQ9MzMqdF5lLmNoYXJDb2RlQXQoLS1uKTtyZXR1cm4gdD4+PjB9KGEpOiIiKSsiKSJ9KGUsZS5zY29wZWRTbG90cyx0KSsiLCIpLGUubW9kZWwmJihuKz0ibW9kZWw6e3ZhbHVlOiIrZS5tb2RlbC52YWx1ZSsiLGNhbGxiYWNrOiIrZS5tb2RlbC5jYWxsYmFjaysiLGV4cHJlc3Npb246IitlLm1vZGVsLmV4cHJlc3Npb24rIn0sIiksZS5pbmxpbmVUZW1wbGF0ZSl7dmFyIG89ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNoaWxkcmVuWzBdO2lmKG4mJjE9PT1uLnR5cGUpe3ZhciByPVBhKG4sdC5vcHRpb25zKTtyZXR1cm4iaW5saW5lVGVtcGxhdGU6e3JlbmRlcjpmdW5jdGlvbigpeyIrci5yZW5kZXIrIn0sc3RhdGljUmVuZGVyRm5zOlsiK3Iuc3RhdGljUmVuZGVyRm5zLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24oKXsiK2UrIn0ifSkuam9pbigiLCIpKyJdfSJ9fShlLHQpO28mJihuKz1vKyIsIil9cmV0dXJuIG49bi5yZXBsYWNlKC8sJC8sIiIpKyJ9IixlLmR5bmFtaWNBdHRycyYmKG49Il9iKCIrbisnLCInK2UudGFnKyciLCcrR2EoZS5keW5hbWljQXR0cnMpKyIpIiksZS53cmFwRGF0YSYmKG49ZS53cmFwRGF0YShuKSksZS53cmFwTGlzdGVuZXJzJiYobj1lLndyYXBMaXN0ZW5lcnMobikpLG59ZnVuY3Rpb24gS2EoZSl7cmV0dXJuIDE9PT1lLnR5cGUmJigic2xvdCI9PT1lLnRhZ3x8ZS5jaGlsZHJlbi5zb21lKEthKSl9ZnVuY3Rpb24gSmEoZSx0KXt2YXIgbj1lLmF0dHJzTWFwWyJzbG90LXNjb3BlIl07aWYoZS5pZiYmIWUuaWZQcm9jZXNzZWQmJiFuKXJldHVybiBVYShlLHQsSmEsIm51bGwiKTtpZihlLmZvciYmIWUuZm9yUHJvY2Vzc2VkKXJldHVybiB6YShlLHQsSmEpO3ZhciByPWUuc2xvdFNjb3BlPT09Y2E/IiI6U3RyaW5nKGUuc2xvdFNjb3BlKSxpPSJmdW5jdGlvbigiK3IrIil7cmV0dXJuICIrKCJ0ZW1wbGF0ZSI9PT1lLnRhZz9lLmlmJiZuPyIoIitlLmlmKyIpPyIrKHFhKGUsdCl8fCJ1bmRlZmluZWQiKSsiOnVuZGVmaW5lZCI6cWEoZSx0KXx8InVuZGVmaW5lZCI6UmEoZSx0KSkrIn0iLG89cj8iIjoiLHByb3h5OnRydWUiO3JldHVybiJ7a2V5OiIrKGUuc2xvdFRhcmdldHx8JyJkZWZhdWx0IicpKyIsZm46IitpK28rIn0ifWZ1bmN0aW9uIHFhKGUsdCxuLHIsaSl7dmFyIG89ZS5jaGlsZHJlbjtpZihvLmxlbmd0aCl7dmFyIGE9b1swXTtpZigxPT09by5sZW5ndGgmJmEuZm9yJiYidGVtcGxhdGUiIT09YS50YWcmJiJzbG90IiE9PWEudGFnKXt2YXIgcz1uP3QubWF5YmVDb21wb25lbnQoYSk/IiwxIjoiLDAiOiIiO3JldHVybiIiKyhyfHxSYSkoYSx0KStzfXZhciBjPW4/ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBpPWVbcl07aWYoMT09PWkudHlwZSl7aWYoV2EoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiBXYShlLmJsb2NrKX0pKXtuPTI7YnJlYWt9KHQoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiB0KGUuYmxvY2spfSkpJiYobj0xKX19cmV0dXJuIG59KG8sdC5tYXliZUNvbXBvbmVudCk6MCx1PWl8fFphO3JldHVybiJbIitvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdShlLHQpfSkuam9pbigiLCIpKyJdIisoYz8iLCIrYzoiIil9fWZ1bmN0aW9uIFdhKGUpe3JldHVybiB2b2lkIDAhPT1lLmZvcnx8InRlbXBsYXRlIj09PWUudGFnfHwic2xvdCI9PT1lLnRhZ31mdW5jdGlvbiBaYShlLHQpe3JldHVybiAxPT09ZS50eXBlP1JhKGUsdCk6Mz09PWUudHlwZSYmZS5pc0NvbW1lbnQ/KHI9ZSwiX2UoIitKU09OLnN0cmluZ2lmeShyLnRleHQpKyIpIik6Il92KCIrKDI9PT0obj1lKS50eXBlP24uZXhwcmVzc2lvbjpYYShKU09OLnN0cmluZ2lmeShuLnRleHQpKSkrIikiO3ZhciBuLHJ9ZnVuY3Rpb24gR2EoZSl7Zm9yKHZhciB0PSIiLG49IiIscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT1lW3JdLG89WGEoaS52YWx1ZSk7aS5keW5hbWljP24rPWkubmFtZSsiLCIrbysiLCI6dCs9JyInK2kubmFtZSsnIjonK28rIiwifXJldHVybiB0PSJ7Iit0LnNsaWNlKDAsLTEpKyJ9IixuPyJfZCgiK3QrIixbIituLnNsaWNlKDAsLTEpKyJdKSI6dH1mdW5jdGlvbiBYYShlKXtyZXR1cm4gZS5yZXBsYWNlKC9cdTIwMjgvZywiXFx1MjAyOCIpLnJlcGxhY2UoL1x1MjAyOS9nLCJcXHUyMDI5Iil9bmV3IFJlZ0V4cCgiXFxiIisiZG8saWYsZm9yLGxldCxuZXcsdHJ5LHZhcixjYXNlLGVsc2Usd2l0aCxhd2FpdCxicmVhayxjYXRjaCxjbGFzcyxjb25zdCxzdXBlcix0aHJvdyx3aGlsZSx5aWVsZCxkZWxldGUsZXhwb3J0LGltcG9ydCxyZXR1cm4sc3dpdGNoLGRlZmF1bHQsZXh0ZW5kcyxmaW5hbGx5LGNvbnRpbnVlLGRlYnVnZ2VyLGZ1bmN0aW9uLGFyZ3VtZW50cyIuc3BsaXQoIiwiKS5qb2luKCJcXGJ8XFxiIikrIlxcYiIpO2Z1bmN0aW9uIFlhKGUsdCl7dHJ5e3JldHVybiBuZXcgRnVuY3Rpb24oZSl9Y2F0Y2gobil7cmV0dXJuIHQucHVzaCh7ZXJyOm4sY29kZTplfSksU319ZnVuY3Rpb24gUWEoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obixyLGkpeyhyPUEoe30scikpLndhcm47ZGVsZXRlIHIud2Fybjt2YXIgbz1yLmRlbGltaXRlcnM/U3RyaW5nKHIuZGVsaW1pdGVycykrbjpuO2lmKHRbb10pcmV0dXJuIHRbb107dmFyIGE9ZShuLHIpLHM9e30sYz1bXTtyZXR1cm4gcy5yZW5kZXI9WWEoYS5yZW5kZXIsYykscy5zdGF0aWNSZW5kZXJGbnM9YS5zdGF0aWNSZW5kZXJGbnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBZYShlLGMpfSksdFtvXT1zfX12YXIgZXMsdHMsbnM9KGVzPWZ1bmN0aW9uKGUsdCl7dmFyIG49bGEoZS50cmltKCksdCk7ITEhPT10Lm9wdGltaXplJiZrYShuLHQpO3ZhciByPVBhKG4sdCk7cmV0dXJue2FzdDpuLHJlbmRlcjpyLnJlbmRlcixzdGF0aWNSZW5kZXJGbnM6ci5zdGF0aWNSZW5kZXJGbnN9fSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIHI9T2JqZWN0LmNyZWF0ZShlKSxpPVtdLG89W107aWYobilmb3IodmFyIGEgaW4gbi5tb2R1bGVzJiYoci5tb2R1bGVzPShlLm1vZHVsZXN8fFtdKS5jb25jYXQobi5tb2R1bGVzKSksbi5kaXJlY3RpdmVzJiYoci5kaXJlY3RpdmVzPUEoT2JqZWN0LmNyZWF0ZShlLmRpcmVjdGl2ZXN8fG51bGwpLG4uZGlyZWN0aXZlcykpLG4pIm1vZHVsZXMiIT09YSYmImRpcmVjdGl2ZXMiIT09YSYmKHJbYV09blthXSk7ci53YXJuPWZ1bmN0aW9uKGUsdCxuKXsobj9vOmkpLnB1c2goZSl9O3ZhciBzPWVzKHQudHJpbSgpLHIpO3JldHVybiBzLmVycm9ycz1pLHMudGlwcz1vLHN9cmV0dXJue2NvbXBpbGU6dCxjb21waWxlVG9GdW5jdGlvbnM6UWEodCl9fSkoQ2EpLHJzPShucy5jb21waWxlLG5zLmNvbXBpbGVUb0Z1bmN0aW9ucyk7ZnVuY3Rpb24gaXMoZSl7cmV0dXJuKHRzPXRzfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWU/JzxhIGhyZWY9IlxuIi8+JzonPGRpdiBhPSJcbiIvPicsdHMuaW5uZXJIVE1MLmluZGV4T2YoIiYjMTA7Iik+MH12YXIgb3M9ISF6JiZpcyghMSksYXM9ISF6JiZpcyghMCksc3M9ZyhmdW5jdGlvbihlKXt2YXIgdD1ZbihlKTtyZXR1cm4gdCYmdC5pbm5lckhUTUx9KSxjcz13bi5wcm90b3R5cGUuJG1vdW50O3JldHVybiB3bi5wcm90b3R5cGUuJG1vdW50PWZ1bmN0aW9uKGUsdCl7aWYoKGU9ZSYmWW4oZSkpPT09ZG9jdW1lbnQuYm9keXx8ZT09PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudClyZXR1cm4gdGhpczt2YXIgbj10aGlzLiRvcHRpb25zO2lmKCFuLnJlbmRlcil7dmFyIHI9bi50ZW1wbGF0ZTtpZihyKWlmKCJzdHJpbmciPT10eXBlb2YgcikiIyI9PT1yLmNoYXJBdCgwKSYmKHI9c3MocikpO2Vsc2V7aWYoIXIubm9kZVR5cGUpcmV0dXJuIHRoaXM7cj1yLmlubmVySFRNTH1lbHNlIGUmJihyPWZ1bmN0aW9uKGUpe2lmKGUub3V0ZXJIVE1MKXJldHVybiBlLm91dGVySFRNTDt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gdC5hcHBlbmRDaGlsZChlLmNsb25lTm9kZSghMCkpLHQuaW5uZXJIVE1MfShlKSk7aWYocil7dmFyIGk9cnMocix7b3V0cHV0U291cmNlUmFuZ2U6ITEsc2hvdWxkRGVjb2RlTmV3bGluZXM6b3Msc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOmFzLGRlbGltaXRlcnM6bi5kZWxpbWl0ZXJzLGNvbW1lbnRzOm4uY29tbWVudHN9LHRoaXMpLG89aS5yZW5kZXIsYT1pLnN0YXRpY1JlbmRlckZucztuLnJlbmRlcj1vLG4uc3RhdGljUmVuZGVyRm5zPWF9fXJldHVybiBjcy5jYWxsKHRoaXMsZSx0KX0sd24uY29tcGlsZT1ycyx3bn0pOw=="},{"meta":{"name":"vue.min.js","url":"https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.min.js","ts":1638677801309,"mimetype":"text/javascript"},"source":"LyohCiAqIFZ1ZS5qcyB2Mi42LjEyCiAqIChjKSAyMDE0LTIwMjAgRXZhbiBZb3UKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgogKi8KIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6KGU9ZXx8c2VsZikuVnVlPXQoKX0odGhpcyxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QuZnJlZXplKHt9KTtmdW5jdGlvbiB0KGUpe3JldHVybiBudWxsPT1lfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIG51bGwhPWV9ZnVuY3Rpb24gcihlKXtyZXR1cm4hMD09PWV9ZnVuY3Rpb24gaShlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV8fCJudW1iZXIiPT10eXBlb2YgZXx8InN5bWJvbCI9PXR5cGVvZiBlfHwiYm9vbGVhbiI9PXR5cGVvZiBlfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIG51bGwhPT1lJiYib2JqZWN0Ij09dHlwZW9mIGV9dmFyIGE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBzKGUpe3JldHVybiJbb2JqZWN0IE9iamVjdF0iPT09YS5jYWxsKGUpfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9cGFyc2VGbG9hdChTdHJpbmcoZSkpO3JldHVybiB0Pj0wJiZNYXRoLmZsb29yKHQpPT09dCYmaXNGaW5pdGUoZSl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gbihlKSYmImZ1bmN0aW9uIj09dHlwZW9mIGUudGhlbiYmImZ1bmN0aW9uIj09dHlwZW9mIGUuY2F0Y2h9ZnVuY3Rpb24gbChlKXtyZXR1cm4gbnVsbD09ZT8iIjpBcnJheS5pc0FycmF5KGUpfHxzKGUpJiZlLnRvU3RyaW5nPT09YT9KU09OLnN0cmluZ2lmeShlLG51bGwsMik6U3RyaW5nKGUpfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9cGFyc2VGbG9hdChlKTtyZXR1cm4gaXNOYU4odCk/ZTp0fWZ1bmN0aW9uIHAoZSx0KXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPWUuc3BsaXQoIiwiKSxpPTA7aTxyLmxlbmd0aDtpKyspbltyW2ldXT0hMDtyZXR1cm4gdD9mdW5jdGlvbihlKXtyZXR1cm4gbltlLnRvTG93ZXJDYXNlKCldfTpmdW5jdGlvbihlKXtyZXR1cm4gbltlXX19dmFyIGQ9cCgic2xvdCxjb21wb25lbnQiLCEwKSx2PXAoImtleSxyZWYsc2xvdCxzbG90LXNjb3BlLGlzIik7ZnVuY3Rpb24gaChlLHQpe2lmKGUubGVuZ3RoKXt2YXIgbj1lLmluZGV4T2YodCk7aWYobj4tMSlyZXR1cm4gZS5zcGxpY2UobiwxKX19dmFyIG09T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiB5KGUsdCl7cmV0dXJuIG0uY2FsbChlLHQpfWZ1bmN0aW9uIGcoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHRbbl18fCh0W25dPWUobikpfX12YXIgXz0vLShcdykvZyxiPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShfLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/dC50b1VwcGVyQ2FzZSgpOiIifSl9KSwkPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKX0pLHc9L1xCKFtBLVpdKS9nLEM9ZyhmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKHcsIi0kMSIpLnRvTG93ZXJDYXNlKCl9KTt2YXIgeD1GdW5jdGlvbi5wcm90b3R5cGUuYmluZD9mdW5jdGlvbihlLHQpe3JldHVybiBlLmJpbmQodCl9OmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihuKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoO3JldHVybiByP3I+MT9lLmFwcGx5KHQsYXJndW1lbnRzKTplLmNhbGwodCxuKTplLmNhbGwodCl9cmV0dXJuIG4uX2xlbmd0aD1lLmxlbmd0aCxufTtmdW5jdGlvbiBrKGUsdCl7dD10fHwwO2Zvcih2YXIgbj1lLmxlbmd0aC10LHI9bmV3IEFycmF5KG4pO24tLTspcltuXT1lW24rdF07cmV0dXJuIHJ9ZnVuY3Rpb24gQShlLHQpe2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBPKGUpe2Zvcih2YXIgdD17fSxuPTA7bjxlLmxlbmd0aDtuKyspZVtuXSYmQSh0LGVbbl0pO3JldHVybiB0fWZ1bmN0aW9uIFMoZSx0LG4pe312YXIgVD1mdW5jdGlvbihlLHQsbil7cmV0dXJuITF9LEU9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9O2Z1bmN0aW9uIE4oZSx0KXtpZihlPT09dClyZXR1cm4hMDt2YXIgbj1vKGUpLHI9byh0KTtpZighbnx8IXIpcmV0dXJuIW4mJiFyJiZTdHJpbmcoZSk9PT1TdHJpbmcodCk7dHJ5e3ZhciBpPUFycmF5LmlzQXJyYXkoZSksYT1BcnJheS5pc0FycmF5KHQpO2lmKGkmJmEpcmV0dXJuIGUubGVuZ3RoPT09dC5sZW5ndGgmJmUuZXZlcnkoZnVuY3Rpb24oZSxuKXtyZXR1cm4gTihlLHRbbl0pfSk7aWYoZSBpbnN0YW5jZW9mIERhdGUmJnQgaW5zdGFuY2VvZiBEYXRlKXJldHVybiBlLmdldFRpbWUoKT09PXQuZ2V0VGltZSgpO2lmKGl8fGEpcmV0dXJuITE7dmFyIHM9T2JqZWN0LmtleXMoZSksYz1PYmplY3Qua2V5cyh0KTtyZXR1cm4gcy5sZW5ndGg9PT1jLmxlbmd0aCYmcy5ldmVyeShmdW5jdGlvbihuKXtyZXR1cm4gTihlW25dLHRbbl0pfSl9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIGooZSx0KXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylpZihOKGVbbl0sdCkpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gRChlKXt2YXIgdD0hMTtyZXR1cm4gZnVuY3Rpb24oKXt0fHwodD0hMCxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fXZhciBMPSJkYXRhLXNlcnZlci1yZW5kZXJlZCIsTT1bImNvbXBvbmVudCIsImRpcmVjdGl2ZSIsImZpbHRlciJdLEk9WyJiZWZvcmVDcmVhdGUiLCJjcmVhdGVkIiwiYmVmb3JlTW91bnQiLCJtb3VudGVkIiwiYmVmb3JlVXBkYXRlIiwidXBkYXRlZCIsImJlZm9yZURlc3Ryb3kiLCJkZXN0cm95ZWQiLCJhY3RpdmF0ZWQiLCJkZWFjdGl2YXRlZCIsImVycm9yQ2FwdHVyZWQiLCJzZXJ2ZXJQcmVmZXRjaCJdLEY9e29wdGlvbk1lcmdlU3RyYXRlZ2llczpPYmplY3QuY3JlYXRlKG51bGwpLHNpbGVudDohMSxwcm9kdWN0aW9uVGlwOiExLGRldnRvb2xzOiExLHBlcmZvcm1hbmNlOiExLGVycm9ySGFuZGxlcjpudWxsLHdhcm5IYW5kbGVyOm51bGwsaWdub3JlZEVsZW1lbnRzOltdLGtleUNvZGVzOk9iamVjdC5jcmVhdGUobnVsbCksaXNSZXNlcnZlZFRhZzpULGlzUmVzZXJ2ZWRBdHRyOlQsaXNVbmtub3duRWxlbWVudDpULGdldFRhZ05hbWVzcGFjZTpTLHBhcnNlUGxhdGZvcm1UYWdOYW1lOkUsbXVzdFVzZVByb3A6VCxhc3luYzohMCxfbGlmZWN5Y2xlSG9va3M6SX0sUD0vYS16QS1aXHUwMEI3XHUwMEMwLVx1MDBENlx1MDBEOC1cdTAwRjZcdTAwRjgtXHUwMzdEXHUwMzdGLVx1MUZGRlx1MjAwQy1cdTIwMERcdTIwM0YtXHUyMDQwXHUyMDcwLVx1MjE4Rlx1MkMwMC1cdTJGRUZcdTMwMDEtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRkQvO2Z1bmN0aW9uIFIoZSx0LG4scil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEhcix3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX12YXIgSD1uZXcgUmVnRXhwKCJbXiIrUC5zb3VyY2UrIi4kX1xcZF0iKTt2YXIgQixVPSJfX3Byb3RvX18iaW57fSx6PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LFY9InVuZGVmaW5lZCIhPXR5cGVvZiBXWEVudmlyb25tZW50JiYhIVdYRW52aXJvbm1lbnQucGxhdGZvcm0sSz1WJiZXWEVudmlyb25tZW50LnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksSj16JiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLHE9SiYmL21zaWV8dHJpZGVudC8udGVzdChKKSxXPUomJkouaW5kZXhPZigibXNpZSA5LjAiKT4wLFo9SiYmSi5pbmRleE9mKCJlZGdlLyIpPjAsRz0oSiYmSi5pbmRleE9mKCJhbmRyb2lkIiksSiYmL2lwaG9uZXxpcGFkfGlwb2R8aW9zLy50ZXN0KEopfHwiaW9zIj09PUspLFg9KEomJi9jaHJvbWVcL1xkKy8udGVzdChKKSxKJiYvcGhhbnRvbWpzLy50ZXN0KEopLEomJkoubWF0Y2goL2ZpcmVmb3hcLyhcZCspLykpLFk9e30ud2F0Y2gsUT0hMTtpZih6KXRyeXt2YXIgZWU9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KGVlLCJwYXNzaXZlIix7Z2V0OmZ1bmN0aW9uKCl7UT0hMH19KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidGVzdC1wYXNzaXZlIixudWxsLGVlKX1jYXRjaChlKXt9dmFyIHRlPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PUImJihCPSF6JiYhViYmInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJihnbG9iYWwucHJvY2VzcyYmInNlcnZlciI9PT1nbG9iYWwucHJvY2Vzcy5lbnYuVlVFX0VOVikpLEJ9LG5lPXomJndpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO2Z1bmN0aW9uIHJlKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiYvbmF0aXZlIGNvZGUvLnRlc3QoZS50b1N0cmluZygpKX12YXIgaWUsb2U9InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJnJlKFN5bWJvbCkmJiJ1bmRlZmluZWQiIT10eXBlb2YgUmVmbGVjdCYmcmUoUmVmbGVjdC5vd25LZXlzKTtpZT0idW5kZWZpbmVkIiE9dHlwZW9mIFNldCYmcmUoU2V0KT9TZXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5zZXQ9T2JqZWN0LmNyZWF0ZShudWxsKX1yZXR1cm4gZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiEwPT09dGhpcy5zZXRbZV19LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt0aGlzLnNldFtlXT0hMH0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNldD1PYmplY3QuY3JlYXRlKG51bGwpfSxlfSgpO3ZhciBhZT1TLHNlPTAsY2U9ZnVuY3Rpb24oKXt0aGlzLmlkPXNlKyssdGhpcy5zdWJzPVtdfTtjZS5wcm90b3R5cGUuYWRkU3ViPWZ1bmN0aW9uKGUpe3RoaXMuc3Vicy5wdXNoKGUpfSxjZS5wcm90b3R5cGUucmVtb3ZlU3ViPWZ1bmN0aW9uKGUpe2godGhpcy5zdWJzLGUpfSxjZS5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Y2UudGFyZ2V0JiZjZS50YXJnZXQuYWRkRGVwKHRoaXMpfSxjZS5wcm90b3R5cGUubm90aWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuc3Vicy5zbGljZSgpLHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspZVt0XS51cGRhdGUoKX0sY2UudGFyZ2V0PW51bGw7dmFyIHVlPVtdO2Z1bmN0aW9uIGxlKGUpe3VlLnB1c2goZSksY2UudGFyZ2V0PWV9ZnVuY3Rpb24gZmUoKXt1ZS5wb3AoKSxjZS50YXJnZXQ9dWVbdWUubGVuZ3RoLTFdfXZhciBwZT1mdW5jdGlvbihlLHQsbixyLGksbyxhLHMpe3RoaXMudGFnPWUsdGhpcy5kYXRhPXQsdGhpcy5jaGlsZHJlbj1uLHRoaXMudGV4dD1yLHRoaXMuZWxtPWksdGhpcy5ucz12b2lkIDAsdGhpcy5jb250ZXh0PW8sdGhpcy5mbkNvbnRleHQ9dm9pZCAwLHRoaXMuZm5PcHRpb25zPXZvaWQgMCx0aGlzLmZuU2NvcGVJZD12b2lkIDAsdGhpcy5rZXk9dCYmdC5rZXksdGhpcy5jb21wb25lbnRPcHRpb25zPWEsdGhpcy5jb21wb25lbnRJbnN0YW5jZT12b2lkIDAsdGhpcy5wYXJlbnQ9dm9pZCAwLHRoaXMucmF3PSExLHRoaXMuaXNTdGF0aWM9ITEsdGhpcy5pc1Jvb3RJbnNlcnQ9ITAsdGhpcy5pc0NvbW1lbnQ9ITEsdGhpcy5pc0Nsb25lZD0hMSx0aGlzLmlzT25jZT0hMSx0aGlzLmFzeW5jRmFjdG9yeT1zLHRoaXMuYXN5bmNNZXRhPXZvaWQgMCx0aGlzLmlzQXN5bmNQbGFjZWhvbGRlcj0hMX0sZGU9e2NoaWxkOntjb25maWd1cmFibGU6ITB9fTtkZS5jaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocGUucHJvdG90eXBlLGRlKTt2YXIgdmU9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9IiIpO3ZhciB0PW5ldyBwZTtyZXR1cm4gdC50ZXh0PWUsdC5pc0NvbW1lbnQ9ITAsdH07ZnVuY3Rpb24gaGUoZSl7cmV0dXJuIG5ldyBwZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCxTdHJpbmcoZSkpfWZ1bmN0aW9uIG1lKGUpe3ZhciB0PW5ldyBwZShlLnRhZyxlLmRhdGEsZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5zbGljZSgpLGUudGV4dCxlLmVsbSxlLmNvbnRleHQsZS5jb21wb25lbnRPcHRpb25zLGUuYXN5bmNGYWN0b3J5KTtyZXR1cm4gdC5ucz1lLm5zLHQuaXNTdGF0aWM9ZS5pc1N0YXRpYyx0LmtleT1lLmtleSx0LmlzQ29tbWVudD1lLmlzQ29tbWVudCx0LmZuQ29udGV4dD1lLmZuQ29udGV4dCx0LmZuT3B0aW9ucz1lLmZuT3B0aW9ucyx0LmZuU2NvcGVJZD1lLmZuU2NvcGVJZCx0LmFzeW5jTWV0YT1lLmFzeW5jTWV0YSx0LmlzQ2xvbmVkPSEwLHR9dmFyIHllPUFycmF5LnByb3RvdHlwZSxnZT1PYmplY3QuY3JlYXRlKHllKTtbInB1c2giLCJwb3AiLCJzaGlmdCIsInVuc2hpZnQiLCJzcGxpY2UiLCJzb3J0IiwicmV2ZXJzZSJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9eWVbZV07UihnZSxlLGZ1bmN0aW9uKCl7Zm9yKHZhciBuPVtdLHI9YXJndW1lbnRzLmxlbmd0aDtyLS07KW5bcl09YXJndW1lbnRzW3JdO3ZhciBpLG89dC5hcHBseSh0aGlzLG4pLGE9dGhpcy5fX29iX187c3dpdGNoKGUpe2Nhc2UicHVzaCI6Y2FzZSJ1bnNoaWZ0IjppPW47YnJlYWs7Y2FzZSJzcGxpY2UiOmk9bi5zbGljZSgyKX1yZXR1cm4gaSYmYS5vYnNlcnZlQXJyYXkoaSksYS5kZXAubm90aWZ5KCksb30pfSk7dmFyIF9lPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdlKSxiZT0hMDtmdW5jdGlvbiAkZShlKXtiZT1lfXZhciB3ZT1mdW5jdGlvbihlKXt2YXIgdDt0aGlzLnZhbHVlPWUsdGhpcy5kZXA9bmV3IGNlLHRoaXMudm1Db3VudD0wLFIoZSwiX19vYl9fIix0aGlzKSxBcnJheS5pc0FycmF5KGUpPyhVPyh0PWdlLGUuX19wcm90b19fPXQpOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspe3ZhciBvPW5bcl07UihlLG8sdFtvXSl9fShlLGdlLF9lKSx0aGlzLm9ic2VydmVBcnJheShlKSk6dGhpcy53YWxrKGUpfTtmdW5jdGlvbiBDZShlLHQpe3ZhciBuO2lmKG8oZSkmJiEoZSBpbnN0YW5jZW9mIHBlKSlyZXR1cm4geShlLCJfX29iX18iKSYmZS5fX29iX18gaW5zdGFuY2VvZiB3ZT9uPWUuX19vYl9fOmJlJiYhdGUoKSYmKEFycmF5LmlzQXJyYXkoZSl8fHMoZSkpJiZPYmplY3QuaXNFeHRlbnNpYmxlKGUpJiYhZS5faXNWdWUmJihuPW5ldyB3ZShlKSksdCYmbiYmbi52bUNvdW50Kyssbn1mdW5jdGlvbiB4ZShlLHQsbixyLGkpe3ZhciBvPW5ldyBjZSxhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtpZighYXx8ITEhPT1hLmNvbmZpZ3VyYWJsZSl7dmFyIHM9YSYmYS5nZXQsYz1hJiZhLnNldDtzJiYhY3x8MiE9PWFyZ3VtZW50cy5sZW5ndGh8fChuPWVbdF0pO3ZhciB1PSFpJiZDZShuKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1zP3MuY2FsbChlKTpuO3JldHVybiBjZS50YXJnZXQmJihvLmRlcGVuZCgpLHUmJih1LmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KHQpJiZmdW5jdGlvbiBlKHQpe2Zvcih2YXIgbj12b2lkIDAscj0wLGk9dC5sZW5ndGg7cjxpO3IrKykobj10W3JdKSYmbi5fX29iX18mJm4uX19vYl9fLmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KG4pJiZlKG4pfSh0KSkpLHR9LHNldDpmdW5jdGlvbih0KXt2YXIgcj1zP3MuY2FsbChlKTpuO3Q9PT1yfHx0IT10JiZyIT1yfHxzJiYhY3x8KGM/Yy5jYWxsKGUsdCk6bj10LHU9IWkmJkNlKHQpLG8ubm90aWZ5KCkpfX0pfX1mdW5jdGlvbiBrZShlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSYmYyh0KSlyZXR1cm4gZS5sZW5ndGg9TWF0aC5tYXgoZS5sZW5ndGgsdCksZS5zcGxpY2UodCwxLG4pLG47aWYodCBpbiBlJiYhKHQgaW4gT2JqZWN0LnByb3RvdHlwZSkpcmV0dXJuIGVbdF09bixuO3ZhciByPWUuX19vYl9fO3JldHVybiBlLl9pc1Z1ZXx8ciYmci52bUNvdW50P246cj8oeGUoci52YWx1ZSx0LG4pLHIuZGVwLm5vdGlmeSgpLG4pOihlW3RdPW4sbil9ZnVuY3Rpb24gQWUoZSx0KXtpZihBcnJheS5pc0FycmF5KGUpJiZjKHQpKWUuc3BsaWNlKHQsMSk7ZWxzZXt2YXIgbj1lLl9fb2JfXztlLl9pc1Z1ZXx8biYmbi52bUNvdW50fHx5KGUsdCkmJihkZWxldGUgZVt0XSxuJiZuLmRlcC5ub3RpZnkoKSl9fXdlLnByb3RvdHlwZS53YWxrPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxuPTA7bjx0Lmxlbmd0aDtuKyspeGUoZSx0W25dKX0sd2UucHJvdG90eXBlLm9ic2VydmVBcnJheT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspQ2UoZVt0XSl9O3ZhciBPZT1GLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztmdW5jdGlvbiBTZShlLHQpe2lmKCF0KXJldHVybiBlO2Zvcih2YXIgbixyLGksbz1vZT9SZWZsZWN0Lm93bktleXModCk6T2JqZWN0LmtleXModCksYT0wO2E8by5sZW5ndGg7YSsrKSJfX29iX18iIT09KG49b1thXSkmJihyPWVbbl0saT10W25dLHkoZSxuKT9yIT09aSYmcyhyKSYmcyhpKSYmU2UocixpKTprZShlLG4saSkpO3JldHVybiBlfWZ1bmN0aW9uIFRlKGUsdCxuKXtyZXR1cm4gbj9mdW5jdGlvbigpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbChuLG4pOnQsaT0iZnVuY3Rpb24iPT10eXBlb2YgZT9lLmNhbGwobixuKTplO3JldHVybiByP1NlKHIsaSk6aX06dD9lP2Z1bmN0aW9uKCl7cmV0dXJuIFNlKCJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbCh0aGlzLHRoaXMpOnQsImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5jYWxsKHRoaXMsdGhpcyk6ZSl9OnQ6ZX1mdW5jdGlvbiBFZShlLHQpe3ZhciBuPXQ/ZT9lLmNvbmNhdCh0KTpBcnJheS5pc0FycmF5KHQpP3Q6W3RdOmU7cmV0dXJuIG4/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MDtuPGUubGVuZ3RoO24rKyktMT09PXQuaW5kZXhPZihlW25dKSYmdC5wdXNoKGVbbl0pO3JldHVybiB0fShuKTpufWZ1bmN0aW9uIE5lKGUsdCxuLHIpe3ZhciBpPU9iamVjdC5jcmVhdGUoZXx8bnVsbCk7cmV0dXJuIHQ/QShpLHQpOml9T2UuZGF0YT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG4/VGUoZSx0LG4pOnQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6VGUoZSx0KX0sSS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2VdPUVlfSksTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2UrInMiXT1OZX0pLE9lLndhdGNoPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKGU9PT1ZJiYoZT12b2lkIDApLHQ9PT1ZJiYodD12b2lkIDApLCF0KXJldHVybiBPYmplY3QuY3JlYXRlKGV8fG51bGwpO2lmKCFlKXJldHVybiB0O3ZhciBpPXt9O2Zvcih2YXIgbyBpbiBBKGksZSksdCl7dmFyIGE9aVtvXSxzPXRbb107YSYmIUFycmF5LmlzQXJyYXkoYSkmJihhPVthXSksaVtvXT1hP2EuY29uY2F0KHMpOkFycmF5LmlzQXJyYXkocyk/czpbc119cmV0dXJuIGl9LE9lLnByb3BzPU9lLm1ldGhvZHM9T2UuaW5qZWN0PU9lLmNvbXB1dGVkPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKCFlKXJldHVybiB0O3ZhciBpPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIEEoaSxlKSx0JiZBKGksdCksaX0sT2UucHJvdmlkZT1UZTt2YXIgamU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9lOnR9O2Z1bmN0aW9uIERlKGUsdCxuKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHQ9dC5vcHRpb25zKSxmdW5jdGlvbihlLHQpe3ZhciBuPWUucHJvcHM7aWYobil7dmFyIHIsaSxvPXt9O2lmKEFycmF5LmlzQXJyYXkobikpZm9yKHI9bi5sZW5ndGg7ci0tOykic3RyaW5nIj09dHlwZW9mKGk9bltyXSkmJihvW2IoaSldPXt0eXBlOm51bGx9KTtlbHNlIGlmKHMobikpZm9yKHZhciBhIGluIG4paT1uW2FdLG9bYihhKV09cyhpKT9pOnt0eXBlOml9O2UucHJvcHM9b319KHQpLGZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5pbmplY3Q7aWYobil7dmFyIHI9ZS5pbmplY3Q9e307aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKylyW25baV1dPXtmcm9tOm5baV19O2Vsc2UgaWYocyhuKSlmb3IodmFyIG8gaW4gbil7dmFyIGE9bltvXTtyW29dPXMoYSk/QSh7ZnJvbTpvfSxhKTp7ZnJvbTphfX19fSh0KSxmdW5jdGlvbihlKXt2YXIgdD1lLmRpcmVjdGl2ZXM7aWYodClmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTsiZnVuY3Rpb24iPT10eXBlb2YgciYmKHRbbl09e2JpbmQ6cix1cGRhdGU6cn0pfX0odCksIXQuX2Jhc2UmJih0LmV4dGVuZHMmJihlPURlKGUsdC5leHRlbmRzLG4pKSx0Lm1peGlucykpZm9yKHZhciByPTAsaT10Lm1peGlucy5sZW5ndGg7cjxpO3IrKyllPURlKGUsdC5taXhpbnNbcl0sbik7dmFyIG8sYT17fTtmb3IobyBpbiBlKWMobyk7Zm9yKG8gaW4gdCl5KGUsbyl8fGMobyk7ZnVuY3Rpb24gYyhyKXt2YXIgaT1PZVtyXXx8amU7YVtyXT1pKGVbcl0sdFtyXSxuLHIpfXJldHVybiBhfWZ1bmN0aW9uIExlKGUsdCxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2Ygbil7dmFyIGk9ZVt0XTtpZih5KGksbikpcmV0dXJuIGlbbl07dmFyIG89YihuKTtpZih5KGksbykpcmV0dXJuIGlbb107dmFyIGE9JChvKTtyZXR1cm4geShpLGEpP2lbYV06aVtuXXx8aVtvXXx8aVthXX19ZnVuY3Rpb24gTWUoZSx0LG4scil7dmFyIGk9dFtlXSxvPSF5KG4sZSksYT1uW2VdLHM9UGUoQm9vbGVhbixpLnR5cGUpO2lmKHM+LTEpaWYobyYmIXkoaSwiZGVmYXVsdCIpKWE9ITE7ZWxzZSBpZigiIj09PWF8fGE9PT1DKGUpKXt2YXIgYz1QZShTdHJpbmcsaS50eXBlKTsoYzwwfHxzPGMpJiYoYT0hMCl9aWYodm9pZCAwPT09YSl7YT1mdW5jdGlvbihlLHQsbil7aWYoIXkodCwiZGVmYXVsdCIpKXJldHVybjt2YXIgcj10LmRlZmF1bHQ7aWYoZSYmZS4kb3B0aW9ucy5wcm9wc0RhdGEmJnZvaWQgMD09PWUuJG9wdGlvbnMucHJvcHNEYXRhW25dJiZ2b2lkIDAhPT1lLl9wcm9wc1tuXSlyZXR1cm4gZS5fcHJvcHNbbl07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHImJiJGdW5jdGlvbiIhPT1JZSh0LnR5cGUpP3IuY2FsbChlKTpyfShyLGksZSk7dmFyIHU9YmU7JGUoITApLENlKGEpLCRlKHUpfXJldHVybiBhfWZ1bmN0aW9uIEllKGUpe3ZhciB0PWUmJmUudG9TdHJpbmcoKS5tYXRjaCgvXlxzKmZ1bmN0aW9uIChcdyspLyk7cmV0dXJuIHQ/dFsxXToiIn1mdW5jdGlvbiBGZShlLHQpe3JldHVybiBJZShlKT09PUllKHQpfWZ1bmN0aW9uIFBlKGUsdCl7aWYoIUFycmF5LmlzQXJyYXkodCkpcmV0dXJuIEZlKHQsZSk/MDotMTtmb3IodmFyIG49MCxyPXQubGVuZ3RoO248cjtuKyspaWYoRmUodFtuXSxlKSlyZXR1cm4gbjtyZXR1cm4tMX1mdW5jdGlvbiBSZShlLHQsbil7bGUoKTt0cnl7aWYodClmb3IodmFyIHI9dDtyPXIuJHBhcmVudDspe3ZhciBpPXIuJG9wdGlvbnMuZXJyb3JDYXB0dXJlZDtpZihpKWZvcih2YXIgbz0wO288aS5sZW5ndGg7bysrKXRyeXtpZighMT09PWlbb10uY2FsbChyLGUsdCxuKSlyZXR1cm59Y2F0Y2goZSl7QmUoZSxyLCJlcnJvckNhcHR1cmVkIGhvb2siKX19QmUoZSx0LG4pfWZpbmFsbHl7ZmUoKX19ZnVuY3Rpb24gSGUoZSx0LG4scixpKXt2YXIgbzt0cnl7KG89bj9lLmFwcGx5KHQsbik6ZS5jYWxsKHQpKSYmIW8uX2lzVnVlJiZ1KG8pJiYhby5faGFuZGxlZCYmKG8uY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIFJlKGUscixpKyIgKFByb21pc2UvYXN5bmMpIil9KSxvLl9oYW5kbGVkPSEwKX1jYXRjaChlKXtSZShlLHIsaSl9cmV0dXJuIG99ZnVuY3Rpb24gQmUoZSx0LG4pe2lmKEYuZXJyb3JIYW5kbGVyKXRyeXtyZXR1cm4gRi5lcnJvckhhbmRsZXIuY2FsbChudWxsLGUsdCxuKX1jYXRjaCh0KXt0IT09ZSYmVWUodCxudWxsLCJjb25maWcuZXJyb3JIYW5kbGVyIil9VWUoZSx0LG4pfWZ1bmN0aW9uIFVlKGUsdCxuKXtpZigheiYmIVZ8fCJ1bmRlZmluZWQiPT10eXBlb2YgY29uc29sZSl0aHJvdyBlO2NvbnNvbGUuZXJyb3IoZSl9dmFyIHplLFZlPSExLEtlPVtdLEplPSExO2Z1bmN0aW9uIHFlKCl7SmU9ITE7dmFyIGU9S2Uuc2xpY2UoMCk7S2UubGVuZ3RoPTA7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspZVt0XSgpfWlmKCJ1bmRlZmluZWQiIT10eXBlb2YgUHJvbWlzZSYmcmUoUHJvbWlzZSkpe3ZhciBXZT1Qcm9taXNlLnJlc29sdmUoKTt6ZT1mdW5jdGlvbigpe1dlLnRoZW4ocWUpLEcmJnNldFRpbWVvdXQoUyl9LFZlPSEwfWVsc2UgaWYocXx8InVuZGVmaW5lZCI9PXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyfHwhcmUoTXV0YXRpb25PYnNlcnZlcikmJiJbb2JqZWN0IE11dGF0aW9uT2JzZXJ2ZXJDb25zdHJ1Y3Rvcl0iIT09TXV0YXRpb25PYnNlcnZlci50b1N0cmluZygpKXplPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2V0SW1tZWRpYXRlJiZyZShzZXRJbW1lZGlhdGUpP2Z1bmN0aW9uKCl7c2V0SW1tZWRpYXRlKHFlKX06ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHFlLDApfTtlbHNle3ZhciBaZT0xLEdlPW5ldyBNdXRhdGlvbk9ic2VydmVyKHFlKSxYZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShTdHJpbmcoWmUpKTtHZS5vYnNlcnZlKFhlLHtjaGFyYWN0ZXJEYXRhOiEwfSksemU9ZnVuY3Rpb24oKXtaZT0oWmUrMSklMixYZS5kYXRhPVN0cmluZyhaZSl9LFZlPSEwfWZ1bmN0aW9uIFllKGUsdCl7dmFyIG47aWYoS2UucHVzaChmdW5jdGlvbigpe2lmKGUpdHJ5e2UuY2FsbCh0KX1jYXRjaChlKXtSZShlLHQsIm5leHRUaWNrIil9ZWxzZSBuJiZuKHQpfSksSmV8fChKZT0hMCx6ZSgpKSwhZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBQcm9taXNlKXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtuPWV9KX12YXIgUWU9bmV3IGllO2Z1bmN0aW9uIGV0KGUpeyFmdW5jdGlvbiBlKHQsbil7dmFyIHIsaTt2YXIgYT1BcnJheS5pc0FycmF5KHQpO2lmKCFhJiYhbyh0KXx8T2JqZWN0LmlzRnJvemVuKHQpfHx0IGluc3RhbmNlb2YgcGUpcmV0dXJuO2lmKHQuX19vYl9fKXt2YXIgcz10Ll9fb2JfXy5kZXAuaWQ7aWYobi5oYXMocykpcmV0dXJuO24uYWRkKHMpfWlmKGEpZm9yKHI9dC5sZW5ndGg7ci0tOyllKHRbcl0sbik7ZWxzZSBmb3IoaT1PYmplY3Qua2V5cyh0KSxyPWkubGVuZ3RoO3ItLTspZSh0W2lbcl1dLG4pfShlLFFlKSxRZS5jbGVhcigpfXZhciB0dD1nKGZ1bmN0aW9uKGUpe3ZhciB0PSImIj09PWUuY2hhckF0KDApLG49In4iPT09KGU9dD9lLnNsaWNlKDEpOmUpLmNoYXJBdCgwKSxyPSIhIj09PShlPW4/ZS5zbGljZSgxKTplKS5jaGFyQXQoMCk7cmV0dXJue25hbWU6ZT1yP2Uuc2xpY2UoMSk6ZSxvbmNlOm4sY2FwdHVyZTpyLHBhc3NpdmU6dH19KTtmdW5jdGlvbiBudChlLHQpe2Z1bmN0aW9uIG4oKXt2YXIgZT1hcmd1bWVudHMscj1uLmZucztpZighQXJyYXkuaXNBcnJheShyKSlyZXR1cm4gSGUocixudWxsLGFyZ3VtZW50cyx0LCJ2LW9uIGhhbmRsZXIiKTtmb3IodmFyIGk9ci5zbGljZSgpLG89MDtvPGkubGVuZ3RoO28rKylIZShpW29dLG51bGwsZSx0LCJ2LW9uIGhhbmRsZXIiKX1yZXR1cm4gbi5mbnM9ZSxufWZ1bmN0aW9uIHJ0KGUsbixpLG8sYSxzKXt2YXIgYyx1LGwsZjtmb3IoYyBpbiBlKXU9ZVtjXSxsPW5bY10sZj10dChjKSx0KHUpfHwodChsKT8odCh1LmZucykmJih1PWVbY109bnQodSxzKSkscihmLm9uY2UpJiYodT1lW2NdPWEoZi5uYW1lLHUsZi5jYXB0dXJlKSksaShmLm5hbWUsdSxmLmNhcHR1cmUsZi5wYXNzaXZlLGYucGFyYW1zKSk6dSE9PWwmJihsLmZucz11LGVbY109bCkpO2ZvcihjIGluIG4pdChlW2NdKSYmbygoZj10dChjKSkubmFtZSxuW2NdLGYuY2FwdHVyZSl9ZnVuY3Rpb24gaXQoZSxpLG8pe3ZhciBhO2UgaW5zdGFuY2VvZiBwZSYmKGU9ZS5kYXRhLmhvb2t8fChlLmRhdGEuaG9vaz17fSkpO3ZhciBzPWVbaV07ZnVuY3Rpb24gYygpe28uYXBwbHkodGhpcyxhcmd1bWVudHMpLGgoYS5mbnMsYyl9dChzKT9hPW50KFtjXSk6bihzLmZucykmJnIocy5tZXJnZWQpPyhhPXMpLmZucy5wdXNoKGMpOmE9bnQoW3MsY10pLGEubWVyZ2VkPSEwLGVbaV09YX1mdW5jdGlvbiBvdChlLHQscixpLG8pe2lmKG4odCkpe2lmKHkodCxyKSlyZXR1cm4gZVtyXT10W3JdLG98fGRlbGV0ZSB0W3JdLCEwO2lmKHkodCxpKSlyZXR1cm4gZVtyXT10W2ldLG98fGRlbGV0ZSB0W2ldLCEwfXJldHVybiExfWZ1bmN0aW9uIGF0KGUpe3JldHVybiBpKGUpP1toZShlKV06QXJyYXkuaXNBcnJheShlKT9mdW5jdGlvbiBlKG8sYSl7dmFyIHM9W107dmFyIGMsdSxsLGY7Zm9yKGM9MDtjPG8ubGVuZ3RoO2MrKyl0KHU9b1tjXSl8fCJib29sZWFuIj09dHlwZW9mIHV8fChsPXMubGVuZ3RoLTEsZj1zW2xdLEFycmF5LmlzQXJyYXkodSk/dS5sZW5ndGg+MCYmKHN0KCh1PWUodSwoYXx8IiIpKyJfIitjKSlbMF0pJiZzdChmKSYmKHNbbF09aGUoZi50ZXh0K3VbMF0udGV4dCksdS5zaGlmdCgpKSxzLnB1c2guYXBwbHkocyx1KSk6aSh1KT9zdChmKT9zW2xdPWhlKGYudGV4dCt1KToiIiE9PXUmJnMucHVzaChoZSh1KSk6c3QodSkmJnN0KGYpP3NbbF09aGUoZi50ZXh0K3UudGV4dCk6KHIoby5faXNWTGlzdCkmJm4odS50YWcpJiZ0KHUua2V5KSYmbihhKSYmKHUua2V5PSJfX3ZsaXN0IithKyJfIitjKyJfXyIpLHMucHVzaCh1KSkpO3JldHVybiBzfShlKTp2b2lkIDB9ZnVuY3Rpb24gc3QoZSl7cmV0dXJuIG4oZSkmJm4oZS50ZXh0KSYmITE9PT1lLmlzQ29tbWVudH1mdW5jdGlvbiBjdChlLHQpe2lmKGUpe2Zvcih2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9b2U/UmVmbGVjdC5vd25LZXlzKGUpOk9iamVjdC5rZXlzKGUpLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG89cltpXTtpZigiX19vYl9fIiE9PW8pe2Zvcih2YXIgYT1lW29dLmZyb20scz10O3M7KXtpZihzLl9wcm92aWRlZCYmeShzLl9wcm92aWRlZCxhKSl7bltvXT1zLl9wcm92aWRlZFthXTticmVha31zPXMuJHBhcmVudH1pZighcyYmImRlZmF1bHQiaW4gZVtvXSl7dmFyIGM9ZVtvXS5kZWZhdWx0O25bb109ImZ1bmN0aW9uIj09dHlwZW9mIGM/Yy5jYWxsKHQpOmN9fX1yZXR1cm4gbn19ZnVuY3Rpb24gdXQoZSx0KXtpZighZXx8IWUubGVuZ3RoKXJldHVybnt9O2Zvcih2YXIgbj17fSxyPTAsaT1lLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1lW3JdLGE9by5kYXRhO2lmKGEmJmEuYXR0cnMmJmEuYXR0cnMuc2xvdCYmZGVsZXRlIGEuYXR0cnMuc2xvdCxvLmNvbnRleHQhPT10JiZvLmZuQ29udGV4dCE9PXR8fCFhfHxudWxsPT1hLnNsb3QpKG4uZGVmYXVsdHx8KG4uZGVmYXVsdD1bXSkpLnB1c2gobyk7ZWxzZXt2YXIgcz1hLnNsb3QsYz1uW3NdfHwobltzXT1bXSk7InRlbXBsYXRlIj09PW8udGFnP2MucHVzaC5hcHBseShjLG8uY2hpbGRyZW58fFtdKTpjLnB1c2gobyl9fWZvcih2YXIgdSBpbiBuKW5bdV0uZXZlcnkobHQpJiZkZWxldGUgblt1XTtyZXR1cm4gbn1mdW5jdGlvbiBsdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJiFlLmFzeW5jRmFjdG9yeXx8IiAiPT09ZS50ZXh0fWZ1bmN0aW9uIGZ0KHQsbixyKXt2YXIgaSxvPU9iamVjdC5rZXlzKG4pLmxlbmd0aD4wLGE9dD8hIXQuJHN0YWJsZTohbyxzPXQmJnQuJGtleTtpZih0KXtpZih0Ll9ub3JtYWxpemVkKXJldHVybiB0Ll9ub3JtYWxpemVkO2lmKGEmJnImJnIhPT1lJiZzPT09ci4ka2V5JiYhbyYmIXIuJGhhc05vcm1hbClyZXR1cm4gcjtmb3IodmFyIGMgaW4gaT17fSx0KXRbY10mJiIkIiE9PWNbMF0mJihpW2NdPXB0KG4sYyx0W2NdKSl9ZWxzZSBpPXt9O2Zvcih2YXIgdSBpbiBuKXUgaW4gaXx8KGlbdV09ZHQobix1KSk7cmV0dXJuIHQmJk9iamVjdC5pc0V4dGVuc2libGUodCkmJih0Ll9ub3JtYWxpemVkPWkpLFIoaSwiJHN0YWJsZSIsYSksUihpLCIka2V5IixzKSxSKGksIiRoYXNOb3JtYWwiLG8pLGl9ZnVuY3Rpb24gcHQoZSx0LG4pe3ZhciByPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD9uLmFwcGx5KG51bGwsYXJndW1lbnRzKTpuKHt9KTtyZXR1cm4oZT1lJiYib2JqZWN0Ij09dHlwZW9mIGUmJiFBcnJheS5pc0FycmF5KGUpP1tlXTphdChlKSkmJigwPT09ZS5sZW5ndGh8fDE9PT1lLmxlbmd0aCYmZVswXS5pc0NvbW1lbnQpP3ZvaWQgMDplfTtyZXR1cm4gbi5wcm94eSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Z2V0OnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyfWZ1bmN0aW9uIGR0KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGVbdF19fWZ1bmN0aW9uIHZ0KGUsdCl7dmFyIHIsaSxhLHMsYztpZihBcnJheS5pc0FycmF5KGUpfHwic3RyaW5nIj09dHlwZW9mIGUpZm9yKHI9bmV3IEFycmF5KGUubGVuZ3RoKSxpPTAsYT1lLmxlbmd0aDtpPGE7aSsrKXJbaV09dChlW2ldLGkpO2Vsc2UgaWYoIm51bWJlciI9PXR5cGVvZiBlKWZvcihyPW5ldyBBcnJheShlKSxpPTA7aTxlO2krKylyW2ldPXQoaSsxLGkpO2Vsc2UgaWYobyhlKSlpZihvZSYmZVtTeW1ib2wuaXRlcmF0b3JdKXtyPVtdO2Zvcih2YXIgdT1lW1N5bWJvbC5pdGVyYXRvcl0oKSxsPXUubmV4dCgpOyFsLmRvbmU7KXIucHVzaCh0KGwudmFsdWUsci5sZW5ndGgpKSxsPXUubmV4dCgpfWVsc2UgZm9yKHM9T2JqZWN0LmtleXMoZSkscj1uZXcgQXJyYXkocy5sZW5ndGgpLGk9MCxhPXMubGVuZ3RoO2k8YTtpKyspYz1zW2ldLHJbaV09dChlW2NdLGMsaSk7cmV0dXJuIG4ocil8fChyPVtdKSxyLl9pc1ZMaXN0PSEwLHJ9ZnVuY3Rpb24gaHQoZSx0LG4scil7dmFyIGksbz10aGlzLiRzY29wZWRTbG90c1tlXTtvPyhuPW58fHt9LHImJihuPUEoQSh7fSxyKSxuKSksaT1vKG4pfHx0KTppPXRoaXMuJHNsb3RzW2VdfHx0O3ZhciBhPW4mJm4uc2xvdDtyZXR1cm4gYT90aGlzLiRjcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIse3Nsb3Q6YX0saSk6aX1mdW5jdGlvbiBtdChlKXtyZXR1cm4gTGUodGhpcy4kb3B0aW9ucywiZmlsdGVycyIsZSl8fEV9ZnVuY3Rpb24geXQoZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT8tMT09PWUuaW5kZXhPZih0KTplIT09dH1mdW5jdGlvbiBndChlLHQsbixyLGkpe3ZhciBvPUYua2V5Q29kZXNbdF18fG47cmV0dXJuIGkmJnImJiFGLmtleUNvZGVzW3RdP3l0KGkscik6bz95dChvLGUpOnI/QyhyKSE9PXQ6dm9pZCAwfWZ1bmN0aW9uIF90KGUsdCxuLHIsaSl7aWYobilpZihvKG4pKXt2YXIgYTtBcnJheS5pc0FycmF5KG4pJiYobj1PKG4pKTt2YXIgcz1mdW5jdGlvbihvKXtpZigiY2xhc3MiPT09b3x8InN0eWxlIj09PW98fHYobykpYT1lO2Vsc2V7dmFyIHM9ZS5hdHRycyYmZS5hdHRycy50eXBlO2E9cnx8Ri5tdXN0VXNlUHJvcCh0LHMsbyk/ZS5kb21Qcm9wc3x8KGUuZG9tUHJvcHM9e30pOmUuYXR0cnN8fChlLmF0dHJzPXt9KX12YXIgYz1iKG8pLHU9QyhvKTtjIGluIGF8fHUgaW4gYXx8KGFbb109bltvXSxpJiYoKGUub258fChlLm9uPXt9KSlbInVwZGF0ZToiK29dPWZ1bmN0aW9uKGUpe25bb109ZX0pKX07Zm9yKHZhciBjIGluIG4pcyhjKX1lbHNlO3JldHVybiBlfWZ1bmN0aW9uIGJ0KGUsdCl7dmFyIG49dGhpcy5fc3RhdGljVHJlZXN8fCh0aGlzLl9zdGF0aWNUcmVlcz1bXSkscj1uW2VdO3JldHVybiByJiYhdD9yOih3dChyPW5bZV09dGhpcy4kb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnNbZV0uY2FsbCh0aGlzLl9yZW5kZXJQcm94eSxudWxsLHRoaXMpLCJfX3N0YXRpY19fIitlLCExKSxyKX1mdW5jdGlvbiAkdChlLHQsbil7cmV0dXJuIHd0KGUsIl9fb25jZV9fIit0KyhuPyJfIituOiIiKSwhMCksZX1mdW5jdGlvbiB3dChlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyllW3JdJiYic3RyaW5nIiE9dHlwZW9mIGVbcl0mJkN0KGVbcl0sdCsiXyIrcixuKTtlbHNlIEN0KGUsdCxuKX1mdW5jdGlvbiBDdChlLHQsbil7ZS5pc1N0YXRpYz0hMCxlLmtleT10LGUuaXNPbmNlPW59ZnVuY3Rpb24geHQoZSx0KXtpZih0KWlmKHModCkpe3ZhciBuPWUub249ZS5vbj9BKHt9LGUub24pOnt9O2Zvcih2YXIgciBpbiB0KXt2YXIgaT1uW3JdLG89dFtyXTtuW3JdPWk/W10uY29uY2F0KGksbyk6b319ZWxzZTtyZXR1cm4gZX1mdW5jdGlvbiBrdChlLHQsbixyKXt0PXR8fHskc3RhYmxlOiFufTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG89ZVtpXTtBcnJheS5pc0FycmF5KG8pP2t0KG8sdCxuKTpvJiYoby5wcm94eSYmKG8uZm4ucHJveHk9ITApLHRbby5rZXldPW8uZm4pfXJldHVybiByJiYodC4ka2V5PXIpLHR9ZnVuY3Rpb24gQXQoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRbbl07InN0cmluZyI9PXR5cGVvZiByJiZyJiYoZVt0W25dXT10W24rMV0pfXJldHVybiBlfWZ1bmN0aW9uIE90KGUsdCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP3QrZTplfWZ1bmN0aW9uIFN0KGUpe2UuX289JHQsZS5fbj1mLGUuX3M9bCxlLl9sPXZ0LGUuX3Q9aHQsZS5fcT1OLGUuX2k9aixlLl9tPWJ0LGUuX2Y9bXQsZS5faz1ndCxlLl9iPV90LGUuX3Y9aGUsZS5fZT12ZSxlLl91PWt0LGUuX2c9eHQsZS5fZD1BdCxlLl9wPU90fWZ1bmN0aW9uIFR0KHQsbixpLG8sYSl7dmFyIHMsYz10aGlzLHU9YS5vcHRpb25zO3kobywiX3VpZCIpPyhzPU9iamVjdC5jcmVhdGUobykpLl9vcmlnaW5hbD1vOihzPW8sbz1vLl9vcmlnaW5hbCk7dmFyIGw9cih1Ll9jb21waWxlZCksZj0hbDt0aGlzLmRhdGE9dCx0aGlzLnByb3BzPW4sdGhpcy5jaGlsZHJlbj1pLHRoaXMucGFyZW50PW8sdGhpcy5saXN0ZW5lcnM9dC5vbnx8ZSx0aGlzLmluamVjdGlvbnM9Y3QodS5pbmplY3QsbyksdGhpcy5zbG90cz1mdW5jdGlvbigpe3JldHVybiBjLiRzbG90c3x8ZnQodC5zY29wZWRTbG90cyxjLiRzbG90cz11dChpLG8pKSxjLiRzbG90c30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInNjb3BlZFNsb3RzIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZnQodC5zY29wZWRTbG90cyx0aGlzLnNsb3RzKCkpfX0pLGwmJih0aGlzLiRvcHRpb25zPXUsdGhpcy4kc2xvdHM9dGhpcy5zbG90cygpLHRoaXMuJHNjb3BlZFNsb3RzPWZ0KHQuc2NvcGVkU2xvdHMsdGhpcy4kc2xvdHMpKSx1Ll9zY29wZUlkP3RoaXMuX2M9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9UHQocyxlLHQsbixyLGYpO3JldHVybiBpJiYhQXJyYXkuaXNBcnJheShpKSYmKGkuZm5TY29wZUlkPXUuX3Njb3BlSWQsaS5mbkNvbnRleHQ9byksaX06dGhpcy5fYz1mdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gUHQocyxlLHQsbixyLGYpfX1mdW5jdGlvbiBFdChlLHQsbixyLGkpe3ZhciBvPW1lKGUpO3JldHVybiBvLmZuQ29udGV4dD1uLG8uZm5PcHRpb25zPXIsdC5zbG90JiYoKG8uZGF0YXx8KG8uZGF0YT17fSkpLnNsb3Q9dC5zbG90KSxvfWZ1bmN0aW9uIE50KGUsdCl7Zm9yKHZhciBuIGluIHQpZVtiKG4pXT10W25dfVN0KFR0LnByb3RvdHlwZSk7dmFyIGp0PXtpbml0OmZ1bmN0aW9uKGUsdCl7aWYoZS5jb21wb25lbnRJbnN0YW5jZSYmIWUuY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkJiZlLmRhdGEua2VlcEFsaXZlKXt2YXIgcj1lO2p0LnByZXBhdGNoKHIscil9ZWxzZXsoZS5jb21wb25lbnRJbnN0YW5jZT1mdW5jdGlvbihlLHQpe3ZhciByPXtfaXNDb21wb25lbnQ6ITAsX3BhcmVudFZub2RlOmUscGFyZW50OnR9LGk9ZS5kYXRhLmlubGluZVRlbXBsYXRlO24oaSkmJihyLnJlbmRlcj1pLnJlbmRlcixyLnN0YXRpY1JlbmRlckZucz1pLnN0YXRpY1JlbmRlckZucyk7cmV0dXJuIG5ldyBlLmNvbXBvbmVudE9wdGlvbnMuQ3RvcihyKX0oZSxXdCkpLiRtb3VudCh0P2UuZWxtOnZvaWQgMCx0KX19LHByZXBhdGNoOmZ1bmN0aW9uKHQsbil7dmFyIHI9bi5jb21wb25lbnRPcHRpb25zOyFmdW5jdGlvbih0LG4scixpLG8pe3ZhciBhPWkuZGF0YS5zY29wZWRTbG90cyxzPXQuJHNjb3BlZFNsb3RzLGM9ISEoYSYmIWEuJHN0YWJsZXx8cyE9PWUmJiFzLiRzdGFibGV8fGEmJnQuJHNjb3BlZFNsb3RzLiRrZXkhPT1hLiRrZXkpLHU9ISEob3x8dC4kb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW58fGMpO3QuJG9wdGlvbnMuX3BhcmVudFZub2RlPWksdC4kdm5vZGU9aSx0Ll92bm9kZSYmKHQuX3Zub2RlLnBhcmVudD1pKTtpZih0LiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbj1vLHQuJGF0dHJzPWkuZGF0YS5hdHRyc3x8ZSx0LiRsaXN0ZW5lcnM9cnx8ZSxuJiZ0LiRvcHRpb25zLnByb3BzKXskZSghMSk7Zm9yKHZhciBsPXQuX3Byb3BzLGY9dC4kb3B0aW9ucy5fcHJvcEtleXN8fFtdLHA9MDtwPGYubGVuZ3RoO3ArKyl7dmFyIGQ9ZltwXSx2PXQuJG9wdGlvbnMucHJvcHM7bFtkXT1NZShkLHYsbix0KX0kZSghMCksdC4kb3B0aW9ucy5wcm9wc0RhdGE9bn1yPXJ8fGU7dmFyIGg9dC4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO3QuJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycz1yLHF0KHQscixoKSx1JiYodC4kc2xvdHM9dXQobyxpLmNvbnRleHQpLHQuJGZvcmNlVXBkYXRlKCkpfShuLmNvbXBvbmVudEluc3RhbmNlPXQuY29tcG9uZW50SW5zdGFuY2Usci5wcm9wc0RhdGEsci5saXN0ZW5lcnMsbixyLmNoaWxkcmVuKX0saW5zZXJ0OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5jb250ZXh0LHI9ZS5jb21wb25lbnRJbnN0YW5jZTtyLl9pc01vdW50ZWR8fChyLl9pc01vdW50ZWQ9ITAsWXQociwibW91bnRlZCIpKSxlLmRhdGEua2VlcEFsaXZlJiYobi5faXNNb3VudGVkPygodD1yKS5faW5hY3RpdmU9ITEsZW4ucHVzaCh0KSk6WHQociwhMCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29tcG9uZW50SW5zdGFuY2U7dC5faXNEZXN0cm95ZWR8fChlLmRhdGEua2VlcEFsaXZlP2Z1bmN0aW9uIGUodCxuKXtpZihuJiYodC5fZGlyZWN0SW5hY3RpdmU9ITAsR3QodCkpKXJldHVybjtpZighdC5faW5hY3RpdmUpe3QuX2luYWN0aXZlPSEwO2Zvcih2YXIgcj0wO3I8dC4kY2hpbGRyZW4ubGVuZ3RoO3IrKyllKHQuJGNoaWxkcmVuW3JdKTtZdCh0LCJkZWFjdGl2YXRlZCIpfX0odCwhMCk6dC4kZGVzdHJveSgpKX19LER0PU9iamVjdC5rZXlzKGp0KTtmdW5jdGlvbiBMdChpLGEscyxjLGwpe2lmKCF0KGkpKXt2YXIgZj1zLiRvcHRpb25zLl9iYXNlO2lmKG8oaSkmJihpPWYuZXh0ZW5kKGkpKSwiZnVuY3Rpb24iPT10eXBlb2YgaSl7dmFyIHA7aWYodChpLmNpZCkmJnZvaWQgMD09PShpPWZ1bmN0aW9uKGUsaSl7aWYocihlLmVycm9yKSYmbihlLmVycm9yQ29tcCkpcmV0dXJuIGUuZXJyb3JDb21wO2lmKG4oZS5yZXNvbHZlZCkpcmV0dXJuIGUucmVzb2x2ZWQ7dmFyIGE9SHQ7YSYmbihlLm93bmVycykmJi0xPT09ZS5vd25lcnMuaW5kZXhPZihhKSYmZS5vd25lcnMucHVzaChhKTtpZihyKGUubG9hZGluZykmJm4oZS5sb2FkaW5nQ29tcCkpcmV0dXJuIGUubG9hZGluZ0NvbXA7aWYoYSYmIW4oZS5vd25lcnMpKXt2YXIgcz1lLm93bmVycz1bYV0sYz0hMCxsPW51bGwsZj1udWxsO2EuJG9uKCJob29rOmRlc3Ryb3llZCIsZnVuY3Rpb24oKXtyZXR1cm4gaChzLGEpfSk7dmFyIHA9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1zLmxlbmd0aDt0PG47dCsrKXNbdF0uJGZvcmNlVXBkYXRlKCk7ZSYmKHMubGVuZ3RoPTAsbnVsbCE9PWwmJihjbGVhclRpbWVvdXQobCksbD1udWxsKSxudWxsIT09ZiYmKGNsZWFyVGltZW91dChmKSxmPW51bGwpKX0sZD1EKGZ1bmN0aW9uKHQpe2UucmVzb2x2ZWQ9QnQodCxpKSxjP3MubGVuZ3RoPTA6cCghMCl9KSx2PUQoZnVuY3Rpb24odCl7bihlLmVycm9yQ29tcCkmJihlLmVycm9yPSEwLHAoITApKX0pLG09ZShkLHYpO3JldHVybiBvKG0pJiYodShtKT90KGUucmVzb2x2ZWQpJiZtLnRoZW4oZCx2KTp1KG0uY29tcG9uZW50KSYmKG0uY29tcG9uZW50LnRoZW4oZCx2KSxuKG0uZXJyb3IpJiYoZS5lcnJvckNvbXA9QnQobS5lcnJvcixpKSksbihtLmxvYWRpbmcpJiYoZS5sb2FkaW5nQ29tcD1CdChtLmxvYWRpbmcsaSksMD09PW0uZGVsYXk/ZS5sb2FkaW5nPSEwOmw9c2V0VGltZW91dChmdW5jdGlvbigpe2w9bnVsbCx0KGUucmVzb2x2ZWQpJiZ0KGUuZXJyb3IpJiYoZS5sb2FkaW5nPSEwLHAoITEpKX0sbS5kZWxheXx8MjAwKSksbihtLnRpbWVvdXQpJiYoZj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zj1udWxsLHQoZS5yZXNvbHZlZCkmJnYobnVsbCl9LG0udGltZW91dCkpKSksYz0hMSxlLmxvYWRpbmc/ZS5sb2FkaW5nQ29tcDplLnJlc29sdmVkfX0ocD1pLGYpKSlyZXR1cm4gZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz12ZSgpO3JldHVybiBvLmFzeW5jRmFjdG9yeT1lLG8uYXN5bmNNZXRhPXtkYXRhOnQsY29udGV4dDpuLGNoaWxkcmVuOnIsdGFnOml9LG99KHAsYSxzLGMsbCk7YT1hfHx7fSwkbihpKSxuKGEubW9kZWwpJiZmdW5jdGlvbihlLHQpe3ZhciByPWUubW9kZWwmJmUubW9kZWwucHJvcHx8InZhbHVlIixpPWUubW9kZWwmJmUubW9kZWwuZXZlbnR8fCJpbnB1dCI7KHQuYXR0cnN8fCh0LmF0dHJzPXt9KSlbcl09dC5tb2RlbC52YWx1ZTt2YXIgbz10Lm9ufHwodC5vbj17fSksYT1vW2ldLHM9dC5tb2RlbC5jYWxsYmFjaztuKGEpPyhBcnJheS5pc0FycmF5KGEpPy0xPT09YS5pbmRleE9mKHMpOmEhPT1zKSYmKG9baV09W3NdLmNvbmNhdChhKSk6b1tpXT1zfShpLm9wdGlvbnMsYSk7dmFyIGQ9ZnVuY3Rpb24oZSxyLGkpe3ZhciBvPXIub3B0aW9ucy5wcm9wcztpZighdChvKSl7dmFyIGE9e30scz1lLmF0dHJzLGM9ZS5wcm9wcztpZihuKHMpfHxuKGMpKWZvcih2YXIgdSBpbiBvKXt2YXIgbD1DKHUpO290KGEsYyx1LGwsITApfHxvdChhLHMsdSxsLCExKX1yZXR1cm4gYX19KGEsaSk7aWYocihpLm9wdGlvbnMuZnVuY3Rpb25hbCkpcmV0dXJuIGZ1bmN0aW9uKHQscixpLG8sYSl7dmFyIHM9dC5vcHRpb25zLGM9e30sdT1zLnByb3BzO2lmKG4odSkpZm9yKHZhciBsIGluIHUpY1tsXT1NZShsLHUscnx8ZSk7ZWxzZSBuKGkuYXR0cnMpJiZOdChjLGkuYXR0cnMpLG4oaS5wcm9wcykmJk50KGMsaS5wcm9wcyk7dmFyIGY9bmV3IFR0KGksYyxhLG8sdCkscD1zLnJlbmRlci5jYWxsKG51bGwsZi5fYyxmKTtpZihwIGluc3RhbmNlb2YgcGUpcmV0dXJuIEV0KHAsaSxmLnBhcmVudCxzKTtpZihBcnJheS5pc0FycmF5KHApKXtmb3IodmFyIGQ9YXQocCl8fFtdLHY9bmV3IEFycmF5KGQubGVuZ3RoKSxoPTA7aDxkLmxlbmd0aDtoKyspdltoXT1FdChkW2hdLGksZi5wYXJlbnQscyk7cmV0dXJuIHZ9fShpLGQsYSxzLGMpO3ZhciB2PWEub247aWYoYS5vbj1hLm5hdGl2ZU9uLHIoaS5vcHRpb25zLmFic3RyYWN0KSl7dmFyIG09YS5zbG90O2E9e30sbSYmKGEuc2xvdD1tKX0hZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuaG9va3x8KGUuaG9vaz17fSksbj0wO248RHQubGVuZ3RoO24rKyl7dmFyIHI9RHRbbl0saT10W3JdLG89anRbcl07aT09PW98fGkmJmkuX21lcmdlZHx8KHRbcl09aT9NdChvLGkpOm8pfX0oYSk7dmFyIHk9aS5vcHRpb25zLm5hbWV8fGw7cmV0dXJuIG5ldyBwZSgidnVlLWNvbXBvbmVudC0iK2kuY2lkKyh5PyItIit5OiIiKSxhLHZvaWQgMCx2b2lkIDAsdm9pZCAwLHMse0N0b3I6aSxwcm9wc0RhdGE6ZCxsaXN0ZW5lcnM6dix0YWc6bCxjaGlsZHJlbjpjfSxwKX19fWZ1bmN0aW9uIE10KGUsdCl7dmFyIG49ZnVuY3Rpb24obixyKXtlKG4sciksdChuLHIpfTtyZXR1cm4gbi5fbWVyZ2VkPSEwLG59dmFyIEl0PTEsRnQ9MjtmdW5jdGlvbiBQdChlLGEscyxjLHUsbCl7cmV0dXJuKEFycmF5LmlzQXJyYXkocyl8fGkocykpJiYodT1jLGM9cyxzPXZvaWQgMCkscihsKSYmKHU9RnQpLGZ1bmN0aW9uKGUsaSxhLHMsYyl7aWYobihhKSYmbihhLl9fb2JfXykpcmV0dXJuIHZlKCk7bihhKSYmbihhLmlzKSYmKGk9YS5pcyk7aWYoIWkpcmV0dXJuIHZlKCk7QXJyYXkuaXNBcnJheShzKSYmImZ1bmN0aW9uIj09dHlwZW9mIHNbMF0mJigoYT1hfHx7fSkuc2NvcGVkU2xvdHM9e2RlZmF1bHQ6c1swXX0scy5sZW5ndGg9MCk7Yz09PUZ0P3M9YXQocyk6Yz09PUl0JiYocz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylpZihBcnJheS5pc0FycmF5KGVbdF0pKXJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGUpO3JldHVybiBlfShzKSk7dmFyIHUsbDtpZigic3RyaW5nIj09dHlwZW9mIGkpe3ZhciBmO2w9ZS4kdm5vZGUmJmUuJHZub2RlLm5zfHxGLmdldFRhZ05hbWVzcGFjZShpKSx1PUYuaXNSZXNlcnZlZFRhZyhpKT9uZXcgcGUoRi5wYXJzZVBsYXRmb3JtVGFnTmFtZShpKSxhLHMsdm9pZCAwLHZvaWQgMCxlKTphJiZhLnByZXx8IW4oZj1MZShlLiRvcHRpb25zLCJjb21wb25lbnRzIixpKSk/bmV3IHBlKGksYSxzLHZvaWQgMCx2b2lkIDAsZSk6THQoZixhLGUscyxpKX1lbHNlIHU9THQoaSxhLGUscyk7cmV0dXJuIEFycmF5LmlzQXJyYXkodSk/dTpuKHUpPyhuKGwpJiZmdW5jdGlvbiBlKGksbyxhKXtpLm5zPW87ImZvcmVpZ25PYmplY3QiPT09aS50YWcmJihvPXZvaWQgMCxhPSEwKTtpZihuKGkuY2hpbGRyZW4pKWZvcih2YXIgcz0wLGM9aS5jaGlsZHJlbi5sZW5ndGg7czxjO3MrKyl7dmFyIHU9aS5jaGlsZHJlbltzXTtuKHUudGFnKSYmKHQodS5ucyl8fHIoYSkmJiJzdmciIT09dS50YWcpJiZlKHUsbyxhKX19KHUsbCksbihhKSYmZnVuY3Rpb24oZSl7byhlLnN0eWxlKSYmZXQoZS5zdHlsZSk7byhlLmNsYXNzKSYmZXQoZS5jbGFzcyl9KGEpLHUpOnZlKCl9KGUsYSxzLGMsdSl9dmFyIFJ0LEh0PW51bGw7ZnVuY3Rpb24gQnQoZSx0KXtyZXR1cm4oZS5fX2VzTW9kdWxlfHxvZSYmIk1vZHVsZSI9PT1lW1N5bWJvbC50b1N0cmluZ1RhZ10pJiYoZT1lLmRlZmF1bHQpLG8oZSk/dC5leHRlbmQoZSk6ZX1mdW5jdGlvbiBVdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJmUuYXN5bmNGYWN0b3J5fWZ1bmN0aW9uIHp0KGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07aWYobihyKSYmKG4oci5jb21wb25lbnRPcHRpb25zKXx8VXQocikpKXJldHVybiByfX1mdW5jdGlvbiBWdChlLHQpe1J0LiRvbihlLHQpfWZ1bmN0aW9uIEt0KGUsdCl7UnQuJG9mZihlLHQpfWZ1bmN0aW9uIEp0KGUsdCl7dmFyIG49UnQ7cmV0dXJuIGZ1bmN0aW9uIHIoKXtudWxsIT09dC5hcHBseShudWxsLGFyZ3VtZW50cykmJm4uJG9mZihlLHIpfX1mdW5jdGlvbiBxdChlLHQsbil7UnQ9ZSxydCh0LG58fHt9LFZ0LEt0LEp0LGUpLFJ0PXZvaWQgMH12YXIgV3Q9bnVsbDtmdW5jdGlvbiBadChlKXt2YXIgdD1XdDtyZXR1cm4gV3Q9ZSxmdW5jdGlvbigpe1d0PXR9fWZ1bmN0aW9uIEd0KGUpe2Zvcig7ZSYmKGU9ZS4kcGFyZW50KTspaWYoZS5faW5hY3RpdmUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gWHQoZSx0KXtpZih0KXtpZihlLl9kaXJlY3RJbmFjdGl2ZT0hMSxHdChlKSlyZXR1cm59ZWxzZSBpZihlLl9kaXJlY3RJbmFjdGl2ZSlyZXR1cm47aWYoZS5faW5hY3RpdmV8fG51bGw9PT1lLl9pbmFjdGl2ZSl7ZS5faW5hY3RpdmU9ITE7Zm9yKHZhciBuPTA7bjxlLiRjaGlsZHJlbi5sZW5ndGg7bisrKVh0KGUuJGNoaWxkcmVuW25dKTtZdChlLCJhY3RpdmF0ZWQiKX19ZnVuY3Rpb24gWXQoZSx0KXtsZSgpO3ZhciBuPWUuJG9wdGlvbnNbdF0scj10KyIgaG9vayI7aWYobilmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspSGUobltpXSxlLG51bGwsZSxyKTtlLl9oYXNIb29rRXZlbnQmJmUuJGVtaXQoImhvb2s6Iit0KSxmZSgpfXZhciBRdD1bXSxlbj1bXSx0bj17fSxubj0hMSxybj0hMSxvbj0wO3ZhciBhbj0wLHNuPURhdGUubm93O2lmKHomJiFxKXt2YXIgY249d2luZG93LnBlcmZvcm1hbmNlO2NuJiYiZnVuY3Rpb24iPT10eXBlb2YgY24ubm93JiZzbigpPmRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLnRpbWVTdGFtcCYmKHNuPWZ1bmN0aW9uKCl7cmV0dXJuIGNuLm5vdygpfSl9ZnVuY3Rpb24gdW4oKXt2YXIgZSx0O2Zvcihhbj1zbigpLHJuPSEwLFF0LnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5pZC10LmlkfSksb249MDtvbjxRdC5sZW5ndGg7b24rKykoZT1RdFtvbl0pLmJlZm9yZSYmZS5iZWZvcmUoKSx0PWUuaWQsdG5bdF09bnVsbCxlLnJ1bigpO3ZhciBuPWVuLnNsaWNlKCkscj1RdC5zbGljZSgpO29uPVF0Lmxlbmd0aD1lbi5sZW5ndGg9MCx0bj17fSxubj1ybj0hMSxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdLl9pbmFjdGl2ZT0hMCxYdChlW3RdLCEwKX0obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7Zm9yKDt0LS07KXt2YXIgbj1lW3RdLHI9bi52bTtyLl93YXRjaGVyPT09biYmci5faXNNb3VudGVkJiYhci5faXNEZXN0cm95ZWQmJll0KHIsInVwZGF0ZWQiKX19KHIpLG5lJiZGLmRldnRvb2xzJiZuZS5lbWl0KCJmbHVzaCIpfXZhciBsbj0wLGZuPWZ1bmN0aW9uKGUsdCxuLHIsaSl7dGhpcy52bT1lLGkmJihlLl93YXRjaGVyPXRoaXMpLGUuX3dhdGNoZXJzLnB1c2godGhpcykscj8odGhpcy5kZWVwPSEhci5kZWVwLHRoaXMudXNlcj0hIXIudXNlcix0aGlzLmxhenk9ISFyLmxhenksdGhpcy5zeW5jPSEhci5zeW5jLHRoaXMuYmVmb3JlPXIuYmVmb3JlKTp0aGlzLmRlZXA9dGhpcy51c2VyPXRoaXMubGF6eT10aGlzLnN5bmM9ITEsdGhpcy5jYj1uLHRoaXMuaWQ9Kytsbix0aGlzLmFjdGl2ZT0hMCx0aGlzLmRpcnR5PXRoaXMubGF6eSx0aGlzLmRlcHM9W10sdGhpcy5uZXdEZXBzPVtdLHRoaXMuZGVwSWRzPW5ldyBpZSx0aGlzLm5ld0RlcElkcz1uZXcgaWUsdGhpcy5leHByZXNzaW9uPSIiLCJmdW5jdGlvbiI9PXR5cGVvZiB0P3RoaXMuZ2V0dGVyPXQ6KHRoaXMuZ2V0dGVyPWZ1bmN0aW9uKGUpe2lmKCFILnRlc3QoZSkpe3ZhciB0PWUuc3BsaXQoIi4iKTtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe2lmKCFlKXJldHVybjtlPWVbdFtuXV19cmV0dXJuIGV9fX0odCksdGhpcy5nZXR0ZXJ8fCh0aGlzLmdldHRlcj1TKSksdGhpcy52YWx1ZT10aGlzLmxhenk/dm9pZCAwOnRoaXMuZ2V0KCl9O2ZuLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgZTtsZSh0aGlzKTt2YXIgdD10aGlzLnZtO3RyeXtlPXRoaXMuZ2V0dGVyLmNhbGwodCx0KX1jYXRjaChlKXtpZighdGhpcy51c2VyKXRocm93IGU7UmUoZSx0LCdnZXR0ZXIgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZmluYWxseXt0aGlzLmRlZXAmJmV0KGUpLGZlKCksdGhpcy5jbGVhbnVwRGVwcygpfXJldHVybiBlfSxmbi5wcm90b3R5cGUuYWRkRGVwPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaWQ7dGhpcy5uZXdEZXBJZHMuaGFzKHQpfHwodGhpcy5uZXdEZXBJZHMuYWRkKHQpLHRoaXMubmV3RGVwcy5wdXNoKGUpLHRoaXMuZGVwSWRzLmhhcyh0KXx8ZS5hZGRTdWIodGhpcykpfSxmbi5wcm90b3R5cGUuY2xlYW51cERlcHM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5kZXBzLmxlbmd0aDtlLS07KXt2YXIgdD10aGlzLmRlcHNbZV07dGhpcy5uZXdEZXBJZHMuaGFzKHQuaWQpfHx0LnJlbW92ZVN1Yih0aGlzKX12YXIgbj10aGlzLmRlcElkczt0aGlzLmRlcElkcz10aGlzLm5ld0RlcElkcyx0aGlzLm5ld0RlcElkcz1uLHRoaXMubmV3RGVwSWRzLmNsZWFyKCksbj10aGlzLmRlcHMsdGhpcy5kZXBzPXRoaXMubmV3RGVwcyx0aGlzLm5ld0RlcHM9bix0aGlzLm5ld0RlcHMubGVuZ3RoPTB9LGZuLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmxhenk/dGhpcy5kaXJ0eT0hMDp0aGlzLnN5bmM/dGhpcy5ydW4oKTpmdW5jdGlvbihlKXt2YXIgdD1lLmlkO2lmKG51bGw9PXRuW3RdKXtpZih0blt0XT0hMCxybil7Zm9yKHZhciBuPVF0Lmxlbmd0aC0xO24+b24mJlF0W25dLmlkPmUuaWQ7KW4tLTtRdC5zcGxpY2UobisxLDAsZSl9ZWxzZSBRdC5wdXNoKGUpO25ufHwobm49ITAsWWUodW4pKX19KHRoaXMpfSxmbi5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpe3ZhciBlPXRoaXMuZ2V0KCk7aWYoZSE9PXRoaXMudmFsdWV8fG8oZSl8fHRoaXMuZGVlcCl7dmFyIHQ9dGhpcy52YWx1ZTtpZih0aGlzLnZhbHVlPWUsdGhpcy51c2VyKXRyeXt0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfWNhdGNoKGUpe1JlKGUsdGhpcy52bSwnY2FsbGJhY2sgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZWxzZSB0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfX19LGZuLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbigpe3RoaXMudmFsdWU9dGhpcy5nZXQoKSx0aGlzLmRpcnR5PSExfSxmbi5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuZGVwcy5sZW5ndGg7ZS0tOyl0aGlzLmRlcHNbZV0uZGVwZW5kKCl9LGZuLnByb3RvdHlwZS50ZWFyZG93bj1mdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZlKXt0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkfHxoKHRoaXMudm0uX3dhdGNoZXJzLHRoaXMpO2Zvcih2YXIgZT10aGlzLmRlcHMubGVuZ3RoO2UtLTspdGhpcy5kZXBzW2VdLnJlbW92ZVN1Yih0aGlzKTt0aGlzLmFjdGl2ZT0hMX19O3ZhciBwbj17ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0OlMsc2V0OlN9O2Z1bmN0aW9uIGRuKGUsdCxuKXtwbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1t0XVtuXX0scG4uc2V0PWZ1bmN0aW9uKGUpe3RoaXNbdF1bbl09ZX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbixwbil9ZnVuY3Rpb24gdm4oZSl7ZS5fd2F0Y2hlcnM9W107dmFyIHQ9ZS4kb3B0aW9uczt0LnByb3BzJiZmdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnMucHJvcHNEYXRhfHx7fSxyPWUuX3Byb3BzPXt9LGk9ZS4kb3B0aW9ucy5fcHJvcEtleXM9W107ZS4kcGFyZW50JiYkZSghMSk7dmFyIG89ZnVuY3Rpb24obyl7aS5wdXNoKG8pO3ZhciBhPU1lKG8sdCxuLGUpO3hlKHIsbyxhKSxvIGluIGV8fGRuKGUsIl9wcm9wcyIsbyl9O2Zvcih2YXIgYSBpbiB0KW8oYSk7JGUoITApfShlLHQucHJvcHMpLHQubWV0aG9kcyYmZnVuY3Rpb24oZSx0KXtlLiRvcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWVbbl09ImZ1bmN0aW9uIiE9dHlwZW9mIHRbbl0/Uzp4KHRbbl0sZSl9KGUsdC5tZXRob2RzKSx0LmRhdGE/ZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5kYXRhO3ModD1lLl9kYXRhPSJmdW5jdGlvbiI9PXR5cGVvZiB0P2Z1bmN0aW9uKGUsdCl7bGUoKTt0cnl7cmV0dXJuIGUuY2FsbCh0LHQpfWNhdGNoKGUpe3JldHVybiBSZShlLHQsImRhdGEoKSIpLHt9fWZpbmFsbHl7ZmUoKX19KHQsZSk6dHx8e30pfHwodD17fSk7dmFyIG49T2JqZWN0LmtleXModCkscj1lLiRvcHRpb25zLnByb3BzLGk9KGUuJG9wdGlvbnMubWV0aG9kcyxuLmxlbmd0aCk7Zm9yKDtpLS07KXt2YXIgbz1uW2ldO3ImJnkocixvKXx8KGE9dm9pZCAwLDM2IT09KGE9KG8rIiIpLmNoYXJDb2RlQXQoMCkpJiY5NSE9PWEmJmRuKGUsIl9kYXRhIixvKSl9dmFyIGE7Q2UodCwhMCl9KGUpOkNlKGUuX2RhdGE9e30sITApLHQuY29tcHV0ZWQmJmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5fY29tcHV0ZWRXYXRjaGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGUoKTtmb3IodmFyIGkgaW4gdCl7dmFyIG89dFtpXSxhPSJmdW5jdGlvbiI9PXR5cGVvZiBvP286by5nZXQ7cnx8KG5baV09bmV3IGZuKGUsYXx8UyxTLGhuKSksaSBpbiBlfHxtbihlLGksbyl9fShlLHQuY29tcHV0ZWQpLHQud2F0Y2gmJnQud2F0Y2ghPT1ZJiZmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dO2lmKEFycmF5LmlzQXJyYXkocikpZm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspX24oZSxuLHJbaV0pO2Vsc2UgX24oZSxuLHIpfX0oZSx0LndhdGNoKX12YXIgaG49e2xhenk6ITB9O2Z1bmN0aW9uIG1uKGUsdCxuKXt2YXIgcj0hdGUoKTsiZnVuY3Rpb24iPT10eXBlb2Ygbj8ocG4uZ2V0PXI/eW4odCk6Z24obikscG4uc2V0PVMpOihwbi5nZXQ9bi5nZXQ/ciYmITEhPT1uLmNhY2hlP3luKHQpOmduKG4uZ2V0KTpTLHBuLnNldD1uLnNldHx8UyksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxwbil9ZnVuY3Rpb24geW4oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY29tcHV0ZWRXYXRjaGVycyYmdGhpcy5fY29tcHV0ZWRXYXRjaGVyc1tlXTtpZih0KXJldHVybiB0LmRpcnR5JiZ0LmV2YWx1YXRlKCksY2UudGFyZ2V0JiZ0LmRlcGVuZCgpLHQudmFsdWV9fWZ1bmN0aW9uIGduKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyx0aGlzKX19ZnVuY3Rpb24gX24oZSx0LG4scil7cmV0dXJuIHMobikmJihyPW4sbj1uLmhhbmRsZXIpLCJzdHJpbmciPT10eXBlb2YgbiYmKG49ZVtuXSksZS4kd2F0Y2godCxuLHIpfXZhciBibj0wO2Z1bmN0aW9uICRuKGUpe3ZhciB0PWUub3B0aW9ucztpZihlLnN1cGVyKXt2YXIgbj0kbihlLnN1cGVyKTtpZihuIT09ZS5zdXBlck9wdGlvbnMpe2Uuc3VwZXJPcHRpb25zPW47dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLm9wdGlvbnMscj1lLnNlYWxlZE9wdGlvbnM7Zm9yKHZhciBpIGluIG4pbltpXSE9PXJbaV0mJih0fHwodD17fSksdFtpXT1uW2ldKTtyZXR1cm4gdH0oZSk7ciYmQShlLmV4dGVuZE9wdGlvbnMsciksKHQ9ZS5vcHRpb25zPURlKG4sZS5leHRlbmRPcHRpb25zKSkubmFtZSYmKHQuY29tcG9uZW50c1t0Lm5hbWVdPWUpfX1yZXR1cm4gdH1mdW5jdGlvbiB3bihlKXt0aGlzLl9pbml0KGUpfWZ1bmN0aW9uIENuKGUpe2UuY2lkPTA7dmFyIHQ9MTtlLmV4dGVuZD1mdW5jdGlvbihlKXtlPWV8fHt9O3ZhciBuPXRoaXMscj1uLmNpZCxpPWUuX0N0b3J8fChlLl9DdG9yPXt9KTtpZihpW3JdKXJldHVybiBpW3JdO3ZhciBvPWUubmFtZXx8bi5vcHRpb25zLm5hbWUsYT1mdW5jdGlvbihlKXt0aGlzLl9pbml0KGUpfTtyZXR1cm4oYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWEsYS5jaWQ9dCsrLGEub3B0aW9ucz1EZShuLm9wdGlvbnMsZSksYS5zdXBlcj1uLGEub3B0aW9ucy5wcm9wcyYmZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWRuKGUucHJvdG90eXBlLCJfcHJvcHMiLG4pfShhKSxhLm9wdGlvbnMuY29tcHV0ZWQmJmZ1bmN0aW9uKGUpe3ZhciB0PWUub3B0aW9ucy5jb21wdXRlZDtmb3IodmFyIG4gaW4gdCltbihlLnByb3RvdHlwZSxuLHRbbl0pfShhKSxhLmV4dGVuZD1uLmV4dGVuZCxhLm1peGluPW4ubWl4aW4sYS51c2U9bi51c2UsTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2FbZV09bltlXX0pLG8mJihhLm9wdGlvbnMuY29tcG9uZW50c1tvXT1hKSxhLnN1cGVyT3B0aW9ucz1uLm9wdGlvbnMsYS5leHRlbmRPcHRpb25zPWUsYS5zZWFsZWRPcHRpb25zPUEoe30sYS5vcHRpb25zKSxpW3JdPWEsYX19ZnVuY3Rpb24geG4oZSl7cmV0dXJuIGUmJihlLkN0b3Iub3B0aW9ucy5uYW1lfHxlLnRhZyl9ZnVuY3Rpb24ga24oZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lLmluZGV4T2YodCk+LTE6InN0cmluZyI9PXR5cGVvZiBlP2Uuc3BsaXQoIiwiKS5pbmRleE9mKHQpPi0xOihuPWUsIltvYmplY3QgUmVnRXhwXSI9PT1hLmNhbGwobikmJmUudGVzdCh0KSk7dmFyIG59ZnVuY3Rpb24gQW4oZSx0KXt2YXIgbj1lLmNhY2hlLHI9ZS5rZXlzLGk9ZS5fdm5vZGU7Zm9yKHZhciBvIGluIG4pe3ZhciBhPW5bb107aWYoYSl7dmFyIHM9eG4oYS5jb21wb25lbnRPcHRpb25zKTtzJiYhdChzKSYmT24obixvLHIsaSl9fX1mdW5jdGlvbiBPbihlLHQsbixyKXt2YXIgaT1lW3RdOyFpfHxyJiZpLnRhZz09PXIudGFnfHxpLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCksZVt0XT1udWxsLGgobix0KX0hZnVuY3Rpb24odCl7dC5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcztuLl91aWQ9Ym4rKyxuLl9pc1Z1ZT0hMCx0JiZ0Ll9pc0NvbXBvbmVudD9mdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLmNvbnN0cnVjdG9yLm9wdGlvbnMpLHI9dC5fcGFyZW50Vm5vZGU7bi5wYXJlbnQ9dC5wYXJlbnQsbi5fcGFyZW50Vm5vZGU9cjt2YXIgaT1yLmNvbXBvbmVudE9wdGlvbnM7bi5wcm9wc0RhdGE9aS5wcm9wc0RhdGEsbi5fcGFyZW50TGlzdGVuZXJzPWkubGlzdGVuZXJzLG4uX3JlbmRlckNoaWxkcmVuPWkuY2hpbGRyZW4sbi5fY29tcG9uZW50VGFnPWkudGFnLHQucmVuZGVyJiYobi5yZW5kZXI9dC5yZW5kZXIsbi5zdGF0aWNSZW5kZXJGbnM9dC5zdGF0aWNSZW5kZXJGbnMpfShuLHQpOm4uJG9wdGlvbnM9RGUoJG4obi5jb25zdHJ1Y3RvciksdHx8e30sbiksbi5fcmVuZGVyUHJveHk9bixuLl9zZWxmPW4sZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucyxuPXQucGFyZW50O2lmKG4mJiF0LmFic3RyYWN0KXtmb3IoO24uJG9wdGlvbnMuYWJzdHJhY3QmJm4uJHBhcmVudDspbj1uLiRwYXJlbnQ7bi4kY2hpbGRyZW4ucHVzaChlKX1lLiRwYXJlbnQ9bixlLiRyb290PW4/bi4kcm9vdDplLGUuJGNoaWxkcmVuPVtdLGUuJHJlZnM9e30sZS5fd2F0Y2hlcj1udWxsLGUuX2luYWN0aXZlPW51bGwsZS5fZGlyZWN0SW5hY3RpdmU9ITEsZS5faXNNb3VudGVkPSExLGUuX2lzRGVzdHJveWVkPSExLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITF9KG4pLGZ1bmN0aW9uKGUpe2UuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLGUuX2hhc0hvb2tFdmVudD0hMTt2YXIgdD1lLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7dCYmcXQoZSx0KX0obiksZnVuY3Rpb24odCl7dC5fdm5vZGU9bnVsbCx0Ll9zdGF0aWNUcmVlcz1udWxsO3ZhciBuPXQuJG9wdGlvbnMscj10LiR2bm9kZT1uLl9wYXJlbnRWbm9kZSxpPXImJnIuY29udGV4dDt0LiRzbG90cz11dChuLl9yZW5kZXJDaGlsZHJlbixpKSx0LiRzY29wZWRTbG90cz1lLHQuX2M9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMSl9LHQuJGNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMCl9O3ZhciBvPXImJnIuZGF0YTt4ZSh0LCIkYXR0cnMiLG8mJm8uYXR0cnN8fGUsbnVsbCwhMCkseGUodCwiJGxpc3RlbmVycyIsbi5fcGFyZW50TGlzdGVuZXJzfHxlLG51bGwsITApfShuKSxZdChuLCJiZWZvcmVDcmVhdGUiKSxmdW5jdGlvbihlKXt2YXIgdD1jdChlLiRvcHRpb25zLmluamVjdCxlKTt0JiYoJGUoITEpLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7eGUoZSxuLHRbbl0pfSksJGUoITApKX0obiksdm4obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5wcm92aWRlO3QmJihlLl9wcm92aWRlZD0iZnVuY3Rpb24iPT10eXBlb2YgdD90LmNhbGwoZSk6dCl9KG4pLFl0KG4sImNyZWF0ZWQiKSxuLiRvcHRpb25zLmVsJiZuLiRtb3VudChuLiRvcHRpb25zLmVsKX19KHduKSxmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fSxuPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcHN9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRkYXRhIix0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRwcm9wcyIsbiksZS5wcm90b3R5cGUuJHNldD1rZSxlLnByb3RvdHlwZS4kZGVsZXRlPUFlLGUucHJvdG90eXBlLiR3YXRjaD1mdW5jdGlvbihlLHQsbil7aWYocyh0KSlyZXR1cm4gX24odGhpcyxlLHQsbik7KG49bnx8e30pLnVzZXI9ITA7dmFyIHI9bmV3IGZuKHRoaXMsZSx0LG4pO2lmKG4uaW1tZWRpYXRlKXRyeXt0LmNhbGwodGhpcyxyLnZhbHVlKX1jYXRjaChlKXtSZShlLHRoaXMsJ2NhbGxiYWNrIGZvciBpbW1lZGlhdGUgd2F0Y2hlciAiJytyLmV4cHJlc3Npb24rJyInKX1yZXR1cm4gZnVuY3Rpb24oKXtyLnRlYXJkb3duKCl9fX0od24pLGZ1bmN0aW9uKGUpe3ZhciB0PS9eaG9vazovO2UucHJvdG90eXBlLiRvbj1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXM7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIGk9MCxvPWUubGVuZ3RoO2k8bztpKyspci4kb24oZVtpXSxuKTtlbHNlKHIuX2V2ZW50c1tlXXx8KHIuX2V2ZW50c1tlXT1bXSkpLnB1c2gobiksdC50ZXN0KGUpJiYoci5faGFzSG9va0V2ZW50PSEwKTtyZXR1cm4gcn0sZS5wcm90b3R5cGUuJG9uY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2Z1bmN0aW9uIHIoKXtuLiRvZmYoZSxyKSx0LmFwcGx5KG4sYXJndW1lbnRzKX1yZXR1cm4gci5mbj10LG4uJG9uKGUsciksbn0sZS5wcm90b3R5cGUuJG9mZj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG4uX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLG47aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciByPTAsaT1lLmxlbmd0aDtyPGk7cisrKW4uJG9mZihlW3JdLHQpO3JldHVybiBufXZhciBvLGE9bi5fZXZlbnRzW2VdO2lmKCFhKXJldHVybiBuO2lmKCF0KXJldHVybiBuLl9ldmVudHNbZV09bnVsbCxuO2Zvcih2YXIgcz1hLmxlbmd0aDtzLS07KWlmKChvPWFbc10pPT09dHx8by5mbj09PXQpe2Euc3BsaWNlKHMsMSk7YnJlYWt9cmV0dXJuIG59LGUucHJvdG90eXBlLiRlbWl0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2V2ZW50c1tlXTtpZih0KXt0PXQubGVuZ3RoPjE/ayh0KTp0O2Zvcih2YXIgbj1rKGFyZ3VtZW50cywxKSxyPSdldmVudCBoYW5kbGVyIGZvciAiJytlKyciJyxpPTAsbz10Lmxlbmd0aDtpPG87aSsrKUhlKHRbaV0sdGhpcyxuLHRoaXMscil9cmV0dXJuIHRoaXN9fSh3biksZnVuY3Rpb24oZSl7ZS5wcm90b3R5cGUuX3VwZGF0ZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMscj1uLiRlbCxpPW4uX3Zub2RlLG89WnQobik7bi5fdm5vZGU9ZSxuLiRlbD1pP24uX19wYXRjaF9fKGksZSk6bi5fX3BhdGNoX18obi4kZWwsZSx0LCExKSxvKCksciYmKHIuX192dWVfXz1udWxsKSxuLiRlbCYmKG4uJGVsLl9fdnVlX189biksbi4kdm5vZGUmJm4uJHBhcmVudCYmbi4kdm5vZGU9PT1uLiRwYXJlbnQuX3Zub2RlJiYobi4kcGFyZW50LiRlbD1uLiRlbCl9LGUucHJvdG90eXBlLiRmb3JjZVVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXImJnRoaXMuX3dhdGNoZXIudXBkYXRlKCl9LGUucHJvdG90eXBlLiRkZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighZS5faXNCZWluZ0Rlc3Ryb3llZCl7WXQoZSwiYmVmb3JlRGVzdHJveSIpLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITA7dmFyIHQ9ZS4kcGFyZW50OyF0fHx0Ll9pc0JlaW5nRGVzdHJveWVkfHxlLiRvcHRpb25zLmFic3RyYWN0fHxoKHQuJGNoaWxkcmVuLGUpLGUuX3dhdGNoZXImJmUuX3dhdGNoZXIudGVhcmRvd24oKTtmb3IodmFyIG49ZS5fd2F0Y2hlcnMubGVuZ3RoO24tLTspZS5fd2F0Y2hlcnNbbl0udGVhcmRvd24oKTtlLl9kYXRhLl9fb2JfXyYmZS5fZGF0YS5fX29iX18udm1Db3VudC0tLGUuX2lzRGVzdHJveWVkPSEwLGUuX19wYXRjaF9fKGUuX3Zub2RlLG51bGwpLFl0KGUsImRlc3Ryb3llZCIpLGUuJG9mZigpLGUuJGVsJiYoZS4kZWwuX192dWVfXz1udWxsKSxlLiR2bm9kZSYmKGUuJHZub2RlLnBhcmVudD1udWxsKX19fSh3biksZnVuY3Rpb24oZSl7U3QoZS5wcm90b3R5cGUpLGUucHJvdG90eXBlLiRuZXh0VGljaz1mdW5jdGlvbihlKXtyZXR1cm4gWWUoZSx0aGlzKX0sZS5wcm90b3R5cGUuX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuJG9wdGlvbnMscj1uLnJlbmRlcixpPW4uX3BhcmVudFZub2RlO2kmJih0LiRzY29wZWRTbG90cz1mdChpLmRhdGEuc2NvcGVkU2xvdHMsdC4kc2xvdHMsdC4kc2NvcGVkU2xvdHMpKSx0LiR2bm9kZT1pO3RyeXtIdD10LGU9ci5jYWxsKHQuX3JlbmRlclByb3h5LHQuJGNyZWF0ZUVsZW1lbnQpfWNhdGNoKG4pe1JlKG4sdCwicmVuZGVyIiksZT10Ll92bm9kZX1maW5hbGx5e0h0PW51bGx9cmV0dXJuIEFycmF5LmlzQXJyYXkoZSkmJjE9PT1lLmxlbmd0aCYmKGU9ZVswXSksZSBpbnN0YW5jZW9mIHBlfHwoZT12ZSgpKSxlLnBhcmVudD1pLGV9fSh3bik7dmFyIFNuPVtTdHJpbmcsUmVnRXhwLEFycmF5XSxUbj17S2VlcEFsaXZlOntuYW1lOiJrZWVwLWFsaXZlIixhYnN0cmFjdDohMCxwcm9wczp7aW5jbHVkZTpTbixleGNsdWRlOlNuLG1heDpbU3RyaW5nLE51bWJlcl19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5rZXlzPVtdfSxkZXN0cm95ZWQ6ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gdGhpcy5jYWNoZSlPbih0aGlzLmNhY2hlLGUsdGhpcy5rZXlzKX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy4kd2F0Y2goImluY2x1ZGUiLGZ1bmN0aW9uKHQpe0FuKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGtuKHQsZSl9KX0pLHRoaXMuJHdhdGNoKCJleGNsdWRlIixmdW5jdGlvbih0KXtBbihlLGZ1bmN0aW9uKGUpe3JldHVybiFrbih0LGUpfSl9KX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kc2xvdHMuZGVmYXVsdCx0PXp0KGUpLG49dCYmdC5jb21wb25lbnRPcHRpb25zO2lmKG4pe3ZhciByPXhuKG4pLGk9dGhpcy5pbmNsdWRlLG89dGhpcy5leGNsdWRlO2lmKGkmJighcnx8IWtuKGkscikpfHxvJiZyJiZrbihvLHIpKXJldHVybiB0O3ZhciBhPXRoaXMuY2FjaGUscz10aGlzLmtleXMsYz1udWxsPT10LmtleT9uLkN0b3IuY2lkKyhuLnRhZz8iOjoiK24udGFnOiIiKTp0LmtleTthW2NdPyh0LmNvbXBvbmVudEluc3RhbmNlPWFbY10uY29tcG9uZW50SW5zdGFuY2UsaChzLGMpLHMucHVzaChjKSk6KGFbY109dCxzLnB1c2goYyksdGhpcy5tYXgmJnMubGVuZ3RoPnBhcnNlSW50KHRoaXMubWF4KSYmT24oYSxzWzBdLHMsdGhpcy5fdm5vZGUpKSx0LmRhdGEua2VlcEFsaXZlPSEwfXJldHVybiB0fHxlJiZlWzBdfX19OyFmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEZ9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiY29uZmlnIix0KSxlLnV0aWw9e3dhcm46YWUsZXh0ZW5kOkEsbWVyZ2VPcHRpb25zOkRlLGRlZmluZVJlYWN0aXZlOnhlfSxlLnNldD1rZSxlLmRlbGV0ZT1BZSxlLm5leHRUaWNrPVllLGUub2JzZXJ2YWJsZT1mdW5jdGlvbihlKXtyZXR1cm4gQ2UoZSksZX0sZS5vcHRpb25zPU9iamVjdC5jcmVhdGUobnVsbCksTS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Uub3B0aW9uc1t0KyJzIl09T2JqZWN0LmNyZWF0ZShudWxsKX0pLGUub3B0aW9ucy5fYmFzZT1lLEEoZS5vcHRpb25zLmNvbXBvbmVudHMsVG4pLGZ1bmN0aW9uKGUpe2UudXNlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2luc3RhbGxlZFBsdWdpbnN8fCh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zPVtdKTtpZih0LmluZGV4T2YoZSk+LTEpcmV0dXJuIHRoaXM7dmFyIG49ayhhcmd1bWVudHMsMSk7cmV0dXJuIG4udW5zaGlmdCh0aGlzKSwiZnVuY3Rpb24iPT10eXBlb2YgZS5pbnN0YWxsP2UuaW5zdGFsbC5hcHBseShlLG4pOiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmFwcGx5KG51bGwsbiksdC5wdXNoKGUpLHRoaXN9fShlKSxmdW5jdGlvbihlKXtlLm1peGluPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnM9RGUodGhpcy5vcHRpb25zLGUpLHRoaXN9fShlKSxDbihlKSxmdW5jdGlvbihlKXtNLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBuPygiY29tcG9uZW50Ij09PXQmJnMobikmJihuLm5hbWU9bi5uYW1lfHxlLG49dGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChuKSksImRpcmVjdGl2ZSI9PT10JiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmKG49e2JpbmQ6bix1cGRhdGU6bn0pLHRoaXMub3B0aW9uc1t0KyJzIl1bZV09bixuKTp0aGlzLm9wdGlvbnNbdCsicyJdW2VdfX0pfShlKX0od24pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRpc1NlcnZlciIse2dldDp0ZX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRzc3JDb250ZXh0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHZub2RlJiZ0aGlzLiR2bm9kZS5zc3JDb250ZXh0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3biwiRnVuY3Rpb25hbFJlbmRlckNvbnRleHQiLHt2YWx1ZTpUdH0pLHduLnZlcnNpb249IjIuNi4xMiI7dmFyIEVuPXAoInN0eWxlLGNsYXNzIiksTm49cCgiaW5wdXQsdGV4dGFyZWEsb3B0aW9uLHNlbGVjdCxwcm9ncmVzcyIpLGpuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4idmFsdWUiPT09biYmTm4oZSkmJiJidXR0b24iIT09dHx8InNlbGVjdGVkIj09PW4mJiJvcHRpb24iPT09ZXx8ImNoZWNrZWQiPT09biYmImlucHV0Ij09PWV8fCJtdXRlZCI9PT1uJiYidmlkZW8iPT09ZX0sRG49cCgiY29udGVudGVkaXRhYmxlLGRyYWdnYWJsZSxzcGVsbGNoZWNrIiksTG49cCgiZXZlbnRzLGNhcmV0LHR5cGluZyxwbGFpbnRleHQtb25seSIpLE1uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEhuKHQpfHwiZmFsc2UiPT09dD8iZmFsc2UiOiJjb250ZW50ZWRpdGFibGUiPT09ZSYmTG4odCk/dDoidHJ1ZSJ9LEluPXAoImFsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLGVuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSxyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLHRydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUiKSxGbj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsUG49ZnVuY3Rpb24oZSl7cmV0dXJuIjoiPT09ZS5jaGFyQXQoNSkmJiJ4bGluayI9PT1lLnNsaWNlKDAsNSl9LFJuPWZ1bmN0aW9uKGUpe3JldHVybiBQbihlKT9lLnNsaWNlKDYsZS5sZW5ndGgpOiIifSxIbj1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZXx8ITE9PT1lfTtmdW5jdGlvbiBCbihlKXtmb3IodmFyIHQ9ZS5kYXRhLHI9ZSxpPWU7bihpLmNvbXBvbmVudEluc3RhbmNlKTspKGk9aS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpJiZpLmRhdGEmJih0PVVuKGkuZGF0YSx0KSk7Zm9yKDtuKHI9ci5wYXJlbnQpOylyJiZyLmRhdGEmJih0PVVuKHQsci5kYXRhKSk7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYobihlKXx8bih0KSlyZXR1cm4gem4oZSxWbih0KSk7cmV0dXJuIiJ9KHQuc3RhdGljQ2xhc3MsdC5jbGFzcyl9ZnVuY3Rpb24gVW4oZSx0KXtyZXR1cm57c3RhdGljQ2xhc3M6em4oZS5zdGF0aWNDbGFzcyx0LnN0YXRpY0NsYXNzKSxjbGFzczpuKGUuY2xhc3MpP1tlLmNsYXNzLHQuY2xhc3NdOnQuY2xhc3N9fWZ1bmN0aW9uIHpuKGUsdCl7cmV0dXJuIGU/dD9lKyIgIit0OmU6dHx8IiJ9ZnVuY3Rpb24gVm4oZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9IiIsaT0wLG89ZS5sZW5ndGg7aTxvO2krKyluKHQ9Vm4oZVtpXSkpJiYiIiE9PXQmJihyJiYocis9IiAiKSxyKz10KTtyZXR1cm4gcn0oZSk6byhlKT9mdW5jdGlvbihlKXt2YXIgdD0iIjtmb3IodmFyIG4gaW4gZSllW25dJiYodCYmKHQrPSIgIiksdCs9bik7cmV0dXJuIHR9KGUpOiJzdHJpbmciPT10eXBlb2YgZT9lOiIifXZhciBLbj17c3ZnOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsbWF0aDoiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCJ9LEpuPXAoImh0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGgxLGgyLGgzLGg0LGg1LGg2LGhncm91cCxuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSxkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnRjLHJ1YnkscyxzYW1wLHNtYWxsLHNwYW4sc3Ryb25nLHN1YixzdXAsdGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSxjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsY2FwdGlvbixjb2wsY29sZ3JvdXAsdGFibGUsdGhlYWQsdGJvZHksdGQsdGgsdHIsYnV0dG9uLGRhdGFsaXN0LGZpZWxkc2V0LGZvcm0saW5wdXQsbGFiZWwsbGVnZW5kLG1ldGVyLG9wdGdyb3VwLG9wdGlvbixvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLGRldGFpbHMsZGlhbG9nLG1lbnUsbWVudWl0ZW0sc3VtbWFyeSxjb250ZW50LGVsZW1lbnQsc2hhZG93LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290IikscW49cCgic3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLGZvcmVpZ25PYmplY3QsZyxnbHlwaCxpbWFnZSxsaW5lLG1hcmtlcixtYXNrLG1pc3NpbmctZ2x5cGgscGF0aCxwYXR0ZXJuLHBvbHlnb24scG9seWxpbmUscmVjdCxzd2l0Y2gsc3ltYm9sLHRleHQsdGV4dHBhdGgsdHNwYW4sdXNlLHZpZXciLCEwKSxXbj1mdW5jdGlvbihlKXtyZXR1cm4gSm4oZSl8fHFuKGUpfTtmdW5jdGlvbiBabihlKXtyZXR1cm4gcW4oZSk/InN2ZyI6Im1hdGgiPT09ZT8ibWF0aCI6dm9pZCAwfXZhciBHbj1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBYbj1wKCJ0ZXh0LG51bWJlcixwYXNzd29yZCxzZWFyY2gsZW1haWwsdGVsLHVybCIpO2Z1bmN0aW9uIFluKGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSl7dmFyIHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKTtyZXR1cm4gdHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iil9cmV0dXJuIGV9dmFyIFFuPU9iamVjdC5mcmVlemUoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiJzZWxlY3QiIT09ZT9uOih0LmRhdGEmJnQuZGF0YS5hdHRycyYmdm9pZCAwIT09dC5kYXRhLmF0dHJzLm11bHRpcGxlJiZuLnNldEF0dHJpYnV0ZSgibXVsdGlwbGUiLCJtdWx0aXBsZSIpLG4pfSxjcmVhdGVFbGVtZW50TlM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKEtuW2VdLHQpfSxjcmVhdGVUZXh0Tm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSl9LGNyZWF0ZUNvbW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoZSl9LGluc2VydEJlZm9yZTpmdW5jdGlvbihlLHQsbil7ZS5pbnNlcnRCZWZvcmUodCxuKX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oZSx0KXtlLnJlbW92ZUNoaWxkKHQpfSxhcHBlbmRDaGlsZDpmdW5jdGlvbihlLHQpe2UuYXBwZW5kQ2hpbGQodCl9LHBhcmVudE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZX0sbmV4dFNpYmxpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubmV4dFNpYmxpbmd9LHRhZ05hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnTmFtZX0sc2V0VGV4dENvbnRlbnQ6ZnVuY3Rpb24oZSx0KXtlLnRleHRDb250ZW50PXR9LHNldFN0eWxlU2NvcGU6ZnVuY3Rpb24oZSx0KXtlLnNldEF0dHJpYnV0ZSh0LCIiKX19KSxlcj17Y3JlYXRlOmZ1bmN0aW9uKGUsdCl7dHIodCl9LHVwZGF0ZTpmdW5jdGlvbihlLHQpe2UuZGF0YS5yZWYhPT10LmRhdGEucmVmJiYodHIoZSwhMCksdHIodCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3RyKGUsITApfX07ZnVuY3Rpb24gdHIoZSx0KXt2YXIgcj1lLmRhdGEucmVmO2lmKG4ocikpe3ZhciBpPWUuY29udGV4dCxvPWUuY29tcG9uZW50SW5zdGFuY2V8fGUuZWxtLGE9aS4kcmVmczt0P0FycmF5LmlzQXJyYXkoYVtyXSk/aChhW3JdLG8pOmFbcl09PT1vJiYoYVtyXT12b2lkIDApOmUuZGF0YS5yZWZJbkZvcj9BcnJheS5pc0FycmF5KGFbcl0pP2Fbcl0uaW5kZXhPZihvKTwwJiZhW3JdLnB1c2gobyk6YVtyXT1bb106YVtyXT1vfX12YXIgbnI9bmV3IHBlKCIiLHt9LFtdKSxycj1bImNyZWF0ZSIsImFjdGl2YXRlIiwidXBkYXRlIiwicmVtb3ZlIiwiZGVzdHJveSJdO2Z1bmN0aW9uIGlyKGUsaSl7cmV0dXJuIGUua2V5PT09aS5rZXkmJihlLnRhZz09PWkudGFnJiZlLmlzQ29tbWVudD09PWkuaXNDb21tZW50JiZuKGUuZGF0YSk9PT1uKGkuZGF0YSkmJmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0IiE9PWUudGFnKXJldHVybiEwO3ZhciByLGk9bihyPWUuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlLG89bihyPXQuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlO3JldHVybiBpPT09b3x8WG4oaSkmJlhuKG8pfShlLGkpfHxyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSYmZS5hc3luY0ZhY3Rvcnk9PT1pLmFzeW5jRmFjdG9yeSYmdChpLmFzeW5jRmFjdG9yeS5lcnJvcikpfWZ1bmN0aW9uIG9yKGUsdCxyKXt2YXIgaSxvLGE9e307Zm9yKGk9dDtpPD1yOysraSluKG89ZVtpXS5rZXkpJiYoYVtvXT1pKTtyZXR1cm4gYX12YXIgYXI9e2NyZWF0ZTpzcix1cGRhdGU6c3IsZGVzdHJveTpmdW5jdGlvbihlKXtzcihlLG5yKX19O2Z1bmN0aW9uIHNyKGUsdCl7KGUuZGF0YS5kaXJlY3RpdmVzfHx0LmRhdGEuZGlyZWN0aXZlcykmJmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG89ZT09PW5yLGE9dD09PW5yLHM9dXIoZS5kYXRhLmRpcmVjdGl2ZXMsZS5jb250ZXh0KSxjPXVyKHQuZGF0YS5kaXJlY3RpdmVzLHQuY29udGV4dCksdT1bXSxsPVtdO2ZvcihuIGluIGMpcj1zW25dLGk9Y1tuXSxyPyhpLm9sZFZhbHVlPXIudmFsdWUsaS5vbGRBcmc9ci5hcmcsZnIoaSwidXBkYXRlIix0LGUpLGkuZGVmJiZpLmRlZi5jb21wb25lbnRVcGRhdGVkJiZsLnB1c2goaSkpOihmcihpLCJiaW5kIix0LGUpLGkuZGVmJiZpLmRlZi5pbnNlcnRlZCYmdS5wdXNoKGkpKTtpZih1Lmxlbmd0aCl7dmFyIGY9ZnVuY3Rpb24oKXtmb3IodmFyIG49MDtuPHUubGVuZ3RoO24rKylmcih1W25dLCJpbnNlcnRlZCIsdCxlKX07bz9pdCh0LCJpbnNlcnQiLGYpOmYoKX1sLmxlbmd0aCYmaXQodCwicG9zdHBhdGNoIixmdW5jdGlvbigpe2Zvcih2YXIgbj0wO248bC5sZW5ndGg7bisrKWZyKGxbbl0sImNvbXBvbmVudFVwZGF0ZWQiLHQsZSl9KTtpZighbylmb3IobiBpbiBzKWNbbl18fGZyKHNbbl0sInVuYmluZCIsZSxlLGEpfShlLHQpfXZhciBjcj1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIHVyKGUsdCl7dmFyIG4scixpPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoIWUpcmV0dXJuIGk7Zm9yKG49MDtuPGUubGVuZ3RoO24rKykocj1lW25dKS5tb2RpZmllcnN8fChyLm1vZGlmaWVycz1jciksaVtscihyKV09cixyLmRlZj1MZSh0LiRvcHRpb25zLCJkaXJlY3RpdmVzIixyLm5hbWUpO3JldHVybiBpfWZ1bmN0aW9uIGxyKGUpe3JldHVybiBlLnJhd05hbWV8fGUubmFtZSsiLiIrT2JqZWN0LmtleXMoZS5tb2RpZmllcnN8fHt9KS5qb2luKCIuIil9ZnVuY3Rpb24gZnIoZSx0LG4scixpKXt2YXIgbz1lLmRlZiYmZS5kZWZbdF07aWYobyl0cnl7byhuLmVsbSxlLG4scixpKX1jYXRjaChyKXtSZShyLG4uY29udGV4dCwiZGlyZWN0aXZlICIrZS5uYW1lKyIgIit0KyIgaG9vayIpfX12YXIgcHI9W2VyLGFyXTtmdW5jdGlvbiBkcihlLHIpe3ZhciBpPXIuY29tcG9uZW50T3B0aW9ucztpZighKG4oaSkmJiExPT09aS5DdG9yLm9wdGlvbnMuaW5oZXJpdEF0dHJzfHx0KGUuZGF0YS5hdHRycykmJnQoci5kYXRhLmF0dHJzKSkpe3ZhciBvLGEscz1yLmVsbSxjPWUuZGF0YS5hdHRyc3x8e30sdT1yLmRhdGEuYXR0cnN8fHt9O2ZvcihvIGluIG4odS5fX29iX18pJiYodT1yLmRhdGEuYXR0cnM9QSh7fSx1KSksdSlhPXVbb10sY1tvXSE9PWEmJnZyKHMsbyxhKTtmb3IobyBpbihxfHxaKSYmdS52YWx1ZSE9PWMudmFsdWUmJnZyKHMsInZhbHVlIix1LnZhbHVlKSxjKXQodVtvXSkmJihQbihvKT9zLnJlbW92ZUF0dHJpYnV0ZU5TKEZuLFJuKG8pKTpEbihvKXx8cy5yZW1vdmVBdHRyaWJ1dGUobykpfX1mdW5jdGlvbiB2cihlLHQsbil7ZS50YWdOYW1lLmluZGV4T2YoIi0iKT4tMT9ocihlLHQsbik6SW4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGUodCk6KG49ImFsbG93ZnVsbHNjcmVlbiI9PT10JiYiRU1CRUQiPT09ZS50YWdOYW1lPyJ0cnVlIjp0LGUuc2V0QXR0cmlidXRlKHQsbikpOkRuKHQpP2Uuc2V0QXR0cmlidXRlKHQsTW4odCxuKSk6UG4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGVOUyhGbixSbih0KSk6ZS5zZXRBdHRyaWJ1dGVOUyhGbix0LG4pOmhyKGUsdCxuKX1mdW5jdGlvbiBocihlLHQsbil7aWYoSG4obikpZS5yZW1vdmVBdHRyaWJ1dGUodCk7ZWxzZXtpZihxJiYhVyYmIlRFWFRBUkVBIj09PWUudGFnTmFtZSYmInBsYWNlaG9sZGVyIj09PXQmJiIiIT09biYmIWUuX19pZXBoKXt2YXIgcj1mdW5jdGlvbih0KXt0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiaW5wdXQiLHIpfTtlLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IixyKSxlLl9faWVwaD0hMH1lLnNldEF0dHJpYnV0ZSh0LG4pfX12YXIgbXI9e2NyZWF0ZTpkcix1cGRhdGU6ZHJ9O2Z1bmN0aW9uIHlyKGUscil7dmFyIGk9ci5lbG0sbz1yLmRhdGEsYT1lLmRhdGE7aWYoISh0KG8uc3RhdGljQ2xhc3MpJiZ0KG8uY2xhc3MpJiYodChhKXx8dChhLnN0YXRpY0NsYXNzKSYmdChhLmNsYXNzKSkpKXt2YXIgcz1CbihyKSxjPWkuX3RyYW5zaXRpb25DbGFzc2VzO24oYykmJihzPXpuKHMsVm4oYykpKSxzIT09aS5fcHJldkNsYXNzJiYoaS5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKSxpLl9wcmV2Q2xhc3M9cyl9fXZhciBncixfcixiciwkcix3cixDcix4cj17Y3JlYXRlOnlyLHVwZGF0ZTp5cn0sa3I9L1tcdykuK1wtXyRcXV0vO2Z1bmN0aW9uIEFyKGUpe3ZhciB0LG4scixpLG8sYT0hMSxzPSExLGM9ITEsdT0hMSxsPTAsZj0wLHA9MCxkPTA7Zm9yKHI9MDtyPGUubGVuZ3RoO3IrKylpZihuPXQsdD1lLmNoYXJDb2RlQXQociksYSkzOT09PXQmJjkyIT09biYmKGE9ITEpO2Vsc2UgaWYocykzND09PXQmJjkyIT09biYmKHM9ITEpO2Vsc2UgaWYoYyk5Nj09PXQmJjkyIT09biYmKGM9ITEpO2Vsc2UgaWYodSk0Nz09PXQmJjkyIT09biYmKHU9ITEpO2Vsc2UgaWYoMTI0IT09dHx8MTI0PT09ZS5jaGFyQ29kZUF0KHIrMSl8fDEyND09PWUuY2hhckNvZGVBdChyLTEpfHxsfHxmfHxwKXtzd2l0Y2godCl7Y2FzZSAzNDpzPSEwO2JyZWFrO2Nhc2UgMzk6YT0hMDticmVhaztjYXNlIDk2OmM9ITA7YnJlYWs7Y2FzZSA0MDpwKys7YnJlYWs7Y2FzZSA0MTpwLS07YnJlYWs7Y2FzZSA5MTpmKys7YnJlYWs7Y2FzZSA5MzpmLS07YnJlYWs7Y2FzZSAxMjM6bCsrO2JyZWFrO2Nhc2UgMTI1OmwtLX1pZig0Nz09PXQpe2Zvcih2YXIgdj1yLTEsaD12b2lkIDA7dj49MCYmIiAiPT09KGg9ZS5jaGFyQXQodikpO3YtLSk7aCYma3IudGVzdChoKXx8KHU9ITApfX1lbHNlIHZvaWQgMD09PWk/KGQ9cisxLGk9ZS5zbGljZSgwLHIpLnRyaW0oKSk6bSgpO2Z1bmN0aW9uIG0oKXsob3x8KG89W10pKS5wdXNoKGUuc2xpY2UoZCxyKS50cmltKCkpLGQ9cisxfWlmKHZvaWQgMD09PWk/aT1lLnNsaWNlKDAscikudHJpbSgpOjAhPT1kJiZtKCksbylmb3Iocj0wO3I8by5sZW5ndGg7cisrKWk9T3IoaSxvW3JdKTtyZXR1cm4gaX1mdW5jdGlvbiBPcihlLHQpe3ZhciBuPXQuaW5kZXhPZigiKCIpO2lmKG48MClyZXR1cm4nX2YoIicrdCsnIikoJytlKyIpIjt2YXIgcj10LnNsaWNlKDAsbiksaT10LnNsaWNlKG4rMSk7cmV0dXJuJ19mKCInK3IrJyIpKCcrZSsoIikiIT09aT8iLCIraTppKX1mdW5jdGlvbiBTcihlLHQpe2NvbnNvbGUuZXJyb3IoIltWdWUgY29tcGlsZXJdOiAiK2UpfWZ1bmN0aW9uIFRyKGUsdCl7cmV0dXJuIGU/ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbdF19KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KTpbXX1mdW5jdGlvbiBFcihlLHQsbixyLGkpeyhlLnByb3BzfHwoZS5wcm9wcz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24gTnIoZSx0LG4scixpKXsoaT9lLmR5bmFtaWNBdHRyc3x8KGUuZHluYW1pY0F0dHJzPVtdKTplLmF0dHJzfHwoZS5hdHRycz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24ganIoZSx0LG4scil7ZS5hdHRyc01hcFt0XT1uLGUuYXR0cnNMaXN0LnB1c2goUnIoe25hbWU6dCx2YWx1ZTpufSxyKSl9ZnVuY3Rpb24gRHIoZSx0LG4scixpLG8sYSxzKXsoZS5kaXJlY3RpdmVzfHwoZS5kaXJlY3RpdmVzPVtdKSkucHVzaChScih7bmFtZTp0LHJhd05hbWU6bix2YWx1ZTpyLGFyZzppLGlzRHluYW1pY0FyZzpvLG1vZGlmaWVyczphfSxzKSksZS5wbGFpbj0hMX1mdW5jdGlvbiBMcihlLHQsbil7cmV0dXJuIG4/Il9wKCIrdCsnLCInK2UrJyIpJzplK3R9ZnVuY3Rpb24gTXIodCxuLHIsaSxvLGEscyxjKXt2YXIgdTsoaT1pfHxlKS5yaWdodD9jP249IigiK24rIik9PT0nY2xpY2snPydjb250ZXh0bWVudSc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJjb250ZXh0bWVudSIsZGVsZXRlIGkucmlnaHQpOmkubWlkZGxlJiYoYz9uPSIoIituKyIpPT09J2NsaWNrJz8nbW91c2V1cCc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJtb3VzZXVwIikpLGkuY2FwdHVyZSYmKGRlbGV0ZSBpLmNhcHR1cmUsbj1McigiISIsbixjKSksaS5vbmNlJiYoZGVsZXRlIGkub25jZSxuPUxyKCJ+IixuLGMpKSxpLnBhc3NpdmUmJihkZWxldGUgaS5wYXNzaXZlLG49THIoIiYiLG4sYykpLGkubmF0aXZlPyhkZWxldGUgaS5uYXRpdmUsdT10Lm5hdGl2ZUV2ZW50c3x8KHQubmF0aXZlRXZlbnRzPXt9KSk6dT10LmV2ZW50c3x8KHQuZXZlbnRzPXt9KTt2YXIgbD1Scih7dmFsdWU6ci50cmltKCksZHluYW1pYzpjfSxzKTtpIT09ZSYmKGwubW9kaWZpZXJzPWkpO3ZhciBmPXVbbl07QXJyYXkuaXNBcnJheShmKT9vP2YudW5zaGlmdChsKTpmLnB1c2gobCk6dVtuXT1mP28/W2wsZl06W2YsbF06bCx0LnBsYWluPSExfWZ1bmN0aW9uIElyKGUsdCxuKXt2YXIgcj1GcihlLCI6Iit0KXx8RnIoZSwidi1iaW5kOiIrdCk7aWYobnVsbCE9cilyZXR1cm4gQXIocik7aWYoITEhPT1uKXt2YXIgaT1GcihlLHQpO2lmKG51bGwhPWkpcmV0dXJuIEpTT04uc3RyaW5naWZ5KGkpfX1mdW5jdGlvbiBGcihlLHQsbil7dmFyIHI7aWYobnVsbCE9KHI9ZS5hdHRyc01hcFt0XSkpZm9yKHZhciBpPWUuYXR0cnNMaXN0LG89MCxhPWkubGVuZ3RoO288YTtvKyspaWYoaVtvXS5uYW1lPT09dCl7aS5zcGxpY2UobywxKTticmVha31yZXR1cm4gbiYmZGVsZXRlIGUuYXR0cnNNYXBbdF0scn1mdW5jdGlvbiBQcihlLHQpe2Zvcih2YXIgbj1lLmF0dHJzTGlzdCxyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1uW3JdO2lmKHQudGVzdChvLm5hbWUpKXJldHVybiBuLnNwbGljZShyLDEpLG99fWZ1bmN0aW9uIFJyKGUsdCl7cmV0dXJuIHQmJihudWxsIT10LnN0YXJ0JiYoZS5zdGFydD10LnN0YXJ0KSxudWxsIT10LmVuZCYmKGUuZW5kPXQuZW5kKSksZX1mdW5jdGlvbiBIcihlLHQsbil7dmFyIHI9bnx8e30saT1yLm51bWJlcixvPSIkJHYiO3IudHJpbSYmKG89Iih0eXBlb2YgJCR2ID09PSAnc3RyaW5nJz8gJCR2LnRyaW0oKTogJCR2KSIpLGkmJihvPSJfbigiK28rIikiKTt2YXIgYT1Ccih0LG8pO2UubW9kZWw9e3ZhbHVlOiIoIit0KyIpIixleHByZXNzaW9uOkpTT04uc3RyaW5naWZ5KHQpLGNhbGxiYWNrOiJmdW5jdGlvbiAoJCR2KSB7IithKyJ9In19ZnVuY3Rpb24gQnIoZSx0KXt2YXIgbj1mdW5jdGlvbihlKXtpZihlPWUudHJpbSgpLGdyPWUubGVuZ3RoLGUuaW5kZXhPZigiWyIpPDB8fGUubGFzdEluZGV4T2YoIl0iKTxnci0xKXJldHVybigkcj1lLmxhc3RJbmRleE9mKCIuIikpPi0xP3tleHA6ZS5zbGljZSgwLCRyKSxrZXk6JyInK2Uuc2xpY2UoJHIrMSkrJyInfTp7ZXhwOmUsa2V5Om51bGx9O19yPWUsJHI9d3I9Q3I9MDtmb3IoOyF6cigpOylWcihicj1VcigpKT9Kcihicik6OTE9PT1iciYmS3IoYnIpO3JldHVybntleHA6ZS5zbGljZSgwLHdyKSxrZXk6ZS5zbGljZSh3cisxLENyKX19KGUpO3JldHVybiBudWxsPT09bi5rZXk/ZSsiPSIrdDoiJHNldCgiK24uZXhwKyIsICIrbi5rZXkrIiwgIit0KyIpIn1mdW5jdGlvbiBVcigpe3JldHVybiBfci5jaGFyQ29kZUF0KCsrJHIpfWZ1bmN0aW9uIHpyKCl7cmV0dXJuICRyPj1ncn1mdW5jdGlvbiBWcihlKXtyZXR1cm4gMzQ9PT1lfHwzOT09PWV9ZnVuY3Rpb24gS3IoZSl7dmFyIHQ9MTtmb3Iod3I9JHI7IXpyKCk7KWlmKFZyKGU9VXIoKSkpSnIoZSk7ZWxzZSBpZig5MT09PWUmJnQrKyw5Mz09PWUmJnQtLSwwPT09dCl7Q3I9JHI7YnJlYWt9fWZ1bmN0aW9uIEpyKGUpe2Zvcih2YXIgdD1lOyF6cigpJiYoZT1VcigpKSE9PXQ7KTt9dmFyIHFyLFdyPSJfX3IiLFpyPSJfX2MiO2Z1bmN0aW9uIEdyKGUsdCxuKXt2YXIgcj1xcjtyZXR1cm4gZnVuY3Rpb24gaSgpe251bGwhPT10LmFwcGx5KG51bGwsYXJndW1lbnRzKSYmUXIoZSxpLG4scil9fXZhciBYcj1WZSYmIShYJiZOdW1iZXIoWFsxXSk8PTUzKTtmdW5jdGlvbiBZcihlLHQsbixyKXtpZihYcil7dmFyIGk9YW4sbz10O3Q9by5fd3JhcHBlcj1mdW5jdGlvbihlKXtpZihlLnRhcmdldD09PWUuY3VycmVudFRhcmdldHx8ZS50aW1lU3RhbXA+PWl8fGUudGltZVN0YW1wPD0wfHxlLnRhcmdldC5vd25lckRvY3VtZW50IT09ZG9jdW1lbnQpcmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX1xci5hZGRFdmVudExpc3RlbmVyKGUsdCxRP3tjYXB0dXJlOm4scGFzc2l2ZTpyfTpuKX1mdW5jdGlvbiBRcihlLHQsbixyKXsocnx8cXIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0Ll93cmFwcGVyfHx0LG4pfWZ1bmN0aW9uIGVpKGUscil7aWYoIXQoZS5kYXRhLm9uKXx8IXQoci5kYXRhLm9uKSl7dmFyIGk9ci5kYXRhLm9ufHx7fSxvPWUuZGF0YS5vbnx8e307cXI9ci5lbG0sZnVuY3Rpb24oZSl7aWYobihlW1dyXSkpe3ZhciB0PXE/ImNoYW5nZSI6ImlucHV0IjtlW3RdPVtdLmNvbmNhdChlW1dyXSxlW3RdfHxbXSksZGVsZXRlIGVbV3JdfW4oZVtacl0pJiYoZS5jaGFuZ2U9W10uY29uY2F0KGVbWnJdLGUuY2hhbmdlfHxbXSksZGVsZXRlIGVbWnJdKX0oaSkscnQoaSxvLFlyLFFyLEdyLHIuY29udGV4dCkscXI9dm9pZCAwfX12YXIgdGksbmk9e2NyZWF0ZTplaSx1cGRhdGU6ZWl9O2Z1bmN0aW9uIHJpKGUscil7aWYoIXQoZS5kYXRhLmRvbVByb3BzKXx8IXQoci5kYXRhLmRvbVByb3BzKSl7dmFyIGksbyxhPXIuZWxtLHM9ZS5kYXRhLmRvbVByb3BzfHx7fSxjPXIuZGF0YS5kb21Qcm9wc3x8e307Zm9yKGkgaW4gbihjLl9fb2JfXykmJihjPXIuZGF0YS5kb21Qcm9wcz1BKHt9LGMpKSxzKWkgaW4gY3x8KGFbaV09IiIpO2ZvcihpIGluIGMpe2lmKG89Y1tpXSwidGV4dENvbnRlbnQiPT09aXx8ImlubmVySFRNTCI9PT1pKXtpZihyLmNoaWxkcmVuJiYoci5jaGlsZHJlbi5sZW5ndGg9MCksbz09PXNbaV0pY29udGludWU7MT09PWEuY2hpbGROb2Rlcy5sZW5ndGgmJmEucmVtb3ZlQ2hpbGQoYS5jaGlsZE5vZGVzWzBdKX1pZigidmFsdWUiPT09aSYmIlBST0dSRVNTIiE9PWEudGFnTmFtZSl7YS5fdmFsdWU9bzt2YXIgdT10KG8pPyIiOlN0cmluZyhvKTtpaShhLHUpJiYoYS52YWx1ZT11KX1lbHNlIGlmKCJpbm5lckhUTUwiPT09aSYmcW4oYS50YWdOYW1lKSYmdChhLmlubmVySFRNTCkpeyh0aT10aXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmlubmVySFRNTD0iPHN2Zz4iK28rIjwvc3ZnPiI7Zm9yKHZhciBsPXRpLmZpcnN0Q2hpbGQ7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7Zm9yKDtsLmZpcnN0Q2hpbGQ7KWEuYXBwZW5kQ2hpbGQobC5maXJzdENoaWxkKX1lbHNlIGlmKG8hPT1zW2ldKXRyeXthW2ldPW99Y2F0Y2goZSl7fX19fWZ1bmN0aW9uIGlpKGUsdCl7cmV0dXJuIWUuY29tcG9zaW5nJiYoIk9QVElPTiI9PT1lLnRhZ05hbWV8fGZ1bmN0aW9uKGUsdCl7dmFyIG49ITA7dHJ5e249ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCE9PWV9Y2F0Y2goZSl7fXJldHVybiBuJiZlLnZhbHVlIT09dH0oZSx0KXx8ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnZhbHVlLGk9ZS5fdk1vZGlmaWVycztpZihuKGkpKXtpZihpLm51bWJlcilyZXR1cm4gZihyKSE9PWYodCk7aWYoaS50cmltKXJldHVybiByLnRyaW0oKSE9PXQudHJpbSgpfXJldHVybiByIT09dH0oZSx0KSl9dmFyIG9pPXtjcmVhdGU6cmksdXBkYXRlOnJpfSxhaT1nKGZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49LzooLispLztyZXR1cm4gZS5zcGxpdCgvOyg/IVteKF0qXCkpL2cpLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHI9ZS5zcGxpdChuKTtyLmxlbmd0aD4xJiYodFtyWzBdLnRyaW0oKV09clsxXS50cmltKCkpfX0pLHR9KTtmdW5jdGlvbiBzaShlKXt2YXIgdD1jaShlLnN0eWxlKTtyZXR1cm4gZS5zdGF0aWNTdHlsZT9BKGUuc3RhdGljU3R5bGUsdCk6dH1mdW5jdGlvbiBjaShlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9PKGUpOiJzdHJpbmciPT10eXBlb2YgZT9haShlKTplfXZhciB1aSxsaT0vXi0tLyxmaT0vXHMqIWltcG9ydGFudCQvLHBpPWZ1bmN0aW9uKGUsdCxuKXtpZihsaS50ZXN0KHQpKWUuc3R5bGUuc2V0UHJvcGVydHkodCxuKTtlbHNlIGlmKGZpLnRlc3QobikpZS5zdHlsZS5zZXRQcm9wZXJ0eShDKHQpLG4ucmVwbGFjZShmaSwiIiksImltcG9ydGFudCIpO2Vsc2V7dmFyIHI9dmkodCk7aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspZS5zdHlsZVtyXT1uW2ldO2Vsc2UgZS5zdHlsZVtyXT1ufX0sZGk9WyJXZWJraXQiLCJNb3oiLCJtcyJdLHZpPWcoZnVuY3Rpb24oZSl7aWYodWk9dWl8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLCJmaWx0ZXIiIT09KGU9YihlKSkmJmUgaW4gdWkpcmV0dXJuIGU7Zm9yKHZhciB0PWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPTA7bjxkaS5sZW5ndGg7bisrKXt2YXIgcj1kaVtuXSt0O2lmKHIgaW4gdWkpcmV0dXJuIHJ9fSk7ZnVuY3Rpb24gaGkoZSxyKXt2YXIgaT1yLmRhdGEsbz1lLmRhdGE7aWYoISh0KGkuc3RhdGljU3R5bGUpJiZ0KGkuc3R5bGUpJiZ0KG8uc3RhdGljU3R5bGUpJiZ0KG8uc3R5bGUpKSl7dmFyIGEscyxjPXIuZWxtLHU9by5zdGF0aWNTdHlsZSxsPW8ubm9ybWFsaXplZFN0eWxlfHxvLnN0eWxlfHx7fSxmPXV8fGwscD1jaShyLmRhdGEuc3R5bGUpfHx7fTtyLmRhdGEubm9ybWFsaXplZFN0eWxlPW4ocC5fX29iX18pP0Eoe30scCk6cDt2YXIgZD1mdW5jdGlvbihlLHQpe3ZhciBuLHI9e307aWYodClmb3IodmFyIGk9ZTtpLmNvbXBvbmVudEluc3RhbmNlOykoaT1pLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSkmJmkuZGF0YSYmKG49c2koaS5kYXRhKSkmJkEocixuKTsobj1zaShlLmRhdGEpKSYmQShyLG4pO2Zvcih2YXIgbz1lO289by5wYXJlbnQ7KW8uZGF0YSYmKG49c2koby5kYXRhKSkmJkEocixuKTtyZXR1cm4gcn0ociwhMCk7Zm9yKHMgaW4gZil0KGRbc10pJiZwaShjLHMsIiIpO2ZvcihzIGluIGQpKGE9ZFtzXSkhPT1mW3NdJiZwaShjLHMsbnVsbD09YT8iIjphKX19dmFyIG1pPXtjcmVhdGU6aGksdXBkYXRlOmhpfSx5aT0vXHMrLztmdW5jdGlvbiBnaShlLHQpe2lmKHQmJih0PXQudHJpbSgpKSlpZihlLmNsYXNzTGlzdCl0LmluZGV4T2YoIiAiKT4tMT90LnNwbGl0KHlpKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmNsYXNzTGlzdC5hZGQodCl9KTplLmNsYXNzTGlzdC5hZGQodCk7ZWxzZXt2YXIgbj0iICIrKGUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIikrIiAiO24uaW5kZXhPZigiICIrdCsiICIpPDAmJmUuc2V0QXR0cmlidXRlKCJjbGFzcyIsKG4rdCkudHJpbSgpKX19ZnVuY3Rpb24gX2koZSx0KXtpZih0JiYodD10LnRyaW0oKSkpaWYoZS5jbGFzc0xpc3QpdC5pbmRleE9mKCIgIik+LTE/dC5zcGxpdCh5aSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5jbGFzc0xpc3QucmVtb3ZlKHQpfSk6ZS5jbGFzc0xpc3QucmVtb3ZlKHQpLGUuY2xhc3NMaXN0Lmxlbmd0aHx8ZS5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIik7ZWxzZXtmb3IodmFyIG49IiAiKyhlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpKyIgIixyPSIgIit0KyIgIjtuLmluZGV4T2Yocik+PTA7KW49bi5yZXBsYWNlKHIsIiAiKTsobj1uLnRyaW0oKSk/ZS5zZXRBdHRyaWJ1dGUoImNsYXNzIixuKTplLnJlbW92ZUF0dHJpYnV0ZSgiY2xhc3MiKX19ZnVuY3Rpb24gYmkoZSl7aWYoZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXt2YXIgdD17fTtyZXR1cm4hMSE9PWUuY3NzJiZBKHQsJGkoZS5uYW1lfHwidiIpKSxBKHQsZSksdH1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/JGkoZSk6dm9pZCAwfX12YXIgJGk9ZyhmdW5jdGlvbihlKXtyZXR1cm57ZW50ZXJDbGFzczplKyItZW50ZXIiLGVudGVyVG9DbGFzczplKyItZW50ZXItdG8iLGVudGVyQWN0aXZlQ2xhc3M6ZSsiLWVudGVyLWFjdGl2ZSIsbGVhdmVDbGFzczplKyItbGVhdmUiLGxlYXZlVG9DbGFzczplKyItbGVhdmUtdG8iLGxlYXZlQWN0aXZlQ2xhc3M6ZSsiLWxlYXZlLWFjdGl2ZSJ9fSksd2k9eiYmIVcsQ2k9InRyYW5zaXRpb24iLHhpPSJhbmltYXRpb24iLGtpPSJ0cmFuc2l0aW9uIixBaT0idHJhbnNpdGlvbmVuZCIsT2k9ImFuaW1hdGlvbiIsU2k9ImFuaW1hdGlvbmVuZCI7d2kmJih2b2lkIDA9PT13aW5kb3cub250cmFuc2l0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kJiYoa2k9IldlYmtpdFRyYW5zaXRpb24iLEFpPSJ3ZWJraXRUcmFuc2l0aW9uRW5kIiksdm9pZCAwPT09d2luZG93Lm9uYW5pbWF0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQmJihPaT0iV2Via2l0QW5pbWF0aW9uIixTaT0id2Via2l0QW5pbWF0aW9uRW5kIikpO3ZhciBUaT16P3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdyk6c2V0VGltZW91dDpmdW5jdGlvbihlKXtyZXR1cm4gZSgpfTtmdW5jdGlvbiBFaShlKXtUaShmdW5jdGlvbigpe1RpKGUpfSl9ZnVuY3Rpb24gTmkoZSx0KXt2YXIgbj1lLl90cmFuc2l0aW9uQ2xhc3Nlc3x8KGUuX3RyYW5zaXRpb25DbGFzc2VzPVtdKTtuLmluZGV4T2YodCk8MCYmKG4ucHVzaCh0KSxnaShlLHQpKX1mdW5jdGlvbiBqaShlLHQpe2UuX3RyYW5zaXRpb25DbGFzc2VzJiZoKGUuX3RyYW5zaXRpb25DbGFzc2VzLHQpLF9pKGUsdCl9ZnVuY3Rpb24gRGkoZSx0LG4pe3ZhciByPU1pKGUsdCksaT1yLnR5cGUsbz1yLnRpbWVvdXQsYT1yLnByb3BDb3VudDtpZighaSlyZXR1cm4gbigpO3ZhciBzPWk9PT1DaT9BaTpTaSxjPTAsdT1mdW5jdGlvbigpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihzLGwpLG4oKX0sbD1mdW5jdGlvbih0KXt0LnRhcmdldD09PWUmJisrYz49YSYmdSgpfTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YzxhJiZ1KCl9LG8rMSksZS5hZGRFdmVudExpc3RlbmVyKHMsbCl9dmFyIExpPS9cYih0cmFuc2Zvcm18YWxsKSgsfCQpLztmdW5jdGlvbiBNaShlLHQpe3ZhciBuLHI9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSksaT0ocltraSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLG89KHJba2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSxhPUlpKGksbykscz0ocltPaSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLGM9KHJbT2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSx1PUlpKHMsYyksbD0wLGY9MDtyZXR1cm4gdD09PUNpP2E+MCYmKG49Q2ksbD1hLGY9by5sZW5ndGgpOnQ9PT14aT91PjAmJihuPXhpLGw9dSxmPWMubGVuZ3RoKTpmPShuPShsPU1hdGgubWF4KGEsdSkpPjA/YT51P0NpOnhpOm51bGwpP249PT1DaT9vLmxlbmd0aDpjLmxlbmd0aDowLHt0eXBlOm4sdGltZW91dDpsLHByb3BDb3VudDpmLGhhc1RyYW5zZm9ybTpuPT09Q2kmJkxpLnRlc3QocltraSsiUHJvcGVydHkiXSl9fWZ1bmN0aW9uIElpKGUsdCl7Zm9yKDtlLmxlbmd0aDx0Lmxlbmd0aDspZT1lLmNvbmNhdChlKTtyZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCx0Lm1hcChmdW5jdGlvbih0LG4pe3JldHVybiBGaSh0KStGaShlW25dKX0pKX1mdW5jdGlvbiBGaShlKXtyZXR1cm4gMWUzKk51bWJlcihlLnNsaWNlKDAsLTEpLnJlcGxhY2UoIiwiLCIuIikpfWZ1bmN0aW9uIFBpKGUscil7dmFyIGk9ZS5lbG07bihpLl9sZWF2ZUNiKSYmKGkuX2xlYXZlQ2IuY2FuY2VsbGVkPSEwLGkuX2xlYXZlQ2IoKSk7dmFyIGE9YmkoZS5kYXRhLnRyYW5zaXRpb24pO2lmKCF0KGEpJiYhbihpLl9lbnRlckNiKSYmMT09PWkubm9kZVR5cGUpe2Zvcih2YXIgcz1hLmNzcyxjPWEudHlwZSx1PWEuZW50ZXJDbGFzcyxsPWEuZW50ZXJUb0NsYXNzLHA9YS5lbnRlckFjdGl2ZUNsYXNzLGQ9YS5hcHBlYXJDbGFzcyx2PWEuYXBwZWFyVG9DbGFzcyxoPWEuYXBwZWFyQWN0aXZlQ2xhc3MsbT1hLmJlZm9yZUVudGVyLHk9YS5lbnRlcixnPWEuYWZ0ZXJFbnRlcixfPWEuZW50ZXJDYW5jZWxsZWQsYj1hLmJlZm9yZUFwcGVhciwkPWEuYXBwZWFyLHc9YS5hZnRlckFwcGVhcixDPWEuYXBwZWFyQ2FuY2VsbGVkLHg9YS5kdXJhdGlvbixrPVd0LEE9V3QuJHZub2RlO0EmJkEucGFyZW50OylrPUEuY29udGV4dCxBPUEucGFyZW50O3ZhciBPPSFrLl9pc01vdW50ZWR8fCFlLmlzUm9vdEluc2VydDtpZighT3x8JHx8IiI9PT0kKXt2YXIgUz1PJiZkP2Q6dSxUPU8mJmg/aDpwLEU9TyYmdj92OmwsTj1PJiZifHxtLGo9TyYmImZ1bmN0aW9uIj09dHlwZW9mICQ/JDp5LEw9TyYmd3x8ZyxNPU8mJkN8fF8sST1mKG8oeCk/eC5lbnRlcjp4KSxGPSExIT09cyYmIVcsUD1CaShqKSxSPWkuX2VudGVyQ2I9RChmdW5jdGlvbigpe0YmJihqaShpLEUpLGppKGksVCkpLFIuY2FuY2VsbGVkPyhGJiZqaShpLFMpLE0mJk0oaSkpOkwmJkwoaSksaS5fZW50ZXJDYj1udWxsfSk7ZS5kYXRhLnNob3d8fGl0KGUsImluc2VydCIsZnVuY3Rpb24oKXt2YXIgdD1pLnBhcmVudE5vZGUsbj10JiZ0Ll9wZW5kaW5nJiZ0Ll9wZW5kaW5nW2Uua2V5XTtuJiZuLnRhZz09PWUudGFnJiZuLmVsbS5fbGVhdmVDYiYmbi5lbG0uX2xlYXZlQ2IoKSxqJiZqKGksUil9KSxOJiZOKGkpLEYmJihOaShpLFMpLE5pKGksVCksRWkoZnVuY3Rpb24oKXtqaShpLFMpLFIuY2FuY2VsbGVkfHwoTmkoaSxFKSxQfHwoSGkoSSk/c2V0VGltZW91dChSLEkpOkRpKGksYyxSKSkpfSkpLGUuZGF0YS5zaG93JiYociYmcigpLGomJmooaSxSKSksRnx8UHx8UigpfX19ZnVuY3Rpb24gUmkoZSxyKXt2YXIgaT1lLmVsbTtuKGkuX2VudGVyQ2IpJiYoaS5fZW50ZXJDYi5jYW5jZWxsZWQ9ITAsaS5fZW50ZXJDYigpKTt2YXIgYT1iaShlLmRhdGEudHJhbnNpdGlvbik7aWYodChhKXx8MSE9PWkubm9kZVR5cGUpcmV0dXJuIHIoKTtpZighbihpLl9sZWF2ZUNiKSl7dmFyIHM9YS5jc3MsYz1hLnR5cGUsdT1hLmxlYXZlQ2xhc3MsbD1hLmxlYXZlVG9DbGFzcyxwPWEubGVhdmVBY3RpdmVDbGFzcyxkPWEuYmVmb3JlTGVhdmUsdj1hLmxlYXZlLGg9YS5hZnRlckxlYXZlLG09YS5sZWF2ZUNhbmNlbGxlZCx5PWEuZGVsYXlMZWF2ZSxnPWEuZHVyYXRpb24sXz0hMSE9PXMmJiFXLGI9QmkodiksJD1mKG8oZyk/Zy5sZWF2ZTpnKSx3PWkuX2xlYXZlQ2I9RChmdW5jdGlvbigpe2kucGFyZW50Tm9kZSYmaS5wYXJlbnROb2RlLl9wZW5kaW5nJiYoaS5wYXJlbnROb2RlLl9wZW5kaW5nW2Uua2V5XT1udWxsKSxfJiYoamkoaSxsKSxqaShpLHApKSx3LmNhbmNlbGxlZD8oXyYmamkoaSx1KSxtJiZtKGkpKToocigpLGgmJmgoaSkpLGkuX2xlYXZlQ2I9bnVsbH0pO3k/eShDKTpDKCl9ZnVuY3Rpb24gQygpe3cuY2FuY2VsbGVkfHwoIWUuZGF0YS5zaG93JiZpLnBhcmVudE5vZGUmJigoaS5wYXJlbnROb2RlLl9wZW5kaW5nfHwoaS5wYXJlbnROb2RlLl9wZW5kaW5nPXt9KSlbZS5rZXldPWUpLGQmJmQoaSksXyYmKE5pKGksdSksTmkoaSxwKSxFaShmdW5jdGlvbigpe2ppKGksdSksdy5jYW5jZWxsZWR8fChOaShpLGwpLGJ8fChIaSgkKT9zZXRUaW1lb3V0KHcsJCk6RGkoaSxjLHcpKSl9KSksdiYmdihpLHcpLF98fGJ8fHcoKSl9fWZ1bmN0aW9uIEhpKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmIWlzTmFOKGUpfWZ1bmN0aW9uIEJpKGUpe2lmKHQoZSkpcmV0dXJuITE7dmFyIHI9ZS5mbnM7cmV0dXJuIG4ocik/QmkoQXJyYXkuaXNBcnJheShyKT9yWzBdOnIpOihlLl9sZW5ndGh8fGUubGVuZ3RoKT4xfWZ1bmN0aW9uIFVpKGUsdCl7ITAhPT10LmRhdGEuc2hvdyYmUGkodCl9dmFyIHppPWZ1bmN0aW9uKGUpe3ZhciBvLGEscz17fSxjPWUubW9kdWxlcyx1PWUubm9kZU9wcztmb3Iobz0wO288cnIubGVuZ3RoOysrbylmb3Ioc1tycltvXV09W10sYT0wO2E8Yy5sZW5ndGg7KythKW4oY1thXVtycltvXV0pJiZzW3JyW29dXS5wdXNoKGNbYV1bcnJbb11dKTtmdW5jdGlvbiBsKGUpe3ZhciB0PXUucGFyZW50Tm9kZShlKTtuKHQpJiZ1LnJlbW92ZUNoaWxkKHQsZSl9ZnVuY3Rpb24gZihlLHQsaSxvLGEsYyxsKXtpZihuKGUuZWxtKSYmbihjKSYmKGU9Y1tsXT1tZShlKSksZS5pc1Jvb3RJbnNlcnQ9IWEsIWZ1bmN0aW9uKGUsdCxpLG8pe3ZhciBhPWUuZGF0YTtpZihuKGEpKXt2YXIgYz1uKGUuY29tcG9uZW50SW5zdGFuY2UpJiZhLmtlZXBBbGl2ZTtpZihuKGE9YS5ob29rKSYmbihhPWEuaW5pdCkmJmEoZSwhMSksbihlLmNvbXBvbmVudEluc3RhbmNlKSlyZXR1cm4gZChlLHQpLHYoaSxlLmVsbSxvKSxyKGMpJiZmdW5jdGlvbihlLHQscixpKXtmb3IodmFyIG8sYT1lO2EuY29tcG9uZW50SW5zdGFuY2U7KWlmKGE9YS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUsbihvPWEuZGF0YSkmJm4obz1vLnRyYW5zaXRpb24pKXtmb3Iobz0wO288cy5hY3RpdmF0ZS5sZW5ndGg7KytvKXMuYWN0aXZhdGVbb10obnIsYSk7dC5wdXNoKGEpO2JyZWFrfXYocixlLmVsbSxpKX0oZSx0LGksbyksITB9fShlLHQsaSxvKSl7dmFyIGY9ZS5kYXRhLHA9ZS5jaGlsZHJlbixtPWUudGFnO24obSk/KGUuZWxtPWUubnM/dS5jcmVhdGVFbGVtZW50TlMoZS5ucyxtKTp1LmNyZWF0ZUVsZW1lbnQobSxlKSxnKGUpLGgoZSxwLHQpLG4oZikmJnkoZSx0KSx2KGksZS5lbG0sbykpOnIoZS5pc0NvbW1lbnQpPyhlLmVsbT11LmNyZWF0ZUNvbW1lbnQoZS50ZXh0KSx2KGksZS5lbG0sbykpOihlLmVsbT11LmNyZWF0ZVRleHROb2RlKGUudGV4dCksdihpLGUuZWxtLG8pKX19ZnVuY3Rpb24gZChlLHQpe24oZS5kYXRhLnBlbmRpbmdJbnNlcnQpJiYodC5wdXNoLmFwcGx5KHQsZS5kYXRhLnBlbmRpbmdJbnNlcnQpLGUuZGF0YS5wZW5kaW5nSW5zZXJ0PW51bGwpLGUuZWxtPWUuY29tcG9uZW50SW5zdGFuY2UuJGVsLG0oZSk/KHkoZSx0KSxnKGUpKToodHIoZSksdC5wdXNoKGUpKX1mdW5jdGlvbiB2KGUsdCxyKXtuKGUpJiYobihyKT91LnBhcmVudE5vZGUocik9PT1lJiZ1Lmluc2VydEJlZm9yZShlLHQscik6dS5hcHBlbmRDaGlsZChlLHQpKX1mdW5jdGlvbiBoKGUsdCxuKXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7KytyKWYodFtyXSxuLGUuZWxtLG51bGwsITAsdCxyKTtlbHNlIGkoZS50ZXh0KSYmdS5hcHBlbmRDaGlsZChlLmVsbSx1LmNyZWF0ZVRleHROb2RlKFN0cmluZyhlLnRleHQpKSl9ZnVuY3Rpb24gbShlKXtmb3IoO2UuY29tcG9uZW50SW5zdGFuY2U7KWU9ZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7cmV0dXJuIG4oZS50YWcpfWZ1bmN0aW9uIHkoZSx0KXtmb3IodmFyIHI9MDtyPHMuY3JlYXRlLmxlbmd0aDsrK3Ipcy5jcmVhdGVbcl0obnIsZSk7bihvPWUuZGF0YS5ob29rKSYmKG4oby5jcmVhdGUpJiZvLmNyZWF0ZShucixlKSxuKG8uaW5zZXJ0KSYmdC5wdXNoKGUpKX1mdW5jdGlvbiBnKGUpe3ZhciB0O2lmKG4odD1lLmZuU2NvcGVJZCkpdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpO2Vsc2UgZm9yKHZhciByPWU7cjspbih0PXIuY29udGV4dCkmJm4odD10LiRvcHRpb25zLl9zY29wZUlkKSYmdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpLHI9ci5wYXJlbnQ7bih0PVd0KSYmdCE9PWUuY29udGV4dCYmdCE9PWUuZm5Db250ZXh0JiZuKHQ9dC4kb3B0aW9ucy5fc2NvcGVJZCkmJnUuc2V0U3R5bGVTY29wZShlLmVsbSx0KX1mdW5jdGlvbiBfKGUsdCxuLHIsaSxvKXtmb3IoO3I8PWk7KytyKWYobltyXSxvLGUsdCwhMSxuLHIpfWZ1bmN0aW9uIGIoZSl7dmFyIHQscixpPWUuZGF0YTtpZihuKGkpKWZvcihuKHQ9aS5ob29rKSYmbih0PXQuZGVzdHJveSkmJnQoZSksdD0wO3Q8cy5kZXN0cm95Lmxlbmd0aDsrK3Qpcy5kZXN0cm95W3RdKGUpO2lmKG4odD1lLmNoaWxkcmVuKSlmb3Iocj0wO3I8ZS5jaGlsZHJlbi5sZW5ndGg7KytyKWIoZS5jaGlsZHJlbltyXSl9ZnVuY3Rpb24gJChlLHQscil7Zm9yKDt0PD1yOysrdCl7dmFyIGk9ZVt0XTtuKGkpJiYobihpLnRhZyk/KHcoaSksYihpKSk6bChpLmVsbSkpfX1mdW5jdGlvbiB3KGUsdCl7aWYobih0KXx8bihlLmRhdGEpKXt2YXIgcixpPXMucmVtb3ZlLmxlbmd0aCsxO2ZvcihuKHQpP3QubGlzdGVuZXJzKz1pOnQ9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKCl7MD09LS1uLmxpc3RlbmVycyYmbChlKX1yZXR1cm4gbi5saXN0ZW5lcnM9dCxufShlLmVsbSxpKSxuKHI9ZS5jb21wb25lbnRJbnN0YW5jZSkmJm4ocj1yLl92bm9kZSkmJm4oci5kYXRhKSYmdyhyLHQpLHI9MDtyPHMucmVtb3ZlLmxlbmd0aDsrK3Ipcy5yZW1vdmVbcl0oZSx0KTtuKHI9ZS5kYXRhLmhvb2spJiZuKHI9ci5yZW1vdmUpP3IoZSx0KTp0KCl9ZWxzZSBsKGUuZWxtKX1mdW5jdGlvbiBDKGUsdCxyLGkpe2Zvcih2YXIgbz1yO288aTtvKyspe3ZhciBhPXRbb107aWYobihhKSYmaXIoZSxhKSlyZXR1cm4gb319ZnVuY3Rpb24geChlLGksbyxhLGMsbCl7aWYoZSE9PWkpe24oaS5lbG0pJiZuKGEpJiYoaT1hW2NdPW1lKGkpKTt2YXIgcD1pLmVsbT1lLmVsbTtpZihyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSluKGkuYXN5bmNGYWN0b3J5LnJlc29sdmVkKT9PKGUuZWxtLGksbyk6aS5pc0FzeW5jUGxhY2Vob2xkZXI9ITA7ZWxzZSBpZihyKGkuaXNTdGF0aWMpJiZyKGUuaXNTdGF0aWMpJiZpLmtleT09PWUua2V5JiYocihpLmlzQ2xvbmVkKXx8cihpLmlzT25jZSkpKWkuY29tcG9uZW50SW5zdGFuY2U9ZS5jb21wb25lbnRJbnN0YW5jZTtlbHNle3ZhciBkLHY9aS5kYXRhO24odikmJm4oZD12Lmhvb2spJiZuKGQ9ZC5wcmVwYXRjaCkmJmQoZSxpKTt2YXIgaD1lLmNoaWxkcmVuLHk9aS5jaGlsZHJlbjtpZihuKHYpJiZtKGkpKXtmb3IoZD0wO2Q8cy51cGRhdGUubGVuZ3RoOysrZClzLnVwZGF0ZVtkXShlLGkpO24oZD12Lmhvb2spJiZuKGQ9ZC51cGRhdGUpJiZkKGUsaSl9dChpLnRleHQpP24oaCkmJm4oeSk/aCE9PXkmJmZ1bmN0aW9uKGUscixpLG8sYSl7Zm9yKHZhciBzLGMsbCxwPTAsZD0wLHY9ci5sZW5ndGgtMSxoPXJbMF0sbT1yW3ZdLHk9aS5sZW5ndGgtMSxnPWlbMF0sYj1pW3ldLHc9IWE7cDw9diYmZDw9eTspdChoKT9oPXJbKytwXTp0KG0pP209clstLXZdOmlyKGgsZyk/KHgoaCxnLG8saSxkKSxoPXJbKytwXSxnPWlbKytkXSk6aXIobSxiKT8oeChtLGIsbyxpLHkpLG09clstLXZdLGI9aVstLXldKTppcihoLGIpPyh4KGgsYixvLGkseSksdyYmdS5pbnNlcnRCZWZvcmUoZSxoLmVsbSx1Lm5leHRTaWJsaW5nKG0uZWxtKSksaD1yWysrcF0sYj1pWy0teV0pOmlyKG0sZyk/KHgobSxnLG8saSxkKSx3JiZ1Lmluc2VydEJlZm9yZShlLG0uZWxtLGguZWxtKSxtPXJbLS12XSxnPWlbKytkXSk6KHQocykmJihzPW9yKHIscCx2KSksdChjPW4oZy5rZXkpP3NbZy5rZXldOkMoZyxyLHAsdikpP2YoZyxvLGUsaC5lbG0sITEsaSxkKTppcihsPXJbY10sZyk/KHgobCxnLG8saSxkKSxyW2NdPXZvaWQgMCx3JiZ1Lmluc2VydEJlZm9yZShlLGwuZWxtLGguZWxtKSk6ZihnLG8sZSxoLmVsbSwhMSxpLGQpLGc9aVsrK2RdKTtwPnY/XyhlLHQoaVt5KzFdKT9udWxsOmlbeSsxXS5lbG0saSxkLHksbyk6ZD55JiYkKHIscCx2KX0ocCxoLHksbyxsKTpuKHkpPyhuKGUudGV4dCkmJnUuc2V0VGV4dENvbnRlbnQocCwiIiksXyhwLG51bGwseSwwLHkubGVuZ3RoLTEsbykpOm4oaCk/JChoLDAsaC5sZW5ndGgtMSk6bihlLnRleHQpJiZ1LnNldFRleHRDb250ZW50KHAsIiIpOmUudGV4dCE9PWkudGV4dCYmdS5zZXRUZXh0Q29udGVudChwLGkudGV4dCksbih2KSYmbihkPXYuaG9vaykmJm4oZD1kLnBvc3RwYXRjaCkmJmQoZSxpKX19fWZ1bmN0aW9uIGsoZSx0LGkpe2lmKHIoaSkmJm4oZS5wYXJlbnQpKWUucGFyZW50LmRhdGEucGVuZGluZ0luc2VydD10O2Vsc2UgZm9yKHZhciBvPTA7bzx0Lmxlbmd0aDsrK28pdFtvXS5kYXRhLmhvb2suaW5zZXJ0KHRbb10pfXZhciBBPXAoImF0dHJzLGNsYXNzLHN0YXRpY0NsYXNzLHN0YXRpY1N0eWxlLGtleSIpO2Z1bmN0aW9uIE8oZSx0LGksbyl7dmFyIGEscz10LnRhZyxjPXQuZGF0YSx1PXQuY2hpbGRyZW47aWYobz1vfHxjJiZjLnByZSx0LmVsbT1lLHIodC5pc0NvbW1lbnQpJiZuKHQuYXN5bmNGYWN0b3J5KSlyZXR1cm4gdC5pc0FzeW5jUGxhY2Vob2xkZXI9ITAsITA7aWYobihjKSYmKG4oYT1jLmhvb2spJiZuKGE9YS5pbml0KSYmYSh0LCEwKSxuKGE9dC5jb21wb25lbnRJbnN0YW5jZSkpKXJldHVybiBkKHQsaSksITA7aWYobihzKSl7aWYobih1KSlpZihlLmhhc0NoaWxkTm9kZXMoKSlpZihuKGE9YykmJm4oYT1hLmRvbVByb3BzKSYmbihhPWEuaW5uZXJIVE1MKSl7aWYoYSE9PWUuaW5uZXJIVE1MKXJldHVybiExfWVsc2V7Zm9yKHZhciBsPSEwLGY9ZS5maXJzdENoaWxkLHA9MDtwPHUubGVuZ3RoO3ArKyl7aWYoIWZ8fCFPKGYsdVtwXSxpLG8pKXtsPSExO2JyZWFrfWY9Zi5uZXh0U2libGluZ31pZighbHx8ZilyZXR1cm4hMX1lbHNlIGgodCx1LGkpO2lmKG4oYykpe3ZhciB2PSExO2Zvcih2YXIgbSBpbiBjKWlmKCFBKG0pKXt2PSEwLHkodCxpKTticmVha30hdiYmYy5jbGFzcyYmZXQoYy5jbGFzcyl9fWVsc2UgZS5kYXRhIT09dC50ZXh0JiYoZS5kYXRhPXQudGV4dCk7cmV0dXJuITB9cmV0dXJuIGZ1bmN0aW9uKGUsaSxvLGEpe2lmKCF0KGkpKXt2YXIgYyxsPSExLHA9W107aWYodChlKSlsPSEwLGYoaSxwKTtlbHNle3ZhciBkPW4oZS5ub2RlVHlwZSk7aWYoIWQmJmlyKGUsaSkpeChlLGkscCxudWxsLG51bGwsYSk7ZWxzZXtpZihkKXtpZigxPT09ZS5ub2RlVHlwZSYmZS5oYXNBdHRyaWJ1dGUoTCkmJihlLnJlbW92ZUF0dHJpYnV0ZShMKSxvPSEwKSxyKG8pJiZPKGUsaSxwKSlyZXR1cm4gayhpLHAsITApLGU7Yz1lLGU9bmV3IHBlKHUudGFnTmFtZShjKS50b0xvd2VyQ2FzZSgpLHt9LFtdLHZvaWQgMCxjKX12YXIgdj1lLmVsbSxoPXUucGFyZW50Tm9kZSh2KTtpZihmKGkscCx2Ll9sZWF2ZUNiP251bGw6aCx1Lm5leHRTaWJsaW5nKHYpKSxuKGkucGFyZW50KSlmb3IodmFyIHk9aS5wYXJlbnQsZz1tKGkpO3k7KXtmb3IodmFyIF89MDtfPHMuZGVzdHJveS5sZW5ndGg7KytfKXMuZGVzdHJveVtfXSh5KTtpZih5LmVsbT1pLmVsbSxnKXtmb3IodmFyIHc9MDt3PHMuY3JlYXRlLmxlbmd0aDsrK3cpcy5jcmVhdGVbd10obnIseSk7dmFyIEM9eS5kYXRhLmhvb2suaW5zZXJ0O2lmKEMubWVyZ2VkKWZvcih2YXIgQT0xO0E8Qy5mbnMubGVuZ3RoO0ErKylDLmZuc1tBXSgpfWVsc2UgdHIoeSk7eT15LnBhcmVudH1uKGgpPyQoW2VdLDAsMCk6bihlLnRhZykmJmIoZSl9fXJldHVybiBrKGkscCxsKSxpLmVsbX1uKGUpJiZiKGUpfX0oe25vZGVPcHM6UW4sbW9kdWxlczpbbXIseHIsbmksb2ksbWksej97Y3JlYXRlOlVpLGFjdGl2YXRlOlVpLHJlbW92ZTpmdW5jdGlvbihlLHQpeyEwIT09ZS5kYXRhLnNob3c/UmkoZSx0KTp0KCl9fTp7fV0uY29uY2F0KHByKX0pO1cmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2UmJmUudm1vZGVsJiZYaShlLCJpbnB1dCIpfSk7dmFyIFZpPXtpbnNlcnRlZDpmdW5jdGlvbihlLHQsbixyKXsic2VsZWN0Ij09PW4udGFnPyhyLmVsbSYmIXIuZWxtLl92T3B0aW9ucz9pdChuLCJwb3N0cGF0Y2giLGZ1bmN0aW9uKCl7VmkuY29tcG9uZW50VXBkYXRlZChlLHQsbil9KTpLaShlLHQsbi5jb250ZXh0KSxlLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpKTooInRleHRhcmVhIj09PW4udGFnfHxYbihlLnR5cGUpKSYmKGUuX3ZNb2RpZmllcnM9dC5tb2RpZmllcnMsdC5tb2RpZmllcnMubGF6eXx8KGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25zdGFydCIsWmkpLGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25lbmQiLEdpKSxlLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsR2kpLFcmJihlLnZtb2RlbD0hMCkpKX0sY29tcG9uZW50VXBkYXRlZDpmdW5jdGlvbihlLHQsbil7aWYoInNlbGVjdCI9PT1uLnRhZyl7S2koZSx0LG4uY29udGV4dCk7dmFyIHI9ZS5fdk9wdGlvbnMsaT1lLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpO2lmKGkuc29tZShmdW5jdGlvbihlLHQpe3JldHVybiFOKGUsclt0XSl9KSkoZS5tdWx0aXBsZT90LnZhbHVlLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIHFpKGUsaSl9KTp0LnZhbHVlIT09dC5vbGRWYWx1ZSYmcWkodC52YWx1ZSxpKSkmJlhpKGUsImNoYW5nZSIpfX19O2Z1bmN0aW9uIEtpKGUsdCxuKXtKaShlLHQsbiksKHF8fFopJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7SmkoZSx0LG4pfSwwKX1mdW5jdGlvbiBKaShlLHQsbil7dmFyIHI9dC52YWx1ZSxpPWUubXVsdGlwbGU7aWYoIWl8fEFycmF5LmlzQXJyYXkocikpe2Zvcih2YXIgbyxhLHM9MCxjPWUub3B0aW9ucy5sZW5ndGg7czxjO3MrKylpZihhPWUub3B0aW9uc1tzXSxpKW89aihyLFdpKGEpKT4tMSxhLnNlbGVjdGVkIT09byYmKGEuc2VsZWN0ZWQ9byk7ZWxzZSBpZihOKFdpKGEpLHIpKXJldHVybiB2b2lkKGUuc2VsZWN0ZWRJbmRleCE9PXMmJihlLnNlbGVjdGVkSW5kZXg9cykpO2l8fChlLnNlbGVjdGVkSW5kZXg9LTEpfX1mdW5jdGlvbiBxaShlLHQpe3JldHVybiB0LmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiFOKHQsZSl9KX1mdW5jdGlvbiBXaShlKXtyZXR1cm4iX3ZhbHVlImluIGU/ZS5fdmFsdWU6ZS52YWx1ZX1mdW5jdGlvbiBaaShlKXtlLnRhcmdldC5jb21wb3Npbmc9ITB9ZnVuY3Rpb24gR2koZSl7ZS50YXJnZXQuY29tcG9zaW5nJiYoZS50YXJnZXQuY29tcG9zaW5nPSExLFhpKGUudGFyZ2V0LCJpbnB1dCIpKX1mdW5jdGlvbiBYaShlLHQpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7bi5pbml0RXZlbnQodCwhMCwhMCksZS5kaXNwYXRjaEV2ZW50KG4pfWZ1bmN0aW9uIFlpKGUpe3JldHVybiFlLmNvbXBvbmVudEluc3RhbmNlfHxlLmRhdGEmJmUuZGF0YS50cmFuc2l0aW9uP2U6WWkoZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpfXZhciBRaT17bW9kZWw6Vmksc2hvdzp7YmluZDpmdW5jdGlvbihlLHQsbil7dmFyIHI9dC52YWx1ZSxpPShuPVlpKG4pKS5kYXRhJiZuLmRhdGEudHJhbnNpdGlvbixvPWUuX192T3JpZ2luYWxEaXNwbGF5PSJub25lIj09PWUuc3R5bGUuZGlzcGxheT8iIjplLnN0eWxlLmRpc3BsYXk7ciYmaT8obi5kYXRhLnNob3c9ITAsUGkobixmdW5jdGlvbigpe2Uuc3R5bGUuZGlzcGxheT1vfSkpOmUuc3R5bGUuZGlzcGxheT1yP286Im5vbmUifSx1cGRhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQudmFsdWU7IXIhPSF0Lm9sZFZhbHVlJiYoKG49WWkobikpLmRhdGEmJm4uZGF0YS50cmFuc2l0aW9uPyhuLmRhdGEuc2hvdz0hMCxyP1BpKG4sZnVuY3Rpb24oKXtlLnN0eWxlLmRpc3BsYXk9ZS5fX3ZPcmlnaW5hbERpc3BsYXl9KTpSaShuLGZ1bmN0aW9uKCl7ZS5zdHlsZS5kaXNwbGF5PSJub25lIn0pKTplLnN0eWxlLmRpc3BsYXk9cj9lLl9fdk9yaWdpbmFsRGlzcGxheToibm9uZSIpfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0LG4scixpKXtpfHwoZS5zdHlsZS5kaXNwbGF5PWUuX192T3JpZ2luYWxEaXNwbGF5KX19fSxlbz17bmFtZTpTdHJpbmcsYXBwZWFyOkJvb2xlYW4sY3NzOkJvb2xlYW4sbW9kZTpTdHJpbmcsdHlwZTpTdHJpbmcsZW50ZXJDbGFzczpTdHJpbmcsbGVhdmVDbGFzczpTdHJpbmcsZW50ZXJUb0NsYXNzOlN0cmluZyxsZWF2ZVRvQ2xhc3M6U3RyaW5nLGVudGVyQWN0aXZlQ2xhc3M6U3RyaW5nLGxlYXZlQWN0aXZlQ2xhc3M6U3RyaW5nLGFwcGVhckNsYXNzOlN0cmluZyxhcHBlYXJBY3RpdmVDbGFzczpTdHJpbmcsYXBwZWFyVG9DbGFzczpTdHJpbmcsZHVyYXRpb246W051bWJlcixTdHJpbmcsT2JqZWN0XX07ZnVuY3Rpb24gdG8oZSl7dmFyIHQ9ZSYmZS5jb21wb25lbnRPcHRpb25zO3JldHVybiB0JiZ0LkN0b3Iub3B0aW9ucy5hYnN0cmFjdD90byh6dCh0LmNoaWxkcmVuKSk6ZX1mdW5jdGlvbiBubyhlKXt2YXIgdD17fSxuPWUuJG9wdGlvbnM7Zm9yKHZhciByIGluIG4ucHJvcHNEYXRhKXRbcl09ZVtyXTt2YXIgaT1uLl9wYXJlbnRMaXN0ZW5lcnM7Zm9yKHZhciBvIGluIGkpdFtiKG8pXT1pW29dO3JldHVybiB0fWZ1bmN0aW9uIHJvKGUsdCl7aWYoL1xkLWtlZXAtYWxpdmUkLy50ZXN0KHQudGFnKSlyZXR1cm4gZSgia2VlcC1hbGl2ZSIse3Byb3BzOnQuY29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGF9KX12YXIgaW89ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnfHxVdChlKX0sb289ZnVuY3Rpb24oZSl7cmV0dXJuInNob3ciPT09ZS5uYW1lfSxhbz17bmFtZToidHJhbnNpdGlvbiIscHJvcHM6ZW8sYWJzdHJhY3Q6ITAscmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLiRzbG90cy5kZWZhdWx0O2lmKG4mJihuPW4uZmlsdGVyKGlvKSkubGVuZ3RoKXt2YXIgcj10aGlzLm1vZGUsbz1uWzBdO2lmKGZ1bmN0aW9uKGUpe2Zvcig7ZT1lLnBhcmVudDspaWYoZS5kYXRhLnRyYW5zaXRpb24pcmV0dXJuITB9KHRoaXMuJHZub2RlKSlyZXR1cm4gbzt2YXIgYT10byhvKTtpZighYSlyZXR1cm4gbztpZih0aGlzLl9sZWF2aW5nKXJldHVybiBybyhlLG8pO3ZhciBzPSJfX3RyYW5zaXRpb24tIit0aGlzLl91aWQrIi0iO2Eua2V5PW51bGw9PWEua2V5P2EuaXNDb21tZW50P3MrImNvbW1lbnQiOnMrYS50YWc6aShhLmtleSk/MD09PVN0cmluZyhhLmtleSkuaW5kZXhPZihzKT9hLmtleTpzK2Eua2V5OmEua2V5O3ZhciBjPShhLmRhdGF8fChhLmRhdGE9e30pKS50cmFuc2l0aW9uPW5vKHRoaXMpLHU9dGhpcy5fdm5vZGUsbD10byh1KTtpZihhLmRhdGEuZGlyZWN0aXZlcyYmYS5kYXRhLmRpcmVjdGl2ZXMuc29tZShvbykmJihhLmRhdGEuc2hvdz0hMCksbCYmbC5kYXRhJiYhZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5rZXk9PT1lLmtleSYmdC50YWc9PT1lLnRhZ30oYSxsKSYmIVV0KGwpJiYoIWwuY29tcG9uZW50SW5zdGFuY2V8fCFsLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZS5pc0NvbW1lbnQpKXt2YXIgZj1sLmRhdGEudHJhbnNpdGlvbj1BKHt9LGMpO2lmKCJvdXQtaW4iPT09cilyZXR1cm4gdGhpcy5fbGVhdmluZz0hMCxpdChmLCJhZnRlckxlYXZlIixmdW5jdGlvbigpe3QuX2xlYXZpbmc9ITEsdC4kZm9yY2VVcGRhdGUoKX0pLHJvKGUsbyk7aWYoImluLW91dCI9PT1yKXtpZihVdChhKSlyZXR1cm4gdTt2YXIgcCxkPWZ1bmN0aW9uKCl7cCgpfTtpdChjLCJhZnRlckVudGVyIixkKSxpdChjLCJlbnRlckNhbmNlbGxlZCIsZCksaXQoZiwiZGVsYXlMZWF2ZSIsZnVuY3Rpb24oZSl7cD1lfSl9fXJldHVybiBvfX19LHNvPUEoe3RhZzpTdHJpbmcsbW92ZUNsYXNzOlN0cmluZ30sZW8pO2Z1bmN0aW9uIGNvKGUpe2UuZWxtLl9tb3ZlQ2ImJmUuZWxtLl9tb3ZlQ2IoKSxlLmVsbS5fZW50ZXJDYiYmZS5lbG0uX2VudGVyQ2IoKX1mdW5jdGlvbiB1byhlKXtlLmRhdGEubmV3UG9zPWUuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWZ1bmN0aW9uIGxvKGUpe3ZhciB0PWUuZGF0YS5wb3Msbj1lLmRhdGEubmV3UG9zLHI9dC5sZWZ0LW4ubGVmdCxpPXQudG9wLW4udG9wO2lmKHJ8fGkpe2UuZGF0YS5tb3ZlZD0hMDt2YXIgbz1lLmVsbS5zdHlsZTtvLnRyYW5zZm9ybT1vLldlYmtpdFRyYW5zZm9ybT0idHJhbnNsYXRlKCIrcisicHgsIitpKyJweCkiLG8udHJhbnNpdGlvbkR1cmF0aW9uPSIwcyJ9fWRlbGV0ZSBzby5tb2RlO3ZhciBmbz17VHJhbnNpdGlvbjphbyxUcmFuc2l0aW9uR3JvdXA6e3Byb3BzOnNvLGJlZm9yZU1vdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX3VwZGF0ZTt0aGlzLl91cGRhdGU9ZnVuY3Rpb24obixyKXt2YXIgaT1adChlKTtlLl9fcGF0Y2hfXyhlLl92bm9kZSxlLmtlcHQsITEsITApLGUuX3Zub2RlPWUua2VwdCxpKCksdC5jYWxsKGUsbixyKX19LHJlbmRlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50YWd8fHRoaXMuJHZub2RlLmRhdGEudGFnfHwic3BhbiIsbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGhpcy5wcmV2Q2hpbGRyZW49dGhpcy5jaGlsZHJlbixpPXRoaXMuJHNsb3RzLmRlZmF1bHR8fFtdLG89dGhpcy5jaGlsZHJlbj1bXSxhPW5vKHRoaXMpLHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGM9aVtzXTtjLnRhZyYmbnVsbCE9Yy5rZXkmJjAhPT1TdHJpbmcoYy5rZXkpLmluZGV4T2YoIl9fdmxpc3QiKSYmKG8ucHVzaChjKSxuW2Mua2V5XT1jLChjLmRhdGF8fChjLmRhdGE9e30pKS50cmFuc2l0aW9uPWEpfWlmKHIpe2Zvcih2YXIgdT1bXSxsPVtdLGY9MDtmPHIubGVuZ3RoO2YrKyl7dmFyIHA9cltmXTtwLmRhdGEudHJhbnNpdGlvbj1hLHAuZGF0YS5wb3M9cC5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbltwLmtleV0/dS5wdXNoKHApOmwucHVzaChwKX10aGlzLmtlcHQ9ZSh0LG51bGwsdSksdGhpcy5yZW1vdmVkPWx9cmV0dXJuIGUodCxudWxsLG8pfSx1cGRhdGVkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcmV2Q2hpbGRyZW4sdD10aGlzLm1vdmVDbGFzc3x8KHRoaXMubmFtZXx8InYiKSsiLW1vdmUiO2UubGVuZ3RoJiZ0aGlzLmhhc01vdmUoZVswXS5lbG0sdCkmJihlLmZvckVhY2goY28pLGUuZm9yRWFjaCh1byksZS5mb3JFYWNoKGxvKSx0aGlzLl9yZWZsb3c9ZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQsZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5tb3ZlZCl7dmFyIG49ZS5lbG0scj1uLnN0eWxlO05pKG4sdCksci50cmFuc2Zvcm09ci5XZWJraXRUcmFuc2Zvcm09ci50cmFuc2l0aW9uRHVyYXRpb249IiIsbi5hZGRFdmVudExpc3RlbmVyKEFpLG4uX21vdmVDYj1mdW5jdGlvbiBlKHIpe3ImJnIudGFyZ2V0IT09bnx8ciYmIS90cmFuc2Zvcm0kLy50ZXN0KHIucHJvcGVydHlOYW1lKXx8KG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihBaSxlKSxuLl9tb3ZlQ2I9bnVsbCxqaShuLHQpKX0pfX0pKX0sbWV0aG9kczp7aGFzTW92ZTpmdW5jdGlvbihlLHQpe2lmKCF3aSlyZXR1cm4hMTtpZih0aGlzLl9oYXNNb3ZlKXJldHVybiB0aGlzLl9oYXNNb3ZlO3ZhciBuPWUuY2xvbmVOb2RlKCk7ZS5fdHJhbnNpdGlvbkNsYXNzZXMmJmUuX3RyYW5zaXRpb25DbGFzc2VzLmZvckVhY2goZnVuY3Rpb24oZSl7X2kobixlKX0pLGdpKG4sdCksbi5zdHlsZS5kaXNwbGF5PSJub25lIix0aGlzLiRlbC5hcHBlbmRDaGlsZChuKTt2YXIgcj1NaShuKTtyZXR1cm4gdGhpcy4kZWwucmVtb3ZlQ2hpbGQobiksdGhpcy5faGFzTW92ZT1yLmhhc1RyYW5zZm9ybX19fX07d24uY29uZmlnLm11c3RVc2VQcm9wPWpuLHduLmNvbmZpZy5pc1Jlc2VydmVkVGFnPVduLHduLmNvbmZpZy5pc1Jlc2VydmVkQXR0cj1Fbix3bi5jb25maWcuZ2V0VGFnTmFtZXNwYWNlPVpuLHduLmNvbmZpZy5pc1Vua25vd25FbGVtZW50PWZ1bmN0aW9uKGUpe2lmKCF6KXJldHVybiEwO2lmKFduKGUpKXJldHVybiExO2lmKGU9ZS50b0xvd2VyQ2FzZSgpLG51bGwhPUduW2VdKXJldHVybiBHbltlXTt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiBlLmluZGV4T2YoIi0iKT4tMT9HbltlXT10LmNvbnN0cnVjdG9yPT09d2luZG93LkhUTUxVbmtub3duRWxlbWVudHx8dC5jb25zdHJ1Y3Rvcj09PXdpbmRvdy5IVE1MRWxlbWVudDpHbltlXT0vSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KHQudG9TdHJpbmcoKSl9LEEod24ub3B0aW9ucy5kaXJlY3RpdmVzLFFpKSxBKHduLm9wdGlvbnMuY29tcG9uZW50cyxmbyksd24ucHJvdG90eXBlLl9fcGF0Y2hfXz16P3ppOlMsd24ucHJvdG90eXBlLiRtb3VudD1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGUuJGVsPXQsZS4kb3B0aW9ucy5yZW5kZXJ8fChlLiRvcHRpb25zLnJlbmRlcj12ZSksWXQoZSwiYmVmb3JlTW91bnQiKSxyPWZ1bmN0aW9uKCl7ZS5fdXBkYXRlKGUuX3JlbmRlcigpLG4pfSxuZXcgZm4oZSxyLFMse2JlZm9yZTpmdW5jdGlvbigpe2UuX2lzTW91bnRlZCYmIWUuX2lzRGVzdHJveWVkJiZZdChlLCJiZWZvcmVVcGRhdGUiKX19LCEwKSxuPSExLG51bGw9PWUuJHZub2RlJiYoZS5faXNNb3VudGVkPSEwLFl0KGUsIm1vdW50ZWQiKSksZX0odGhpcyxlPWUmJno/WW4oZSk6dm9pZCAwLHQpfSx6JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Ri5kZXZ0b29scyYmbmUmJm5lLmVtaXQoImluaXQiLHduKX0sMCk7dmFyIHBvPS9ce1x7KCg/Oi58XHI/XG4pKz8pXH1cfS9nLHZvPS9bLS4qKz9eJHt9KCl8W1xdXC9cXF0vZyxobz1nKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0ucmVwbGFjZSh2bywiXFwkJiIpLG49ZVsxXS5yZXBsYWNlKHZvLCJcXCQmIik7cmV0dXJuIG5ldyBSZWdFeHAodCsiKCg/Oi58XFxuKSs/KSIrbiwiZyIpfSk7dmFyIG1vPXtzdGF0aWNLZXlzOlsic3RhdGljQ2xhc3MiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsImNsYXNzIik7biYmKGUuc3RhdGljQ2xhc3M9SlNPTi5zdHJpbmdpZnkobikpO3ZhciByPUlyKGUsImNsYXNzIiwhMSk7ciYmKGUuY2xhc3NCaW5kaW5nPXIpfSxnZW5EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PSIiO3JldHVybiBlLnN0YXRpY0NsYXNzJiYodCs9InN0YXRpY0NsYXNzOiIrZS5zdGF0aWNDbGFzcysiLCIpLGUuY2xhc3NCaW5kaW5nJiYodCs9ImNsYXNzOiIrZS5jbGFzc0JpbmRpbmcrIiwiKSx0fX07dmFyIHlvLGdvPXtzdGF0aWNLZXlzOlsic3RhdGljU3R5bGUiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsInN0eWxlIik7biYmKGUuc3RhdGljU3R5bGU9SlNPTi5zdHJpbmdpZnkoYWkobikpKTt2YXIgcj1JcihlLCJzdHlsZSIsITEpO3ImJihlLnN0eWxlQmluZGluZz1yKX0sZ2VuRGF0YTpmdW5jdGlvbihlKXt2YXIgdD0iIjtyZXR1cm4gZS5zdGF0aWNTdHlsZSYmKHQrPSJzdGF0aWNTdHlsZToiK2Uuc3RhdGljU3R5bGUrIiwiKSxlLnN0eWxlQmluZGluZyYmKHQrPSJzdHlsZTooIitlLnN0eWxlQmluZGluZysiKSwiKSx0fX0sX289ZnVuY3Rpb24oZSl7cmV0dXJuKHlvPXlvfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWUseW8udGV4dENvbnRlbnR9LGJvPXAoImFyZWEsYmFzZSxicixjb2wsZW1iZWQsZnJhbWUsaHIsaW1nLGlucHV0LGlzaW5kZXgsa2V5Z2VuLGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyIiksJG89cCgiY29sZ3JvdXAsZGQsZHQsbGksb3B0aW9ucyxwLHRkLHRmb290LHRoLHRoZWFkLHRyLHNvdXJjZSIpLHdvPXAoImFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxiYXNlLGJsb2NrcXVvdGUsYm9keSxjYXB0aW9uLGNvbCxjb2xncm91cCxkZCxkZXRhaWxzLGRpYWxvZyxkaXYsZGwsZHQsZmllbGRzZXQsZmlnY2FwdGlvbixmaWd1cmUsZm9vdGVyLGZvcm0saDEsaDIsaDMsaDQsaDUsaDYsaGVhZCxoZWFkZXIsaGdyb3VwLGhyLGh0bWwsbGVnZW5kLGxpLG1lbnVpdGVtLG1ldGEsb3B0Z3JvdXAsb3B0aW9uLHBhcmFtLHJwLHJ0LHNvdXJjZSxzdHlsZSxzdW1tYXJ5LHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRpdGxlLHRyLHRyYWNrIiksQ289L15ccyooW15ccyInPD5cLz1dKykoPzpccyooPSlccyooPzoiKFteIl0qKSIrfCcoW14nXSopJyt8KFteXHMiJz08PmBdKykpKT8vLHhvPS9eXHMqKCg/OnYtW1x3LV0rOnxAfDp8IylcW1tePV0rXF1bXlxzIic8PlwvPV0qKSg/OlxzKig9KVxzKig/OiIoW14iXSopIit8JyhbXiddKiknK3woW15ccyInPTw+YF0rKSkpPy8sa289IlthLXpBLVpfXVtcXC1cXC4wLTlfYS16QS1aIitQLnNvdXJjZSsiXSoiLEFvPSIoKD86IitrbysiXFw6KT8iK2tvKyIpIixPbz1uZXcgUmVnRXhwKCJePCIrQW8pLFNvPS9eXHMqKFwvPyk+LyxUbz1uZXcgUmVnRXhwKCJePFxcLyIrQW8rIltePl0qPiIpLEVvPS9ePCFET0NUWVBFIFtePl0rPi9pLE5vPS9ePCFcLS0vLGpvPS9ePCFcWy8sRG89cCgic2NyaXB0LHN0eWxlLHRleHRhcmVhIiwhMCksTG89e30sTW89eyImbHQ7IjoiPCIsIiZndDsiOiI+IiwiJnF1b3Q7IjonIicsIiZhbXA7IjoiJiIsIiYjMTA7IjoiXG4iLCImIzk7IjoiXHQiLCImIzM5OyI6IicifSxJbz0vJig/Omx0fGd0fHF1b3R8YW1wfCMzOSk7L2csRm89LyYoPzpsdHxndHxxdW90fGFtcHwjMzl8IzEwfCM5KTsvZyxQbz1wKCJwcmUsdGV4dGFyZWEiLCEwKSxSbz1mdW5jdGlvbihlLHQpe3JldHVybiBlJiZQbyhlKSYmIlxuIj09PXRbMF19O2Z1bmN0aW9uIEhvKGUsdCl7dmFyIG49dD9GbzpJbztyZXR1cm4gZS5yZXBsYWNlKG4sZnVuY3Rpb24oZSl7cmV0dXJuIE1vW2VdfSl9dmFyIEJvLFVvLHpvLFZvLEtvLEpvLHFvLFdvLFpvPS9eQHxedi1vbjovLEdvPS9edi18XkB8Xjp8XiMvLFhvPS8oW1xzXFNdKj8pXHMrKD86aW58b2YpXHMrKFtcc1xTXSopLyxZbz0vLChbXixcfVxdXSopKD86LChbXixcfVxdXSopKT8kLyxRbz0vXlwofFwpJC9nLGVhPS9eXFsuKlxdJC8sdGE9LzooLiopJC8sbmE9L146fF5cLnxedi1iaW5kOi8scmE9L1wuW14uXF1dKyg/PVteXF1dKiQpL2csaWE9L152LXNsb3QoOnwkKXxeIy8sb2E9L1tcclxuXS8sYWE9L1xzKy9nLHNhPWcoX28pLGNhPSJfZW1wdHlfIjtmdW5jdGlvbiB1YShlLHQsbil7cmV0dXJue3R5cGU6MSx0YWc6ZSxhdHRyc0xpc3Q6dCxhdHRyc01hcDptYSh0KSxyYXdBdHRyc01hcDp7fSxwYXJlbnQ6bixjaGlsZHJlbjpbXX19ZnVuY3Rpb24gbGEoZSx0KXtCbz10Lndhcm58fFNyLEpvPXQuaXNQcmVUYWd8fFQscW89dC5tdXN0VXNlUHJvcHx8VCxXbz10LmdldFRhZ05hbWVzcGFjZXx8VDt0LmlzUmVzZXJ2ZWRUYWc7em89VHIodC5tb2R1bGVzLCJ0cmFuc2Zvcm1Ob2RlIiksVm89VHIodC5tb2R1bGVzLCJwcmVUcmFuc2Zvcm1Ob2RlIiksS289VHIodC5tb2R1bGVzLCJwb3N0VHJhbnNmb3JtTm9kZSIpLFVvPXQuZGVsaW1pdGVyczt2YXIgbixyLGk9W10sbz0hMSE9PXQucHJlc2VydmVXaGl0ZXNwYWNlLGE9dC53aGl0ZXNwYWNlLHM9ITEsYz0hMTtmdW5jdGlvbiB1KGUpe2lmKGwoZSksc3x8ZS5wcm9jZXNzZWR8fChlPWZhKGUsdCkpLGkubGVuZ3RofHxlPT09bnx8bi5pZiYmKGUuZWxzZWlmfHxlLmVsc2UpJiZkYShuLHtleHA6ZS5lbHNlaWYsYmxvY2s6ZX0pLHImJiFlLmZvcmJpZGRlbilpZihlLmVsc2VpZnx8ZS5lbHNlKWE9ZSwodT1mdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aDtmb3IoO3QtLTspe2lmKDE9PT1lW3RdLnR5cGUpcmV0dXJuIGVbdF07ZS5wb3AoKX19KHIuY2hpbGRyZW4pKSYmdS5pZiYmZGEodSx7ZXhwOmEuZWxzZWlmLGJsb2NrOmF9KTtlbHNle2lmKGUuc2xvdFNjb3BlKXt2YXIgbz1lLnNsb3RUYXJnZXR8fCciZGVmYXVsdCInOyhyLnNjb3BlZFNsb3RzfHwoci5zY29wZWRTbG90cz17fSkpW29dPWV9ci5jaGlsZHJlbi5wdXNoKGUpLGUucGFyZW50PXJ9dmFyIGEsdTtlLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlLnNsb3RTY29wZX0pLGwoZSksZS5wcmUmJihzPSExKSxKbyhlLnRhZykmJihjPSExKTtmb3IodmFyIGY9MDtmPEtvLmxlbmd0aDtmKyspS29bZl0oZSx0KX1mdW5jdGlvbiBsKGUpe2lmKCFjKWZvcih2YXIgdDsodD1lLmNoaWxkcmVuW2UuY2hpbGRyZW4ubGVuZ3RoLTFdKSYmMz09PXQudHlwZSYmIiAiPT09dC50ZXh0OyllLmNoaWxkcmVuLnBvcCgpfXJldHVybiBmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyLGk9W10sbz10LmV4cGVjdEhUTUwsYT10LmlzVW5hcnlUYWd8fFQscz10LmNhbkJlTGVmdE9wZW5UYWd8fFQsYz0wO2U7KXtpZihuPWUsciYmRG8ocikpe3ZhciB1PTAsbD1yLnRvTG93ZXJDYXNlKCksZj1Mb1tsXXx8KExvW2xdPW5ldyBSZWdFeHAoIihbXFxzXFxTXSo/KSg8LyIrbCsiW14+XSo+KSIsImkiKSkscD1lLnJlcGxhY2UoZixmdW5jdGlvbihlLG4scil7cmV0dXJuIHU9ci5sZW5ndGgsRG8obCl8fCJub3NjcmlwdCI9PT1sfHwobj1uLnJlcGxhY2UoLzwhXC0tKFtcc1xTXSo/KS0tPi9nLCIkMSIpLnJlcGxhY2UoLzwhXFtDREFUQVxbKFtcc1xTXSo/KV1dPi9nLCIkMSIpKSxSbyhsLG4pJiYobj1uLnNsaWNlKDEpKSx0LmNoYXJzJiZ0LmNoYXJzKG4pLCIifSk7Yys9ZS5sZW5ndGgtcC5sZW5ndGgsZT1wLEEobCxjLXUsYyl9ZWxzZXt2YXIgZD1lLmluZGV4T2YoIjwiKTtpZigwPT09ZCl7aWYoTm8udGVzdChlKSl7dmFyIHY9ZS5pbmRleE9mKCItLVx4M2UiKTtpZih2Pj0wKXt0LnNob3VsZEtlZXBDb21tZW50JiZ0LmNvbW1lbnQoZS5zdWJzdHJpbmcoNCx2KSxjLGMrdiszKSxDKHYrMyk7Y29udGludWV9fWlmKGpvLnRlc3QoZSkpe3ZhciBoPWUuaW5kZXhPZigiXT4iKTtpZihoPj0wKXtDKGgrMik7Y29udGludWV9fXZhciBtPWUubWF0Y2goRW8pO2lmKG0pe0MobVswXS5sZW5ndGgpO2NvbnRpbnVlfXZhciB5PWUubWF0Y2goVG8pO2lmKHkpe3ZhciBnPWM7Qyh5WzBdLmxlbmd0aCksQSh5WzFdLGcsYyk7Y29udGludWV9dmFyIF89eCgpO2lmKF8pe2soXyksUm8oXy50YWdOYW1lLGUpJiZDKDEpO2NvbnRpbnVlfX12YXIgYj12b2lkIDAsJD12b2lkIDAsdz12b2lkIDA7aWYoZD49MCl7Zm9yKCQ9ZS5zbGljZShkKTshKFRvLnRlc3QoJCl8fE9vLnRlc3QoJCl8fE5vLnRlc3QoJCl8fGpvLnRlc3QoJCl8fCh3PSQuaW5kZXhPZigiPCIsMSkpPDApOylkKz13LCQ9ZS5zbGljZShkKTtiPWUuc3Vic3RyaW5nKDAsZCl9ZDwwJiYoYj1lKSxiJiZDKGIubGVuZ3RoKSx0LmNoYXJzJiZiJiZ0LmNoYXJzKGIsYy1iLmxlbmd0aCxjKX1pZihlPT09bil7dC5jaGFycyYmdC5jaGFycyhlKTticmVha319ZnVuY3Rpb24gQyh0KXtjKz10LGU9ZS5zdWJzdHJpbmcodCl9ZnVuY3Rpb24geCgpe3ZhciB0PWUubWF0Y2goT28pO2lmKHQpe3ZhciBuLHIsaT17dGFnTmFtZTp0WzFdLGF0dHJzOltdLHN0YXJ0OmN9O2ZvcihDKHRbMF0ubGVuZ3RoKTshKG49ZS5tYXRjaChTbykpJiYocj1lLm1hdGNoKHhvKXx8ZS5tYXRjaChDbykpOylyLnN0YXJ0PWMsQyhyWzBdLmxlbmd0aCksci5lbmQ9YyxpLmF0dHJzLnB1c2gocik7aWYobilyZXR1cm4gaS51bmFyeVNsYXNoPW5bMV0sQyhuWzBdLmxlbmd0aCksaS5lbmQ9YyxpfX1mdW5jdGlvbiBrKGUpe3ZhciBuPWUudGFnTmFtZSxjPWUudW5hcnlTbGFzaDtvJiYoInAiPT09ciYmd28obikmJkEocikscyhuKSYmcj09PW4mJkEobikpO2Zvcih2YXIgdT1hKG4pfHwhIWMsbD1lLmF0dHJzLmxlbmd0aCxmPW5ldyBBcnJheShsKSxwPTA7cDxsO3ArKyl7dmFyIGQ9ZS5hdHRyc1twXSx2PWRbM118fGRbNF18fGRbNV18fCIiLGg9ImEiPT09biYmImhyZWYiPT09ZFsxXT90LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzO2ZbcF09e25hbWU6ZFsxXSx2YWx1ZTpIbyh2LGgpfX11fHwoaS5wdXNoKHt0YWc6bixsb3dlckNhc2VkVGFnOm4udG9Mb3dlckNhc2UoKSxhdHRyczpmLHN0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kfSkscj1uKSx0LnN0YXJ0JiZ0LnN0YXJ0KG4sZix1LGUuc3RhcnQsZS5lbmQpfWZ1bmN0aW9uIEEoZSxuLG8pe3ZhciBhLHM7aWYobnVsbD09biYmKG49YyksbnVsbD09byYmKG89YyksZSlmb3Iocz1lLnRvTG93ZXJDYXNlKCksYT1pLmxlbmd0aC0xO2E+PTAmJmlbYV0ubG93ZXJDYXNlZFRhZyE9PXM7YS0tKTtlbHNlIGE9MDtpZihhPj0wKXtmb3IodmFyIHU9aS5sZW5ndGgtMTt1Pj1hO3UtLSl0LmVuZCYmdC5lbmQoaVt1XS50YWcsbixvKTtpLmxlbmd0aD1hLHI9YSYmaVthLTFdLnRhZ31lbHNlImJyIj09PXM/dC5zdGFydCYmdC5zdGFydChlLFtdLCEwLG4sbyk6InAiPT09cyYmKHQuc3RhcnQmJnQuc3RhcnQoZSxbXSwhMSxuLG8pLHQuZW5kJiZ0LmVuZChlLG4sbykpfUEoKX0oZSx7d2FybjpCbyxleHBlY3RIVE1MOnQuZXhwZWN0SFRNTCxpc1VuYXJ5VGFnOnQuaXNVbmFyeVRhZyxjYW5CZUxlZnRPcGVuVGFnOnQuY2FuQmVMZWZ0T3BlblRhZyxzaG91bGREZWNvZGVOZXdsaW5lczp0LnNob3VsZERlY29kZU5ld2xpbmVzLHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZixzaG91bGRLZWVwQ29tbWVudDp0LmNvbW1lbnRzLG91dHB1dFNvdXJjZVJhbmdlOnQub3V0cHV0U291cmNlUmFuZ2Usc3RhcnQ6ZnVuY3Rpb24oZSxvLGEsbCxmKXt2YXIgcD1yJiZyLm5zfHxXbyhlKTtxJiYic3ZnIj09PXAmJihvPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07eWEudGVzdChyLm5hbWUpfHwoci5uYW1lPXIubmFtZS5yZXBsYWNlKGdhLCIiKSx0LnB1c2gocikpfXJldHVybiB0fShvKSk7dmFyIGQsdj11YShlLG8scik7cCYmKHYubnM9cCksInN0eWxlIiE9PShkPXYpLnRhZyYmKCJzY3JpcHQiIT09ZC50YWd8fGQuYXR0cnNNYXAudHlwZSYmInRleHQvamF2YXNjcmlwdCIhPT1kLmF0dHJzTWFwLnR5cGUpfHx0ZSgpfHwodi5mb3JiaWRkZW49ITApO2Zvcih2YXIgaD0wO2g8Vm8ubGVuZ3RoO2grKyl2PVZvW2hdKHYsdCl8fHY7c3x8KCFmdW5jdGlvbihlKXtudWxsIT1GcihlLCJ2LXByZSIpJiYoZS5wcmU9ITApfSh2KSx2LnByZSYmKHM9ITApKSxKbyh2LnRhZykmJihjPSEwKSxzP2Z1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cnNMaXN0LG49dC5sZW5ndGg7aWYobilmb3IodmFyIHI9ZS5hdHRycz1uZXcgQXJyYXkobiksaT0wO2k8bjtpKyspcltpXT17bmFtZTp0W2ldLm5hbWUsdmFsdWU6SlNPTi5zdHJpbmdpZnkodFtpXS52YWx1ZSl9LG51bGwhPXRbaV0uc3RhcnQmJihyW2ldLnN0YXJ0PXRbaV0uc3RhcnQscltpXS5lbmQ9dFtpXS5lbmQpO2Vsc2UgZS5wcmV8fChlLnBsYWluPSEwKX0odik6di5wcm9jZXNzZWR8fChwYSh2KSxmdW5jdGlvbihlKXt2YXIgdD1GcihlLCJ2LWlmIik7aWYodCllLmlmPXQsZGEoZSx7ZXhwOnQsYmxvY2s6ZX0pO2Vsc2V7bnVsbCE9RnIoZSwidi1lbHNlIikmJihlLmVsc2U9ITApO3ZhciBuPUZyKGUsInYtZWxzZS1pZiIpO24mJihlLmVsc2VpZj1uKX19KHYpLGZ1bmN0aW9uKGUpe251bGwhPUZyKGUsInYtb25jZSIpJiYoZS5vbmNlPSEwKX0odikpLG58fChuPXYpLGE/dSh2KToocj12LGkucHVzaCh2KSl9LGVuZDpmdW5jdGlvbihlLHQsbil7dmFyIG89aVtpLmxlbmd0aC0xXTtpLmxlbmd0aC09MSxyPWlbaS5sZW5ndGgtMV0sdShvKX0sY2hhcnM6ZnVuY3Rpb24oZSx0LG4pe2lmKHImJighcXx8InRleHRhcmVhIiE9PXIudGFnfHxyLmF0dHJzTWFwLnBsYWNlaG9sZGVyIT09ZSkpe3ZhciBpLHUsbCxmPXIuY2hpbGRyZW47aWYoZT1jfHxlLnRyaW0oKT8ic2NyaXB0Ij09PShpPXIpLnRhZ3x8InN0eWxlIj09PWkudGFnP2U6c2EoZSk6Zi5sZW5ndGg/YT8iY29uZGVuc2UiPT09YSYmb2EudGVzdChlKT8iIjoiICI6bz8iICI6IiI6IiIpY3x8ImNvbmRlbnNlIiE9PWF8fChlPWUucmVwbGFjZShhYSwiICIpKSwhcyYmIiAiIT09ZSYmKHU9ZnVuY3Rpb24oZSx0KXt2YXIgbj10P2hvKHQpOnBvO2lmKG4udGVzdChlKSl7Zm9yKHZhciByLGksbyxhPVtdLHM9W10sYz1uLmxhc3RJbmRleD0wO3I9bi5leGVjKGUpOyl7KGk9ci5pbmRleCk+YyYmKHMucHVzaChvPWUuc2xpY2UoYyxpKSksYS5wdXNoKEpTT04uc3RyaW5naWZ5KG8pKSk7dmFyIHU9QXIoclsxXS50cmltKCkpO2EucHVzaCgiX3MoIit1KyIpIikscy5wdXNoKHsiQGJpbmRpbmciOnV9KSxjPWkrclswXS5sZW5ndGh9cmV0dXJuIGM8ZS5sZW5ndGgmJihzLnB1c2gobz1lLnNsaWNlKGMpKSxhLnB1c2goSlNPTi5zdHJpbmdpZnkobykpKSx7ZXhwcmVzc2lvbjphLmpvaW4oIisiKSx0b2tlbnM6c319fShlLFVvKSk/bD17dHlwZToyLGV4cHJlc3Npb246dS5leHByZXNzaW9uLHRva2Vuczp1LnRva2Vucyx0ZXh0OmV9OiIgIj09PWUmJmYubGVuZ3RoJiYiICI9PT1mW2YubGVuZ3RoLTFdLnRleHR8fChsPXt0eXBlOjMsdGV4dDplfSksbCYmZi5wdXNoKGwpfX0sY29tbWVudDpmdW5jdGlvbihlLHQsbil7aWYocil7dmFyIGk9e3R5cGU6Myx0ZXh0OmUsaXNDb21tZW50OiEwfTtyLmNoaWxkcmVuLnB1c2goaSl9fX0pLG59ZnVuY3Rpb24gZmEoZSx0KXt2YXIgbixyOyhyPUlyKG49ZSwia2V5IikpJiYobi5rZXk9ciksZS5wbGFpbj0hZS5rZXkmJiFlLnNjb3BlZFNsb3RzJiYhZS5hdHRyc0xpc3QubGVuZ3RoLGZ1bmN0aW9uKGUpe3ZhciB0PUlyKGUsInJlZiIpO3QmJihlLnJlZj10LGUucmVmSW5Gb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtmb3IoO3Q7KXtpZih2b2lkIDAhPT10LmZvcilyZXR1cm4hMDt0PXQucGFyZW50fXJldHVybiExfShlKSl9KGUpLGZ1bmN0aW9uKGUpe3ZhciB0OyJ0ZW1wbGF0ZSI9PT1lLnRhZz8odD1GcihlLCJzY29wZSIpLGUuc2xvdFNjb3BlPXR8fEZyKGUsInNsb3Qtc2NvcGUiKSk6KHQ9RnIoZSwic2xvdC1zY29wZSIpKSYmKGUuc2xvdFNjb3BlPXQpO3ZhciBuPUlyKGUsInNsb3QiKTtuJiYoZS5zbG90VGFyZ2V0PSciIic9PT1uPyciZGVmYXVsdCInOm4sZS5zbG90VGFyZ2V0RHluYW1pYz0hKCFlLmF0dHJzTWFwWyI6c2xvdCJdJiYhZS5hdHRyc01hcFsidi1iaW5kOnNsb3QiXSksInRlbXBsYXRlIj09PWUudGFnfHxlLnNsb3RTY29wZXx8TnIoZSwic2xvdCIsbixmdW5jdGlvbihlLHQpe3JldHVybiBlLnJhd0F0dHJzTWFwWyI6Iit0XXx8ZS5yYXdBdHRyc01hcFsidi1iaW5kOiIrdF18fGUucmF3QXR0cnNNYXBbdF19KGUsInNsb3QiKSkpO2lmKCJ0ZW1wbGF0ZSI9PT1lLnRhZyl7dmFyIHI9UHIoZSxpYSk7aWYocil7dmFyIGk9dmEociksbz1pLm5hbWUsYT1pLmR5bmFtaWM7ZS5zbG90VGFyZ2V0PW8sZS5zbG90VGFyZ2V0RHluYW1pYz1hLGUuc2xvdFNjb3BlPXIudmFsdWV8fGNhfX1lbHNle3ZhciBzPVByKGUsaWEpO2lmKHMpe3ZhciBjPWUuc2NvcGVkU2xvdHN8fChlLnNjb3BlZFNsb3RzPXt9KSx1PXZhKHMpLGw9dS5uYW1lLGY9dS5keW5hbWljLHA9Y1tsXT11YSgidGVtcGxhdGUiLFtdLGUpO3Auc2xvdFRhcmdldD1sLHAuc2xvdFRhcmdldER5bmFtaWM9ZixwLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe2lmKCFlLnNsb3RTY29wZSlyZXR1cm4gZS5wYXJlbnQ9cCwhMH0pLHAuc2xvdFNjb3BlPXMudmFsdWV8fGNhLGUuY2hpbGRyZW49W10sZS5wbGFpbj0hMX19fShlKSxmdW5jdGlvbihlKXsic2xvdCI9PT1lLnRhZyYmKGUuc2xvdE5hbWU9SXIoZSwibmFtZSIpKX0oZSksZnVuY3Rpb24oZSl7dmFyIHQ7KHQ9SXIoZSwiaXMiKSkmJihlLmNvbXBvbmVudD10KTtudWxsIT1GcihlLCJpbmxpbmUtdGVtcGxhdGUiKSYmKGUuaW5saW5lVGVtcGxhdGU9ITApfShlKTtmb3IodmFyIGk9MDtpPHpvLmxlbmd0aDtpKyspZT16b1tpXShlLHQpfHxlO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscyxjLHU9ZS5hdHRyc0xpc3Q7Zm9yKHQ9MCxuPXUubGVuZ3RoO3Q8bjt0KyspaWYocj1pPXVbdF0ubmFtZSxvPXVbdF0udmFsdWUsR28udGVzdChyKSlpZihlLmhhc0JpbmRpbmdzPSEwLChhPWhhKHIucmVwbGFjZShHbywiIikpKSYmKHI9ci5yZXBsYWNlKHJhLCIiKSksbmEudGVzdChyKSlyPXIucmVwbGFjZShuYSwiIiksbz1BcihvKSwoYz1lYS50ZXN0KHIpKSYmKHI9ci5zbGljZSgxLC0xKSksYSYmKGEucHJvcCYmIWMmJiJpbm5lckh0bWwiPT09KHI9YihyKSkmJihyPSJpbm5lckhUTUwiKSxhLmNhbWVsJiYhYyYmKHI9YihyKSksYS5zeW5jJiYocz1CcihvLCIkZXZlbnQiKSxjP01yKGUsJyJ1cGRhdGU6IisoJytyKyIpIixzLG51bGwsITEsMCx1W3RdLCEwKTooTXIoZSwidXBkYXRlOiIrYihyKSxzLG51bGwsITEsMCx1W3RdKSxDKHIpIT09YihyKSYmTXIoZSwidXBkYXRlOiIrQyhyKSxzLG51bGwsITEsMCx1W3RdKSkpKSxhJiZhLnByb3B8fCFlLmNvbXBvbmVudCYmcW8oZS50YWcsZS5hdHRyc01hcC50eXBlLHIpP0VyKGUscixvLHVbdF0sYyk6TnIoZSxyLG8sdVt0XSxjKTtlbHNlIGlmKFpvLnRlc3Qocikpcj1yLnJlcGxhY2UoWm8sIiIpLChjPWVhLnRlc3QocikpJiYocj1yLnNsaWNlKDEsLTEpKSxNcihlLHIsbyxhLCExLDAsdVt0XSxjKTtlbHNle3ZhciBsPShyPXIucmVwbGFjZShHbywiIikpLm1hdGNoKHRhKSxmPWwmJmxbMV07Yz0hMSxmJiYocj1yLnNsaWNlKDAsLShmLmxlbmd0aCsxKSksZWEudGVzdChmKSYmKGY9Zi5zbGljZSgxLC0xKSxjPSEwKSksRHIoZSxyLGksbyxmLGMsYSx1W3RdKX1lbHNlIE5yKGUscixKU09OLnN0cmluZ2lmeShvKSx1W3RdKSwhZS5jb21wb25lbnQmJiJtdXRlZCI9PT1yJiZxbyhlLnRhZyxlLmF0dHJzTWFwLnR5cGUscikmJkVyKGUsciwidHJ1ZSIsdVt0XSl9KGUpLGV9ZnVuY3Rpb24gcGEoZSl7dmFyIHQ7aWYodD1GcihlLCJ2LWZvciIpKXt2YXIgbj1mdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKFhvKTtpZighdClyZXR1cm47dmFyIG49e307bi5mb3I9dFsyXS50cmltKCk7dmFyIHI9dFsxXS50cmltKCkucmVwbGFjZShRbywiIiksaT1yLm1hdGNoKFlvKTtpPyhuLmFsaWFzPXIucmVwbGFjZShZbywiIikudHJpbSgpLG4uaXRlcmF0b3IxPWlbMV0udHJpbSgpLGlbMl0mJihuLml0ZXJhdG9yMj1pWzJdLnRyaW0oKSkpOm4uYWxpYXM9cjtyZXR1cm4gbn0odCk7biYmQShlLG4pfX1mdW5jdGlvbiBkYShlLHQpe2UuaWZDb25kaXRpb25zfHwoZS5pZkNvbmRpdGlvbnM9W10pLGUuaWZDb25kaXRpb25zLnB1c2godCl9ZnVuY3Rpb24gdmEoZSl7dmFyIHQ9ZS5uYW1lLnJlcGxhY2UoaWEsIiIpO3JldHVybiB0fHwiIyIhPT1lLm5hbWVbMF0mJih0PSJkZWZhdWx0IiksZWEudGVzdCh0KT97bmFtZTp0LnNsaWNlKDEsLTEpLGR5bmFtaWM6ITB9OntuYW1lOiciJyt0KyciJyxkeW5hbWljOiExfX1mdW5jdGlvbiBoYShlKXt2YXIgdD1lLm1hdGNoKHJhKTtpZih0KXt2YXIgbj17fTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe25bZS5zbGljZSgxKV09ITB9KSxufX1mdW5jdGlvbiBtYShlKXtmb3IodmFyIHQ9e30sbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl0W2Vbbl0ubmFtZV09ZVtuXS52YWx1ZTtyZXR1cm4gdH12YXIgeWE9L154bWxuczpOU1xkKy8sZ2E9L15OU1xkKzovO2Z1bmN0aW9uIF9hKGUpe3JldHVybiB1YShlLnRhZyxlLmF0dHJzTGlzdC5zbGljZSgpLGUucGFyZW50KX12YXIgYmE9W21vLGdvLHtwcmVUcmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0Ij09PWUudGFnKXt2YXIgbixyPWUuYXR0cnNNYXA7aWYoIXJbInYtbW9kZWwiXSlyZXR1cm47aWYoKHJbIjp0eXBlIl18fHJbInYtYmluZDp0eXBlIl0pJiYobj1JcihlLCJ0eXBlIikpLHIudHlwZXx8bnx8IXJbInYtYmluZCJdfHwobj0iKCIrclsidi1iaW5kIl0rIikudHlwZSIpLG4pe3ZhciBpPUZyKGUsInYtaWYiLCEwKSxvPWk/IiYmKCIraSsiKSI6IiIsYT1udWxsIT1GcihlLCJ2LWVsc2UiLCEwKSxzPUZyKGUsInYtZWxzZS1pZiIsITApLGM9X2EoZSk7cGEoYyksanIoYywidHlwZSIsImNoZWNrYm94IiksZmEoYyx0KSxjLnByb2Nlc3NlZD0hMCxjLmlmPSIoIituKyIpPT09J2NoZWNrYm94JyIrbyxkYShjLHtleHA6Yy5pZixibG9jazpjfSk7dmFyIHU9X2EoZSk7RnIodSwidi1mb3IiLCEwKSxqcih1LCJ0eXBlIiwicmFkaW8iKSxmYSh1LHQpLGRhKGMse2V4cDoiKCIrbisiKT09PSdyYWRpbyciK28sYmxvY2s6dX0pO3ZhciBsPV9hKGUpO3JldHVybiBGcihsLCJ2LWZvciIsITApLGpyKGwsIjp0eXBlIixuKSxmYShsLHQpLGRhKGMse2V4cDppLGJsb2NrOmx9KSxhP2MuZWxzZT0hMDpzJiYoYy5lbHNlaWY9cyksY319fX1dO3ZhciAkYSx3YSxDYT17ZXhwZWN0SFRNTDohMCxtb2R1bGVzOmJhLGRpcmVjdGl2ZXM6e21vZGVsOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10LnZhbHVlLGk9dC5tb2RpZmllcnMsbz1lLnRhZyxhPWUuYXR0cnNNYXAudHlwZTtpZihlLmNvbXBvbmVudClyZXR1cm4gSHIoZSxyLGkpLCExO2lmKCJzZWxlY3QiPT09bykhZnVuY3Rpb24oZSx0LG4pe3ZhciByPSd2YXIgJCRzZWxlY3RlZFZhbCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsZnVuY3Rpb24obyl7cmV0dXJuIG8uc2VsZWN0ZWR9KS5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9ICJfdmFsdWUiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7cmV0dXJuICcrKG4mJm4ubnVtYmVyPyJfbih2YWwpIjoidmFsIikrIn0pOyI7cj1yKyIgIitCcih0LCIkZXZlbnQudGFyZ2V0Lm11bHRpcGxlID8gJCRzZWxlY3RlZFZhbCA6ICQkc2VsZWN0ZWRWYWxbMF0iKSxNcihlLCJjaGFuZ2UiLHIsbnVsbCwhMCl9KGUscixpKTtlbHNlIGlmKCJpbnB1dCI9PT1vJiYiY2hlY2tib3giPT09YSkhZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4mJm4ubnVtYmVyLGk9SXIoZSwidmFsdWUiKXx8Im51bGwiLG89SXIoZSwidHJ1ZS12YWx1ZSIpfHwidHJ1ZSIsYT1JcihlLCJmYWxzZS12YWx1ZSIpfHwiZmFsc2UiO0VyKGUsImNoZWNrZWQiLCJBcnJheS5pc0FycmF5KCIrdCsiKT9faSgiK3QrIiwiK2krIik+LTEiKygidHJ1ZSI9PT1vPyI6KCIrdCsiKSI6IjpfcSgiK3QrIiwiK28rIikiKSksTXIoZSwiY2hhbmdlIiwidmFyICQkYT0iK3QrIiwkJGVsPSRldmVudC50YXJnZXQsJCRjPSQkZWwuY2hlY2tlZD8oIitvKyIpOigiK2ErIik7aWYoQXJyYXkuaXNBcnJheSgkJGEpKXt2YXIgJCR2PSIrKHI/Il9uKCIraSsiKSI6aSkrIiwkJGk9X2koJCRhLCQkdik7aWYoJCRlbC5jaGVja2VkKXskJGk8MCYmKCIrQnIodCwiJCRhLmNvbmNhdChbJCR2XSkiKSsiKX1lbHNleyQkaT4tMSYmKCIrQnIodCwiJCRhLnNsaWNlKDAsJCRpKS5jb25jYXQoJCRhLnNsaWNlKCQkaSsxKSkiKSsiKX19ZWxzZXsiK0JyKHQsIiQkYyIpKyJ9IixudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW8mJiJyYWRpbyI9PT1hKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9biYmbi5udW1iZXIsaT1JcihlLCJ2YWx1ZSIpfHwibnVsbCI7RXIoZSwiY2hlY2tlZCIsIl9xKCIrdCsiLCIrKGk9cj8iX24oIitpKyIpIjppKSsiKSIpLE1yKGUsImNoYW5nZSIsQnIodCxpKSxudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW98fCJ0ZXh0YXJlYSI9PT1vKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9ZS5hdHRyc01hcC50eXBlLGk9bnx8e30sbz1pLmxhenksYT1pLm51bWJlcixzPWkudHJpbSxjPSFvJiYicmFuZ2UiIT09cix1PW8/ImNoYW5nZSI6InJhbmdlIj09PXI/V3I6ImlucHV0IixsPSIkZXZlbnQudGFyZ2V0LnZhbHVlIjtzJiYobD0iJGV2ZW50LnRhcmdldC52YWx1ZS50cmltKCkiKSxhJiYobD0iX24oIitsKyIpIik7dmFyIGY9QnIodCxsKTtjJiYoZj0iaWYoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpcmV0dXJuOyIrZiksRXIoZSwidmFsdWUiLCIoIit0KyIpIiksTXIoZSx1LGYsbnVsbCwhMCksKHN8fGEpJiZNcihlLCJibHVyIiwiJGZvcmNlVXBkYXRlKCkiKX0oZSxyLGkpO2Vsc2UgaWYoIUYuaXNSZXNlcnZlZFRhZyhvKSlyZXR1cm4gSHIoZSxyLGkpLCExO3JldHVybiEwfSx0ZXh0OmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwidGV4dENvbnRlbnQiLCJfcygiK3QudmFsdWUrIikiLHQpfSxodG1sOmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwiaW5uZXJIVE1MIiwiX3MoIit0LnZhbHVlKyIpIix0KX19LGlzUHJlVGFnOmZ1bmN0aW9uKGUpe3JldHVybiJwcmUiPT09ZX0saXNVbmFyeVRhZzpibyxtdXN0VXNlUHJvcDpqbixjYW5CZUxlZnRPcGVuVGFnOiRvLGlzUmVzZXJ2ZWRUYWc6V24sZ2V0VGFnTmFtZXNwYWNlOlpuLHN0YXRpY0tleXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29uY2F0KHQuc3RhdGljS2V5c3x8W10pfSxbXSkuam9pbigiLCIpfShiYSl9LHhhPWcoZnVuY3Rpb24oZSl7cmV0dXJuIHAoInR5cGUsdGFnLGF0dHJzTGlzdCxhdHRyc01hcCxwbGFpbixwYXJlbnQsY2hpbGRyZW4sYXR0cnMsc3RhcnQsZW5kLHJhd0F0dHJzTWFwIisoZT8iLCIrZToiIikpfSk7ZnVuY3Rpb24ga2EoZSx0KXtlJiYoJGE9eGEodC5zdGF0aWNLZXlzfHwiIiksd2E9dC5pc1Jlc2VydmVkVGFnfHxULGZ1bmN0aW9uIGUodCl7dC5zdGF0aWM9ZnVuY3Rpb24oZSl7aWYoMj09PWUudHlwZSlyZXR1cm4hMTtpZigzPT09ZS50eXBlKXJldHVybiEwO3JldHVybiEoIWUucHJlJiYoZS5oYXNCaW5kaW5nc3x8ZS5pZnx8ZS5mb3J8fGQoZS50YWcpfHwhd2EoZS50YWcpfHxmdW5jdGlvbihlKXtmb3IoO2UucGFyZW50Oyl7aWYoInRlbXBsYXRlIiE9PShlPWUucGFyZW50KS50YWcpcmV0dXJuITE7aWYoZS5mb3IpcmV0dXJuITB9cmV0dXJuITF9KGUpfHwhT2JqZWN0LmtleXMoZSkuZXZlcnkoJGEpKSl9KHQpO2lmKDE9PT10LnR5cGUpe2lmKCF3YSh0LnRhZykmJiJzbG90IiE9PXQudGFnJiZudWxsPT10LmF0dHJzTWFwWyJpbmxpbmUtdGVtcGxhdGUiXSlyZXR1cm47Zm9yKHZhciBuPTAscj10LmNoaWxkcmVuLmxlbmd0aDtuPHI7bisrKXt2YXIgaT10LmNoaWxkcmVuW25dO2UoaSksaS5zdGF0aWN8fCh0LnN0YXRpYz0hMSl9aWYodC5pZkNvbmRpdGlvbnMpZm9yKHZhciBvPTEsYT10LmlmQ29uZGl0aW9ucy5sZW5ndGg7bzxhO28rKyl7dmFyIHM9dC5pZkNvbmRpdGlvbnNbb10uYmxvY2s7ZShzKSxzLnN0YXRpY3x8KHQuc3RhdGljPSExKX19fShlKSxmdW5jdGlvbiBlKHQsbil7aWYoMT09PXQudHlwZSl7aWYoKHQuc3RhdGljfHx0Lm9uY2UpJiYodC5zdGF0aWNJbkZvcj1uKSx0LnN0YXRpYyYmdC5jaGlsZHJlbi5sZW5ndGgmJigxIT09dC5jaGlsZHJlbi5sZW5ndGh8fDMhPT10LmNoaWxkcmVuWzBdLnR5cGUpKXJldHVybiB2b2lkKHQuc3RhdGljUm9vdD0hMCk7aWYodC5zdGF0aWNSb290PSExLHQuY2hpbGRyZW4pZm9yKHZhciByPTAsaT10LmNoaWxkcmVuLmxlbmd0aDtyPGk7cisrKWUodC5jaGlsZHJlbltyXSxufHwhIXQuZm9yKTtpZih0LmlmQ29uZGl0aW9ucylmb3IodmFyIG89MSxhPXQuaWZDb25kaXRpb25zLmxlbmd0aDtvPGE7bysrKWUodC5pZkNvbmRpdGlvbnNbb10uYmxvY2ssbil9fShlLCExKSl9dmFyIEFhPS9eKFtcdyRfXSt8XChbXildKj9cKSlccyo9PnxeZnVuY3Rpb24oPzpccytbXHckXSspP1xzKlwoLyxPYT0vXChbXildKj9cKTsqJC8sU2E9L15bQS1aYS16XyRdW1x3JF0qKD86XC5bQS1aYS16XyRdW1x3JF0qfFxbJ1teJ10qPyddfFxbIlteIl0qPyJdfFxbXGQrXXxcW1tBLVphLXpfJF1bXHckXSpdKSokLyxUYT17ZXNjOjI3LHRhYjo5LGVudGVyOjEzLHNwYWNlOjMyLHVwOjM4LGxlZnQ6MzcscmlnaHQ6MzksZG93bjo0MCxkZWxldGU6WzgsNDZdfSxFYT17ZXNjOlsiRXNjIiwiRXNjYXBlIl0sdGFiOiJUYWIiLGVudGVyOiJFbnRlciIsc3BhY2U6WyIgIiwiU3BhY2ViYXIiXSx1cDpbIlVwIiwiQXJyb3dVcCJdLGxlZnQ6WyJMZWZ0IiwiQXJyb3dMZWZ0Il0scmlnaHQ6WyJSaWdodCIsIkFycm93UmlnaHQiXSxkb3duOlsiRG93biIsIkFycm93RG93biJdLGRlbGV0ZTpbIkJhY2tzcGFjZSIsIkRlbGV0ZSIsIkRlbCJdfSxOYT1mdW5jdGlvbihlKXtyZXR1cm4iaWYoIitlKyIpcmV0dXJuIG51bGw7In0samE9e3N0b3A6IiRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsiLHByZXZlbnQ6IiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyIsc2VsZjpOYSgiJGV2ZW50LnRhcmdldCAhPT0gJGV2ZW50LmN1cnJlbnRUYXJnZXQiKSxjdHJsOk5hKCIhJGV2ZW50LmN0cmxLZXkiKSxzaGlmdDpOYSgiISRldmVudC5zaGlmdEtleSIpLGFsdDpOYSgiISRldmVudC5hbHRLZXkiKSxtZXRhOk5hKCIhJGV2ZW50Lm1ldGFLZXkiKSxsZWZ0Ok5hKCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMCIpLG1pZGRsZTpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDEiKSxyaWdodDpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDIiKX07ZnVuY3Rpb24gRGEoZSx0KXt2YXIgbj10PyJuYXRpdmVPbjoiOiJvbjoiLHI9IiIsaT0iIjtmb3IodmFyIG8gaW4gZSl7dmFyIGE9TGEoZVtvXSk7ZVtvXSYmZVtvXS5keW5hbWljP2krPW8rIiwiK2ErIiwiOnIrPSciJytvKyciOicrYSsiLCJ9cmV0dXJuIHI9InsiK3Iuc2xpY2UoMCwtMSkrIn0iLGk/bisiX2QoIityKyIsWyIraS5zbGljZSgwLC0xKSsiXSkiOm4rcn1mdW5jdGlvbiBMYShlKXtpZighZSlyZXR1cm4iZnVuY3Rpb24oKXt9IjtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiJbIitlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gTGEoZSl9KS5qb2luKCIsIikrIl0iO3ZhciB0PVNhLnRlc3QoZS52YWx1ZSksbj1BYS50ZXN0KGUudmFsdWUpLHI9U2EudGVzdChlLnZhbHVlLnJlcGxhY2UoT2EsIiIpKTtpZihlLm1vZGlmaWVycyl7dmFyIGk9IiIsbz0iIixhPVtdO2Zvcih2YXIgcyBpbiBlLm1vZGlmaWVycylpZihqYVtzXSlvKz1qYVtzXSxUYVtzXSYmYS5wdXNoKHMpO2Vsc2UgaWYoImV4YWN0Ij09PXMpe3ZhciBjPWUubW9kaWZpZXJzO28rPU5hKFsiY3RybCIsInNoaWZ0IiwiYWx0IiwibWV0YSJdLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hY1tlXX0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iJGV2ZW50LiIrZSsiS2V5In0pLmpvaW4oInx8IikpfWVsc2UgYS5wdXNoKHMpO3JldHVybiBhLmxlbmd0aCYmKGkrPWZ1bmN0aW9uKGUpe3JldHVybiJpZighJGV2ZW50LnR5cGUuaW5kZXhPZigna2V5JykmJiIrZS5tYXAoTWEpLmpvaW4oIiYmIikrIilyZXR1cm4gbnVsbDsifShhKSksbyYmKGkrPW8pLCJmdW5jdGlvbigkZXZlbnQpeyIraSsodD8icmV0dXJuICIrZS52YWx1ZSsiKCRldmVudCkiOm4/InJldHVybiAoIitlLnZhbHVlKyIpKCRldmVudCkiOnI/InJldHVybiAiK2UudmFsdWU6ZS52YWx1ZSkrIn0ifXJldHVybiB0fHxuP2UudmFsdWU6ImZ1bmN0aW9uKCRldmVudCl7Iisocj8icmV0dXJuICIrZS52YWx1ZTplLnZhbHVlKSsifSJ9ZnVuY3Rpb24gTWEoZSl7dmFyIHQ9cGFyc2VJbnQoZSwxMCk7aWYodClyZXR1cm4iJGV2ZW50LmtleUNvZGUhPT0iK3Q7dmFyIG49VGFbZV0scj1FYVtlXTtyZXR1cm4iX2soJGV2ZW50LmtleUNvZGUsIitKU09OLnN0cmluZ2lmeShlKSsiLCIrSlNPTi5zdHJpbmdpZnkobikrIiwkZXZlbnQua2V5LCIrSlNPTi5zdHJpbmdpZnkocikrIikifXZhciBJYT17b246ZnVuY3Rpb24oZSx0KXtlLndyYXBMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIl9nKCIrZSsiLCIrdC52YWx1ZSsiKSJ9fSxiaW5kOmZ1bmN0aW9uKGUsdCl7ZS53cmFwRGF0YT1mdW5jdGlvbihuKXtyZXR1cm4iX2IoIituKyIsJyIrZS50YWcrIicsIit0LnZhbHVlKyIsIisodC5tb2RpZmllcnMmJnQubW9kaWZpZXJzLnByb3A/InRydWUiOiJmYWxzZSIpKyh0Lm1vZGlmaWVycyYmdC5tb2RpZmllcnMuc3luYz8iLHRydWUiOiIiKSsiKSJ9fSxjbG9hazpTfSxGYT1mdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZSx0aGlzLndhcm49ZS53YXJufHxTcix0aGlzLnRyYW5zZm9ybXM9VHIoZS5tb2R1bGVzLCJ0cmFuc2Zvcm1Db2RlIiksdGhpcy5kYXRhR2VuRm5zPVRyKGUubW9kdWxlcywiZ2VuRGF0YSIpLHRoaXMuZGlyZWN0aXZlcz1BKEEoe30sSWEpLGUuZGlyZWN0aXZlcyk7dmFyIHQ9ZS5pc1Jlc2VydmVkVGFnfHxUO3RoaXMubWF5YmVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuISFlLmNvbXBvbmVudHx8IXQoZS50YWcpfSx0aGlzLm9uY2VJZD0wLHRoaXMuc3RhdGljUmVuZGVyRm5zPVtdLHRoaXMucHJlPSExfTtmdW5jdGlvbiBQYShlLHQpe3ZhciBuPW5ldyBGYSh0KTtyZXR1cm57cmVuZGVyOiJ3aXRoKHRoaXMpe3JldHVybiAiKyhlP1JhKGUsbik6J19jKCJkaXYiKScpKyJ9IixzdGF0aWNSZW5kZXJGbnM6bi5zdGF0aWNSZW5kZXJGbnN9fWZ1bmN0aW9uIFJhKGUsdCl7aWYoZS5wYXJlbnQmJihlLnByZT1lLnByZXx8ZS5wYXJlbnQucHJlKSxlLnN0YXRpY1Jvb3QmJiFlLnN0YXRpY1Byb2Nlc3NlZClyZXR1cm4gSGEoZSx0KTtpZihlLm9uY2UmJiFlLm9uY2VQcm9jZXNzZWQpcmV0dXJuIEJhKGUsdCk7aWYoZS5mb3ImJiFlLmZvclByb2Nlc3NlZClyZXR1cm4gemEoZSx0KTtpZihlLmlmJiYhZS5pZlByb2Nlc3NlZClyZXR1cm4gVWEoZSx0KTtpZigidGVtcGxhdGUiIT09ZS50YWd8fGUuc2xvdFRhcmdldHx8dC5wcmUpe2lmKCJzbG90Ij09PWUudGFnKXJldHVybiBmdW5jdGlvbihlLHQpe3ZhciBuPWUuc2xvdE5hbWV8fCciZGVmYXVsdCInLHI9cWEoZSx0KSxpPSJfdCgiK24rKHI/IiwiK3I6IiIpLG89ZS5hdHRyc3x8ZS5keW5hbWljQXR0cnM/R2EoKGUuYXR0cnN8fFtdKS5jb25jYXQoZS5keW5hbWljQXR0cnN8fFtdKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6YihlLm5hbWUpLHZhbHVlOmUudmFsdWUsZHluYW1pYzplLmR5bmFtaWN9fSkpOm51bGwsYT1lLmF0dHJzTWFwWyJ2LWJpbmQiXTshbyYmIWF8fHJ8fChpKz0iLG51bGwiKTtvJiYoaSs9IiwiK28pO2EmJihpKz0obz8iIjoiLG51bGwiKSsiLCIrYSk7cmV0dXJuIGkrIikifShlLHQpO3ZhciBuO2lmKGUuY29tcG9uZW50KW49ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQuaW5saW5lVGVtcGxhdGU/bnVsbDpxYSh0LG4sITApO3JldHVybiJfYygiK2UrIiwiK1ZhKHQsbikrKHI/IiwiK3I6IiIpKyIpIn0oZS5jb21wb25lbnQsZSx0KTtlbHNle3ZhciByOyghZS5wbGFpbnx8ZS5wcmUmJnQubWF5YmVDb21wb25lbnQoZSkpJiYocj1WYShlLHQpKTt2YXIgaT1lLmlubGluZVRlbXBsYXRlP251bGw6cWEoZSx0LCEwKTtuPSJfYygnIitlLnRhZysiJyIrKHI/IiwiK3I6IiIpKyhpPyIsIitpOiIiKSsiKSJ9Zm9yKHZhciBvPTA7bzx0LnRyYW5zZm9ybXMubGVuZ3RoO28rKyluPXQudHJhbnNmb3Jtc1tvXShlLG4pO3JldHVybiBufXJldHVybiBxYShlLHQpfHwidm9pZCAwIn1mdW5jdGlvbiBIYShlLHQpe2Uuc3RhdGljUHJvY2Vzc2VkPSEwO3ZhciBuPXQucHJlO3JldHVybiBlLnByZSYmKHQucHJlPWUucHJlKSx0LnN0YXRpY1JlbmRlckZucy5wdXNoKCJ3aXRoKHRoaXMpe3JldHVybiAiK1JhKGUsdCkrIn0iKSx0LnByZT1uLCJfbSgiKyh0LnN0YXRpY1JlbmRlckZucy5sZW5ndGgtMSkrKGUuc3RhdGljSW5Gb3I/Iix0cnVlIjoiIikrIikifWZ1bmN0aW9uIEJhKGUsdCl7aWYoZS5vbmNlUHJvY2Vzc2VkPSEwLGUuaWYmJiFlLmlmUHJvY2Vzc2VkKXJldHVybiBVYShlLHQpO2lmKGUuc3RhdGljSW5Gb3Ipe2Zvcih2YXIgbj0iIixyPWUucGFyZW50O3I7KXtpZihyLmZvcil7bj1yLmtleTticmVha31yPXIucGFyZW50fXJldHVybiBuPyJfbygiK1JhKGUsdCkrIiwiK3Qub25jZUlkKysrIiwiK24rIikiOlJhKGUsdCl9cmV0dXJuIEhhKGUsdCl9ZnVuY3Rpb24gVWEoZSx0LG4scil7cmV0dXJuIGUuaWZQcm9jZXNzZWQ9ITAsZnVuY3Rpb24gZSh0LG4scixpKXtpZighdC5sZW5ndGgpcmV0dXJuIGl8fCJfZSgpIjt2YXIgbz10LnNoaWZ0KCk7cmV0dXJuIG8uZXhwPyIoIitvLmV4cCsiKT8iK2Eoby5ibG9jaykrIjoiK2UodCxuLHIsaSk6IiIrYShvLmJsb2NrKTtmdW5jdGlvbiBhKGUpe3JldHVybiByP3IoZSxuKTplLm9uY2U/QmEoZSxuKTpSYShlLG4pfX0oZS5pZkNvbmRpdGlvbnMuc2xpY2UoKSx0LG4scil9ZnVuY3Rpb24gemEoZSx0LG4scil7dmFyIGk9ZS5mb3Isbz1lLmFsaWFzLGE9ZS5pdGVyYXRvcjE/IiwiK2UuaXRlcmF0b3IxOiIiLHM9ZS5pdGVyYXRvcjI/IiwiK2UuaXRlcmF0b3IyOiIiO3JldHVybiBlLmZvclByb2Nlc3NlZD0hMCwocnx8Il9sIikrIigoIitpKyIpLGZ1bmN0aW9uKCIrbythK3MrIil7cmV0dXJuICIrKG58fFJhKShlLHQpKyJ9KSJ9ZnVuY3Rpb24gVmEoZSx0KXt2YXIgbj0ieyIscj1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZGlyZWN0aXZlcztpZighbilyZXR1cm47dmFyIHIsaSxvLGEscz0iZGlyZWN0aXZlczpbIixjPSExO2ZvcihyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXtvPW5bcl0sYT0hMDt2YXIgdT10LmRpcmVjdGl2ZXNbby5uYW1lXTt1JiYoYT0hIXUoZSxvLHQud2FybikpLGEmJihjPSEwLHMrPSd7bmFtZToiJytvLm5hbWUrJyIscmF3TmFtZToiJytvLnJhd05hbWUrJyInKyhvLnZhbHVlPyIsdmFsdWU6KCIrby52YWx1ZSsiKSxleHByZXNzaW9uOiIrSlNPTi5zdHJpbmdpZnkoby52YWx1ZSk6IiIpKyhvLmFyZz8iLGFyZzoiKyhvLmlzRHluYW1pY0FyZz9vLmFyZzonIicrby5hcmcrJyInKToiIikrKG8ubW9kaWZpZXJzPyIsbW9kaWZpZXJzOiIrSlNPTi5zdHJpbmdpZnkoby5tb2RpZmllcnMpOiIiKSsifSwiKX1pZihjKXJldHVybiBzLnNsaWNlKDAsLTEpKyJdIn0oZSx0KTtyJiYobis9cisiLCIpLGUua2V5JiYobis9ImtleToiK2Uua2V5KyIsIiksZS5yZWYmJihuKz0icmVmOiIrZS5yZWYrIiwiKSxlLnJlZkluRm9yJiYobis9InJlZkluRm9yOnRydWUsIiksZS5wcmUmJihuKz0icHJlOnRydWUsIiksZS5jb21wb25lbnQmJihuKz0ndGFnOiInK2UudGFnKyciLCcpO2Zvcih2YXIgaT0wO2k8dC5kYXRhR2VuRm5zLmxlbmd0aDtpKyspbis9dC5kYXRhR2VuRm5zW2ldKGUpO2lmKGUuYXR0cnMmJihuKz0iYXR0cnM6IitHYShlLmF0dHJzKSsiLCIpLGUucHJvcHMmJihuKz0iZG9tUHJvcHM6IitHYShlLnByb3BzKSsiLCIpLGUuZXZlbnRzJiYobis9RGEoZS5ldmVudHMsITEpKyIsIiksZS5uYXRpdmVFdmVudHMmJihuKz1EYShlLm5hdGl2ZUV2ZW50cywhMCkrIiwiKSxlLnNsb3RUYXJnZXQmJiFlLnNsb3RTY29wZSYmKG4rPSJzbG90OiIrZS5zbG90VGFyZ2V0KyIsIiksZS5zY29wZWRTbG90cyYmKG4rPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lLmZvcnx8T2JqZWN0LmtleXModCkuc29tZShmdW5jdGlvbihlKXt2YXIgbj10W2VdO3JldHVybiBuLnNsb3RUYXJnZXREeW5hbWljfHxuLmlmfHxuLmZvcnx8S2Eobil9KSxpPSEhZS5pZjtpZighcilmb3IodmFyIG89ZS5wYXJlbnQ7bzspe2lmKG8uc2xvdFNjb3BlJiZvLnNsb3RTY29wZSE9PWNhfHxvLmZvcil7cj0hMDticmVha31vLmlmJiYoaT0hMCksbz1vLnBhcmVudH12YXIgYT1PYmplY3Qua2V5cyh0KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIEphKHRbZV0sbil9KS5qb2luKCIsIik7cmV0dXJuInNjb3BlZFNsb3RzOl91KFsiK2ErIl0iKyhyPyIsbnVsbCx0cnVlIjoiIikrKCFyJiZpPyIsbnVsbCxmYWxzZSwiK2Z1bmN0aW9uKGUpe3ZhciB0PTUzODEsbj1lLmxlbmd0aDtmb3IoO247KXQ9MzMqdF5lLmNoYXJDb2RlQXQoLS1uKTtyZXR1cm4gdD4+PjB9KGEpOiIiKSsiKSJ9KGUsZS5zY29wZWRTbG90cyx0KSsiLCIpLGUubW9kZWwmJihuKz0ibW9kZWw6e3ZhbHVlOiIrZS5tb2RlbC52YWx1ZSsiLGNhbGxiYWNrOiIrZS5tb2RlbC5jYWxsYmFjaysiLGV4cHJlc3Npb246IitlLm1vZGVsLmV4cHJlc3Npb24rIn0sIiksZS5pbmxpbmVUZW1wbGF0ZSl7dmFyIG89ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNoaWxkcmVuWzBdO2lmKG4mJjE9PT1uLnR5cGUpe3ZhciByPVBhKG4sdC5vcHRpb25zKTtyZXR1cm4iaW5saW5lVGVtcGxhdGU6e3JlbmRlcjpmdW5jdGlvbigpeyIrci5yZW5kZXIrIn0sc3RhdGljUmVuZGVyRm5zOlsiK3Iuc3RhdGljUmVuZGVyRm5zLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24oKXsiK2UrIn0ifSkuam9pbigiLCIpKyJdfSJ9fShlLHQpO28mJihuKz1vKyIsIil9cmV0dXJuIG49bi5yZXBsYWNlKC8sJC8sIiIpKyJ9IixlLmR5bmFtaWNBdHRycyYmKG49Il9iKCIrbisnLCInK2UudGFnKyciLCcrR2EoZS5keW5hbWljQXR0cnMpKyIpIiksZS53cmFwRGF0YSYmKG49ZS53cmFwRGF0YShuKSksZS53cmFwTGlzdGVuZXJzJiYobj1lLndyYXBMaXN0ZW5lcnMobikpLG59ZnVuY3Rpb24gS2EoZSl7cmV0dXJuIDE9PT1lLnR5cGUmJigic2xvdCI9PT1lLnRhZ3x8ZS5jaGlsZHJlbi5zb21lKEthKSl9ZnVuY3Rpb24gSmEoZSx0KXt2YXIgbj1lLmF0dHJzTWFwWyJzbG90LXNjb3BlIl07aWYoZS5pZiYmIWUuaWZQcm9jZXNzZWQmJiFuKXJldHVybiBVYShlLHQsSmEsIm51bGwiKTtpZihlLmZvciYmIWUuZm9yUHJvY2Vzc2VkKXJldHVybiB6YShlLHQsSmEpO3ZhciByPWUuc2xvdFNjb3BlPT09Y2E/IiI6U3RyaW5nKGUuc2xvdFNjb3BlKSxpPSJmdW5jdGlvbigiK3IrIil7cmV0dXJuICIrKCJ0ZW1wbGF0ZSI9PT1lLnRhZz9lLmlmJiZuPyIoIitlLmlmKyIpPyIrKHFhKGUsdCl8fCJ1bmRlZmluZWQiKSsiOnVuZGVmaW5lZCI6cWEoZSx0KXx8InVuZGVmaW5lZCI6UmEoZSx0KSkrIn0iLG89cj8iIjoiLHByb3h5OnRydWUiO3JldHVybiJ7a2V5OiIrKGUuc2xvdFRhcmdldHx8JyJkZWZhdWx0IicpKyIsZm46IitpK28rIn0ifWZ1bmN0aW9uIHFhKGUsdCxuLHIsaSl7dmFyIG89ZS5jaGlsZHJlbjtpZihvLmxlbmd0aCl7dmFyIGE9b1swXTtpZigxPT09by5sZW5ndGgmJmEuZm9yJiYidGVtcGxhdGUiIT09YS50YWcmJiJzbG90IiE9PWEudGFnKXt2YXIgcz1uP3QubWF5YmVDb21wb25lbnQoYSk/IiwxIjoiLDAiOiIiO3JldHVybiIiKyhyfHxSYSkoYSx0KStzfXZhciBjPW4/ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBpPWVbcl07aWYoMT09PWkudHlwZSl7aWYoV2EoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiBXYShlLmJsb2NrKX0pKXtuPTI7YnJlYWt9KHQoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiB0KGUuYmxvY2spfSkpJiYobj0xKX19cmV0dXJuIG59KG8sdC5tYXliZUNvbXBvbmVudCk6MCx1PWl8fFphO3JldHVybiJbIitvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdShlLHQpfSkuam9pbigiLCIpKyJdIisoYz8iLCIrYzoiIil9fWZ1bmN0aW9uIFdhKGUpe3JldHVybiB2b2lkIDAhPT1lLmZvcnx8InRlbXBsYXRlIj09PWUudGFnfHwic2xvdCI9PT1lLnRhZ31mdW5jdGlvbiBaYShlLHQpe3JldHVybiAxPT09ZS50eXBlP1JhKGUsdCk6Mz09PWUudHlwZSYmZS5pc0NvbW1lbnQ/KHI9ZSwiX2UoIitKU09OLnN0cmluZ2lmeShyLnRleHQpKyIpIik6Il92KCIrKDI9PT0obj1lKS50eXBlP24uZXhwcmVzc2lvbjpYYShKU09OLnN0cmluZ2lmeShuLnRleHQpKSkrIikiO3ZhciBuLHJ9ZnVuY3Rpb24gR2EoZSl7Zm9yKHZhciB0PSIiLG49IiIscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT1lW3JdLG89WGEoaS52YWx1ZSk7aS5keW5hbWljP24rPWkubmFtZSsiLCIrbysiLCI6dCs9JyInK2kubmFtZSsnIjonK28rIiwifXJldHVybiB0PSJ7Iit0LnNsaWNlKDAsLTEpKyJ9IixuPyJfZCgiK3QrIixbIituLnNsaWNlKDAsLTEpKyJdKSI6dH1mdW5jdGlvbiBYYShlKXtyZXR1cm4gZS5yZXBsYWNlKC9cdTIwMjgvZywiXFx1MjAyOCIpLnJlcGxhY2UoL1x1MjAyOS9nLCJcXHUyMDI5Iil9bmV3IFJlZ0V4cCgiXFxiIisiZG8saWYsZm9yLGxldCxuZXcsdHJ5LHZhcixjYXNlLGVsc2Usd2l0aCxhd2FpdCxicmVhayxjYXRjaCxjbGFzcyxjb25zdCxzdXBlcix0aHJvdyx3aGlsZSx5aWVsZCxkZWxldGUsZXhwb3J0LGltcG9ydCxyZXR1cm4sc3dpdGNoLGRlZmF1bHQsZXh0ZW5kcyxmaW5hbGx5LGNvbnRpbnVlLGRlYnVnZ2VyLGZ1bmN0aW9uLGFyZ3VtZW50cyIuc3BsaXQoIiwiKS5qb2luKCJcXGJ8XFxiIikrIlxcYiIpO2Z1bmN0aW9uIFlhKGUsdCl7dHJ5e3JldHVybiBuZXcgRnVuY3Rpb24oZSl9Y2F0Y2gobil7cmV0dXJuIHQucHVzaCh7ZXJyOm4sY29kZTplfSksU319ZnVuY3Rpb24gUWEoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obixyLGkpeyhyPUEoe30scikpLndhcm47ZGVsZXRlIHIud2Fybjt2YXIgbz1yLmRlbGltaXRlcnM/U3RyaW5nKHIuZGVsaW1pdGVycykrbjpuO2lmKHRbb10pcmV0dXJuIHRbb107dmFyIGE9ZShuLHIpLHM9e30sYz1bXTtyZXR1cm4gcy5yZW5kZXI9WWEoYS5yZW5kZXIsYykscy5zdGF0aWNSZW5kZXJGbnM9YS5zdGF0aWNSZW5kZXJGbnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBZYShlLGMpfSksdFtvXT1zfX12YXIgZXMsdHMsbnM9KGVzPWZ1bmN0aW9uKGUsdCl7dmFyIG49bGEoZS50cmltKCksdCk7ITEhPT10Lm9wdGltaXplJiZrYShuLHQpO3ZhciByPVBhKG4sdCk7cmV0dXJue2FzdDpuLHJlbmRlcjpyLnJlbmRlcixzdGF0aWNSZW5kZXJGbnM6ci5zdGF0aWNSZW5kZXJGbnN9fSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIHI9T2JqZWN0LmNyZWF0ZShlKSxpPVtdLG89W107aWYobilmb3IodmFyIGEgaW4gbi5tb2R1bGVzJiYoci5tb2R1bGVzPShlLm1vZHVsZXN8fFtdKS5jb25jYXQobi5tb2R1bGVzKSksbi5kaXJlY3RpdmVzJiYoci5kaXJlY3RpdmVzPUEoT2JqZWN0LmNyZWF0ZShlLmRpcmVjdGl2ZXN8fG51bGwpLG4uZGlyZWN0aXZlcykpLG4pIm1vZHVsZXMiIT09YSYmImRpcmVjdGl2ZXMiIT09YSYmKHJbYV09blthXSk7ci53YXJuPWZ1bmN0aW9uKGUsdCxuKXsobj9vOmkpLnB1c2goZSl9O3ZhciBzPWVzKHQudHJpbSgpLHIpO3JldHVybiBzLmVycm9ycz1pLHMudGlwcz1vLHN9cmV0dXJue2NvbXBpbGU6dCxjb21waWxlVG9GdW5jdGlvbnM6UWEodCl9fSkoQ2EpLHJzPShucy5jb21waWxlLG5zLmNvbXBpbGVUb0Z1bmN0aW9ucyk7ZnVuY3Rpb24gaXMoZSl7cmV0dXJuKHRzPXRzfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWU/JzxhIGhyZWY9IlxuIi8+JzonPGRpdiBhPSJcbiIvPicsdHMuaW5uZXJIVE1MLmluZGV4T2YoIiYjMTA7Iik+MH12YXIgb3M9ISF6JiZpcyghMSksYXM9ISF6JiZpcyghMCksc3M9ZyhmdW5jdGlvbihlKXt2YXIgdD1ZbihlKTtyZXR1cm4gdCYmdC5pbm5lckhUTUx9KSxjcz13bi5wcm90b3R5cGUuJG1vdW50O3JldHVybiB3bi5wcm90b3R5cGUuJG1vdW50PWZ1bmN0aW9uKGUsdCl7aWYoKGU9ZSYmWW4oZSkpPT09ZG9jdW1lbnQuYm9keXx8ZT09PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudClyZXR1cm4gdGhpczt2YXIgbj10aGlzLiRvcHRpb25zO2lmKCFuLnJlbmRlcil7dmFyIHI9bi50ZW1wbGF0ZTtpZihyKWlmKCJzdHJpbmciPT10eXBlb2YgcikiIyI9PT1yLmNoYXJBdCgwKSYmKHI9c3MocikpO2Vsc2V7aWYoIXIubm9kZVR5cGUpcmV0dXJuIHRoaXM7cj1yLmlubmVySFRNTH1lbHNlIGUmJihyPWZ1bmN0aW9uKGUpe2lmKGUub3V0ZXJIVE1MKXJldHVybiBlLm91dGVySFRNTDt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gdC5hcHBlbmRDaGlsZChlLmNsb25lTm9kZSghMCkpLHQuaW5uZXJIVE1MfShlKSk7aWYocil7dmFyIGk9cnMocix7b3V0cHV0U291cmNlUmFuZ2U6ITEsc2hvdWxkRGVjb2RlTmV3bGluZXM6b3Msc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOmFzLGRlbGltaXRlcnM6bi5kZWxpbWl0ZXJzLGNvbW1lbnRzOm4uY29tbWVudHN9LHRoaXMpLG89aS5yZW5kZXIsYT1pLnN0YXRpY1JlbmRlckZucztuLnJlbmRlcj1vLG4uc3RhdGljUmVuZGVyRm5zPWF9fXJldHVybiBjcy5jYWxsKHRoaXMsZSx0KX0sd24uY29tcGlsZT1ycyx3bn0pOw=="},{"meta":{"name":"less.js","url":"https://cdn.jsdelivr.net/npm/less_browser_fix@4.1.2/dist/less.js","ts":1638677801329,"mimetype":"text/javascript"},"source":"LyoqCiAqIExlc3MgLSBMZXNzIDQuMS4yIGZpeGVkIGZvciBHcmVhc2VNb25rZXkgdjQuMS4yCiAqIGh0dHA6Ly9sZXNzY3NzLm9yZwogKiAKICogQ29weXJpZ2h0IChjKSAyMDA5LTIwMjEsIEFsZXhpcyBTZWxsaWVyIDxzZWxmQGNsb3VkaGVhZC5uZXQ+CiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUtMi4wIExpY2Vuc2UuCiAqCiAqIEBsaWNlbnNlIEFwYWNoZS0yLjAKICovCgooZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkgewogICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOgogICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDoKICAgIChnbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5sZXNzID0gZmFjdG9yeSgpKTsKfSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7CgogICAgLy8gRXhwb3J0IGEgbmV3IGRlZmF1bHQgZWFjaCB0aW1lDQogICAgZnVuY3Rpb24gZGVmYXVsdE9wdGlvbnMgKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgLyogSW5saW5lIEphdmFzY3JpcHQgLSBAcGx1Z2luIHN0aWxsIGFsbG93ZWQgKi8NCiAgICAgICAgICAgIGphdmFzY3JpcHRFbmFibGVkOiBmYWxzZSwNCiAgICAgICAgICAgIC8qIE91dHB1dHMgYSBtYWtlZmlsZSBpbXBvcnQgZGVwZW5kZW5jeSBsaXN0IHRvIHN0ZG91dC4gKi8NCiAgICAgICAgICAgIGRlcGVuZHM6IGZhbHNlLA0KICAgICAgICAgICAgLyogKERFUFJFQ0FURUQpIENvbXByZXNzIHVzaW5nIGxlc3MgYnVpbHQtaW4gY29tcHJlc3Npb24uDQogICAgICAgICAgICAgKiBUaGlzIGRvZXMgYW4gb2theSBqb2IgYnV0IGRvZXMgbm90IHV0aWxpc2UgYWxsIHRoZSB0cmlja3Mgb2YNCiAgICAgICAgICAgICAqIGRlZGljYXRlZCBjc3MgY29tcHJlc3Npb24uICovDQogICAgICAgICAgICBjb21wcmVzczogZmFsc2UsDQogICAgICAgICAgICAvKiBSdW5zIHRoZSBsZXNzIHBhcnNlciBhbmQganVzdCByZXBvcnRzIGVycm9ycyB3aXRob3V0IGFueSBvdXRwdXQuICovDQogICAgICAgICAgICBsaW50OiBmYWxzZSwNCiAgICAgICAgICAgIC8qIFNldHMgYXZhaWxhYmxlIGluY2x1ZGUgcGF0aHMuDQogICAgICAgICAgICAgKiBJZiB0aGUgZmlsZSBpbiBhbiBAaW1wb3J0IHJ1bGUgZG9lcyBub3QgZXhpc3QgYXQgdGhhdCBleGFjdCBsb2NhdGlvbiwNCiAgICAgICAgICAgICAqIGxlc3Mgd2lsbCBsb29rIGZvciBpdCBhdCB0aGUgbG9jYXRpb24ocykgcGFzc2VkIHRvIHRoaXMgb3B0aW9uLg0KICAgICAgICAgICAgICogWW91IG1pZ2h0IHVzZSB0aGlzIGZvciBpbnN0YW5jZSB0byBzcGVjaWZ5IGEgcGF0aCB0byBhIGxpYnJhcnkgd2hpY2gNCiAgICAgICAgICAgICAqIHlvdSB3YW50IHRvIGJlIHJlZmVyZW5jZWQgc2ltcGx5IGFuZCByZWxhdGl2ZWx5IGluIHRoZSBsZXNzIGZpbGVzLiAqLw0KICAgICAgICAgICAgcGF0aHM6IFtdLA0KICAgICAgICAgICAgLyogY29sb3Igb3V0cHV0IGluIHRoZSB0ZXJtaW5hbCAqLw0KICAgICAgICAgICAgY29sb3I6IHRydWUsDQogICAgICAgICAgICAvKiBUaGUgc3RyaWN0SW1wb3J0cyBjb250cm9scyB3aGV0aGVyIHRoZSBjb21waWxlciB3aWxsIGFsbG93IGFuIEBpbXBvcnQgaW5zaWRlIG9mIGVpdGhlcg0KICAgICAgICAgICAgICogQG1lZGlhIGJsb2NrcyBvciAoYSBsYXRlciBhZGRpdGlvbikgb3RoZXIgc2VsZWN0b3IgYmxvY2tzLg0KICAgICAgICAgICAgICogU2VlOiBodHRwczovL2dpdGh1Yi5jb20vbGVzcy9sZXNzLmpzL2lzc3Vlcy82NTYgKi8NCiAgICAgICAgICAgIHN0cmljdEltcG9ydHM6IGZhbHNlLA0KICAgICAgICAgICAgLyogQWxsb3cgSW1wb3J0cyBmcm9tIEluc2VjdXJlIEhUVFBTIEhvc3RzICovDQogICAgICAgICAgICBpbnNlY3VyZTogZmFsc2UsDQogICAgICAgICAgICAvKiBBbGxvd3MgeW91IHRvIGFkZCBhIHBhdGggdG8gZXZlcnkgZ2VuZXJhdGVkIGltcG9ydCBhbmQgdXJsIGluIHlvdXIgY3NzLg0KICAgICAgICAgICAgICogVGhpcyBkb2VzIG5vdCBhZmZlY3QgbGVzcyBpbXBvcnQgc3RhdGVtZW50cyB0aGF0IGFyZSBwcm9jZXNzZWQsIGp1c3Qgb25lcw0KICAgICAgICAgICAgICogdGhhdCBhcmUgbGVmdCBpbiB0aGUgb3V0cHV0IGNzcy4gKi8NCiAgICAgICAgICAgIHJvb3RwYXRoOiAnJywNCiAgICAgICAgICAgIC8qIEJ5IGRlZmF1bHQgVVJMcyBhcmUga2VwdCBhcy1pcywgc28gaWYgeW91IGltcG9ydCBhIGZpbGUgaW4gYSBzdWItZGlyZWN0b3J5DQogICAgICAgICAgICAgKiB0aGF0IHJlZmVyZW5jZXMgYW4gaW1hZ2UsIGV4YWN0bHkgdGhlIHNhbWUgVVJMIHdpbGwgYmUgb3V0cHV0IGluIHRoZSBjc3MuDQogICAgICAgICAgICAgKiBUaGlzIG9wdGlvbiBhbGxvd3MgeW91IHRvIHJlLXdyaXRlIFVSTCdzIGluIGltcG9ydGVkIGZpbGVzIHNvIHRoYXQgdGhlDQogICAgICAgICAgICAgKiBVUkwgaXMgYWx3YXlzIHJlbGF0aXZlIHRvIHRoZSBiYXNlIGltcG9ydGVkIGZpbGUgKi8NCiAgICAgICAgICAgIHJld3JpdGVVcmxzOiBmYWxzZSwNCiAgICAgICAgICAgIC8qIEhvdyB0byBwcm9jZXNzIG1hdGgNCiAgICAgICAgICAgICAqICAgMCBhbHdheXMgICAgICAgICAgIC0gZWFnZXJseSB0cnkgdG8gc29sdmUgYWxsIG9wZXJhdGlvbnMNCiAgICAgICAgICAgICAqICAgMSBwYXJlbnMtZGl2aXNpb24gIC0gcmVxdWlyZSBwYXJlbnMgZm9yIGRpdmlzaW9uICIvIg0KICAgICAgICAgICAgICogICAyIHBhcmVucyB8IHN0cmljdCAgLSByZXF1aXJlIHBhcmVucyBmb3IgYWxsIG9wZXJhdGlvbnMNCiAgICAgICAgICAgICAqICAgMyBzdHJpY3QtbGVnYWN5ICAgIC0gbGVnYWN5IHN0cmljdCBiZWhhdmlvciAoc3VwZXItc3RyaWN0KQ0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBtYXRoOiAxLA0KICAgICAgICAgICAgLyogV2l0aG91dCB0aGlzIG9wdGlvbiwgbGVzcyBhdHRlbXB0cyB0byBndWVzcyBhdCB0aGUgb3V0cHV0IHVuaXQgd2hlbiBpdCBkb2VzIG1hdGhzLiAqLw0KICAgICAgICAgICAgc3RyaWN0VW5pdHM6IGZhbHNlLA0KICAgICAgICAgICAgLyogRWZmZWN0aXZlbHkgdGhlIGRlY2xhcmF0aW9uIGlzIHB1dCBhdCB0aGUgdG9wIG9mIHlvdXIgYmFzZSBMZXNzIGZpbGUsDQogICAgICAgICAgICAgKiBtZWFuaW5nIGl0IGNhbiBiZSB1c2VkIGJ1dCBpdCBhbHNvIGNhbiBiZSBvdmVycmlkZGVuIGlmIHRoaXMgdmFyaWFibGUNCiAgICAgICAgICAgICAqIGlzIGRlZmluZWQgaW4gdGhlIGZpbGUuICovDQogICAgICAgICAgICBnbG9iYWxWYXJzOiBudWxsLA0KICAgICAgICAgICAgLyogQXMgb3Bwb3NlZCB0byB0aGUgZ2xvYmFsIHZhcmlhYmxlIG9wdGlvbiwgdGhpcyBwdXRzIHRoZSBkZWNsYXJhdGlvbiBhdCB0aGUNCiAgICAgICAgICAgICAqIGVuZCBvZiB5b3VyIGJhc2UgZmlsZSwgbWVhbmluZyBpdCB3aWxsIG92ZXJyaWRlIGFueXRoaW5nIGRlZmluZWQgaW4geW91ciBMZXNzIGZpbGUuICovDQogICAgICAgICAgICBtb2RpZnlWYXJzOiBudWxsLA0KICAgICAgICAgICAgLyogVGhpcyBvcHRpb24gYWxsb3dzIHlvdSB0byBzcGVjaWZ5IGEgYXJndW1lbnQgdG8gZ28gb24gdG8gZXZlcnkgVVJMLiAgKi8NCiAgICAgICAgICAgIHVybEFyZ3M6ICcnDQogICAgICAgIH07DQogICAgfQoKICAgIGZ1bmN0aW9uIGV4dHJhY3RJZChocmVmKSB7DQogICAgICAgIHJldHVybiBocmVmLnJlcGxhY2UoL15bYS16LV0rOlwvKz9bXlwvXSsvLCAnJykgLy8gUmVtb3ZlIHByb3RvY29sICYgZG9tYWluDQogICAgICAgICAgICAucmVwbGFjZSgvW1w/XCZdbGl2ZXJlbG9hZD1cdysvLCAnJykgLy8gUmVtb3ZlIExpdmVSZWxvYWQgY2FjaGVidXN0ZXINCiAgICAgICAgICAgIC5yZXBsYWNlKC9eXC8vLCAnJykgLy8gUmVtb3ZlIHJvb3QgLw0KICAgICAgICAgICAgLnJlcGxhY2UoL1wuW2EtekEtWl0rJC8sICcnKSAvLyBSZW1vdmUgc2ltcGxlIGV4dGVuc2lvbg0KICAgICAgICAgICAgLnJlcGxhY2UoL1teXC5cdy1dKy9nLCAnLScpIC8vIFJlcGxhY2UgaWxsZWdhbCBjaGFyYWN0ZXJzDQogICAgICAgICAgICAucmVwbGFjZSgvXC4vZywgJzonKTsgLy8gUmVwbGFjZSBkb3RzIHdpdGggY29sb25zKGZvciB2YWxpZCBpZCkNCiAgICB9DQogICAgZnVuY3Rpb24gYWRkRGF0YUF0dHIob3B0aW9ucywgdGFnKSB7DQogICAgICAgIGlmICghdGFnKQ0KICAgICAgICAgICAgcmV0dXJuOyAvLyBpbiBjYXNlIG9mIHRhZyBpcyBudWxsIG9yIHVuZGVmaW5lZA0KICAgICAgICBmb3IgKHZhciBvcHQgaW4gdGFnLmRhdGFzZXQpIHsNCiAgICAgICAgICAgIGlmICh0YWcuZGF0YXNldC5oYXNPd25Qcm9wZXJ0eShvcHQpKSB7DQogICAgICAgICAgICAgICAgaWYgKG9wdCA9PT0gJ2VudicgfHwgb3B0ID09PSAnZHVtcExpbmVOdW1iZXJzJyB8fCBvcHQgPT09ICdyb290cGF0aCcgfHwgb3B0ID09PSAnZXJyb3JSZXBvcnRpbmcnKSB7DQogICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbb3B0XSA9IHRhZy5kYXRhc2V0W29wdF07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1tvcHRdID0gSlNPTi5wYXJzZSh0YWcuZGF0YXNldFtvcHRdKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoXykgeyB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQoKICAgIHZhciBicm93c2VyID0gew0KICAgICAgICBjcmVhdGVDU1M6IGZ1bmN0aW9uIChkb2N1bWVudCwgc3R5bGVzLCBzaGVldCkgew0KICAgICAgICAgICAgLy8gU3RyaXAgdGhlIHF1ZXJ5LXN0cmluZw0KICAgICAgICAgICAgdmFyIGhyZWYgPSBzaGVldC5ocmVmIHx8ICcnOw0KICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gdGl0bGUgc2V0LCB1c2UgdGhlIGZpbGVuYW1lLCBtaW51cyB0aGUgZXh0ZW5zaW9uDQogICAgICAgICAgICB2YXIgaWQgPSAibGVzczoiICsgKHNoZWV0LnRpdGxlIHx8IGV4dHJhY3RJZChocmVmKSk7DQogICAgICAgICAgICAvLyBJZiB0aGlzIGhhcyBhbHJlYWR5IGJlZW4gaW5zZXJ0ZWQgaW50byB0aGUgRE9NLCB3ZSBtYXkgbmVlZCB0byByZXBsYWNlIGl0DQogICAgICAgICAgICB2YXIgb2xkU3R5bGVOb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgdmFyIGtlZXBPbGRTdHlsZU5vZGUgPSBmYWxzZTsNCiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBzdHlsZXNoZWV0IG5vZGUgZm9yIGluc2VydGlvbiBvciAoaWYgbmVjZXNzYXJ5KSByZXBsYWNlbWVudA0KICAgICAgICAgICAgdmFyIHN0eWxlTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7DQogICAgICAgICAgICBzdHlsZU5vZGUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvY3NzJyk7DQogICAgICAgICAgICBpZiAoc2hlZXQubWVkaWEpIHsNCiAgICAgICAgICAgICAgICBzdHlsZU5vZGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIHNoZWV0Lm1lZGlhKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHN0eWxlTm9kZS5pZCA9IGlkOw0KICAgICAgICAgICAgaWYgKCFzdHlsZU5vZGUuc3R5bGVTaGVldCkgew0KICAgICAgICAgICAgICAgIHN0eWxlTm9kZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzdHlsZXMpKTsNCiAgICAgICAgICAgICAgICAvLyBJZiBuZXcgY29udGVudHMgbWF0Y2ggY29udGVudHMgb2Ygb2xkU3R5bGVOb2RlLCBkb24ndCByZXBsYWNlIG9sZFN0eWxlTm9kZQ0KICAgICAgICAgICAgICAgIGtlZXBPbGRTdHlsZU5vZGUgPSAob2xkU3R5bGVOb2RlICE9PSBudWxsICYmIG9sZFN0eWxlTm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDAgJiYgc3R5bGVOb2RlLmNoaWxkTm9kZXMubGVuZ3RoID4gMCAmJg0KICAgICAgICAgICAgICAgICAgICBvbGRTdHlsZU5vZGUuZmlyc3RDaGlsZC5ub2RlVmFsdWUgPT09IHN0eWxlTm9kZS5maXJzdENoaWxkLm5vZGVWYWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07DQogICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBvbGRTdHlsZU5vZGUsIGp1c3QgYXBwZW5kOyBvdGhlcndpc2UsIG9ubHkgYXBwZW5kIGlmIHdlIG5lZWQNCiAgICAgICAgICAgIC8vIHRvIHJlcGxhY2Ugb2xkU3R5bGVOb2RlIHdpdGggYW4gdXBkYXRlZCBzdHlsZXNoZWV0DQogICAgICAgICAgICBpZiAob2xkU3R5bGVOb2RlID09PSBudWxsIHx8IGtlZXBPbGRTdHlsZU5vZGUgPT09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgdmFyIG5leHRFbCA9IHNoZWV0ICYmIHNoZWV0Lm5leHRTaWJsaW5nIHx8IG51bGw7DQogICAgICAgICAgICAgICAgaWYgKG5leHRFbCkgew0KICAgICAgICAgICAgICAgICAgICBuZXh0RWwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc3R5bGVOb2RlLCBuZXh0RWwpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZU5vZGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChvbGRTdHlsZU5vZGUgJiYga2VlcE9sZFN0eWxlTm9kZSA9PT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICBvbGRTdHlsZU5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvbGRTdHlsZU5vZGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gRm9yIElFLg0KICAgICAgICAgICAgLy8gVGhpcyBuZWVkcyB0byBoYXBwZW4gKmFmdGVyKiB0aGUgc3R5bGUgZWxlbWVudCBpcyBhZGRlZCB0byB0aGUgRE9NLCBvdGhlcndpc2UgSUUgNyBhbmQgOCBtYXkgY3Jhc2guDQogICAgICAgICAgICAvLyBTZWUgaHR0cDovL3NvY2lhbC5tc2RuLm1pY3Jvc29mdC5jb20vRm9ydW1zL2VuLVVTLzdlMDgxYjY1LTg3OGEtNGMyMi04ZTY4LWMxMGQzOWMyZWQzMi9pbnRlcm5ldC1leHBsb3Jlci1jcmFzaGVzLWFwcGVuZGluZy1zdHlsZS1lbGVtZW50LXRvLWhlYWQNCiAgICAgICAgICAgIGlmIChzdHlsZU5vZGUuc3R5bGVTaGVldCkgew0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIHN0eWxlTm9kZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBzdHlsZXM7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGRuXCd0IHJlYXNzaWduIHN0eWxlU2hlZXQuY3NzVGV4dC4nKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGN1cnJlbnRTY3JpcHQ6IGZ1bmN0aW9uICh3aW5kb3cpIHsNCiAgICAgICAgICAgIHZhciBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudDsNCiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jdXJyZW50U2NyaXB0IHx8IChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgdmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7DQogICAgICAgICAgICAgICAgcmV0dXJuIHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgIH0pKCk7DQogICAgICAgIH0NCiAgICB9OwoKICAgIHZhciBhZGREZWZhdWx0T3B0aW9ucyA9IChmdW5jdGlvbiAod2luZG93LCBvcHRpb25zKSB7DQogICAgICAgIC8vIHVzZSBvcHRpb25zIGZyb20gdGhlIGN1cnJlbnQgc2NyaXB0IHRhZyBkYXRhIGF0dHJpYnVlcw0KICAgICAgICBhZGREYXRhQXR0cihvcHRpb25zLCBicm93c2VyLmN1cnJlbnRTY3JpcHQod2luZG93KSk7DQogICAgICAgIGlmIChvcHRpb25zLmlzRmlsZVByb3RvY29sID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgIG9wdGlvbnMuaXNGaWxlUHJvdG9jb2wgPSAvXihmaWxlfChjaHJvbWV8c2FmYXJpKSgtZXh0ZW5zaW9uKT98cmVzb3VyY2V8cXJjfGFwcCk6Ly50ZXN0KHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gTG9hZCBzdHlsZXMgYXN5bmNocm9ub3VzbHkgKGRlZmF1bHQ6IGZhbHNlKQ0KICAgICAgICAvLw0KICAgICAgICAvLyBUaGlzIGlzIHNldCB0byBgZmFsc2VgIGJ5IGRlZmF1bHQsIHNvIHRoYXQgdGhlIGJvZHkNCiAgICAgICAgLy8gZG9lc24ndCBzdGFydCBsb2FkaW5nIGJlZm9yZSB0aGUgc3R5bGVzaGVldHMgYXJlIHBhcnNlZC4NCiAgICAgICAgLy8gU2V0dGluZyB0aGlzIHRvIGB0cnVlYCBjYW4gcmVzdWx0IGluIGZsaWNrZXJpbmcuDQogICAgICAgIC8vDQogICAgICAgIG9wdGlvbnMuYXN5bmMgPSBvcHRpb25zLmFzeW5jIHx8IGZhbHNlOw0KICAgICAgICBvcHRpb25zLmZpbGVBc3luYyA9IG9wdGlvbnMuZmlsZUFzeW5jIHx8IGZhbHNlOw0KICAgICAgICAvLyBJbnRlcnZhbCBiZXR3ZWVuIHdhdGNoIHBvbGxzDQogICAgICAgIG9wdGlvbnMucG9sbCA9IG9wdGlvbnMucG9sbCB8fCAob3B0aW9ucy5pc0ZpbGVQcm90b2NvbCA/IDEwMDAgOiAxNTAwKTsNCiAgICAgICAgb3B0aW9ucy5lbnYgPSBvcHRpb25zLmVudiB8fCAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09ICcxMjcuMC4wLjEnIHx8DQogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT0gJzAuMC4wLjAnIHx8DQogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT0gJ2xvY2FsaG9zdCcgfHwNCiAgICAgICAgICAgICh3aW5kb3cubG9jYXRpb24ucG9ydCAmJg0KICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wb3J0Lmxlbmd0aCA+IDApIHx8DQogICAgICAgICAgICBvcHRpb25zLmlzRmlsZVByb3RvY29sID8gJ2RldmVsb3BtZW50Jw0KICAgICAgICAgICAgOiAncHJvZHVjdGlvbicpOw0KICAgICAgICB2YXIgZHVtcExpbmVOdW1iZXJzID0gLyFkdW1wTGluZU51bWJlcnM6KGNvbW1lbnRzfG1lZGlhcXVlcnl8YWxsKS8uZXhlYyh3aW5kb3cubG9jYXRpb24uaGFzaCk7DQogICAgICAgIGlmIChkdW1wTGluZU51bWJlcnMpIHsNCiAgICAgICAgICAgIG9wdGlvbnMuZHVtcExpbmVOdW1iZXJzID0gZHVtcExpbmVOdW1iZXJzWzFdOw0KICAgICAgICB9DQogICAgICAgIGlmIChvcHRpb25zLnVzZUZpbGVDYWNoZSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICBvcHRpb25zLnVzZUZpbGVDYWNoZSA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG9wdGlvbnMub25SZWFkeSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICBvcHRpb25zLm9uUmVhZHkgPSB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGlmIChvcHRpb25zLnJlbGF0aXZlVXJscykgew0KICAgICAgICAgICAgb3B0aW9ucy5yZXdyaXRlVXJscyA9ICdhbGwnOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIGxvZ2dlciQxID0gew0KICAgICAgICBlcnJvcjogZnVuY3Rpb24gKG1zZykgew0KICAgICAgICAgICAgdGhpcy5fZmlyZUV2ZW50KCdlcnJvcicsIG1zZyk7DQogICAgICAgIH0sDQogICAgICAgIHdhcm46IGZ1bmN0aW9uIChtc2cpIHsNCiAgICAgICAgICAgIHRoaXMuX2ZpcmVFdmVudCgnd2FybicsIG1zZyk7DQogICAgICAgIH0sDQogICAgICAgIGluZm86IGZ1bmN0aW9uIChtc2cpIHsNCiAgICAgICAgICAgIHRoaXMuX2ZpcmVFdmVudCgnaW5mbycsIG1zZyk7DQogICAgICAgIH0sDQogICAgICAgIGRlYnVnOiBmdW5jdGlvbiAobXNnKSB7DQogICAgICAgICAgICB0aGlzLl9maXJlRXZlbnQoJ2RlYnVnJywgbXNnKTsNCiAgICAgICAgfSwNCiAgICAgICAgYWRkTGlzdGVuZXI6IGZ1bmN0aW9uIChsaXN0ZW5lcikgew0KICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOw0KICAgICAgICB9LA0KICAgICAgICByZW1vdmVMaXN0ZW5lcjogZnVuY3Rpb24gKGxpc3RlbmVyKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2xpc3RlbmVycy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnNbaV0gPT09IGxpc3RlbmVyKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5zcGxpY2UoaSwgMSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIF9maXJlRXZlbnQ6IGZ1bmN0aW9uICh0eXBlLCBtc2cpIHsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgdmFyIGxvZ0Z1bmN0aW9uID0gdGhpcy5fbGlzdGVuZXJzW2ldW3R5cGVdOw0KICAgICAgICAgICAgICAgIGlmIChsb2dGdW5jdGlvbikgew0KICAgICAgICAgICAgICAgICAgICBsb2dGdW5jdGlvbihtc2cpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgX2xpc3RlbmVyczogW10NCiAgICB9OwoKICAgIC8qKg0KICAgICAqIEB0b2RvIERvY3VtZW50IHdoeSB0aGlzIGFic3RyYWN0aW9uIGV4aXN0cywgYW5kIHRoZSByZWxhdGlvbnNoaXAgYmV0d2Vlbg0KICAgICAqICAgICAgIGVudmlyb25tZW50LCBmaWxlIG1hbmFnZXJzLCBhbmQgcGx1Z2luIG1hbmFnZXINCiAgICAgKi8NCiAgICB2YXIgRW52aXJvbm1lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7DQogICAgICAgIGZ1bmN0aW9uIEVudmlyb25tZW50KGV4dGVybmFsRW52aXJvbm1lbnQsIGZpbGVNYW5hZ2Vycykgew0KICAgICAgICAgICAgdGhpcy5maWxlTWFuYWdlcnMgPSBmaWxlTWFuYWdlcnMgfHwgW107DQogICAgICAgICAgICBleHRlcm5hbEVudmlyb25tZW50ID0gZXh0ZXJuYWxFbnZpcm9ubWVudCB8fCB7fTsNCiAgICAgICAgICAgIHZhciBvcHRpb25hbEZ1bmN0aW9ucyA9IFsnZW5jb2RlQmFzZTY0JywgJ21pbWVMb29rdXAnLCAnY2hhcnNldExvb2t1cCcsICdnZXRTb3VyY2VNYXBHZW5lcmF0b3InXTsNCiAgICAgICAgICAgIHZhciByZXF1aXJlZEZ1bmN0aW9ucyA9IFtdOw0KICAgICAgICAgICAgdmFyIGZ1bmN0aW9ucyA9IHJlcXVpcmVkRnVuY3Rpb25zLmNvbmNhdChvcHRpb25hbEZ1bmN0aW9ucyk7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZ1bmN0aW9ucy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHZhciBwcm9wTmFtZSA9IGZ1bmN0aW9uc1tpXTsNCiAgICAgICAgICAgICAgICB2YXIgZW52aXJvbm1lbnRGdW5jID0gZXh0ZXJuYWxFbnZpcm9ubWVudFtwcm9wTmFtZV07DQogICAgICAgICAgICAgICAgaWYgKGVudmlyb25tZW50RnVuYykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzW3Byb3BOYW1lXSA9IGVudmlyb25tZW50RnVuYy5iaW5kKGV4dGVybmFsRW52aXJvbm1lbnQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChpIDwgcmVxdWlyZWRGdW5jdGlvbnMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMud2FybigibWlzc2luZyByZXF1aXJlZCBmdW5jdGlvbiBpbiBlbnZpcm9ubWVudCAtICIgKyBwcm9wTmFtZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIEVudmlyb25tZW50LnByb3RvdHlwZS5nZXRGaWxlTWFuYWdlciA9IGZ1bmN0aW9uIChmaWxlbmFtZSwgY3VycmVudERpcmVjdG9yeSwgb3B0aW9ucywgZW52aXJvbm1lbnQsIGlzU3luYykgew0KICAgICAgICAgICAgaWYgKCFmaWxlbmFtZSkgew0KICAgICAgICAgICAgICAgIGxvZ2dlciQxLndhcm4oJ2dldEZpbGVNYW5hZ2VyIGNhbGxlZCB3aXRoIG5vIGZpbGVuYW1lLi4gUGxlYXNlIHJlcG9ydCB0aGlzIGlzc3VlLiBjb250aW51aW5nLicpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGN1cnJlbnREaXJlY3RvcnkgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGxvZ2dlciQxLndhcm4oJ2dldEZpbGVNYW5hZ2VyIGNhbGxlZCB3aXRoIG51bGwgZGlyZWN0b3J5Li4gUGxlYXNlIHJlcG9ydCB0aGlzIGlzc3VlLiBjb250aW51aW5nLicpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGZpbGVNYW5hZ2VycyA9IHRoaXMuZmlsZU1hbmFnZXJzOw0KICAgICAgICAgICAgaWYgKG9wdGlvbnMucGx1Z2luTWFuYWdlcikgew0KICAgICAgICAgICAgICAgIGZpbGVNYW5hZ2VycyA9IFtdLmNvbmNhdChmaWxlTWFuYWdlcnMpLmNvbmNhdChvcHRpb25zLnBsdWdpbk1hbmFnZXIuZ2V0RmlsZU1hbmFnZXJzKCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IGZpbGVNYW5hZ2Vycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgICAgICAgIHZhciBmaWxlTWFuYWdlciA9IGZpbGVNYW5hZ2Vyc1tpXTsNCiAgICAgICAgICAgICAgICBpZiAoZmlsZU1hbmFnZXJbaXNTeW5jID8gJ3N1cHBvcnRzU3luYycgOiAnc3VwcG9ydHMnXShmaWxlbmFtZSwgY3VycmVudERpcmVjdG9yeSwgb3B0aW9ucywgZW52aXJvbm1lbnQpKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWxlTWFuYWdlcjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfTsNCiAgICAgICAgRW52aXJvbm1lbnQucHJvdG90eXBlLmFkZEZpbGVNYW5hZ2VyID0gZnVuY3Rpb24gKGZpbGVNYW5hZ2VyKSB7DQogICAgICAgICAgICB0aGlzLmZpbGVNYW5hZ2Vycy5wdXNoKGZpbGVNYW5hZ2VyKTsNCiAgICAgICAgfTsNCiAgICAgICAgRW52aXJvbm1lbnQucHJvdG90eXBlLmNsZWFyRmlsZU1hbmFnZXJzID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdGhpcy5maWxlTWFuYWdlcnMgPSBbXTsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIEVudmlyb25tZW50Ow0KICAgIH0oKSk7CgogICAgdmFyIGNvbG9ycyA9IHsNCiAgICAgICAgJ2FsaWNlYmx1ZSc6ICcjZjBmOGZmJywNCiAgICAgICAgJ2FudGlxdWV3aGl0ZSc6ICcjZmFlYmQ3JywNCiAgICAgICAgJ2FxdWEnOiAnIzAwZmZmZicsDQogICAgICAgICdhcXVhbWFyaW5lJzogJyM3ZmZmZDQnLA0KICAgICAgICAnYXp1cmUnOiAnI2YwZmZmZicsDQogICAgICAgICdiZWlnZSc6ICcjZjVmNWRjJywNCiAgICAgICAgJ2Jpc3F1ZSc6ICcjZmZlNGM0JywNCiAgICAgICAgJ2JsYWNrJzogJyMwMDAwMDAnLA0KICAgICAgICAnYmxhbmNoZWRhbG1vbmQnOiAnI2ZmZWJjZCcsDQogICAgICAgICdibHVlJzogJyMwMDAwZmYnLA0KICAgICAgICAnYmx1ZXZpb2xldCc6ICcjOGEyYmUyJywNCiAgICAgICAgJ2Jyb3duJzogJyNhNTJhMmEnLA0KICAgICAgICAnYnVybHl3b29kJzogJyNkZWI4ODcnLA0KICAgICAgICAnY2FkZXRibHVlJzogJyM1ZjllYTAnLA0KICAgICAgICAnY2hhcnRyZXVzZSc6ICcjN2ZmZjAwJywNCiAgICAgICAgJ2Nob2NvbGF0ZSc6ICcjZDI2OTFlJywNCiAgICAgICAgJ2NvcmFsJzogJyNmZjdmNTAnLA0KICAgICAgICAnY29ybmZsb3dlcmJsdWUnOiAnIzY0OTVlZCcsDQogICAgICAgICdjb3Juc2lsayc6ICcjZmZmOGRjJywNCiAgICAgICAgJ2NyaW1zb24nOiAnI2RjMTQzYycsDQogICAgICAgICdjeWFuJzogJyMwMGZmZmYnLA0KICAgICAgICAnZGFya2JsdWUnOiAnIzAwMDA4YicsDQogICAgICAgICdkYXJrY3lhbic6ICcjMDA4YjhiJywNCiAgICAgICAgJ2Rhcmtnb2xkZW5yb2QnOiAnI2I4ODYwYicsDQogICAgICAgICdkYXJrZ3JheSc6ICcjYTlhOWE5JywNCiAgICAgICAgJ2RhcmtncmV5JzogJyNhOWE5YTknLA0KICAgICAgICAnZGFya2dyZWVuJzogJyMwMDY0MDAnLA0KICAgICAgICAnZGFya2toYWtpJzogJyNiZGI3NmInLA0KICAgICAgICAnZGFya21hZ2VudGEnOiAnIzhiMDA4YicsDQogICAgICAgICdkYXJrb2xpdmVncmVlbic6ICcjNTU2YjJmJywNCiAgICAgICAgJ2RhcmtvcmFuZ2UnOiAnI2ZmOGMwMCcsDQogICAgICAgICdkYXJrb3JjaGlkJzogJyM5OTMyY2MnLA0KICAgICAgICAnZGFya3JlZCc6ICcjOGIwMDAwJywNCiAgICAgICAgJ2RhcmtzYWxtb24nOiAnI2U5OTY3YScsDQogICAgICAgICdkYXJrc2VhZ3JlZW4nOiAnIzhmYmM4ZicsDQogICAgICAgICdkYXJrc2xhdGVibHVlJzogJyM0ODNkOGInLA0KICAgICAgICAnZGFya3NsYXRlZ3JheSc6ICcjMmY0ZjRmJywNCiAgICAgICAgJ2RhcmtzbGF0ZWdyZXknOiAnIzJmNGY0ZicsDQogICAgICAgICdkYXJrdHVycXVvaXNlJzogJyMwMGNlZDEnLA0KICAgICAgICAnZGFya3Zpb2xldCc6ICcjOTQwMGQzJywNCiAgICAgICAgJ2RlZXBwaW5rJzogJyNmZjE0OTMnLA0KICAgICAgICAnZGVlcHNreWJsdWUnOiAnIzAwYmZmZicsDQogICAgICAgICdkaW1ncmF5JzogJyM2OTY5NjknLA0KICAgICAgICAnZGltZ3JleSc6ICcjNjk2OTY5JywNCiAgICAgICAgJ2RvZGdlcmJsdWUnOiAnIzFlOTBmZicsDQogICAgICAgICdmaXJlYnJpY2snOiAnI2IyMjIyMicsDQogICAgICAgICdmbG9yYWx3aGl0ZSc6ICcjZmZmYWYwJywNCiAgICAgICAgJ2ZvcmVzdGdyZWVuJzogJyMyMjhiMjInLA0KICAgICAgICAnZnVjaHNpYSc6ICcjZmYwMGZmJywNCiAgICAgICAgJ2dhaW5zYm9ybyc6ICcjZGNkY2RjJywNCiAgICAgICAgJ2dob3N0d2hpdGUnOiAnI2Y4ZjhmZicsDQogICAgICAgICdnb2xkJzogJyNmZmQ3MDAnLA0KICAgICAgICAnZ29sZGVucm9kJzogJyNkYWE1MjAnLA0KICAgICAgICAnZ3JheSc6ICcjODA4MDgwJywNCiAgICAgICAgJ2dyZXknOiAnIzgwODA4MCcsDQogICAgICAgICdncmVlbic6ICcjMDA4MDAwJywNCiAgICAgICAgJ2dyZWVueWVsbG93JzogJyNhZGZmMmYnLA0KICAgICAgICAnaG9uZXlkZXcnOiAnI2YwZmZmMCcsDQogICAgICAgICdob3RwaW5rJzogJyNmZjY5YjQnLA0KICAgICAgICAnaW5kaWFucmVkJzogJyNjZDVjNWMnLA0KICAgICAgICAnaW5kaWdvJzogJyM0YjAwODInLA0KICAgICAgICAnaXZvcnknOiAnI2ZmZmZmMCcsDQogICAgICAgICdraGFraSc6ICcjZjBlNjhjJywNCiAgICAgICAgJ2xhdmVuZGVyJzogJyNlNmU2ZmEnLA0KICAgICAgICAnbGF2ZW5kZXJibHVzaCc6ICcjZmZmMGY1JywNCiAgICAgICAgJ2xhd25ncmVlbic6ICcjN2NmYzAwJywNCiAgICAgICAgJ2xlbW9uY2hpZmZvbic6ICcjZmZmYWNkJywNCiAgICAgICAgJ2xpZ2h0Ymx1ZSc6ICcjYWRkOGU2JywNCiAgICAgICAgJ2xpZ2h0Y29yYWwnOiAnI2YwODA4MCcsDQogICAgICAgICdsaWdodGN5YW4nOiAnI2UwZmZmZicsDQogICAgICAgICdsaWdodGdvbGRlbnJvZHllbGxvdyc6ICcjZmFmYWQyJywNCiAgICAgICAgJ2xpZ2h0Z3JheSc6ICcjZDNkM2QzJywNCiAgICAgICAgJ2xpZ2h0Z3JleSc6ICcjZDNkM2QzJywNCiAgICAgICAgJ2xpZ2h0Z3JlZW4nOiAnIzkwZWU5MCcsDQogICAgICAgICdsaWdodHBpbmsnOiAnI2ZmYjZjMScsDQogICAgICAgICdsaWdodHNhbG1vbic6ICcjZmZhMDdhJywNCiAgICAgICAgJ2xpZ2h0c2VhZ3JlZW4nOiAnIzIwYjJhYScsDQogICAgICAgICdsaWdodHNreWJsdWUnOiAnIzg3Y2VmYScsDQogICAgICAgICdsaWdodHNsYXRlZ3JheSc6ICcjNzc4ODk5JywNCiAgICAgICAgJ2xpZ2h0c2xhdGVncmV5JzogJyM3Nzg4OTknLA0KICAgICAgICAnbGlnaHRzdGVlbGJsdWUnOiAnI2IwYzRkZScsDQogICAgICAgICdsaWdodHllbGxvdyc6ICcjZmZmZmUwJywNCiAgICAgICAgJ2xpbWUnOiAnIzAwZmYwMCcsDQogICAgICAgICdsaW1lZ3JlZW4nOiAnIzMyY2QzMicsDQogICAgICAgICdsaW5lbic6ICcjZmFmMGU2JywNCiAgICAgICAgJ21hZ2VudGEnOiAnI2ZmMDBmZicsDQogICAgICAgICdtYXJvb24nOiAnIzgwMDAwMCcsDQogICAgICAgICdtZWRpdW1hcXVhbWFyaW5lJzogJyM2NmNkYWEnLA0KICAgICAgICAnbWVkaXVtYmx1ZSc6ICcjMDAwMGNkJywNCiAgICAgICAgJ21lZGl1bW9yY2hpZCc6ICcjYmE1NWQzJywNCiAgICAgICAgJ21lZGl1bXB1cnBsZSc6ICcjOTM3MGQ4JywNCiAgICAgICAgJ21lZGl1bXNlYWdyZWVuJzogJyMzY2IzNzEnLA0KICAgICAgICAnbWVkaXVtc2xhdGVibHVlJzogJyM3YjY4ZWUnLA0KICAgICAgICAnbWVkaXVtc3ByaW5nZ3JlZW4nOiAnIzAwZmE5YScsDQogICAgICAgICdtZWRpdW10dXJxdW9pc2UnOiAnIzQ4ZDFjYycsDQogICAgICAgICdtZWRpdW12aW9sZXRyZWQnOiAnI2M3MTU4NScsDQogICAgICAgICdtaWRuaWdodGJsdWUnOiAnIzE5MTk3MCcsDQogICAgICAgICdtaW50Y3JlYW0nOiAnI2Y1ZmZmYScsDQogICAgICAgICdtaXN0eXJvc2UnOiAnI2ZmZTRlMScsDQogICAgICAgICdtb2NjYXNpbic6ICcjZmZlNGI1JywNCiAgICAgICAgJ25hdmFqb3doaXRlJzogJyNmZmRlYWQnLA0KICAgICAgICAnbmF2eSc6ICcjMDAwMDgwJywNCiAgICAgICAgJ29sZGxhY2UnOiAnI2ZkZjVlNicsDQogICAgICAgICdvbGl2ZSc6ICcjODA4MDAwJywNCiAgICAgICAgJ29saXZlZHJhYic6ICcjNmI4ZTIzJywNCiAgICAgICAgJ29yYW5nZSc6ICcjZmZhNTAwJywNCiAgICAgICAgJ29yYW5nZXJlZCc6ICcjZmY0NTAwJywNCiAgICAgICAgJ29yY2hpZCc6ICcjZGE3MGQ2JywNCiAgICAgICAgJ3BhbGVnb2xkZW5yb2QnOiAnI2VlZThhYScsDQogICAgICAgICdwYWxlZ3JlZW4nOiAnIzk4ZmI5OCcsDQogICAgICAgICdwYWxldHVycXVvaXNlJzogJyNhZmVlZWUnLA0KICAgICAgICAncGFsZXZpb2xldHJlZCc6ICcjZDg3MDkzJywNCiAgICAgICAgJ3BhcGF5YXdoaXAnOiAnI2ZmZWZkNScsDQogICAgICAgICdwZWFjaHB1ZmYnOiAnI2ZmZGFiOScsDQogICAgICAgICdwZXJ1JzogJyNjZDg1M2YnLA0KICAgICAgICAncGluayc6ICcjZmZjMGNiJywNCiAgICAgICAgJ3BsdW0nOiAnI2RkYTBkZCcsDQogICAgICAgICdwb3dkZXJibHVlJzogJyNiMGUwZTYnLA0KICAgICAgICAncHVycGxlJzogJyM4MDAwODAnLA0KICAgICAgICAncmViZWNjYXB1cnBsZSc6ICcjNjYzMzk5JywNCiAgICAgICAgJ3JlZCc6ICcjZmYwMDAwJywNCiAgICAgICAgJ3Jvc3licm93bic6ICcjYmM4ZjhmJywNCiAgICAgICAgJ3JveWFsYmx1ZSc6ICcjNDE2OWUxJywNCiAgICAgICAgJ3NhZGRsZWJyb3duJzogJyM4YjQ1MTMnLA0KICAgICAgICAnc2FsbW9uJzogJyNmYTgwNzInLA0KICAgICAgICAnc2FuZHlicm93bic6ICcjZjRhNDYwJywNCiAgICAgICAgJ3NlYWdyZWVuJzogJyMyZThiNTcnLA0KICAgICAgICAnc2Vhc2hlbGwnOiAnI2ZmZjVlZScsDQogICAgICAgICdzaWVubmEnOiAnI2EwNTIyZCcsDQogICAgICAgICdzaWx2ZXInOiAnI2MwYzBjMCcsDQogICAgICAgICdza3libHVlJzogJyM4N2NlZWInLA0KICAgICAgICAnc2xhdGVibHVlJzogJyM2YTVhY2QnLA0KICAgICAgICAnc2xhdGVncmF5JzogJyM3MDgwOTAnLA0KICAgICAgICAnc2xhdGVncmV5JzogJyM3MDgwOTAnLA0KICAgICAgICAnc25vdyc6ICcjZmZmYWZhJywNCiAgICAgICAgJ3NwcmluZ2dyZWVuJzogJyMwMGZmN2YnLA0KICAgICAgICAnc3RlZWxibHVlJzogJyM0NjgyYjQnLA0KICAgICAgICAndGFuJzogJyNkMmI0OGMnLA0KICAgICAgICAndGVhbCc6ICcjMDA4MDgwJywNCiAgICAgICAgJ3RoaXN0bGUnOiAnI2Q4YmZkOCcsDQogICAgICAgICd0b21hdG8nOiAnI2ZmNjM0NycsDQogICAgICAgICd0dXJxdW9pc2UnOiAnIzQwZTBkMCcsDQogICAgICAgICd2aW9sZXQnOiAnI2VlODJlZScsDQogICAgICAgICd3aGVhdCc6ICcjZjVkZWIzJywNCiAgICAgICAgJ3doaXRlJzogJyNmZmZmZmYnLA0KICAgICAgICAnd2hpdGVzbW9rZSc6ICcjZjVmNWY1JywNCiAgICAgICAgJ3llbGxvdyc6ICcjZmZmZjAwJywNCiAgICAgICAgJ3llbGxvd2dyZWVuJzogJyM5YWNkMzInDQogICAgfTsKCiAgICB2YXIgdW5pdENvbnZlcnNpb25zID0gew0KICAgICAgICBsZW5ndGg6IHsNCiAgICAgICAgICAgICdtJzogMSwNCiAgICAgICAgICAgICdjbSc6IDAuMDEsDQogICAgICAgICAgICAnbW0nOiAwLjAwMSwNCiAgICAgICAgICAgICdpbic6IDAuMDI1NCwNCiAgICAgICAgICAgICdweCc6IDAuMDI1NCAvIDk2LA0KICAgICAgICAgICAgJ3B0JzogMC4wMjU0IC8gNzIsDQogICAgICAgICAgICAncGMnOiAwLjAyNTQgLyA3MiAqIDEyDQogICAgICAgIH0sDQogICAgICAgIGR1cmF0aW9uOiB7DQogICAgICAgICAgICAncyc6IDEsDQogICAgICAgICAgICAnbXMnOiAwLjAwMQ0KICAgICAgICB9LA0KICAgICAgICBhbmdsZTogew0KICAgICAgICAgICAgJ3JhZCc6IDEgLyAoMiAqIE1hdGguUEkpLA0KICAgICAgICAgICAgJ2RlZyc6IDEgLyAzNjAsDQogICAgICAgICAgICAnZ3JhZCc6IDEgLyA0MDAsDQogICAgICAgICAgICAndHVybic6IDENCiAgICAgICAgfQ0KICAgIH07CgogICAgdmFyIGRhdGEgPSB7IGNvbG9yczogY29sb3JzLCB1bml0Q29udmVyc2lvbnM6IHVuaXRDb252ZXJzaW9ucyB9OwoKICAgIC8qKg0KICAgICAqIFRoZSByZWFzb24gd2h5IE5vZGUgaXMgYSBjbGFzcyBhbmQgb3RoZXIgbm9kZXMgc2ltcGx5IGRvIG5vdCBleHRlbmQNCiAgICAgKiBmcm9tIE5vZGUgKHNpbmNlIHdlJ3JlIHRyYW5zcGlsaW5nKSBpcyBkdWUgdG8gdGhpcyBpc3N1ZToNCiAgICAgKg0KICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9sZXNzL2xlc3MuanMvaXNzdWVzLzM0MzQNCiAgICAgKi8NCiAgICB2YXIgTm9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgZnVuY3Rpb24gTm9kZSgpIHsNCiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDsNCiAgICAgICAgICAgIHRoaXMudmlzaWJpbGl0eUJsb2NrcyA9IHVuZGVmaW5lZDsNCiAgICAgICAgICAgIHRoaXMubm9kZVZpc2libGUgPSB1bmRlZmluZWQ7DQogICAgICAgICAgICB0aGlzLnJvb3ROb2RlID0gbnVsbDsNCiAgICAgICAgICAgIHRoaXMucGFyc2VkID0gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsICJjdXJyZW50RmlsZUluZm8iLCB7DQogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWxlSW5mbygpOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLA0KICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlDQogICAgICAgIH0pOw0KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsICJpbmRleCIsIHsNCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEluZGV4KCk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsDQogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUNCiAgICAgICAgfSk7DQogICAgICAgIE5vZGUucHJvdG90eXBlLnNldFBhcmVudCA9IGZ1bmN0aW9uIChub2RlcywgcGFyZW50KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBzZXQobm9kZSkgew0KICAgICAgICAgICAgICAgIGlmIChub2RlICYmIG5vZGUgaW5zdGFuY2VvZiBOb2RlKSB7DQogICAgICAgICAgICAgICAgICAgIG5vZGUucGFyZW50ID0gcGFyZW50Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vZGVzKSkgew0KICAgICAgICAgICAgICAgIG5vZGVzLmZvckVhY2goc2V0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHNldChub2Rlcyk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIE5vZGUucHJvdG90eXBlLmdldEluZGV4ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2luZGV4IHx8ICh0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5nZXRJbmRleCgpKSB8fCAwOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS5maWxlSW5mbyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLl9maWxlSW5mbyB8fCAodGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQuZmlsZUluZm8oKSkgfHwge307DQogICAgICAgIH07DQogICAgICAgIE5vZGUucHJvdG90eXBlLmlzUnVsZXNldExpa2UgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfTsNCiAgICAgICAgTm9kZS5wcm90b3R5cGUudG9DU1MgPSBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHN0cnMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuZ2VuQ1NTKGNvbnRleHQsIHsNCiAgICAgICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uIChjaHVuaywgZmlsZUluZm8sIGluZGV4KSB7DQogICAgICAgICAgICAgICAgICAgIHN0cnMucHVzaChjaHVuayk7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBpc0VtcHR5OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJzLmxlbmd0aCA9PT0gMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHJldHVybiBzdHJzLmpvaW4oJycpOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS5nZW5DU1MgPSBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBvdXRwdXQuYWRkKHRoaXMudmFsdWUpOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS5hY2NlcHQgPSBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZpc2l0b3IudmlzaXQodGhpcy52YWx1ZSk7DQogICAgICAgIH07DQogICAgICAgIE5vZGUucHJvdG90eXBlLmV2YWwgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS5fb3BlcmF0ZSA9IGZ1bmN0aW9uIChjb250ZXh0LCBvcCwgYSwgYikgew0KICAgICAgICAgICAgc3dpdGNoIChvcCkgew0KICAgICAgICAgICAgICAgIGNhc2UgJysnOiByZXR1cm4gYSArIGI7DQogICAgICAgICAgICAgICAgY2FzZSAnLSc6IHJldHVybiBhIC0gYjsNCiAgICAgICAgICAgICAgICBjYXNlICcqJzogcmV0dXJuIGEgKiBiOw0KICAgICAgICAgICAgICAgIGNhc2UgJy8nOiByZXR1cm4gYSAvIGI7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIE5vZGUucHJvdG90eXBlLmZyb3VuZCA9IGZ1bmN0aW9uIChjb250ZXh0LCB2YWx1ZSkgew0KICAgICAgICAgICAgdmFyIHByZWNpc2lvbiA9IGNvbnRleHQgJiYgY29udGV4dC5udW1QcmVjaXNpb247DQogICAgICAgICAgICAvLyBhZGQgImVwc2lsb24iIHRvIGVuc3VyZSBudW1iZXJzIGxpa2UgMS4wMDAwMDAwMDUgKHJlcHJlc2VudGVkIGFzIDEuMDAwMDAwMDA0OTk5Li4uKSBhcmUgcHJvcGVybHkgcm91bmRlZDoNCiAgICAgICAgICAgIHJldHVybiAocHJlY2lzaW9uKSA/IE51bWJlcigodmFsdWUgKyAyZS0xNikudG9GaXhlZChwcmVjaXNpb24pKSA6IHZhbHVlOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLmNvbXBhcmUgPSBmdW5jdGlvbiAoYSwgYikgew0KICAgICAgICAgICAgLyogcmV0dXJuczoNCiAgICAgICAgICAgICAtMTogYSA8IGINCiAgICAgICAgICAgICAwOiBhID0gYg0KICAgICAgICAgICAgIDE6IGEgPiBiDQogICAgICAgICAgICAgYW5kICphbnkqIG90aGVyIHZhbHVlIGZvciBhICE9IGIgKGUuZy4gdW5kZWZpbmVkLCBOYU4sIC0yIGV0Yy4pICovDQogICAgICAgICAgICBpZiAoKGEuY29tcGFyZSkgJiYNCiAgICAgICAgICAgICAgICAvLyBmb3IgInN5bW1ldHJpYyByZXN1bHRzIiBmb3JjZSB0b0NTUy1iYXNlZCBjb21wYXJpc29uDQogICAgICAgICAgICAgICAgLy8gb2YgUXVvdGVkIG9yIEFub255bW91cyBpZiBlaXRoZXIgdmFsdWUgaXMgb25lIG9mIHRob3NlDQogICAgICAgICAgICAgICAgIShiLnR5cGUgPT09ICdRdW90ZWQnIHx8IGIudHlwZSA9PT0gJ0Fub255bW91cycpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGEuY29tcGFyZShiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKGIuY29tcGFyZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAtYi5jb21wYXJlKGEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoYS50eXBlICE9PSBiLnR5cGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYSA9IGEudmFsdWU7DQogICAgICAgICAgICBiID0gYi52YWx1ZTsNCiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBhID09PSBiID8gMCA6IHVuZGVmaW5lZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKE5vZGUuY29tcGFyZShhW2ldLCBiW2ldKSAhPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLm51bWVyaWNDb21wYXJlID0gZnVuY3Rpb24gKGEsIGIpIHsNCiAgICAgICAgICAgIHJldHVybiBhIDwgYiA/IC0xDQogICAgICAgICAgICAgICAgOiBhID09PSBiID8gMA0KICAgICAgICAgICAgICAgICAgICA6IGEgPiBiID8gMSA6IHVuZGVmaW5lZDsNCiAgICAgICAgfTsNCiAgICAgICAgLy8gUmV0dXJucyB0cnVlIGlmIHRoaXMgbm9kZSByZXByZXNlbnRzIHJvb3Qgb2YgYXN0IGltcG9ydGVkIGJ5IHJlZmVyZW5jZQ0KICAgICAgICBOb2RlLnByb3RvdHlwZS5ibG9ja3NWaXNpYmlsaXR5ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMudmlzaWJpbGl0eUJsb2NrcyA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgdGhpcy52aXNpYmlsaXR5QmxvY2tzID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpc2liaWxpdHlCbG9ja3MgIT09IDA7DQogICAgICAgIH07DQogICAgICAgIE5vZGUucHJvdG90eXBlLmFkZFZpc2liaWxpdHlCbG9jayA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnZpc2liaWxpdHlCbG9ja3MgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHRoaXMudmlzaWJpbGl0eUJsb2NrcyA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnZpc2liaWxpdHlCbG9ja3MgPSB0aGlzLnZpc2liaWxpdHlCbG9ja3MgKyAxOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS5yZW1vdmVWaXNpYmlsaXR5QmxvY2sgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBpZiAodGhpcy52aXNpYmlsaXR5QmxvY2tzID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnZpc2liaWxpdHlCbG9ja3MgPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy52aXNpYmlsaXR5QmxvY2tzID0gdGhpcy52aXNpYmlsaXR5QmxvY2tzIC0gMTsNCiAgICAgICAgfTsNCiAgICAgICAgLy8gVHVybnMgb24gbm9kZSB2aXNpYmlsaXR5IC0gaWYgY2FsbGVkIG5vZGUgd2lsbCBiZSBzaG93biBpbiBvdXRwdXQgcmVnYXJkbGVzcw0KICAgICAgICAvLyBvZiB3aGV0aGVyIGl0IGNvbWVzIGZyb20gaW1wb3J0IGJ5IHJlZmVyZW5jZSBvciBub3QNCiAgICAgICAgTm9kZS5wcm90b3R5cGUuZW5zdXJlVmlzaWJpbGl0eSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHRoaXMubm9kZVZpc2libGUgPSB0cnVlOw0KICAgICAgICB9Ow0KICAgICAgICAvLyBUdXJucyBvZmYgbm9kZSB2aXNpYmlsaXR5IC0gaWYgY2FsbGVkIG5vZGUgd2lsbCBOT1QgYmUgc2hvd24gaW4gb3V0cHV0IHJlZ2FyZGxlc3MNCiAgICAgICAgLy8gb2Ygd2hldGhlciBpdCBjb21lcyBmcm9tIGltcG9ydCBieSByZWZlcmVuY2Ugb3Igbm90DQogICAgICAgIE5vZGUucHJvdG90eXBlLmVuc3VyZUludmlzaWJpbGl0eSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHRoaXMubm9kZVZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgLy8gcmV0dXJuIHZhbHVlczoNCiAgICAgICAgLy8gZmFsc2UgLSB0aGUgbm9kZSBtdXN0IG5vdCBiZSB2aXNpYmxlDQogICAgICAgIC8vIHRydWUgLSB0aGUgbm9kZSBtdXN0IGJlIHZpc2libGUNCiAgICAgICAgLy8gdW5kZWZpbmVkIG9yIG51bGwgLSB0aGUgbm9kZSBoYXMgdGhlIHNhbWUgdmlzaWJpbGl0eSBhcyBpdHMgcGFyZW50DQogICAgICAgIE5vZGUucHJvdG90eXBlLmlzVmlzaWJsZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vZGVWaXNpYmxlOw0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS52aXNpYmlsaXR5SW5mbyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgdmlzaWJpbGl0eUJsb2NrczogdGhpcy52aXNpYmlsaXR5QmxvY2tzLA0KICAgICAgICAgICAgICAgIG5vZGVWaXNpYmxlOiB0aGlzLm5vZGVWaXNpYmxlDQogICAgICAgICAgICB9Ow0KICAgICAgICB9Ow0KICAgICAgICBOb2RlLnByb3RvdHlwZS5jb3B5VmlzaWJpbGl0eUluZm8gPSBmdW5jdGlvbiAoaW5mbykgew0KICAgICAgICAgICAgaWYgKCFpbmZvKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy52aXNpYmlsaXR5QmxvY2tzID0gaW5mby52aXNpYmlsaXR5QmxvY2tzOw0KICAgICAgICAgICAgdGhpcy5ub2RlVmlzaWJsZSA9IGluZm8ubm9kZVZpc2libGU7DQogICAgICAgIH07DQogICAgICAgIHJldHVybiBOb2RlOw0KICAgIH0oKSk7CgogICAgLy8NCiAgICAvLyBSR0IgQ29sb3JzIC0gI2ZmMDAxNCwgI2VlZQ0KICAgIC8vDQogICAgdmFyIENvbG9yID0gZnVuY3Rpb24gKHJnYiwgYSwgb3JpZ2luYWxGb3JtKSB7DQogICAgICAgIHZhciBzZWxmID0gdGhpczsNCiAgICAgICAgLy8NCiAgICAgICAgLy8gVGhlIGVuZCBnb2FsIGhlcmUsIGlzIHRvIHBhcnNlIHRoZSBhcmd1bWVudHMNCiAgICAgICAgLy8gaW50byBhbiBpbnRlZ2VyIHRyaXBsZXQsIHN1Y2ggYXMgYDEyOCwgMjU1LCAwYA0KICAgICAgICAvLw0KICAgICAgICAvLyBUaGlzIGZhY2lsaXRhdGVzIG9wZXJhdGlvbnMgYW5kIGNvbnZlcnNpb25zLg0KICAgICAgICAvLw0KICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZ2IpKSB7DQogICAgICAgICAgICB0aGlzLnJnYiA9IHJnYjsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChyZ2IubGVuZ3RoID49IDYpIHsNCiAgICAgICAgICAgIHRoaXMucmdiID0gW107DQogICAgICAgICAgICByZ2IubWF0Y2goLy57Mn0vZykubWFwKGZ1bmN0aW9uIChjLCBpKSB7DQogICAgICAgICAgICAgICAgaWYgKGkgPCAzKSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGYucmdiLnB1c2gocGFyc2VJbnQoYywgMTYpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGYuYWxwaGEgPSAocGFyc2VJbnQoYywgMTYpKSAvIDI1NTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMucmdiID0gW107DQogICAgICAgICAgICByZ2Iuc3BsaXQoJycpLm1hcChmdW5jdGlvbiAoYywgaSkgew0KICAgICAgICAgICAgICAgIGlmIChpIDwgMykgew0KICAgICAgICAgICAgICAgICAgICBzZWxmLnJnYi5wdXNoKHBhcnNlSW50KGMgKyBjLCAxNikpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5hbHBoYSA9IChwYXJzZUludChjICsgYywgMTYpKSAvIDI1NTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmFscGhhID0gdGhpcy5hbHBoYSB8fCAodHlwZW9mIGEgPT09ICdudW1iZXInID8gYSA6IDEpOw0KICAgICAgICBpZiAodHlwZW9mIG9yaWdpbmFsRm9ybSAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBvcmlnaW5hbEZvcm07DQogICAgICAgIH0NCiAgICB9Ow0KICAgIENvbG9yLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnQ29sb3InLA0KICAgICAgICBsdW1hOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgciA9IHRoaXMucmdiWzBdIC8gMjU1LCBnID0gdGhpcy5yZ2JbMV0gLyAyNTUsIGIgPSB0aGlzLnJnYlsyXSAvIDI1NTsNCiAgICAgICAgICAgIHIgPSAociA8PSAwLjAzOTI4KSA/IHIgLyAxMi45MiA6IE1hdGgucG93KCgociArIDAuMDU1KSAvIDEuMDU1KSwgMi40KTsNCiAgICAgICAgICAgIGcgPSAoZyA8PSAwLjAzOTI4KSA/IGcgLyAxMi45MiA6IE1hdGgucG93KCgoZyArIDAuMDU1KSAvIDEuMDU1KSwgMi40KTsNCiAgICAgICAgICAgIGIgPSAoYiA8PSAwLjAzOTI4KSA/IGIgLyAxMi45MiA6IE1hdGgucG93KCgoYiArIDAuMDU1KSAvIDEuMDU1KSwgMi40KTsNCiAgICAgICAgICAgIHJldHVybiAwLjIxMjYgKiByICsgMC43MTUyICogZyArIDAuMDcyMiAqIGI7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLnRvQ1NTKGNvbnRleHQpKTsNCiAgICAgICAgfSwNCiAgICAgICAgdG9DU1M6IGZ1bmN0aW9uIChjb250ZXh0LCBkb05vdENvbXByZXNzKSB7DQogICAgICAgICAgICB2YXIgY29tcHJlc3MgPSBjb250ZXh0ICYmIGNvbnRleHQuY29tcHJlc3MgJiYgIWRvTm90Q29tcHJlc3M7DQogICAgICAgICAgICB2YXIgY29sb3I7DQogICAgICAgICAgICB2YXIgYWxwaGE7DQogICAgICAgICAgICB2YXIgY29sb3JGdW5jdGlvbjsNCiAgICAgICAgICAgIHZhciBhcmdzID0gW107DQogICAgICAgICAgICAvLyBgdmFsdWVgIGlzIHNldCBpZiB0aGlzIGNvbG9yIHdhcyBvcmlnaW5hbGx5DQogICAgICAgICAgICAvLyBjb252ZXJ0ZWQgZnJvbSBhIG5hbWVkIGNvbG9yIHN0cmluZyBzbyB3ZSBuZWVkDQogICAgICAgICAgICAvLyB0byByZXNwZWN0IHRoaXMgYW5kIHRyeSB0byBvdXRwdXQgbmFtZWQgY29sb3IgdG9vLg0KICAgICAgICAgICAgYWxwaGEgPSB0aGlzLmZyb3VuZChjb250ZXh0LCB0aGlzLmFscGhhKTsNCiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUuaW5kZXhPZigncmdiJykgPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFscGhhIDwgMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JGdW5jdGlvbiA9ICdyZ2JhJzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnZhbHVlLmluZGV4T2YoJ2hzbCcpID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYSA8IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yRnVuY3Rpb24gPSAnaHNsYSc7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb2xvckZ1bmN0aW9uID0gJ2hzbCc7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmIChhbHBoYSA8IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgY29sb3JGdW5jdGlvbiA9ICdyZ2JhJzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzd2l0Y2ggKGNvbG9yRnVuY3Rpb24pIHsNCiAgICAgICAgICAgICAgICBjYXNlICdyZ2JhJzoNCiAgICAgICAgICAgICAgICAgICAgYXJncyA9IHRoaXMucmdiLm1hcChmdW5jdGlvbiAoYykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wJDEoTWF0aC5yb3VuZChjKSwgMjU1KTsNCiAgICAgICAgICAgICAgICAgICAgfSkuY29uY2F0KGNsYW1wJDEoYWxwaGEsIDEpKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSAnaHNsYSc6DQogICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaChjbGFtcCQxKGFscGhhLCAxKSk7DQogICAgICAgICAgICAgICAgY2FzZSAnaHNsJzoNCiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSB0aGlzLnRvSFNMKCk7DQogICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBbDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyb3VuZChjb250ZXh0LCBjb2xvci5oKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJvdW5kKGNvbnRleHQsIGNvbG9yLnMgKiAxMDApICsgIiUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcm91bmQoY29udGV4dCwgY29sb3IubCAqIDEwMCkgKyAiJSINCiAgICAgICAgICAgICAgICAgICAgXS5jb25jYXQoYXJncyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoY29sb3JGdW5jdGlvbikgew0KICAgICAgICAgICAgICAgIC8vIFZhbHVlcyBhcmUgY2FwcGVkIGJldHdlZW4gYDBgIGFuZCBgMjU1YCwgcm91bmRlZCBhbmQgemVyby1wYWRkZWQuDQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yRnVuY3Rpb24gKyAiKCIgKyBhcmdzLmpvaW4oIiwiICsgKGNvbXByZXNzID8gJycgOiAnICcpKSArICIpIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbG9yID0gdGhpcy50b1JHQigpOw0KICAgICAgICAgICAgaWYgKGNvbXByZXNzKSB7DQogICAgICAgICAgICAgICAgdmFyIHNwbGl0Y29sb3IgPSBjb2xvci5zcGxpdCgnJyk7DQogICAgICAgICAgICAgICAgLy8gQ29udmVydCBjb2xvciB0byBzaG9ydCBmb3JtYXQNCiAgICAgICAgICAgICAgICBpZiAoc3BsaXRjb2xvclsxXSA9PT0gc3BsaXRjb2xvclsyXSAmJiBzcGxpdGNvbG9yWzNdID09PSBzcGxpdGNvbG9yWzRdICYmIHNwbGl0Y29sb3JbNV0gPT09IHNwbGl0Y29sb3JbNl0pIHsNCiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSAiIyIgKyBzcGxpdGNvbG9yWzFdICsgc3BsaXRjb2xvclszXSArIHNwbGl0Y29sb3JbNV07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGNvbG9yOw0KICAgICAgICB9LA0KICAgICAgICAvLw0KICAgICAgICAvLyBPcGVyYXRpb25zIGhhdmUgdG8gYmUgZG9uZSBwZXItY2hhbm5lbCwgaWYgbm90LA0KICAgICAgICAvLyBjaGFubmVscyB3aWxsIHNwaWxsIG9udG8gZWFjaCBvdGhlci4gT25jZSB3ZSBoYXZlDQogICAgICAgIC8vIG91ciByZXN1bHQsIGluIHRoZSBmb3JtIG9mIGFuIGludGVnZXIgdHJpcGxldCwNCiAgICAgICAgLy8gd2UgY3JlYXRlIGEgbmV3IENvbG9yIG5vZGUgdG8gaG9sZCB0aGUgcmVzdWx0Lg0KICAgICAgICAvLw0KICAgICAgICBvcGVyYXRlOiBmdW5jdGlvbiAoY29udGV4dCwgb3AsIG90aGVyKSB7DQogICAgICAgICAgICB2YXIgcmdiID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgICAgdmFyIGFscGhhID0gdGhpcy5hbHBoYSAqICgxIC0gb3RoZXIuYWxwaGEpICsgb3RoZXIuYWxwaGE7DQogICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IDM7IGMrKykgew0KICAgICAgICAgICAgICAgIHJnYltjXSA9IHRoaXMuX29wZXJhdGUoY29udGV4dCwgb3AsIHRoaXMucmdiW2NdLCBvdGhlci5yZ2JbY10pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihyZ2IsIGFscGhhKTsNCiAgICAgICAgfSwNCiAgICAgICAgdG9SR0I6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0b0hleCh0aGlzLnJnYik7DQogICAgICAgIH0sDQogICAgICAgIHRvSFNMOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgciA9IHRoaXMucmdiWzBdIC8gMjU1LCBnID0gdGhpcy5yZ2JbMV0gLyAyNTUsIGIgPSB0aGlzLnJnYlsyXSAvIDI1NSwgYSA9IHRoaXMuYWxwaGE7DQogICAgICAgICAgICB2YXIgbWF4ID0gTWF0aC5tYXgociwgZywgYiksIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpOw0KICAgICAgICAgICAgdmFyIGg7DQogICAgICAgICAgICB2YXIgczsNCiAgICAgICAgICAgIHZhciBsID0gKG1heCArIG1pbikgLyAyOw0KICAgICAgICAgICAgdmFyIGQgPSBtYXggLSBtaW47DQogICAgICAgICAgICBpZiAobWF4ID09PSBtaW4pIHsNCiAgICAgICAgICAgICAgICBoID0gcyA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBzID0gbCA+IDAuNSA/IGQgLyAoMiAtIG1heCAtIG1pbikgOiBkIC8gKG1heCArIG1pbik7DQogICAgICAgICAgICAgICAgc3dpdGNoIChtYXgpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSByOg0KICAgICAgICAgICAgICAgICAgICAgICAgaCA9IChnIC0gYikgLyBkICsgKGcgPCBiID8gNiA6IDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgZzoNCiAgICAgICAgICAgICAgICAgICAgICAgIGggPSAoYiAtIHIpIC8gZCArIDI7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSBiOg0KICAgICAgICAgICAgICAgICAgICAgICAgaCA9IChyIC0gZykgLyBkICsgNDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBoIC89IDY7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4geyBoOiBoICogMzYwLCBzOiBzLCBsOiBsLCBhOiBhIH07DQogICAgICAgIH0sDQogICAgICAgIC8vIEFkYXB0ZWQgZnJvbSBodHRwOi8vbWppamFja3Nvbi5jb20vMjAwOC8wMi9yZ2ItdG8taHNsLWFuZC1yZ2ItdG8taHN2LWNvbG9yLW1vZGVsLWNvbnZlcnNpb24tYWxnb3JpdGhtcy1pbi1qYXZhc2NyaXB0DQogICAgICAgIHRvSFNWOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgciA9IHRoaXMucmdiWzBdIC8gMjU1LCBnID0gdGhpcy5yZ2JbMV0gLyAyNTUsIGIgPSB0aGlzLnJnYlsyXSAvIDI1NSwgYSA9IHRoaXMuYWxwaGE7DQogICAgICAgICAgICB2YXIgbWF4ID0gTWF0aC5tYXgociwgZywgYiksIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpOw0KICAgICAgICAgICAgdmFyIGg7DQogICAgICAgICAgICB2YXIgczsNCiAgICAgICAgICAgIHZhciB2ID0gbWF4Ow0KICAgICAgICAgICAgdmFyIGQgPSBtYXggLSBtaW47DQogICAgICAgICAgICBpZiAobWF4ID09PSAwKSB7DQogICAgICAgICAgICAgICAgcyA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBzID0gZCAvIG1heDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChtYXggPT09IG1pbikgew0KICAgICAgICAgICAgICAgIGggPSAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgc3dpdGNoIChtYXgpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSByOg0KICAgICAgICAgICAgICAgICAgICAgICAgaCA9IChnIC0gYikgLyBkICsgKGcgPCBiID8gNiA6IDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgZzoNCiAgICAgICAgICAgICAgICAgICAgICAgIGggPSAoYiAtIHIpIC8gZCArIDI7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSBiOg0KICAgICAgICAgICAgICAgICAgICAgICAgaCA9IChyIC0gZykgLyBkICsgNDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBoIC89IDY7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4geyBoOiBoICogMzYwLCBzOiBzLCB2OiB2LCBhOiBhIH07DQogICAgICAgIH0sDQogICAgICAgIHRvQVJHQjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRvSGV4KFt0aGlzLmFscGhhICogMjU1XS5jb25jYXQodGhpcy5yZ2IpKTsNCiAgICAgICAgfSwNCiAgICAgICAgY29tcGFyZTogZnVuY3Rpb24gKHgpIHsNCiAgICAgICAgICAgIHJldHVybiAoeC5yZ2IgJiYNCiAgICAgICAgICAgICAgICB4LnJnYlswXSA9PT0gdGhpcy5yZ2JbMF0gJiYNCiAgICAgICAgICAgICAgICB4LnJnYlsxXSA9PT0gdGhpcy5yZ2JbMV0gJiYNCiAgICAgICAgICAgICAgICB4LnJnYlsyXSA9PT0gdGhpcy5yZ2JbMl0gJiYNCiAgICAgICAgICAgICAgICB4LmFscGhhID09PSB0aGlzLmFscGhhKSA/IDAgOiB1bmRlZmluZWQ7DQogICAgICAgIH0NCiAgICB9KTsNCiAgICBDb2xvci5mcm9tS2V5d29yZCA9IGZ1bmN0aW9uIChrZXl3b3JkKSB7DQogICAgICAgIHZhciBjOw0KICAgICAgICB2YXIga2V5ID0ga2V5d29yZC50b0xvd2VyQ2FzZSgpOw0KICAgICAgICBpZiAoY29sb3JzLmhhc093blByb3BlcnR5KGtleSkpIHsNCiAgICAgICAgICAgIGMgPSBuZXcgQ29sb3IoY29sb3JzW2tleV0uc2xpY2UoMSkpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ3RyYW5zcGFyZW50Jykgew0KICAgICAgICAgICAgYyA9IG5ldyBDb2xvcihbMCwgMCwgMF0sIDApOw0KICAgICAgICB9DQogICAgICAgIGlmIChjKSB7DQogICAgICAgICAgICBjLnZhbHVlID0ga2V5d29yZDsNCiAgICAgICAgICAgIHJldHVybiBjOw0KICAgICAgICB9DQogICAgfTsNCiAgICBmdW5jdGlvbiBjbGFtcCQxKHYsIG1heCkgew0KICAgICAgICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodiwgMCksIG1heCk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIHRvSGV4KHYpIHsNCiAgICAgICAgcmV0dXJuICIjIiArIHYubWFwKGZ1bmN0aW9uIChjKSB7DQogICAgICAgICAgICBjID0gY2xhbXAkMShNYXRoLnJvdW5kKGMpLCAyNTUpOw0KICAgICAgICAgICAgcmV0dXJuIChjIDwgMTYgPyAnMCcgOiAnJykgKyBjLnRvU3RyaW5nKDE2KTsNCiAgICAgICAgfSkuam9pbignJyk7DQogICAgfQoKICAgIHZhciBQYXJlbiA9IGZ1bmN0aW9uIChub2RlKSB7DQogICAgICAgIHRoaXMudmFsdWUgPSBub2RlOw0KICAgIH07DQogICAgUGFyZW4ucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdQYXJlbicsDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgb3V0cHV0LmFkZCgnKCcpOw0KICAgICAgICAgICAgdGhpcy52YWx1ZS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgIG91dHB1dC5hZGQoJyknKTsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgUGFyZW4odGhpcy52YWx1ZS5ldmFsKGNvbnRleHQpKTsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBfbm9TcGFjZUNvbWJpbmF0b3JzID0gew0KICAgICAgICAnJzogdHJ1ZSwNCiAgICAgICAgJyAnOiB0cnVlLA0KICAgICAgICAnfCc6IHRydWUNCiAgICB9Ow0KICAgIHZhciBDb21iaW5hdG9yID0gZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgIGlmICh2YWx1ZSA9PT0gJyAnKSB7DQogICAgICAgICAgICB0aGlzLnZhbHVlID0gJyAnOw0KICAgICAgICAgICAgdGhpcy5lbXB0eU9yV2hpdGVzcGFjZSA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUgPyB2YWx1ZS50cmltKCkgOiAnJzsNCiAgICAgICAgICAgIHRoaXMuZW1wdHlPcldoaXRlc3BhY2UgPSB0aGlzLnZhbHVlID09PSAnJzsNCiAgICAgICAgfQ0KICAgIH07DQogICAgQ29tYmluYXRvci5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ0NvbWJpbmF0b3InLA0KICAgICAgICBnZW5DU1M6IGZ1bmN0aW9uIChjb250ZXh0LCBvdXRwdXQpIHsNCiAgICAgICAgICAgIHZhciBzcGFjZU9yRW1wdHkgPSAoY29udGV4dC5jb21wcmVzcyB8fCBfbm9TcGFjZUNvbWJpbmF0b3JzW3RoaXMudmFsdWVdKSA/ICcnIDogJyAnOw0KICAgICAgICAgICAgb3V0cHV0LmFkZChzcGFjZU9yRW1wdHkgKyB0aGlzLnZhbHVlICsgc3BhY2VPckVtcHR5KTsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBFbGVtZW50ID0gZnVuY3Rpb24gKGNvbWJpbmF0b3IsIHZhbHVlLCBpc1ZhcmlhYmxlLCBpbmRleCwgY3VycmVudEZpbGVJbmZvLCB2aXNpYmlsaXR5SW5mbykgew0KICAgICAgICB0aGlzLmNvbWJpbmF0b3IgPSBjb21iaW5hdG9yIGluc3RhbmNlb2YgQ29tYmluYXRvciA/DQogICAgICAgICAgICBjb21iaW5hdG9yIDogbmV3IENvbWJpbmF0b3IoY29tYmluYXRvcik7DQogICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUudHJpbSgpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB0aGlzLnZhbHVlID0gJyc7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5pc1ZhcmlhYmxlID0gaXNWYXJpYWJsZTsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMuY29weVZpc2liaWxpdHlJbmZvKHZpc2liaWxpdHlJbmZvKTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5jb21iaW5hdG9yLCB0aGlzKTsNCiAgICB9Ow0KICAgIEVsZW1lbnQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdFbGVtZW50JywNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTsNCiAgICAgICAgICAgIHRoaXMuY29tYmluYXRvciA9IHZpc2l0b3IudmlzaXQodGhpcy5jb21iaW5hdG9yKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7DQogICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZpc2l0b3IudmlzaXQodmFsdWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBFbGVtZW50KHRoaXMuY29tYmluYXRvciwgdGhpcy52YWx1ZS5ldmFsID8gdGhpcy52YWx1ZS5ldmFsKGNvbnRleHQpIDogdGhpcy52YWx1ZSwgdGhpcy5pc1ZhcmlhYmxlLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSwgdGhpcy52aXNpYmlsaXR5SW5mbygpKTsNCiAgICAgICAgfSwNCiAgICAgICAgY2xvbmU6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRWxlbWVudCh0aGlzLmNvbWJpbmF0b3IsIHRoaXMudmFsdWUsIHRoaXMuaXNWYXJpYWJsZSwgdGhpcy5nZXRJbmRleCgpLCB0aGlzLmZpbGVJbmZvKCksIHRoaXMudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLnRvQ1NTKGNvbnRleHQpLCB0aGlzLmZpbGVJbmZvKCksIHRoaXMuZ2V0SW5kZXgoKSk7DQogICAgICAgIH0sDQogICAgICAgIHRvQ1NTOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgY29udGV4dCA9IGNvbnRleHQgfHwge307DQogICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlOw0KICAgICAgICAgICAgdmFyIGZpcnN0U2VsZWN0b3IgPSBjb250ZXh0LmZpcnN0U2VsZWN0b3I7DQogICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQYXJlbikgew0KICAgICAgICAgICAgICAgIC8vIHNlbGVjdG9yIGluIHBhcmVucyBzaG91bGQgbm90IGJlIGFmZmVjdGVkIGJ5IG91dGVyIHNlbGVjdG9yDQogICAgICAgICAgICAgICAgLy8gZmxhZ3MgKGJyZWFrcyBvbmx5IGludGVycG9sYXRlZCBzZWxlY3RvcnMgLSBzZWUgIzE5NzMpDQogICAgICAgICAgICAgICAgY29udGV4dC5maXJzdFNlbGVjdG9yID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9DU1MgPyB2YWx1ZS50b0NTUyhjb250ZXh0KSA6IHZhbHVlOw0KICAgICAgICAgICAgY29udGV4dC5maXJzdFNlbGVjdG9yID0gZmlyc3RTZWxlY3RvcjsNCiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycgJiYgdGhpcy5jb21iaW5hdG9yLnZhbHVlLmNoYXJBdCgwKSA9PT0gJyYnKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tYmluYXRvci50b0NTUyhjb250ZXh0KSArIHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIE1hdGgkMSA9IHsNCiAgICAgICAgQUxXQVlTOiAwLA0KICAgICAgICBQQVJFTlNfRElWSVNJT046IDEsDQogICAgICAgIFBBUkVOUzogMg0KICAgICAgICAvLyByZW1vdmVkIC0gU1RSSUNUX0xFR0FDWTogMw0KICAgIH07DQogICAgdmFyIFJld3JpdGVVcmxzID0gew0KICAgICAgICBPRkY6IDAsDQogICAgICAgIExPQ0FMOiAxLA0KICAgICAgICBBTEw6IDINCiAgICB9OwoKICAgIC8qKg0KICAgICAqIFJldHVybnMgdGhlIG9iamVjdCB0eXBlIG9mIHRoZSBnaXZlbiBwYXlsb2FkDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IHBheWxvYWQNCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfQ0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGdldFR5cGUocGF5bG9hZCkgew0KICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHBheWxvYWQpLnNsaWNlKDgsIC0xKTsNCiAgICB9DQogICAgLyoqDQogICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBwYXlsb2FkIGlzIGEgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3QgKGV4Y2x1ZGluZyBzcGVjaWFsIGNsYXNzZXMgb3Igb2JqZWN0cyB3aXRoIG90aGVyIHByb3RvdHlwZXMpDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IHBheWxvYWQNCiAgICAgKiBAcmV0dXJucyB7cGF5bG9hZCBpcyBSZWNvcmQ8c3RyaW5nLCBhbnk+fQ0KICAgICAqLw0KICAgIGZ1bmN0aW9uIGlzUGxhaW5PYmplY3QocGF5bG9hZCkgew0KICAgICAgICBpZiAoZ2V0VHlwZShwYXlsb2FkKSAhPT0gJ09iamVjdCcpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIHJldHVybiBwYXlsb2FkLmNvbnN0cnVjdG9yID09PSBPYmplY3QgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKHBheWxvYWQpID09PSBPYmplY3QucHJvdG90eXBlOw0KICAgIH0NCiAgICAvKioNCiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHBheWxvYWQgaXMgYW4gYXJyYXkNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7YW55fSBwYXlsb2FkDQogICAgICogQHJldHVybnMge3BheWxvYWQgaXMgYW55W119DQogICAgICovDQogICAgZnVuY3Rpb24gaXNBcnJheShwYXlsb2FkKSB7DQogICAgICAgIHJldHVybiBnZXRUeXBlKHBheWxvYWQpID09PSAnQXJyYXknOw0KICAgIH0KCiAgICAvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAgICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4NCiAgICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlDQogICAgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUNCiAgICBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KDQogICAgVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQ0KICAgIEtJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRUQNCiAgICBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLA0KICAgIE1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuDQoNCiAgICBTZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMNCiAgICBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQogICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8NCg0KICAgIGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkgew0KICAgICAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDsNCiAgICAgICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKQ0KICAgICAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspDQogICAgICAgICAgICAgICAgcltrXSA9IGFbal07DQogICAgICAgIHJldHVybiByOw0KICAgIH0KCiAgICBmdW5jdGlvbiBhc3NpZ25Qcm9wKGNhcnJ5LCBrZXksIG5ld1ZhbCwgb3JpZ2luYWxPYmplY3QsIGluY2x1ZGVOb25lbnVtZXJhYmxlKSB7DQogICAgICAgIHZhciBwcm9wVHlwZSA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwob3JpZ2luYWxPYmplY3QsIGtleSkNCiAgICAgICAgICAgID8gJ2VudW1lcmFibGUnDQogICAgICAgICAgICA6ICdub25lbnVtZXJhYmxlJzsNCiAgICAgICAgaWYgKHByb3BUeXBlID09PSAnZW51bWVyYWJsZScpDQogICAgICAgICAgICBjYXJyeVtrZXldID0gbmV3VmFsOw0KICAgICAgICBpZiAoaW5jbHVkZU5vbmVudW1lcmFibGUgJiYgcHJvcFR5cGUgPT09ICdub25lbnVtZXJhYmxlJykgew0KICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNhcnJ5LCBrZXksIHsNCiAgICAgICAgICAgICAgICB2YWx1ZTogbmV3VmFsLA0KICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLA0KICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLA0KICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfQ0KICAgIC8qKg0KICAgICAqIENvcHkgKGNsb25lKSBhbiBvYmplY3QgYW5kIGFsbCBpdHMgcHJvcHMgcmVjdXJzaXZlbHkgdG8gZ2V0IHJpZCBvZiBhbnkgcHJvcCByZWZlcmVuY2VkIG9mIHRoZSBvcmlnaW5hbCBvYmplY3QuIEFycmF5cyBhcmUgYWxzbyBjbG9uZWQsIGhvd2V2ZXIgb2JqZWN0cyBpbnNpZGUgYXJyYXlzIGFyZSBzdGlsbCBsaW5rZWQuDQogICAgICoNCiAgICAgKiBAZXhwb3J0DQogICAgICogQHRlbXBsYXRlIFQNCiAgICAgKiBAcGFyYW0ge1R9IHRhcmdldCBUYXJnZXQgY2FuIGJlIGFueXRoaW5nDQogICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9ucz17fV0gT3B0aW9ucyBjYW4gYmUgYHByb3BzYCBvciBgbm9uZW51bWVyYWJsZWANCiAgICAgKiBAcmV0dXJucyB7VH0gdGhlIHRhcmdldCB3aXRoIHJlcGxhY2VkIHZhbHVlcw0KICAgICAqIEBleHBvcnQNCiAgICAgKi8NCiAgICBmdW5jdGlvbiBjb3B5KHRhcmdldCwgb3B0aW9ucykgew0KICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfQ0KICAgICAgICBpZiAoaXNBcnJheSh0YXJnZXQpKQ0KICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5tYXAoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGNvcHkoaSwgb3B0aW9ucyk7IH0pOw0KICAgICAgICBpZiAoIWlzUGxhaW5PYmplY3QodGFyZ2V0KSkNCiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7DQogICAgICAgIHZhciBwcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRhcmdldCk7DQogICAgICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpOw0KICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheXMocHJvcHMsIHN5bWJvbHMpLnJlZHVjZShmdW5jdGlvbiAoY2FycnksIGtleSkgew0KICAgICAgICAgICAgaWYgKGlzQXJyYXkob3B0aW9ucy5wcm9wcykgJiYgIW9wdGlvbnMucHJvcHMuaW5jbHVkZXMoa2V5KSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBjYXJyeTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciB2YWwgPSB0YXJnZXRba2V5XTsNCiAgICAgICAgICAgIHZhciBuZXdWYWwgPSBjb3B5KHZhbCwgb3B0aW9ucyk7DQogICAgICAgICAgICBhc3NpZ25Qcm9wKGNhcnJ5LCBrZXksIG5ld1ZhbCwgdGFyZ2V0LCBvcHRpb25zLm5vbmVudW1lcmFibGUpOw0KICAgICAgICAgICAgcmV0dXJuIGNhcnJ5Ow0KICAgICAgICB9LCB7fSk7DQogICAgfQoKICAgIC8qIGpzaGludCBwcm90bzogdHJ1ZSAqLw0KICAgIGZ1bmN0aW9uIGdldExvY2F0aW9uKGluZGV4LCBpbnB1dFN0cmVhbSkgew0KICAgICAgICB2YXIgbiA9IGluZGV4ICsgMTsNCiAgICAgICAgdmFyIGxpbmUgPSBudWxsOw0KICAgICAgICB2YXIgY29sdW1uID0gLTE7DQogICAgICAgIHdoaWxlICgtLW4gPj0gMCAmJiBpbnB1dFN0cmVhbS5jaGFyQXQobikgIT09ICdcbicpIHsNCiAgICAgICAgICAgIGNvbHVtbisrOw0KICAgICAgICB9DQogICAgICAgIGlmICh0eXBlb2YgaW5kZXggPT09ICdudW1iZXInKSB7DQogICAgICAgICAgICBsaW5lID0gKGlucHV0U3RyZWFtLnNsaWNlKDAsIGluZGV4KS5tYXRjaCgvXG4vZykgfHwgJycpLmxlbmd0aDsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgbGluZTogbGluZSwNCiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uDQogICAgICAgIH07DQogICAgfQ0KICAgIGZ1bmN0aW9uIGNvcHlBcnJheShhcnIpIHsNCiAgICAgICAgdmFyIGk7DQogICAgICAgIHZhciBsZW5ndGggPSBhcnIubGVuZ3RoOw0KICAgICAgICB2YXIgY29weSA9IG5ldyBBcnJheShsZW5ndGgpOw0KICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGNvcHlbaV0gPSBhcnJbaV07DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGNvcHk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGNsb25lKG9iaikgew0KICAgICAgICB2YXIgY2xvbmVkID0ge307DQogICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7DQogICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7DQogICAgICAgICAgICAgICAgY2xvbmVkW3Byb3BdID0gb2JqW3Byb3BdOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBjbG9uZWQ7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGRlZmF1bHRzKG9iajEsIG9iajIpIHsNCiAgICAgICAgdmFyIG5ld09iaiA9IG9iajIgfHwge307DQogICAgICAgIGlmICghb2JqMi5fZGVmYXVsdHMpIHsNCiAgICAgICAgICAgIG5ld09iaiA9IHt9Ow0KICAgICAgICAgICAgdmFyIGRlZmF1bHRzXzEgPSBjb3B5KG9iajEpOw0KICAgICAgICAgICAgbmV3T2JqLl9kZWZhdWx0cyA9IGRlZmF1bHRzXzE7DQogICAgICAgICAgICB2YXIgY2xvbmVkID0gb2JqMiA/IGNvcHkob2JqMikgOiB7fTsNCiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obmV3T2JqLCBkZWZhdWx0c18xLCBjbG9uZWQpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBuZXdPYmo7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGNvcHlPcHRpb25zKG9iajEsIG9iajIpIHsNCiAgICAgICAgaWYgKG9iajIgJiYgb2JqMi5fZGVmYXVsdHMpIHsNCiAgICAgICAgICAgIHJldHVybiBvYmoyOw0KICAgICAgICB9DQogICAgICAgIHZhciBvcHRzID0gZGVmYXVsdHMob2JqMSwgb2JqMik7DQogICAgICAgIGlmIChvcHRzLnN0cmljdE1hdGgpIHsNCiAgICAgICAgICAgIG9wdHMubWF0aCA9IE1hdGgkMS5QQVJFTlM7DQogICAgICAgIH0NCiAgICAgICAgLy8gQmFjayBjb21wYXQgd2l0aCBjaGFuZ2VkIHJlbGF0aXZlVXJscyBvcHRpb24NCiAgICAgICAgaWYgKG9wdHMucmVsYXRpdmVVcmxzKSB7DQogICAgICAgICAgICBvcHRzLnJld3JpdGVVcmxzID0gUmV3cml0ZVVybHMuQUxMOw0KICAgICAgICB9DQogICAgICAgIGlmICh0eXBlb2Ygb3B0cy5tYXRoID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgc3dpdGNoIChvcHRzLm1hdGgudG9Mb3dlckNhc2UoKSkgew0KICAgICAgICAgICAgICAgIGNhc2UgJ2Fsd2F5cyc6DQogICAgICAgICAgICAgICAgICAgIG9wdHMubWF0aCA9IE1hdGgkMS5BTFdBWVM7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ3BhcmVucy1kaXZpc2lvbic6DQogICAgICAgICAgICAgICAgICAgIG9wdHMubWF0aCA9IE1hdGgkMS5QQVJFTlNfRElWSVNJT047DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmljdCc6DQogICAgICAgICAgICAgICAgY2FzZSAncGFyZW5zJzoNCiAgICAgICAgICAgICAgICAgICAgb3B0cy5tYXRoID0gTWF0aCQxLlBBUkVOUzsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAgICAgb3B0cy5tYXRoID0gTWF0aCQxLlBBUkVOUzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAodHlwZW9mIG9wdHMucmV3cml0ZVVybHMgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICBzd2l0Y2ggKG9wdHMucmV3cml0ZVVybHMudG9Mb3dlckNhc2UoKSkgew0KICAgICAgICAgICAgICAgIGNhc2UgJ29mZic6DQogICAgICAgICAgICAgICAgICAgIG9wdHMucmV3cml0ZVVybHMgPSBSZXdyaXRlVXJscy5PRkY7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ2xvY2FsJzoNCiAgICAgICAgICAgICAgICAgICAgb3B0cy5yZXdyaXRlVXJscyA9IFJld3JpdGVVcmxzLkxPQ0FMOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICdhbGwnOg0KICAgICAgICAgICAgICAgICAgICBvcHRzLnJld3JpdGVVcmxzID0gUmV3cml0ZVVybHMuQUxMOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gb3B0czsNCiAgICB9DQogICAgZnVuY3Rpb24gbWVyZ2Uob2JqMSwgb2JqMikgew0KICAgICAgICBmb3IgKHZhciBwcm9wIGluIG9iajIpIHsNCiAgICAgICAgICAgIGlmIChvYmoyLmhhc093blByb3BlcnR5KHByb3ApKSB7DQogICAgICAgICAgICAgICAgb2JqMVtwcm9wXSA9IG9iajJbcHJvcF07DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG9iajE7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGZsYXR0ZW5BcnJheShhcnIsIHJlc3VsdCkgew0KICAgICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsgcmVzdWx0ID0gW107IH0NCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpKyspIHsNCiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFycltpXTsNCiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgew0KICAgICAgICAgICAgICAgIGZsYXR0ZW5BcnJheSh2YWx1ZSwgcmVzdWx0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICB9CgogICAgdmFyIHV0aWxzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoewogICAgICAgIF9fcHJvdG9fXzogbnVsbCwKICAgICAgICBnZXRMb2NhdGlvbjogZ2V0TG9jYXRpb24sCiAgICAgICAgY29weUFycmF5OiBjb3B5QXJyYXksCiAgICAgICAgY2xvbmU6IGNsb25lLAogICAgICAgIGRlZmF1bHRzOiBkZWZhdWx0cywKICAgICAgICBjb3B5T3B0aW9uczogY29weU9wdGlvbnMsCiAgICAgICAgbWVyZ2U6IG1lcmdlLAogICAgICAgIGZsYXR0ZW5BcnJheTogZmxhdHRlbkFycmF5CiAgICB9KTsKCiAgICB2YXIgYW5vbnltb3VzRnVuYyA9IC8oPGFub255bW91cz58RnVuY3Rpb24pOihcZCspOihcZCspLzsNCiAgICAvKioNCiAgICAgKiBUaGlzIGlzIGEgY2VudHJhbGl6ZWQgY2xhc3Mgb2YgYW55IGVycm9yIHRoYXQgY291bGQgYmUgdGhyb3duIGludGVybmFsbHkgKG1vc3RseSBieSB0aGUgcGFyc2VyKS4NCiAgICAgKiBCZXNpZGVzIHN0YW5kYXJkIC5tZXNzYWdlIGl0IGtlZXBzIHNvbWUgYWRkaXRpb25hbCBkYXRhIGxpa2UgYSBwYXRoIHRvIHRoZSBmaWxlIHdoZXJlIHRoZSBlcnJvcg0KICAgICAqIG9jY3VycmVkIGFsb25nIHdpdGggbGluZSBhbmQgY29sdW1uIG51bWJlcnMuDQogICAgICoNCiAgICAgKiBAY2xhc3MNCiAgICAgKiBAZXh0ZW5kcyBFcnJvcg0KICAgICAqIEB0eXBlIHttb2R1bGUuTGVzc0Vycm9yfQ0KICAgICAqDQogICAgICogQHByb3Age3N0cmluZ30gdHlwZQ0KICAgICAqIEBwcm9wIHtzdHJpbmd9IGZpbGVuYW1lDQogICAgICogQHByb3Age251bWJlcn0gaW5kZXgNCiAgICAgKiBAcHJvcCB7bnVtYmVyfSBsaW5lDQogICAgICogQHByb3Age251bWJlcn0gY29sdW1uDQogICAgICogQHByb3Age251bWJlcn0gY2FsbExpbmUNCiAgICAgKiBAcHJvcCB7bnVtYmVyfSBjYWxsRXh0cmFjdA0KICAgICAqIEBwcm9wIHtzdHJpbmdbXX0gZXh0cmFjdA0KICAgICAqDQogICAgICogQHBhcmFtIHtPYmplY3R9IGUgICAgICAgICAgICAgIC0gQW4gZXJyb3Igb2JqZWN0IHRvIHdyYXAgYXJvdW5kIG9yIGp1c3QgYSBkZXNjcmlwdGl2ZSBvYmplY3QNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gZmlsZUNvbnRlbnRNYXAgLSBBbiBvYmplY3Qgd2l0aCBmaWxlIGNvbnRlbnRzIGluICdjb250ZW50cycgcHJvcGVydHkgKGxpa2UgaW1wb3J0TWFuYWdlcikgQHRvZG8gLSBtb3ZlIHRvIGZpbGVNYW5hZ2VyPw0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbY3VycmVudEZpbGVuYW1lXQ0KICAgICAqLw0KICAgIHZhciBMZXNzRXJyb3IgPSBmdW5jdGlvbiAoZSwgZmlsZUNvbnRlbnRNYXAsIGN1cnJlbnRGaWxlbmFtZSkgew0KICAgICAgICBFcnJvci5jYWxsKHRoaXMpOw0KICAgICAgICB2YXIgZmlsZW5hbWUgPSBlLmZpbGVuYW1lIHx8IGN1cnJlbnRGaWxlbmFtZTsNCiAgICAgICAgdGhpcy5tZXNzYWdlID0gZS5tZXNzYWdlOw0KICAgICAgICB0aGlzLnN0YWNrID0gZS5zdGFjazsNCiAgICAgICAgaWYgKGZpbGVDb250ZW50TWFwICYmIGZpbGVuYW1lKSB7DQogICAgICAgICAgICB2YXIgaW5wdXQgPSBmaWxlQ29udGVudE1hcC5jb250ZW50c1tmaWxlbmFtZV07DQogICAgICAgICAgICB2YXIgbG9jID0gZ2V0TG9jYXRpb24oZS5pbmRleCwgaW5wdXQpOw0KICAgICAgICAgICAgdmFyIGxpbmUgPSBsb2MubGluZTsNCiAgICAgICAgICAgIHZhciBjb2wgPSBsb2MuY29sdW1uOw0KICAgICAgICAgICAgdmFyIGNhbGxMaW5lID0gZS5jYWxsICYmIGdldExvY2F0aW9uKGUuY2FsbCwgaW5wdXQpLmxpbmU7DQogICAgICAgICAgICB2YXIgbGluZXMgPSBpbnB1dCA/IGlucHV0LnNwbGl0KCdcbicpIDogJyc7DQogICAgICAgICAgICB0aGlzLnR5cGUgPSBlLnR5cGUgfHwgJ1N5bnRheCc7DQogICAgICAgICAgICB0aGlzLmZpbGVuYW1lID0gZmlsZW5hbWU7DQogICAgICAgICAgICB0aGlzLmluZGV4ID0gZS5pbmRleDsNCiAgICAgICAgICAgIHRoaXMubGluZSA9IHR5cGVvZiBsaW5lID09PSAnbnVtYmVyJyA/IGxpbmUgKyAxIDogbnVsbDsNCiAgICAgICAgICAgIHRoaXMuY29sdW1uID0gY29sOw0KICAgICAgICAgICAgaWYgKCF0aGlzLmxpbmUgJiYgdGhpcy5zdGFjaykgew0KICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IHRoaXMuc3RhY2subWF0Y2goYW5vbnltb3VzRnVuYyk7DQogICAgICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgICAgICogV2UgaGF2ZSB0byBmaWd1cmUgb3V0IGhvdyB0aGlzIGVudmlyb25tZW50IHN0cmluZ2lmaWVzIGFub255bW91cyBmdW5jdGlvbnMNCiAgICAgICAgICAgICAgICAgKiBzbyB3ZSBjYW4gY29ycmVjdGx5IG1hcCBwbHVnaW4gZXJyb3JzLg0KICAgICAgICAgICAgICAgICAqDQogICAgICAgICAgICAgICAgICogTm90ZSwgaW4gTm9kZSA4LCB0aGUgb3V0cHV0IG9mIGFub255bW91cyBmdW5jcyB2YXJpZWQgYmFzZWQgb24gcGFyYW1ldGVycw0KICAgICAgICAgICAgICAgICAqIGJlaW5nIHByZXNlbnQgb3Igbm90LCBzbyB3ZSBpbmplY3QgZHVtbXkgcGFyYW1zLg0KICAgICAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgICAgIHZhciBmdW5jID0gbmV3IEZ1bmN0aW9uKCdhJywgJ3Rocm93IG5ldyBFcnJvcigpJyk7DQogICAgICAgICAgICAgICAgdmFyIGxpbmVBZGp1c3QgPSAwOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGZ1bmMoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gZS5zdGFjay5tYXRjaChhbm9ueW1vdXNGdW5jKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBwYXJzZUludChtYXRjaFsyXSk7DQogICAgICAgICAgICAgICAgICAgIGxpbmVBZGp1c3QgPSAxIC0gbGluZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGZvdW5kKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZFsyXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lID0gcGFyc2VJbnQoZm91bmRbMl0pICsgbGluZUFkanVzdDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmRbM10pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uID0gcGFyc2VJbnQoZm91bmRbM10pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5jYWxsTGluZSA9IGNhbGxMaW5lICsgMTsNCiAgICAgICAgICAgIHRoaXMuY2FsbEV4dHJhY3QgPSBsaW5lc1tjYWxsTGluZV07DQogICAgICAgICAgICB0aGlzLmV4dHJhY3QgPSBbDQogICAgICAgICAgICAgICAgbGluZXNbdGhpcy5saW5lIC0gMl0sDQogICAgICAgICAgICAgICAgbGluZXNbdGhpcy5saW5lIC0gMV0sDQogICAgICAgICAgICAgICAgbGluZXNbdGhpcy5saW5lXQ0KICAgICAgICAgICAgXTsNCiAgICAgICAgfQ0KICAgIH07DQogICAgaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAndW5kZWZpbmVkJykgew0KICAgICAgICB2YXIgRiA9IGZ1bmN0aW9uICgpIHsgfTsNCiAgICAgICAgRi5wcm90b3R5cGUgPSBFcnJvci5wcm90b3R5cGU7DQogICAgICAgIExlc3NFcnJvci5wcm90b3R5cGUgPSBuZXcgRigpOw0KICAgIH0NCiAgICBlbHNlIHsNCiAgICAgICAgTGVzc0Vycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTsNCiAgICB9DQogICAgTGVzc0Vycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExlc3NFcnJvcjsNCiAgICAvKioNCiAgICAgKiBBbiBvdmVycmlkZGVuIHZlcnNpb24gb2YgdGhlIGRlZmF1bHQgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZw0KICAgICAqIHdoaWNoIHVzZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiB0byBjcmVhdGUgYSBoZWxwZnVsIG1lc3NhZ2UuDQogICAgICoNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucw0KICAgICAqIEByZXR1cm5zIHtzdHJpbmd9DQogICAgICovDQogICAgTGVzc0Vycm9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7DQogICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9Ow0KICAgICAgICB2YXIgbWVzc2FnZSA9ICcnOw0KICAgICAgICB2YXIgZXh0cmFjdCA9IHRoaXMuZXh0cmFjdCB8fCBbXTsNCiAgICAgICAgdmFyIGVycm9yID0gW107DQogICAgICAgIHZhciBzdHlsaXplID0gZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gc3RyOyB9Ow0KICAgICAgICBpZiAob3B0aW9ucy5zdHlsaXplKSB7DQogICAgICAgICAgICB2YXIgdHlwZSA9IHR5cGVvZiBvcHRpb25zLnN0eWxpemU7DQogICAgICAgICAgICBpZiAodHlwZSAhPT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCJvcHRpb25zLnN0eWxpemUgc2hvdWxkIGJlIGEgZnVuY3Rpb24sIGdvdCBhICIgKyB0eXBlICsgIiEiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHN0eWxpemUgPSBvcHRpb25zLnN0eWxpemU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMubGluZSAhPT0gbnVsbCkgew0KICAgICAgICAgICAgaWYgKHR5cGVvZiBleHRyYWN0WzBdID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgICAgIGVycm9yLnB1c2goc3R5bGl6ZSh0aGlzLmxpbmUgLSAxICsgIiAiICsgZXh0cmFjdFswXSwgJ2dyZXknKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodHlwZW9mIGV4dHJhY3RbMV0gPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgdmFyIGVycm9yVHh0ID0gdGhpcy5saW5lICsgIiAiOw0KICAgICAgICAgICAgICAgIGlmIChleHRyYWN0WzFdKSB7DQogICAgICAgICAgICAgICAgICAgIGVycm9yVHh0ICs9IGV4dHJhY3RbMV0uc2xpY2UoMCwgdGhpcy5jb2x1bW4pICsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxpemUoc3R5bGl6ZShzdHlsaXplKGV4dHJhY3RbMV0uc3Vic3RyKHRoaXMuY29sdW1uLCAxKSwgJ2JvbGQnKSArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdFsxXS5zbGljZSh0aGlzLmNvbHVtbiArIDEpLCAncmVkJyksICdpbnZlcnNlJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVycm9yLnB1c2goZXJyb3JUeHQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHR5cGVvZiBleHRyYWN0WzJdID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgICAgIGVycm9yLnB1c2goc3R5bGl6ZSh0aGlzLmxpbmUgKyAxICsgIiAiICsgZXh0cmFjdFsyXSwgJ2dyZXknKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlcnJvciA9IGVycm9yLmpvaW4oJ1xuJykgKyBzdHlsaXplKCcnLCAncmVzZXQnKSArICJcbiI7DQogICAgICAgIH0NCiAgICAgICAgbWVzc2FnZSArPSBzdHlsaXplKHRoaXMudHlwZSArICJFcnJvcjogIiArIHRoaXMubWVzc2FnZSwgJ3JlZCcpOw0KICAgICAgICBpZiAodGhpcy5maWxlbmFtZSkgew0KICAgICAgICAgICAgbWVzc2FnZSArPSBzdHlsaXplKCcgaW4gJywgJ3JlZCcpICsgdGhpcy5maWxlbmFtZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5saW5lKSB7DQogICAgICAgICAgICBtZXNzYWdlICs9IHN0eWxpemUoIiBvbiBsaW5lICIgKyB0aGlzLmxpbmUgKyAiLCBjb2x1bW4gIiArICh0aGlzLmNvbHVtbiArIDEpICsgIjoiLCAnZ3JleScpOw0KICAgICAgICB9DQogICAgICAgIG1lc3NhZ2UgKz0gIlxuIiArIGVycm9yOw0KICAgICAgICBpZiAodGhpcy5jYWxsTGluZSkgew0KICAgICAgICAgICAgbWVzc2FnZSArPSBzdHlsaXplKCdmcm9tICcsICdyZWQnKSArICh0aGlzLmZpbGVuYW1lIHx8ICcnKSArICIvbiI7DQogICAgICAgICAgICBtZXNzYWdlICs9IHN0eWxpemUodGhpcy5jYWxsTGluZSwgJ2dyZXknKSArICIgIiArIHRoaXMuY2FsbEV4dHJhY3QgKyAiL24iOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBtZXNzYWdlOw0KICAgIH07CgogICAgdmFyIFNlbGVjdG9yID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBleHRlbmRMaXN0LCBjb25kaXRpb24sIGluZGV4LCBjdXJyZW50RmlsZUluZm8sIHZpc2liaWxpdHlJbmZvKSB7DQogICAgICAgIHRoaXMuZXh0ZW5kTGlzdCA9IGV4dGVuZExpc3Q7DQogICAgICAgIHRoaXMuY29uZGl0aW9uID0gY29uZGl0aW9uOw0KICAgICAgICB0aGlzLmV2YWxkQ29uZGl0aW9uID0gIWNvbmRpdGlvbjsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMuZWxlbWVudHMgPSB0aGlzLmdldEVsZW1lbnRzKGVsZW1lbnRzKTsNCiAgICAgICAgdGhpcy5taXhpbkVsZW1lbnRzXyA9IHVuZGVmaW5lZDsNCiAgICAgICAgdGhpcy5jb3B5VmlzaWJpbGl0eUluZm8odmlzaWJpbGl0eUluZm8pOw0KICAgICAgICB0aGlzLnNldFBhcmVudCh0aGlzLmVsZW1lbnRzLCB0aGlzKTsNCiAgICB9Ow0KICAgIFNlbGVjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnU2VsZWN0b3InLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50cykgew0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMgPSB2aXNpdG9yLnZpc2l0QXJyYXkodGhpcy5lbGVtZW50cyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy5leHRlbmRMaXN0KSB7DQogICAgICAgICAgICAgICAgdGhpcy5leHRlbmRMaXN0ID0gdmlzaXRvci52aXNpdEFycmF5KHRoaXMuZXh0ZW5kTGlzdCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy5jb25kaXRpb24pIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbmRpdGlvbiA9IHZpc2l0b3IudmlzaXQodGhpcy5jb25kaXRpb24pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjcmVhdGVEZXJpdmVkOiBmdW5jdGlvbiAoZWxlbWVudHMsIGV4dGVuZExpc3QsIGV2YWxkQ29uZGl0aW9uKSB7DQogICAgICAgICAgICBlbGVtZW50cyA9IHRoaXMuZ2V0RWxlbWVudHMoZWxlbWVudHMpOw0KICAgICAgICAgICAgdmFyIG5ld1NlbGVjdG9yID0gbmV3IFNlbGVjdG9yKGVsZW1lbnRzLCBleHRlbmRMaXN0IHx8IHRoaXMuZXh0ZW5kTGlzdCwgbnVsbCwgdGhpcy5nZXRJbmRleCgpLCB0aGlzLmZpbGVJbmZvKCksIHRoaXMudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgICAgICBuZXdTZWxlY3Rvci5ldmFsZENvbmRpdGlvbiA9IChldmFsZENvbmRpdGlvbiAhPSBudWxsKSA/IGV2YWxkQ29uZGl0aW9uIDogdGhpcy5ldmFsZENvbmRpdGlvbjsNCiAgICAgICAgICAgIG5ld1NlbGVjdG9yLm1lZGlhRW1wdHkgPSB0aGlzLm1lZGlhRW1wdHk7DQogICAgICAgICAgICByZXR1cm4gbmV3U2VsZWN0b3I7DQogICAgICAgIH0sDQogICAgICAgIGdldEVsZW1lbnRzOiBmdW5jdGlvbiAoZWxzKSB7DQogICAgICAgICAgICBpZiAoIWVscykgew0KICAgICAgICAgICAgICAgIHJldHVybiBbbmV3IEVsZW1lbnQoJycsICcmJywgZmFsc2UsIHRoaXMuX2luZGV4LCB0aGlzLl9maWxlSW5mbyldOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHR5cGVvZiBlbHMgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgdGhpcy5wYXJzZS5wYXJzZU5vZGUoZWxzLCBbJ3NlbGVjdG9yJ10sIHRoaXMuX2luZGV4LCB0aGlzLl9maWxlSW5mbywgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBMZXNzRXJyb3Ioew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBlcnIuaW5kZXgsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMucGFyc2UuaW1wb3J0cywgdGhpcy5fZmlsZUluZm8uZmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVscyA9IHJlc3VsdFswXS5lbGVtZW50czsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBlbHM7DQogICAgICAgIH0sDQogICAgICAgIGNyZWF0ZUVtcHR5U2VsZWN0b3JzOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgZWwgPSBuZXcgRWxlbWVudCgnJywgJyYnLCBmYWxzZSwgdGhpcy5faW5kZXgsIHRoaXMuX2ZpbGVJbmZvKSwgc2VscyA9IFtuZXcgU2VsZWN0b3IoW2VsXSwgbnVsbCwgbnVsbCwgdGhpcy5faW5kZXgsIHRoaXMuX2ZpbGVJbmZvKV07DQogICAgICAgICAgICBzZWxzWzBdLm1lZGlhRW1wdHkgPSB0cnVlOw0KICAgICAgICAgICAgcmV0dXJuIHNlbHM7DQogICAgICAgIH0sDQogICAgICAgIG1hdGNoOiBmdW5jdGlvbiAob3RoZXIpIHsNCiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHM7DQogICAgICAgICAgICB2YXIgbGVuID0gZWxlbWVudHMubGVuZ3RoOw0KICAgICAgICAgICAgdmFyIG9sZW47DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIG90aGVyID0gb3RoZXIubWl4aW5FbGVtZW50cygpOw0KICAgICAgICAgICAgb2xlbiA9IG90aGVyLmxlbmd0aDsNCiAgICAgICAgICAgIGlmIChvbGVuID09PSAwIHx8IGxlbiA8IG9sZW4pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBvbGVuOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzW2ldLnZhbHVlICE9PSBvdGhlcltpXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gb2xlbjsgLy8gcmV0dXJuIG51bWJlciBvZiBtYXRjaGVkIGVsZW1lbnRzDQogICAgICAgIH0sDQogICAgICAgIG1peGluRWxlbWVudHM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLm1peGluRWxlbWVudHNfKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWl4aW5FbGVtZW50c187DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLm1hcChmdW5jdGlvbiAodikgew0KICAgICAgICAgICAgICAgIHJldHVybiB2LmNvbWJpbmF0b3IudmFsdWUgKyAodi52YWx1ZS52YWx1ZSB8fCB2LnZhbHVlKTsNCiAgICAgICAgICAgIH0pLmpvaW4oJycpLm1hdGNoKC9bLCYjXCpcLlx3LV0oW1x3LV18KFxcLikpKi9nKTsNCiAgICAgICAgICAgIGlmIChlbGVtZW50cykgew0KICAgICAgICAgICAgICAgIGlmIChlbGVtZW50c1swXSA9PT0gJyYnKSB7DQogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLnNoaWZ0KCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgZWxlbWVudHMgPSBbXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAodGhpcy5taXhpbkVsZW1lbnRzXyA9IGVsZW1lbnRzKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNKdXN0UGFyZW50U2VsZWN0b3I6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiAhdGhpcy5tZWRpYUVtcHR5ICYmDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5sZW5ndGggPT09IDEgJiYNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzWzBdLnZhbHVlID09PSAnJicgJiYNCiAgICAgICAgICAgICAgICAodGhpcy5lbGVtZW50c1swXS5jb21iaW5hdG9yLnZhbHVlID09PSAnICcgfHwgdGhpcy5lbGVtZW50c1swXS5jb21iaW5hdG9yLnZhbHVlID09PSAnJyk7DQogICAgICAgIH0sDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgZXZhbGRDb25kaXRpb24gPSB0aGlzLmNvbmRpdGlvbiAmJiB0aGlzLmNvbmRpdGlvbi5ldmFsKGNvbnRleHQpOw0KICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50czsNCiAgICAgICAgICAgIHZhciBleHRlbmRMaXN0ID0gdGhpcy5leHRlbmRMaXN0Ow0KICAgICAgICAgICAgZWxlbWVudHMgPSBlbGVtZW50cyAmJiBlbGVtZW50cy5tYXAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUuZXZhbChjb250ZXh0KTsgfSk7DQogICAgICAgICAgICBleHRlbmRMaXN0ID0gZXh0ZW5kTGlzdCAmJiBleHRlbmRMaXN0Lm1hcChmdW5jdGlvbiAoZXh0ZW5kKSB7IHJldHVybiBleHRlbmQuZXZhbChjb250ZXh0KTsgfSk7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVEZXJpdmVkKGVsZW1lbnRzLCBleHRlbmRMaXN0LCBldmFsZENvbmRpdGlvbik7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgdmFyIGksIGVsZW1lbnQ7DQogICAgICAgICAgICBpZiAoKCFjb250ZXh0IHx8ICFjb250ZXh0LmZpcnN0U2VsZWN0b3IpICYmIHRoaXMuZWxlbWVudHNbMF0uY29tYmluYXRvci52YWx1ZSA9PT0gJycpIHsNCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKCcgJywgdGhpcy5maWxlSW5mbygpLCB0aGlzLmdldEluZGV4KCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuZWxlbWVudHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBlbGVtZW50ID0gdGhpcy5lbGVtZW50c1tpXTsNCiAgICAgICAgICAgICAgICBlbGVtZW50LmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBnZXRJc091dHB1dDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZhbGRDb25kaXRpb247DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHsNCiAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWYWx1ZSByZXF1aXJlcyBhbiBhcnJheSBhcmd1bWVudCcpOw0KICAgICAgICB9DQogICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsNCiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBbdmFsdWVdOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlOw0KICAgICAgICB9DQogICAgfTsNCiAgICBWYWx1ZS5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ1ZhbHVlJywNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmlzaXRvci52aXNpdEFycmF5KHRoaXMudmFsdWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVbMF0uZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVmFsdWUodGhpcy52YWx1ZS5tYXAoZnVuY3Rpb24gKHYpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICB9KSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy52YWx1ZS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHRoaXMudmFsdWVbaV0uZ2VuQ1NTKGNvbnRleHQsIG91dHB1dCk7DQogICAgICAgICAgICAgICAgaWYgKGkgKyAxIDwgdGhpcy52YWx1ZS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZCgoY29udGV4dCAmJiBjb250ZXh0LmNvbXByZXNzKSA/ICcsJyA6ICcsICcpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBLZXl3b3JkID0gZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsNCiAgICB9Ow0KICAgIEtleXdvcmQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdLZXl3b3JkJywNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gJyUnKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgeyB0eXBlOiAnU3ludGF4JywgbWVzc2FnZTogJ0ludmFsaWQgJSB3aXRob3V0IG51bWJlcicgfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG91dHB1dC5hZGQodGhpcy52YWx1ZSk7DQogICAgICAgIH0NCiAgICB9KTsNCiAgICBLZXl3b3JkLlRydWUgPSBuZXcgS2V5d29yZCgndHJ1ZScpOw0KICAgIEtleXdvcmQuRmFsc2UgPSBuZXcgS2V5d29yZCgnZmFsc2UnKTsKCiAgICB2YXIgQW5vbnltb3VzID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgY3VycmVudEZpbGVJbmZvLCBtYXBMaW5lcywgcnVsZXNldExpa2UsIHZpc2liaWxpdHlJbmZvKSB7DQogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMubWFwTGluZXMgPSBtYXBMaW5lczsNCiAgICAgICAgdGhpcy5ydWxlc2V0TGlrZSA9ICh0eXBlb2YgcnVsZXNldExpa2UgPT09ICd1bmRlZmluZWQnKSA/IGZhbHNlIDogcnVsZXNldExpa2U7DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5jb3B5VmlzaWJpbGl0eUluZm8odmlzaWJpbGl0eUluZm8pOw0KICAgIH07DQogICAgQW5vbnltb3VzLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnQW5vbnltb3VzJywNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXModGhpcy52YWx1ZSwgdGhpcy5faW5kZXgsIHRoaXMuX2ZpbGVJbmZvLCB0aGlzLm1hcExpbmVzLCB0aGlzLnJ1bGVzZXRMaWtlLCB0aGlzLnZpc2liaWxpdHlJbmZvKCkpOw0KICAgICAgICB9LA0KICAgICAgICBjb21wYXJlOiBmdW5jdGlvbiAob3RoZXIpIHsNCiAgICAgICAgICAgIHJldHVybiBvdGhlci50b0NTUyAmJiB0aGlzLnRvQ1NTKCkgPT09IG90aGVyLnRvQ1NTKCkgPyAwIDogdW5kZWZpbmVkOw0KICAgICAgICB9LA0KICAgICAgICBpc1J1bGVzZXRMaWtlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5ydWxlc2V0TGlrZTsNCiAgICAgICAgfSwNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICB0aGlzLm5vZGVWaXNpYmxlID0gQm9vbGVhbih0aGlzLnZhbHVlKTsNCiAgICAgICAgICAgIGlmICh0aGlzLm5vZGVWaXNpYmxlKSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLnZhbHVlLCB0aGlzLl9maWxlSW5mbywgdGhpcy5faW5kZXgsIHRoaXMubWFwTGluZXMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIE1BVEgkMSA9IE1hdGgkMTsNCiAgICBmdW5jdGlvbiBldmFsTmFtZShjb250ZXh0LCBuYW1lKSB7DQogICAgICAgIHZhciB2YWx1ZSA9ICcnOw0KICAgICAgICB2YXIgaTsNCiAgICAgICAgdmFyIG4gPSBuYW1lLmxlbmd0aDsNCiAgICAgICAgdmFyIG91dHB1dCA9IHsgYWRkOiBmdW5jdGlvbiAocykgeyB2YWx1ZSArPSBzOyB9IH07DQogICAgICAgIGZvciAoaSA9IDA7IGkgPCBuOyBpKyspIHsNCiAgICAgICAgICAgIG5hbWVbaV0uZXZhbChjb250ZXh0KS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdmFsdWU7DQogICAgfQ0KICAgIHZhciBEZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSwgaW1wb3J0YW50LCBtZXJnZSwgaW5kZXgsIGN1cnJlbnRGaWxlSW5mbywgaW5saW5lLCB2YXJpYWJsZSkgew0KICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOw0KICAgICAgICB0aGlzLnZhbHVlID0gKHZhbHVlIGluc3RhbmNlb2YgTm9kZSkgPyB2YWx1ZSA6IG5ldyBWYWx1ZShbdmFsdWUgPyBuZXcgQW5vbnltb3VzKHZhbHVlKSA6IG51bGxdKTsNCiAgICAgICAgdGhpcy5pbXBvcnRhbnQgPSBpbXBvcnRhbnQgPyAiICIgKyBpbXBvcnRhbnQudHJpbSgpIDogJyc7DQogICAgICAgIHRoaXMubWVyZ2UgPSBtZXJnZTsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMuaW5saW5lID0gaW5saW5lIHx8IGZhbHNlOw0KICAgICAgICB0aGlzLnZhcmlhYmxlID0gKHZhcmlhYmxlICE9PSB1bmRlZmluZWQpID8gdmFyaWFibGUNCiAgICAgICAgICAgIDogKG5hbWUuY2hhckF0ICYmIChuYW1lLmNoYXJBdCgwKSA9PT0gJ0AnKSk7DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy52YWx1ZSwgdGhpcyk7DQogICAgfTsNCiAgICBEZWNsYXJhdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ0RlY2xhcmF0aW9uJywNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBvdXRwdXQuYWRkKHRoaXMubmFtZSArIChjb250ZXh0LmNvbXByZXNzID8gJzonIDogJzogJyksIHRoaXMuZmlsZUluZm8oKSwgdGhpcy5nZXRJbmRleCgpKTsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgdGhpcy52YWx1ZS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgZS5pbmRleCA9IHRoaXMuX2luZGV4Ow0KICAgICAgICAgICAgICAgIGUuZmlsZW5hbWUgPSB0aGlzLl9maWxlSW5mby5maWxlbmFtZTsNCiAgICAgICAgICAgICAgICB0aHJvdyBlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLmltcG9ydGFudCArICgodGhpcy5pbmxpbmUgfHwgKGNvbnRleHQubGFzdFJ1bGUgJiYgY29udGV4dC5jb21wcmVzcykpID8gJycgOiAnOycpLCB0aGlzLl9maWxlSW5mbywgdGhpcy5faW5kZXgpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIG1hdGhCeXBhc3MgPSBmYWxzZSwgcHJldk1hdGgsIG5hbWUgPSB0aGlzLm5hbWUsIGV2YWxkVmFsdWUsIHZhcmlhYmxlID0gdGhpcy52YXJpYWJsZTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICAvLyBleHBhbmQgJ3ByaW1pdGl2ZScgbmFtZSBkaXJlY3RseSB0byBnZXQNCiAgICAgICAgICAgICAgICAvLyB0aGluZ3MgZmFzdGVyICh+MTAlIGZvciBiZW5jaG1hcmsubGVzcyk6DQogICAgICAgICAgICAgICAgbmFtZSA9IChuYW1lLmxlbmd0aCA9PT0gMSkgJiYgKG5hbWVbMF0gaW5zdGFuY2VvZiBLZXl3b3JkKSA/DQogICAgICAgICAgICAgICAgICAgIG5hbWVbMF0udmFsdWUgOiBldmFsTmFtZShjb250ZXh0LCBuYW1lKTsNCiAgICAgICAgICAgICAgICB2YXJpYWJsZSA9IGZhbHNlOyAvLyBuZXZlciB0cmVhdCBleHBhbmRlZCBpbnRlcnBvbGF0aW9uIGFzIG5ldyB2YXJpYWJsZSBuYW1lDQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBAdG9kbyByZW1vdmUgd2hlbiBwYXJlbnMtZGl2aXNpb24gaXMgZGVmYXVsdA0KICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdmb250JyAmJiBjb250ZXh0Lm1hdGggPT09IE1BVEgkMS5BTFdBWVMpIHsNCiAgICAgICAgICAgICAgICBtYXRoQnlwYXNzID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBwcmV2TWF0aCA9IGNvbnRleHQubWF0aDsNCiAgICAgICAgICAgICAgICBjb250ZXh0Lm1hdGggPSBNQVRIJDEuUEFSRU5TX0RJVklTSU9OOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb250ZXh0LmltcG9ydGFudFNjb3BlLnB1c2goe30pOw0KICAgICAgICAgICAgICAgIGV2YWxkVmFsdWUgPSB0aGlzLnZhbHVlLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgaWYgKCF0aGlzLnZhcmlhYmxlICYmIGV2YWxkVmFsdWUudHlwZSA9PT0gJ0RldGFjaGVkUnVsZXNldCcpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgeyBtZXNzYWdlOiAnUnVsZXNldHMgY2Fubm90IGJlIGV2YWx1YXRlZCBvbiBhIHByb3BlcnR5LicsDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5nZXRJbmRleCgpLCBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBpbXBvcnRhbnQgPSB0aGlzLmltcG9ydGFudDsNCiAgICAgICAgICAgICAgICB2YXIgaW1wb3J0YW50UmVzdWx0ID0gY29udGV4dC5pbXBvcnRhbnRTY29wZS5wb3AoKTsNCiAgICAgICAgICAgICAgICBpZiAoIWltcG9ydGFudCAmJiBpbXBvcnRhbnRSZXN1bHQuaW1wb3J0YW50KSB7DQogICAgICAgICAgICAgICAgICAgIGltcG9ydGFudCA9IGltcG9ydGFudFJlc3VsdC5pbXBvcnRhbnQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGVjbGFyYXRpb24obmFtZSwgZXZhbGRWYWx1ZSwgaW1wb3J0YW50LCB0aGlzLm1lcmdlLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSwgdGhpcy5pbmxpbmUsIHZhcmlhYmxlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlLmluZGV4ICE9PSAnbnVtYmVyJykgew0KICAgICAgICAgICAgICAgICAgICBlLmluZGV4ID0gdGhpcy5nZXRJbmRleCgpOw0KICAgICAgICAgICAgICAgICAgICBlLmZpbGVuYW1lID0gdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aHJvdyBlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG1hdGhCeXBhc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5tYXRoID0gcHJldk1hdGg7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBtYWtlSW1wb3J0YW50OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERlY2xhcmF0aW9uKHRoaXMubmFtZSwgdGhpcy52YWx1ZSwgJyFpbXBvcnRhbnQnLCB0aGlzLm1lcmdlLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSwgdGhpcy5pbmxpbmUpOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIGRlYnVnSW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgZnVuY3Rpb24gZGVidWdJbmZvKGNvbnRleHQsIGN0eCwgbGluZVNlcGFyYXRvcikgew0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICcnOw0KICAgICAgICAgICAgaWYgKGNvbnRleHQuZHVtcExpbmVOdW1iZXJzICYmICFjb250ZXh0LmNvbXByZXNzKSB7DQogICAgICAgICAgICAgICAgc3dpdGNoIChjb250ZXh0LmR1bXBMaW5lTnVtYmVycykgew0KICAgICAgICAgICAgICAgICAgICBjYXNlICdjb21tZW50cyc6DQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkZWJ1Z0luZm8uYXNDb21tZW50KGN0eCk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWVkaWFxdWVyeSc6DQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkZWJ1Z0luZm8uYXNNZWRpYVF1ZXJ5KGN0eCk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsJzoNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRlYnVnSW5mby5hc0NvbW1lbnQoY3R4KSArIChsaW5lU2VwYXJhdG9yIHx8ICcnKSArIGRlYnVnSW5mby5hc01lZGlhUXVlcnkoY3R4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0NCiAgICAgICAgZGVidWdJbmZvLmFzQ29tbWVudCA9IGZ1bmN0aW9uIChjdHgpIHsNCiAgICAgICAgICAgIHJldHVybiAiLyogbGluZSAiICsgY3R4LmRlYnVnSW5mby5saW5lTnVtYmVyICsgIiwgIiArIGN0eC5kZWJ1Z0luZm8uZmlsZU5hbWUgKyAiICovXG4iOw0KICAgICAgICB9Ow0KICAgICAgICBkZWJ1Z0luZm8uYXNNZWRpYVF1ZXJ5ID0gZnVuY3Rpb24gKGN0eCkgew0KICAgICAgICAgICAgdmFyIGZpbGVuYW1lV2l0aFByb3RvY29sID0gY3R4LmRlYnVnSW5mby5maWxlTmFtZTsNCiAgICAgICAgICAgIGlmICghL15bYS16XSs6XC9cLy9pLnRlc3QoZmlsZW5hbWVXaXRoUHJvdG9jb2wpKSB7DQogICAgICAgICAgICAgICAgZmlsZW5hbWVXaXRoUHJvdG9jb2wgPSAiZmlsZTovLyIgKyBmaWxlbmFtZVdpdGhQcm90b2NvbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAiQG1lZGlhIC1zYXNzLWRlYnVnLWluZm97ZmlsZW5hbWV7Zm9udC1mYW1pbHk6IiArIGZpbGVuYW1lV2l0aFByb3RvY29sLnJlcGxhY2UoLyhbLjpcL1xcXSkvZywgZnVuY3Rpb24gKGEpIHsNCiAgICAgICAgICAgICAgICBpZiAoYSA9PSAnXFwnKSB7DQogICAgICAgICAgICAgICAgICAgIGEgPSAnXC8nOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gIlxcIiArIGE7DQogICAgICAgICAgICB9KSArICJ9bGluZXtmb250LWZhbWlseTpcXDAwMDAzIiArIGN0eC5kZWJ1Z0luZm8ubGluZU51bWJlciArICJ9fVxuIjsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIGRlYnVnSW5mbzsNCiAgICB9KCkpOwoKICAgIHZhciBDb21tZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBpc0xpbmVDb21tZW50LCBpbmRleCwgY3VycmVudEZpbGVJbmZvKSB7DQogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsNCiAgICAgICAgdGhpcy5pc0xpbmVDb21tZW50ID0gaXNMaW5lQ29tbWVudDsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICB9Ow0KICAgIENvbW1lbnQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdDb21tZW50JywNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBpZiAodGhpcy5kZWJ1Z0luZm8pIHsNCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKGRlYnVnSW5mbyhjb250ZXh0LCB0aGlzKSwgdGhpcy5maWxlSW5mbygpLCB0aGlzLmdldEluZGV4KCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLnZhbHVlKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNTaWxlbnQ6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgaXNDb21wcmVzc2VkID0gY29udGV4dC5jb21wcmVzcyAmJiB0aGlzLnZhbHVlWzJdICE9PSAnISc7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5pc0xpbmVDb21tZW50IHx8IGlzQ29tcHJlc3NlZDsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBjb250ZXh0cyA9IHt9Ow0KICAgIHZhciBjb3B5RnJvbU9yaWdpbmFsID0gZnVuY3Rpb24gY29weUZyb21PcmlnaW5hbChvcmlnaW5hbCwgZGVzdGluYXRpb24sIHByb3BlcnRpZXNUb0NvcHkpIHsNCiAgICAgICAgaWYgKCFvcmlnaW5hbCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcGVydGllc1RvQ29weS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaWYgKG9yaWdpbmFsLmhhc093blByb3BlcnR5KHByb3BlcnRpZXNUb0NvcHlbaV0pKSB7DQogICAgICAgICAgICAgICAgZGVzdGluYXRpb25bcHJvcGVydGllc1RvQ29weVtpXV0gPSBvcmlnaW5hbFtwcm9wZXJ0aWVzVG9Db3B5W2ldXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH07DQogICAgLyoNCiAgICAgcGFyc2UgaXMgdXNlZCB3aGlsc3QgcGFyc2luZw0KICAgICAqLw0KICAgIHZhciBwYXJzZUNvcHlQcm9wZXJ0aWVzID0gWw0KICAgICAgICAvLyBvcHRpb25zDQogICAgICAgICdwYXRocycsDQogICAgICAgICdyZXdyaXRlVXJscycsDQogICAgICAgICdyb290cGF0aCcsDQogICAgICAgICdzdHJpY3RJbXBvcnRzJywNCiAgICAgICAgJ2luc2VjdXJlJywNCiAgICAgICAgJ2R1bXBMaW5lTnVtYmVycycsDQogICAgICAgICdjb21wcmVzcycsDQogICAgICAgICdzeW5jSW1wb3J0JywNCiAgICAgICAgJ2NodW5rSW5wdXQnLA0KICAgICAgICAnbWltZScsDQogICAgICAgICd1c2VGaWxlQ2FjaGUnLA0KICAgICAgICAvLyBjb250ZXh0DQogICAgICAgICdwcm9jZXNzSW1wb3J0cycsDQogICAgICAgIC8vIFVzZWQgYnkgdGhlIGltcG9ydCBtYW5hZ2VyIHRvIHN0b3AgbXVsdGlwbGUgaW1wb3J0IHZpc2l0b3JzIGJlaW5nIGNyZWF0ZWQuDQogICAgICAgICdwbHVnaW5NYW5hZ2VyJyAvLyBVc2VkIGFzIHRoZSBwbHVnaW4gbWFuYWdlciBmb3IgdGhlIHNlc3Npb24NCiAgICBdOw0KICAgIGNvbnRleHRzLlBhcnNlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsNCiAgICAgICAgY29weUZyb21PcmlnaW5hbChvcHRpb25zLCB0aGlzLCBwYXJzZUNvcHlQcm9wZXJ0aWVzKTsNCiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhdGhzID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgdGhpcy5wYXRocyA9IFt0aGlzLnBhdGhzXTsNCiAgICAgICAgfQ0KICAgIH07DQogICAgdmFyIGV2YWxDb3B5UHJvcGVydGllcyA9IFsNCiAgICAgICAgJ3BhdGhzJywNCiAgICAgICAgJ2NvbXByZXNzJywNCiAgICAgICAgJ21hdGgnLA0KICAgICAgICAnc3RyaWN0VW5pdHMnLA0KICAgICAgICAnc291cmNlTWFwJywNCiAgICAgICAgJ2ltcG9ydE11bHRpcGxlJywNCiAgICAgICAgJ3VybEFyZ3MnLA0KICAgICAgICAnamF2YXNjcmlwdEVuYWJsZWQnLA0KICAgICAgICAncGx1Z2luTWFuYWdlcicsDQogICAgICAgICdpbXBvcnRhbnRTY29wZScsDQogICAgICAgICdyZXdyaXRlVXJscycgLy8gb3B0aW9uIC0gd2hldGhlciB0byBhZGp1c3QgVVJMJ3MgdG8gYmUgcmVsYXRpdmUNCiAgICBdOw0KICAgIGNvbnRleHRzLkV2YWwgPSBmdW5jdGlvbiAob3B0aW9ucywgZnJhbWVzKSB7DQogICAgICAgIGNvcHlGcm9tT3JpZ2luYWwob3B0aW9ucywgdGhpcywgZXZhbENvcHlQcm9wZXJ0aWVzKTsNCiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhdGhzID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgdGhpcy5wYXRocyA9IFt0aGlzLnBhdGhzXTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmZyYW1lcyA9IGZyYW1lcyB8fCBbXTsNCiAgICAgICAgdGhpcy5pbXBvcnRhbnRTY29wZSA9IHRoaXMuaW1wb3J0YW50U2NvcGUgfHwgW107DQogICAgfTsNCiAgICBjb250ZXh0cy5FdmFsLnByb3RvdHlwZS5lbnRlckNhbGMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmICghdGhpcy5jYWxjU3RhY2spIHsNCiAgICAgICAgICAgIHRoaXMuY2FsY1N0YWNrID0gW107DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5jYWxjU3RhY2sucHVzaCh0cnVlKTsNCiAgICAgICAgdGhpcy5pbkNhbGMgPSB0cnVlOw0KICAgIH07DQogICAgY29udGV4dHMuRXZhbC5wcm90b3R5cGUuZXhpdENhbGMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHRoaXMuY2FsY1N0YWNrLnBvcCgpOw0KICAgICAgICBpZiAoIXRoaXMuY2FsY1N0YWNrLmxlbmd0aCkgew0KICAgICAgICAgICAgdGhpcy5pbkNhbGMgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH07DQogICAgY29udGV4dHMuRXZhbC5wcm90b3R5cGUuaW5QYXJlbnRoZXNpcyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKCF0aGlzLnBhcmVuc1N0YWNrKSB7DQogICAgICAgICAgICB0aGlzLnBhcmVuc1N0YWNrID0gW107DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5wYXJlbnNTdGFjay5wdXNoKHRydWUpOw0KICAgIH07DQogICAgY29udGV4dHMuRXZhbC5wcm90b3R5cGUub3V0T2ZQYXJlbnRoZXNpcyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdGhpcy5wYXJlbnNTdGFjay5wb3AoKTsNCiAgICB9Ow0KICAgIGNvbnRleHRzLkV2YWwucHJvdG90eXBlLmluQ2FsYyA9IGZhbHNlOw0KICAgIGNvbnRleHRzLkV2YWwucHJvdG90eXBlLm1hdGhPbiA9IHRydWU7DQogICAgY29udGV4dHMuRXZhbC5wcm90b3R5cGUuaXNNYXRoT24gPSBmdW5jdGlvbiAob3ApIHsNCiAgICAgICAgaWYgKCF0aGlzLm1hdGhPbikgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmIChvcCA9PT0gJy8nICYmIHRoaXMubWF0aCAhPT0gTWF0aCQxLkFMV0FZUyAmJiAoIXRoaXMucGFyZW5zU3RhY2sgfHwgIXRoaXMucGFyZW5zU3RhY2subGVuZ3RoKSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLm1hdGggPiBNYXRoJDEuUEFSRU5TX0RJVklTSU9OKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnNTdGFjayAmJiB0aGlzLnBhcmVuc1N0YWNrLmxlbmd0aDsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9Ow0KICAgIGNvbnRleHRzLkV2YWwucHJvdG90eXBlLnBhdGhSZXF1aXJlc1Jld3JpdGUgPSBmdW5jdGlvbiAocGF0aCkgew0KICAgICAgICB2YXIgaXNSZWxhdGl2ZSA9IHRoaXMucmV3cml0ZVVybHMgPT09IFJld3JpdGVVcmxzLkxPQ0FMID8gaXNQYXRoTG9jYWxSZWxhdGl2ZSA6IGlzUGF0aFJlbGF0aXZlOw0KICAgICAgICByZXR1cm4gaXNSZWxhdGl2ZShwYXRoKTsNCiAgICB9Ow0KICAgIGNvbnRleHRzLkV2YWwucHJvdG90eXBlLnJld3JpdGVQYXRoID0gZnVuY3Rpb24gKHBhdGgsIHJvb3RwYXRoKSB7DQogICAgICAgIHZhciBuZXdQYXRoOw0KICAgICAgICByb290cGF0aCA9IHJvb3RwYXRoIHx8ICcnOw0KICAgICAgICBuZXdQYXRoID0gdGhpcy5ub3JtYWxpemVQYXRoKHJvb3RwYXRoICsgcGF0aCk7DQogICAgICAgIC8vIElmIGEgcGF0aCB3YXMgZXhwbGljaXQgcmVsYXRpdmUgYW5kIHRoZSByb290cGF0aCB3YXMgbm90IGFuIGFic29sdXRlIHBhdGgNCiAgICAgICAgLy8gd2UgbXVzdCBlbnN1cmUgdGhhdCB0aGUgbmV3IHBhdGggaXMgYWxzbyBleHBsaWNpdCByZWxhdGl2ZS4NCiAgICAgICAgaWYgKGlzUGF0aExvY2FsUmVsYXRpdmUocGF0aCkgJiYNCiAgICAgICAgICAgIGlzUGF0aFJlbGF0aXZlKHJvb3RwYXRoKSAmJg0KICAgICAgICAgICAgaXNQYXRoTG9jYWxSZWxhdGl2ZShuZXdQYXRoKSA9PT0gZmFsc2UpIHsNCiAgICAgICAgICAgIG5ld1BhdGggPSAiLi8iICsgbmV3UGF0aDsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmV3UGF0aDsNCiAgICB9Ow0KICAgIGNvbnRleHRzLkV2YWwucHJvdG90eXBlLm5vcm1hbGl6ZVBhdGggPSBmdW5jdGlvbiAocGF0aCkgew0KICAgICAgICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcvJykucmV2ZXJzZSgpOw0KICAgICAgICB2YXIgc2VnbWVudDsNCiAgICAgICAgcGF0aCA9IFtdOw0KICAgICAgICB3aGlsZSAoc2VnbWVudHMubGVuZ3RoICE9PSAwKSB7DQogICAgICAgICAgICBzZWdtZW50ID0gc2VnbWVudHMucG9wKCk7DQogICAgICAgICAgICBzd2l0Y2ggKHNlZ21lbnQpIHsNCiAgICAgICAgICAgICAgICBjYXNlICcuJzoNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSAnLi4nOg0KICAgICAgICAgICAgICAgICAgICBpZiAoKHBhdGgubGVuZ3RoID09PSAwKSB8fCAocGF0aFtwYXRoLmxlbmd0aCAtIDFdID09PSAnLi4nKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKHNlZ21lbnQpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5wb3AoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICBwYXRoLnB1c2goc2VnbWVudCk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBwYXRoLmpvaW4oJy8nKTsNCiAgICB9Ow0KICAgIGZ1bmN0aW9uIGlzUGF0aFJlbGF0aXZlKHBhdGgpIHsNCiAgICAgICAgcmV0dXJuICEvXig/OlthLXotXSs6fFwvfCMpL2kudGVzdChwYXRoKTsNCiAgICB9DQogICAgZnVuY3Rpb24gaXNQYXRoTG9jYWxSZWxhdGl2ZShwYXRoKSB7DQogICAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy4nOw0KICAgIH0NCiAgICAvLyB0b2RvIC0gZG8gdGhlIHNhbWUgZm9yIHRoZSB0b0NTUyA/CgogICAgZnVuY3Rpb24gbWFrZVJlZ2lzdHJ5KGJhc2UpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIF9kYXRhOiB7fSwNCiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24gKG5hbWUsIGZ1bmMpIHsNCiAgICAgICAgICAgICAgICAvLyBwcmVjYXV0aW9uYXJ5IGNhc2UgY29udmVyc2lvbiwgYXMgbGF0ZXIgcXVlcnlpbmcgb2YNCiAgICAgICAgICAgICAgICAvLyB0aGUgcmVnaXN0cnkgYnkgZnVuY3Rpb24tY2FsbGVyIHVzZXMgbG93ZXIgY2FzZSBhcyB3ZWxsLg0KICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuX2RhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIDsNCiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhW25hbWVdID0gZnVuYzsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBhZGRNdWx0aXBsZTogZnVuY3Rpb24gKGZ1bmN0aW9ucykgew0KICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZnVuY3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7DQogICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZChuYW1lLCBmdW5jdGlvbnNbbmFtZV0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKG5hbWUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YVtuYW1lXSB8fCAoYmFzZSAmJiBiYXNlLmdldChuYW1lKSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZ2V0TG9jYWxGdW5jdGlvbnM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBpbmhlcml0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VSZWdpc3RyeSh0aGlzKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChiYXNlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VSZWdpc3RyeShiYXNlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICB9DQogICAgdmFyIGZ1bmN0aW9uUmVnaXN0cnkgPSBtYWtlUmVnaXN0cnkobnVsbCk7CgogICAgdmFyIGRlZmF1bHRGdW5jID0gew0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgdiA9IHRoaXMudmFsdWVfOw0KICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmVycm9yXzsNCiAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh2ICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdiA/IEtleXdvcmQuVHJ1ZSA6IEtleXdvcmQuRmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiAodikgew0KICAgICAgICAgICAgdGhpcy52YWx1ZV8gPSB2Ow0KICAgICAgICB9LA0KICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgIHRoaXMuZXJyb3JfID0gZTsNCiAgICAgICAgfSwNCiAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHRoaXMudmFsdWVfID0gdGhpcy5lcnJvcl8gPSBudWxsOw0KICAgICAgICB9DQogICAgfTsKCiAgICB2YXIgUnVsZXNldCA9IGZ1bmN0aW9uIChzZWxlY3RvcnMsIHJ1bGVzLCBzdHJpY3RJbXBvcnRzLCB2aXNpYmlsaXR5SW5mbykgew0KICAgICAgICB0aGlzLnNlbGVjdG9ycyA9IHNlbGVjdG9yczsNCiAgICAgICAgdGhpcy5ydWxlcyA9IHJ1bGVzOw0KICAgICAgICB0aGlzLl9sb29rdXBzID0ge307DQogICAgICAgIHRoaXMuX3ZhcmlhYmxlcyA9IG51bGw7DQogICAgICAgIHRoaXMuX3Byb3BlcnRpZXMgPSBudWxsOw0KICAgICAgICB0aGlzLnN0cmljdEltcG9ydHMgPSBzdHJpY3RJbXBvcnRzOw0KICAgICAgICB0aGlzLmNvcHlWaXNpYmlsaXR5SW5mbyh2aXNpYmlsaXR5SW5mbyk7DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5zZWxlY3RvcnMsIHRoaXMpOw0KICAgICAgICB0aGlzLnNldFBhcmVudCh0aGlzLnJ1bGVzLCB0aGlzKTsNCiAgICB9Ow0KICAgIFJ1bGVzZXQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdSdWxlc2V0JywNCiAgICAgICAgaXNSdWxlc2V0OiB0cnVlLA0KICAgICAgICBpc1J1bGVzZXRMaWtlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICBpZiAodGhpcy5wYXRocykgew0KICAgICAgICAgICAgICAgIHRoaXMucGF0aHMgPSB2aXNpdG9yLnZpc2l0QXJyYXkodGhpcy5wYXRocywgdHJ1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmICh0aGlzLnNlbGVjdG9ycykgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0b3JzID0gdmlzaXRvci52aXNpdEFycmF5KHRoaXMuc2VsZWN0b3JzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLnJ1bGVzICYmIHRoaXMucnVsZXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlcyA9IHZpc2l0b3IudmlzaXRBcnJheSh0aGlzLnJ1bGVzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciBzZWxlY3RvcnM7DQogICAgICAgICAgICB2YXIgc2VsQ250Ow0KICAgICAgICAgICAgdmFyIHNlbGVjdG9yOw0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICB2YXIgaGFzVmFyaWFibGU7DQogICAgICAgICAgICB2YXIgaGFzT25lUGFzc2luZ1NlbGVjdG9yID0gZmFsc2U7DQogICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RvcnMgJiYgKHNlbENudCA9IHRoaXMuc2VsZWN0b3JzLmxlbmd0aCkpIHsNCiAgICAgICAgICAgICAgICBzZWxlY3RvcnMgPSBuZXcgQXJyYXkoc2VsQ250KTsNCiAgICAgICAgICAgICAgICBkZWZhdWx0RnVuYy5lcnJvcih7DQogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdTeW50YXgnLA0KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaXQgaXMgY3VycmVudGx5IG9ubHkgYWxsb3dlZCBpbiBwYXJhbWV0cmljIG1peGluIGd1YXJkcywnDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNlbENudDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gdGhpcy5zZWxlY3RvcnNbaV0uZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzZWxlY3Rvci5lbGVtZW50cy5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yLmVsZW1lbnRzW2pdLmlzVmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNWYXJpYWJsZSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JzW2ldID0gc2VsZWN0b3I7DQogICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rvci5ldmFsZENvbmRpdGlvbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgaGFzT25lUGFzc2luZ1NlbGVjdG9yID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoaGFzVmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHRvUGFyc2VTZWxlY3RvcnMgPSBuZXcgQXJyYXkoc2VsQ250KTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNlbENudDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA9IHNlbGVjdG9yc1tpXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRvUGFyc2VTZWxlY3RvcnNbaV0gPSBzZWxlY3Rvci50b0NTUyhjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlLnBhcnNlTm9kZSh0b1BhcnNlU2VsZWN0b3JzLmpvaW4oJywnKSwgWyJzZWxlY3RvcnMiXSwgc2VsZWN0b3JzWzBdLmdldEluZGV4KCksIHNlbGVjdG9yc1swXS5maWxlSW5mbygpLCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcnMgPSBmbGF0dGVuQXJyYXkocmVzdWx0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRlZmF1bHRGdW5jLnJlc2V0KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBoYXNPbmVQYXNzaW5nU2VsZWN0b3IgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHJ1bGVzID0gdGhpcy5ydWxlcyA/IGNvcHlBcnJheSh0aGlzLnJ1bGVzKSA6IG51bGw7DQogICAgICAgICAgICB2YXIgcnVsZXNldCA9IG5ldyBSdWxlc2V0KHNlbGVjdG9ycywgcnVsZXMsIHRoaXMuc3RyaWN0SW1wb3J0cywgdGhpcy52aXNpYmlsaXR5SW5mbygpKTsNCiAgICAgICAgICAgIHZhciBydWxlOw0KICAgICAgICAgICAgdmFyIHN1YlJ1bGU7DQogICAgICAgICAgICBydWxlc2V0Lm9yaWdpbmFsUnVsZXNldCA9IHRoaXM7DQogICAgICAgICAgICBydWxlc2V0LnJvb3QgPSB0aGlzLnJvb3Q7DQogICAgICAgICAgICBydWxlc2V0LmZpcnN0Um9vdCA9IHRoaXMuZmlyc3RSb290Ow0KICAgICAgICAgICAgcnVsZXNldC5hbGxvd0ltcG9ydHMgPSB0aGlzLmFsbG93SW1wb3J0czsNCiAgICAgICAgICAgIGlmICh0aGlzLmRlYnVnSW5mbykgew0KICAgICAgICAgICAgICAgIHJ1bGVzZXQuZGVidWdJbmZvID0gdGhpcy5kZWJ1Z0luZm87DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIWhhc09uZVBhc3NpbmdTZWxlY3Rvcikgew0KICAgICAgICAgICAgICAgIHJ1bGVzLmxlbmd0aCA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBpbmhlcml0IGEgZnVuY3Rpb24gcmVnaXN0cnkgZnJvbSB0aGUgZnJhbWVzIHN0YWNrIHdoZW4gcG9zc2libGU7DQogICAgICAgICAgICAvLyBvdGhlcndpc2UgZnJvbSB0aGUgZ2xvYmFsIHJlZ2lzdHJ5DQogICAgICAgICAgICBydWxlc2V0LmZ1bmN0aW9uUmVnaXN0cnkgPSAoZnVuY3Rpb24gKGZyYW1lcykgew0KICAgICAgICAgICAgICAgIHZhciBpID0gMDsNCiAgICAgICAgICAgICAgICB2YXIgbiA9IGZyYW1lcy5sZW5ndGg7DQogICAgICAgICAgICAgICAgdmFyIGZvdW5kOw0KICAgICAgICAgICAgICAgIGZvciAoOyBpICE9PSBuOyArK2kpIHsNCiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBmcmFtZXNbaV0uZnVuY3Rpb25SZWdpc3RyeTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uUmVnaXN0cnk7DQogICAgICAgICAgICB9KGNvbnRleHQuZnJhbWVzKSkuaW5oZXJpdCgpOw0KICAgICAgICAgICAgLy8gcHVzaCB0aGUgY3VycmVudCBydWxlc2V0IHRvIHRoZSBmcmFtZXMgc3RhY2sNCiAgICAgICAgICAgIHZhciBjdHhGcmFtZXMgPSBjb250ZXh0LmZyYW1lczsNCiAgICAgICAgICAgIGN0eEZyYW1lcy51bnNoaWZ0KHJ1bGVzZXQpOw0KICAgICAgICAgICAgLy8gY3VycnJlbnQgc2VsZWN0b3JzDQogICAgICAgICAgICB2YXIgY3R4U2VsZWN0b3JzID0gY29udGV4dC5zZWxlY3RvcnM7DQogICAgICAgICAgICBpZiAoIWN0eFNlbGVjdG9ycykgew0KICAgICAgICAgICAgICAgIGNvbnRleHQuc2VsZWN0b3JzID0gY3R4U2VsZWN0b3JzID0gW107DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjdHhTZWxlY3RvcnMudW5zaGlmdCh0aGlzLnNlbGVjdG9ycyk7DQogICAgICAgICAgICAvLyBFdmFsdWF0ZSBpbXBvcnRzDQogICAgICAgICAgICBpZiAocnVsZXNldC5yb290IHx8IHJ1bGVzZXQuYWxsb3dJbXBvcnRzIHx8ICFydWxlc2V0LnN0cmljdEltcG9ydHMpIHsNCiAgICAgICAgICAgICAgICBydWxlc2V0LmV2YWxJbXBvcnRzKGNvbnRleHQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGZyYW1lcyBhcm91bmQgbWl4aW4gZGVmaW5pdGlvbnMsDQogICAgICAgICAgICAvLyBzbyB0aGV5IGNhbiBiZSBldmFsdWF0ZWQgbGlrZSBjbG9zdXJlcyB3aGVuIHRoZSB0aW1lIGNvbWVzLg0KICAgICAgICAgICAgdmFyIHJzUnVsZXMgPSBydWxlc2V0LnJ1bGVzOw0KICAgICAgICAgICAgZm9yIChpID0gMDsgKHJ1bGUgPSByc1J1bGVzW2ldKTsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKHJ1bGUuZXZhbEZpcnN0KSB7DQogICAgICAgICAgICAgICAgICAgIHJzUnVsZXNbaV0gPSBydWxlLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIG1lZGlhQmxvY2tDb3VudCA9IChjb250ZXh0Lm1lZGlhQmxvY2tzICYmIGNvbnRleHQubWVkaWFCbG9ja3MubGVuZ3RoKSB8fCAwOw0KICAgICAgICAgICAgLy8gRXZhbHVhdGUgbWl4aW4gY2FsbHMuDQogICAgICAgICAgICBmb3IgKGkgPSAwOyAocnVsZSA9IHJzUnVsZXNbaV0pOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAocnVsZS50eXBlID09PSAnTWl4aW5DYWxsJykgew0KICAgICAgICAgICAgICAgICAgICAvKiBqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSAqLw0KICAgICAgICAgICAgICAgICAgICBydWxlcyA9IHJ1bGUuZXZhbChjb250ZXh0KS5maWx0ZXIoZnVuY3Rpb24gKHIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgociBpbnN0YW5jZW9mIERlY2xhcmF0aW9uKSAmJiByLnZhcmlhYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90IHBvbGx1dGUgdGhlIHNjb3BlIGlmIHRoZSB2YXJpYWJsZSBpcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFscmVhZHkgdGhlcmUuIGNvbnNpZGVyIHJldHVybmluZyBmYWxzZSBoZXJlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0IHdlIG5lZWQgYSB3YXkgdG8gInJldHVybiIgdmFyaWFibGUgZnJvbSBtaXhpbnMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShydWxlc2V0LnZhcmlhYmxlKHIubmFtZSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICByc1J1bGVzLnNwbGljZS5hcHBseShyc1J1bGVzLCBbaSwgMV0uY29uY2F0KHJ1bGVzKSk7DQogICAgICAgICAgICAgICAgICAgIGkgKz0gcnVsZXMubGVuZ3RoIC0gMTsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXNldC5yZXNldENhY2hlKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJ1bGUudHlwZSA9PT0gJ1ZhcmlhYmxlQ2FsbCcpIHsNCiAgICAgICAgICAgICAgICAgICAgLyoganNoaW50IGxvb3BmdW5jOnRydWUgKi8NCiAgICAgICAgICAgICAgICAgICAgcnVsZXMgPSBydWxlLmV2YWwoY29udGV4dCkucnVsZXMuZmlsdGVyKGZ1bmN0aW9uIChyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHIgaW5zdGFuY2VvZiBEZWNsYXJhdGlvbikgJiYgci52YXJpYWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBwb2xsdXRlIHRoZSBzY29wZSBhdCBhbGwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIHJzUnVsZXMuc3BsaWNlLmFwcGx5KHJzUnVsZXMsIFtpLCAxXS5jb25jYXQocnVsZXMpKTsNCiAgICAgICAgICAgICAgICAgICAgaSArPSBydWxlcy5sZW5ndGggLSAxOw0KICAgICAgICAgICAgICAgICAgICBydWxlc2V0LnJlc2V0Q2FjaGUoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBFdmFsdWF0ZSBldmVyeXRoaW5nIGVsc2UNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IChydWxlID0gcnNSdWxlc1tpXSk7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmICghcnVsZS5ldmFsRmlyc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgcnNSdWxlc1tpXSA9IHJ1bGUgPSBydWxlLmV2YWwgPyBydWxlLmV2YWwoY29udGV4dCkgOiBydWxlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIEV2YWx1YXRlIGV2ZXJ5dGhpbmcgZWxzZQ0KICAgICAgICAgICAgZm9yIChpID0gMDsgKHJ1bGUgPSByc1J1bGVzW2ldKTsgaSsrKSB7DQogICAgICAgICAgICAgICAgLy8gZm9yIHJ1bGVzZXRzLCBjaGVjayBpZiBpdCBpcyBhIGNzcyBndWFyZCBhbmQgY2FuIGJlIHJlbW92ZWQNCiAgICAgICAgICAgICAgICBpZiAocnVsZSBpbnN0YW5jZW9mIFJ1bGVzZXQgJiYgcnVsZS5zZWxlY3RvcnMgJiYgcnVsZS5zZWxlY3RvcnMubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGl0IGNhbiBiZSBmb2xkZWQgaW4gKGUuZy4gJiB3aGVyZSkNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUuc2VsZWN0b3JzWzBdICYmIHJ1bGUuc2VsZWN0b3JzWzBdLmlzSnVzdFBhcmVudFNlbGVjdG9yKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJzUnVsZXMuc3BsaWNlKGktLSwgMSk7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgKHN1YlJ1bGUgPSBydWxlLnJ1bGVzW2pdKTsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YlJ1bGUgaW5zdGFuY2VvZiBOb2RlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlJ1bGUuY29weVZpc2liaWxpdHlJbmZvKHJ1bGUudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHN1YlJ1bGUgaW5zdGFuY2VvZiBEZWNsYXJhdGlvbikgfHwgIXN1YlJ1bGUudmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJzUnVsZXMuc3BsaWNlKCsraSwgMCwgc3ViUnVsZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBQb3AgdGhlIHN0YWNrDQogICAgICAgICAgICBjdHhGcmFtZXMuc2hpZnQoKTsNCiAgICAgICAgICAgIGN0eFNlbGVjdG9ycy5zaGlmdCgpOw0KICAgICAgICAgICAgaWYgKGNvbnRleHQubWVkaWFCbG9ja3MpIHsNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSBtZWRpYUJsb2NrQ291bnQ7IGkgPCBjb250ZXh0Lm1lZGlhQmxvY2tzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQubWVkaWFCbG9ja3NbaV0uYnViYmxlU2VsZWN0b3JzKHNlbGVjdG9ycyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJ1bGVzZXQ7DQogICAgICAgIH0sDQogICAgICAgIGV2YWxJbXBvcnRzOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHJ1bGVzID0gdGhpcy5ydWxlczsNCiAgICAgICAgICAgIHZhciBpOw0KICAgICAgICAgICAgdmFyIGltcG9ydFJ1bGVzOw0KICAgICAgICAgICAgaWYgKCFydWxlcykgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmIChydWxlc1tpXS50eXBlID09PSAnSW1wb3J0Jykgew0KICAgICAgICAgICAgICAgICAgICBpbXBvcnRSdWxlcyA9IHJ1bGVzW2ldLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbXBvcnRSdWxlcyAmJiAoaW1wb3J0UnVsZXMubGVuZ3RoIHx8IGltcG9ydFJ1bGVzLmxlbmd0aCA9PT0gMCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzLnNwbGljZS5hcHBseShydWxlcywgW2ksIDFdLmNvbmNhdChpbXBvcnRSdWxlcykpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaSArPSBpbXBvcnRSdWxlcy5sZW5ndGggLSAxOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXMuc3BsaWNlKGksIDEsIGltcG9ydFJ1bGVzKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0Q2FjaGUoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIG1ha2VJbXBvcnRhbnQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUnVsZXNldCh0aGlzLnNlbGVjdG9ycywgdGhpcy5ydWxlcy5tYXAoZnVuY3Rpb24gKHIpIHsNCiAgICAgICAgICAgICAgICBpZiAoci5tYWtlSW1wb3J0YW50KSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByLm1ha2VJbXBvcnRhbnQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pLCB0aGlzLnN0cmljdEltcG9ydHMsIHRoaXMudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICB9LA0KICAgICAgICBtYXRjaEFyZ3M6IGZ1bmN0aW9uIChhcmdzKSB7DQogICAgICAgICAgICByZXR1cm4gIWFyZ3MgfHwgYXJncy5sZW5ndGggPT09IDA7DQogICAgICAgIH0sDQogICAgICAgIC8vIGxldHMgeW91IGNhbGwgYSBjc3Mgc2VsZWN0b3Igd2l0aCBhIGd1YXJkDQogICAgICAgIG1hdGNoQ29uZGl0aW9uOiBmdW5jdGlvbiAoYXJncywgY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIGxhc3RTZWxlY3RvciA9IHRoaXMuc2VsZWN0b3JzW3RoaXMuc2VsZWN0b3JzLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgaWYgKCFsYXN0U2VsZWN0b3IuZXZhbGRDb25kaXRpb24pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAobGFzdFNlbGVjdG9yLmNvbmRpdGlvbiAmJg0KICAgICAgICAgICAgICAgICFsYXN0U2VsZWN0b3IuY29uZGl0aW9uLmV2YWwobmV3IGNvbnRleHRzLkV2YWwoY29udGV4dCwgY29udGV4dC5mcmFtZXMpKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9LA0KICAgICAgICByZXNldENhY2hlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0aGlzLl9ydWxlc2V0cyA9IG51bGw7DQogICAgICAgICAgICB0aGlzLl92YXJpYWJsZXMgPSBudWxsOw0KICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllcyA9IG51bGw7DQogICAgICAgICAgICB0aGlzLl9sb29rdXBzID0ge307DQogICAgICAgIH0sDQogICAgICAgIHZhcmlhYmxlczogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKCF0aGlzLl92YXJpYWJsZXMpIHsNCiAgICAgICAgICAgICAgICB0aGlzLl92YXJpYWJsZXMgPSAhdGhpcy5ydWxlcyA/IHt9IDogdGhpcy5ydWxlcy5yZWR1Y2UoZnVuY3Rpb24gKGhhc2gsIHIpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBEZWNsYXJhdGlvbiAmJiByLnZhcmlhYmxlID09PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBoYXNoW3IubmFtZV0gPSByOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gZXZhbHVhdGluZyB2YXJpYWJsZXMgaW4gYW4gaW1wb3J0IHN0YXRlbWVudCwgaW1wb3J0cyBoYXZlIG5vdCBiZWVuIGV2YWwnZA0KICAgICAgICAgICAgICAgICAgICAvLyBzbyB3ZSBuZWVkIHRvIGdvIGluc2lkZSBpbXBvcnQgc3RhdGVtZW50cy4NCiAgICAgICAgICAgICAgICAgICAgLy8gZ3VhcmQgYWdhaW5zdCByb290IGJlaW5nIGEgc3RyaW5nIChpbiB0aGUgY2FzZSBvZiBpbmxpbmVkIGxlc3MpDQogICAgICAgICAgICAgICAgICAgIGlmIChyLnR5cGUgPT09ICdJbXBvcnQnICYmIHIucm9vdCAmJiByLnJvb3QudmFyaWFibGVzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFycyA9IHIucm9vdC52YXJpYWJsZXMoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG5hbWVfMSBpbiB2YXJzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhcnMuaGFzT3duUHJvcGVydHkobmFtZV8xKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoW25hbWVfMV0gPSByLnJvb3QudmFyaWFibGUobmFtZV8xKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc2g7DQogICAgICAgICAgICAgICAgfSwge30pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZhcmlhYmxlczsNCiAgICAgICAgfSwNCiAgICAgICAgcHJvcGVydGllczogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKCF0aGlzLl9wcm9wZXJ0aWVzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllcyA9ICF0aGlzLnJ1bGVzID8ge30gOiB0aGlzLnJ1bGVzLnJlZHVjZShmdW5jdGlvbiAoaGFzaCwgcikgew0KICAgICAgICAgICAgICAgICAgICBpZiAociBpbnN0YW5jZW9mIERlY2xhcmF0aW9uICYmIHIudmFyaWFibGUgIT09IHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lXzIgPSAoci5uYW1lLmxlbmd0aCA9PT0gMSkgJiYgKHIubmFtZVswXSBpbnN0YW5jZW9mIEtleXdvcmQpID8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLm5hbWVbMF0udmFsdWUgOiByLm5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBQcm9wZXJ0aWVzIGRvbid0IG92ZXJ3cml0ZSBhcyB0aGV5IGNhbiBtZXJnZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNoWyIkIiArIG5hbWVfMl0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoWyIkIiArIG5hbWVfMl0gPSBbcl07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNoWyIkIiArIG5hbWVfMl0ucHVzaChyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFzaDsNCiAgICAgICAgICAgICAgICB9LCB7fSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvcGVydGllczsNCiAgICAgICAgfSwNCiAgICAgICAgdmFyaWFibGU6IGZ1bmN0aW9uIChuYW1lKSB7DQogICAgICAgICAgICB2YXIgZGVjbCA9IHRoaXMudmFyaWFibGVzKClbbmFtZV07DQogICAgICAgICAgICBpZiAoZGVjbCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlVmFsdWUoZGVjbCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHByb3BlcnR5OiBmdW5jdGlvbiAobmFtZSkgew0KICAgICAgICAgICAgdmFyIGRlY2wgPSB0aGlzLnByb3BlcnRpZXMoKVtuYW1lXTsNCiAgICAgICAgICAgIGlmIChkZWNsKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VWYWx1ZShkZWNsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgbGFzdERlY2xhcmF0aW9uOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5ydWxlcy5sZW5ndGg7IGkgPiAwOyBpLS0pIHsNCiAgICAgICAgICAgICAgICB2YXIgZGVjbCA9IHRoaXMucnVsZXNbaSAtIDFdOw0KICAgICAgICAgICAgICAgIGlmIChkZWNsIGluc3RhbmNlb2YgRGVjbGFyYXRpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VWYWx1ZShkZWNsKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHBhcnNlVmFsdWU6IGZ1bmN0aW9uICh0b1BhcnNlKSB7DQogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7DQogICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2Zvcm1EZWNsYXJhdGlvbihkZWNsKSB7DQogICAgICAgICAgICAgICAgaWYgKGRlY2wudmFsdWUgaW5zdGFuY2VvZiBBbm9ueW1vdXMgJiYgIWRlY2wucGFyc2VkKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVjbC52YWx1ZS52YWx1ZSA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2UucGFyc2VOb2RlKGRlY2wudmFsdWUudmFsdWUsIFsndmFsdWUnLCAnaW1wb3J0YW50J10sIGRlY2wudmFsdWUuZ2V0SW5kZXgoKSwgZGVjbC5maWxlSW5mbygpLCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2wucGFyc2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsLnZhbHVlID0gcmVzdWx0WzBdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsLmltcG9ydGFudCA9IHJlc3VsdFsxXSB8fCAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjbC5wYXJzZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZGVjbC5wYXJzZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWNsOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlY2w7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRvUGFyc2UpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybURlY2xhcmF0aW9uLmNhbGwoc2VsZiwgdG9QYXJzZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB2YXIgbm9kZXNfMSA9IFtdOw0KICAgICAgICAgICAgICAgIHRvUGFyc2UuZm9yRWFjaChmdW5jdGlvbiAobikgew0KICAgICAgICAgICAgICAgICAgICBub2Rlc18xLnB1c2godHJhbnNmb3JtRGVjbGFyYXRpb24uY2FsbChzZWxmLCBuKSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVzXzE7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHJ1bGVzZXRzOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBpZiAoIXRoaXMucnVsZXMpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gW107DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgZmlsdFJ1bGVzID0gW107DQogICAgICAgICAgICB2YXIgcnVsZXMgPSB0aGlzLnJ1bGVzOw0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICB2YXIgcnVsZTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IChydWxlID0gcnVsZXNbaV0pOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAocnVsZS5pc1J1bGVzZXQpIHsNCiAgICAgICAgICAgICAgICAgICAgZmlsdFJ1bGVzLnB1c2gocnVsZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGZpbHRSdWxlczsNCiAgICAgICAgfSwNCiAgICAgICAgcHJlcGVuZFJ1bGU6IGZ1bmN0aW9uIChydWxlKSB7DQogICAgICAgICAgICB2YXIgcnVsZXMgPSB0aGlzLnJ1bGVzOw0KICAgICAgICAgICAgaWYgKHJ1bGVzKSB7DQogICAgICAgICAgICAgICAgcnVsZXMudW5zaGlmdChydWxlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMucnVsZXMgPSBbcnVsZV07DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnNldFBhcmVudChydWxlLCB0aGlzKTsNCiAgICAgICAgfSwNCiAgICAgICAgZmluZDogZnVuY3Rpb24gKHNlbGVjdG9yLCBzZWxmLCBmaWx0ZXIpIHsNCiAgICAgICAgICAgIHNlbGYgPSBzZWxmIHx8IHRoaXM7DQogICAgICAgICAgICB2YXIgcnVsZXMgPSBbXTsNCiAgICAgICAgICAgIHZhciBtYXRjaDsNCiAgICAgICAgICAgIHZhciBmb3VuZE1peGluczsNCiAgICAgICAgICAgIHZhciBrZXkgPSBzZWxlY3Rvci50b0NTUygpOw0KICAgICAgICAgICAgaWYgKGtleSBpbiB0aGlzLl9sb29rdXBzKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvb2t1cHNba2V5XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMucnVsZXNldHMoKS5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7DQogICAgICAgICAgICAgICAgaWYgKHJ1bGUgIT09IHNlbGYpIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBydWxlLnNlbGVjdG9ycy5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSBzZWxlY3Rvci5tYXRjaChydWxlLnNlbGVjdG9yc1tqXSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3IuZWxlbWVudHMubGVuZ3RoID4gbWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIgfHwgZmlsdGVyKHJ1bGUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZE1peGlucyA9IHJ1bGUuZmluZChuZXcgU2VsZWN0b3Ioc2VsZWN0b3IuZWxlbWVudHMuc2xpY2UobWF0Y2gpKSwgc2VsZiwgZmlsdGVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm91bmRNaXhpbnMubGVuZ3RoOyArK2kpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZE1peGluc1tpXS5wYXRoLnB1c2gocnVsZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShydWxlcywgZm91bmRNaXhpbnMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcy5wdXNoKHsgcnVsZTogcnVsZSwgcGF0aDogW10gfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aGlzLl9sb29rdXBzW2tleV0gPSBydWxlczsNCiAgICAgICAgICAgIHJldHVybiBydWxlczsNCiAgICAgICAgfSwNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIHZhciBqOw0KICAgICAgICAgICAgdmFyIGNoYXJzZXRSdWxlTm9kZXMgPSBbXTsNCiAgICAgICAgICAgIHZhciBydWxlTm9kZXMgPSBbXTsNCiAgICAgICAgICAgIHZhciAvLyBMaW5lIG51bWJlciBkZWJ1Z2dpbmcNCiAgICAgICAgICAgIGRlYnVnSW5mbyQxOw0KICAgICAgICAgICAgdmFyIHJ1bGU7DQogICAgICAgICAgICB2YXIgcGF0aDsNCiAgICAgICAgICAgIGNvbnRleHQudGFiTGV2ZWwgPSAoY29udGV4dC50YWJMZXZlbCB8fCAwKTsNCiAgICAgICAgICAgIGlmICghdGhpcy5yb290KSB7DQogICAgICAgICAgICAgICAgY29udGV4dC50YWJMZXZlbCsrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHRhYlJ1bGVTdHIgPSBjb250ZXh0LmNvbXByZXNzID8gJycgOiBBcnJheShjb250ZXh0LnRhYkxldmVsICsgMSkuam9pbignICAnKTsNCiAgICAgICAgICAgIHZhciB0YWJTZXRTdHIgPSBjb250ZXh0LmNvbXByZXNzID8gJycgOiBBcnJheShjb250ZXh0LnRhYkxldmVsKS5qb2luKCcgICcpOw0KICAgICAgICAgICAgdmFyIHNlcDsNCiAgICAgICAgICAgIHZhciBjaGFyc2V0Tm9kZUluZGV4ID0gMDsNCiAgICAgICAgICAgIHZhciBpbXBvcnROb2RlSW5kZXggPSAwOw0KICAgICAgICAgICAgZm9yIChpID0gMDsgKHJ1bGUgPSB0aGlzLnJ1bGVzW2ldKTsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKHJ1bGUgaW5zdGFuY2VvZiBDb21tZW50KSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbXBvcnROb2RlSW5kZXggPT09IGkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydE5vZGVJbmRleCsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJ1bGVOb2Rlcy5wdXNoKHJ1bGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChydWxlLmlzQ2hhcnNldCAmJiBydWxlLmlzQ2hhcnNldCgpKSB7DQogICAgICAgICAgICAgICAgICAgIHJ1bGVOb2Rlcy5zcGxpY2UoY2hhcnNldE5vZGVJbmRleCwgMCwgcnVsZSk7DQogICAgICAgICAgICAgICAgICAgIGNoYXJzZXROb2RlSW5kZXgrKzsNCiAgICAgICAgICAgICAgICAgICAgaW1wb3J0Tm9kZUluZGV4Kys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJ1bGUudHlwZSA9PT0gJ0ltcG9ydCcpIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZU5vZGVzLnNwbGljZShpbXBvcnROb2RlSW5kZXgsIDAsIHJ1bGUpOw0KICAgICAgICAgICAgICAgICAgICBpbXBvcnROb2RlSW5kZXgrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJ1bGVOb2Rlcy5wdXNoKHJ1bGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJ1bGVOb2RlcyA9IGNoYXJzZXRSdWxlTm9kZXMuY29uY2F0KHJ1bGVOb2Rlcyk7DQogICAgICAgICAgICAvLyBJZiB0aGlzIGlzIHRoZSByb290IG5vZGUsIHdlIGRvbid0IHJlbmRlcg0KICAgICAgICAgICAgLy8gYSBzZWxlY3Rvciwgb3Ige30uDQogICAgICAgICAgICBpZiAoIXRoaXMucm9vdCkgew0KICAgICAgICAgICAgICAgIGRlYnVnSW5mbyQxID0gZGVidWdJbmZvKGNvbnRleHQsIHRoaXMsIHRhYlNldFN0cik7DQogICAgICAgICAgICAgICAgaWYgKGRlYnVnSW5mbyQxKSB7DQogICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoZGVidWdJbmZvJDEpOw0KICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHRhYlNldFN0cik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBwYXRocyA9IHRoaXMucGF0aHM7DQogICAgICAgICAgICAgICAgdmFyIHBhdGhDbnQgPSBwYXRocy5sZW5ndGg7DQogICAgICAgICAgICAgICAgdmFyIHBhdGhTdWJDbnQgPSB2b2lkIDA7DQogICAgICAgICAgICAgICAgc2VwID0gY29udGV4dC5jb21wcmVzcyA/ICcsJyA6ICgiLFxuIiArIHRhYlNldFN0cik7DQogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBhdGhDbnQ7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBwYXRoID0gcGF0aHNbaV07DQogICAgICAgICAgICAgICAgICAgIGlmICghKHBhdGhTdWJDbnQgPSBwYXRoLmxlbmd0aCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZChzZXApOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlyc3RTZWxlY3RvciA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIHBhdGhbMF0uZ2VuQ1NTKGNvbnRleHQsIG91dHB1dCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlyc3RTZWxlY3RvciA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAxOyBqIDwgcGF0aFN1YkNudDsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXRoW2pdLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoKGNvbnRleHQuY29tcHJlc3MgPyAneycgOiAnIHtcbicpICsgdGFiUnVsZVN0cik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBDb21waWxlIHJ1bGVzIGFuZCBydWxlc2V0cw0KICAgICAgICAgICAgZm9yIChpID0gMDsgKHJ1bGUgPSBydWxlTm9kZXNbaV0pOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAoaSArIDEgPT09IHJ1bGVOb2Rlcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5sYXN0UnVsZSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TGFzdFJ1bGUgPSBjb250ZXh0Lmxhc3RSdWxlOw0KICAgICAgICAgICAgICAgIGlmIChydWxlLmlzUnVsZXNldExpa2UocnVsZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5sYXN0UnVsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAocnVsZS5nZW5DU1MpIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAocnVsZS52YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHJ1bGUudmFsdWUudG9TdHJpbmcoKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNvbnRleHQubGFzdFJ1bGUgPSBjdXJyZW50TGFzdFJ1bGU7DQogICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0Lmxhc3RSdWxlICYmIHJ1bGUuaXNWaXNpYmxlKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZChjb250ZXh0LmNvbXByZXNzID8gJycgOiAoIlxuIiArIHRhYlJ1bGVTdHIpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGFzdFJ1bGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIXRoaXMucm9vdCkgew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoKGNvbnRleHQuY29tcHJlc3MgPyAnfScgOiAiXG4iICsgdGFiU2V0U3RyICsgIn0iKSk7DQogICAgICAgICAgICAgICAgY29udGV4dC50YWJMZXZlbC0tOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFvdXRwdXQuaXNFbXB0eSgpICYmICFjb250ZXh0LmNvbXByZXNzICYmIHRoaXMuZmlyc3RSb290KSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCgnXG4nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgam9pblNlbGVjdG9yczogZnVuY3Rpb24gKHBhdGhzLCBjb250ZXh0LCBzZWxlY3RvcnMpIHsNCiAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgc2VsZWN0b3JzLmxlbmd0aDsgcysrKSB7DQogICAgICAgICAgICAgICAgdGhpcy5qb2luU2VsZWN0b3IocGF0aHMsIGNvbnRleHQsIHNlbGVjdG9yc1tzXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGpvaW5TZWxlY3RvcjogZnVuY3Rpb24gKHBhdGhzLCBjb250ZXh0LCBzZWxlY3Rvcikgew0KICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlUGFyZW50aGVzaXMoZWxlbWVudHNUb1Bhaywgb3JpZ2luYWxFbGVtZW50KSB7DQogICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VtZW50UGFyZW4sIGo7DQogICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzVG9QYWsubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50UGFyZW4gPSBuZXcgUGFyZW4oZWxlbWVudHNUb1Bha1swXSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5zaWRlUGFyZW50ID0gbmV3IEFycmF5KGVsZW1lbnRzVG9QYWsubGVuZ3RoKTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGVsZW1lbnRzVG9QYWsubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGluc2lkZVBhcmVudFtqXSA9IG5ldyBFbGVtZW50KG51bGwsIGVsZW1lbnRzVG9QYWtbal0sIG9yaWdpbmFsRWxlbWVudC5pc1ZhcmlhYmxlLCBvcmlnaW5hbEVsZW1lbnQuX2luZGV4LCBvcmlnaW5hbEVsZW1lbnQuX2ZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudFBhcmVuID0gbmV3IFBhcmVuKG5ldyBTZWxlY3RvcihpbnNpZGVQYXJlbnQpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2VtZW50UGFyZW47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVTZWxlY3Rvcihjb250YWluZWRFbGVtZW50LCBvcmlnaW5hbEVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCwgc2VsZWN0b3I7DQogICAgICAgICAgICAgICAgZWxlbWVudCA9IG5ldyBFbGVtZW50KG51bGwsIGNvbnRhaW5lZEVsZW1lbnQsIG9yaWdpbmFsRWxlbWVudC5pc1ZhcmlhYmxlLCBvcmlnaW5hbEVsZW1lbnQuX2luZGV4LCBvcmlnaW5hbEVsZW1lbnQuX2ZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICBzZWxlY3RvciA9IG5ldyBTZWxlY3RvcihbZWxlbWVudF0pOw0KICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RvcjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIGpvaW5zIHNlbGVjdG9yIHBhdGggZnJvbSBgYmVnaW5uaW5nUGF0aGAgd2l0aCBzZWxlY3RvciBwYXRoIGluIGBhZGRQYXRoYA0KICAgICAgICAgICAgLy8gYHJlcGxhY2VkRWxlbWVudGAgY29udGFpbnMgZWxlbWVudCB0aGF0IGlzIGJlaW5nIHJlcGxhY2VkIGJ5IGBhZGRQYXRoYA0KICAgICAgICAgICAgLy8gcmV0dXJucyBjb25jYXRlbmF0ZWQgcGF0aA0KICAgICAgICAgICAgZnVuY3Rpb24gYWRkUmVwbGFjZW1lbnRJbnRvUGF0aChiZWdpbm5pbmdQYXRoLCBhZGRQYXRoLCByZXBsYWNlZEVsZW1lbnQsIG9yaWdpbmFsU2VsZWN0b3IpIHsNCiAgICAgICAgICAgICAgICB2YXIgbmV3U2VsZWN0b3JQYXRoLCBsYXN0U2VsZWN0b3IsIG5ld0pvaW5lZFNlbGVjdG9yOw0KICAgICAgICAgICAgICAgIC8vIG91ciBuZXcgc2VsZWN0b3IgcGF0aA0KICAgICAgICAgICAgICAgIG5ld1NlbGVjdG9yUGF0aCA9IFtdOw0KICAgICAgICAgICAgICAgIC8vIGNvbnN0cnVjdCB0aGUgam9pbmVkIHNlbGVjdG9yIC0gaWYgJiBpcyB0aGUgZmlyc3QgdGhpbmcgdGhpcyB3aWxsIGJlIGVtcHR5LA0KICAgICAgICAgICAgICAgIC8vIGlmIG5vdCBuZXdKb2luZWRTZWxlY3RvciB3aWxsIGJlIHRoZSBsYXN0IHNldCBvZiBlbGVtZW50cyBpbiB0aGUgc2VsZWN0b3INCiAgICAgICAgICAgICAgICBpZiAoYmVnaW5uaW5nUGF0aC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIG5ld1NlbGVjdG9yUGF0aCA9IGNvcHlBcnJheShiZWdpbm5pbmdQYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgbGFzdFNlbGVjdG9yID0gbmV3U2VsZWN0b3JQYXRoLnBvcCgpOw0KICAgICAgICAgICAgICAgICAgICBuZXdKb2luZWRTZWxlY3RvciA9IG9yaWdpbmFsU2VsZWN0b3IuY3JlYXRlRGVyaXZlZChjb3B5QXJyYXkobGFzdFNlbGVjdG9yLmVsZW1lbnRzKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBuZXdKb2luZWRTZWxlY3RvciA9IG9yaWdpbmFsU2VsZWN0b3IuY3JlYXRlRGVyaXZlZChbXSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChhZGRQYXRoLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gL2RlZXAvIGlzIGEgQ1NTNCBzZWxlY3RvciAtIChyZW1vdmVkLCBzbyBzaG91bGQgZGVwcmVjYXRlKQ0KICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IGlzIHZhbGlkIHdpdGhvdXQgYW55dGhpbmcgaW4gZnJvbnQgb2YgaXQNCiAgICAgICAgICAgICAgICAgICAgLy8gc28gaWYgdGhlICYgZG9lcyBub3QgaGF2ZSBhIGNvbWJpbmF0b3IgdGhhdCBpcyAiIiBvciAiICIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAvLyBhbmQgdGhlcmUgaXMgYSBjb21iaW5hdG9yIG9uIHRoZSBwYXJlbnQsIHRoZW4gZ3JhYiB0aGF0Lg0KICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGFsc28gYWxsb3dzICsgYSB7ICYgLmIgeyAuYSAmIHsgLi4uIHRob3VnaCBub3Qgc3VyZSB3aHkgeW91IHdvdWxkIHdhbnQgdG8gZG8gdGhhdA0KICAgICAgICAgICAgICAgICAgICB2YXIgY29tYmluYXRvciA9IHJlcGxhY2VkRWxlbWVudC5jb21iaW5hdG9yOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50RWwgPSBhZGRQYXRoWzBdLmVsZW1lbnRzWzBdOw0KICAgICAgICAgICAgICAgICAgICBpZiAoY29tYmluYXRvci5lbXB0eU9yV2hpdGVzcGFjZSAmJiAhcGFyZW50RWwuY29tYmluYXRvci5lbXB0eU9yV2hpdGVzcGFjZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29tYmluYXRvciA9IHBhcmVudEVsLmNvbWJpbmF0b3I7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8gam9pbiB0aGUgZWxlbWVudHMgc28gZmFyIHdpdGggdGhlIGZpcnN0IHBhcnQgb2YgdGhlIHBhcmVudA0KICAgICAgICAgICAgICAgICAgICBuZXdKb2luZWRTZWxlY3Rvci5lbGVtZW50cy5wdXNoKG5ldyBFbGVtZW50KGNvbWJpbmF0b3IsIHBhcmVudEVsLnZhbHVlLCByZXBsYWNlZEVsZW1lbnQuaXNWYXJpYWJsZSwgcmVwbGFjZWRFbGVtZW50Ll9pbmRleCwgcmVwbGFjZWRFbGVtZW50Ll9maWxlSW5mbykpOw0KICAgICAgICAgICAgICAgICAgICBuZXdKb2luZWRTZWxlY3Rvci5lbGVtZW50cyA9IG5ld0pvaW5lZFNlbGVjdG9yLmVsZW1lbnRzLmNvbmNhdChhZGRQYXRoWzBdLmVsZW1lbnRzLnNsaWNlKDEpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gbm93IGFkZCB0aGUgam9pbmVkIHNlbGVjdG9yIC0gYnV0IG9ubHkgaWYgaXQgaXMgbm90IGVtcHR5DQogICAgICAgICAgICAgICAgaWYgKG5ld0pvaW5lZFNlbGVjdG9yLmVsZW1lbnRzLmxlbmd0aCAhPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBuZXdTZWxlY3RvclBhdGgucHVzaChuZXdKb2luZWRTZWxlY3Rvcik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIHB1dCB0b2dldGhlciB0aGUgcGFyZW50IHNlbGVjdG9ycyBhZnRlciB0aGUgam9pbiAoZS5nLiB0aGUgcmVzdCBvZiB0aGUgcGFyZW50KQ0KICAgICAgICAgICAgICAgIGlmIChhZGRQYXRoLmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3RPZlBhdGggPSBhZGRQYXRoLnNsaWNlKDEpOw0KICAgICAgICAgICAgICAgICAgICByZXN0T2ZQYXRoID0gcmVzdE9mUGF0aC5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0b3IuY3JlYXRlRGVyaXZlZChzZWxlY3Rvci5lbGVtZW50cywgW10pOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgbmV3U2VsZWN0b3JQYXRoID0gbmV3U2VsZWN0b3JQYXRoLmNvbmNhdChyZXN0T2ZQYXRoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ld1NlbGVjdG9yUGF0aDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIGpvaW5zIHNlbGVjdG9yIHBhdGggZnJvbSBgYmVnaW5uaW5nUGF0aGAgd2l0aCBldmVyeSBzZWxlY3RvciBwYXRoIGluIGBhZGRQYXRoc2AgYXJyYXkNCiAgICAgICAgICAgIC8vIGByZXBsYWNlZEVsZW1lbnRgIGNvbnRhaW5zIGVsZW1lbnQgdGhhdCBpcyBiZWluZyByZXBsYWNlZCBieSBgYWRkUGF0aGANCiAgICAgICAgICAgIC8vIHJldHVybnMgYXJyYXkgd2l0aCBhbGwgY29uY2F0ZW5hdGVkIHBhdGhzDQogICAgICAgICAgICBmdW5jdGlvbiBhZGRBbGxSZXBsYWNlbWVudHNJbnRvUGF0aChiZWdpbm5pbmdQYXRoLCBhZGRQYXRocywgcmVwbGFjZWRFbGVtZW50LCBvcmlnaW5hbFNlbGVjdG9yLCByZXN1bHQpIHsNCiAgICAgICAgICAgICAgICB2YXIgajsNCiAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgYmVnaW5uaW5nUGF0aC5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U2VsZWN0b3JQYXRoID0gYWRkUmVwbGFjZW1lbnRJbnRvUGF0aChiZWdpbm5pbmdQYXRoW2pdLCBhZGRQYXRocywgcmVwbGFjZWRFbGVtZW50LCBvcmlnaW5hbFNlbGVjdG9yKTsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3U2VsZWN0b3JQYXRoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIG1lcmdlRWxlbWVudHNPblRvU2VsZWN0b3JzKGVsZW1lbnRzLCBzZWxlY3RvcnMpIHsNCiAgICAgICAgICAgICAgICB2YXIgaSwgc2VsOw0KICAgICAgICAgICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3JzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcnMucHVzaChbbmV3IFNlbGVjdG9yKGVsZW1lbnRzKV0pOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IChzZWwgPSBzZWxlY3RvcnNbaV0pOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHByZXZpb3VzIHRoaW5nIGluIHNlbCBpcyBhIHBhcmVudCB0aGlzIG5lZWRzIHRvIGpvaW4gb24gdG8gaXQNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxbc2VsLmxlbmd0aCAtIDFdID0gc2VsW3NlbC5sZW5ndGggLSAxXS5jcmVhdGVEZXJpdmVkKHNlbFtzZWwubGVuZ3RoIC0gMV0uZWxlbWVudHMuY29uY2F0KGVsZW1lbnRzKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWwucHVzaChuZXcgU2VsZWN0b3IoZWxlbWVudHMpKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIHJlcGxhY2UgYWxsIHBhcmVudCBzZWxlY3RvcnMgaW5zaWRlIGBpblNlbGVjdG9yYCBieSBjb250ZW50IG9mIGBjb250ZXh0YCBhcnJheQ0KICAgICAgICAgICAgLy8gcmVzdWx0aW5nIHNlbGVjdG9ycyBhcmUgcmV0dXJuZWQgaW5zaWRlIGBwYXRoc2AgYXJyYXkNCiAgICAgICAgICAgIC8vIHJldHVybnMgdHJ1ZSBpZiBgaW5TZWxlY3RvcmAgY29udGFpbmVkIGF0IGxlYXN0IG9uZSBwYXJlbnQgc2VsZWN0b3INCiAgICAgICAgICAgIGZ1bmN0aW9uIHJlcGxhY2VQYXJlbnRTZWxlY3RvcihwYXRocywgY29udGV4dCwgaW5TZWxlY3Rvcikgew0KICAgICAgICAgICAgICAgIC8vIFRoZSBwYXRocyBhcmUgW1tTZWxlY3Rvcl1dDQogICAgICAgICAgICAgICAgLy8gVGhlIGZpcnN0IGxpc3QgaXMgYSBsaXN0IG9mIGNvbW1hIHNlcGFyYXRlZCBzZWxlY3RvcnMNCiAgICAgICAgICAgICAgICAvLyBUaGUgaW5uZXIgbGlzdCBpcyBhIGxpc3Qgb2YgaW5oZXJpdGFuY2Ugc2VwYXJhdGVkIHNlbGVjdG9ycw0KICAgICAgICAgICAgICAgIC8vIGUuZy4NCiAgICAgICAgICAgICAgICAvLyAuYSwgLmIgew0KICAgICAgICAgICAgICAgIC8vICAgLmMgew0KICAgICAgICAgICAgICAgIC8vICAgfQ0KICAgICAgICAgICAgICAgIC8vIH0NCiAgICAgICAgICAgICAgICAvLyA9PSBbWy5hXSBbLmNdXSBbWy5iXSBbLmNdXQ0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgdmFyIGksIGosIGssIGN1cnJlbnRFbGVtZW50cywgbmV3U2VsZWN0b3JzLCBzZWxlY3RvcnNNdWx0aXBsaWVkLCBzZWwsIGVsLCBoYWRQYXJlbnRTZWxlY3RvciA9IGZhbHNlLCBsZW5ndGgsIGxhc3RTZWxlY3RvcjsNCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmaW5kTmVzdGVkU2VsZWN0b3IoZWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbWF5YmVTZWxlY3RvcjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZWxlbWVudC52YWx1ZSBpbnN0YW5jZW9mIFBhcmVuKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgbWF5YmVTZWxlY3RvciA9IGVsZW1lbnQudmFsdWUudmFsdWU7DQogICAgICAgICAgICAgICAgICAgIGlmICghKG1heWJlU2VsZWN0b3IgaW5zdGFuY2VvZiBTZWxlY3RvcikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXliZVNlbGVjdG9yOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyB0aGUgZWxlbWVudHMgZnJvbSB0aGUgY3VycmVudCBzZWxlY3RvciBzbyBmYXINCiAgICAgICAgICAgICAgICBjdXJyZW50RWxlbWVudHMgPSBbXTsNCiAgICAgICAgICAgICAgICAvLyB0aGUgY3VycmVudCBsaXN0IG9mIG5ldyBzZWxlY3RvcnMgdG8gYWRkIHRvIHRoZSBwYXRoLg0KICAgICAgICAgICAgICAgIC8vIFdlIHdpbGwgYnVpbGQgaXQgdXAuIFdlIGluaXRpYXRlIGl0IHdpdGggb25lIGVtcHR5IHNlbGVjdG9yIGFzIHdlICJtdWx0aXBseSIgdGhlIG5ldyBzZWxlY3RvcnMNCiAgICAgICAgICAgICAgICAvLyBieSB0aGUgcGFyZW50cw0KICAgICAgICAgICAgICAgIG5ld1NlbGVjdG9ycyA9IFsNCiAgICAgICAgICAgICAgICAgICAgW10NCiAgICAgICAgICAgICAgICBdOw0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IChlbCA9IGluU2VsZWN0b3IuZWxlbWVudHNbaV0pOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gbm9uIHBhcmVudCByZWZlcmVuY2UgZWxlbWVudHMganVzdCBnZXQgYWRkZWQNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVsLnZhbHVlICE9PSAnJicpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXN0ZWRTZWxlY3RvciA9IGZpbmROZXN0ZWRTZWxlY3RvcihlbCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmVzdGVkU2VsZWN0b3IgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIHRoZSBjdXJyZW50IGxpc3Qgb2Ygbm9uIHBhcmVudCBzZWxlY3RvciBlbGVtZW50cw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIHRvIHRoZSBjdXJyZW50IGxpc3Qgb2Ygc2VsZWN0b3JzIHRvIGFkZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlRWxlbWVudHNPblRvU2VsZWN0b3JzKGN1cnJlbnRFbGVtZW50cywgbmV3U2VsZWN0b3JzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmVzdGVkUGF0aHMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVwbGFjZWQgPSB2b2lkIDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VkTmV3U2VsZWN0b3JzID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZWQgPSByZXBsYWNlUGFyZW50U2VsZWN0b3IobmVzdGVkUGF0aHMsIGNvbnRleHQsIG5lc3RlZFNlbGVjdG9yKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYWRQYXJlbnRTZWxlY3RvciA9IGhhZFBhcmVudFNlbGVjdG9yIHx8IHJlcGxhY2VkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBuZXN0ZWRQYXRocyBhcnJheSBzaG91bGQgaGF2ZSBvbmx5IG9uZSBtZW1iZXIgLSByZXBsYWNlUGFyZW50U2VsZWN0b3IgZG9lcyBub3QgbXVsdGlwbHkgc2VsZWN0b3JzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IG5lc3RlZFBhdGhzLmxlbmd0aDsgaysrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXBsYWNlbWVudFNlbGVjdG9yID0gY3JlYXRlU2VsZWN0b3IoY3JlYXRlUGFyZW50aGVzaXMobmVzdGVkUGF0aHNba10sIGVsKSwgZWwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRBbGxSZXBsYWNlbWVudHNJbnRvUGF0aChuZXdTZWxlY3RvcnMsIFtyZXBsYWNlbWVudFNlbGVjdG9yXSwgZWwsIGluU2VsZWN0b3IsIHJlcGxhY2VkTmV3U2VsZWN0b3JzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2VsZWN0b3JzID0gcmVwbGFjZWROZXdTZWxlY3RvcnM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsZW1lbnRzID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RWxlbWVudHMucHVzaChlbCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBoYWRQYXJlbnRTZWxlY3RvciA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbmV3IGxpc3Qgb2Ygc2VsZWN0b3JzIHRvIGFkZA0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JzTXVsdGlwbGllZCA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVyZ2UgdGhlIGN1cnJlbnQgbGlzdCBvZiBub24gcGFyZW50IHNlbGVjdG9yIGVsZW1lbnRzDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiB0byB0aGUgY3VycmVudCBsaXN0IG9mIHNlbGVjdG9ycyB0byBhZGQNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlRWxlbWVudHNPblRvU2VsZWN0b3JzKGN1cnJlbnRFbGVtZW50cywgbmV3U2VsZWN0b3JzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb3AgdGhyb3VnaCBvdXIgY3VycmVudCBzZWxlY3RvcnMNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBuZXdTZWxlY3RvcnMubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWwgPSBuZXdTZWxlY3RvcnNbal07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhbnkgcGFyZW50IHBhdGhzLCB0aGUgJiBtaWdodCBiZSBpbiBhIG1peGluIHNvIHRoYXQgaXQgY2FuIGJlIHVzZWQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGV0aGVyIHRoZXJlIGFyZSBwYXJlbnRzIG9yIG5vdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0Lmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgY29tYmluYXRvciB1c2VkIG9uIGVsIHNob3VsZCBub3cgYmUgYXBwbGllZCB0byB0aGUgbmV4dCBlbGVtZW50IGluc3RlYWQgc28gdGhhdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCBpcyBub3QgbG9zdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbFswXS5lbGVtZW50cy5wdXNoKG5ldyBFbGVtZW50KGVsLmNvbWJpbmF0b3IsICcnLCBlbC5pc1ZhcmlhYmxlLCBlbC5faW5kZXgsIGVsLl9maWxlSW5mbykpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yc011bHRpcGxpZWQucHVzaChzZWwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRoZSBwYXJlbnQgc2VsZWN0b3JzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBjb250ZXh0Lmxlbmd0aDsgaysrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHB1dCB0aGUgY3VycmVudCBzZWxlY3RvcnMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZW4gam9pbiB0aGUgbGFzdCBzZWxlY3RvcidzIGVsZW1lbnRzIG9uIHRvIHRoZSBwYXJlbnRzIHNlbGVjdG9ycw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1NlbGVjdG9yUGF0aCA9IGFkZFJlcGxhY2VtZW50SW50b1BhdGgoc2VsLCBjb250ZXh0W2tdLCBlbCwgaW5TZWxlY3Rvcik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhhdCB0byBvdXIgbmV3IHNldCBvZiBzZWxlY3RvcnMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yc011bHRpcGxpZWQucHVzaChuZXdTZWxlY3RvclBhdGgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3VyIG5ldyBzZWxlY3RvcnMgaGFzIGJlZW4gbXVsdGlwbGllZCwgc28gcmVzZXQgdGhlIHN0YXRlDQogICAgICAgICAgICAgICAgICAgICAgICBuZXdTZWxlY3RvcnMgPSBzZWxlY3RvcnNNdWx0aXBsaWVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsZW1lbnRzID0gW107DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhbnkgZWxlbWVudHMgbGVmdCBvdmVyIChlLmcuIC5hJiAuYiA9PSAuYikNCiAgICAgICAgICAgICAgICAvLyBhZGQgdGhlbSBvbiB0byBhbGwgdGhlIGN1cnJlbnQgc2VsZWN0b3JzDQogICAgICAgICAgICAgICAgbWVyZ2VFbGVtZW50c09uVG9TZWxlY3RvcnMoY3VycmVudEVsZW1lbnRzLCBuZXdTZWxlY3RvcnMpOw0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBuZXdTZWxlY3RvcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gbmV3U2VsZWN0b3JzW2ldLmxlbmd0aDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhzLnB1c2gobmV3U2VsZWN0b3JzW2ldKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RTZWxlY3RvciA9IG5ld1NlbGVjdG9yc1tpXVtsZW5ndGggLSAxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NlbGVjdG9yc1tpXVtsZW5ndGggLSAxXSA9IGxhc3RTZWxlY3Rvci5jcmVhdGVEZXJpdmVkKGxhc3RTZWxlY3Rvci5lbGVtZW50cywgaW5TZWxlY3Rvci5leHRlbmRMaXN0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gaGFkUGFyZW50U2VsZWN0b3I7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBkZXJpdmVTZWxlY3Rvcih2aXNpYmlsaXR5SW5mbywgZGVyaXZlRnJvbSkgew0KICAgICAgICAgICAgICAgIHZhciBuZXdTZWxlY3RvciA9IGRlcml2ZUZyb20uY3JlYXRlRGVyaXZlZChkZXJpdmVGcm9tLmVsZW1lbnRzLCBkZXJpdmVGcm9tLmV4dGVuZExpc3QsIGRlcml2ZUZyb20uZXZhbGRDb25kaXRpb24pOw0KICAgICAgICAgICAgICAgIG5ld1NlbGVjdG9yLmNvcHlWaXNpYmlsaXR5SW5mbyh2aXNpYmlsaXR5SW5mbyk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ld1NlbGVjdG9yOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gam9pblNlbGVjdG9yIGNvZGUgZm9sbG93cw0KICAgICAgICAgICAgdmFyIGksIG5ld1BhdGhzLCBoYWRQYXJlbnRTZWxlY3RvcjsNCiAgICAgICAgICAgIG5ld1BhdGhzID0gW107DQogICAgICAgICAgICBoYWRQYXJlbnRTZWxlY3RvciA9IHJlcGxhY2VQYXJlbnRTZWxlY3RvcihuZXdQYXRocywgY29udGV4dCwgc2VsZWN0b3IpOw0KICAgICAgICAgICAgaWYgKCFoYWRQYXJlbnRTZWxlY3Rvcikgew0KICAgICAgICAgICAgICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgbmV3UGF0aHMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvbnRleHQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25jYXRlbmF0ZWQgPSBjb250ZXh0W2ldLm1hcChkZXJpdmVTZWxlY3Rvci5iaW5kKHRoaXMsIHNlbGVjdG9yLnZpc2liaWxpdHlJbmZvKCkpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmNhdGVuYXRlZC5wdXNoKHNlbGVjdG9yKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhdGhzLnB1c2goY29uY2F0ZW5hdGVkKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgbmV3UGF0aHMgPSBbW3NlbGVjdG9yXV07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG5ld1BhdGhzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgcGF0aHMucHVzaChuZXdQYXRoc1tpXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgQXRSdWxlID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlLCBydWxlcywgaW5kZXgsIGN1cnJlbnRGaWxlSW5mbywgZGVidWdJbmZvLCBpc1Jvb3RlZCwgdmlzaWJpbGl0eUluZm8pIHsNCiAgICAgICAgdmFyIGk7DQogICAgICAgIHRoaXMubmFtZSA9IG5hbWU7DQogICAgICAgIHRoaXMudmFsdWUgPSAodmFsdWUgaW5zdGFuY2VvZiBOb2RlKSA/IHZhbHVlIDogKHZhbHVlID8gbmV3IEFub255bW91cyh2YWx1ZSkgOiB2YWx1ZSk7DQogICAgICAgIGlmIChydWxlcykgew0KICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocnVsZXMpKSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlcyA9IHJ1bGVzOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlcyA9IFtydWxlc107DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlc1swXS5zZWxlY3RvcnMgPSAobmV3IFNlbGVjdG9yKFtdLCBudWxsLCBudWxsLCBpbmRleCwgY3VycmVudEZpbGVJbmZvKSkuY3JlYXRlRW1wdHlTZWxlY3RvcnMoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnJ1bGVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlc1tpXS5hbGxvd0ltcG9ydHMgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5ydWxlcywgdGhpcyk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMuZGVidWdJbmZvID0gZGVidWdJbmZvOw0KICAgICAgICB0aGlzLmlzUm9vdGVkID0gaXNSb290ZWQgfHwgZmFsc2U7DQogICAgICAgIHRoaXMuY29weVZpc2liaWxpdHlJbmZvKHZpc2liaWxpdHlJbmZvKTsNCiAgICAgICAgdGhpcy5hbGxvd1Jvb3QgPSB0cnVlOw0KICAgIH07DQogICAgQXRSdWxlLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnQXRSdWxlJywNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZSwgcnVsZXMgPSB0aGlzLnJ1bGVzOw0KICAgICAgICAgICAgaWYgKHJ1bGVzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlcyA9IHZpc2l0b3IudmlzaXRBcnJheShydWxlcyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodmFsdWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmlzaXRvci52aXNpdCh2YWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGlzUnVsZXNldExpa2U6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLnJ1bGVzIHx8ICF0aGlzLmlzQ2hhcnNldCgpOw0KICAgICAgICB9LA0KICAgICAgICBpc0NoYXJzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiAnQGNoYXJzZXQnID09PSB0aGlzLm5hbWU7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZSwgcnVsZXMgPSB0aGlzLnJ1bGVzOw0KICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLm5hbWUsIHRoaXMuZmlsZUluZm8oKSwgdGhpcy5nZXRJbmRleCgpKTsNCiAgICAgICAgICAgIGlmICh2YWx1ZSkgew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoJyAnKTsNCiAgICAgICAgICAgICAgICB2YWx1ZS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChydWxlcykgew0KICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0UnVsZXNldChjb250ZXh0LCBvdXRwdXQsIHJ1bGVzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoJzsnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciBtZWRpYVBhdGhCYWNrdXAsIG1lZGlhQmxvY2tzQmFja3VwLCB2YWx1ZSA9IHRoaXMudmFsdWUsIHJ1bGVzID0gdGhpcy5ydWxlczsNCiAgICAgICAgICAgIC8vIG1lZGlhIHN0b3JlZCBpbnNpZGUgb3RoZXIgYXRydWxlIHNob3VsZCBub3QgYnViYmxlIG92ZXIgaXQNCiAgICAgICAgICAgIC8vIGJhY2twdXAgbWVkaWEgYnViYmxpbmcgaW5mb3JtYXRpb24NCiAgICAgICAgICAgIG1lZGlhUGF0aEJhY2t1cCA9IGNvbnRleHQubWVkaWFQYXRoOw0KICAgICAgICAgICAgbWVkaWFCbG9ja3NCYWNrdXAgPSBjb250ZXh0Lm1lZGlhQmxvY2tzOw0KICAgICAgICAgICAgLy8gZGVsZXRlZCBtZWRpYSBidWJibGluZyBpbmZvcm1hdGlvbg0KICAgICAgICAgICAgY29udGV4dC5tZWRpYVBhdGggPSBbXTsNCiAgICAgICAgICAgIGNvbnRleHQubWVkaWFCbG9ja3MgPSBbXTsNCiAgICAgICAgICAgIGlmICh2YWx1ZSkgew0KICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChydWxlcykgew0KICAgICAgICAgICAgICAgIC8vIGFzc3VtaW5nIHRoYXQgdGhlcmUgaXMgb25seSBvbmUgcnVsZSBhdCB0aGlzIHBvaW50IC0gdGhhdCBpcyBob3cgcGFyc2VyIGNvbnN0cnVjdHMgdGhlIHJ1bGUNCiAgICAgICAgICAgICAgICBydWxlcyA9IFtydWxlc1swXS5ldmFsKGNvbnRleHQpXTsNCiAgICAgICAgICAgICAgICBydWxlc1swXS5yb290ID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIHJlc3RvcmUgbWVkaWEgYnViYmxpbmcgaW5mb3JtYXRpb24NCiAgICAgICAgICAgIGNvbnRleHQubWVkaWFQYXRoID0gbWVkaWFQYXRoQmFja3VwOw0KICAgICAgICAgICAgY29udGV4dC5tZWRpYUJsb2NrcyA9IG1lZGlhQmxvY2tzQmFja3VwOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBBdFJ1bGUodGhpcy5uYW1lLCB2YWx1ZSwgcnVsZXMsIHRoaXMuZ2V0SW5kZXgoKSwgdGhpcy5maWxlSW5mbygpLCB0aGlzLmRlYnVnSW5mbywgdGhpcy5pc1Jvb3RlZCwgdGhpcy52aXNpYmlsaXR5SW5mbygpKTsNCiAgICAgICAgfSwNCiAgICAgICAgdmFyaWFibGU6IGZ1bmN0aW9uIChuYW1lKSB7DQogICAgICAgICAgICBpZiAodGhpcy5ydWxlcykgew0KICAgICAgICAgICAgICAgIC8vIGFzc3VtaW5nIHRoYXQgdGhlcmUgaXMgb25seSBvbmUgcnVsZSBhdCB0aGlzIHBvaW50IC0gdGhhdCBpcyBob3cgcGFyc2VyIGNvbnN0cnVjdHMgdGhlIHJ1bGUNCiAgICAgICAgICAgICAgICByZXR1cm4gUnVsZXNldC5wcm90b3R5cGUudmFyaWFibGUuY2FsbCh0aGlzLnJ1bGVzWzBdLCBuYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZmluZDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMucnVsZXMpIHsNCiAgICAgICAgICAgICAgICAvLyBhc3N1bWluZyB0aGF0IHRoZXJlIGlzIG9ubHkgb25lIHJ1bGUgYXQgdGhpcyBwb2ludCAtIHRoYXQgaXMgaG93IHBhcnNlciBjb25zdHJ1Y3RzIHRoZSBydWxlDQogICAgICAgICAgICAgICAgcmV0dXJuIFJ1bGVzZXQucHJvdG90eXBlLmZpbmQuYXBwbHkodGhpcy5ydWxlc1swXSwgYXJndW1lbnRzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgcnVsZXNldHM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnJ1bGVzKSB7DQogICAgICAgICAgICAgICAgLy8gYXNzdW1pbmcgdGhhdCB0aGVyZSBpcyBvbmx5IG9uZSBydWxlIGF0IHRoaXMgcG9pbnQgLSB0aGF0IGlzIGhvdyBwYXJzZXIgY29uc3RydWN0cyB0aGUgcnVsZQ0KICAgICAgICAgICAgICAgIHJldHVybiBSdWxlc2V0LnByb3RvdHlwZS5ydWxlc2V0cy5hcHBseSh0aGlzLnJ1bGVzWzBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgb3V0cHV0UnVsZXNldDogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCwgcnVsZXMpIHsNCiAgICAgICAgICAgIHZhciBydWxlQ250ID0gcnVsZXMubGVuZ3RoOw0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICBjb250ZXh0LnRhYkxldmVsID0gKGNvbnRleHQudGFiTGV2ZWwgfCAwKSArIDE7DQogICAgICAgICAgICAvLyBDb21wcmVzc2VkDQogICAgICAgICAgICBpZiAoY29udGV4dC5jb21wcmVzcykgew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoJ3snKTsNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcnVsZUNudDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIHJ1bGVzW2ldLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKCd9Jyk7DQogICAgICAgICAgICAgICAgY29udGV4dC50YWJMZXZlbC0tOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIE5vbi1jb21wcmVzc2VkDQogICAgICAgICAgICB2YXIgdGFiU2V0U3RyID0gIlxuIiArIEFycmF5KGNvbnRleHQudGFiTGV2ZWwpLmpvaW4oJyAgJyksIHRhYlJ1bGVTdHIgPSB0YWJTZXRTdHIgKyAiICAiOw0KICAgICAgICAgICAgaWYgKCFydWxlQ250KSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCgiIHsiICsgdGFiU2V0U3RyICsgIn0iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoIiB7IiArIHRhYlJ1bGVTdHIpOw0KICAgICAgICAgICAgICAgIHJ1bGVzWzBdLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCBydWxlQ250OyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh0YWJSdWxlU3RyKTsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXNbaV0uZ2VuQ1NTKGNvbnRleHQsIG91dHB1dCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQodGFiU2V0U3RyICsgIn0iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnRleHQudGFiTGV2ZWwtLTsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBEZXRhY2hlZFJ1bGVzZXQgPSBmdW5jdGlvbiAocnVsZXNldCwgZnJhbWVzKSB7DQogICAgICAgIHRoaXMucnVsZXNldCA9IHJ1bGVzZXQ7DQogICAgICAgIHRoaXMuZnJhbWVzID0gZnJhbWVzOw0KICAgICAgICB0aGlzLnNldFBhcmVudCh0aGlzLnJ1bGVzZXQsIHRoaXMpOw0KICAgIH07DQogICAgRGV0YWNoZWRSdWxlc2V0LnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnRGV0YWNoZWRSdWxlc2V0JywNCiAgICAgICAgZXZhbEZpcnN0OiB0cnVlLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICB0aGlzLnJ1bGVzZXQgPSB2aXNpdG9yLnZpc2l0KHRoaXMucnVsZXNldCk7DQogICAgICAgIH0sDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgZnJhbWVzID0gdGhpcy5mcmFtZXMgfHwgY29weUFycmF5KGNvbnRleHQuZnJhbWVzKTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGV0YWNoZWRSdWxlc2V0KHRoaXMucnVsZXNldCwgZnJhbWVzKTsNCiAgICAgICAgfSwNCiAgICAgICAgY2FsbEV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5ydWxlc2V0LmV2YWwodGhpcy5mcmFtZXMgPyBuZXcgY29udGV4dHMuRXZhbChjb250ZXh0LCB0aGlzLmZyYW1lcy5jb25jYXQoY29udGV4dC5mcmFtZXMpKSA6IGNvbnRleHQpOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIFVuaXQgPSBmdW5jdGlvbiAobnVtZXJhdG9yLCBkZW5vbWluYXRvciwgYmFja3VwVW5pdCkgew0KICAgICAgICB0aGlzLm51bWVyYXRvciA9IG51bWVyYXRvciA/IGNvcHlBcnJheShudW1lcmF0b3IpLnNvcnQoKSA6IFtdOw0KICAgICAgICB0aGlzLmRlbm9taW5hdG9yID0gZGVub21pbmF0b3IgPyBjb3B5QXJyYXkoZGVub21pbmF0b3IpLnNvcnQoKSA6IFtdOw0KICAgICAgICBpZiAoYmFja3VwVW5pdCkgew0KICAgICAgICAgICAgdGhpcy5iYWNrdXBVbml0ID0gYmFja3VwVW5pdDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChudW1lcmF0b3IgJiYgbnVtZXJhdG9yLmxlbmd0aCkgew0KICAgICAgICAgICAgdGhpcy5iYWNrdXBVbml0ID0gbnVtZXJhdG9yWzBdOw0KICAgICAgICB9DQogICAgfTsNCiAgICBVbml0LnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnVW5pdCcsDQogICAgICAgIGNsb25lOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IFVuaXQoY29weUFycmF5KHRoaXMubnVtZXJhdG9yKSwgY29weUFycmF5KHRoaXMuZGVub21pbmF0b3IpLCB0aGlzLmJhY2t1cFVuaXQpOw0KICAgICAgICB9LA0KICAgICAgICBnZW5DU1M6IGZ1bmN0aW9uIChjb250ZXh0LCBvdXRwdXQpIHsNCiAgICAgICAgICAgIC8vIERpbWVuc2lvbiBjaGVja3MgdGhlIHVuaXQgaXMgc2luZ3VsYXIgYW5kIHRocm93cyBhbiBlcnJvciBpZiBpbiBzdHJpY3QgbWF0aCBtb2RlLg0KICAgICAgICAgICAgdmFyIHN0cmljdFVuaXRzID0gY29udGV4dCAmJiBjb250ZXh0LnN0cmljdFVuaXRzOw0KICAgICAgICAgICAgaWYgKHRoaXMubnVtZXJhdG9yLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQodGhpcy5udW1lcmF0b3JbMF0pOyAvLyB0aGUgaWRlYWwgc2l0dWF0aW9uDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmICghc3RyaWN0VW5pdHMgJiYgdGhpcy5iYWNrdXBVbml0KSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLmJhY2t1cFVuaXQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoIXN0cmljdFVuaXRzICYmIHRoaXMuZGVub21pbmF0b3IubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLmRlbm9taW5hdG9yWzBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBpLCByZXR1cm5TdHIgPSB0aGlzLm51bWVyYXRvci5qb2luKCcqJyk7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5kZW5vbWluYXRvci5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHJldHVyblN0ciArPSAiLyIgKyB0aGlzLmRlbm9taW5hdG9yW2ldOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJldHVyblN0cjsNCiAgICAgICAgfSwNCiAgICAgICAgY29tcGFyZTogZnVuY3Rpb24gKG90aGVyKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5pcyhvdGhlci50b1N0cmluZygpKSA/IDAgOiB1bmRlZmluZWQ7DQogICAgICAgIH0sDQogICAgICAgIGlzOiBmdW5jdGlvbiAodW5pdFN0cmluZykgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSB1bml0U3RyaW5nLnRvVXBwZXJDYXNlKCk7DQogICAgICAgIH0sDQogICAgICAgIGlzTGVuZ3RoOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gUmVnRXhwKCdeKHB4fGVtfGV4fGNofHJlbXxpbnxjbXxtbXxwY3xwdHxleHx2d3x2aHx2bWlufHZtYXgpJCcsICdnaScpLnRlc3QodGhpcy50b0NTUygpKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNFbXB0eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtZXJhdG9yLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmRlbm9taW5hdG9yLmxlbmd0aCA9PT0gMDsNCiAgICAgICAgfSwNCiAgICAgICAgaXNTaW5ndWxhcjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtZXJhdG9yLmxlbmd0aCA8PSAxICYmIHRoaXMuZGVub21pbmF0b3IubGVuZ3RoID09PSAwOw0KICAgICAgICB9LA0KICAgICAgICBtYXA6IGZ1bmN0aW9uIChjYWxsYmFjaykgew0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5udW1lcmF0b3IubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICB0aGlzLm51bWVyYXRvcltpXSA9IGNhbGxiYWNrKHRoaXMubnVtZXJhdG9yW2ldLCBmYWxzZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5kZW5vbWluYXRvci5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVub21pbmF0b3JbaV0gPSBjYWxsYmFjayh0aGlzLmRlbm9taW5hdG9yW2ldLCB0cnVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdXNlZFVuaXRzOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgZ3JvdXA7DQogICAgICAgICAgICB2YXIgcmVzdWx0ID0ge307DQogICAgICAgICAgICB2YXIgbWFwVW5pdDsNCiAgICAgICAgICAgIHZhciBncm91cE5hbWU7DQogICAgICAgICAgICBtYXBVbml0ID0gZnVuY3Rpb24gKGF0b21pY1VuaXQpIHsNCiAgICAgICAgICAgICAgICAvKiBqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSAqLw0KICAgICAgICAgICAgICAgIGlmIChncm91cC5oYXNPd25Qcm9wZXJ0eShhdG9taWNVbml0KSAmJiAhcmVzdWx0W2dyb3VwTmFtZV0pIHsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2dyb3VwTmFtZV0gPSBhdG9taWNVbml0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gYXRvbWljVW5pdDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBmb3IgKGdyb3VwTmFtZSBpbiB1bml0Q29udmVyc2lvbnMpIHsNCiAgICAgICAgICAgICAgICBpZiAodW5pdENvbnZlcnNpb25zLmhhc093blByb3BlcnR5KGdyb3VwTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgZ3JvdXAgPSB1bml0Q29udmVyc2lvbnNbZ3JvdXBOYW1lXTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXAobWFwVW5pdCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfSwNCiAgICAgICAgY2FuY2VsOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgY291bnRlciA9IHt9Ow0KICAgICAgICAgICAgdmFyIGF0b21pY1VuaXQ7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLm51bWVyYXRvci5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGF0b21pY1VuaXQgPSB0aGlzLm51bWVyYXRvcltpXTsNCiAgICAgICAgICAgICAgICBjb3VudGVyW2F0b21pY1VuaXRdID0gKGNvdW50ZXJbYXRvbWljVW5pdF0gfHwgMCkgKyAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuZGVub21pbmF0b3IubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBhdG9taWNVbml0ID0gdGhpcy5kZW5vbWluYXRvcltpXTsNCiAgICAgICAgICAgICAgICBjb3VudGVyW2F0b21pY1VuaXRdID0gKGNvdW50ZXJbYXRvbWljVW5pdF0gfHwgMCkgLSAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5udW1lcmF0b3IgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuZGVub21pbmF0b3IgPSBbXTsNCiAgICAgICAgICAgIGZvciAoYXRvbWljVW5pdCBpbiBjb3VudGVyKSB7DQogICAgICAgICAgICAgICAgaWYgKGNvdW50ZXIuaGFzT3duUHJvcGVydHkoYXRvbWljVW5pdCkpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gY291bnRlclthdG9taWNVbml0XTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvdW50OyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm51bWVyYXRvci5wdXNoKGF0b21pY1VuaXQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvdW50IDwgMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IC1jb3VudDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZW5vbWluYXRvci5wdXNoKGF0b21pY1VuaXQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5udW1lcmF0b3Iuc29ydCgpOw0KICAgICAgICAgICAgdGhpcy5kZW5vbWluYXRvci5zb3J0KCk7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICAvLw0KICAgIC8vIEEgbnVtYmVyIHdpdGggYSB1bml0DQogICAgLy8NCiAgICB2YXIgRGltZW5zaW9uID0gZnVuY3Rpb24gKHZhbHVlLCB1bml0KSB7DQogICAgICAgIHRoaXMudmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTsNCiAgICAgICAgaWYgKGlzTmFOKHRoaXMudmFsdWUpKSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RpbWVuc2lvbiBpcyBub3QgYSBudW1iZXIuJyk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy51bml0ID0gKHVuaXQgJiYgdW5pdCBpbnN0YW5jZW9mIFVuaXQpID8gdW5pdCA6DQogICAgICAgICAgICBuZXcgVW5pdCh1bml0ID8gW3VuaXRdIDogdW5kZWZpbmVkKTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy51bml0LCB0aGlzKTsNCiAgICB9Ow0KICAgIERpbWVuc2lvbi5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ0RpbWVuc2lvbicsDQogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gKHZpc2l0b3IpIHsNCiAgICAgICAgICAgIHRoaXMudW5pdCA9IHZpc2l0b3IudmlzaXQodGhpcy51bml0KTsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzOw0KICAgICAgICB9LA0KICAgICAgICB0b0NvbG9yOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKFt0aGlzLnZhbHVlLCB0aGlzLnZhbHVlLCB0aGlzLnZhbHVlXSk7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgaWYgKChjb250ZXh0ICYmIGNvbnRleHQuc3RyaWN0VW5pdHMpICYmICF0aGlzLnVuaXQuaXNTaW5ndWxhcigpKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJNdWx0aXBsZSB1bml0cyBpbiBkaW1lbnNpb24uIENvcnJlY3QgdGhlIHVuaXRzIG9yIHVzZSB0aGUgdW5pdCBmdW5jdGlvbi4gQmFkIHVuaXQ6ICIgKyB0aGlzLnVuaXQudG9TdHJpbmcoKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmZyb3VuZChjb250ZXh0LCB0aGlzLnZhbHVlKTsNCiAgICAgICAgICAgIHZhciBzdHJWYWx1ZSA9IFN0cmluZyh2YWx1ZSk7DQogICAgICAgICAgICBpZiAodmFsdWUgIT09IDAgJiYgdmFsdWUgPCAwLjAwMDAwMSAmJiB2YWx1ZSA+IC0wLjAwMDAwMSkgew0KICAgICAgICAgICAgICAgIC8vIHdvdWxkIGJlIG91dHB1dCAxZS02IGV0Yy4NCiAgICAgICAgICAgICAgICBzdHJWYWx1ZSA9IHZhbHVlLnRvRml4ZWQoMjApLnJlcGxhY2UoLzArJC8sICcnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQuY29tcHJlc3MpIHsNCiAgICAgICAgICAgICAgICAvLyBaZXJvIHZhbHVlcyBkb2Vzbid0IG5lZWQgYSB1bml0DQogICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSAwICYmIHRoaXMudW5pdC5pc0xlbmd0aCgpKSB7DQogICAgICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoc3RyVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIEZsb2F0IHZhbHVlcyBkb2Vzbid0IG5lZWQgYSBsZWFkaW5nIHplcm8NCiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiAwICYmIHZhbHVlIDwgMSkgew0KICAgICAgICAgICAgICAgICAgICBzdHJWYWx1ZSA9IChzdHJWYWx1ZSkuc3Vic3RyKDEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG91dHB1dC5hZGQoc3RyVmFsdWUpOw0KICAgICAgICAgICAgdGhpcy51bml0LmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICB9LA0KICAgICAgICAvLyBJbiBhbiBvcGVyYXRpb24gYmV0d2VlbiB0d28gRGltZW5zaW9ucywNCiAgICAgICAgLy8gd2UgZGVmYXVsdCB0byB0aGUgZmlyc3QgRGltZW5zaW9uJ3MgdW5pdCwNCiAgICAgICAgLy8gc28gYDFweCArIDJgIHdpbGwgeWllbGQgYDNweGAuDQogICAgICAgIG9wZXJhdGU6IGZ1bmN0aW9uIChjb250ZXh0LCBvcCwgb3RoZXIpIHsNCiAgICAgICAgICAgIC8qIGpzaGludCBub2VtcHR5OmZhbHNlICovDQogICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9vcGVyYXRlKGNvbnRleHQsIG9wLCB0aGlzLnZhbHVlLCBvdGhlci52YWx1ZSk7DQogICAgICAgICAgICB2YXIgdW5pdCA9IHRoaXMudW5pdC5jbG9uZSgpOw0KICAgICAgICAgICAgaWYgKG9wID09PSAnKycgfHwgb3AgPT09ICctJykgew0KICAgICAgICAgICAgICAgIGlmICh1bml0Lm51bWVyYXRvci5sZW5ndGggPT09IDAgJiYgdW5pdC5kZW5vbWluYXRvci5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgdW5pdCA9IG90aGVyLnVuaXQuY2xvbmUoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5pdC5iYWNrdXBVbml0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICB1bml0LmJhY2t1cFVuaXQgPSB0aGlzLnVuaXQuYmFja3VwVW5pdDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChvdGhlci51bml0Lm51bWVyYXRvci5sZW5ndGggPT09IDAgJiYgdW5pdC5kZW5vbWluYXRvci5sZW5ndGggPT09IDApIDsNCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgb3RoZXIgPSBvdGhlci5jb252ZXJ0VG8odGhpcy51bml0LnVzZWRVbml0cygpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuc3RyaWN0VW5pdHMgJiYgb3RoZXIudW5pdC50b1N0cmluZygpICE9PSB1bml0LnRvU3RyaW5nKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiSW5jb21wYXRpYmxlIHVuaXRzLiBDaGFuZ2UgdGhlIHVuaXRzIG9yIHVzZSB0aGUgdW5pdCBmdW5jdGlvbi4gIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKCJCYWQgdW5pdHM6ICciICsgdW5pdC50b1N0cmluZygpICsgIicgYW5kICciICsgb3RoZXIudW5pdC50b1N0cmluZygpICsgIicuIikpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5fb3BlcmF0ZShjb250ZXh0LCBvcCwgdGhpcy52YWx1ZSwgb3RoZXIudmFsdWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKG9wID09PSAnKicpIHsNCiAgICAgICAgICAgICAgICB1bml0Lm51bWVyYXRvciA9IHVuaXQubnVtZXJhdG9yLmNvbmNhdChvdGhlci51bml0Lm51bWVyYXRvcikuc29ydCgpOw0KICAgICAgICAgICAgICAgIHVuaXQuZGVub21pbmF0b3IgPSB1bml0LmRlbm9taW5hdG9yLmNvbmNhdChvdGhlci51bml0LmRlbm9taW5hdG9yKS5zb3J0KCk7DQogICAgICAgICAgICAgICAgdW5pdC5jYW5jZWwoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKG9wID09PSAnLycpIHsNCiAgICAgICAgICAgICAgICB1bml0Lm51bWVyYXRvciA9IHVuaXQubnVtZXJhdG9yLmNvbmNhdChvdGhlci51bml0LmRlbm9taW5hdG9yKS5zb3J0KCk7DQogICAgICAgICAgICAgICAgdW5pdC5kZW5vbWluYXRvciA9IHVuaXQuZGVub21pbmF0b3IuY29uY2F0KG90aGVyLnVuaXQubnVtZXJhdG9yKS5zb3J0KCk7DQogICAgICAgICAgICAgICAgdW5pdC5jYW5jZWwoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKHZhbHVlLCB1bml0KTsNCiAgICAgICAgfSwNCiAgICAgICAgY29tcGFyZTogZnVuY3Rpb24gKG90aGVyKSB7DQogICAgICAgICAgICB2YXIgYSwgYjsNCiAgICAgICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgRGltZW5zaW9uKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy51bml0LmlzRW1wdHkoKSB8fCBvdGhlci51bml0LmlzRW1wdHkoKSkgew0KICAgICAgICAgICAgICAgIGEgPSB0aGlzOw0KICAgICAgICAgICAgICAgIGIgPSBvdGhlcjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGEgPSB0aGlzLnVuaWZ5KCk7DQogICAgICAgICAgICAgICAgYiA9IG90aGVyLnVuaWZ5KCk7DQogICAgICAgICAgICAgICAgaWYgKGEudW5pdC5jb21wYXJlKGIudW5pdCkgIT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gTm9kZS5udW1lcmljQ29tcGFyZShhLnZhbHVlLCBiLnZhbHVlKTsNCiAgICAgICAgfSwNCiAgICAgICAgdW5pZnk6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUbyh7IGxlbmd0aDogJ3B4JywgZHVyYXRpb246ICdzJywgYW5nbGU6ICdyYWQnIH0pOw0KICAgICAgICB9LA0KICAgICAgICBjb252ZXJ0VG86IGZ1bmN0aW9uIChjb252ZXJzaW9ucykgew0KICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTsNCiAgICAgICAgICAgIHZhciB1bml0ID0gdGhpcy51bml0LmNsb25lKCk7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIHZhciBncm91cE5hbWU7DQogICAgICAgICAgICB2YXIgZ3JvdXA7DQogICAgICAgICAgICB2YXIgdGFyZ2V0VW5pdDsNCiAgICAgICAgICAgIHZhciBkZXJpdmVkQ29udmVyc2lvbnMgPSB7fTsNCiAgICAgICAgICAgIHZhciBhcHBseVVuaXQ7DQogICAgICAgICAgICBpZiAodHlwZW9mIGNvbnZlcnNpb25zID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgICAgIGZvciAoaSBpbiB1bml0Q29udmVyc2lvbnMpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHVuaXRDb252ZXJzaW9uc1tpXS5oYXNPd25Qcm9wZXJ0eShjb252ZXJzaW9ucykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2ZWRDb252ZXJzaW9ucyA9IHt9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZlZENvbnZlcnNpb25zW2ldID0gY29udmVyc2lvbnM7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29udmVyc2lvbnMgPSBkZXJpdmVkQ29udmVyc2lvbnM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBhcHBseVVuaXQgPSBmdW5jdGlvbiAoYXRvbWljVW5pdCwgZGVub21pbmF0b3IpIHsNCiAgICAgICAgICAgICAgICAvKiBqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSAqLw0KICAgICAgICAgICAgICAgIGlmIChncm91cC5oYXNPd25Qcm9wZXJ0eShhdG9taWNVbml0KSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoZGVub21pbmF0b3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgLyAoZ3JvdXBbYXRvbWljVW5pdF0gLyBncm91cFt0YXJnZXRVbml0XSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICogKGdyb3VwW2F0b21pY1VuaXRdIC8gZ3JvdXBbdGFyZ2V0VW5pdF0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRVbml0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gYXRvbWljVW5pdDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBmb3IgKGdyb3VwTmFtZSBpbiBjb252ZXJzaW9ucykgew0KICAgICAgICAgICAgICAgIGlmIChjb252ZXJzaW9ucy5oYXNPd25Qcm9wZXJ0eShncm91cE5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHRhcmdldFVuaXQgPSBjb252ZXJzaW9uc1tncm91cE5hbWVdOw0KICAgICAgICAgICAgICAgICAgICBncm91cCA9IHVuaXRDb252ZXJzaW9uc1tncm91cE5hbWVdOw0KICAgICAgICAgICAgICAgICAgICB1bml0Lm1hcChhcHBseVVuaXQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHVuaXQuY2FuY2VsKCk7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbih2YWx1ZSwgdW5pdCk7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgTUFUSCA9IE1hdGgkMTsNCiAgICB2YXIgT3BlcmF0aW9uID0gZnVuY3Rpb24gKG9wLCBvcGVyYW5kcywgaXNTcGFjZWQpIHsNCiAgICAgICAgdGhpcy5vcCA9IG9wLnRyaW0oKTsNCiAgICAgICAgdGhpcy5vcGVyYW5kcyA9IG9wZXJhbmRzOw0KICAgICAgICB0aGlzLmlzU3BhY2VkID0gaXNTcGFjZWQ7DQogICAgfTsNCiAgICBPcGVyYXRpb24ucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdPcGVyYXRpb24nLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICB0aGlzLm9wZXJhbmRzID0gdmlzaXRvci52aXNpdEFycmF5KHRoaXMub3BlcmFuZHMpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIGEgPSB0aGlzLm9wZXJhbmRzWzBdLmV2YWwoY29udGV4dCksIGIgPSB0aGlzLm9wZXJhbmRzWzFdLmV2YWwoY29udGV4dCksIG9wOw0KICAgICAgICAgICAgaWYgKGNvbnRleHQuaXNNYXRoT24odGhpcy5vcCkpIHsNCiAgICAgICAgICAgICAgICBvcCA9IHRoaXMub3AgPT09ICcuLycgPyAnLycgOiB0aGlzLm9wOw0KICAgICAgICAgICAgICAgIGlmIChhIGluc3RhbmNlb2YgRGltZW5zaW9uICYmIGIgaW5zdGFuY2VvZiBDb2xvcikgew0KICAgICAgICAgICAgICAgICAgICBhID0gYS50b0NvbG9yKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChiIGluc3RhbmNlb2YgRGltZW5zaW9uICYmIGEgaW5zdGFuY2VvZiBDb2xvcikgew0KICAgICAgICAgICAgICAgICAgICBiID0gYi50b0NvbG9yKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmICghYS5vcGVyYXRlIHx8ICFiLm9wZXJhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKChhIGluc3RhbmNlb2YgT3BlcmF0aW9uIHx8IGIgaW5zdGFuY2VvZiBPcGVyYXRpb24pDQogICAgICAgICAgICAgICAgICAgICAgICAmJiBhLm9wID09PSAnLycgJiYgY29udGV4dC5tYXRoID09PSBNQVRILlBBUkVOU19ESVZJU0lPTikgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPcGVyYXRpb24odGhpcy5vcCwgW2EsIGJdLCB0aGlzLmlzU3BhY2VkKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdPcGVyYXRpb24nLA0KICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ09wZXJhdGlvbiBvbiBhbiBpbnZhbGlkIHR5cGUnIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBhLm9wZXJhdGUoY29udGV4dCwgb3AsIGIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPcGVyYXRpb24odGhpcy5vcCwgW2EsIGJdLCB0aGlzLmlzU3BhY2VkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICB0aGlzLm9wZXJhbmRzWzBdLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgaWYgKHRoaXMuaXNTcGFjZWQpIHsNCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKCcgJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvdXRwdXQuYWRkKHRoaXMub3ApOw0KICAgICAgICAgICAgaWYgKHRoaXMuaXNTcGFjZWQpIHsNCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKCcgJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLm9wZXJhbmRzWzFdLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICB9DQogICAgfSk7CgogICAgLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uDQoNCiAgICBQZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkNCiAgICBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuDQoNCiAgICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSA0KICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQ0KICAgIEFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCwNCiAgICBJTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST00NCiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUg0KICAgIE9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1INCiAgICBQRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLg0KICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovDQoNCiAgICBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7DQogICAgICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7DQogICAgICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7DQogICAgICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTsNCiAgICAgICAgICAgICAgICBhcltpXSA9IGZyb21baV07DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBmcm9tKTsNCiAgICB9CgogICAgdmFyIEV4cHJlc3Npb24gPSBmdW5jdGlvbiAodmFsdWUsIG5vU3BhY2luZykgew0KICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7DQogICAgICAgIHRoaXMubm9TcGFjaW5nID0gbm9TcGFjaW5nOw0KICAgICAgICBpZiAoIXZhbHVlKSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cHJlc3Npb24gcmVxdWlyZXMgYW4gYXJyYXkgcGFyYW1ldGVyJyk7DQogICAgICAgIH0NCiAgICB9Ow0KICAgIEV4cHJlc3Npb24ucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdFeHByZXNzaW9uJywNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZpc2l0b3IudmlzaXRBcnJheSh0aGlzLnZhbHVlKTsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZTsNCiAgICAgICAgICAgIHZhciBtYXRoT24gPSBjb250ZXh0LmlzTWF0aE9uKCk7DQogICAgICAgICAgICB2YXIgaW5QYXJlbnRoZXNpcyA9IHRoaXMucGFyZW5zOw0KICAgICAgICAgICAgdmFyIGRvdWJsZVBhcmVuID0gZmFsc2U7DQogICAgICAgICAgICBpZiAoaW5QYXJlbnRoZXNpcykgew0KICAgICAgICAgICAgICAgIGNvbnRleHQuaW5QYXJlbnRoZXNpcygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gbmV3IEV4cHJlc3Npb24odGhpcy52YWx1ZS5tYXAoZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFlLmV2YWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgfSksIHRoaXMubm9TcGFjaW5nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMudmFsdWUubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVbMF0ucGFyZW5zICYmICF0aGlzLnZhbHVlWzBdLnBhcmVuc0luT3AgJiYgIWNvbnRleHQuaW5DYWxjKSB7DQogICAgICAgICAgICAgICAgICAgIGRvdWJsZVBhcmVuID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB0aGlzLnZhbHVlWzBdLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHRoaXM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaW5QYXJlbnRoZXNpcykgew0KICAgICAgICAgICAgICAgIGNvbnRleHQub3V0T2ZQYXJlbnRoZXNpcygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMucGFyZW5zICYmIHRoaXMucGFyZW5zSW5PcCAmJiAhbWF0aE9uICYmICFkb3VibGVQYXJlbg0KICAgICAgICAgICAgICAgICYmICghKHJldHVyblZhbHVlIGluc3RhbmNlb2YgRGltZW5zaW9uKSkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IG5ldyBQYXJlbihyZXR1cm5WYWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnZhbHVlLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgdGhpcy52YWx1ZVtpXS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubm9TcGFjaW5nICYmIGkgKyAxIDwgdGhpcy52YWx1ZS5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFkZCgnICcpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdGhyb3dBd2F5Q29tbWVudHM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLmZpbHRlcihmdW5jdGlvbiAodikgew0KICAgICAgICAgICAgICAgIHJldHVybiAhKHYgaW5zdGFuY2VvZiBDb21tZW50KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIGZ1bmN0aW9uQ2FsbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICBmdW5jdGlvbiBmdW5jdGlvbkNhbGxlcihuYW1lLCBjb250ZXh0LCBpbmRleCwgY3VycmVudEZpbGVJbmZvKSB7DQogICAgICAgICAgICB0aGlzLm5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7DQogICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0Ow0KICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgICAgICB0aGlzLmZ1bmMgPSBjb250ZXh0LmZyYW1lc1swXS5mdW5jdGlvblJlZ2lzdHJ5LmdldCh0aGlzLm5hbWUpOw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uQ2FsbGVyLnByb3RvdHlwZS5pc1ZhbGlkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5mdW5jKTsNCiAgICAgICAgfTsNCiAgICAgICAgZnVuY3Rpb25DYWxsZXIucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoYXJncykgew0KICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgICAgICAgIGlmICghKEFycmF5LmlzQXJyYXkoYXJncykpKSB7DQogICAgICAgICAgICAgICAgYXJncyA9IFthcmdzXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBldmFsQXJncyA9IHRoaXMuZnVuYy5ldmFsQXJnczsNCiAgICAgICAgICAgIGlmIChldmFsQXJncyAhPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICBhcmdzID0gYXJncy5tYXAoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEuZXZhbChfdGhpcy5jb250ZXh0KTsgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgY29tbWVudEZpbHRlciA9IGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiAhKGl0ZW0udHlwZSA9PT0gJ0NvbW1lbnQnKTsgfTsNCiAgICAgICAgICAgIC8vIFRoaXMgY29kZSBpcyB0ZXJyaWJsZSBhbmQgc2hvdWxkIGJlIHJlcGxhY2VkIGFzIHBlciB0aGlzIGlzc3VlLi4uDQogICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbGVzcy9sZXNzLmpzL2lzc3Vlcy8yNDc3DQogICAgICAgICAgICBhcmdzID0gYXJncw0KICAgICAgICAgICAgICAgIC5maWx0ZXIoY29tbWVudEZpbHRlcikNCiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChpdGVtKSB7DQogICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ0V4cHJlc3Npb24nKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBzdWJOb2RlcyA9IGl0ZW0udmFsdWUuZmlsdGVyKGNvbW1lbnRGaWx0ZXIpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoc3ViTm9kZXMubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbGVzcy9sZXNzLmpzL2lzc3Vlcy8zNjE2DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5wYXJlbnMgJiYgc3ViTm9kZXNbMF0ub3AgPT09ICcvJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1Yk5vZGVzWzBdOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uKHN1Yk5vZGVzKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgaWYgKGV2YWxBcmdzID09PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZ1bmMuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbdGhpcy5jb250ZXh0XSwgYXJncykpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnVuYy5hcHBseSh0aGlzLCBhcmdzKTsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uQ2FsbGVyOw0KICAgIH0oKSk7CgogICAgLy8NCiAgICAvLyBBIGZ1bmN0aW9uIGNhbGwgbm9kZS4NCiAgICAvLw0KICAgIHZhciBDYWxsID0gZnVuY3Rpb24gKG5hbWUsIGFyZ3MsIGluZGV4LCBjdXJyZW50RmlsZUluZm8pIHsNCiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTsNCiAgICAgICAgdGhpcy5hcmdzID0gYXJnczsNCiAgICAgICAgdGhpcy5jYWxjID0gbmFtZSA9PT0gJ2NhbGMnOw0KICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4Ow0KICAgICAgICB0aGlzLl9maWxlSW5mbyA9IGN1cnJlbnRGaWxlSW5mbzsNCiAgICB9Ow0KICAgIENhbGwucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdDYWxsJywNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgaWYgKHRoaXMuYXJncykgew0KICAgICAgICAgICAgICAgIHRoaXMuYXJncyA9IHZpc2l0b3IudmlzaXRBcnJheSh0aGlzLmFyZ3MpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvLw0KICAgICAgICAvLyBXaGVuIGV2YWx1YXRpbmcgYSBmdW5jdGlvbiBjYWxsLA0KICAgICAgICAvLyB3ZSBlaXRoZXIgZmluZCB0aGUgZnVuY3Rpb24gaW4gdGhlIGZ1bmN0aW9uUmVnaXN0cnksDQogICAgICAgIC8vIGluIHdoaWNoIGNhc2Ugd2UgY2FsbCBpdCwgcGFzc2luZyB0aGUgIGV2YWx1YXRlZCBhcmd1bWVudHMsDQogICAgICAgIC8vIGlmIHRoaXMgcmV0dXJucyBudWxsIG9yIHdlIGNhbm5vdCBmaW5kIHRoZSBmdW5jdGlvbiwgd2UNCiAgICAgICAgLy8gc2ltcGx5IHByaW50IGl0IG91dCBhcyBpdCBhcHBlYXJlZCBvcmlnaW5hbGx5IFsyXS4NCiAgICAgICAgLy8NCiAgICAgICAgLy8gVGhlIHJlYXNvbiB3aHkgd2UgZXZhbHVhdGUgdGhlIGFyZ3VtZW50cywgaXMgaW4gdGhlIGNhc2Ugd2hlcmUNCiAgICAgICAgLy8gd2UgdHJ5IHRvIHBhc3MgYSB2YXJpYWJsZSB0byBhIGZ1bmN0aW9uLCBsaWtlOiBgc2F0dXJhdGUoQGNvbG9yKWAuDQogICAgICAgIC8vIFRoZSBmdW5jdGlvbiBzaG91bGQgcmVjZWl2ZSB0aGUgdmFsdWUsIG5vdCB0aGUgdmFyaWFibGUuDQogICAgICAgIC8vDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiBUdXJuIG9mZiBtYXRoIGZvciBjYWxjKCksIGFuZCBzd2l0Y2ggYmFjayBvbiBmb3IgZXZhbHVhdGluZyBuZXN0ZWQgZnVuY3Rpb25zDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIHZhciBjdXJyZW50TWF0aENvbnRleHQgPSBjb250ZXh0Lm1hdGhPbjsNCiAgICAgICAgICAgIGNvbnRleHQubWF0aE9uID0gIXRoaXMuY2FsYzsNCiAgICAgICAgICAgIGlmICh0aGlzLmNhbGMgfHwgY29udGV4dC5pbkNhbGMpIHsNCiAgICAgICAgICAgICAgICBjb250ZXh0LmVudGVyQ2FsYygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGV4aXRDYWxjID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jYWxjIHx8IGNvbnRleHQuaW5DYWxjKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZXhpdENhbGMoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29udGV4dC5tYXRoT24gPSBjdXJyZW50TWF0aENvbnRleHQ7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdmFyIHJlc3VsdDsNCiAgICAgICAgICAgIHZhciBmdW5jQ2FsbGVyID0gbmV3IGZ1bmN0aW9uQ2FsbGVyKHRoaXMubmFtZSwgY29udGV4dCwgdGhpcy5nZXRJbmRleCgpLCB0aGlzLmZpbGVJbmZvKCkpOw0KICAgICAgICAgICAgaWYgKGZ1bmNDYWxsZXIuaXNWYWxpZCgpKSB7DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuY0NhbGxlci5jYWxsKHRoaXMuYXJncyk7DQogICAgICAgICAgICAgICAgICAgIGV4aXRDYWxjKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChlLmhhc093blByb3BlcnR5KCdsaW5lJykgJiYgZS5oYXNPd25Qcm9wZXJ0eSgnY29sdW1uJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgew0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZS50eXBlIHx8ICdSdW50aW1lJywNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJFcnJvciBldmFsdWF0aW5nIGZ1bmN0aW9uIGAiICsgdGhpcy5uYW1lICsgImAiICsgKGUubWVzc2FnZSA/ICI6ICIgKyBlLm1lc3NhZ2UgOiAnJyksDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5nZXRJbmRleCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHRoaXMuZmlsZUluZm8oKS5maWxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IGUubGluZU51bWJlciwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogZS5jb2x1bW5OdW1iZXINCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAocmVzdWx0ICE9PSBudWxsICYmIHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgLy8gUmVzdWx0cyB0aGF0IHRoYXQgYXJlIG5vdCBub2RlcyBhcmUgY2FzdCBhcyBBbm9ueW1vdXMgbm9kZXMNCiAgICAgICAgICAgICAgICAvLyBGYWxzeSB2YWx1ZXMgb3IgYm9vbGVhbnMgYXJlIHJldHVybmVkIGFzIGVtcHR5IG5vZGVzDQogICAgICAgICAgICAgICAgaWYgKCEocmVzdWx0IGluc3RhbmNlb2YgTm9kZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQgfHwgcmVzdWx0ID09PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgQW5vbnltb3VzKG51bGwpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEFub255bW91cyhyZXN1bHQudG9TdHJpbmcoKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmVzdWx0Ll9pbmRleCA9IHRoaXMuX2luZGV4Ow0KICAgICAgICAgICAgICAgIHJlc3VsdC5fZmlsZUluZm8gPSB0aGlzLl9maWxlSW5mbzsNCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGFyZ3MgPSB0aGlzLmFyZ3MubWFwKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLmV2YWwoY29udGV4dCk7IH0pOw0KICAgICAgICAgICAgZXhpdENhbGMoKTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgQ2FsbCh0aGlzLm5hbWUsIGFyZ3MsIHRoaXMuZ2V0SW5kZXgoKSwgdGhpcy5maWxlSW5mbygpKTsNCiAgICAgICAgfSwNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBvdXRwdXQuYWRkKHRoaXMubmFtZSArICIoIiwgdGhpcy5maWxlSW5mbygpLCB0aGlzLmdldEluZGV4KCkpOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFyZ3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICB0aGlzLmFyZ3NbaV0uZ2VuQ1NTKGNvbnRleHQsIG91dHB1dCk7DQogICAgICAgICAgICAgICAgaWYgKGkgKyAxIDwgdGhpcy5hcmdzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKCcsICcpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG91dHB1dC5hZGQoJyknKTsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBWYXJpYWJsZSA9IGZ1bmN0aW9uIChuYW1lLCBpbmRleCwgY3VycmVudEZpbGVJbmZvKSB7DQogICAgICAgIHRoaXMubmFtZSA9IG5hbWU7DQogICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7DQogICAgICAgIHRoaXMuX2ZpbGVJbmZvID0gY3VycmVudEZpbGVJbmZvOw0KICAgIH07DQogICAgVmFyaWFibGUucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdWYXJpYWJsZScsDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgdmFyaWFibGUsIG5hbWUgPSB0aGlzLm5hbWU7DQogICAgICAgICAgICBpZiAobmFtZS5pbmRleE9mKCdAQCcpID09PSAwKSB7DQogICAgICAgICAgICAgICAgbmFtZSA9ICJAIiArIG5ldyBWYXJpYWJsZShuYW1lLnNsaWNlKDEpLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSkuZXZhbChjb250ZXh0KS52YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLmV2YWx1YXRpbmcpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdOYW1lJywNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIlJlY3Vyc2l2ZSB2YXJpYWJsZSBkZWZpbml0aW9uIGZvciAiICsgbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHRoaXMuZmlsZUluZm8oKS5maWxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuZ2V0SW5kZXgoKSB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5ldmFsdWF0aW5nID0gdHJ1ZTsNCiAgICAgICAgICAgIHZhcmlhYmxlID0gdGhpcy5maW5kKGNvbnRleHQuZnJhbWVzLCBmdW5jdGlvbiAoZnJhbWUpIHsNCiAgICAgICAgICAgICAgICB2YXIgdiA9IGZyYW1lLnZhcmlhYmxlKG5hbWUpOw0KICAgICAgICAgICAgICAgIGlmICh2KSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh2LmltcG9ydGFudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltcG9ydGFudFNjb3BlID0gY29udGV4dC5pbXBvcnRhbnRTY29wZVtjb250ZXh0LmltcG9ydGFudFNjb3BlLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0YW50U2NvcGUuaW1wb3J0YW50ID0gdi5pbXBvcnRhbnQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaW4gY2FsYywgd3JhcCB2YXJzIGluIGEgZnVuY3Rpb24gY2FsbCB0byBjYXNjYWRlIGV2YWx1YXRlIGFyZ3MgZmlyc3QNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuaW5DYWxjKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG5ldyBDYWxsKCdfU0VMRicsIFt2LnZhbHVlXSkpLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdi52YWx1ZS5ldmFsKGNvbnRleHQpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZiAodmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmV2YWx1YXRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdmFyaWFibGU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdOYW1lJywNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogInZhcmlhYmxlICIgKyBuYW1lICsgIiBpcyB1bmRlZmluZWQiLA0KICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lLA0KICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5nZXRJbmRleCgpIH07DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGZpbmQ6IGZ1bmN0aW9uIChvYmosIGZ1bikgew0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIHIgPSB2b2lkIDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICByID0gZnVuLmNhbGwob2JqLCBvYmpbaV0pOw0KICAgICAgICAgICAgICAgIGlmIChyKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIFByb3BlcnR5ID0gZnVuY3Rpb24gKG5hbWUsIGluZGV4LCBjdXJyZW50RmlsZUluZm8pIHsNCiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgfTsNCiAgICBQcm9wZXJ0eS5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ1Byb3BlcnR5JywNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciBwcm9wZXJ0eTsNCiAgICAgICAgICAgIHZhciBuYW1lID0gdGhpcy5uYW1lOw0KICAgICAgICAgICAgLy8gVE9ETzogc2hvcnRlbiB0aGlzIHJlZmVyZW5jZQ0KICAgICAgICAgICAgdmFyIG1lcmdlUnVsZXMgPSBjb250ZXh0LnBsdWdpbk1hbmFnZXIubGVzcy52aXNpdG9ycy5Ub0NTU1Zpc2l0b3IucHJvdG90eXBlLl9tZXJnZVJ1bGVzOw0KICAgICAgICAgICAgaWYgKHRoaXMuZXZhbHVhdGluZykgew0KICAgICAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ05hbWUnLA0KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAiUmVjdXJzaXZlIHByb3BlcnR5IHJlZmVyZW5jZSBmb3IgIiArIG5hbWUsDQogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiB0aGlzLmZpbGVJbmZvKCkuZmlsZW5hbWUsDQogICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmdldEluZGV4KCkgfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZXZhbHVhdGluZyA9IHRydWU7DQogICAgICAgICAgICBwcm9wZXJ0eSA9IHRoaXMuZmluZChjb250ZXh0LmZyYW1lcywgZnVuY3Rpb24gKGZyYW1lKSB7DQogICAgICAgICAgICAgICAgdmFyIHY7DQogICAgICAgICAgICAgICAgdmFyIHZBcnIgPSBmcmFtZS5wcm9wZXJ0eShuYW1lKTsNCiAgICAgICAgICAgICAgICBpZiAodkFycikgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZBcnIubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSB2QXJyW2ldOw0KICAgICAgICAgICAgICAgICAgICAgICAgdkFycltpXSA9IG5ldyBEZWNsYXJhdGlvbih2Lm5hbWUsIHYudmFsdWUsIHYuaW1wb3J0YW50LCB2Lm1lcmdlLCB2LmluZGV4LCB2LmN1cnJlbnRGaWxlSW5mbywgdi5pbmxpbmUsIHYudmFyaWFibGUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIG1lcmdlUnVsZXModkFycik7DQogICAgICAgICAgICAgICAgICAgIHYgPSB2QXJyW3ZBcnIubGVuZ3RoIC0gMV07DQogICAgICAgICAgICAgICAgICAgIGlmICh2LmltcG9ydGFudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltcG9ydGFudFNjb3BlID0gY29udGV4dC5pbXBvcnRhbnRTY29wZVtjb250ZXh0LmltcG9ydGFudFNjb3BlLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0YW50U2NvcGUuaW1wb3J0YW50ID0gdi5pbXBvcnRhbnQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdiA9IHYudmFsdWUuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHY7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZiAocHJvcGVydHkpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmV2YWx1YXRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcGVydHk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdOYW1lJywNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIlByb3BlcnR5ICciICsgbmFtZSArICInIGlzIHVuZGVmaW5lZCIsDQogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiB0aGlzLmN1cnJlbnRGaWxlSW5mby5maWxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuaW5kZXggfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZmluZDogZnVuY3Rpb24gKG9iaiwgZnVuKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgciA9IHZvaWQgMDsgaSA8IG9iai5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHIgPSBmdW4uY2FsbChvYmosIG9ialtpXSk7DQogICAgICAgICAgICAgICAgaWYgKHIpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgQXR0cmlidXRlID0gZnVuY3Rpb24gKGtleSwgb3AsIHZhbHVlKSB7DQogICAgICAgIHRoaXMua2V5ID0ga2V5Ow0KICAgICAgICB0aGlzLm9wID0gb3A7DQogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsNCiAgICB9Ow0KICAgIEF0dHJpYnV0ZS5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ0F0dHJpYnV0ZScsDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZSh0aGlzLmtleS5ldmFsID8gdGhpcy5rZXkuZXZhbChjb250ZXh0KSA6IHRoaXMua2V5LCB0aGlzLm9wLCAodGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlLmV2YWwpID8gdGhpcy52YWx1ZS5ldmFsKGNvbnRleHQpIDogdGhpcy52YWx1ZSk7DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLnRvQ1NTKGNvbnRleHQpKTsNCiAgICAgICAgfSwNCiAgICAgICAgdG9DU1M6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmtleS50b0NTUyA/IHRoaXMua2V5LnRvQ1NTKGNvbnRleHQpIDogdGhpcy5rZXk7DQogICAgICAgICAgICBpZiAodGhpcy5vcCkgew0KICAgICAgICAgICAgICAgIHZhbHVlICs9IHRoaXMub3A7DQogICAgICAgICAgICAgICAgdmFsdWUgKz0gKHRoaXMudmFsdWUudG9DU1MgPyB0aGlzLnZhbHVlLnRvQ1NTKGNvbnRleHQpIDogdGhpcy52YWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gIlsiICsgdmFsdWUgKyAiXSI7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgUXVvdGVkID0gZnVuY3Rpb24gKHN0ciwgY29udGVudCwgZXNjYXBlZCwgaW5kZXgsIGN1cnJlbnRGaWxlSW5mbykgew0KICAgICAgICB0aGlzLmVzY2FwZWQgPSAoZXNjYXBlZCA9PSBudWxsKSA/IHRydWUgOiBlc2NhcGVkOw0KICAgICAgICB0aGlzLnZhbHVlID0gY29udGVudCB8fCAnJzsNCiAgICAgICAgdGhpcy5xdW90ZSA9IHN0ci5jaGFyQXQoMCk7DQogICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7DQogICAgICAgIHRoaXMuX2ZpbGVJbmZvID0gY3VycmVudEZpbGVJbmZvOw0KICAgICAgICB0aGlzLnZhcmlhYmxlUmVnZXggPSAvQFx7KFtcdy1dKylcfS9nOw0KICAgICAgICB0aGlzLnByb3BSZWdleCA9IC9cJFx7KFtcdy1dKylcfS9nOw0KICAgICAgICB0aGlzLmFsbG93Um9vdCA9IGVzY2FwZWQ7DQogICAgfTsNCiAgICBRdW90ZWQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdRdW90ZWQnLA0KICAgICAgICBnZW5DU1M6IGZ1bmN0aW9uIChjb250ZXh0LCBvdXRwdXQpIHsNCiAgICAgICAgICAgIGlmICghdGhpcy5lc2NhcGVkKSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCh0aGlzLnF1b3RlLCB0aGlzLmZpbGVJbmZvKCksIHRoaXMuZ2V0SW5kZXgoKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBvdXRwdXQuYWRkKHRoaXMudmFsdWUpOw0KICAgICAgICAgICAgaWYgKCF0aGlzLmVzY2FwZWQpIHsNCiAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKHRoaXMucXVvdGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjb250YWluc1ZhcmlhYmxlczogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUubWF0Y2godGhpcy52YXJpYWJsZVJlZ2V4KTsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsNCiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWU7DQogICAgICAgICAgICB2YXIgdmFyaWFibGVSZXBsYWNlbWVudCA9IGZ1bmN0aW9uIChfLCBuYW1lKSB7DQogICAgICAgICAgICAgICAgdmFyIHYgPSBuZXcgVmFyaWFibGUoIkAiICsgbmFtZSwgdGhhdC5nZXRJbmRleCgpLCB0aGF0LmZpbGVJbmZvKCkpLmV2YWwoY29udGV4dCwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuICh2IGluc3RhbmNlb2YgUXVvdGVkKSA/IHYudmFsdWUgOiB2LnRvQ1NTKCk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdmFyIHByb3BlcnR5UmVwbGFjZW1lbnQgPSBmdW5jdGlvbiAoXywgbmFtZSkgew0KICAgICAgICAgICAgICAgIHZhciB2ID0gbmV3IFByb3BlcnR5KCIkIiArIG5hbWUsIHRoYXQuZ2V0SW5kZXgoKSwgdGhhdC5maWxlSW5mbygpKS5ldmFsKGNvbnRleHQsIHRydWUpOw0KICAgICAgICAgICAgICAgIHJldHVybiAodiBpbnN0YW5jZW9mIFF1b3RlZCkgPyB2LnZhbHVlIDogdi50b0NTUygpOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIGZ1bmN0aW9uIGl0ZXJhdGl2ZVJlcGxhY2UodmFsdWUsIHJlZ2V4cCwgcmVwbGFjZW1lbnRGbmMpIHsNCiAgICAgICAgICAgICAgICB2YXIgZXZhbHVhdGVkVmFsdWUgPSB2YWx1ZTsNCiAgICAgICAgICAgICAgICBkbyB7DQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZXZhbHVhdGVkVmFsdWUudG9TdHJpbmcoKTsNCiAgICAgICAgICAgICAgICAgICAgZXZhbHVhdGVkVmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlZ2V4cCwgcmVwbGFjZW1lbnRGbmMpOw0KICAgICAgICAgICAgICAgIH0gd2hpbGUgKHZhbHVlICE9PSBldmFsdWF0ZWRWYWx1ZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGV2YWx1YXRlZFZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFsdWUgPSBpdGVyYXRpdmVSZXBsYWNlKHZhbHVlLCB0aGlzLnZhcmlhYmxlUmVnZXgsIHZhcmlhYmxlUmVwbGFjZW1lbnQpOw0KICAgICAgICAgICAgdmFsdWUgPSBpdGVyYXRpdmVSZXBsYWNlKHZhbHVlLCB0aGlzLnByb3BSZWdleCwgcHJvcGVydHlSZXBsYWNlbWVudCk7DQogICAgICAgICAgICByZXR1cm4gbmV3IFF1b3RlZCh0aGlzLnF1b3RlICsgdmFsdWUgKyB0aGlzLnF1b3RlLCB2YWx1ZSwgdGhpcy5lc2NhcGVkLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSk7DQogICAgICAgIH0sDQogICAgICAgIGNvbXBhcmU6IGZ1bmN0aW9uIChvdGhlcikgew0KICAgICAgICAgICAgLy8gd2hlbiBjb21wYXJpbmcgcXVvdGVkIHN0cmluZ3MgYWxsb3cgdGhlIHF1b3RlIHRvIGRpZmZlcg0KICAgICAgICAgICAgaWYgKG90aGVyLnR5cGUgPT09ICdRdW90ZWQnICYmICF0aGlzLmVzY2FwZWQgJiYgIW90aGVyLmVzY2FwZWQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gTm9kZS5udW1lcmljQ29tcGFyZSh0aGlzLnZhbHVlLCBvdGhlci52YWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gb3RoZXIudG9DU1MgJiYgdGhpcy50b0NTUygpID09PSBvdGhlci50b0NTUygpID8gMCA6IHVuZGVmaW5lZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIGZ1bmN0aW9uIGVzY2FwZVBhdGgocGF0aCkgew0KICAgICAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9bXChcKSciXHNdL2csIGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gIlxcIiArIG1hdGNoOyB9KTsNCiAgICB9DQogICAgdmFyIFVSTCA9IGZ1bmN0aW9uICh2YWwsIGluZGV4LCBjdXJyZW50RmlsZUluZm8sIGlzRXZhbGQpIHsNCiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbDsNCiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5fZmlsZUluZm8gPSBjdXJyZW50RmlsZUluZm87DQogICAgICAgIHRoaXMuaXNFdmFsZCA9IGlzRXZhbGQ7DQogICAgfTsNCiAgICBVUkwucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdVcmwnLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICB0aGlzLnZhbHVlID0gdmlzaXRvci52aXNpdCh0aGlzLnZhbHVlKTsNCiAgICAgICAgfSwNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBvdXRwdXQuYWRkKCd1cmwoJyk7DQogICAgICAgICAgICB0aGlzLnZhbHVlLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgb3V0cHV0LmFkZCgnKScpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHZhbCA9IHRoaXMudmFsdWUuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIHZhciByb290cGF0aDsNCiAgICAgICAgICAgIGlmICghdGhpcy5pc0V2YWxkKSB7DQogICAgICAgICAgICAgICAgLy8gQWRkIHRoZSByb290cGF0aCBpZiB0aGUgVVJMIHJlcXVpcmVzIGEgcmV3cml0ZQ0KICAgICAgICAgICAgICAgIHJvb3RwYXRoID0gdGhpcy5maWxlSW5mbygpICYmIHRoaXMuZmlsZUluZm8oKS5yb290cGF0aDsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJvb3RwYXRoID09PSAnc3RyaW5nJyAmJg0KICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdmFsLnZhbHVlID09PSAnc3RyaW5nJyAmJg0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnBhdGhSZXF1aXJlc1Jld3JpdGUodmFsLnZhbHVlKSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbC5xdW90ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcm9vdHBhdGggPSBlc2NhcGVQYXRoKHJvb3RwYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB2YWwudmFsdWUgPSBjb250ZXh0LnJld3JpdGVQYXRoKHZhbC52YWx1ZSwgcm9vdHBhdGgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdmFsLnZhbHVlID0gY29udGV4dC5ub3JtYWxpemVQYXRoKHZhbC52YWx1ZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIEFkZCB1cmwgYXJncyBpZiBlbmFibGVkDQogICAgICAgICAgICAgICAgaWYgKGNvbnRleHQudXJsQXJncykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbC52YWx1ZS5tYXRjaCgvXlxzKmRhdGE6LykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWxpbWl0ZXIgPSB2YWwudmFsdWUuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmxBcmdzID0gZGVsaW1pdGVyICsgY29udGV4dC51cmxBcmdzOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbC52YWx1ZS5pbmRleE9mKCcjJykgIT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsLnZhbHVlID0gdmFsLnZhbHVlLnJlcGxhY2UoJyMnLCB1cmxBcmdzICsgIiMiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbC52YWx1ZSArPSB1cmxBcmdzOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBVUkwodmFsLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSwgdHJ1ZSk7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgTWVkaWEgPSBmdW5jdGlvbiAodmFsdWUsIGZlYXR1cmVzLCBpbmRleCwgY3VycmVudEZpbGVJbmZvLCB2aXNpYmlsaXR5SW5mbykgew0KICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4Ow0KICAgICAgICB0aGlzLl9maWxlSW5mbyA9IGN1cnJlbnRGaWxlSW5mbzsNCiAgICAgICAgdmFyIHNlbGVjdG9ycyA9IChuZXcgU2VsZWN0b3IoW10sIG51bGwsIG51bGwsIHRoaXMuX2luZGV4LCB0aGlzLl9maWxlSW5mbykpLmNyZWF0ZUVtcHR5U2VsZWN0b3JzKCk7DQogICAgICAgIHRoaXMuZmVhdHVyZXMgPSBuZXcgVmFsdWUoZmVhdHVyZXMpOw0KICAgICAgICB0aGlzLnJ1bGVzID0gW25ldyBSdWxlc2V0KHNlbGVjdG9ycywgdmFsdWUpXTsNCiAgICAgICAgdGhpcy5ydWxlc1swXS5hbGxvd0ltcG9ydHMgPSB0cnVlOw0KICAgICAgICB0aGlzLmNvcHlWaXNpYmlsaXR5SW5mbyh2aXNpYmlsaXR5SW5mbyk7DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQoc2VsZWN0b3JzLCB0aGlzKTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5mZWF0dXJlcywgdGhpcyk7DQogICAgICAgIHRoaXMuc2V0UGFyZW50KHRoaXMucnVsZXMsIHRoaXMpOw0KICAgIH07DQogICAgTWVkaWEucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgQXRSdWxlKCksIHsNCiAgICAgICAgdHlwZTogJ01lZGlhJywNCiAgICAgICAgaXNSdWxlc2V0TGlrZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0sDQogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gKHZpc2l0b3IpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmZlYXR1cmVzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IHZpc2l0b3IudmlzaXQodGhpcy5mZWF0dXJlcyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy5ydWxlcykgew0KICAgICAgICAgICAgICAgIHRoaXMucnVsZXMgPSB2aXNpdG9yLnZpc2l0QXJyYXkodGhpcy5ydWxlcyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGdlbkNTUzogZnVuY3Rpb24gKGNvbnRleHQsIG91dHB1dCkgew0KICAgICAgICAgICAgb3V0cHV0LmFkZCgnQG1lZGlhICcsIHRoaXMuX2ZpbGVJbmZvLCB0aGlzLl9pbmRleCk7DQogICAgICAgICAgICB0aGlzLmZlYXR1cmVzLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICAgICAgdGhpcy5vdXRwdXRSdWxlc2V0KGNvbnRleHQsIG91dHB1dCwgdGhpcy5ydWxlcyk7DQogICAgICAgIH0sDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICBpZiAoIWNvbnRleHQubWVkaWFCbG9ja3MpIHsNCiAgICAgICAgICAgICAgICBjb250ZXh0Lm1lZGlhQmxvY2tzID0gW107DQogICAgICAgICAgICAgICAgY29udGV4dC5tZWRpYVBhdGggPSBbXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBtZWRpYSA9IG5ldyBNZWRpYShudWxsLCBbXSwgdGhpcy5faW5kZXgsIHRoaXMuX2ZpbGVJbmZvLCB0aGlzLnZpc2liaWxpdHlJbmZvKCkpOw0KICAgICAgICAgICAgaWYgKHRoaXMuZGVidWdJbmZvKSB7DQogICAgICAgICAgICAgICAgdGhpcy5ydWxlc1swXS5kZWJ1Z0luZm8gPSB0aGlzLmRlYnVnSW5mbzsNCiAgICAgICAgICAgICAgICBtZWRpYS5kZWJ1Z0luZm8gPSB0aGlzLmRlYnVnSW5mbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG1lZGlhLmZlYXR1cmVzID0gdGhpcy5mZWF0dXJlcy5ldmFsKGNvbnRleHQpOw0KICAgICAgICAgICAgY29udGV4dC5tZWRpYVBhdGgucHVzaChtZWRpYSk7DQogICAgICAgICAgICBjb250ZXh0Lm1lZGlhQmxvY2tzLnB1c2gobWVkaWEpOw0KICAgICAgICAgICAgdGhpcy5ydWxlc1swXS5mdW5jdGlvblJlZ2lzdHJ5ID0gY29udGV4dC5mcmFtZXNbMF0uZnVuY3Rpb25SZWdpc3RyeS5pbmhlcml0KCk7DQogICAgICAgICAgICBjb250ZXh0LmZyYW1lcy51bnNoaWZ0KHRoaXMucnVsZXNbMF0pOw0KICAgICAgICAgICAgbWVkaWEucnVsZXMgPSBbdGhpcy5ydWxlc1swXS5ldmFsKGNvbnRleHQpXTsNCiAgICAgICAgICAgIGNvbnRleHQuZnJhbWVzLnNoaWZ0KCk7DQogICAgICAgICAgICBjb250ZXh0Lm1lZGlhUGF0aC5wb3AoKTsNCiAgICAgICAgICAgIHJldHVybiBjb250ZXh0Lm1lZGlhUGF0aC5sZW5ndGggPT09IDAgPyBtZWRpYS5ldmFsVG9wKGNvbnRleHQpIDoNCiAgICAgICAgICAgICAgICBtZWRpYS5ldmFsTmVzdGVkKGNvbnRleHQpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsVG9wOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXM7DQogICAgICAgICAgICAvLyBSZW5kZXIgYWxsIGRlcGVuZGVudCBNZWRpYSBibG9ja3MuDQogICAgICAgICAgICBpZiAoY29udGV4dC5tZWRpYUJsb2Nrcy5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9ycyA9IChuZXcgU2VsZWN0b3IoW10sIG51bGwsIG51bGwsIHRoaXMuZ2V0SW5kZXgoKSwgdGhpcy5maWxlSW5mbygpKSkuY3JlYXRlRW1wdHlTZWxlY3RvcnMoKTsNCiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgUnVsZXNldChzZWxlY3RvcnMsIGNvbnRleHQubWVkaWFCbG9ja3MpOw0KICAgICAgICAgICAgICAgIHJlc3VsdC5tdWx0aU1lZGlhID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICByZXN1bHQuY29weVZpc2liaWxpdHlJbmZvKHRoaXMudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgICAgICAgICAgdGhpcy5zZXRQYXJlbnQocmVzdWx0LCB0aGlzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGRlbGV0ZSBjb250ZXh0Lm1lZGlhQmxvY2tzOw0KICAgICAgICAgICAgZGVsZXRlIGNvbnRleHQubWVkaWFQYXRoOw0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbE5lc3RlZDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciBpOw0KICAgICAgICAgICAgdmFyIHZhbHVlOw0KICAgICAgICAgICAgdmFyIHBhdGggPSBjb250ZXh0Lm1lZGlhUGF0aC5jb25jYXQoW3RoaXNdKTsNCiAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIG1lZGlhLXF1ZXJ5IGNvbmRpdGlvbnMgc2VwYXJhdGVkIHdpdGggYCxgIChPUikuDQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHZhbHVlID0gcGF0aFtpXS5mZWF0dXJlcyBpbnN0YW5jZW9mIFZhbHVlID8NCiAgICAgICAgICAgICAgICAgICAgcGF0aFtpXS5mZWF0dXJlcy52YWx1ZSA6IHBhdGhbaV0uZmVhdHVyZXM7DQogICAgICAgICAgICAgICAgcGF0aFtpXSA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gVHJhY2UgYWxsIHBlcm11dGF0aW9ucyB0byBnZW5lcmF0ZSB0aGUgcmVzdWx0aW5nIG1lZGlhLXF1ZXJ5Lg0KICAgICAgICAgICAgLy8NCiAgICAgICAgICAgIC8vIChhLCBiIGFuZCBjKSB3aXRoIG5lc3RlZCAoZCwgZSkgLT4NCiAgICAgICAgICAgIC8vICAgIGEgYW5kIGQNCiAgICAgICAgICAgIC8vICAgIGEgYW5kIGUNCiAgICAgICAgICAgIC8vICAgIGIgYW5kIGMgYW5kIGQNCiAgICAgICAgICAgIC8vICAgIGIgYW5kIGMgYW5kIGUNCiAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBuZXcgVmFsdWUodGhpcy5wZXJtdXRlKHBhdGgpLm1hcChmdW5jdGlvbiAocGF0aCkgew0KICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLm1hcChmdW5jdGlvbiAoZnJhZ21lbnQpIHsgcmV0dXJuIGZyYWdtZW50LnRvQ1NTID8gZnJhZ21lbnQgOiBuZXcgQW5vbnltb3VzKGZyYWdtZW50KTsgfSk7DQogICAgICAgICAgICAgICAgZm9yIChpID0gcGF0aC5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7DQogICAgICAgICAgICAgICAgICAgIHBhdGguc3BsaWNlKGksIDAsIG5ldyBBbm9ueW1vdXMoJ2FuZCcpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uKHBhdGgpOw0KICAgICAgICAgICAgfSkpOw0KICAgICAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5mZWF0dXJlcywgdGhpcyk7DQogICAgICAgICAgICAvLyBGYWtlIGEgdHJlZS1ub2RlIHRoYXQgZG9lc24ndCBvdXRwdXQgYW55dGhpbmcuDQogICAgICAgICAgICByZXR1cm4gbmV3IFJ1bGVzZXQoW10sIFtdKTsNCiAgICAgICAgfSwNCiAgICAgICAgcGVybXV0ZTogZnVuY3Rpb24gKGFycikgew0KICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gW107DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChhcnIubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGFyclswXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgICAgICAgICAgICB2YXIgcmVzdCA9IHRoaXMucGVybXV0ZShhcnIuc2xpY2UoMSkpOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFyclswXS5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goW2FyclswXVtqXV0uY29uY2F0KHJlc3RbaV0pKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBidWJibGVTZWxlY3RvcnM6IGZ1bmN0aW9uIChzZWxlY3RvcnMpIHsNCiAgICAgICAgICAgIGlmICghc2VsZWN0b3JzKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5ydWxlcyA9IFtuZXcgUnVsZXNldChjb3B5QXJyYXkoc2VsZWN0b3JzKSwgW3RoaXMucnVsZXNbMF1dKV07DQogICAgICAgICAgICB0aGlzLnNldFBhcmVudCh0aGlzLnJ1bGVzLCB0aGlzKTsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIC8vDQogICAgLy8gQ1NTIEBpbXBvcnQgbm9kZQ0KICAgIC8vDQogICAgLy8gVGhlIGdlbmVyYWwgc3RyYXRlZ3kgaGVyZSBpcyB0aGF0IHdlIGRvbid0IHdhbnQgdG8gd2FpdA0KICAgIC8vIGZvciB0aGUgcGFyc2luZyB0byBiZSBjb21wbGV0ZWQsIGJlZm9yZSB3ZSBzdGFydCBpbXBvcnRpbmcNCiAgICAvLyB0aGUgZmlsZS4gVGhhdCdzIGJlY2F1c2UgaW4gdGhlIGNvbnRleHQgb2YgYSBicm93c2VyLA0KICAgIC8vIG1vc3Qgb2YgdGhlIHRpbWUgd2lsbCBiZSBzcGVudCB3YWl0aW5nIGZvciB0aGUgc2VydmVyIHRvIHJlc3BvbmQuDQogICAgLy8NCiAgICAvLyBPbiBjcmVhdGlvbiwgd2UgcHVzaCB0aGUgaW1wb3J0IHBhdGggdG8gb3VyIGltcG9ydCBxdWV1ZSwgdGhvdWdoDQogICAgLy8gYGltcG9ydCxwdXNoYCwgd2UgYWxzbyBwYXNzIGl0IGEgY2FsbGJhY2ssIHdoaWNoIGl0J2xsIGNhbGwgb25jZQ0KICAgIC8vIHRoZSBmaWxlIGhhcyBiZWVuIGZldGNoZWQsIGFuZCBwYXJzZWQuDQogICAgLy8NCiAgICB2YXIgSW1wb3J0ID0gZnVuY3Rpb24gKHBhdGgsIGZlYXR1cmVzLCBvcHRpb25zLCBpbmRleCwgY3VycmVudEZpbGVJbmZvLCB2aXNpYmlsaXR5SW5mbykgew0KICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOw0KICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4Ow0KICAgICAgICB0aGlzLl9maWxlSW5mbyA9IGN1cnJlbnRGaWxlSW5mbzsNCiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDsNCiAgICAgICAgdGhpcy5mZWF0dXJlcyA9IGZlYXR1cmVzOw0KICAgICAgICB0aGlzLmFsbG93Um9vdCA9IHRydWU7DQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMubGVzcyAhPT0gdW5kZWZpbmVkIHx8IHRoaXMub3B0aW9ucy5pbmxpbmUpIHsNCiAgICAgICAgICAgIHRoaXMuY3NzID0gIXRoaXMub3B0aW9ucy5sZXNzIHx8IHRoaXMub3B0aW9ucy5pbmxpbmU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICB2YXIgcGF0aFZhbHVlID0gdGhpcy5nZXRQYXRoKCk7DQogICAgICAgICAgICBpZiAocGF0aFZhbHVlICYmIC9bI1wuXCZcP11jc3MoW1w/O10uKik/JC8udGVzdChwYXRoVmFsdWUpKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jc3MgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuY29weVZpc2liaWxpdHlJbmZvKHZpc2liaWxpdHlJbmZvKTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5mZWF0dXJlcywgdGhpcyk7DQogICAgICAgIHRoaXMuc2V0UGFyZW50KHRoaXMucGF0aCwgdGhpcyk7DQogICAgfTsNCiAgICBJbXBvcnQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdJbXBvcnQnLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICBpZiAodGhpcy5mZWF0dXJlcykgew0KICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSB2aXNpdG9yLnZpc2l0KHRoaXMuZmVhdHVyZXMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5wYXRoID0gdmlzaXRvci52aXNpdCh0aGlzLnBhdGgpOw0KICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaXNQbHVnaW4gJiYgIXRoaXMub3B0aW9ucy5pbmxpbmUgJiYgdGhpcy5yb290KSB7DQogICAgICAgICAgICAgICAgdGhpcy5yb290ID0gdmlzaXRvci52aXNpdCh0aGlzLnJvb3QpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBnZW5DU1M6IGZ1bmN0aW9uIChjb250ZXh0LCBvdXRwdXQpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmNzcyAmJiB0aGlzLnBhdGguX2ZpbGVJbmZvLnJlZmVyZW5jZSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgb3V0cHV0LmFkZCgnQGltcG9ydCAnLCB0aGlzLl9maWxlSW5mbywgdGhpcy5faW5kZXgpOw0KICAgICAgICAgICAgICAgIHRoaXMucGF0aC5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5mZWF0dXJlcykgew0KICAgICAgICAgICAgICAgICAgICBvdXRwdXQuYWRkKCcgJyk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMuZ2VuQ1NTKGNvbnRleHQsIG91dHB1dCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQoJzsnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZ2V0UGF0aDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuICh0aGlzLnBhdGggaW5zdGFuY2VvZiBVUkwpID8NCiAgICAgICAgICAgICAgICB0aGlzLnBhdGgudmFsdWUudmFsdWUgOiB0aGlzLnBhdGgudmFsdWU7DQogICAgICAgIH0sDQogICAgICAgIGlzVmFyaWFibGVJbXBvcnQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBwYXRoID0gdGhpcy5wYXRoOw0KICAgICAgICAgICAgaWYgKHBhdGggaW5zdGFuY2VvZiBVUkwpIHsNCiAgICAgICAgICAgICAgICBwYXRoID0gcGF0aC52YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChwYXRoIGluc3RhbmNlb2YgUXVvdGVkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHBhdGguY29udGFpbnNWYXJpYWJsZXMoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9LA0KICAgICAgICBldmFsRm9ySW1wb3J0OiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHBhdGggPSB0aGlzLnBhdGg7DQogICAgICAgICAgICBpZiAocGF0aCBpbnN0YW5jZW9mIFVSTCkgew0KICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBJbXBvcnQocGF0aC5ldmFsKGNvbnRleHQpLCB0aGlzLmZlYXR1cmVzLCB0aGlzLm9wdGlvbnMsIHRoaXMuX2luZGV4LCB0aGlzLl9maWxlSW5mbywgdGhpcy52aXNpYmlsaXR5SW5mbygpKTsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbFBhdGg6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgcGF0aCA9IHRoaXMucGF0aC5ldmFsKGNvbnRleHQpOw0KICAgICAgICAgICAgdmFyIGZpbGVJbmZvID0gdGhpcy5fZmlsZUluZm87DQogICAgICAgICAgICBpZiAoIShwYXRoIGluc3RhbmNlb2YgVVJMKSkgew0KICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgcm9vdHBhdGggaWYgdGhlIFVSTCByZXF1aXJlcyBhIHJld3JpdGUNCiAgICAgICAgICAgICAgICB2YXIgcGF0aFZhbHVlID0gcGF0aC52YWx1ZTsNCiAgICAgICAgICAgICAgICBpZiAoZmlsZUluZm8gJiYNCiAgICAgICAgICAgICAgICAgICAgcGF0aFZhbHVlICYmDQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQucGF0aFJlcXVpcmVzUmV3cml0ZShwYXRoVmFsdWUpKSB7DQogICAgICAgICAgICAgICAgICAgIHBhdGgudmFsdWUgPSBjb250ZXh0LnJld3JpdGVQYXRoKHBhdGhWYWx1ZSwgZmlsZUluZm8ucm9vdHBhdGgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcGF0aC52YWx1ZSA9IGNvbnRleHQubm9ybWFsaXplUGF0aChwYXRoLnZhbHVlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcGF0aDsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRvRXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVmZXJlbmNlIHx8IHRoaXMuYmxvY2tzVmlzaWJpbGl0eSgpKSB7DQogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggfHwgcmVzdWx0Lmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICByZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5hZGRWaXNpYmlsaXR5QmxvY2soKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZXN1bHQuYWRkVmlzaWJpbGl0eUJsb2NrKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfSwNCiAgICAgICAgZG9FdmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHJ1bGVzZXQ7DQogICAgICAgICAgICB2YXIgcmVnaXN0cnk7DQogICAgICAgICAgICB2YXIgZmVhdHVyZXMgPSB0aGlzLmZlYXR1cmVzICYmIHRoaXMuZmVhdHVyZXMuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaXNQbHVnaW4pIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5yb290ICYmIHRoaXMucm9vdC5ldmFsKSB7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3QuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZS5tZXNzYWdlID0gJ1BsdWdpbiBlcnJvciBkdXJpbmcgZXZhbHVhdGlvbic7DQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTGVzc0Vycm9yKGUsIHRoaXMucm9vdC5pbXBvcnRzLCB0aGlzLnJvb3QuZmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJlZ2lzdHJ5ID0gY29udGV4dC5mcmFtZXNbMF0gJiYgY29udGV4dC5mcmFtZXNbMF0uZnVuY3Rpb25SZWdpc3RyeTsNCiAgICAgICAgICAgICAgICBpZiAocmVnaXN0cnkgJiYgdGhpcy5yb290ICYmIHRoaXMucm9vdC5mdW5jdGlvbnMpIHsNCiAgICAgICAgICAgICAgICAgICAgcmVnaXN0cnkuYWRkTXVsdGlwbGUodGhpcy5yb290LmZ1bmN0aW9ucyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBbXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLnNraXApIHsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuc2tpcCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNraXAgPSB0aGlzLnNraXAoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuc2tpcCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmxpbmUpIHsNCiAgICAgICAgICAgICAgICB2YXIgY29udGVudHMgPSBuZXcgQW5vbnltb3VzKHRoaXMucm9vdCwgMCwgew0KICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogdGhpcy5pbXBvcnRlZEZpbGVuYW1lLA0KICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2U6IHRoaXMucGF0aC5fZmlsZUluZm8gJiYgdGhpcy5wYXRoLl9maWxlSW5mby5yZWZlcmVuY2UNCiAgICAgICAgICAgICAgICB9LCB0cnVlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZWF0dXJlcyA/IG5ldyBNZWRpYShbY29udGVudHNdLCB0aGlzLmZlYXR1cmVzLnZhbHVlKSA6IFtjb250ZW50c107DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNzcykgew0KICAgICAgICAgICAgICAgIHZhciBuZXdJbXBvcnQgPSBuZXcgSW1wb3J0KHRoaXMuZXZhbFBhdGgoY29udGV4dCksIGZlYXR1cmVzLCB0aGlzLm9wdGlvbnMsIHRoaXMuX2luZGV4KTsNCiAgICAgICAgICAgICAgICBpZiAoIW5ld0ltcG9ydC5jc3MgJiYgdGhpcy5lcnJvcikgew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmVycm9yOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3SW1wb3J0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5yb290KSB7DQogICAgICAgICAgICAgICAgcnVsZXNldCA9IG5ldyBSdWxlc2V0KG51bGwsIGNvcHlBcnJheSh0aGlzLnJvb3QucnVsZXMpKTsNCiAgICAgICAgICAgICAgICBydWxlc2V0LmV2YWxJbXBvcnRzKGNvbnRleHQpOw0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVzID8gbmV3IE1lZGlhKHJ1bGVzZXQucnVsZXMsIHRoaXMuZmVhdHVyZXMudmFsdWUpIDogcnVsZXNldC5ydWxlczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBbXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBKc0V2YWxOb2RlID0gZnVuY3Rpb24gKCkgeyB9Ow0KICAgIEpzRXZhbE5vZGUucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIGV2YWx1YXRlSmF2YVNjcmlwdDogZnVuY3Rpb24gKGV4cHJlc3Npb24sIGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQ7DQogICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7DQogICAgICAgICAgICB2YXIgZXZhbENvbnRleHQgPSB7fTsNCiAgICAgICAgICAgIGlmICghY29udGV4dC5qYXZhc2NyaXB0RW5hYmxlZCkgew0KICAgICAgICAgICAgICAgIHRocm93IHsgbWVzc2FnZTogJ0lubGluZSBKYXZhU2NyaXB0IGlzIG5vdCBlbmFibGVkLiBJcyBpdCBzZXQgaW4geW91ciBvcHRpb25zPycsDQogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiB0aGlzLmZpbGVJbmZvKCkuZmlsZW5hbWUsDQogICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmdldEluZGV4KCkgfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLnJlcGxhY2UoL0BceyhbXHctXSspXH0vZywgZnVuY3Rpb24gKF8sIG5hbWUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5qc2lmeShuZXcgVmFyaWFibGUoIkAiICsgbmFtZSwgdGhhdC5nZXRJbmRleCgpLCB0aGF0LmZpbGVJbmZvKCkpLmV2YWwoY29udGV4dCkpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGV4cHJlc3Npb24gPSBuZXcgRnVuY3Rpb24oInJldHVybiAoIiArIGV4cHJlc3Npb24gKyAiKSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IG1lc3NhZ2U6ICJKYXZhU2NyaXB0IGV2YWx1YXRpb24gZXJyb3I6ICIgKyBlLm1lc3NhZ2UgKyAiIGZyb20gYCIgKyBleHByZXNzaW9uICsgImAiLA0KICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lLA0KICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5nZXRJbmRleCgpIH07DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgdmFyaWFibGVzID0gY29udGV4dC5mcmFtZXNbMF0udmFyaWFibGVzKCk7DQogICAgICAgICAgICBmb3IgKHZhciBrIGluIHZhcmlhYmxlcykgew0KICAgICAgICAgICAgICAgIGlmICh2YXJpYWJsZXMuaGFzT3duUHJvcGVydHkoaykpIHsNCiAgICAgICAgICAgICAgICAgICAgLyoganNoaW50IGxvb3BmdW5jOnRydWUgKi8NCiAgICAgICAgICAgICAgICAgICAgZXZhbENvbnRleHRbay5zbGljZSgxKV0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFyaWFibGVzW2tdLnZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgdG9KUzogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmV2YWwoY29udGV4dCkudG9DU1MoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHJlc3VsdCA9IGV4cHJlc3Npb24uY2FsbChldmFsQ29udGV4dCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIHRocm93IHsgbWVzc2FnZTogIkphdmFTY3JpcHQgZXZhbHVhdGlvbiBlcnJvcjogJyIgKyBlLm5hbWUgKyAiOiAiICsgZS5tZXNzYWdlLnJlcGxhY2UoL1siXS9nLCAnXCcnKSArICInIiwNCiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHRoaXMuZmlsZUluZm8oKS5maWxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuZ2V0SW5kZXgoKSB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfSwNCiAgICAgICAganNpZnk6IGZ1bmN0aW9uIChvYmopIHsNCiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iai52YWx1ZSkgJiYgKG9iai52YWx1ZS5sZW5ndGggPiAxKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAiWyIgKyBvYmoudmFsdWUubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2LnRvQ1NTKCk7IH0pLmpvaW4oJywgJykgKyAiXSI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnRvQ1NTKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgSmF2YVNjcmlwdCA9IGZ1bmN0aW9uIChzdHJpbmcsIGVzY2FwZWQsIGluZGV4LCBjdXJyZW50RmlsZUluZm8pIHsNCiAgICAgICAgdGhpcy5lc2NhcGVkID0gZXNjYXBlZDsNCiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gc3RyaW5nOw0KICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4Ow0KICAgICAgICB0aGlzLl9maWxlSW5mbyA9IGN1cnJlbnRGaWxlSW5mbzsNCiAgICB9Ow0KICAgIEphdmFTY3JpcHQucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgSnNFdmFsTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdKYXZhU2NyaXB0JywNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmV2YWx1YXRlSmF2YVNjcmlwdCh0aGlzLmV4cHJlc3Npb24sIGNvbnRleHQpOw0KICAgICAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgcmVzdWx0Ow0KICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdudW1iZXInICYmICFpc05hTihyZXN1bHQpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEaW1lbnNpb24ocmVzdWx0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBRdW90ZWQoIlwiIiArIHJlc3VsdCArICJcIiIsIHJlc3VsdCwgdGhpcy5lc2NhcGVkLCB0aGlzLl9pbmRleCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdCkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFub255bW91cyhyZXN1bHQuam9pbignLCAnKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFub255bW91cyhyZXN1bHQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIEFzc2lnbm1lbnQgPSBmdW5jdGlvbiAoa2V5LCB2YWwpIHsNCiAgICAgICAgdGhpcy5rZXkgPSBrZXk7DQogICAgICAgIHRoaXMudmFsdWUgPSB2YWw7DQogICAgfTsNCiAgICBBc3NpZ25tZW50LnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnQXNzaWdubWVudCcsDQogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gKHZpc2l0b3IpIHsNCiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2aXNpdG9yLnZpc2l0KHRoaXMudmFsdWUpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUuZXZhbCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXNzaWdubWVudCh0aGlzLmtleSwgdGhpcy52YWx1ZS5ldmFsKGNvbnRleHQpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0aGlzOw0KICAgICAgICB9LA0KICAgICAgICBnZW5DU1M6IGZ1bmN0aW9uIChjb250ZXh0LCBvdXRwdXQpIHsNCiAgICAgICAgICAgIG91dHB1dC5hZGQodGhpcy5rZXkgKyAiPSIpOw0KICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUuZ2VuQ1NTKSB7DQogICAgICAgICAgICAgICAgdGhpcy52YWx1ZS5nZW5DU1MoY29udGV4dCwgb3V0cHV0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIG91dHB1dC5hZGQodGhpcy52YWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgQ29uZGl0aW9uID0gZnVuY3Rpb24gKG9wLCBsLCByLCBpLCBuZWdhdGUpIHsNCiAgICAgICAgdGhpcy5vcCA9IG9wLnRyaW0oKTsNCiAgICAgICAgdGhpcy5sdmFsdWUgPSBsOw0KICAgICAgICB0aGlzLnJ2YWx1ZSA9IHI7DQogICAgICAgIHRoaXMuX2luZGV4ID0gaTsNCiAgICAgICAgdGhpcy5uZWdhdGUgPSBuZWdhdGU7DQogICAgfTsNCiAgICBDb25kaXRpb24ucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdDb25kaXRpb24nLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICB0aGlzLmx2YWx1ZSA9IHZpc2l0b3IudmlzaXQodGhpcy5sdmFsdWUpOw0KICAgICAgICAgICAgdGhpcy5ydmFsdWUgPSB2aXNpdG9yLnZpc2l0KHRoaXMucnZhbHVlKTsNCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSAoZnVuY3Rpb24gKG9wLCBhLCBiKSB7DQogICAgICAgICAgICAgICAgc3dpdGNoIChvcCkgew0KICAgICAgICAgICAgICAgICAgICBjYXNlICdhbmQnOiByZXR1cm4gYSAmJiBiOw0KICAgICAgICAgICAgICAgICAgICBjYXNlICdvcic6IHJldHVybiBhIHx8IGI7DQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKE5vZGUuY29tcGFyZShhLCBiKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgLTE6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcCA9PT0gJzwnIHx8IG9wID09PSAnPTwnIHx8IG9wID09PSAnPD0nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wID09PSAnPScgfHwgb3AgPT09ICc+PScgfHwgb3AgPT09ICc9PCcgfHwgb3AgPT09ICc8PSc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3AgPT09ICc+JyB8fCBvcCA9PT0gJz49JzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkodGhpcy5vcCwgdGhpcy5sdmFsdWUuZXZhbChjb250ZXh0KSwgdGhpcy5ydmFsdWUuZXZhbChjb250ZXh0KSk7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5uZWdhdGUgPyAhcmVzdWx0IDogcmVzdWx0Ow0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIFVuaWNvZGVEZXNjcmlwdG9yID0gZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsNCiAgICB9Ow0KICAgIFVuaWNvZGVEZXNjcmlwdG9yLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnVW5pY29kZURlc2NyaXB0b3InDQogICAgfSk7CgogICAgdmFyIE5lZ2F0aXZlID0gZnVuY3Rpb24gKG5vZGUpIHsNCiAgICAgICAgdGhpcy52YWx1ZSA9IG5vZGU7DQogICAgfTsNCiAgICBOZWdhdGl2ZS5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBOb2RlKCksIHsNCiAgICAgICAgdHlwZTogJ05lZ2F0aXZlJywNCiAgICAgICAgZ2VuQ1NTOiBmdW5jdGlvbiAoY29udGV4dCwgb3V0cHV0KSB7DQogICAgICAgICAgICBvdXRwdXQuYWRkKCctJyk7DQogICAgICAgICAgICB0aGlzLnZhbHVlLmdlbkNTUyhjb250ZXh0LCBvdXRwdXQpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgaWYgKGNvbnRleHQuaXNNYXRoT24oKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAobmV3IE9wZXJhdGlvbignKicsIFtuZXcgRGltZW5zaW9uKC0xKSwgdGhpcy52YWx1ZV0pKS5ldmFsKGNvbnRleHQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBOZWdhdGl2ZSh0aGlzLnZhbHVlLmV2YWwoY29udGV4dCkpOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIEV4dGVuZCA9IGZ1bmN0aW9uIChzZWxlY3Rvciwgb3B0aW9uLCBpbmRleCwgY3VycmVudEZpbGVJbmZvLCB2aXNpYmlsaXR5SW5mbykgew0KICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7DQogICAgICAgIHRoaXMub3B0aW9uID0gb3B0aW9uOw0KICAgICAgICB0aGlzLm9iamVjdF9pZCA9IEV4dGVuZC5uZXh0X2lkKys7DQogICAgICAgIHRoaXMucGFyZW50X2lkcyA9IFt0aGlzLm9iamVjdF9pZF07DQogICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7DQogICAgICAgIHRoaXMuX2ZpbGVJbmZvID0gY3VycmVudEZpbGVJbmZvOw0KICAgICAgICB0aGlzLmNvcHlWaXNpYmlsaXR5SW5mbyh2aXNpYmlsaXR5SW5mbyk7DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICAgICAgc3dpdGNoIChvcHRpb24pIHsNCiAgICAgICAgICAgIGNhc2UgJ2FsbCc6DQogICAgICAgICAgICAgICAgdGhpcy5hbGxvd0JlZm9yZSA9IHRydWU7DQogICAgICAgICAgICAgICAgdGhpcy5hbGxvd0FmdGVyID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgdGhpcy5hbGxvd0JlZm9yZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dBZnRlciA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuc2V0UGFyZW50KHRoaXMuc2VsZWN0b3IsIHRoaXMpOw0KICAgIH07DQogICAgRXh0ZW5kLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IE5vZGUoKSwgew0KICAgICAgICB0eXBlOiAnRXh0ZW5kJywNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiAodmlzaXRvcikgew0KICAgICAgICAgICAgdGhpcy5zZWxlY3RvciA9IHZpc2l0b3IudmlzaXQodGhpcy5zZWxlY3Rvcik7DQogICAgICAgIH0sDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IEV4dGVuZCh0aGlzLnNlbGVjdG9yLmV2YWwoY29udGV4dCksIHRoaXMub3B0aW9uLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSwgdGhpcy52aXNpYmlsaXR5SW5mbygpKTsNCiAgICAgICAgfSwNCiAgICAgICAgY2xvbmU6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IEV4dGVuZCh0aGlzLnNlbGVjdG9yLCB0aGlzLm9wdGlvbiwgdGhpcy5nZXRJbmRleCgpLCB0aGlzLmZpbGVJbmZvKCksIHRoaXMudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgIH0sDQogICAgICAgIC8vIGl0IGNvbmNhdGVuYXRlcyAoam9pbnMpIGFsbCBzZWxlY3RvcnMgaW4gc2VsZWN0b3IgYXJyYXkNCiAgICAgICAgZmluZFNlbGZTZWxlY3RvcnM6IGZ1bmN0aW9uIChzZWxlY3RvcnMpIHsNCiAgICAgICAgICAgIHZhciBzZWxmRWxlbWVudHMgPSBbXSwgaSwgc2VsZWN0b3JFbGVtZW50czsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzZWxlY3RvcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBzZWxlY3RvckVsZW1lbnRzID0gc2VsZWN0b3JzW2ldLmVsZW1lbnRzOw0KICAgICAgICAgICAgICAgIC8vIGR1cGxpY2F0ZSB0aGUgbG9naWMgaW4gZ2VuQ1NTIGZ1bmN0aW9uIGluc2lkZSB0aGUgc2VsZWN0b3Igbm9kZS4NCiAgICAgICAgICAgICAgICAvLyBmdXR1cmUgVE9ETyAtIG1vdmUgYm90aCBsb2dpY3MgaW50byB0aGUgc2VsZWN0b3Igam9pbmVyIHZpc2l0b3INCiAgICAgICAgICAgICAgICBpZiAoaSA+IDAgJiYgc2VsZWN0b3JFbGVtZW50cy5sZW5ndGggJiYgc2VsZWN0b3JFbGVtZW50c1swXS5jb21iaW5hdG9yLnZhbHVlID09PSAnJykgew0KICAgICAgICAgICAgICAgICAgICBzZWxlY3RvckVsZW1lbnRzWzBdLmNvbWJpbmF0b3IudmFsdWUgPSAnICc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHNlbGZFbGVtZW50cyA9IHNlbGZFbGVtZW50cy5jb25jYXQoc2VsZWN0b3JzW2ldLmVsZW1lbnRzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuc2VsZlNlbGVjdG9ycyA9IFtuZXcgU2VsZWN0b3Ioc2VsZkVsZW1lbnRzKV07DQogICAgICAgICAgICB0aGlzLnNlbGZTZWxlY3RvcnNbMF0uY29weVZpc2liaWxpdHlJbmZvKHRoaXMudmlzaWJpbGl0eUluZm8oKSk7DQogICAgICAgIH0NCiAgICB9KTsNCiAgICBFeHRlbmQubmV4dF9pZCA9IDA7CgogICAgdmFyIFZhcmlhYmxlQ2FsbCA9IGZ1bmN0aW9uICh2YXJpYWJsZSwgaW5kZXgsIGN1cnJlbnRGaWxlSW5mbykgew0KICAgICAgICB0aGlzLnZhcmlhYmxlID0gdmFyaWFibGU7DQogICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7DQogICAgICAgIHRoaXMuX2ZpbGVJbmZvID0gY3VycmVudEZpbGVJbmZvOw0KICAgICAgICB0aGlzLmFsbG93Um9vdCA9IHRydWU7DQogICAgfTsNCiAgICBWYXJpYWJsZUNhbGwucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdWYXJpYWJsZUNhbGwnLA0KICAgICAgICBldmFsOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIHJ1bGVzOw0KICAgICAgICAgICAgdmFyIGRldGFjaGVkUnVsZXNldCA9IG5ldyBWYXJpYWJsZSh0aGlzLnZhcmlhYmxlLCB0aGlzLmdldEluZGV4KCksIHRoaXMuZmlsZUluZm8oKSkuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIHZhciBlcnJvciA9IG5ldyBMZXNzRXJyb3IoeyBtZXNzYWdlOiAiQ291bGQgbm90IGV2YWx1YXRlIHZhcmlhYmxlIGNhbGwgIiArIHRoaXMudmFyaWFibGUgfSk7DQogICAgICAgICAgICBpZiAoIWRldGFjaGVkUnVsZXNldC5ydWxlc2V0KSB7DQogICAgICAgICAgICAgICAgaWYgKGRldGFjaGVkUnVsZXNldC5ydWxlcykgew0KICAgICAgICAgICAgICAgICAgICBydWxlcyA9IGRldGFjaGVkUnVsZXNldDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkZXRhY2hlZFJ1bGVzZXQpKSB7DQogICAgICAgICAgICAgICAgICAgIHJ1bGVzID0gbmV3IFJ1bGVzZXQoJycsIGRldGFjaGVkUnVsZXNldCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZGV0YWNoZWRSdWxlc2V0LnZhbHVlKSkgew0KICAgICAgICAgICAgICAgICAgICBydWxlcyA9IG5ldyBSdWxlc2V0KCcnLCBkZXRhY2hlZFJ1bGVzZXQudmFsdWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRldGFjaGVkUnVsZXNldCA9IG5ldyBEZXRhY2hlZFJ1bGVzZXQocnVsZXMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGRldGFjaGVkUnVsZXNldC5ydWxlc2V0KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGRldGFjaGVkUnVsZXNldC5jYWxsRXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRocm93IGVycm9yOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIE5hbWVzcGFjZVZhbHVlID0gZnVuY3Rpb24gKHJ1bGVDYWxsLCBsb29rdXBzLCBpbmRleCwgZmlsZUluZm8pIHsNCiAgICAgICAgdGhpcy52YWx1ZSA9IHJ1bGVDYWxsOw0KICAgICAgICB0aGlzLmxvb2t1cHMgPSBsb29rdXBzOw0KICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4Ow0KICAgICAgICB0aGlzLl9maWxlSW5mbyA9IGZpbGVJbmZvOw0KICAgIH07DQogICAgTmFtZXNwYWNlVmFsdWUucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdOYW1lc3BhY2VWYWx1ZScsDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgaSwgbmFtZSwgcnVsZXMgPSB0aGlzLnZhbHVlLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sb29rdXBzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgbmFtZSA9IHRoaXMubG9va3Vwc1tpXTsNCiAgICAgICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAgICAgKiBFdmFsJ2QgRFJzIHJldHVybiBydWxlc2V0cy4NCiAgICAgICAgICAgICAgICAgKiBFdmFsJ2QgbWl4aW5zIHJldHVybiBydWxlcywgc28gbGV0J3MgbWFrZSBhIHJ1bGVzZXQgaWYgd2UgbmVlZCBpdC4NCiAgICAgICAgICAgICAgICAgKiBXZSBuZWVkIHRvIGRvIHRoaXMgYmVjYXVzZSBvZiBsYXRlIHBhcnNpbmcgb2YgdmFsdWVzDQogICAgICAgICAgICAgICAgICovDQogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocnVsZXMpKSB7DQogICAgICAgICAgICAgICAgICAgIHJ1bGVzID0gbmV3IFJ1bGVzZXQoW25ldyBTZWxlY3RvcigpXSwgcnVsZXMpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJycpIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXMgPSBydWxlcy5sYXN0RGVjbGFyYXRpb24oKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAobmFtZS5jaGFyQXQoMCkgPT09ICdAJykgew0KICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMSkgPT09ICdAJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9ICJAIiArIG5ldyBWYXJpYWJsZShuYW1lLnN1YnN0cigxKSkuZXZhbChjb250ZXh0KS52YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAocnVsZXMudmFyaWFibGVzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBydWxlcyA9IHJ1bGVzLnZhcmlhYmxlKG5hbWUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICghcnVsZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ05hbWUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJ2YXJpYWJsZSAiICsgbmFtZSArICIgbm90IGZvdW5kIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmdldEluZGV4KCkgfTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuc3Vic3RyaW5nKDAsIDIpID09PSAnJEAnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gIiQiICsgbmV3IFZhcmlhYmxlKG5hbWUuc3Vic3RyKDEpKS5ldmFsKGNvbnRleHQpLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuY2hhckF0KDApID09PSAnJCcgPyBuYW1lIDogIiQiICsgbmFtZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAocnVsZXMucHJvcGVydGllcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXMgPSBydWxlcy5wcm9wZXJ0eShuYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIXJ1bGVzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdOYW1lJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAicHJvcGVydHkgXCIiICsgbmFtZS5zdWJzdHIoMSkgKyAiXCIgbm90IGZvdW5kIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmdldEluZGV4KCkgfTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAvLyBQcm9wZXJ0aWVzIGFyZSBhbiBhcnJheSBvZiB2YWx1ZXMsIHNpbmNlIGEgcnVsZXNldCBjYW4gaGF2ZSBtdWx0aXBsZSBwcm9wcy4NCiAgICAgICAgICAgICAgICAgICAgLy8gV2UgcGljayB0aGUgbGFzdCBvbmUgKHRoZSAiY2FzY2FkZWQiIHZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICBydWxlcyA9IHJ1bGVzW3J1bGVzLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAocnVsZXMudmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXMgPSBydWxlcy5ldmFsKGNvbnRleHQpLnZhbHVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAocnVsZXMucnVsZXNldCkgew0KICAgICAgICAgICAgICAgICAgICBydWxlcyA9IHJ1bGVzLnJ1bGVzZXQuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcnVsZXM7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIChuYW1lLCBwYXJhbXMsIHJ1bGVzLCBjb25kaXRpb24sIHZhcmlhZGljLCBmcmFtZXMsIHZpc2liaWxpdHlJbmZvKSB7DQogICAgICAgIHRoaXMubmFtZSA9IG5hbWUgfHwgJ2Fub255bW91cyBtaXhpbic7DQogICAgICAgIHRoaXMuc2VsZWN0b3JzID0gW25ldyBTZWxlY3RvcihbbmV3IEVsZW1lbnQobnVsbCwgbmFtZSwgZmFsc2UsIHRoaXMuX2luZGV4LCB0aGlzLl9maWxlSW5mbyldKV07DQogICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zOw0KICAgICAgICB0aGlzLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjsNCiAgICAgICAgdGhpcy52YXJpYWRpYyA9IHZhcmlhZGljOw0KICAgICAgICB0aGlzLmFyaXR5ID0gcGFyYW1zLmxlbmd0aDsNCiAgICAgICAgdGhpcy5ydWxlcyA9IHJ1bGVzOw0KICAgICAgICB0aGlzLl9sb29rdXBzID0ge307DQogICAgICAgIHZhciBvcHRpb25hbFBhcmFtZXRlcnMgPSBbXTsNCiAgICAgICAgdGhpcy5yZXF1aXJlZCA9IHBhcmFtcy5yZWR1Y2UoZnVuY3Rpb24gKGNvdW50LCBwKSB7DQogICAgICAgICAgICBpZiAoIXAubmFtZSB8fCAocC5uYW1lICYmICFwLnZhbHVlKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBjb3VudCArIDE7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBvcHRpb25hbFBhcmFtZXRlcnMucHVzaChwLm5hbWUpOw0KICAgICAgICAgICAgICAgIHJldHVybiBjb3VudDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwgMCk7DQogICAgICAgIHRoaXMub3B0aW9uYWxQYXJhbWV0ZXJzID0gb3B0aW9uYWxQYXJhbWV0ZXJzOw0KICAgICAgICB0aGlzLmZyYW1lcyA9IGZyYW1lczsNCiAgICAgICAgdGhpcy5jb3B5VmlzaWJpbGl0eUluZm8odmlzaWJpbGl0eUluZm8pOw0KICAgICAgICB0aGlzLmFsbG93Um9vdCA9IHRydWU7DQogICAgfTsNCiAgICBEZWZpbml0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IFJ1bGVzZXQoKSwgew0KICAgICAgICB0eXBlOiAnTWl4aW5EZWZpbml0aW9uJywNCiAgICAgICAgZXZhbEZpcnN0OiB0cnVlLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMgJiYgdGhpcy5wYXJhbXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMgPSB2aXNpdG9yLnZpc2l0QXJyYXkodGhpcy5wYXJhbXMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5ydWxlcyA9IHZpc2l0b3IudmlzaXRBcnJheSh0aGlzLnJ1bGVzKTsNCiAgICAgICAgICAgIGlmICh0aGlzLmNvbmRpdGlvbikgew0KICAgICAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uID0gdmlzaXRvci52aXNpdCh0aGlzLmNvbmRpdGlvbik7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGV2YWxQYXJhbXM6IGZ1bmN0aW9uIChjb250ZXh0LCBtaXhpbkVudiwgYXJncywgZXZhbGRBcmd1bWVudHMpIHsNCiAgICAgICAgICAgIC8qIGpzaGludCBib3NzOnRydWUgKi8NCiAgICAgICAgICAgIHZhciBmcmFtZSA9IG5ldyBSdWxlc2V0KG51bGwsIG51bGwpOw0KICAgICAgICAgICAgdmFyIHZhcmFyZ3M7DQogICAgICAgICAgICB2YXIgYXJnOw0KICAgICAgICAgICAgdmFyIHBhcmFtcyA9IGNvcHlBcnJheSh0aGlzLnBhcmFtcyk7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIHZhciBqOw0KICAgICAgICAgICAgdmFyIHZhbDsNCiAgICAgICAgICAgIHZhciBuYW1lOw0KICAgICAgICAgICAgdmFyIGlzTmFtZWRGb3VuZDsNCiAgICAgICAgICAgIHZhciBhcmdJbmRleDsNCiAgICAgICAgICAgIHZhciBhcmdzTGVuZ3RoID0gMDsNCiAgICAgICAgICAgIGlmIChtaXhpbkVudi5mcmFtZXMgJiYgbWl4aW5FbnYuZnJhbWVzWzBdICYmIG1peGluRW52LmZyYW1lc1swXS5mdW5jdGlvblJlZ2lzdHJ5KSB7DQogICAgICAgICAgICAgICAgZnJhbWUuZnVuY3Rpb25SZWdpc3RyeSA9IG1peGluRW52LmZyYW1lc1swXS5mdW5jdGlvblJlZ2lzdHJ5LmluaGVyaXQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG1peGluRW52ID0gbmV3IGNvbnRleHRzLkV2YWwobWl4aW5FbnYsIFtmcmFtZV0uY29uY2F0KG1peGluRW52LmZyYW1lcykpOw0KICAgICAgICAgICAgaWYgKGFyZ3MpIHsNCiAgICAgICAgICAgICAgICBhcmdzID0gY29weUFycmF5KGFyZ3MpOw0KICAgICAgICAgICAgICAgIGFyZ3NMZW5ndGggPSBhcmdzLmxlbmd0aDsNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJnc0xlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZ3NbaV07DQogICAgICAgICAgICAgICAgICAgIGlmIChuYW1lID0gKGFyZyAmJiBhcmcubmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlzTmFtZWRGb3VuZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHBhcmFtcy5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZhbGRBcmd1bWVudHNbal0gJiYgbmFtZSA9PT0gcGFyYW1zW2pdLm5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZhbGRBcmd1bWVudHNbal0gPSBhcmcudmFsdWUuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUucHJlcGVuZFJ1bGUobmV3IERlY2xhcmF0aW9uKG5hbWUsIGFyZy52YWx1ZS5ldmFsKGNvbnRleHQpKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTmFtZWRGb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hbWVkRm91bmQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnNwbGljZShpLCAxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLS07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdSdW50aW1lJywgbWVzc2FnZTogIk5hbWVkIGFyZ3VtZW50IGZvciAiICsgdGhpcy5uYW1lICsgIiAiICsgYXJnc1tpXS5uYW1lICsgIiBub3QgZm91bmQiIH07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBhcmdJbmRleCA9IDA7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKGV2YWxkQXJndW1lbnRzW2ldKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBhcmcgPSBhcmdzICYmIGFyZ3NbYXJnSW5kZXhdOw0KICAgICAgICAgICAgICAgIGlmIChuYW1lID0gcGFyYW1zW2ldLm5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtc1tpXS52YXJpYWRpYykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyYXJncyA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gYXJnSW5kZXg7IGogPCBhcmdzTGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJhcmdzLnB1c2goYXJnc1tqXS52YWx1ZS5ldmFsKGNvbnRleHQpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLnByZXBlbmRSdWxlKG5ldyBEZWNsYXJhdGlvbihuYW1lLCBuZXcgRXhwcmVzc2lvbih2YXJhcmdzKS5ldmFsKGNvbnRleHQpKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmcgJiYgYXJnLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd2FzIGEgbWl4aW4gY2FsbCwgcGFzcyBpbiBhIGRldGFjaGVkIHJ1bGVzZXQgb2YgaXQncyBldmFsJ2QgcnVsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IG5ldyBEZXRhY2hlZFJ1bGVzZXQobmV3IFJ1bGVzZXQoJycsIHZhbCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gdmFsLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyYW1zW2ldLnZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyYW1zW2ldLnZhbHVlLmV2YWwobWl4aW5FbnYpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLnJlc2V0Q2FjaGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ1J1bnRpbWUnLCBtZXNzYWdlOiAid3JvbmcgbnVtYmVyIG9mIGFyZ3VtZW50cyBmb3IgIiArIHRoaXMubmFtZSArICIgKCIgKyBhcmdzTGVuZ3RoICsgIiBmb3IgIiArIHRoaXMuYXJpdHkgKyAiKSIgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLnByZXBlbmRSdWxlKG5ldyBEZWNsYXJhdGlvbihuYW1lLCB2YWwpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV2YWxkQXJndW1lbnRzW2ldID0gdmFsOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChwYXJhbXNbaV0udmFyaWFkaWMgJiYgYXJncykgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSBhcmdJbmRleDsgaiA8IGFyZ3NMZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZXZhbGRBcmd1bWVudHNbal0gPSBhcmdzW2pdLnZhbHVlLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgYXJnSW5kZXgrKzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBmcmFtZTsNCiAgICAgICAgfSwNCiAgICAgICAgbWFrZUltcG9ydGFudDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIHJ1bGVzID0gIXRoaXMucnVsZXMgPyB0aGlzLnJ1bGVzIDogdGhpcy5ydWxlcy5tYXAoZnVuY3Rpb24gKHIpIHsNCiAgICAgICAgICAgICAgICBpZiAoci5tYWtlSW1wb3J0YW50KSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByLm1ha2VJbXBvcnRhbnQodHJ1ZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgRGVmaW5pdGlvbih0aGlzLm5hbWUsIHRoaXMucGFyYW1zLCBydWxlcywgdGhpcy5jb25kaXRpb24sIHRoaXMudmFyaWFkaWMsIHRoaXMuZnJhbWVzKTsNCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0sDQogICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERlZmluaXRpb24odGhpcy5uYW1lLCB0aGlzLnBhcmFtcywgdGhpcy5ydWxlcywgdGhpcy5jb25kaXRpb24sIHRoaXMudmFyaWFkaWMsIHRoaXMuZnJhbWVzIHx8IGNvcHlBcnJheShjb250ZXh0LmZyYW1lcykpOw0KICAgICAgICB9LA0KICAgICAgICBldmFsQ2FsbDogZnVuY3Rpb24gKGNvbnRleHQsIGFyZ3MsIGltcG9ydGFudCkgew0KICAgICAgICAgICAgdmFyIF9hcmd1bWVudHMgPSBbXTsNCiAgICAgICAgICAgIHZhciBtaXhpbkZyYW1lcyA9IHRoaXMuZnJhbWVzID8gdGhpcy5mcmFtZXMuY29uY2F0KGNvbnRleHQuZnJhbWVzKSA6IGNvbnRleHQuZnJhbWVzOw0KICAgICAgICAgICAgdmFyIGZyYW1lID0gdGhpcy5ldmFsUGFyYW1zKGNvbnRleHQsIG5ldyBjb250ZXh0cy5FdmFsKGNvbnRleHQsIG1peGluRnJhbWVzKSwgYXJncywgX2FyZ3VtZW50cyk7DQogICAgICAgICAgICB2YXIgcnVsZXM7DQogICAgICAgICAgICB2YXIgcnVsZXNldDsNCiAgICAgICAgICAgIGZyYW1lLnByZXBlbmRSdWxlKG5ldyBEZWNsYXJhdGlvbignQGFyZ3VtZW50cycsIG5ldyBFeHByZXNzaW9uKF9hcmd1bWVudHMpLmV2YWwoY29udGV4dCkpKTsNCiAgICAgICAgICAgIHJ1bGVzID0gY29weUFycmF5KHRoaXMucnVsZXMpOw0KICAgICAgICAgICAgcnVsZXNldCA9IG5ldyBSdWxlc2V0KG51bGwsIHJ1bGVzKTsNCiAgICAgICAgICAgIHJ1bGVzZXQub3JpZ2luYWxSdWxlc2V0ID0gdGhpczsNCiAgICAgICAgICAgIHJ1bGVzZXQgPSBydWxlc2V0LmV2YWwobmV3IGNvbnRleHRzLkV2YWwoY29udGV4dCwgW3RoaXMsIGZyYW1lXS5jb25jYXQobWl4aW5GcmFtZXMpKSk7DQogICAgICAgICAgICBpZiAoaW1wb3J0YW50KSB7DQogICAgICAgICAgICAgICAgcnVsZXNldCA9IHJ1bGVzZXQubWFrZUltcG9ydGFudCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJ1bGVzZXQ7DQogICAgICAgIH0sDQogICAgICAgIG1hdGNoQ29uZGl0aW9uOiBmdW5jdGlvbiAoYXJncywgY29udGV4dCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9uICYmICF0aGlzLmNvbmRpdGlvbi5ldmFsKG5ldyBjb250ZXh0cy5FdmFsKGNvbnRleHQsIFt0aGlzLmV2YWxQYXJhbXMoY29udGV4dCwgLyogdGhlIHBhcmFtZXRlciB2YXJpYWJsZXMgKi8gbmV3IGNvbnRleHRzLkV2YWwoY29udGV4dCwgdGhpcy5mcmFtZXMgPyB0aGlzLmZyYW1lcy5jb25jYXQoY29udGV4dC5mcmFtZXMpIDogY29udGV4dC5mcmFtZXMpLCBhcmdzLCBbXSldDQogICAgICAgICAgICAgICAgLmNvbmNhdCh0aGlzLmZyYW1lcyB8fCBbXSkgLy8gdGhlIHBhcmVudCBuYW1lc3BhY2UvbWl4aW4gZnJhbWVzDQogICAgICAgICAgICAgICAgLmNvbmNhdChjb250ZXh0LmZyYW1lcykpKSkgeyAvLyB0aGUgY3VycmVudCBlbnZpcm9ubWVudCBmcmFtZXMNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSwNCiAgICAgICAgbWF0Y2hBcmdzOiBmdW5jdGlvbiAoYXJncywgY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIGFsbEFyZ3NDbnQgPSAoYXJncyAmJiBhcmdzLmxlbmd0aCkgfHwgMDsNCiAgICAgICAgICAgIHZhciBsZW47DQogICAgICAgICAgICB2YXIgb3B0aW9uYWxQYXJhbWV0ZXJzID0gdGhpcy5vcHRpb25hbFBhcmFtZXRlcnM7DQogICAgICAgICAgICB2YXIgcmVxdWlyZWRBcmdzQ250ID0gIWFyZ3MgPyAwIDogYXJncy5yZWR1Y2UoZnVuY3Rpb24gKGNvdW50LCBwKSB7DQogICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsUGFyYW1ldGVycy5pbmRleE9mKHAubmFtZSkgPCAwKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3VudCArIDE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gY291bnQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwgMCk7DQogICAgICAgICAgICBpZiAoIXRoaXMudmFyaWFkaWMpIHsNCiAgICAgICAgICAgICAgICBpZiAocmVxdWlyZWRBcmdzQ250IDwgdGhpcy5yZXF1aXJlZCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChhbGxBcmdzQ250ID4gdGhpcy5wYXJhbXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAocmVxdWlyZWRBcmdzQ250IDwgKHRoaXMucmVxdWlyZWQgLSAxKSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gY2hlY2sgcGF0dGVybnMNCiAgICAgICAgICAgIGxlbiA9IE1hdGgubWluKHJlcXVpcmVkQXJnc0NudCwgdGhpcy5hcml0eSk7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmFtc1tpXS5uYW1lICYmICF0aGlzLnBhcmFtc1tpXS52YXJpYWRpYykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoYXJnc1tpXS52YWx1ZS5ldmFsKGNvbnRleHQpLnRvQ1NTKCkgIT0gdGhpcy5wYXJhbXNbaV0udmFsdWUuZXZhbChjb250ZXh0KS50b0NTUygpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgIH0pOwoKICAgIHZhciBNaXhpbkNhbGwgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGFyZ3MsIGluZGV4LCBjdXJyZW50RmlsZUluZm8sIGltcG9ydGFudCkgew0KICAgICAgICB0aGlzLnNlbGVjdG9yID0gbmV3IFNlbGVjdG9yKGVsZW1lbnRzKTsNCiAgICAgICAgdGhpcy5hcmd1bWVudHMgPSBhcmdzIHx8IFtdOw0KICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4Ow0KICAgICAgICB0aGlzLl9maWxlSW5mbyA9IGN1cnJlbnRGaWxlSW5mbzsNCiAgICAgICAgdGhpcy5pbXBvcnRhbnQgPSBpbXBvcnRhbnQ7DQogICAgICAgIHRoaXMuYWxsb3dSb290ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZXRQYXJlbnQodGhpcy5zZWxlY3RvciwgdGhpcyk7DQogICAgfTsNCiAgICBNaXhpbkNhbGwucHJvdG90eXBlID0gT2JqZWN0LmFzc2lnbihuZXcgTm9kZSgpLCB7DQogICAgICAgIHR5cGU6ICdNaXhpbkNhbGwnLA0KICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uICh2aXNpdG9yKSB7DQogICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rvcikgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0b3IgPSB2aXNpdG9yLnZpc2l0KHRoaXMuc2VsZWN0b3IpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMuYXJndW1lbnRzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIHRoaXMuYXJndW1lbnRzID0gdmlzaXRvci52aXNpdEFycmF5KHRoaXMuYXJndW1lbnRzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHZhciBtaXhpbnM7DQogICAgICAgICAgICB2YXIgbWl4aW47DQogICAgICAgICAgICB2YXIgbWl4aW5QYXRoOw0KICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTsNCiAgICAgICAgICAgIHZhciBhcmc7DQogICAgICAgICAgICB2YXIgYXJnVmFsdWU7DQogICAgICAgICAgICB2YXIgcnVsZXMgPSBbXTsNCiAgICAgICAgICAgIHZhciBtYXRjaCA9IGZhbHNlOw0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICB2YXIgbTsNCiAgICAgICAgICAgIHZhciBmOw0KICAgICAgICAgICAgdmFyIGlzUmVjdXJzaXZlOw0KICAgICAgICAgICAgdmFyIGlzT25lRm91bmQ7DQogICAgICAgICAgICB2YXIgY2FuZGlkYXRlcyA9IFtdOw0KICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZTsNCiAgICAgICAgICAgIHZhciBjb25kaXRpb25SZXN1bHQgPSBbXTsNCiAgICAgICAgICAgIHZhciBkZWZhdWx0UmVzdWx0Ow0KICAgICAgICAgICAgdmFyIGRlZkZhbHNlRWl0aGVyQ2FzZSA9IC0xOw0KICAgICAgICAgICAgdmFyIGRlZk5vbmUgPSAwOw0KICAgICAgICAgICAgdmFyIGRlZlRydWUgPSAxOw0KICAgICAgICAgICAgdmFyIGRlZkZhbHNlID0gMjsNCiAgICAgICAgICAgIHZhciBjb3VudDsNCiAgICAgICAgICAgIHZhciBvcmlnaW5hbFJ1bGVzZXQ7DQogICAgICAgICAgICB2YXIgbm9Bcmd1bWVudHNGaWx0ZXI7DQogICAgICAgICAgICB0aGlzLnNlbGVjdG9yID0gdGhpcy5zZWxlY3Rvci5ldmFsKGNvbnRleHQpOw0KICAgICAgICAgICAgZnVuY3Rpb24gY2FsY0RlZkdyb3VwKG1peGluLCBtaXhpblBhdGgpIHsNCiAgICAgICAgICAgICAgICB2YXIgZiwgcCwgbmFtZXNwYWNlOw0KICAgICAgICAgICAgICAgIGZvciAoZiA9IDA7IGYgPCAyOyBmKyspIHsNCiAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uUmVzdWx0W2ZdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEZ1bmMudmFsdWUoZik7DQogICAgICAgICAgICAgICAgICAgIGZvciAocCA9IDA7IHAgPCBtaXhpblBhdGgubGVuZ3RoICYmIGNvbmRpdGlvblJlc3VsdFtmXTsgcCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2UgPSBtaXhpblBhdGhbcF07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZXNwYWNlLm1hdGNoQ29uZGl0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uUmVzdWx0W2ZdID0gY29uZGl0aW9uUmVzdWx0W2ZdICYmIG5hbWVzcGFjZS5tYXRjaENvbmRpdGlvbihudWxsLCBjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAobWl4aW4ubWF0Y2hDb25kaXRpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvblJlc3VsdFtmXSA9IGNvbmRpdGlvblJlc3VsdFtmXSAmJiBtaXhpbi5tYXRjaENvbmRpdGlvbihhcmdzLCBjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uUmVzdWx0WzBdIHx8IGNvbmRpdGlvblJlc3VsdFsxXSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uUmVzdWx0WzBdICE9IGNvbmRpdGlvblJlc3VsdFsxXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmRpdGlvblJlc3VsdFsxXSA/DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmVHJ1ZSA6IGRlZkZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZOb25lOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gZGVmRmFsc2VFaXRoZXJDYXNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgYXJnID0gdGhpcy5hcmd1bWVudHNbaV07DQogICAgICAgICAgICAgICAgYXJnVmFsdWUgPSBhcmcudmFsdWUuZXZhbChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICBpZiAoYXJnLmV4cGFuZCAmJiBBcnJheS5pc0FycmF5KGFyZ1ZhbHVlLnZhbHVlKSkgew0KICAgICAgICAgICAgICAgICAgICBhcmdWYWx1ZSA9IGFyZ1ZhbHVlLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAwOyBtIDwgYXJnVmFsdWUubGVuZ3RoOyBtKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaCh7IHZhbHVlOiBhcmdWYWx1ZVttXSB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYXJncy5wdXNoKHsgbmFtZTogYXJnLm5hbWUsIHZhbHVlOiBhcmdWYWx1ZSB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBub0FyZ3VtZW50c0ZpbHRlciA9IGZ1bmN0aW9uIChydWxlKSB7IHJldHVybiBydWxlLm1hdGNoQXJncyhudWxsLCBjb250ZXh0KTsgfTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb250ZXh0LmZyYW1lcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmICgobWl4aW5zID0gY29udGV4dC5mcmFtZXNbaV0uZmluZCh0aGlzLnNlbGVjdG9yLCBudWxsLCBub0FyZ3VtZW50c0ZpbHRlcikpLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgaXNPbmVGb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIC8vIFRvIG1ha2UgYGRlZmF1bHQoKWAgZnVuY3Rpb24gaW5kZXBlbmRlbnQgb2YgZGVmaW5pdGlvbiBvcmRlciB3ZSBoYXZlIHR3byAic3VicGFzc2VzIiBoZXJlLg0KICAgICAgICAgICAgICAgICAgICAvLyBBdCBmaXJzdCB3ZSBldmFsdWF0ZSBlYWNoIGd1YXJkICp0d2ljZSogKHdpdGggYGRlZmF1bHQoKSA9PSB0cnVlYCBhbmQgYGRlZmF1bHQoKSA9PSBmYWxzZWApLA0KICAgICAgICAgICAgICAgICAgICAvLyBhbmQgYnVpbGQgY2FuZGlkYXRlIGxpc3Qgd2l0aCBjb3JyZXNwb25kaW5nIGZsYWdzLiBUaGVuLCB3aGVuIHdlIGtub3cgYWxsIHBvc3NpYmxlIG1hdGNoZXMsDQogICAgICAgICAgICAgICAgICAgIC8vIHdlIG1ha2UgYSBmaW5hbCBkZWNpc2lvbi4NCiAgICAgICAgICAgICAgICAgICAgZm9yIChtID0gMDsgbSA8IG1peGlucy5sZW5ndGg7IG0rKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWl4aW4gPSBtaXhpbnNbbV0ucnVsZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1peGluUGF0aCA9IG1peGluc1ttXS5wYXRoOw0KICAgICAgICAgICAgICAgICAgICAgICAgaXNSZWN1cnNpdmUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZiA9IDA7IGYgPCBjb250ZXh0LmZyYW1lcy5sZW5ndGg7IGYrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoIShtaXhpbiBpbnN0YW5jZW9mIERlZmluaXRpb24pKSAmJiBtaXhpbiA9PT0gKGNvbnRleHQuZnJhbWVzW2ZdLm9yaWdpbmFsUnVsZXNldCB8fCBjb250ZXh0LmZyYW1lc1tmXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZWN1cnNpdmUgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNSZWN1cnNpdmUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaXhpbi5tYXRjaEFyZ3MoYXJncywgY29udGV4dCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUgPSB7IG1peGluOiBtaXhpbiwgZ3JvdXA6IGNhbGNEZWZHcm91cChtaXhpbiwgbWl4aW5QYXRoKSB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYW5kaWRhdGUuZ3JvdXAgIT09IGRlZkZhbHNlRWl0aGVyQ2FzZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2goY2FuZGlkYXRlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRGdW5jLnJlc2V0KCk7DQogICAgICAgICAgICAgICAgICAgIGNvdW50ID0gWzAsIDAsIDBdOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAwOyBtIDwgY2FuZGlkYXRlcy5sZW5ndGg7IG0rKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY291bnRbY2FuZGlkYXRlc1ttXS5ncm91cF0rKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRbZGVmTm9uZV0gPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UmVzdWx0ID0gZGVmRmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UmVzdWx0ID0gZGVmVHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY291bnRbZGVmVHJ1ZV0gKyBjb3VudFtkZWZGYWxzZV0pID4gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ1J1bnRpbWUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAiQW1iaWd1b3VzIHVzZSBvZiBgZGVmYXVsdCgpYCBmb3VuZCB3aGVuIG1hdGNoaW5nIGZvciBgIiArIHRoaXMuZm9ybWF0KGFyZ3MpICsgImAiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5nZXRJbmRleCgpLCBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lIH07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZm9yIChtID0gMDsgbSA8IGNhbmRpZGF0ZXMubGVuZ3RoOyBtKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbbV0uZ3JvdXA7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGNhbmRpZGF0ZSA9PT0gZGVmTm9uZSkgfHwgKGNhbmRpZGF0ZSA9PT0gZGVmYXVsdFJlc3VsdCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaXhpbiA9IGNhbmRpZGF0ZXNbbV0ubWl4aW47DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1peGluIGluc3RhbmNlb2YgRGVmaW5pdGlvbikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsUnVsZXNldCA9IG1peGluLm9yaWdpbmFsUnVsZXNldCB8fCBtaXhpbjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1peGluID0gbmV3IERlZmluaXRpb24oJycsIFtdLCBtaXhpbi5ydWxlcywgbnVsbCwgZmFsc2UsIG51bGwsIG9yaWdpbmFsUnVsZXNldC52aXNpYmlsaXR5SW5mbygpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1peGluLm9yaWdpbmFsUnVsZXNldCA9IG9yaWdpbmFsUnVsZXNldDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3UnVsZXMgPSBtaXhpbi5ldmFsQ2FsbChjb250ZXh0LCBhcmdzLCB0aGlzLmltcG9ydGFudCkucnVsZXM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldFZpc2liaWxpdHlUb1JlcGxhY2VtZW50KG5ld1J1bGVzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocnVsZXMsIG5ld1J1bGVzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgeyBtZXNzYWdlOiBlLm1lc3NhZ2UsIGluZGV4OiB0aGlzLmdldEluZGV4KCksIGZpbGVuYW1lOiB0aGlzLmZpbGVJbmZvKCkuZmlsZW5hbWUsIHN0YWNrOiBlLnN0YWNrIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGVzOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGlzT25lRm91bmQpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdSdW50aW1lJywNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIk5vIG1hdGNoaW5nIGRlZmluaXRpb24gd2FzIGZvdW5kIGZvciBgIiArIHRoaXMuZm9ybWF0KGFyZ3MpICsgImAiLA0KICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5nZXRJbmRleCgpLCBmaWxlbmFtZTogdGhpcy5maWxlSW5mbygpLmZpbGVuYW1lIH07DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdOYW1lJywNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5zZWxlY3Rvci50b0NTUygpLnRyaW0oKSArICIgaXMgdW5kZWZpbmVkIiwNCiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuZ2V0SW5kZXgoKSwgZmlsZW5hbWU6IHRoaXMuZmlsZUluZm8oKS5maWxlbmFtZSB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBfc2V0VmlzaWJpbGl0eVRvUmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChyZXBsYWNlbWVudCkgew0KICAgICAgICAgICAgdmFyIGksIHJ1bGU7DQogICAgICAgICAgICBpZiAodGhpcy5ibG9ja3NWaXNpYmlsaXR5KCkpIHsNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcmVwbGFjZW1lbnQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZSA9IHJlcGxhY2VtZW50W2ldOw0KICAgICAgICAgICAgICAgICAgICBydWxlLmFkZFZpc2liaWxpdHlCbG9jaygpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZm9ybWF0OiBmdW5jdGlvbiAoYXJncykgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0b3IudG9DU1MoKS50cmltKCkgKyAiKCIgKyAoYXJncyA/IGFyZ3MubWFwKGZ1bmN0aW9uIChhKSB7DQogICAgICAgICAgICAgICAgdmFyIGFyZ1ZhbHVlID0gJyc7DQogICAgICAgICAgICAgICAgaWYgKGEubmFtZSkgew0KICAgICAgICAgICAgICAgICAgICBhcmdWYWx1ZSArPSBhLm5hbWUgKyAiOiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChhLnZhbHVlLnRvQ1NTKSB7DQogICAgICAgICAgICAgICAgICAgIGFyZ1ZhbHVlICs9IGEudmFsdWUudG9DU1MoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFyZ1ZhbHVlICs9ICc/Pz8nOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gYXJnVmFsdWU7DQogICAgICAgICAgICB9KS5qb2luKCcsICcpIDogJycpICsgIikiOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIHRyZWUgPSB7DQogICAgICAgIE5vZGU6IE5vZGUsDQogICAgICAgIENvbG9yOiBDb2xvciwNCiAgICAgICAgQXRSdWxlOiBBdFJ1bGUsDQogICAgICAgIERldGFjaGVkUnVsZXNldDogRGV0YWNoZWRSdWxlc2V0LA0KICAgICAgICBPcGVyYXRpb246IE9wZXJhdGlvbiwNCiAgICAgICAgRGltZW5zaW9uOiBEaW1lbnNpb24sDQogICAgICAgIFVuaXQ6IFVuaXQsDQogICAgICAgIEtleXdvcmQ6IEtleXdvcmQsDQogICAgICAgIFZhcmlhYmxlOiBWYXJpYWJsZSwNCiAgICAgICAgUHJvcGVydHk6IFByb3BlcnR5LA0KICAgICAgICBSdWxlc2V0OiBSdWxlc2V0LA0KICAgICAgICBFbGVtZW50OiBFbGVtZW50LA0KICAgICAgICBBdHRyaWJ1dGU6IEF0dHJpYnV0ZSwNCiAgICAgICAgQ29tYmluYXRvcjogQ29tYmluYXRvciwNCiAgICAgICAgU2VsZWN0b3I6IFNlbGVjdG9yLA0KICAgICAgICBRdW90ZWQ6IFF1b3RlZCwNCiAgICAgICAgRXhwcmVzc2lvbjogRXhwcmVzc2lvbiwNCiAgICAgICAgRGVjbGFyYXRpb246IERlY2xhcmF0aW9uLA0KICAgICAgICBDYWxsOiBDYWxsLA0KICAgICAgICBVUkw6IFVSTCwNCiAgICAgICAgSW1wb3J0OiBJbXBvcnQsDQogICAgICAgIENvbW1lbnQ6IENvbW1lbnQsDQogICAgICAgIEFub255bW91czogQW5vbnltb3VzLA0KICAgICAgICBWYWx1ZTogVmFsdWUsDQogICAgICAgIEphdmFTY3JpcHQ6IEphdmFTY3JpcHQsDQogICAgICAgIEFzc2lnbm1lbnQ6IEFzc2lnbm1lbnQsDQogICAgICAgIENvbmRpdGlvbjogQ29uZGl0aW9uLA0KICAgICAgICBQYXJlbjogUGFyZW4sDQogICAgICAgIE1lZGlhOiBNZWRpYSwNCiAgICAgICAgVW5pY29kZURlc2NyaXB0b3I6IFVuaWNvZGVEZXNjcmlwdG9yLA0KICAgICAgICBOZWdhdGl2ZTogTmVnYXRpdmUsDQogICAgICAgIEV4dGVuZDogRXh0ZW5kLA0KICAgICAgICBWYXJpYWJsZUNhbGw6IFZhcmlhYmxlQ2FsbCwNCiAgICAgICAgTmFtZXNwYWNlVmFsdWU6IE5hbWVzcGFjZVZhbHVlLA0KICAgICAgICBtaXhpbjogew0KICAgICAgICAgICAgQ2FsbDogTWl4aW5DYWxsLA0KICAgICAgICAgICAgRGVmaW5pdGlvbjogRGVmaW5pdGlvbg0KICAgICAgICB9DQogICAgfTsKCiAgICB2YXIgQWJzdHJhY3RGaWxlTWFuYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgZnVuY3Rpb24gQWJzdHJhY3RGaWxlTWFuYWdlcigpIHsNCiAgICAgICAgfQ0KICAgICAgICBBYnN0cmFjdEZpbGVNYW5hZ2VyLnByb3RvdHlwZS5nZXRQYXRoID0gZnVuY3Rpb24gKGZpbGVuYW1lKSB7DQogICAgICAgICAgICB2YXIgaiA9IGZpbGVuYW1lLmxhc3RJbmRleE9mKCc/Jyk7DQogICAgICAgICAgICBpZiAoaiA+IDApIHsNCiAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IGZpbGVuYW1lLnNsaWNlKDAsIGopOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaiA9IGZpbGVuYW1lLmxhc3RJbmRleE9mKCcvJyk7DQogICAgICAgICAgICBpZiAoaiA8IDApIHsNCiAgICAgICAgICAgICAgICBqID0gZmlsZW5hbWUubGFzdEluZGV4T2YoJ1xcJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaiA8IDApIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gZmlsZW5hbWUuc2xpY2UoMCwgaiArIDEpOw0KICAgICAgICB9Ow0KICAgICAgICBBYnN0cmFjdEZpbGVNYW5hZ2VyLnByb3RvdHlwZS50cnlBcHBlbmRFeHRlbnNpb24gPSBmdW5jdGlvbiAocGF0aCwgZXh0KSB7DQogICAgICAgICAgICByZXR1cm4gLyhcLlthLXpdKiQpfChbXD87XS4qKSQvLnRlc3QocGF0aCkgPyBwYXRoIDogcGF0aCArIGV4dDsNCiAgICAgICAgfTsNCiAgICAgICAgQWJzdHJhY3RGaWxlTWFuYWdlci5wcm90b3R5cGUudHJ5QXBwZW5kTGVzc0V4dGVuc2lvbiA9IGZ1bmN0aW9uIChwYXRoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy50cnlBcHBlbmRFeHRlbnNpb24ocGF0aCwgJy5sZXNzJyk7DQogICAgICAgIH07DQogICAgICAgIEFic3RyYWN0RmlsZU1hbmFnZXIucHJvdG90eXBlLnN1cHBvcnRzU3luYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgQWJzdHJhY3RGaWxlTWFuYWdlci5wcm90b3R5cGUuYWx3YXlzTWFrZVBhdGhzQWJzb2x1dGUgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH07DQogICAgICAgIEFic3RyYWN0RmlsZU1hbmFnZXIucHJvdG90eXBlLmlzUGF0aEFic29sdXRlID0gZnVuY3Rpb24gKGZpbGVuYW1lKSB7DQogICAgICAgICAgICByZXR1cm4gKC9eKD86W2Etei1dKzp8XC98XFx8IykvaSkudGVzdChmaWxlbmFtZSk7DQogICAgICAgIH07DQogICAgICAgIC8vIFRPRE86IHB1bGwgb3V0IC8gcmVwbGFjZT8NCiAgICAgICAgQWJzdHJhY3RGaWxlTWFuYWdlci5wcm90b3R5cGUuam9pbiA9IGZ1bmN0aW9uIChiYXNlUGF0aCwgbGF0ZXJQYXRoKSB7DQogICAgICAgICAgICBpZiAoIWJhc2VQYXRoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGxhdGVyUGF0aDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBiYXNlUGF0aCArIGxhdGVyUGF0aDsNCiAgICAgICAgfTsNCiAgICAgICAgQWJzdHJhY3RGaWxlTWFuYWdlci5wcm90b3R5cGUucGF0aERpZmYgPSBmdW5jdGlvbiAodXJsLCBiYXNlVXJsKSB7DQogICAgICAgICAgICAvLyBkaWZmIGJldHdlZW4gdHdvIHBhdGhzIHRvIGNyZWF0ZSBhIHJlbGF0aXZlIHBhdGgNCiAgICAgICAgICAgIHZhciB1cmxQYXJ0cyA9IHRoaXMuZXh0cmFjdFVybFBhcnRzKHVybCk7DQogICAgICAgICAgICB2YXIgYmFzZVVybFBhcnRzID0gdGhpcy5leHRyYWN0VXJsUGFydHMoYmFzZVVybCk7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIHZhciBtYXg7DQogICAgICAgICAgICB2YXIgdXJsRGlyZWN0b3JpZXM7DQogICAgICAgICAgICB2YXIgYmFzZVVybERpcmVjdG9yaWVzOw0KICAgICAgICAgICAgdmFyIGRpZmYgPSAnJzsNCiAgICAgICAgICAgIGlmICh1cmxQYXJ0cy5ob3N0UGFydCAhPT0gYmFzZVVybFBhcnRzLmhvc3RQYXJ0KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbWF4ID0gTWF0aC5tYXgoYmFzZVVybFBhcnRzLmRpcmVjdG9yaWVzLmxlbmd0aCwgdXJsUGFydHMuZGlyZWN0b3JpZXMubGVuZ3RoKTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBtYXg7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmIChiYXNlVXJsUGFydHMuZGlyZWN0b3JpZXNbaV0gIT09IHVybFBhcnRzLmRpcmVjdG9yaWVzW2ldKSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGJhc2VVcmxEaXJlY3RvcmllcyA9IGJhc2VVcmxQYXJ0cy5kaXJlY3Rvcmllcy5zbGljZShpKTsNCiAgICAgICAgICAgIHVybERpcmVjdG9yaWVzID0gdXJsUGFydHMuZGlyZWN0b3JpZXMuc2xpY2UoaSk7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYmFzZVVybERpcmVjdG9yaWVzLmxlbmd0aCAtIDE7IGkrKykgew0KICAgICAgICAgICAgICAgIGRpZmYgKz0gJy4uLyc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdXJsRGlyZWN0b3JpZXMubGVuZ3RoIC0gMTsgaSsrKSB7DQogICAgICAgICAgICAgICAgZGlmZiArPSB1cmxEaXJlY3Rvcmllc1tpXSArICIvIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBkaWZmOw0KICAgICAgICB9Ow0KICAgICAgICAvLyBoZWxwZXIgZnVuY3Rpb24sIG5vdCBwYXJ0IG9mIEFQSQ0KICAgICAgICBBYnN0cmFjdEZpbGVNYW5hZ2VyLnByb3RvdHlwZS5leHRyYWN0VXJsUGFydHMgPSBmdW5jdGlvbiAodXJsLCBiYXNlVXJsKSB7DQogICAgICAgICAgICAvLyB1cmxQYXJ0c1sxXSA9IHByb3RvY29sOi8vaG9zdG5hbWUvIE9SIC8NCiAgICAgICAgICAgIC8vIHVybFBhcnRzWzJdID0gLyBpZiBwYXRoIHJlbGF0aXZlIHRvIGhvc3QgYmFzZQ0KICAgICAgICAgICAgLy8gdXJsUGFydHNbM10gPSBkaXJlY3Rvcmllcw0KICAgICAgICAgICAgLy8gdXJsUGFydHNbNF0gPSBmaWxlbmFtZQ0KICAgICAgICAgICAgLy8gdXJsUGFydHNbNV0gPSBwYXJhbWV0ZXJzDQogICAgICAgICAgICB2YXIgdXJsUGFydHNSZWdleCA9IC9eKCg/OlthLXotXSs6KT9cL3syfSg/OlteXC9cPyNdKlwvKXwoW1wvXFxdKSk/KCg/OlteXC9cXFw/I10qW1wvXFxdKSopKFteXC9cXFw/I10qKShbI1w/XS4qKT8kL2k7DQogICAgICAgICAgICB2YXIgdXJsUGFydHMgPSB1cmwubWF0Y2godXJsUGFydHNSZWdleCk7DQogICAgICAgICAgICB2YXIgcmV0dXJuZXIgPSB7fTsNCiAgICAgICAgICAgIHZhciByYXdEaXJlY3RvcmllcyA9IFtdOw0KICAgICAgICAgICAgdmFyIGRpcmVjdG9yaWVzID0gW107DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIHZhciBiYXNlVXJsUGFydHM7DQogICAgICAgICAgICBpZiAoIXVybFBhcnRzKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgcGFyc2Ugc2hlZXQgaHJlZiAtICciICsgdXJsICsgIiciKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIFN0eWxlc2hlZXRzIGluIElFIGRvbid0IGFsd2F5cyByZXR1cm4gdGhlIGZ1bGwgcGF0aA0KICAgICAgICAgICAgaWYgKGJhc2VVcmwgJiYgKCF1cmxQYXJ0c1sxXSB8fCB1cmxQYXJ0c1syXSkpIHsNCiAgICAgICAgICAgICAgICBiYXNlVXJsUGFydHMgPSBiYXNlVXJsLm1hdGNoKHVybFBhcnRzUmVnZXgpOw0KICAgICAgICAgICAgICAgIGlmICghYmFzZVVybFBhcnRzKSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQ291bGQgbm90IHBhcnNlIHBhZ2UgdXJsIC0gJyIgKyBiYXNlVXJsICsgIiciKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdXJsUGFydHNbMV0gPSB1cmxQYXJ0c1sxXSB8fCBiYXNlVXJsUGFydHNbMV0gfHwgJyc7DQogICAgICAgICAgICAgICAgaWYgKCF1cmxQYXJ0c1syXSkgew0KICAgICAgICAgICAgICAgICAgICB1cmxQYXJ0c1szXSA9IGJhc2VVcmxQYXJ0c1szXSArIHVybFBhcnRzWzNdOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh1cmxQYXJ0c1szXSkgew0KICAgICAgICAgICAgICAgIHJhd0RpcmVjdG9yaWVzID0gdXJsUGFydHNbM10ucmVwbGFjZSgvXFwvZywgJy8nKS5zcGxpdCgnLycpOw0KICAgICAgICAgICAgICAgIC8vIGNvbGxhcHNlICcuLicgYW5kIHNraXAgJy4nDQogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHJhd0RpcmVjdG9yaWVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChyYXdEaXJlY3Rvcmllc1tpXSA9PT0gJy4uJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3JpZXMucG9wKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocmF3RGlyZWN0b3JpZXNbaV0gIT09ICcuJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3JpZXMucHVzaChyYXdEaXJlY3Rvcmllc1tpXSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm5lci5ob3N0UGFydCA9IHVybFBhcnRzWzFdOw0KICAgICAgICAgICAgcmV0dXJuZXIuZGlyZWN0b3JpZXMgPSBkaXJlY3RvcmllczsNCiAgICAgICAgICAgIHJldHVybmVyLnJhd1BhdGggPSAodXJsUGFydHNbMV0gfHwgJycpICsgcmF3RGlyZWN0b3JpZXMuam9pbignLycpOw0KICAgICAgICAgICAgcmV0dXJuZXIucGF0aCA9ICh1cmxQYXJ0c1sxXSB8fCAnJykgKyBkaXJlY3Rvcmllcy5qb2luKCcvJyk7DQogICAgICAgICAgICByZXR1cm5lci5maWxlbmFtZSA9IHVybFBhcnRzWzRdOw0KICAgICAgICAgICAgcmV0dXJuZXIuZmlsZVVybCA9IHJldHVybmVyLnBhdGggKyAodXJsUGFydHNbNF0gfHwgJycpOw0KICAgICAgICAgICAgcmV0dXJuZXIudXJsID0gcmV0dXJuZXIuZmlsZVVybCArICh1cmxQYXJ0c1s1XSB8fCAnJyk7DQogICAgICAgICAgICByZXR1cm4gcmV0dXJuZXI7DQogICAgICAgIH07DQogICAgICAgIHJldHVybiBBYnN0cmFjdEZpbGVNYW5hZ2VyOw0KICAgIH0oKSk7CgogICAgdmFyIEFic3RyYWN0UGx1Z2luTG9hZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICBmdW5jdGlvbiBBYnN0cmFjdFBsdWdpbkxvYWRlcigpIHsNCiAgICAgICAgICAgIC8vIEltcGxlbWVudGVkIGJ5IE5vZGUuanMgcGx1Z2luIGxvYWRlcg0KICAgICAgICAgICAgdGhpcy5yZXF1aXJlID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgfQ0KICAgICAgICBBYnN0cmFjdFBsdWdpbkxvYWRlci5wcm90b3R5cGUuZXZhbFBsdWdpbiA9IGZ1bmN0aW9uIChjb250ZW50cywgY29udGV4dCwgaW1wb3J0cywgcGx1Z2luT3B0aW9ucywgZmlsZUluZm8pIHsNCiAgICAgICAgICAgIHZhciBsb2FkZXIsIHJlZ2lzdHJ5LCBwbHVnaW5PYmosIGxvY2FsTW9kdWxlLCBwbHVnaW5NYW5hZ2VyLCBmaWxlbmFtZSwgcmVzdWx0Ow0KICAgICAgICAgICAgcGx1Z2luTWFuYWdlciA9IGNvbnRleHQucGx1Z2luTWFuYWdlcjsNCiAgICAgICAgICAgIGlmIChmaWxlSW5mbykgew0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZmlsZUluZm8gPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gZmlsZUluZm87DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IGZpbGVJbmZvLmZpbGVuYW1lOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBzaG9ydG5hbWUgPSAobmV3IHRoaXMubGVzcy5GaWxlTWFuYWdlcigpKS5leHRyYWN0VXJsUGFydHMoZmlsZW5hbWUpLmZpbGVuYW1lOw0KICAgICAgICAgICAgaWYgKGZpbGVuYW1lKSB7DQogICAgICAgICAgICAgICAgcGx1Z2luT2JqID0gcGx1Z2luTWFuYWdlci5nZXQoZmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgIGlmIChwbHVnaW5PYmopIHsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy50cnlTZXRPcHRpb25zKHBsdWdpbk9iaiwgZmlsZW5hbWUsIHNob3J0bmFtZSwgcGx1Z2luT3B0aW9ucyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbHVnaW5PYmoudXNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luT2JqLnVzZS5jYWxsKHRoaXMuY29udGV4dCwgcGx1Z2luT2JqKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZS5tZXNzYWdlID0gZS5tZXNzYWdlIHx8ICdFcnJvciBkdXJpbmcgQHBsdWdpbiBjYWxsJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGVzc0Vycm9yKGUsIGltcG9ydHMsIGZpbGVuYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGx1Z2luT2JqOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxvY2FsTW9kdWxlID0gew0KICAgICAgICAgICAgICAgIGV4cG9ydHM6IHt9LA0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXI6IHBsdWdpbk1hbmFnZXIsDQogICAgICAgICAgICAgICAgZmlsZUluZm86IGZpbGVJbmZvDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgcmVnaXN0cnkgPSBmdW5jdGlvblJlZ2lzdHJ5LmNyZWF0ZSgpOw0KICAgICAgICAgICAgdmFyIHJlZ2lzdGVyUGx1Z2luID0gZnVuY3Rpb24gKG9iaikgew0KICAgICAgICAgICAgICAgIHBsdWdpbk9iaiA9IG9iajsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGxvYWRlciA9IG5ldyBGdW5jdGlvbignbW9kdWxlJywgJ3JlcXVpcmUnLCAncmVnaXN0ZXJQbHVnaW4nLCAnZnVuY3Rpb25zJywgJ3RyZWUnLCAnbGVzcycsICdmaWxlSW5mbycsIGNvbnRlbnRzKTsNCiAgICAgICAgICAgICAgICBsb2FkZXIobG9jYWxNb2R1bGUsIHRoaXMucmVxdWlyZShmaWxlbmFtZSksIHJlZ2lzdGVyUGx1Z2luLCByZWdpc3RyeSwgdGhpcy5sZXNzLnRyZWUsIHRoaXMubGVzcywgZmlsZUluZm8pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExlc3NFcnJvcihlLCBpbXBvcnRzLCBmaWxlbmFtZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIXBsdWdpbk9iaikgew0KICAgICAgICAgICAgICAgIHBsdWdpbk9iaiA9IGxvY2FsTW9kdWxlLmV4cG9ydHM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBwbHVnaW5PYmogPSB0aGlzLnZhbGlkYXRlUGx1Z2luKHBsdWdpbk9iaiwgZmlsZW5hbWUsIHNob3J0bmFtZSk7DQogICAgICAgICAgICBpZiAocGx1Z2luT2JqIGluc3RhbmNlb2YgTGVzc0Vycm9yKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpbk9iajsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChwbHVnaW5PYmopIHsNCiAgICAgICAgICAgICAgICBwbHVnaW5PYmouaW1wb3J0cyA9IGltcG9ydHM7DQogICAgICAgICAgICAgICAgcGx1Z2luT2JqLmZpbGVuYW1lID0gZmlsZW5hbWU7DQogICAgICAgICAgICAgICAgLy8gRm9yIDwgMy54IChvciB1bnNwZWNpZmllZCBtaW5WZXJzaW9uKSAtIHNldE9wdGlvbnMoKSBiZWZvcmUgaW5zdGFsbCgpDQogICAgICAgICAgICAgICAgaWYgKCFwbHVnaW5PYmoubWluVmVyc2lvbiB8fCB0aGlzLmNvbXBhcmVWZXJzaW9uKCczLjAuMCcsIHBsdWdpbk9iai5taW5WZXJzaW9uKSA8IDApIHsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy50cnlTZXRPcHRpb25zKHBsdWdpbk9iaiwgZmlsZW5hbWUsIHNob3J0bmFtZSwgcGx1Z2luT3B0aW9ucyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gUnVuIG9uIGZpcnN0IGxvYWQNCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmFkZFBsdWdpbihwbHVnaW5PYmosIGZpbGVJbmZvLmZpbGVuYW1lLCByZWdpc3RyeSk7DQogICAgICAgICAgICAgICAgcGx1Z2luT2JqLmZ1bmN0aW9ucyA9IHJlZ2lzdHJ5LmdldExvY2FsRnVuY3Rpb25zKCk7DQogICAgICAgICAgICAgICAgLy8gTmVlZCB0byBjYWxsIHNldE9wdGlvbnMgYWdhaW4gYmVjYXVzZSB0aGUgcGx1Z2luT2JqIG1pZ2h0IGhhdmUgZnVuY3Rpb25zDQogICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy50cnlTZXRPcHRpb25zKHBsdWdpbk9iaiwgZmlsZW5hbWUsIHNob3J0bmFtZSwgcGx1Z2luT3B0aW9ucyk7DQogICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyBSdW4gZXZlcnkgQHBsdWdpbiBjYWxsDQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBsdWdpbk9iai51c2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbk9iai51c2UuY2FsbCh0aGlzLmNvbnRleHQsIHBsdWdpbk9iaik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgZS5tZXNzYWdlID0gZS5tZXNzYWdlIHx8ICdFcnJvciBkdXJpbmcgQHBsdWdpbiBjYWxsJzsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMZXNzRXJyb3IoZSwgaW1wb3J0cywgZmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGVzc0Vycm9yKHsgbWVzc2FnZTogJ05vdCBhIHZhbGlkIHBsdWdpbicgfSwgaW1wb3J0cywgZmlsZW5hbWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHBsdWdpbk9iajsNCiAgICAgICAgfTsNCiAgICAgICAgQWJzdHJhY3RQbHVnaW5Mb2FkZXIucHJvdG90eXBlLnRyeVNldE9wdGlvbnMgPSBmdW5jdGlvbiAocGx1Z2luLCBmaWxlbmFtZSwgbmFtZSwgb3B0aW9ucykgew0KICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgIXBsdWdpbi5zZXRPcHRpb25zKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMZXNzRXJyb3Ioew0KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAiT3B0aW9ucyBoYXZlIGJlZW4gcHJvdmlkZWQgYnV0IHRoZSBwbHVnaW4gIiArIG5hbWUgKyAiIGRvZXMgbm90IHN1cHBvcnQgYW55IG9wdGlvbnMuIg0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0T3B0aW9ucyAmJiBwbHVnaW4uc2V0T3B0aW9ucyhvcHRpb25zKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMZXNzRXJyb3IoZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIEFic3RyYWN0UGx1Z2luTG9hZGVyLnByb3RvdHlwZS52YWxpZGF0ZVBsdWdpbiA9IGZ1bmN0aW9uIChwbHVnaW4sIGZpbGVuYW1lLCBuYW1lKSB7DQogICAgICAgICAgICBpZiAocGx1Z2luKSB7DQogICAgICAgICAgICAgICAgLy8gc3VwcG9ydCBwbHVnaW5zIGJlaW5nIGEgZnVuY3Rpb24NCiAgICAgICAgICAgICAgICAvLyBzbyB0aGF0IHRoZSBwbHVnaW4gY2FuIGJlIG1vcmUgdXNhYmxlIHByb2dyYW1tYXRpY2FsbHkNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBsdWdpbiA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgICAgICBwbHVnaW4gPSBuZXcgcGx1Z2luKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChwbHVnaW4ubWluVmVyc2lvbikgew0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb21wYXJlVmVyc2lvbihwbHVnaW4ubWluVmVyc2lvbiwgdGhpcy5sZXNzLnZlcnNpb24pIDwgMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMZXNzRXJyb3Ioew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJQbHVnaW4gIiArIG5hbWUgKyAiIHJlcXVpcmVzIHZlcnNpb24gIiArIHRoaXMudmVyc2lvblRvU3RyaW5nKHBsdWdpbi5taW5WZXJzaW9uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpbjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9Ow0KICAgICAgICBBYnN0cmFjdFBsdWdpbkxvYWRlci5wcm90b3R5cGUuY29tcGFyZVZlcnNpb24gPSBmdW5jdGlvbiAoYVZlcnNpb24sIGJWZXJzaW9uKSB7DQogICAgICAgICAgICBpZiAodHlwZW9mIGFWZXJzaW9uID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgICAgIGFWZXJzaW9uID0gYVZlcnNpb24ubWF0Y2goL14oXGQrKVwuPyhcZCspP1wuPyhcZCspPy8pOw0KICAgICAgICAgICAgICAgIGFWZXJzaW9uLnNoaWZ0KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFWZXJzaW9uLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKGFWZXJzaW9uW2ldICE9PSBiVmVyc2lvbltpXSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoYVZlcnNpb25baV0pID4gcGFyc2VJbnQoYlZlcnNpb25baV0pID8gLTEgOiAxOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9Ow0KICAgICAgICBBYnN0cmFjdFBsdWdpbkxvYWRlci5wcm90b3R5cGUudmVyc2lvblRvU3RyaW5nID0gZnVuY3Rpb24gKHZlcnNpb24pIHsNCiAgICAgICAgICAgIHZhciB2ZXJzaW9uU3RyaW5nID0gJyc7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnNpb24ubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICB2ZXJzaW9uU3RyaW5nICs9ICh2ZXJzaW9uU3RyaW5nID8gJy4nIDogJycpICsgdmVyc2lvbltpXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uU3RyaW5nOw0KICAgICAgICB9Ow0KICAgICAgICBBYnN0cmFjdFBsdWdpbkxvYWRlci5wcm90b3R5cGUucHJpbnRVc2FnZSA9IGZ1bmN0aW9uIChwbHVnaW5zKSB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBsdWdpbnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgcGx1Z2luID0gcGx1Z2luc1tpXTsNCiAgICAgICAgICAgICAgICBpZiAocGx1Z2luLnByaW50VXNhZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnByaW50VXNhZ2UoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIHJldHVybiBBYnN0cmFjdFBsdWdpbkxvYWRlcjsNCiAgICB9KCkpOwoKICAgIHZhciBfdmlzaXRBcmdzID0geyB2aXNpdERlZXBlcjogdHJ1ZSB9Ow0KICAgIHZhciBfaGFzSW5kZXhlZCA9IGZhbHNlOw0KICAgIGZ1bmN0aW9uIF9ub29wKG5vZGUpIHsNCiAgICAgICAgcmV0dXJuIG5vZGU7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGluZGV4Tm9kZVR5cGVzKHBhcmVudCwgdGlja2VyKSB7DQogICAgICAgIC8vIGFkZCAudHlwZUluZGV4IHRvIHRyZWUgbm9kZSB0eXBlcyBmb3IgbG9va3VwIHRhYmxlDQogICAgICAgIHZhciBrZXksIGNoaWxkOw0KICAgICAgICBmb3IgKGtleSBpbiBwYXJlbnQpIHsNCiAgICAgICAgICAgIC8qIGVzbGludCBndWFyZC1mb3ItaW46IDAgKi8NCiAgICAgICAgICAgIGNoaWxkID0gcGFyZW50W2tleV07DQogICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiBjaGlsZCkgew0KICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzoNCiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGJvdW5kIGZ1bmN0aW9ucyBkaXJlY3RseSBvbiB0cmVlIHdoaWNoIGRvIG5vdCBoYXZlIGEgcHJvdG90eXBlDQogICAgICAgICAgICAgICAgICAgIC8vIG9yIGFyZW4ndCBub2Rlcw0KICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQucHJvdG90eXBlICYmIGNoaWxkLnByb3RvdHlwZS50eXBlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5wcm90b3R5cGUudHlwZUluZGV4ID0gdGlja2VyKys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzoNCiAgICAgICAgICAgICAgICAgICAgdGlja2VyID0gaW5kZXhOb2RlVHlwZXMoY2hpbGQsIHRpY2tlcik7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0aWNrZXI7DQogICAgfQ0KICAgIHZhciBWaXNpdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICBmdW5jdGlvbiBWaXNpdG9yKGltcGxlbWVudGF0aW9uKSB7DQogICAgICAgICAgICB0aGlzLl9pbXBsZW1lbnRhdGlvbiA9IGltcGxlbWVudGF0aW9uOw0KICAgICAgICAgICAgdGhpcy5fdmlzaXRJbkNhY2hlID0ge307DQogICAgICAgICAgICB0aGlzLl92aXNpdE91dENhY2hlID0ge307DQogICAgICAgICAgICBpZiAoIV9oYXNJbmRleGVkKSB7DQogICAgICAgICAgICAgICAgaW5kZXhOb2RlVHlwZXModHJlZSwgMSk7DQogICAgICAgICAgICAgICAgX2hhc0luZGV4ZWQgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIFZpc2l0b3IucHJvdG90eXBlLnZpc2l0ID0gZnVuY3Rpb24gKG5vZGUpIHsNCiAgICAgICAgICAgIGlmICghbm9kZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBub2RlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIG5vZGVUeXBlSW5kZXggPSBub2RlLnR5cGVJbmRleDsNCiAgICAgICAgICAgIGlmICghbm9kZVR5cGVJbmRleCkgew0KICAgICAgICAgICAgICAgIC8vIE1peGluQ2FsbCBhcmdzIGFyZW4ndCBhIG5vZGUgdHlwZT8NCiAgICAgICAgICAgICAgICBpZiAobm9kZS52YWx1ZSAmJiBub2RlLnZhbHVlLnR5cGVJbmRleCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2l0KG5vZGUudmFsdWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBpbXBsID0gdGhpcy5faW1wbGVtZW50YXRpb247DQogICAgICAgICAgICB2YXIgZnVuYyA9IHRoaXMuX3Zpc2l0SW5DYWNoZVtub2RlVHlwZUluZGV4XTsNCiAgICAgICAgICAgIHZhciBmdW5jT3V0ID0gdGhpcy5fdmlzaXRPdXRDYWNoZVtub2RlVHlwZUluZGV4XTsNCiAgICAgICAgICAgIHZhciB2aXNpdEFyZ3MgPSBfdmlzaXRBcmdzOw0KICAgICAgICAgICAgdmFyIGZuTmFtZTsNCiAgICAgICAgICAgIHZpc2l0QXJncy52aXNpdERlZXBlciA9IHRydWU7DQogICAgICAgICAgICBpZiAoIWZ1bmMpIHsNCiAgICAgICAgICAgICAgICBmbk5hbWUgPSAidmlzaXQiICsgbm9kZS50eXBlOw0KICAgICAgICAgICAgICAgIGZ1bmMgPSBpbXBsW2ZuTmFtZV0gfHwgX25vb3A7DQogICAgICAgICAgICAgICAgZnVuY091dCA9IGltcGxbZm5OYW1lICsgIk91dCJdIHx8IF9ub29wOw0KICAgICAgICAgICAgICAgIHRoaXMuX3Zpc2l0SW5DYWNoZVtub2RlVHlwZUluZGV4XSA9IGZ1bmM7DQogICAgICAgICAgICAgICAgdGhpcy5fdmlzaXRPdXRDYWNoZVtub2RlVHlwZUluZGV4XSA9IGZ1bmNPdXQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZnVuYyAhPT0gX25vb3ApIHsNCiAgICAgICAgICAgICAgICB2YXIgbmV3Tm9kZSA9IGZ1bmMuY2FsbChpbXBsLCBub2RlLCB2aXNpdEFyZ3MpOw0KICAgICAgICAgICAgICAgIGlmIChub2RlICYmIGltcGwuaXNSZXBsYWNpbmcpIHsNCiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5ld05vZGU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHZpc2l0QXJncy52aXNpdERlZXBlciAmJiBub2RlKSB7DQogICAgICAgICAgICAgICAgaWYgKG5vZGUubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBjbnQgPSBub2RlLmxlbmd0aDsgaSA8IGNudDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZVtpXS5hY2NlcHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlW2ldLmFjY2VwdCh0aGlzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChub2RlLmFjY2VwdCkgew0KICAgICAgICAgICAgICAgICAgICBub2RlLmFjY2VwdCh0aGlzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZnVuY091dCAhPSBfbm9vcCkgew0KICAgICAgICAgICAgICAgIGZ1bmNPdXQuY2FsbChpbXBsLCBub2RlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBub2RlOw0KICAgICAgICB9Ow0KICAgICAgICBWaXNpdG9yLnByb3RvdHlwZS52aXNpdEFycmF5ID0gZnVuY3Rpb24gKG5vZGVzLCBub25SZXBsYWNpbmcpIHsNCiAgICAgICAgICAgIGlmICghbm9kZXMpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZXM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgY250ID0gbm9kZXMubGVuZ3RoOw0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICAvLyBOb24tcmVwbGFjaW5nDQogICAgICAgICAgICBpZiAobm9uUmVwbGFjaW5nIHx8ICF0aGlzLl9pbXBsZW1lbnRhdGlvbi5pc1JlcGxhY2luZykgew0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjbnQ7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2l0KG5vZGVzW2ldKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVzOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gUmVwbGFjaW5nDQogICAgICAgICAgICB2YXIgb3V0ID0gW107DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY250OyBpKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgZXZhbGQgPSB0aGlzLnZpc2l0KG5vZGVzW2ldKTsNCiAgICAgICAgICAgICAgICBpZiAoZXZhbGQgPT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKCFldmFsZC5zcGxpY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2goZXZhbGQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChldmFsZC5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGF0dGVuKGV2YWxkLCBvdXQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBvdXQ7DQogICAgICAgIH07DQogICAgICAgIFZpc2l0b3IucHJvdG90eXBlLmZsYXR0ZW4gPSBmdW5jdGlvbiAoYXJyLCBvdXQpIHsNCiAgICAgICAgICAgIGlmICghb3V0KSB7DQogICAgICAgICAgICAgICAgb3V0ID0gW107DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgY250LCBpLCBpdGVtLCBuZXN0ZWRDbnQsIGosIG5lc3RlZEl0ZW07DQogICAgICAgICAgICBmb3IgKGkgPSAwLCBjbnQgPSBhcnIubGVuZ3RoOyBpIDwgY250OyBpKyspIHsNCiAgICAgICAgICAgICAgICBpdGVtID0gYXJyW2ldOw0KICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmICghaXRlbS5zcGxpY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2goaXRlbSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBmb3IgKGogPSAwLCBuZXN0ZWRDbnQgPSBpdGVtLmxlbmd0aDsgaiA8IG5lc3RlZENudDsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgIG5lc3RlZEl0ZW0gPSBpdGVtW2pdOw0KICAgICAgICAgICAgICAgICAgICBpZiAobmVzdGVkSXRlbSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIW5lc3RlZEl0ZW0uc3BsaWNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChuZXN0ZWRJdGVtKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChuZXN0ZWRJdGVtLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGF0dGVuKG5lc3RlZEl0ZW0sIG91dCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gb3V0Ow0KICAgICAgICB9Ow0KICAgICAgICByZXR1cm4gVmlzaXRvcjsNCiAgICB9KCkpOwoKICAgIHZhciBJbXBvcnRTZXF1ZW5jZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7DQogICAgICAgIGZ1bmN0aW9uIEltcG9ydFNlcXVlbmNlcihvblNlcXVlbmNlckVtcHR5KSB7DQogICAgICAgICAgICB0aGlzLmltcG9ydHMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMudmFyaWFibGVJbXBvcnRzID0gW107DQogICAgICAgICAgICB0aGlzLl9vblNlcXVlbmNlckVtcHR5ID0gb25TZXF1ZW5jZXJFbXB0eTsNCiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnREZXB0aCA9IDA7DQogICAgICAgIH0NCiAgICAgICAgSW1wb3J0U2VxdWVuY2VyLnByb3RvdHlwZS5hZGRJbXBvcnQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsNCiAgICAgICAgICAgIHZhciBpbXBvcnRTZXF1ZW5jZXIgPSB0aGlzLCBpbXBvcnRJdGVtID0gew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjaywNCiAgICAgICAgICAgICAgICBhcmdzOiBudWxsLA0KICAgICAgICAgICAgICAgIGlzUmVhZHk6IGZhbHNlDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdGhpcy5pbXBvcnRzLnB1c2goaW1wb3J0SXRlbSk7DQogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGltcG9ydEl0ZW0uYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7DQogICAgICAgICAgICAgICAgaW1wb3J0SXRlbS5pc1JlYWR5ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICBpbXBvcnRTZXF1ZW5jZXIudHJ5UnVuKCk7DQogICAgICAgICAgICB9Ow0KICAgICAgICB9Ow0KICAgICAgICBJbXBvcnRTZXF1ZW5jZXIucHJvdG90eXBlLmFkZFZhcmlhYmxlSW1wb3J0ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7DQogICAgICAgICAgICB0aGlzLnZhcmlhYmxlSW1wb3J0cy5wdXNoKGNhbGxiYWNrKTsNCiAgICAgICAgfTsNCiAgICAgICAgSW1wb3J0U2VxdWVuY2VyLnByb3RvdHlwZS50cnlSdW4gPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0aGlzLl9jdXJyZW50RGVwdGgrKzsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuaW1wb3J0cy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1wb3J0SXRlbSA9IHRoaXMuaW1wb3J0c1swXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW1wb3J0SXRlbS5pc1JlYWR5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbXBvcnRzID0gdGhpcy5pbXBvcnRzLnNsaWNlKDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0SXRlbS5jYWxsYmFjay5hcHBseShudWxsLCBpbXBvcnRJdGVtLmFyZ3MpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhcmlhYmxlSW1wb3J0cy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhciB2YXJpYWJsZUltcG9ydCA9IHRoaXMudmFyaWFibGVJbXBvcnRzWzBdOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnZhcmlhYmxlSW1wb3J0cyA9IHRoaXMudmFyaWFibGVJbXBvcnRzLnNsaWNlKDEpOw0KICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZUltcG9ydCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnREZXB0aC0tOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnREZXB0aCA9PT0gMCAmJiB0aGlzLl9vblNlcXVlbmNlckVtcHR5KSB7DQogICAgICAgICAgICAgICAgdGhpcy5fb25TZXF1ZW5jZXJFbXB0eSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICByZXR1cm4gSW1wb3J0U2VxdWVuY2VyOw0KICAgIH0oKSk7CgogICAgdmFyIEltcG9ydFZpc2l0b3IgPSBmdW5jdGlvbiAoaW1wb3J0ZXIsIGZpbmlzaCkgew0KICAgICAgICB0aGlzLl92aXNpdG9yID0gbmV3IFZpc2l0b3IodGhpcyk7DQogICAgICAgIHRoaXMuX2ltcG9ydGVyID0gaW1wb3J0ZXI7DQogICAgICAgIHRoaXMuX2ZpbmlzaCA9IGZpbmlzaDsNCiAgICAgICAgdGhpcy5jb250ZXh0ID0gbmV3IGNvbnRleHRzLkV2YWwoKTsNCiAgICAgICAgdGhpcy5pbXBvcnRDb3VudCA9IDA7DQogICAgICAgIHRoaXMub25jZUZpbGVEZXRlY3Rpb25NYXAgPSB7fTsNCiAgICAgICAgdGhpcy5yZWN1cnNpb25EZXRlY3RvciA9IHt9Ow0KICAgICAgICB0aGlzLl9zZXF1ZW5jZXIgPSBuZXcgSW1wb3J0U2VxdWVuY2VyKHRoaXMuX29uU2VxdWVuY2VyRW1wdHkuYmluZCh0aGlzKSk7DQogICAgfTsNCiAgICBJbXBvcnRWaXNpdG9yLnByb3RvdHlwZSA9IHsNCiAgICAgICAgaXNSZXBsYWNpbmc6IGZhbHNlLA0KICAgICAgICBydW46IGZ1bmN0aW9uIChyb290KSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIHByb2Nlc3MgdGhlIGNvbnRlbnRzDQogICAgICAgICAgICAgICAgdGhpcy5fdmlzaXRvci52aXNpdChyb290KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IGU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmlzRmluaXNoZWQgPSB0cnVlOw0KICAgICAgICAgICAgdGhpcy5fc2VxdWVuY2VyLnRyeVJ1bigpOw0KICAgICAgICB9LA0KICAgICAgICBfb25TZXF1ZW5jZXJFbXB0eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKCF0aGlzLmlzRmluaXNoZWQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLl9maW5pc2godGhpcy5lcnJvcik7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0SW1wb3J0OiBmdW5jdGlvbiAoaW1wb3J0Tm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2YXIgaW5saW5lQ1NTID0gaW1wb3J0Tm9kZS5vcHRpb25zLmlubGluZTsNCiAgICAgICAgICAgIGlmICghaW1wb3J0Tm9kZS5jc3MgfHwgaW5saW5lQ1NTKSB7DQogICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgY29udGV4dHMuRXZhbCh0aGlzLmNvbnRleHQsIGNvcHlBcnJheSh0aGlzLmNvbnRleHQuZnJhbWVzKSk7DQogICAgICAgICAgICAgICAgdmFyIGltcG9ydFBhcmVudCA9IGNvbnRleHQuZnJhbWVzWzBdOw0KICAgICAgICAgICAgICAgIHRoaXMuaW1wb3J0Q291bnQrKzsNCiAgICAgICAgICAgICAgICBpZiAoaW1wb3J0Tm9kZS5pc1ZhcmlhYmxlSW1wb3J0KCkpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VxdWVuY2VyLmFkZFZhcmlhYmxlSW1wb3J0KHRoaXMucHJvY2Vzc0ltcG9ydE5vZGUuYmluZCh0aGlzLCBpbXBvcnROb2RlLCBjb250ZXh0LCBpbXBvcnRQYXJlbnQpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0ltcG9ydE5vZGUoaW1wb3J0Tm9kZSwgY29udGV4dCwgaW1wb3J0UGFyZW50KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgfSwNCiAgICAgICAgcHJvY2Vzc0ltcG9ydE5vZGU6IGZ1bmN0aW9uIChpbXBvcnROb2RlLCBjb250ZXh0LCBpbXBvcnRQYXJlbnQpIHsNCiAgICAgICAgICAgIHZhciBldmFsZEltcG9ydE5vZGU7DQogICAgICAgICAgICB2YXIgaW5saW5lQ1NTID0gaW1wb3J0Tm9kZS5vcHRpb25zLmlubGluZTsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgZXZhbGRJbXBvcnROb2RlID0gaW1wb3J0Tm9kZS5ldmFsRm9ySW1wb3J0KGNvbnRleHQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBpZiAoIWUuZmlsZW5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgZS5pbmRleCA9IGltcG9ydE5vZGUuZ2V0SW5kZXgoKTsNCiAgICAgICAgICAgICAgICAgICAgZS5maWxlbmFtZSA9IGltcG9ydE5vZGUuZmlsZUluZm8oKS5maWxlbmFtZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gYXR0ZW1wdCB0byBldmFsIHByb3Blcmx5IGFuZCB0cmVhdCBhcyBjc3MNCiAgICAgICAgICAgICAgICBpbXBvcnROb2RlLmNzcyA9IHRydWU7DQogICAgICAgICAgICAgICAgLy8gaWYgdGhhdCBmYWlscywgdGhpcyBlcnJvciB3aWxsIGJlIHRocm93bg0KICAgICAgICAgICAgICAgIGltcG9ydE5vZGUuZXJyb3IgPSBlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGV2YWxkSW1wb3J0Tm9kZSAmJiAoIWV2YWxkSW1wb3J0Tm9kZS5jc3MgfHwgaW5saW5lQ1NTKSkgew0KICAgICAgICAgICAgICAgIGlmIChldmFsZEltcG9ydE5vZGUub3B0aW9ucy5tdWx0aXBsZSkgew0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmltcG9ydE11bHRpcGxlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gdHJ5IGFwcGVuZGluZyBpZiB3ZSBoYXZlbid0IGRldGVybWluZWQgaWYgaXQgaXMgY3NzIG9yIG5vdA0KICAgICAgICAgICAgICAgIHZhciB0cnlBcHBlbmRMZXNzRXh0ZW5zaW9uID0gZXZhbGRJbXBvcnROb2RlLmNzcyA9PT0gdW5kZWZpbmVkOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW1wb3J0UGFyZW50LnJ1bGVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbXBvcnRQYXJlbnQucnVsZXNbaV0gPT09IGltcG9ydE5vZGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydFBhcmVudC5ydWxlc1tpXSA9IGV2YWxkSW1wb3J0Tm9kZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBvbkltcG9ydGVkID0gdGhpcy5vbkltcG9ydGVkLmJpbmQodGhpcywgZXZhbGRJbXBvcnROb2RlLCBjb250ZXh0KSwgc2VxdWVuY2VkT25JbXBvcnRlZCA9IHRoaXMuX3NlcXVlbmNlci5hZGRJbXBvcnQob25JbXBvcnRlZCk7DQogICAgICAgICAgICAgICAgdGhpcy5faW1wb3J0ZXIucHVzaChldmFsZEltcG9ydE5vZGUuZ2V0UGF0aCgpLCB0cnlBcHBlbmRMZXNzRXh0ZW5zaW9uLCBldmFsZEltcG9ydE5vZGUuZmlsZUluZm8oKSwgZXZhbGRJbXBvcnROb2RlLm9wdGlvbnMsIHNlcXVlbmNlZE9uSW1wb3J0ZWQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pbXBvcnRDb3VudC0tOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRmluaXNoZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VxdWVuY2VyLnRyeVJ1bigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgb25JbXBvcnRlZDogZnVuY3Rpb24gKGltcG9ydE5vZGUsIGNvbnRleHQsIGUsIHJvb3QsIGltcG9ydGVkQXRSb290LCBmdWxsUGF0aCkgew0KICAgICAgICAgICAgaWYgKGUpIHsNCiAgICAgICAgICAgICAgICBpZiAoIWUuZmlsZW5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgZS5pbmRleCA9IGltcG9ydE5vZGUuZ2V0SW5kZXgoKTsNCiAgICAgICAgICAgICAgICAgICAgZS5maWxlbmFtZSA9IGltcG9ydE5vZGUuZmlsZUluZm8oKS5maWxlbmFtZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IGU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgaW1wb3J0VmlzaXRvciA9IHRoaXMsIGlubGluZUNTUyA9IGltcG9ydE5vZGUub3B0aW9ucy5pbmxpbmUsIGlzUGx1Z2luID0gaW1wb3J0Tm9kZS5vcHRpb25zLmlzUGx1Z2luLCBpc09wdGlvbmFsID0gaW1wb3J0Tm9kZS5vcHRpb25zLm9wdGlvbmFsLCBkdXBsaWNhdGVJbXBvcnQgPSBpbXBvcnRlZEF0Um9vdCB8fCBmdWxsUGF0aCBpbiBpbXBvcnRWaXNpdG9yLnJlY3Vyc2lvbkRldGVjdG9yOw0KICAgICAgICAgICAgaWYgKCFjb250ZXh0LmltcG9ydE11bHRpcGxlKSB7DQogICAgICAgICAgICAgICAgaWYgKGR1cGxpY2F0ZUltcG9ydCkgew0KICAgICAgICAgICAgICAgICAgICBpbXBvcnROb2RlLnNraXAgPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaW1wb3J0Tm9kZS5za2lwID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bGxQYXRoIGluIGltcG9ydFZpc2l0b3Iub25jZUZpbGVEZXRlY3Rpb25NYXApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydFZpc2l0b3Iub25jZUZpbGVEZXRlY3Rpb25NYXBbZnVsbFBhdGhdID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIWZ1bGxQYXRoICYmIGlzT3B0aW9uYWwpIHsNCiAgICAgICAgICAgICAgICBpbXBvcnROb2RlLnNraXAgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHJvb3QpIHsNCiAgICAgICAgICAgICAgICBpbXBvcnROb2RlLnJvb3QgPSByb290Ow0KICAgICAgICAgICAgICAgIGltcG9ydE5vZGUuaW1wb3J0ZWRGaWxlbmFtZSA9IGZ1bGxQYXRoOw0KICAgICAgICAgICAgICAgIGlmICghaW5saW5lQ1NTICYmICFpc1BsdWdpbiAmJiAoY29udGV4dC5pbXBvcnRNdWx0aXBsZSB8fCAhZHVwbGljYXRlSW1wb3J0KSkgew0KICAgICAgICAgICAgICAgICAgICBpbXBvcnRWaXNpdG9yLnJlY3Vyc2lvbkRldGVjdG9yW2Z1bGxQYXRoXSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIHZhciBvbGRDb250ZXh0ID0gdGhpcy5jb250ZXh0Ow0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0Ow0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmlzaXRvci52aXNpdChyb290KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IGU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gb2xkQ29udGV4dDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpbXBvcnRWaXNpdG9yLmltcG9ydENvdW50LS07DQogICAgICAgICAgICBpZiAoaW1wb3J0VmlzaXRvci5pc0ZpbmlzaGVkKSB7DQogICAgICAgICAgICAgICAgaW1wb3J0VmlzaXRvci5fc2VxdWVuY2VyLnRyeVJ1bigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICB2aXNpdERlY2xhcmF0aW9uOiBmdW5jdGlvbiAoZGVjbE5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgaWYgKGRlY2xOb2RlLnZhbHVlLnR5cGUgPT09ICdEZXRhY2hlZFJ1bGVzZXQnKSB7DQogICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZyYW1lcy51bnNoaWZ0KGRlY2xOb2RlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHZpc2l0QXJncy52aXNpdERlZXBlciA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICB2aXNpdERlY2xhcmF0aW9uT3V0OiBmdW5jdGlvbiAoZGVjbE5vZGUpIHsNCiAgICAgICAgICAgIGlmIChkZWNsTm9kZS52YWx1ZS50eXBlID09PSAnRGV0YWNoZWRSdWxlc2V0Jykgew0KICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5mcmFtZXMuc2hpZnQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdmlzaXRBdFJ1bGU6IGZ1bmN0aW9uIChhdFJ1bGVOb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIHRoaXMuY29udGV4dC5mcmFtZXMudW5zaGlmdChhdFJ1bGVOb2RlKTsNCiAgICAgICAgfSwNCiAgICAgICAgdmlzaXRBdFJ1bGVPdXQ6IGZ1bmN0aW9uIChhdFJ1bGVOb2RlKSB7DQogICAgICAgICAgICB0aGlzLmNvbnRleHQuZnJhbWVzLnNoaWZ0KCk7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0TWl4aW5EZWZpbml0aW9uOiBmdW5jdGlvbiAobWl4aW5EZWZpbml0aW9uTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB0aGlzLmNvbnRleHQuZnJhbWVzLnVuc2hpZnQobWl4aW5EZWZpbml0aW9uTm9kZSk7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0TWl4aW5EZWZpbml0aW9uT3V0OiBmdW5jdGlvbiAobWl4aW5EZWZpbml0aW9uTm9kZSkgew0KICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZyYW1lcy5zaGlmdCgpOw0KICAgICAgICB9LA0KICAgICAgICB2aXNpdFJ1bGVzZXQ6IGZ1bmN0aW9uIChydWxlc2V0Tm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB0aGlzLmNvbnRleHQuZnJhbWVzLnVuc2hpZnQocnVsZXNldE5vZGUpOw0KICAgICAgICB9LA0KICAgICAgICB2aXNpdFJ1bGVzZXRPdXQ6IGZ1bmN0aW9uIChydWxlc2V0Tm9kZSkgew0KICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZyYW1lcy5zaGlmdCgpOw0KICAgICAgICB9LA0KICAgICAgICB2aXNpdE1lZGlhOiBmdW5jdGlvbiAobWVkaWFOb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIHRoaXMuY29udGV4dC5mcmFtZXMudW5zaGlmdChtZWRpYU5vZGUucnVsZXNbMF0pOw0KICAgICAgICB9LA0KICAgICAgICB2aXNpdE1lZGlhT3V0OiBmdW5jdGlvbiAobWVkaWFOb2RlKSB7DQogICAgICAgICAgICB0aGlzLmNvbnRleHQuZnJhbWVzLnNoaWZ0KCk7DQogICAgICAgIH0NCiAgICB9OwoKICAgIHZhciBTZXRUcmVlVmlzaWJpbGl0eVZpc2l0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7DQogICAgICAgIGZ1bmN0aW9uIFNldFRyZWVWaXNpYmlsaXR5VmlzaXRvcih2aXNpYmxlKSB7DQogICAgICAgICAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlOw0KICAgICAgICB9DQogICAgICAgIFNldFRyZWVWaXNpYmlsaXR5VmlzaXRvci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKHJvb3QpIHsNCiAgICAgICAgICAgIHRoaXMudmlzaXQocm9vdCk7DQogICAgICAgIH07DQogICAgICAgIFNldFRyZWVWaXNpYmlsaXR5VmlzaXRvci5wcm90b3R5cGUudmlzaXRBcnJheSA9IGZ1bmN0aW9uIChub2Rlcykgew0KICAgICAgICAgICAgaWYgKCFub2Rlcykgew0KICAgICAgICAgICAgICAgIHJldHVybiBub2RlczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBjbnQgPSBub2Rlcy5sZW5ndGg7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjbnQ7IGkrKykgew0KICAgICAgICAgICAgICAgIHRoaXMudmlzaXQobm9kZXNbaV0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5vZGVzOw0KICAgICAgICB9Ow0KICAgICAgICBTZXRUcmVlVmlzaWJpbGl0eVZpc2l0b3IucHJvdG90eXBlLnZpc2l0ID0gZnVuY3Rpb24gKG5vZGUpIHsNCiAgICAgICAgICAgIGlmICghbm9kZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBub2RlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKG5vZGUuY29uc3RydWN0b3IgPT09IEFycmF5KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlzaXRBcnJheShub2RlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghbm9kZS5ibG9ja3NWaXNpYmlsaXR5IHx8IG5vZGUuYmxvY2tzVmlzaWJpbGl0eSgpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgbm9kZS5lbnN1cmVWaXNpYmlsaXR5KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBub2RlLmVuc3VyZUludmlzaWJpbGl0eSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbm9kZS5hY2NlcHQodGhpcyk7DQogICAgICAgICAgICByZXR1cm4gbm9kZTsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIFNldFRyZWVWaXNpYmlsaXR5VmlzaXRvcjsNCiAgICB9KCkpOwoKICAgIC8qIGpzaGludCBsb29wZnVuYzp0cnVlICovDQogICAgdmFyIEV4dGVuZEZpbmRlclZpc2l0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7DQogICAgICAgIGZ1bmN0aW9uIEV4dGVuZEZpbmRlclZpc2l0b3IoKSB7DQogICAgICAgICAgICB0aGlzLl92aXNpdG9yID0gbmV3IFZpc2l0b3IodGhpcyk7DQogICAgICAgICAgICB0aGlzLmNvbnRleHRzID0gW107DQogICAgICAgICAgICB0aGlzLmFsbEV4dGVuZHNTdGFjayA9IFtbXV07DQogICAgICAgIH0NCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKHJvb3QpIHsNCiAgICAgICAgICAgIHJvb3QgPSB0aGlzLl92aXNpdG9yLnZpc2l0KHJvb3QpOw0KICAgICAgICAgICAgcm9vdC5hbGxFeHRlbmRzID0gdGhpcy5hbGxFeHRlbmRzU3RhY2tbMF07DQogICAgICAgICAgICByZXR1cm4gcm9vdDsNCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXREZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChkZWNsTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXRNaXhpbkRlZmluaXRpb24gPSBmdW5jdGlvbiAobWl4aW5EZWZpbml0aW9uTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXRSdWxlc2V0ID0gZnVuY3Rpb24gKHJ1bGVzZXROb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIGlmIChydWxlc2V0Tm9kZS5yb290KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICB2YXIgajsNCiAgICAgICAgICAgIHZhciBleHRlbmQ7DQogICAgICAgICAgICB2YXIgYWxsU2VsZWN0b3JzRXh0ZW5kTGlzdCA9IFtdOw0KICAgICAgICAgICAgdmFyIGV4dGVuZExpc3Q7DQogICAgICAgICAgICAvLyBnZXQgJjpleHRlbmQoLmEpOyBydWxlcyB3aGljaCBhcHBseSB0byBhbGwgc2VsZWN0b3JzIGluIHRoaXMgcnVsZXNldA0KICAgICAgICAgICAgdmFyIHJ1bGVzID0gcnVsZXNldE5vZGUucnVsZXMsIHJ1bGVDbnQgPSBydWxlcyA/IHJ1bGVzLmxlbmd0aCA6IDA7DQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcnVsZUNudDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKHJ1bGVzZXROb2RlLnJ1bGVzW2ldIGluc3RhbmNlb2YgdHJlZS5FeHRlbmQpIHsNCiAgICAgICAgICAgICAgICAgICAgYWxsU2VsZWN0b3JzRXh0ZW5kTGlzdC5wdXNoKHJ1bGVzW2ldKTsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXNldE5vZGUuZXh0ZW5kT25FdmVyeVBhdGggPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIG5vdyBmaW5kIGV2ZXJ5IHNlbGVjdG9yIGFuZCBhcHBseSB0aGUgZXh0ZW5kcyB0aGF0IGFwcGx5IHRvIGFsbCBleHRlbmRzDQogICAgICAgICAgICAvLyBhbmQgdGhlIG9uZXMgd2hpY2ggYXBwbHkgdG8gYW4gaW5kaXZpZHVhbCBleHRlbmQNCiAgICAgICAgICAgIHZhciBwYXRocyA9IHJ1bGVzZXROb2RlLnBhdGhzOw0KICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBhdGhzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yUGF0aCA9IHBhdGhzW2ldLCBzZWxlY3RvciA9IHNlbGVjdG9yUGF0aFtzZWxlY3RvclBhdGgubGVuZ3RoIC0gMV0sIHNlbEV4dGVuZExpc3QgPSBzZWxlY3Rvci5leHRlbmRMaXN0Ow0KICAgICAgICAgICAgICAgIGV4dGVuZExpc3QgPSBzZWxFeHRlbmRMaXN0ID8gY29weUFycmF5KHNlbEV4dGVuZExpc3QpLmNvbmNhdChhbGxTZWxlY3RvcnNFeHRlbmRMaXN0KQ0KICAgICAgICAgICAgICAgICAgICA6IGFsbFNlbGVjdG9yc0V4dGVuZExpc3Q7DQogICAgICAgICAgICAgICAgaWYgKGV4dGVuZExpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kTGlzdCA9IGV4dGVuZExpc3QubWFwKGZ1bmN0aW9uIChhbGxTZWxlY3RvcnNFeHRlbmQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhbGxTZWxlY3RvcnNFeHRlbmQuY2xvbmUoKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBleHRlbmRMaXN0Lmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZm91bmRFeHRlbmRzID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kID0gZXh0ZW5kTGlzdFtqXTsNCiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kLmZpbmRTZWxmU2VsZWN0b3JzKHNlbGVjdG9yUGF0aCk7DQogICAgICAgICAgICAgICAgICAgIGV4dGVuZC5ydWxlc2V0ID0gcnVsZXNldE5vZGU7DQogICAgICAgICAgICAgICAgICAgIGlmIChqID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBleHRlbmQuZmlyc3RFeHRlbmRPblRoaXNTZWxlY3RvclBhdGggPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsRXh0ZW5kc1N0YWNrW3RoaXMuYWxsRXh0ZW5kc1N0YWNrLmxlbmd0aCAtIDFdLnB1c2goZXh0ZW5kKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmNvbnRleHRzLnB1c2gocnVsZXNldE5vZGUuc2VsZWN0b3JzKTsNCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXRSdWxlc2V0T3V0ID0gZnVuY3Rpb24gKHJ1bGVzZXROb2RlKSB7DQogICAgICAgICAgICBpZiAoIXJ1bGVzZXROb2RlLnJvb3QpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHRzLmxlbmd0aCA9IHRoaXMuY29udGV4dHMubGVuZ3RoIC0gMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXRNZWRpYSA9IGZ1bmN0aW9uIChtZWRpYU5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgbWVkaWFOb2RlLmFsbEV4dGVuZHMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuYWxsRXh0ZW5kc1N0YWNrLnB1c2gobWVkaWFOb2RlLmFsbEV4dGVuZHMpOw0KICAgICAgICB9Ow0KICAgICAgICBFeHRlbmRGaW5kZXJWaXNpdG9yLnByb3RvdHlwZS52aXNpdE1lZGlhT3V0ID0gZnVuY3Rpb24gKG1lZGlhTm9kZSkgew0KICAgICAgICAgICAgdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoID0gdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoIC0gMTsNCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXRBdFJ1bGUgPSBmdW5jdGlvbiAoYXRSdWxlTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICBhdFJ1bGVOb2RlLmFsbEV4dGVuZHMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuYWxsRXh0ZW5kc1N0YWNrLnB1c2goYXRSdWxlTm9kZS5hbGxFeHRlbmRzKTsNCiAgICAgICAgfTsNCiAgICAgICAgRXh0ZW5kRmluZGVyVmlzaXRvci5wcm90b3R5cGUudmlzaXRBdFJ1bGVPdXQgPSBmdW5jdGlvbiAoYXRSdWxlTm9kZSkgew0KICAgICAgICAgICAgdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoID0gdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoIC0gMTsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIEV4dGVuZEZpbmRlclZpc2l0b3I7DQogICAgfSgpKTsNCiAgICB2YXIgUHJvY2Vzc0V4dGVuZHNWaXNpdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICBmdW5jdGlvbiBQcm9jZXNzRXh0ZW5kc1Zpc2l0b3IoKSB7DQogICAgICAgICAgICB0aGlzLl92aXNpdG9yID0gbmV3IFZpc2l0b3IodGhpcyk7DQogICAgICAgIH0NCiAgICAgICAgUHJvY2Vzc0V4dGVuZHNWaXNpdG9yLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAocm9vdCkgew0KICAgICAgICAgICAgdmFyIGV4dGVuZEZpbmRlciA9IG5ldyBFeHRlbmRGaW5kZXJWaXNpdG9yKCk7DQogICAgICAgICAgICB0aGlzLmV4dGVuZEluZGljZXMgPSB7fTsNCiAgICAgICAgICAgIGV4dGVuZEZpbmRlci5ydW4ocm9vdCk7DQogICAgICAgICAgICBpZiAoIWV4dGVuZEZpbmRlci5mb3VuZEV4dGVuZHMpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gcm9vdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJvb3QuYWxsRXh0ZW5kcyA9IHJvb3QuYWxsRXh0ZW5kcy5jb25jYXQodGhpcy5kb0V4dGVuZENoYWluaW5nKHJvb3QuYWxsRXh0ZW5kcywgcm9vdC5hbGxFeHRlbmRzKSk7DQogICAgICAgICAgICB0aGlzLmFsbEV4dGVuZHNTdGFjayA9IFtyb290LmFsbEV4dGVuZHNdOw0KICAgICAgICAgICAgdmFyIG5ld1Jvb3QgPSB0aGlzLl92aXNpdG9yLnZpc2l0KHJvb3QpOw0KICAgICAgICAgICAgdGhpcy5jaGVja0V4dGVuZHNGb3JOb25NYXRjaGVkKHJvb3QuYWxsRXh0ZW5kcyk7DQogICAgICAgICAgICByZXR1cm4gbmV3Um9vdDsNCiAgICAgICAgfTsNCiAgICAgICAgUHJvY2Vzc0V4dGVuZHNWaXNpdG9yLnByb3RvdHlwZS5jaGVja0V4dGVuZHNGb3JOb25NYXRjaGVkID0gZnVuY3Rpb24gKGV4dGVuZExpc3QpIHsNCiAgICAgICAgICAgIHZhciBpbmRpY2VzID0gdGhpcy5leHRlbmRJbmRpY2VzOw0KICAgICAgICAgICAgZXh0ZW5kTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGV4dGVuZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiAhZXh0ZW5kLmhhc0ZvdW5kTWF0Y2hlcyAmJiBleHRlbmQucGFyZW50X2lkcy5sZW5ndGggPT0gMTsNCiAgICAgICAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKGV4dGVuZCkgew0KICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9ICdfdW5rbm93bl8nOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gZXh0ZW5kLnNlbGVjdG9yLnRvQ1NTKHt9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfQ0KICAgICAgICAgICAgICAgIGlmICghaW5kaWNlc1tleHRlbmQuaW5kZXggKyAiICIgKyBzZWxlY3Rvcl0pIHsNCiAgICAgICAgICAgICAgICAgICAgaW5kaWNlc1tleHRlbmQuaW5kZXggKyAiICIgKyBzZWxlY3Rvcl0gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBsb2dnZXIkMS53YXJuKCJleHRlbmQgJyIgKyBzZWxlY3RvciArICInIGhhcyBubyBtYXRjaGVzIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUuZG9FeHRlbmRDaGFpbmluZyA9IGZ1bmN0aW9uIChleHRlbmRzTGlzdCwgZXh0ZW5kc0xpc3RUYXJnZXQsIGl0ZXJhdGlvbkNvdW50KSB7DQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgLy8gY2hhaW5pbmcgaXMgZGlmZmVyZW50IGZyb20gbm9ybWFsIGV4dGVuc2lvbi4uIGlmIHdlIGV4dGVuZCBhbiBleHRlbmQgdGhlbiB3ZSBhcmUgbm90IGp1c3QgY29weWluZywgYWx0ZXJpbmcNCiAgICAgICAgICAgIC8vIGFuZCBwYXN0aW5nIHRoZSBzZWxlY3RvciB3ZSB3b3VsZCBkbyBub3JtYWxseSwgYnV0IHdlIGFyZSBhbHNvIGFkZGluZyBhbiBleHRlbmQgd2l0aCB0aGUgc2FtZSB0YXJnZXQgc2VsZWN0b3INCiAgICAgICAgICAgIC8vIHRoaXMgbWVhbnMgdGhpcyBuZXcgZXh0ZW5kIGNhbiB0aGVuIGdvIGFuZCBhbHRlciBvdGhlciBleHRlbmRzDQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgLy8gdGhpcyBtZXRob2QgZGVhbHMgd2l0aCBhbGwgdGhlIGNoYWluaW5nIHdvcmsgLSB3aXRob3V0IGl0LCBleHRlbmQgaXMgZmxhdCBhbmQgZG9lc24ndCB3b3JrIG9uIG90aGVyIGV4dGVuZCBzZWxlY3RvcnMNCiAgICAgICAgICAgIC8vIHRoaXMgaXMgYWxzbyB0aGUgbW9zdCBleHBlbnNpdmUuLiBhbmQgYSBtYXRjaCBvbiBvbmUgc2VsZWN0b3IgY2FuIGNhdXNlIGFuIGV4dGVuc2lvbiBvZiBhIHNlbGVjdG9yIHdlIGhhZCBhbHJlYWR5DQogICAgICAgICAgICAvLyBwcm9jZXNzZWQgaWYgd2UgbG9vayBhdCBlYWNoIHNlbGVjdG9yIGF0IGEgdGltZSwgYXMgaXMgZG9uZSBpbiB2aXNpdFJ1bGVzZXQNCiAgICAgICAgICAgIHZhciBleHRlbmRJbmRleDsNCiAgICAgICAgICAgIHZhciB0YXJnZXRFeHRlbmRJbmRleDsNCiAgICAgICAgICAgIHZhciBtYXRjaGVzOw0KICAgICAgICAgICAgdmFyIGV4dGVuZHNUb0FkZCA9IFtdOw0KICAgICAgICAgICAgdmFyIG5ld1NlbGVjdG9yOw0KICAgICAgICAgICAgdmFyIGV4dGVuZFZpc2l0b3IgPSB0aGlzOw0KICAgICAgICAgICAgdmFyIHNlbGVjdG9yUGF0aDsNCiAgICAgICAgICAgIHZhciBleHRlbmQ7DQogICAgICAgICAgICB2YXIgdGFyZ2V0RXh0ZW5kOw0KICAgICAgICAgICAgdmFyIG5ld0V4dGVuZDsNCiAgICAgICAgICAgIGl0ZXJhdGlvbkNvdW50ID0gaXRlcmF0aW9uQ291bnQgfHwgMDsNCiAgICAgICAgICAgIC8vIGxvb3AgdGhyb3VnaCBjb21wYXJpbmcgZXZlcnkgZXh0ZW5kIHdpdGggZXZlcnkgdGFyZ2V0IGV4dGVuZC4NCiAgICAgICAgICAgIC8vIGEgdGFyZ2V0IGV4dGVuZCBpcyB0aGUgb25lIG9uIHRoZSBydWxlc2V0IHdlIGFyZSBsb29raW5nIGF0IGNvcHkvZWRpdC9wYXN0aW5nIGluIHBsYWNlDQogICAgICAgICAgICAvLyBlLmcuICAuYTpleHRlbmQoLmIpIHt9ICBhbmQgLmI6ZXh0ZW5kKC5jKSB7fSB0aGVuIHRoZSBmaXJzdCBleHRlbmQgZXh0ZW5kcyB0aGUgc2Vjb25kIG9uZQ0KICAgICAgICAgICAgLy8gYW5kIHRoZSBzZWNvbmQgaXMgdGhlIHRhcmdldC4NCiAgICAgICAgICAgIC8vIHRoZSBzZXBhcmF0aW9uIGludG8gdHdvIGxpc3RzIGFsbG93cyB1cyB0byBwcm9jZXNzIGEgc3Vic2V0IG9mIGNoYWlucyB3aXRoIGEgYmlnZ2VyIHNldCwgYXMgaXMgdGhlDQogICAgICAgICAgICAvLyBjYXNlIHdoZW4gcHJvY2Vzc2luZyBtZWRpYSBxdWVyaWVzDQogICAgICAgICAgICBmb3IgKGV4dGVuZEluZGV4ID0gMDsgZXh0ZW5kSW5kZXggPCBleHRlbmRzTGlzdC5sZW5ndGg7IGV4dGVuZEluZGV4KyspIHsNCiAgICAgICAgICAgICAgICBmb3IgKHRhcmdldEV4dGVuZEluZGV4ID0gMDsgdGFyZ2V0RXh0ZW5kSW5kZXggPCBleHRlbmRzTGlzdFRhcmdldC5sZW5ndGg7IHRhcmdldEV4dGVuZEluZGV4KyspIHsNCiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kID0gZXh0ZW5kc0xpc3RbZXh0ZW5kSW5kZXhdOw0KICAgICAgICAgICAgICAgICAgICB0YXJnZXRFeHRlbmQgPSBleHRlbmRzTGlzdFRhcmdldFt0YXJnZXRFeHRlbmRJbmRleF07DQogICAgICAgICAgICAgICAgICAgIC8vIGxvb2sgZm9yIGNpcmN1bGFyIHJlZmVyZW5jZXMNCiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dGVuZC5wYXJlbnRfaWRzLmluZGV4T2YodGFyZ2V0RXh0ZW5kLm9iamVjdF9pZCkgPj0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBhIG1hdGNoIGluIHRoZSB0YXJnZXQgZXh0ZW5kcyBzZWxmIHNlbGVjdG9yICh0aGUgYml0IGJlZm9yZSA6ZXh0ZW5kKQ0KICAgICAgICAgICAgICAgICAgICBzZWxlY3RvclBhdGggPSBbdGFyZ2V0RXh0ZW5kLnNlbGZTZWxlY3RvcnNbMF1dOw0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzID0gZXh0ZW5kVmlzaXRvci5maW5kTWF0Y2goZXh0ZW5kLCBzZWxlY3RvclBhdGgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZC5oYXNGb3VuZE1hdGNoZXMgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgZm91bmQgYSBtYXRjaCwgc28gZm9yIGVhY2ggc2VsZiBzZWxlY3Rvci4uDQogICAgICAgICAgICAgICAgICAgICAgICBleHRlbmQuc2VsZlNlbGVjdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChzZWxmU2VsZWN0b3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mbyA9IHRhcmdldEV4dGVuZC52aXNpYmlsaXR5SW5mbygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByb2Nlc3MgdGhlIGV4dGVuZCBhcyB1c3VhbA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NlbGVjdG9yID0gZXh0ZW5kVmlzaXRvci5leHRlbmRTZWxlY3RvcihtYXRjaGVzLCBzZWxlY3RvclBhdGgsIHNlbGZTZWxlY3RvciwgZXh0ZW5kLmlzVmlzaWJsZSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgbm93IHdlIGNyZWF0ZSBhIG5ldyBleHRlbmQgZnJvbSBpdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0V4dGVuZCA9IG5ldyAodHJlZS5FeHRlbmQpKHRhcmdldEV4dGVuZC5zZWxlY3RvciwgdGFyZ2V0RXh0ZW5kLm9wdGlvbiwgMCwgdGFyZ2V0RXh0ZW5kLmZpbGVJbmZvKCksIGluZm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0V4dGVuZC5zZWxmU2VsZWN0b3JzID0gbmV3U2VsZWN0b3I7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBleHRlbmQgb250byB0aGUgbGlzdCBvZiBleHRlbmRzIGZvciB0aGF0IHNlbGVjdG9yDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2VsZWN0b3JbbmV3U2VsZWN0b3IubGVuZ3RoIC0gMV0uZXh0ZW5kTGlzdCA9IFtuZXdFeHRlbmRdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY29yZCB0aGF0IHdlIG5lZWQgdG8gYWRkIGl0Lg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZHNUb0FkZC5wdXNoKG5ld0V4dGVuZCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RXh0ZW5kLnJ1bGVzZXQgPSB0YXJnZXRFeHRlbmQucnVsZXNldDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBpdHMgcGFyZW50cyBmb3IgY2lyY3VsYXIgcmVmZXJlbmNlcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0V4dGVuZC5wYXJlbnRfaWRzID0gbmV3RXh0ZW5kLnBhcmVudF9pZHMuY29uY2F0KHRhcmdldEV4dGVuZC5wYXJlbnRfaWRzLCBleHRlbmQucGFyZW50X2lkcyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25seSBwcm9jZXNzIHRoZSBzZWxlY3RvciBvbmNlLi4gaWYgd2UgaGF2ZSA6ZXh0ZW5kKC5hLC5iKSB0aGVuIG11bHRpcGxlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXh0ZW5kcyB3aWxsIGxvb2sgYXQgdGhlIHNhbWUgc2VsZWN0b3IgcGF0aCwgc28gd2hlbiBleHRlbmRpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBrbm93IHRoYXQgYW55IG90aGVycyB3aWxsIGJlIGR1cGxpY2F0ZXMgaW4gdGVybXMgb2Ygd2hhdCBpcyBhZGRlZCB0byB0aGUgY3NzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldEV4dGVuZC5maXJzdEV4dGVuZE9uVGhpc1NlbGVjdG9yUGF0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdFeHRlbmQuZmlyc3RFeHRlbmRPblRoaXNTZWxlY3RvclBhdGggPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRFeHRlbmQucnVsZXNldC5wYXRocy5wdXNoKG5ld1NlbGVjdG9yKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChleHRlbmRzVG9BZGQubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgLy8gdHJ5IHRvIGRldGVjdCBjaXJjdWxhciByZWZlcmVuY2VzIHRvIHN0b3AgYSBzdGFjayBvdmVyZmxvdy4NCiAgICAgICAgICAgICAgICAvLyBtYXkgbm8gbG9uZ2VyIGJlIG5lZWRlZC4NCiAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZENoYWluQ291bnQrKzsNCiAgICAgICAgICAgICAgICBpZiAoaXRlcmF0aW9uQ291bnQgPiAxMDApIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yT25lID0gJ3t1bmFibGUgdG8gY2FsY3VsYXRlfSc7DQogICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvclR3byA9ICd7dW5hYmxlIHRvIGNhbGN1bGF0ZX0nOw0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JPbmUgPSBleHRlbmRzVG9BZGRbMF0uc2VsZlNlbGVjdG9yc1swXS50b0NTUygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JUd28gPSBleHRlbmRzVG9BZGRbMF0uc2VsZWN0b3IudG9DU1MoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9DQogICAgICAgICAgICAgICAgICAgIHRocm93IHsgbWVzc2FnZTogImV4dGVuZCBjaXJjdWxhciByZWZlcmVuY2UgZGV0ZWN0ZWQuIE9uZSBvZiB0aGUgY2lyY3VsYXIgZXh0ZW5kcyBpcyBjdXJyZW50bHk6IiArIHNlbGVjdG9yT25lICsgIjpleHRlbmQoIiArIHNlbGVjdG9yVHdvICsgIikiIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIG5vdyBwcm9jZXNzIHRoZSBuZXcgZXh0ZW5kcyBvbiB0aGUgZXhpc3RpbmcgcnVsZXMgc28gdGhhdCB3ZSBjYW4gaGFuZGxlIGEgZXh0ZW5kaW5nIGIgZXh0ZW5kaW5nIGMgZXh0ZW5kaW5nDQogICAgICAgICAgICAgICAgLy8gZCBleHRlbmRpbmcgZS4uLg0KICAgICAgICAgICAgICAgIHJldHVybiBleHRlbmRzVG9BZGQuY29uY2F0KGV4dGVuZFZpc2l0b3IuZG9FeHRlbmRDaGFpbmluZyhleHRlbmRzVG9BZGQsIGV4dGVuZHNMaXN0VGFyZ2V0LCBpdGVyYXRpb25Db3VudCArIDEpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBleHRlbmRzVG9BZGQ7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUudmlzaXREZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChydWxlTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgUHJvY2Vzc0V4dGVuZHNWaXNpdG9yLnByb3RvdHlwZS52aXNpdE1peGluRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIChtaXhpbkRlZmluaXRpb25Ob2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIHZpc2l0QXJncy52aXNpdERlZXBlciA9IGZhbHNlOw0KICAgICAgICB9Ow0KICAgICAgICBQcm9jZXNzRXh0ZW5kc1Zpc2l0b3IucHJvdG90eXBlLnZpc2l0U2VsZWN0b3IgPSBmdW5jdGlvbiAoc2VsZWN0b3JOb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIHZpc2l0QXJncy52aXNpdERlZXBlciA9IGZhbHNlOw0KICAgICAgICB9Ow0KICAgICAgICBQcm9jZXNzRXh0ZW5kc1Zpc2l0b3IucHJvdG90eXBlLnZpc2l0UnVsZXNldCA9IGZ1bmN0aW9uIChydWxlc2V0Tm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICBpZiAocnVsZXNldE5vZGUucm9vdCkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBtYXRjaGVzOw0KICAgICAgICAgICAgdmFyIHBhdGhJbmRleDsNCiAgICAgICAgICAgIHZhciBleHRlbmRJbmRleDsNCiAgICAgICAgICAgIHZhciBhbGxFeHRlbmRzID0gdGhpcy5hbGxFeHRlbmRzU3RhY2tbdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoIC0gMV07DQogICAgICAgICAgICB2YXIgc2VsZWN0b3JzVG9BZGQgPSBbXTsNCiAgICAgICAgICAgIHZhciBleHRlbmRWaXNpdG9yID0gdGhpczsNCiAgICAgICAgICAgIHZhciBzZWxlY3RvclBhdGg7DQogICAgICAgICAgICAvLyBsb29rIGF0IGVhY2ggc2VsZWN0b3IgcGF0aCBpbiB0aGUgcnVsZXNldCwgZmluZCBhbnkgZXh0ZW5kIG1hdGNoZXMgYW5kIHRoZW4gY29weSwgZmluZCBhbmQgcmVwbGFjZQ0KICAgICAgICAgICAgZm9yIChleHRlbmRJbmRleCA9IDA7IGV4dGVuZEluZGV4IDwgYWxsRXh0ZW5kcy5sZW5ndGg7IGV4dGVuZEluZGV4KyspIHsNCiAgICAgICAgICAgICAgICBmb3IgKHBhdGhJbmRleCA9IDA7IHBhdGhJbmRleCA8IHJ1bGVzZXROb2RlLnBhdGhzLmxlbmd0aDsgcGF0aEluZGV4KyspIHsNCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JQYXRoID0gcnVsZXNldE5vZGUucGF0aHNbcGF0aEluZGV4XTsNCiAgICAgICAgICAgICAgICAgICAgLy8gZXh0ZW5kaW5nIGV4dGVuZHMgaGFwcGVucyBpbml0aWFsbHksIGJlZm9yZSB0aGUgbWFpbiBwYXNzDQogICAgICAgICAgICAgICAgICAgIGlmIChydWxlc2V0Tm9kZS5leHRlbmRPbkV2ZXJ5UGF0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dGVuZExpc3QgPSBzZWxlY3RvclBhdGhbc2VsZWN0b3JQYXRoLmxlbmd0aCAtIDFdLmV4dGVuZExpc3Q7DQogICAgICAgICAgICAgICAgICAgIGlmIChleHRlbmRMaXN0ICYmIGV4dGVuZExpc3QubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzID0gdGhpcy5maW5kTWF0Y2goYWxsRXh0ZW5kc1tleHRlbmRJbmRleF0sIHNlbGVjdG9yUGF0aCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYWxsRXh0ZW5kc1tleHRlbmRJbmRleF0uaGFzRm91bmRNYXRjaGVzID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbEV4dGVuZHNbZXh0ZW5kSW5kZXhdLnNlbGZTZWxlY3RvcnMuZm9yRWFjaChmdW5jdGlvbiAoc2VsZlNlbGVjdG9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dGVuZGVkU2VsZWN0b3JzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZGVkU2VsZWN0b3JzID0gZXh0ZW5kVmlzaXRvci5leHRlbmRTZWxlY3RvcihtYXRjaGVzLCBzZWxlY3RvclBhdGgsIHNlbGZTZWxlY3RvciwgYWxsRXh0ZW5kc1tleHRlbmRJbmRleF0uaXNWaXNpYmxlKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yc1RvQWRkLnB1c2goZXh0ZW5kZWRTZWxlY3RvcnMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBydWxlc2V0Tm9kZS5wYXRocyA9IHJ1bGVzZXROb2RlLnBhdGhzLmNvbmNhdChzZWxlY3RvcnNUb0FkZCk7DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUuZmluZE1hdGNoID0gZnVuY3Rpb24gKGV4dGVuZCwgaGF5c3RhY2tTZWxlY3RvclBhdGgpIHsNCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICAvLyBsb29rIHRocm91Z2ggdGhlIGhheXN0YWNrIHNlbGVjdG9yIHBhdGggdG8gdHJ5IGFuZCBmaW5kIHRoZSBuZWVkbGUgLSBleHRlbmQuc2VsZWN0b3INCiAgICAgICAgICAgIC8vIHJldHVybnMgYW4gYXJyYXkgb2Ygc2VsZWN0b3IgbWF0Y2hlcyB0aGF0IGNhbiB0aGVuIGJlIHJlcGxhY2VkDQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgdmFyIGhheXN0YWNrU2VsZWN0b3JJbmRleDsNCiAgICAgICAgICAgIHZhciBoYWNrc3RhY2tTZWxlY3RvcjsNCiAgICAgICAgICAgIHZhciBoYWNrc3RhY2tFbGVtZW50SW5kZXg7DQogICAgICAgICAgICB2YXIgaGF5c3RhY2tFbGVtZW50Ow0KICAgICAgICAgICAgdmFyIHRhcmdldENvbWJpbmF0b3I7DQogICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgIHZhciBleHRlbmRWaXNpdG9yID0gdGhpczsNCiAgICAgICAgICAgIHZhciBuZWVkbGVFbGVtZW50cyA9IGV4dGVuZC5zZWxlY3Rvci5lbGVtZW50czsNCiAgICAgICAgICAgIHZhciBwb3RlbnRpYWxNYXRjaGVzID0gW107DQogICAgICAgICAgICB2YXIgcG90ZW50aWFsTWF0Y2g7DQogICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdOw0KICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHRoZSBoYXlzdGFjayBlbGVtZW50cw0KICAgICAgICAgICAgZm9yIChoYXlzdGFja1NlbGVjdG9ySW5kZXggPSAwOyBoYXlzdGFja1NlbGVjdG9ySW5kZXggPCBoYXlzdGFja1NlbGVjdG9yUGF0aC5sZW5ndGg7IGhheXN0YWNrU2VsZWN0b3JJbmRleCsrKSB7DQogICAgICAgICAgICAgICAgaGFja3N0YWNrU2VsZWN0b3IgPSBoYXlzdGFja1NlbGVjdG9yUGF0aFtoYXlzdGFja1NlbGVjdG9ySW5kZXhdOw0KICAgICAgICAgICAgICAgIGZvciAoaGFja3N0YWNrRWxlbWVudEluZGV4ID0gMDsgaGFja3N0YWNrRWxlbWVudEluZGV4IDwgaGFja3N0YWNrU2VsZWN0b3IuZWxlbWVudHMubGVuZ3RoOyBoYWNrc3RhY2tFbGVtZW50SW5kZXgrKykgew0KICAgICAgICAgICAgICAgICAgICBoYXlzdGFja0VsZW1lbnQgPSBoYWNrc3RhY2tTZWxlY3Rvci5lbGVtZW50c1toYWNrc3RhY2tFbGVtZW50SW5kZXhdOw0KICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBhbGxvdyBlbGVtZW50cyBiZWZvcmUgb3VyIG1hdGNoIHdlIGNhbiBhZGQgYSBwb3RlbnRpYWwgbWF0Y2ggZXZlcnkgdGltZS4gb3RoZXJ3aXNlIG9ubHkgYXQgdGhlIGZpcnN0IGVsZW1lbnQuDQogICAgICAgICAgICAgICAgICAgIGlmIChleHRlbmQuYWxsb3dCZWZvcmUgfHwgKGhheXN0YWNrU2VsZWN0b3JJbmRleCA9PT0gMCAmJiBoYWNrc3RhY2tFbGVtZW50SW5kZXggPT09IDApKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwb3RlbnRpYWxNYXRjaGVzLnB1c2goeyBwYXRoSW5kZXg6IGhheXN0YWNrU2VsZWN0b3JJbmRleCwgaW5kZXg6IGhhY2tzdGFja0VsZW1lbnRJbmRleCwgbWF0Y2hlZDogMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsQ29tYmluYXRvcjogaGF5c3RhY2tFbGVtZW50LmNvbWJpbmF0b3IgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBvdGVudGlhbE1hdGNoZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBvdGVudGlhbE1hdGNoID0gcG90ZW50aWFsTWF0Y2hlc1tpXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbGVjdG9ycyBhZGQgIiAiIG9udG8gdGhlIGZpcnN0IGVsZW1lbnQuIFdoZW4gd2UgdXNlICYgaXQgam9pbnMgdGhlIHNlbGVjdG9ycyB0b2dldGhlciwgYnV0IGlmIHdlIGRvbid0DQogICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGVuIGVhY2ggc2VsZWN0b3IgaW4gaGF5c3RhY2tTZWxlY3RvclBhdGggaGFzIGEgc3BhY2UgYmVmb3JlIGl0IGFkZGVkIGluIHRoZSB0b0NTUyBwaGFzZS4gc28gd2UgbmVlZCB0bw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gd29yayBvdXQgd2hhdCB0aGUgcmVzdWx0aW5nIGNvbWJpbmF0b3Igd2lsbCBiZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q29tYmluYXRvciA9IGhheXN0YWNrRWxlbWVudC5jb21iaW5hdG9yLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldENvbWJpbmF0b3IgPT09ICcnICYmIGhhY2tzdGFja0VsZW1lbnRJbmRleCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENvbWJpbmF0b3IgPSAnICc7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBkb24ndCBtYXRjaCwgbnVsbCBvdXIgbWF0Y2ggdG8gaW5kaWNhdGUgZmFpbHVyZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFleHRlbmRWaXNpdG9yLmlzRWxlbWVudFZhbHVlc0VxdWFsKG5lZWRsZUVsZW1lbnRzW3BvdGVudGlhbE1hdGNoLm1hdGNoZWRdLnZhbHVlLCBoYXlzdGFja0VsZW1lbnQudmFsdWUpIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBvdGVudGlhbE1hdGNoLm1hdGNoZWQgPiAwICYmIG5lZWRsZUVsZW1lbnRzW3BvdGVudGlhbE1hdGNoLm1hdGNoZWRdLmNvbWJpbmF0b3IudmFsdWUgIT09IHRhcmdldENvbWJpbmF0b3IpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG90ZW50aWFsTWF0Y2ggPSBudWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG90ZW50aWFsTWF0Y2gubWF0Y2hlZCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgYXJlIHN0aWxsIHZhbGlkIGFuZCBoYXZlIGZpbmlzaGVkLCB0ZXN0IHdoZXRoZXIgd2UgaGF2ZSBlbGVtZW50cyBhZnRlciBhbmQgd2hldGhlciB0aGVzZSBhcmUgYWxsb3dlZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvdGVudGlhbE1hdGNoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG90ZW50aWFsTWF0Y2guZmluaXNoZWQgPSBwb3RlbnRpYWxNYXRjaC5tYXRjaGVkID09PSBuZWVkbGVFbGVtZW50cy5sZW5ndGg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvdGVudGlhbE1hdGNoLmZpbmlzaGVkICYmDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICghZXh0ZW5kLmFsbG93QWZ0ZXIgJiYNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChoYWNrc3RhY2tFbGVtZW50SW5kZXggKyAxIDwgaGFja3N0YWNrU2VsZWN0b3IuZWxlbWVudHMubGVuZ3RoIHx8IGhheXN0YWNrU2VsZWN0b3JJbmRleCArIDEgPCBoYXlzdGFja1NlbGVjdG9yUGF0aC5sZW5ndGgpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3RlbnRpYWxNYXRjaCA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbnVsbCB3ZSByZW1vdmUsIGlmIG5vdCwgd2UgYXJlIHN0aWxsIHZhbGlkLCBzbyBlaXRoZXIgcHVzaCBhcyBhIHZhbGlkIG1hdGNoIG9yIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocG90ZW50aWFsTWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG90ZW50aWFsTWF0Y2guZmluaXNoZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG90ZW50aWFsTWF0Y2gubGVuZ3RoID0gbmVlZGxlRWxlbWVudHMubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3RlbnRpYWxNYXRjaC5lbmRQYXRoSW5kZXggPSBoYXlzdGFja1NlbGVjdG9ySW5kZXg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvdGVudGlhbE1hdGNoLmVuZFBhdGhFbGVtZW50SW5kZXggPSBoYWNrc3RhY2tFbGVtZW50SW5kZXggKyAxOyAvLyBpbmRleCBhZnRlciBlbmQgb2YgbWF0Y2gNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG90ZW50aWFsTWF0Y2hlcy5sZW5ndGggPSAwOyAvLyB3ZSBkb24ndCBhbGxvdyBtYXRjaGVzIHRvIG92ZXJsYXAsIHNvIHN0YXJ0IG1hdGNoaW5nIGFnYWluDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChwb3RlbnRpYWxNYXRjaCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG90ZW50aWFsTWF0Y2hlcy5zcGxpY2UoaSwgMSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaS0tOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXM7DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUuaXNFbGVtZW50VmFsdWVzRXF1YWwgPSBmdW5jdGlvbiAoZWxlbWVudFZhbHVlMSwgZWxlbWVudFZhbHVlMikgew0KICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50VmFsdWUxID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgZWxlbWVudFZhbHVlMiA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudFZhbHVlMSA9PT0gZWxlbWVudFZhbHVlMjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChlbGVtZW50VmFsdWUxIGluc3RhbmNlb2YgdHJlZS5BdHRyaWJ1dGUpIHsNCiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFZhbHVlMS5vcCAhPT0gZWxlbWVudFZhbHVlMi5vcCB8fCBlbGVtZW50VmFsdWUxLmtleSAhPT0gZWxlbWVudFZhbHVlMi5rZXkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnRWYWx1ZTEudmFsdWUgfHwgIWVsZW1lbnRWYWx1ZTIudmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRWYWx1ZTEudmFsdWUgfHwgZWxlbWVudFZhbHVlMi52YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbGVtZW50VmFsdWUxID0gZWxlbWVudFZhbHVlMS52YWx1ZS52YWx1ZSB8fCBlbGVtZW50VmFsdWUxLnZhbHVlOw0KICAgICAgICAgICAgICAgIGVsZW1lbnRWYWx1ZTIgPSBlbGVtZW50VmFsdWUyLnZhbHVlLnZhbHVlIHx8IGVsZW1lbnRWYWx1ZTIudmFsdWU7DQogICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRWYWx1ZTEgPT09IGVsZW1lbnRWYWx1ZTI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbGVtZW50VmFsdWUxID0gZWxlbWVudFZhbHVlMS52YWx1ZTsNCiAgICAgICAgICAgIGVsZW1lbnRWYWx1ZTIgPSBlbGVtZW50VmFsdWUyLnZhbHVlOw0KICAgICAgICAgICAgaWYgKGVsZW1lbnRWYWx1ZTEgaW5zdGFuY2VvZiB0cmVlLlNlbGVjdG9yKSB7DQogICAgICAgICAgICAgICAgaWYgKCEoZWxlbWVudFZhbHVlMiBpbnN0YW5jZW9mIHRyZWUuU2VsZWN0b3IpIHx8IGVsZW1lbnRWYWx1ZTEuZWxlbWVudHMubGVuZ3RoICE9PSBlbGVtZW50VmFsdWUyLmVsZW1lbnRzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudFZhbHVlMS5lbGVtZW50cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFZhbHVlMS5lbGVtZW50c1tpXS5jb21iaW5hdG9yLnZhbHVlICE9PSBlbGVtZW50VmFsdWUyLmVsZW1lbnRzW2ldLmNvbWJpbmF0b3IudmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSAwIHx8IChlbGVtZW50VmFsdWUxLmVsZW1lbnRzW2ldLmNvbWJpbmF0b3IudmFsdWUgfHwgJyAnKSAhPT0gKGVsZW1lbnRWYWx1ZTIuZWxlbWVudHNbaV0uY29tYmluYXRvci52YWx1ZSB8fCAnICcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0VsZW1lbnRWYWx1ZXNFcXVhbChlbGVtZW50VmFsdWUxLmVsZW1lbnRzW2ldLnZhbHVlLCBlbGVtZW50VmFsdWUyLmVsZW1lbnRzW2ldLnZhbHVlKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9Ow0KICAgICAgICBQcm9jZXNzRXh0ZW5kc1Zpc2l0b3IucHJvdG90eXBlLmV4dGVuZFNlbGVjdG9yID0gZnVuY3Rpb24gKG1hdGNoZXMsIHNlbGVjdG9yUGF0aCwgcmVwbGFjZW1lbnRTZWxlY3RvciwgaXNWaXNpYmxlKSB7DQogICAgICAgICAgICAvLyBmb3IgYSBzZXQgb2YgbWF0Y2hlcywgcmVwbGFjZSBlYWNoIG1hdGNoIHdpdGggdGhlIHJlcGxhY2VtZW50IHNlbGVjdG9yDQogICAgICAgICAgICB2YXIgY3VycmVudFNlbGVjdG9yUGF0aEluZGV4ID0gMCwgY3VycmVudFNlbGVjdG9yUGF0aEVsZW1lbnRJbmRleCA9IDAsIHBhdGggPSBbXSwgbWF0Y2hJbmRleCwgc2VsZWN0b3IsIGZpcnN0RWxlbWVudCwgbWF0Y2gsIG5ld0VsZW1lbnRzOw0KICAgICAgICAgICAgZm9yIChtYXRjaEluZGV4ID0gMDsgbWF0Y2hJbmRleCA8IG1hdGNoZXMubGVuZ3RoOyBtYXRjaEluZGV4KyspIHsNCiAgICAgICAgICAgICAgICBtYXRjaCA9IG1hdGNoZXNbbWF0Y2hJbmRleF07DQogICAgICAgICAgICAgICAgc2VsZWN0b3IgPSBzZWxlY3RvclBhdGhbbWF0Y2gucGF0aEluZGV4XTsNCiAgICAgICAgICAgICAgICBmaXJzdEVsZW1lbnQgPSBuZXcgdHJlZS5FbGVtZW50KG1hdGNoLmluaXRpYWxDb21iaW5hdG9yLCByZXBsYWNlbWVudFNlbGVjdG9yLmVsZW1lbnRzWzBdLnZhbHVlLCByZXBsYWNlbWVudFNlbGVjdG9yLmVsZW1lbnRzWzBdLmlzVmFyaWFibGUsIHJlcGxhY2VtZW50U2VsZWN0b3IuZWxlbWVudHNbMF0uZ2V0SW5kZXgoKSwgcmVwbGFjZW1lbnRTZWxlY3Rvci5lbGVtZW50c1swXS5maWxlSW5mbygpKTsNCiAgICAgICAgICAgICAgICBpZiAobWF0Y2gucGF0aEluZGV4ID4gY3VycmVudFNlbGVjdG9yUGF0aEluZGV4ICYmIGN1cnJlbnRTZWxlY3RvclBhdGhFbGVtZW50SW5kZXggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHBhdGhbcGF0aC5sZW5ndGggLSAxXS5lbGVtZW50cyA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmVsZW1lbnRzLmNvbmNhdChzZWxlY3RvclBhdGhbY3VycmVudFNlbGVjdG9yUGF0aEluZGV4XS5lbGVtZW50cy5zbGljZShjdXJyZW50U2VsZWN0b3JQYXRoRWxlbWVudEluZGV4KSk7DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RvclBhdGhFbGVtZW50SW5kZXggPSAwOw0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2VsZWN0b3JQYXRoSW5kZXgrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgbmV3RWxlbWVudHMgPSBzZWxlY3Rvci5lbGVtZW50cw0KICAgICAgICAgICAgICAgICAgICAuc2xpY2UoY3VycmVudFNlbGVjdG9yUGF0aEVsZW1lbnRJbmRleCwgbWF0Y2guaW5kZXgpDQogICAgICAgICAgICAgICAgICAgIC5jb25jYXQoW2ZpcnN0RWxlbWVudF0pDQogICAgICAgICAgICAgICAgICAgIC5jb25jYXQocmVwbGFjZW1lbnRTZWxlY3Rvci5lbGVtZW50cy5zbGljZSgxKSk7DQogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTZWxlY3RvclBhdGhJbmRleCA9PT0gbWF0Y2gucGF0aEluZGV4ICYmIG1hdGNoSW5kZXggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIHBhdGhbcGF0aC5sZW5ndGggLSAxXS5lbGVtZW50cyA9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXRoW3BhdGgubGVuZ3RoIC0gMV0uZWxlbWVudHMuY29uY2F0KG5ld0VsZW1lbnRzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLmNvbmNhdChzZWxlY3RvclBhdGguc2xpY2UoY3VycmVudFNlbGVjdG9yUGF0aEluZGV4LCBtYXRjaC5wYXRoSW5kZXgpKTsNCiAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKG5ldyB0cmVlLlNlbGVjdG9yKG5ld0VsZW1lbnRzKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RvclBhdGhJbmRleCA9IG1hdGNoLmVuZFBhdGhJbmRleDsNCiAgICAgICAgICAgICAgICBjdXJyZW50U2VsZWN0b3JQYXRoRWxlbWVudEluZGV4ID0gbWF0Y2guZW5kUGF0aEVsZW1lbnRJbmRleDsNCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNlbGVjdG9yUGF0aEVsZW1lbnRJbmRleCA+PSBzZWxlY3RvclBhdGhbY3VycmVudFNlbGVjdG9yUGF0aEluZGV4XS5lbGVtZW50cy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlbGVjdG9yUGF0aEVsZW1lbnRJbmRleCA9IDA7DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RvclBhdGhJbmRleCsrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChjdXJyZW50U2VsZWN0b3JQYXRoSW5kZXggPCBzZWxlY3RvclBhdGgubGVuZ3RoICYmIGN1cnJlbnRTZWxlY3RvclBhdGhFbGVtZW50SW5kZXggPiAwKSB7DQogICAgICAgICAgICAgICAgcGF0aFtwYXRoLmxlbmd0aCAtIDFdLmVsZW1lbnRzID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdDQogICAgICAgICAgICAgICAgICAgIC5lbGVtZW50cy5jb25jYXQoc2VsZWN0b3JQYXRoW2N1cnJlbnRTZWxlY3RvclBhdGhJbmRleF0uZWxlbWVudHMuc2xpY2UoY3VycmVudFNlbGVjdG9yUGF0aEVsZW1lbnRJbmRleCkpOw0KICAgICAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RvclBhdGhJbmRleCsrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcGF0aCA9IHBhdGguY29uY2F0KHNlbGVjdG9yUGF0aC5zbGljZShjdXJyZW50U2VsZWN0b3JQYXRoSW5kZXgsIHNlbGVjdG9yUGF0aC5sZW5ndGgpKTsNCiAgICAgICAgICAgIHBhdGggPSBwYXRoLm1hcChmdW5jdGlvbiAoY3VycmVudFZhbHVlKSB7DQogICAgICAgICAgICAgICAgLy8gd2UgY2FuIHJlLXVzZSBlbGVtZW50cyBoZXJlLCBiZWNhdXNlIHRoZSB2aXNpYmlsaXR5IHByb3BlcnR5IG1hdHRlcnMgb25seSBmb3Igc2VsZWN0b3JzDQogICAgICAgICAgICAgICAgdmFyIGRlcml2ZWQgPSBjdXJyZW50VmFsdWUuY3JlYXRlRGVyaXZlZChjdXJyZW50VmFsdWUuZWxlbWVudHMpOw0KICAgICAgICAgICAgICAgIGlmIChpc1Zpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgICAgZGVyaXZlZC5lbnN1cmVWaXNpYmlsaXR5KCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBkZXJpdmVkLmVuc3VyZUludmlzaWJpbGl0eSgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gZGVyaXZlZDsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgcmV0dXJuIHBhdGg7DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUudmlzaXRNZWRpYSA9IGZ1bmN0aW9uIChtZWRpYU5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgdmFyIG5ld0FsbEV4dGVuZHMgPSBtZWRpYU5vZGUuYWxsRXh0ZW5kcy5jb25jYXQodGhpcy5hbGxFeHRlbmRzU3RhY2tbdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoIC0gMV0pOw0KICAgICAgICAgICAgbmV3QWxsRXh0ZW5kcyA9IG5ld0FsbEV4dGVuZHMuY29uY2F0KHRoaXMuZG9FeHRlbmRDaGFpbmluZyhuZXdBbGxFeHRlbmRzLCBtZWRpYU5vZGUuYWxsRXh0ZW5kcykpOw0KICAgICAgICAgICAgdGhpcy5hbGxFeHRlbmRzU3RhY2sucHVzaChuZXdBbGxFeHRlbmRzKTsNCiAgICAgICAgfTsNCiAgICAgICAgUHJvY2Vzc0V4dGVuZHNWaXNpdG9yLnByb3RvdHlwZS52aXNpdE1lZGlhT3V0ID0gZnVuY3Rpb24gKG1lZGlhTm9kZSkgew0KICAgICAgICAgICAgdmFyIGxhc3RJbmRleCA9IHRoaXMuYWxsRXh0ZW5kc1N0YWNrLmxlbmd0aCAtIDE7DQogICAgICAgICAgICB0aGlzLmFsbEV4dGVuZHNTdGFjay5sZW5ndGggPSBsYXN0SW5kZXg7DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUudmlzaXRBdFJ1bGUgPSBmdW5jdGlvbiAoYXRSdWxlTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2YXIgbmV3QWxsRXh0ZW5kcyA9IGF0UnVsZU5vZGUuYWxsRXh0ZW5kcy5jb25jYXQodGhpcy5hbGxFeHRlbmRzU3RhY2tbdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoIC0gMV0pOw0KICAgICAgICAgICAgbmV3QWxsRXh0ZW5kcyA9IG5ld0FsbEV4dGVuZHMuY29uY2F0KHRoaXMuZG9FeHRlbmRDaGFpbmluZyhuZXdBbGxFeHRlbmRzLCBhdFJ1bGVOb2RlLmFsbEV4dGVuZHMpKTsNCiAgICAgICAgICAgIHRoaXMuYWxsRXh0ZW5kc1N0YWNrLnB1c2gobmV3QWxsRXh0ZW5kcyk7DQogICAgICAgIH07DQogICAgICAgIFByb2Nlc3NFeHRlbmRzVmlzaXRvci5wcm90b3R5cGUudmlzaXRBdFJ1bGVPdXQgPSBmdW5jdGlvbiAoYXRSdWxlTm9kZSkgew0KICAgICAgICAgICAgdmFyIGxhc3RJbmRleCA9IHRoaXMuYWxsRXh0ZW5kc1N0YWNrLmxlbmd0aCAtIDE7DQogICAgICAgICAgICB0aGlzLmFsbEV4dGVuZHNTdGFjay5sZW5ndGggPSBsYXN0SW5kZXg7DQogICAgICAgIH07DQogICAgICAgIHJldHVybiBQcm9jZXNzRXh0ZW5kc1Zpc2l0b3I7DQogICAgfSgpKTsKCiAgICB2YXIgSm9pblNlbGVjdG9yVmlzaXRvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgZnVuY3Rpb24gSm9pblNlbGVjdG9yVmlzaXRvcigpIHsNCiAgICAgICAgICAgIHRoaXMuY29udGV4dHMgPSBbW11dOw0KICAgICAgICAgICAgdGhpcy5fdmlzaXRvciA9IG5ldyBWaXNpdG9yKHRoaXMpOw0KICAgICAgICB9DQogICAgICAgIEpvaW5TZWxlY3RvclZpc2l0b3IucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIChyb290KSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5fdmlzaXRvci52aXNpdChyb290KTsNCiAgICAgICAgfTsNCiAgICAgICAgSm9pblNlbGVjdG9yVmlzaXRvci5wcm90b3R5cGUudmlzaXREZWNsYXJhdGlvbiA9IGZ1bmN0aW9uIChkZWNsTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgSm9pblNlbGVjdG9yVmlzaXRvci5wcm90b3R5cGUudmlzaXRNaXhpbkRlZmluaXRpb24gPSBmdW5jdGlvbiAobWl4aW5EZWZpbml0aW9uTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgSm9pblNlbGVjdG9yVmlzaXRvci5wcm90b3R5cGUudmlzaXRSdWxlc2V0ID0gZnVuY3Rpb24gKHJ1bGVzZXROb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0c1t0aGlzLmNvbnRleHRzLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgdmFyIHBhdGhzID0gW107DQogICAgICAgICAgICB2YXIgc2VsZWN0b3JzOw0KICAgICAgICAgICAgdGhpcy5jb250ZXh0cy5wdXNoKHBhdGhzKTsNCiAgICAgICAgICAgIGlmICghcnVsZXNldE5vZGUucm9vdCkgew0KICAgICAgICAgICAgICAgIHNlbGVjdG9ycyA9IHJ1bGVzZXROb2RlLnNlbGVjdG9yczsNCiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3JzKSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGVjdG9ycyA9IHNlbGVjdG9ycy5maWx0ZXIoZnVuY3Rpb24gKHNlbGVjdG9yKSB7IHJldHVybiBzZWxlY3Rvci5nZXRJc091dHB1dCgpOyB9KTsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXNldE5vZGUuc2VsZWN0b3JzID0gc2VsZWN0b3JzLmxlbmd0aCA/IHNlbGVjdG9ycyA6IChzZWxlY3RvcnMgPSBudWxsKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9ycykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXNldE5vZGUuam9pblNlbGVjdG9ycyhwYXRocywgY29udGV4dCwgc2VsZWN0b3JzKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdG9ycykgew0KICAgICAgICAgICAgICAgICAgICBydWxlc2V0Tm9kZS5ydWxlcyA9IG51bGw7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJ1bGVzZXROb2RlLnBhdGhzID0gcGF0aHM7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIEpvaW5TZWxlY3RvclZpc2l0b3IucHJvdG90eXBlLnZpc2l0UnVsZXNldE91dCA9IGZ1bmN0aW9uIChydWxlc2V0Tm9kZSkgew0KICAgICAgICAgICAgdGhpcy5jb250ZXh0cy5sZW5ndGggPSB0aGlzLmNvbnRleHRzLmxlbmd0aCAtIDE7DQogICAgICAgIH07DQogICAgICAgIEpvaW5TZWxlY3RvclZpc2l0b3IucHJvdG90eXBlLnZpc2l0TWVkaWEgPSBmdW5jdGlvbiAobWVkaWFOb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0c1t0aGlzLmNvbnRleHRzLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgbWVkaWFOb2RlLnJ1bGVzWzBdLnJvb3QgPSAoY29udGV4dC5sZW5ndGggPT09IDAgfHwgY29udGV4dFswXS5tdWx0aU1lZGlhKTsNCiAgICAgICAgfTsNCiAgICAgICAgSm9pblNlbGVjdG9yVmlzaXRvci5wcm90b3R5cGUudmlzaXRBdFJ1bGUgPSBmdW5jdGlvbiAoYXRSdWxlTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dHNbdGhpcy5jb250ZXh0cy5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgIGlmIChhdFJ1bGVOb2RlLnJ1bGVzICYmIGF0UnVsZU5vZGUucnVsZXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgYXRSdWxlTm9kZS5ydWxlc1swXS5yb290ID0gKGF0UnVsZU5vZGUuaXNSb290ZWQgfHwgY29udGV4dC5sZW5ndGggPT09IDAgfHwgbnVsbCk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIHJldHVybiBKb2luU2VsZWN0b3JWaXNpdG9yOw0KICAgIH0oKSk7CgogICAgdmFyIENTU1Zpc2l0b3JVdGlscyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgZnVuY3Rpb24gQ1NTVmlzaXRvclV0aWxzKGNvbnRleHQpIHsNCiAgICAgICAgICAgIHRoaXMuX3Zpc2l0b3IgPSBuZXcgVmlzaXRvcih0aGlzKTsNCiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0Ow0KICAgICAgICB9DQogICAgICAgIENTU1Zpc2l0b3JVdGlscy5wcm90b3R5cGUuY29udGFpbnNTaWxlbnROb25CbG9ja2VkQ2hpbGQgPSBmdW5jdGlvbiAoYm9keVJ1bGVzKSB7DQogICAgICAgICAgICB2YXIgcnVsZTsNCiAgICAgICAgICAgIGlmICghYm9keVJ1bGVzKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCBib2R5UnVsZXMubGVuZ3RoOyByKyspIHsNCiAgICAgICAgICAgICAgICBydWxlID0gYm9keVJ1bGVzW3JdOw0KICAgICAgICAgICAgICAgIGlmIChydWxlLmlzU2lsZW50ICYmIHJ1bGUuaXNTaWxlbnQodGhpcy5fY29udGV4dCkgJiYgIXJ1bGUuYmxvY2tzVmlzaWJpbGl0eSgpKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIHRoZSBhdHJ1bGUgY29udGFpbnMgc29tZXRoaW5nIHRoYXQgd2FzIHJlZmVyZW5jZWQgKGxpa2VseSBieSBleHRlbmQpDQogICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlZm9yZSBpdCBuZWVkcyB0byBiZSBzaG93biBpbiBvdXRwdXQgdG9vDQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgQ1NTVmlzaXRvclV0aWxzLnByb3RvdHlwZS5rZWVwT25seVZpc2libGVDaGlsZHMgPSBmdW5jdGlvbiAob3duZXIpIHsNCiAgICAgICAgICAgIGlmIChvd25lciAmJiBvd25lci5ydWxlcykgew0KICAgICAgICAgICAgICAgIG93bmVyLnJ1bGVzID0gb3duZXIucnVsZXMuZmlsdGVyKGZ1bmN0aW9uICh0aGluZykgeyByZXR1cm4gdGhpbmcuaXNWaXNpYmxlKCk7IH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICBDU1NWaXNpdG9yVXRpbHMucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAob3duZXIpIHsNCiAgICAgICAgICAgIHJldHVybiAob3duZXIgJiYgb3duZXIucnVsZXMpDQogICAgICAgICAgICAgICAgPyAob3duZXIucnVsZXMubGVuZ3RoID09PSAwKSA6IHRydWU7DQogICAgICAgIH07DQogICAgICAgIENTU1Zpc2l0b3JVdGlscy5wcm90b3R5cGUuaGFzVmlzaWJsZVNlbGVjdG9yID0gZnVuY3Rpb24gKHJ1bGVzZXROb2RlKSB7DQogICAgICAgICAgICByZXR1cm4gKHJ1bGVzZXROb2RlICYmIHJ1bGVzZXROb2RlLnBhdGhzKQ0KICAgICAgICAgICAgICAgID8gKHJ1bGVzZXROb2RlLnBhdGhzLmxlbmd0aCA+IDApIDogZmFsc2U7DQogICAgICAgIH07DQogICAgICAgIENTU1Zpc2l0b3JVdGlscy5wcm90b3R5cGUucmVzb2x2ZVZpc2liaWxpdHkgPSBmdW5jdGlvbiAobm9kZSwgb3JpZ2luYWxSdWxlcykgew0KICAgICAgICAgICAgaWYgKCFub2RlLmJsb2Nrc1Zpc2liaWxpdHkoKSkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRW1wdHkobm9kZSkgJiYgIXRoaXMuY29udGFpbnNTaWxlbnROb25CbG9ja2VkQ2hpbGQob3JpZ2luYWxSdWxlcykpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBjb21waWxlZFJ1bGVzQm9keSA9IG5vZGUucnVsZXNbMF07DQogICAgICAgICAgICB0aGlzLmtlZXBPbmx5VmlzaWJsZUNoaWxkcyhjb21waWxlZFJ1bGVzQm9keSk7DQogICAgICAgICAgICBpZiAodGhpcy5pc0VtcHR5KGNvbXBpbGVkUnVsZXNCb2R5KSkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG5vZGUuZW5zdXJlVmlzaWJpbGl0eSgpOw0KICAgICAgICAgICAgbm9kZS5yZW1vdmVWaXNpYmlsaXR5QmxvY2soKTsNCiAgICAgICAgICAgIHJldHVybiBub2RlOw0KICAgICAgICB9Ow0KICAgICAgICBDU1NWaXNpdG9yVXRpbHMucHJvdG90eXBlLmlzVmlzaWJsZVJ1bGVzZXQgPSBmdW5jdGlvbiAocnVsZXNldE5vZGUpIHsNCiAgICAgICAgICAgIGlmIChydWxlc2V0Tm9kZS5maXJzdFJvb3QpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLmlzRW1wdHkocnVsZXNldE5vZGUpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFydWxlc2V0Tm9kZS5yb290ICYmICF0aGlzLmhhc1Zpc2libGVTZWxlY3RvcihydWxlc2V0Tm9kZSkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIENTU1Zpc2l0b3JVdGlsczsNCiAgICB9KCkpOw0KICAgIHZhciBUb0NTU1Zpc2l0b3IgPSBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICB0aGlzLl92aXNpdG9yID0gbmV3IFZpc2l0b3IodGhpcyk7DQogICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0Ow0KICAgICAgICB0aGlzLnV0aWxzID0gbmV3IENTU1Zpc2l0b3JVdGlscyhjb250ZXh0KTsNCiAgICB9Ow0KICAgIFRvQ1NTVmlzaXRvci5wcm90b3R5cGUgPSB7DQogICAgICAgIGlzUmVwbGFjaW5nOiB0cnVlLA0KICAgICAgICBydW46IGZ1bmN0aW9uIChyb290KSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5fdmlzaXRvci52aXNpdChyb290KTsNCiAgICAgICAgfSwNCiAgICAgICAgdmlzaXREZWNsYXJhdGlvbjogZnVuY3Rpb24gKGRlY2xOb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIGlmIChkZWNsTm9kZS5ibG9ja3NWaXNpYmlsaXR5KCkgfHwgZGVjbE5vZGUudmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gZGVjbE5vZGU7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0TWl4aW5EZWZpbml0aW9uOiBmdW5jdGlvbiAobWl4aW5Ob2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIC8vIG1peGluIGRlZmluaXRpb25zIGRvIG5vdCBnZXQgZXZhbCdkIC0gdGhpcyBtZWFucyB0aGV5IGtlZXAgc3RhdGUNCiAgICAgICAgICAgIC8vIHNvIHdlIGhhdmUgdG8gY2xlYXIgdGhhdCBzdGF0ZSBoZXJlIHNvIGl0IGlzbid0IHVzZWQgaWYgdG9DU1MgaXMgY2FsbGVkIHR3aWNlDQogICAgICAgICAgICBtaXhpbk5vZGUuZnJhbWVzID0gW107DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0RXh0ZW5kOiBmdW5jdGlvbiAoZXh0ZW5kTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0Q29tbWVudDogZnVuY3Rpb24gKGNvbW1lbnROb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIGlmIChjb21tZW50Tm9kZS5ibG9ja3NWaXNpYmlsaXR5KCkgfHwgY29tbWVudE5vZGUuaXNTaWxlbnQodGhpcy5fY29udGV4dCkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gY29tbWVudE5vZGU7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0TWVkaWE6IGZ1bmN0aW9uIChtZWRpYU5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgdmFyIG9yaWdpbmFsUnVsZXMgPSBtZWRpYU5vZGUucnVsZXNbMF0ucnVsZXM7DQogICAgICAgICAgICBtZWRpYU5vZGUuYWNjZXB0KHRoaXMuX3Zpc2l0b3IpOw0KICAgICAgICAgICAgdmlzaXRBcmdzLnZpc2l0RGVlcGVyID0gZmFsc2U7DQogICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5yZXNvbHZlVmlzaWJpbGl0eShtZWRpYU5vZGUsIG9yaWdpbmFsUnVsZXMpOw0KICAgICAgICB9LA0KICAgICAgICB2aXNpdEltcG9ydDogZnVuY3Rpb24gKGltcG9ydE5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgaWYgKGltcG9ydE5vZGUuYmxvY2tzVmlzaWJpbGl0eSgpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGltcG9ydE5vZGU7DQogICAgICAgIH0sDQogICAgICAgIHZpc2l0QXRSdWxlOiBmdW5jdGlvbiAoYXRSdWxlTm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICBpZiAoYXRSdWxlTm9kZS5ydWxlcyAmJiBhdFJ1bGVOb2RlLnJ1bGVzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpc2l0QXRSdWxlV2l0aEJvZHkoYXRSdWxlTm9kZSwgdmlzaXRBcmdzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpc2l0QXRSdWxlV2l0aG91dEJvZHkoYXRSdWxlTm9kZSwgdmlzaXRBcmdzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdmlzaXRBbm9ueW1vdXM6IGZ1bmN0aW9uIChhbm9ueW1vdXNOb2RlLCB2aXNpdEFyZ3MpIHsNCiAgICAgICAgICAgIGlmICghYW5vbnltb3VzTm9kZS5ibG9ja3NWaXNpYmlsaXR5KCkpIHsNCiAgICAgICAgICAgICAgICBhbm9ueW1vdXNOb2RlLmFjY2VwdCh0aGlzLl92aXNpdG9yKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYW5vbnltb3VzTm9kZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdmlzaXRBdFJ1bGVXaXRoQm9keTogZnVuY3Rpb24gKGF0UnVsZU5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgb25seSBvbmUgbmVzdGVkIHJ1bGVzZXQgYW5kIHRoYXQgb25lIGhhcyBubyBwYXRoLCB0aGVuIGl0IGlzDQogICAgICAgICAgICAvLyBqdXN0IGZha2UgcnVsZXNldA0KICAgICAgICAgICAgZnVuY3Rpb24gaGFzRmFrZVJ1bGVzZXQoYXRSdWxlTm9kZSkgew0KICAgICAgICAgICAgICAgIHZhciBib2R5UnVsZXMgPSBhdFJ1bGVOb2RlLnJ1bGVzOw0KICAgICAgICAgICAgICAgIHJldHVybiBib2R5UnVsZXMubGVuZ3RoID09PSAxICYmICghYm9keVJ1bGVzWzBdLnBhdGhzIHx8IGJvZHlSdWxlc1swXS5wYXRocy5sZW5ndGggPT09IDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Qm9keVJ1bGVzKGF0UnVsZU5vZGUpIHsNCiAgICAgICAgICAgICAgICB2YXIgbm9kZVJ1bGVzID0gYXRSdWxlTm9kZS5ydWxlczsNCiAgICAgICAgICAgICAgICBpZiAoaGFzRmFrZVJ1bGVzZXQoYXRSdWxlTm9kZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVSdWxlc1swXS5ydWxlczsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVSdWxlczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIGl0IGlzIHN0aWxsIHRydWUgdGhhdCBpdCBpcyBvbmx5IG9uZSBydWxlc2V0IGluIGFycmF5DQogICAgICAgICAgICAvLyB0aGlzIGlzIGxhc3Qgc3VjaCBtb21lbnQNCiAgICAgICAgICAgIC8vIHByb2Nlc3MgY2hpbGRzDQogICAgICAgICAgICB2YXIgb3JpZ2luYWxSdWxlcyA9IGdldEJvZHlSdWxlcyhhdFJ1bGVOb2RlKTsNCiAgICAgICAgICAgIGF0UnVsZU5vZGUuYWNjZXB0KHRoaXMuX3Zpc2l0b3IpOw0KICAgICAgICAgICAgdmlzaXRBcmdzLnZpc2l0RGVlcGVyID0gZmFsc2U7DQogICAgICAgICAgICBpZiAoIXRoaXMudXRpbHMuaXNFbXB0eShhdFJ1bGVOb2RlKSkgew0KICAgICAgICAgICAgICAgIHRoaXMuX21lcmdlUnVsZXMoYXRSdWxlTm9kZS5ydWxlc1swXS5ydWxlcyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5yZXNvbHZlVmlzaWJpbGl0eShhdFJ1bGVOb2RlLCBvcmlnaW5hbFJ1bGVzKTsNCiAgICAgICAgfSwNCiAgICAgICAgdmlzaXRBdFJ1bGVXaXRob3V0Qm9keTogZnVuY3Rpb24gKGF0UnVsZU5vZGUsIHZpc2l0QXJncykgew0KICAgICAgICAgICAgaWYgKGF0UnVsZU5vZGUuYmxvY2tzVmlzaWJpbGl0eSgpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGF0UnVsZU5vZGUubmFtZSA9PT0gJ0BjaGFyc2V0Jykgew0KICAgICAgICAgICAgICAgIC8vIE9ubHkgb3V0cHV0IHRoZSBkZWJ1ZyBpbmZvIHRvZ2V0aGVyIHdpdGggc3Vic2VxdWVudCBAY2hhcnNldCBkZWZpbml0aW9ucw0KICAgICAgICAgICAgICAgIC8vIGEgY29tbWVudCAob3IgQG1lZGlhIHN0YXRlbWVudCkgYmVmb3JlIHRoZSBhY3R1YWwgQGNoYXJzZXQgYXRydWxlIHdvdWxkDQogICAgICAgICAgICAgICAgLy8gYmUgY29uc2lkZXJlZCBpbGxlZ2FsIGNzcyBhcyBpdCBoYXMgdG8gYmUgb24gdGhlIGZpcnN0IGxpbmUNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGFyc2V0KSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChhdFJ1bGVOb2RlLmRlYnVnSW5mbykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1lbnQgPSBuZXcgdHJlZS5Db21tZW50KCIvKiAiICsgYXRSdWxlTm9kZS50b0NTUyh0aGlzLl9jb250ZXh0KS5yZXBsYWNlKC9cbi9nLCAnJykgKyAiICovXG4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQuZGVidWdJbmZvID0gYXRSdWxlTm9kZS5kZWJ1Z0luZm87DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdmlzaXRvci52aXNpdChjb21tZW50KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuY2hhcnNldCA9IHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gYXRSdWxlTm9kZTsNCiAgICAgICAgfSwNCiAgICAgICAgY2hlY2tWYWxpZE5vZGVzOiBmdW5jdGlvbiAocnVsZXMsIGlzUm9vdCkgew0KICAgICAgICAgICAgaWYgKCFydWxlcykgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgcnVsZU5vZGUgPSBydWxlc1tpXTsNCiAgICAgICAgICAgICAgICBpZiAoaXNSb290ICYmIHJ1bGVOb2RlIGluc3RhbmNlb2YgdHJlZS5EZWNsYXJhdGlvbiAmJiAhcnVsZU5vZGUudmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgeyBtZXNzYWdlOiAnUHJvcGVydGllcyBtdXN0IGJlIGluc2lkZSBzZWxlY3RvciBibG9ja3MuIFRoZXkgY2Fubm90IGJlIGluIHRoZSByb290JywNCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBydWxlTm9kZS5nZXRJbmRleCgpLCBmaWxlbmFtZTogcnVsZU5vZGUuZmlsZUluZm8oKSAmJiBydWxlTm9kZS5maWxlSW5mbygpLmZpbGVuYW1lIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChydWxlTm9kZSBpbnN0YW5jZW9mIHRyZWUuQ2FsbCkgew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyB7IG1lc3NhZ2U6ICJGdW5jdGlvbiAnIiArIHJ1bGVOb2RlLm5hbWUgKyAiJyBkaWQgbm90IHJldHVybiBhIHJvb3Qgbm9kZSIsDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogcnVsZU5vZGUuZ2V0SW5kZXgoKSwgZmlsZW5hbWU6IHJ1bGVOb2RlLmZpbGVJbmZvKCkgJiYgcnVsZU5vZGUuZmlsZUluZm8oKS5maWxlbmFtZSB9Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAocnVsZU5vZGUudHlwZSAmJiAhcnVsZU5vZGUuYWxsb3dSb290KSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IHsgbWVzc2FnZTogcnVsZU5vZGUudHlwZSArICIgbm9kZSByZXR1cm5lZCBieSBhIGZ1bmN0aW9uIGlzIG5vdCB2YWxpZCBoZXJlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBydWxlTm9kZS5nZXRJbmRleCgpLCBmaWxlbmFtZTogcnVsZU5vZGUuZmlsZUluZm8oKSAmJiBydWxlTm9kZS5maWxlSW5mbygpLmZpbGVuYW1lIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICB2aXNpdFJ1bGVzZXQ6IGZ1bmN0aW9uIChydWxlc2V0Tm9kZSwgdmlzaXRBcmdzKSB7DQogICAgICAgICAgICAvLyBhdCB0aGlzIHBvaW50IHJ1bGVzZXRzIGFyZSBuZXN0ZWQgaW50byBlYWNoIG90aGVyDQogICAgICAgICAgICB2YXIgcnVsZTsNCiAgICAgICAgICAgIHZhciBydWxlc2V0cyA9IFtdOw0KICAgICAgICAgICAgdGhpcy5jaGVja1ZhbGlkTm9kZXMocnVsZXNldE5vZGUucnVsZXMsIHJ1bGVzZXROb2RlLmZpcnN0Um9vdCk7DQogICAgICAgICAgICBpZiAoIXJ1bGVzZXROb2RlLnJvb3QpIHsNCiAgICAgICAgICAgICAgICAvLyByZW1vdmUgaW52aXNpYmxlIHBhdGhzDQogICAgICAgICAgICAgICAgdGhpcy5fY29tcGlsZVJ1bGVzZXRQYXRocyhydWxlc2V0Tm9kZSk7DQogICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHJ1bGVzZXRzIGZyb20gdGhpcyBydWxlc2V0IGJvZHkgYW5kIGNvbXBpbGUgdGhlbSBzZXBhcmF0ZWx5DQogICAgICAgICAgICAgICAgdmFyIG5vZGVSdWxlcyA9IHJ1bGVzZXROb2RlLnJ1bGVzOw0KICAgICAgICAgICAgICAgIHZhciBub2RlUnVsZUNudCA9IG5vZGVSdWxlcyA/IG5vZGVSdWxlcy5sZW5ndGggOiAwOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZVJ1bGVDbnQ7KSB7DQogICAgICAgICAgICAgICAgICAgIHJ1bGUgPSBub2RlUnVsZXNbaV07DQogICAgICAgICAgICAgICAgICAgIGlmIChydWxlICYmIHJ1bGUucnVsZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZpc2l0IGJlY2F1c2Ugd2UgYXJlIG1vdmluZyB0aGVtIG91dCBmcm9tIGJlaW5nIGEgY2hpbGQNCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzZXRzLnB1c2godGhpcy5fdmlzaXRvci52aXNpdChydWxlKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBub2RlUnVsZXMuc3BsaWNlKGksIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVJ1bGVDbnQtLTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGkrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gYWNjZXB0IHRoZSB2aXNpdG9yIHRvIHJlbW92ZSBydWxlcyBhbmQgcmVmYWN0b3IgaXRzZWxmDQogICAgICAgICAgICAgICAgLy8gdGhlbiB3ZSBjYW4gZGVjaWRlIG5vZ3cgd2hldGhlciB3ZSB3YW50IGl0IG9yIG5vdA0KICAgICAgICAgICAgICAgIC8vIGNvbXBpbGUgYm9keQ0KICAgICAgICAgICAgICAgIGlmIChub2RlUnVsZUNudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXNldE5vZGUuYWNjZXB0KHRoaXMuX3Zpc2l0b3IpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXNldE5vZGUucnVsZXMgPSBudWxsOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2aXNpdEFyZ3MudmlzaXREZWVwZXIgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgeyAvLyBpZiAoISBydWxlc2V0Tm9kZS5yb290KSB7DQogICAgICAgICAgICAgICAgcnVsZXNldE5vZGUuYWNjZXB0KHRoaXMuX3Zpc2l0b3IpOw0KICAgICAgICAgICAgICAgIHZpc2l0QXJncy52aXNpdERlZXBlciA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHJ1bGVzZXROb2RlLnJ1bGVzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5fbWVyZ2VSdWxlcyhydWxlc2V0Tm9kZS5ydWxlcyk7DQogICAgICAgICAgICAgICAgdGhpcy5fcmVtb3ZlRHVwbGljYXRlUnVsZXMocnVsZXNldE5vZGUucnVsZXMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gbm93IGRlY2lkZSB3aGV0aGVyIHdlIGtlZXAgdGhlIHJ1bGVzZXQNCiAgICAgICAgICAgIGlmICh0aGlzLnV0aWxzLmlzVmlzaWJsZVJ1bGVzZXQocnVsZXNldE5vZGUpKSB7DQogICAgICAgICAgICAgICAgcnVsZXNldE5vZGUuZW5zdXJlVmlzaWJpbGl0eSgpOw0KICAgICAgICAgICAgICAgIHJ1bGVzZXRzLnNwbGljZSgwLCAwLCBydWxlc2V0Tm9kZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAocnVsZXNldHMubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGVzZXRzWzBdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJ1bGVzZXRzOw0KICAgICAgICB9LA0KICAgICAgICBfY29tcGlsZVJ1bGVzZXRQYXRoczogZnVuY3Rpb24gKHJ1bGVzZXROb2RlKSB7DQogICAgICAgICAgICBpZiAocnVsZXNldE5vZGUucGF0aHMpIHsNCiAgICAgICAgICAgICAgICBydWxlc2V0Tm9kZS5wYXRocyA9IHJ1bGVzZXROb2RlLnBhdGhzDQogICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHApIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwWzBdLmVsZW1lbnRzWzBdLmNvbWJpbmF0b3IudmFsdWUgPT09ICcgJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcFswXS5lbGVtZW50c1swXS5jb21iaW5hdG9yID0gbmV3ICh0cmVlLkNvbWJpbmF0b3IpKCcnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBbaV0uaXNWaXNpYmxlKCkgJiYgcFtpXS5nZXRJc091dHB1dCgpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBfcmVtb3ZlRHVwbGljYXRlUnVsZXM6IGZ1bmN0aW9uIChydWxlcykgew0KICAgICAgICAgICAgaWYgKCFydWxlcykgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIHJlbW92ZSBkdXBsaWNhdGVzDQogICAgICAgICAgICB2YXIgcnVsZUNhY2hlID0ge307DQogICAgICAgICAgICB2YXIgcnVsZUxpc3Q7DQogICAgICAgICAgICB2YXIgcnVsZTsNCiAgICAgICAgICAgIHZhciBpOw0KICAgICAgICAgICAgZm9yIChpID0gcnVsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgICAgICAgICAgICBydWxlID0gcnVsZXNbaV07DQogICAgICAgICAgICAgICAgaWYgKHJ1bGUgaW5zdGFuY2VvZiB0cmVlLkRlY2xhcmF0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghcnVsZUNhY2hlW3J1bGUubmFtZV0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVDYWNoZVtydWxlLm5hbWVdID0gcnVsZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVMaXN0ID0gcnVsZUNhY2hlW3J1bGUubmFtZV07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVsZUxpc3QgaW5zdGFuY2VvZiB0cmVlLkRlY2xhcmF0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZUxpc3QgPSBydWxlQ2FjaGVbcnVsZS5uYW1lXSA9IFtydWxlQ2FjaGVbcnVsZS5uYW1lXS50b0NTUyh0aGlzLl9jb250ZXh0KV07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZUNTUyA9IHJ1bGUudG9DU1ModGhpcy5fY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVsZUxpc3QuaW5kZXhPZihydWxlQ1NTKSAhPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlcy5zcGxpY2UoaSwgMSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlTGlzdC5wdXNoKHJ1bGVDU1MpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBfbWVyZ2VSdWxlczogZnVuY3Rpb24gKHJ1bGVzKSB7DQogICAgICAgICAgICBpZiAoIXJ1bGVzKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGdyb3VwcyA9IHt9Ow0KICAgICAgICAgICAgdmFyIGdyb3Vwc0FyciA9IFtdOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHZhciBydWxlID0gcnVsZXNbaV07DQogICAgICAgICAgICAgICAgaWYgKHJ1bGUubWVyZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IHJ1bGUubmFtZTsNCiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzW2tleV0gPyBydWxlcy5zcGxpY2UoaS0tLCAxKSA6DQogICAgICAgICAgICAgICAgICAgICAgICBncm91cHNBcnIucHVzaChncm91cHNba2V5XSA9IFtdKTsNCiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzW2tleV0ucHVzaChydWxlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBncm91cHNBcnIuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXApIHsNCiAgICAgICAgICAgICAgICBpZiAoZ3JvdXAubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzEgPSBncm91cFswXTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYWNlXzEgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1hXzEgPSBbbmV3IHRyZWUuRXhwcmVzc2lvbihzcGFjZV8xKV07DQogICAgICAgICAgICAgICAgICAgIGdyb3VwLmZvckVhY2goZnVuY3Rpb24gKHJ1bGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocnVsZS5tZXJnZSA9PT0gJysnKSAmJiAoc3BhY2VfMS5sZW5ndGggPiAwKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hXzEucHVzaChuZXcgdHJlZS5FeHByZXNzaW9uKHNwYWNlXzEgPSBbXSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2VfMS5wdXNoKHJ1bGUudmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0XzEuaW1wb3J0YW50ID0gcmVzdWx0XzEuaW1wb3J0YW50IHx8IHJ1bGUuaW1wb3J0YW50Ow0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0XzEudmFsdWUgPSBuZXcgdHJlZS5WYWx1ZShjb21tYV8xKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH07CgogICAgdmFyIHZpc2l0b3JzID0gew0KICAgICAgICBWaXNpdG9yOiBWaXNpdG9yLA0KICAgICAgICBJbXBvcnRWaXNpdG9yOiBJbXBvcnRWaXNpdG9yLA0KICAgICAgICBNYXJrVmlzaWJsZVNlbGVjdG9yc1Zpc2l0b3I6IFNldFRyZWVWaXNpYmlsaXR5VmlzaXRvciwNCiAgICAgICAgRXh0ZW5kVmlzaXRvcjogUHJvY2Vzc0V4dGVuZHNWaXNpdG9yLA0KICAgICAgICBKb2luU2VsZWN0b3JWaXNpdG9yOiBKb2luU2VsZWN0b3JWaXNpdG9yLA0KICAgICAgICBUb0NTU1Zpc2l0b3I6IFRvQ1NTVmlzaXRvcg0KICAgIH07CgogICAgLy8gU3BsaXQgdGhlIGlucHV0IGludG8gY2h1bmtzLg0KICAgIGZ1bmN0aW9uIGNodW5rZXIgKGlucHV0LCBmYWlsKSB7DQogICAgICAgIHZhciBsZW4gPSBpbnB1dC5sZW5ndGg7DQogICAgICAgIHZhciBsZXZlbCA9IDA7DQogICAgICAgIHZhciBwYXJlbkxldmVsID0gMDsNCiAgICAgICAgdmFyIGxhc3RPcGVuaW5nOw0KICAgICAgICB2YXIgbGFzdE9wZW5pbmdQYXJlbjsNCiAgICAgICAgdmFyIGxhc3RNdWx0aUNvbW1lbnQ7DQogICAgICAgIHZhciBsYXN0TXVsdGlDb21tZW50RW5kQnJhY2U7DQogICAgICAgIHZhciBjaHVua3MgPSBbXTsNCiAgICAgICAgdmFyIGVtaXRGcm9tID0gMDsNCiAgICAgICAgdmFyIGNodW5rZXJDdXJyZW50SW5kZXg7DQogICAgICAgIHZhciBjdXJyZW50Q2h1bmtTdGFydEluZGV4Ow0KICAgICAgICB2YXIgY2M7DQogICAgICAgIHZhciBjYzI7DQogICAgICAgIHZhciBtYXRjaGVkOw0KICAgICAgICBmdW5jdGlvbiBlbWl0Q2h1bmsoZm9yY2UpIHsNCiAgICAgICAgICAgIHZhciBsZW4gPSBjaHVua2VyQ3VycmVudEluZGV4IC0gZW1pdEZyb207DQogICAgICAgICAgICBpZiAoKChsZW4gPCA1MTIpICYmICFmb3JjZSkgfHwgIWxlbikgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNodW5rcy5wdXNoKGlucHV0LnNsaWNlKGVtaXRGcm9tLCBjaHVua2VyQ3VycmVudEluZGV4ICsgMSkpOw0KICAgICAgICAgICAgZW1pdEZyb20gPSBjaHVua2VyQ3VycmVudEluZGV4ICsgMTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKGNodW5rZXJDdXJyZW50SW5kZXggPSAwOyBjaHVua2VyQ3VycmVudEluZGV4IDwgbGVuOyBjaHVua2VyQ3VycmVudEluZGV4KyspIHsNCiAgICAgICAgICAgIGNjID0gaW5wdXQuY2hhckNvZGVBdChjaHVua2VyQ3VycmVudEluZGV4KTsNCiAgICAgICAgICAgIGlmICgoKGNjID49IDk3KSAmJiAoY2MgPD0gMTIyKSkgfHwgKGNjIDwgMzQpKSB7DQogICAgICAgICAgICAgICAgLy8gYS16IG9yIHdoaXRlc3BhY2UNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHN3aXRjaCAoY2MpIHsNCiAgICAgICAgICAgICAgICBjYXNlIDQwOiAvLyAoDQogICAgICAgICAgICAgICAgICAgIHBhcmVuTGV2ZWwrKzsNCiAgICAgICAgICAgICAgICAgICAgbGFzdE9wZW5pbmdQYXJlbiA9IGNodW5rZXJDdXJyZW50SW5kZXg7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIGNhc2UgNDE6IC8vICkNCiAgICAgICAgICAgICAgICAgICAgaWYgKC0tcGFyZW5MZXZlbCA8IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdtaXNzaW5nIG9wZW5pbmcgYChgJywgY2h1bmtlckN1cnJlbnRJbmRleCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgY2FzZSA1OTogLy8gOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmVuTGV2ZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRDaHVuaygpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIGNhc2UgMTIzOiAvLyB7DQogICAgICAgICAgICAgICAgICAgIGxldmVsKys7DQogICAgICAgICAgICAgICAgICAgIGxhc3RPcGVuaW5nID0gY2h1bmtlckN1cnJlbnRJbmRleDsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgY2FzZSAxMjU6IC8vIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKC0tbGV2ZWwgPCAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnbWlzc2luZyBvcGVuaW5nIGB7YCcsIGNodW5rZXJDdXJyZW50SW5kZXgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICghbGV2ZWwgJiYgIXBhcmVuTGV2ZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRDaHVuaygpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIGNhc2UgOTI6IC8vIFwNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rZXJDdXJyZW50SW5kZXggPCBsZW4gLSAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjaHVua2VyQ3VycmVudEluZGV4Kys7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgndW5lc2NhcGVkIGBcXGAnLCBjaHVua2VyQ3VycmVudEluZGV4KTsNCiAgICAgICAgICAgICAgICBjYXNlIDM0Og0KICAgICAgICAgICAgICAgIGNhc2UgMzk6DQogICAgICAgICAgICAgICAgY2FzZSA5NjogLy8gIiwgJyBhbmQgYA0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gMDsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudENodW5rU3RhcnRJbmRleCA9IGNodW5rZXJDdXJyZW50SW5kZXg7DQogICAgICAgICAgICAgICAgICAgIGZvciAoY2h1bmtlckN1cnJlbnRJbmRleCA9IGNodW5rZXJDdXJyZW50SW5kZXggKyAxOyBjaHVua2VyQ3VycmVudEluZGV4IDwgbGVuOyBjaHVua2VyQ3VycmVudEluZGV4KyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNjMiA9IGlucHV0LmNoYXJDb2RlQXQoY2h1bmtlckN1cnJlbnRJbmRleCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2MyID4gOTYpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYzIgPT0gY2MpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYzIgPT0gOTIpIHsgLy8gXA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaHVua2VyQ3VycmVudEluZGV4ID09IGxlbiAtIDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ3VuZXNjYXBlZCBgXFxgJywgY2h1bmtlckN1cnJlbnRJbmRleCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rZXJDdXJyZW50SW5kZXgrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoInVubWF0Y2hlZCBgIiArIFN0cmluZy5mcm9tQ2hhckNvZGUoY2MpICsgImAiLCBjdXJyZW50Q2h1bmtTdGFydEluZGV4KTsNCiAgICAgICAgICAgICAgICBjYXNlIDQ3OiAvLyAvLCBjaGVjayBmb3IgY29tbWVudA0KICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW5MZXZlbCB8fCAoY2h1bmtlckN1cnJlbnRJbmRleCA9PSBsZW4gLSAxKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY2MyID0gaW5wdXQuY2hhckNvZGVBdChjaHVua2VyQ3VycmVudEluZGV4ICsgMSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChjYzIgPT0gNDcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC8vLCBmaW5kIGxuZmVlZA0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjaHVua2VyQ3VycmVudEluZGV4ID0gY2h1bmtlckN1cnJlbnRJbmRleCArIDI7IGNodW5rZXJDdXJyZW50SW5kZXggPCBsZW47IGNodW5rZXJDdXJyZW50SW5kZXgrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjMiA9IGlucHV0LmNoYXJDb2RlQXQoY2h1bmtlckN1cnJlbnRJbmRleCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChjYzIgPD0gMTMpICYmICgoY2MyID09IDEwKSB8fCAoY2MyID09IDEzKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNjMiA9PSA0Mikgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLyosIGZpbmQgKi8NCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RNdWx0aUNvbW1lbnQgPSBjdXJyZW50Q2h1bmtTdGFydEluZGV4ID0gY2h1bmtlckN1cnJlbnRJbmRleDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY2h1bmtlckN1cnJlbnRJbmRleCA9IGNodW5rZXJDdXJyZW50SW5kZXggKyAyOyBjaHVua2VyQ3VycmVudEluZGV4IDwgbGVuIC0gMTsgY2h1bmtlckN1cnJlbnRJbmRleCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MyID0gaW5wdXQuY2hhckNvZGVBdChjaHVua2VyQ3VycmVudEluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2MyID09IDEyNSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0TXVsdGlDb21tZW50RW5kQnJhY2UgPSBjaHVua2VyQ3VycmVudEluZGV4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2MyICE9IDQyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckNvZGVBdChjaHVua2VyQ3VycmVudEluZGV4ICsgMSkgPT0gNDcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rZXJDdXJyZW50SW5kZXggPT0gbGVuIC0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdtaXNzaW5nIGNsb3NpbmcgYCovYCcsIGN1cnJlbnRDaHVua1N0YXJ0SW5kZXgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtlckN1cnJlbnRJbmRleCsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIGNhc2UgNDI6IC8vICosIGNoZWNrIGZvciB1bm1hdGNoZWQgKi8NCiAgICAgICAgICAgICAgICAgICAgaWYgKChjaHVua2VyQ3VycmVudEluZGV4IDwgbGVuIC0gMSkgJiYgKGlucHV0LmNoYXJDb2RlQXQoY2h1bmtlckN1cnJlbnRJbmRleCArIDEpID09IDQ3KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ3VubWF0Y2hlZCBgLypgJywgY2h1bmtlckN1cnJlbnRJbmRleCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKGxldmVsICE9PSAwKSB7DQogICAgICAgICAgICBpZiAoKGxhc3RNdWx0aUNvbW1lbnQgPiBsYXN0T3BlbmluZykgJiYgKGxhc3RNdWx0aUNvbW1lbnRFbmRCcmFjZSA+IGxhc3RNdWx0aUNvbW1lbnQpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ21pc3NpbmcgY2xvc2luZyBgfWAgb3IgYCovYCcsIGxhc3RPcGVuaW5nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdtaXNzaW5nIGNsb3NpbmcgYH1gJywgbGFzdE9wZW5pbmcpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKHBhcmVuTGV2ZWwgIT09IDApIHsNCiAgICAgICAgICAgIHJldHVybiBmYWlsKCdtaXNzaW5nIGNsb3NpbmcgYClgJywgbGFzdE9wZW5pbmdQYXJlbik7DQogICAgICAgIH0NCiAgICAgICAgZW1pdENodW5rKHRydWUpOw0KICAgICAgICByZXR1cm4gY2h1bmtzOw0KICAgIH0KCiAgICB2YXIgZ2V0UGFyc2VySW5wdXQgPSAoZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgLy8gTGVzcyBpbnB1dCBzdHJpbmcNCiAgICAgICAgaW5wdXQ7DQogICAgICAgIHZhciAvLyBjdXJyZW50IGNodW5rDQogICAgICAgIGo7DQogICAgICAgIHZhciAvLyBob2xkcyBzdGF0ZSBmb3IgYmFja3RyYWNraW5nDQogICAgICAgIHNhdmVTdGFjayA9IFtdOw0KICAgICAgICB2YXIgLy8gZnVydGhlc3QgaW5kZXggdGhlIHBhcnNlciBoYXMgZ29uZSB0bw0KICAgICAgICBmdXJ0aGVzdDsNCiAgICAgICAgdmFyIC8vIGlmIHRoaXMgaXMgZnVydGhlc3Qgd2UgZ290IHRvLCB0aGlzIGlzIHRoZSBwcm9iYWJseSBjYXVzZQ0KICAgICAgICBmdXJ0aGVzdFBvc3NpYmxlRXJyb3JNZXNzYWdlOw0KICAgICAgICB2YXIgLy8gY2h1bmtpZmllZCBpbnB1dA0KICAgICAgICBjaHVua3M7DQogICAgICAgIHZhciAvLyBjdXJyZW50IGNodW5rDQogICAgICAgIGN1cnJlbnQ7DQogICAgICAgIHZhciAvLyBpbmRleCBvZiBjdXJyZW50IGNodW5rLCBpbiBgaW5wdXRgDQogICAgICAgIGN1cnJlbnRQb3M7DQogICAgICAgIHZhciBwYXJzZXJJbnB1dCA9IHt9Ow0KICAgICAgICB2YXIgQ0hBUkNPREVfU1BBQ0UgPSAzMjsNCiAgICAgICAgdmFyIENIQVJDT0RFX1RBQiA9IDk7DQogICAgICAgIHZhciBDSEFSQ09ERV9MRiA9IDEwOw0KICAgICAgICB2YXIgQ0hBUkNPREVfQ1IgPSAxMzsNCiAgICAgICAgdmFyIENIQVJDT0RFX1BMVVMgPSA0MzsNCiAgICAgICAgdmFyIENIQVJDT0RFX0NPTU1BID0gNDQ7DQogICAgICAgIHZhciBDSEFSQ09ERV9GT1JXQVJEX1NMQVNIID0gNDc7DQogICAgICAgIHZhciBDSEFSQ09ERV85ID0gNTc7DQogICAgICAgIGZ1bmN0aW9uIHNraXBXaGl0ZXNwYWNlKGxlbmd0aCkgew0KICAgICAgICAgICAgdmFyIG9sZGkgPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgdmFyIG9sZGogPSBqOw0KICAgICAgICAgICAgdmFyIGN1cnIgPSBwYXJzZXJJbnB1dC5pIC0gY3VycmVudFBvczsNCiAgICAgICAgICAgIHZhciBlbmRJbmRleCA9IHBhcnNlcklucHV0LmkgKyBjdXJyZW50Lmxlbmd0aCAtIGN1cnI7DQogICAgICAgICAgICB2YXIgbWVtID0gKHBhcnNlcklucHV0LmkgKz0gbGVuZ3RoKTsNCiAgICAgICAgICAgIHZhciBpbnAgPSBpbnB1dDsNCiAgICAgICAgICAgIHZhciBjOw0KICAgICAgICAgICAgdmFyIG5leHRDaGFyOw0KICAgICAgICAgICAgdmFyIGNvbW1lbnQ7DQogICAgICAgICAgICBmb3IgKDsgcGFyc2VySW5wdXQuaSA8IGVuZEluZGV4OyBwYXJzZXJJbnB1dC5pKyspIHsNCiAgICAgICAgICAgICAgICBjID0gaW5wLmNoYXJDb2RlQXQocGFyc2VySW5wdXQuaSk7DQogICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LmF1dG9Db21tZW50QWJzb3JiICYmIGMgPT09IENIQVJDT0RFX0ZPUldBUkRfU0xBU0gpIHsNCiAgICAgICAgICAgICAgICAgICAgbmV4dENoYXIgPSBpbnAuY2hhckF0KHBhcnNlcklucHV0LmkgKyAxKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRDaGFyID09PSAnLycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQgPSB7IGluZGV4OiBwYXJzZXJJbnB1dC5pLCBpc0xpbmVDb21tZW50OiB0cnVlIH07DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dE5ld0xpbmUgPSBpbnAuaW5kZXhPZignXG4nLCBwYXJzZXJJbnB1dC5pICsgMik7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dE5ld0xpbmUgPCAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5ld0xpbmUgPSBlbmRJbmRleDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmkgPSBuZXh0TmV3TGluZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQudGV4dCA9IGlucC5zdWJzdHIoY29tbWVudC5pbmRleCwgcGFyc2VySW5wdXQuaSAtIGNvbW1lbnQuaW5kZXgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuY29tbWVudFN0b3JlLnB1c2goY29tbWVudCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChuZXh0Q2hhciA9PT0gJyonKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dFN0YXJTbGFzaCA9IGlucC5pbmRleE9mKCcqLycsIHBhcnNlcklucHV0LmkgKyAyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0U3RhclNsYXNoID49IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50ID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogcGFyc2VySW5wdXQuaSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogaW5wLnN1YnN0cihwYXJzZXJJbnB1dC5pLCBuZXh0U3RhclNsYXNoICsgMiAtIHBhcnNlcklucHV0LmkpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xpbmVDb21tZW50OiBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuaSArPSBjb21tZW50LnRleHQubGVuZ3RoIC0gMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUucHVzaChjb21tZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKChjICE9PSBDSEFSQ09ERV9TUEFDRSkgJiYgKGMgIT09IENIQVJDT0RFX0xGKSAmJiAoYyAhPT0gQ0hBUkNPREVfVEFCKSAmJiAoYyAhPT0gQ0hBUkNPREVfQ1IpKSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnNsaWNlKGxlbmd0aCArIHBhcnNlcklucHV0LmkgLSBtZW0gKyBjdXJyKTsNCiAgICAgICAgICAgIGN1cnJlbnRQb3MgPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgaWYgKCFjdXJyZW50Lmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIGlmIChqIDwgY2h1bmtzLmxlbmd0aCAtIDEpIHsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IGNodW5rc1srK2pdOw0KICAgICAgICAgICAgICAgICAgICBza2lwV2hpdGVzcGFjZSgwKTsgLy8gc2tpcCBzcGFjZSBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgY2h1bmsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIHRoaW5ncyBjaGFuZ2VkDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZpbmlzaGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBvbGRpICE9PSBwYXJzZXJJbnB1dC5pIHx8IG9sZGogIT09IGo7DQogICAgICAgIH0NCiAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGN1cnJlbnRQb3MgPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgc2F2ZVN0YWNrLnB1c2goeyBjdXJyZW50OiBjdXJyZW50LCBpOiBwYXJzZXJJbnB1dC5pLCBqOiBqIH0pOw0KICAgICAgICB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlID0gZnVuY3Rpb24gKHBvc3NpYmxlRXJyb3JNZXNzYWdlKSB7DQogICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuaSA+IGZ1cnRoZXN0IHx8IChwYXJzZXJJbnB1dC5pID09PSBmdXJ0aGVzdCAmJiBwb3NzaWJsZUVycm9yTWVzc2FnZSAmJiAhZnVydGhlc3RQb3NzaWJsZUVycm9yTWVzc2FnZSkpIHsNCiAgICAgICAgICAgICAgICBmdXJ0aGVzdCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgZnVydGhlc3RQb3NzaWJsZUVycm9yTWVzc2FnZSA9IHBvc3NpYmxlRXJyb3JNZXNzYWdlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHN0YXRlID0gc2F2ZVN0YWNrLnBvcCgpOw0KICAgICAgICAgICAgY3VycmVudCA9IHN0YXRlLmN1cnJlbnQ7DQogICAgICAgICAgICBjdXJyZW50UG9zID0gcGFyc2VySW5wdXQuaSA9IHN0YXRlLmk7DQogICAgICAgICAgICBqID0gc3RhdGUuajsNCiAgICAgICAgfTsNCiAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgc2F2ZVN0YWNrLnBvcCgpOw0KICAgICAgICB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC5pc1doaXRlc3BhY2UgPSBmdW5jdGlvbiAob2Zmc2V0KSB7DQogICAgICAgICAgICB2YXIgcG9zID0gcGFyc2VySW5wdXQuaSArIChvZmZzZXQgfHwgMCk7DQogICAgICAgICAgICB2YXIgY29kZSA9IGlucHV0LmNoYXJDb2RlQXQocG9zKTsNCiAgICAgICAgICAgIHJldHVybiAoY29kZSA9PT0gQ0hBUkNPREVfU1BBQ0UgfHwgY29kZSA9PT0gQ0hBUkNPREVfQ1IgfHwgY29kZSA9PT0gQ0hBUkNPREVfVEFCIHx8IGNvZGUgPT09IENIQVJDT0RFX0xGKTsNCiAgICAgICAgfTsNCiAgICAgICAgLy8gU3BlY2lhbGl6YXRpb24gb2YgJCh0b2spDQogICAgICAgIHBhcnNlcklucHV0LiRyZSA9IGZ1bmN0aW9uICh0b2spIHsNCiAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5pID4gY3VycmVudFBvcykgew0KICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnNsaWNlKHBhcnNlcklucHV0LmkgLSBjdXJyZW50UG9zKTsNCiAgICAgICAgICAgICAgICBjdXJyZW50UG9zID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBtID0gdG9rLmV4ZWMoY3VycmVudCk7DQogICAgICAgICAgICBpZiAoIW0pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNraXBXaGl0ZXNwYWNlKG1bMF0ubGVuZ3RoKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgbSA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBtLmxlbmd0aCA9PT0gMSA/IG1bMF0gOiBtOw0KICAgICAgICB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC4kY2hhciA9IGZ1bmN0aW9uICh0b2spIHsNCiAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQXQocGFyc2VySW5wdXQuaSkgIT09IHRvaykgew0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgc2tpcFdoaXRlc3BhY2UoMSk7DQogICAgICAgICAgICByZXR1cm4gdG9rOw0KICAgICAgICB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC4kc3RyID0gZnVuY3Rpb24gKHRvaykgew0KICAgICAgICAgICAgdmFyIHRva0xlbmd0aCA9IHRvay5sZW5ndGg7DQogICAgICAgICAgICAvLyBodHRwczovL2pzcGVyZi5jb20vc3RyaW5nLXN0YXJ0c3dpdGgvMjENCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rTGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuY2hhckF0KHBhcnNlcklucHV0LmkgKyBpKSAhPT0gdG9rLmNoYXJBdChpKSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBza2lwV2hpdGVzcGFjZSh0b2tMZW5ndGgpOw0KICAgICAgICAgICAgcmV0dXJuIHRvazsNCiAgICAgICAgfTsNCiAgICAgICAgcGFyc2VySW5wdXQuJHF1b3RlZCA9IGZ1bmN0aW9uIChsb2MpIHsNCiAgICAgICAgICAgIHZhciBwb3MgPSBsb2MgfHwgcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgIHZhciBzdGFydENoYXIgPSBpbnB1dC5jaGFyQXQocG9zKTsNCiAgICAgICAgICAgIGlmIChzdGFydENoYXIgIT09ICdcJycgJiYgc3RhcnRDaGFyICE9PSAnIicpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoOw0KICAgICAgICAgICAgdmFyIGN1cnJlbnRQb3NpdGlvbiA9IHBvczsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpICsgY3VycmVudFBvc2l0aW9uIDwgbGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgbmV4dENoYXIgPSBpbnB1dC5jaGFyQXQoaSArIGN1cnJlbnRQb3NpdGlvbik7DQogICAgICAgICAgICAgICAgc3dpdGNoIChuZXh0Q2hhcikgew0KICAgICAgICAgICAgICAgICAgICBjYXNlICdcXCc6DQogICAgICAgICAgICAgICAgICAgICAgICBpKys7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXHInOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICdcbic6DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSBzdGFydENoYXI6DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gaW5wdXQuc3Vic3RyKGN1cnJlbnRQb3NpdGlvbiwgaSArIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2MgJiYgbG9jICE9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcFdoaXRlc3BhY2UoaSArIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3N0YXJ0Q2hhciwgc3RyXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfTsNCiAgICAgICAgLyoqDQogICAgICAgICAqIFBlcm1pc3NpdmUgcGFyc2luZy4gSWdub3JlcyBldmVyeXRoaW5nIGV4Y2VwdCBtYXRjaGluZyB7fSBbXSAoKSBhbmQgcXVvdGVzDQogICAgICAgICAqIHVudGlsIG1hdGNoaW5nIHRva2VuIChvdXRzaWRlIG9mIGJsb2NrcykNCiAgICAgICAgICovDQogICAgICAgIHBhcnNlcklucHV0LiRwYXJzZVVudGlsID0gZnVuY3Rpb24gKHRvaykgew0KICAgICAgICAgICAgdmFyIHF1b3RlID0gJyc7DQogICAgICAgICAgICB2YXIgcmV0dXJuVmFsID0gbnVsbDsNCiAgICAgICAgICAgIHZhciBpbkNvbW1lbnQgPSBmYWxzZTsNCiAgICAgICAgICAgIHZhciBibG9ja0RlcHRoID0gMDsNCiAgICAgICAgICAgIHZhciBibG9ja1N0YWNrID0gW107DQogICAgICAgICAgICB2YXIgcGFyc2VHcm91cHMgPSBbXTsNCiAgICAgICAgICAgIHZhciBsZW5ndGggPSBpbnB1dC5sZW5ndGg7DQogICAgICAgICAgICB2YXIgc3RhcnRQb3MgPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgdmFyIGxhc3RQb3MgPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgdmFyIGkgPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgdmFyIGxvb3AgPSB0cnVlOw0KICAgICAgICAgICAgdmFyIHRlc3RDaGFyOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2sgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgdGVzdENoYXIgPSBmdW5jdGlvbiAoY2hhcikgeyByZXR1cm4gY2hhciA9PT0gdG9rOyB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgdGVzdENoYXIgPSBmdW5jdGlvbiAoY2hhcikgeyByZXR1cm4gdG9rLnRlc3QoY2hhcik7IH07DQogICAgICAgICAgICB9DQogICAgICAgICAgICBkbyB7DQogICAgICAgICAgICAgICAgdmFyIG5leHRDaGFyID0gaW5wdXQuY2hhckF0KGkpOw0KICAgICAgICAgICAgICAgIGlmIChibG9ja0RlcHRoID09PSAwICYmIHRlc3RDaGFyKG5leHRDaGFyKSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWwgPSBpbnB1dC5zdWJzdHIobGFzdFBvcywgaSAtIGxhc3RQb3MpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuVmFsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUdyb3Vwcy5wdXNoKHJldHVyblZhbCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUdyb3Vwcy5wdXNoKCcgJyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsID0gcGFyc2VHcm91cHM7DQogICAgICAgICAgICAgICAgICAgIHNraXBXaGl0ZXNwYWNlKGkgLSBzdGFydFBvcyk7DQogICAgICAgICAgICAgICAgICAgIGxvb3AgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbkNvbW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0Q2hhciA9PT0gJyonICYmDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2hhckF0KGkgKyAxKSA9PT0gJy8nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrRGVwdGgtLTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbkNvbW1lbnQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobmV4dENoYXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1xcJzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENoYXIgPSBpbnB1dC5jaGFyQXQoaSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VHcm91cHMucHVzaChpbnB1dC5zdWJzdHIobGFzdFBvcywgaSAtIGxhc3RQb3MgKyAxKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBvcyA9IGkgKyAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnLyc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoYXJBdChpICsgMSkgPT09ICcqJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluQ29tbWVudCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrRGVwdGgrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdcJyc6DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICciJzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZSA9IHBhcnNlcklucHV0LiRxdW90ZWQoaSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1b3RlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlR3JvdXBzLnB1c2goaW5wdXQuc3Vic3RyKGxhc3RQb3MsIGkgLSBsYXN0UG9zKSwgcXVvdGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IHF1b3RlWzFdLmxlbmd0aCAtIDE7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQb3MgPSBpICsgMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBXaGl0ZXNwYWNlKGkgLSBzdGFydFBvcyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbCA9IG5leHRDaGFyOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAneyc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTdGFjay5wdXNoKCd9Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tEZXB0aCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnKCc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTdGFjay5wdXNoKCcpJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tEZXB0aCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnWyc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTdGFjay5wdXNoKCddJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tEZXB0aCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnfSc6DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICcpJzoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ10nOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHBlY3RlZCA9IGJsb2NrU3RhY2sucG9wKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRDaGFyID09PSBleHBlY3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja0RlcHRoLS07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIHRoZSBwYXJzZXIgdG8gdGhlIGVycm9yIGFuZCByZXR1cm4gZXhwZWN0ZWQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcFdoaXRlc3BhY2UoaSAtIHN0YXJ0UG9zKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsID0gZXhwZWN0ZWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvb3AgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IGxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbG9vcCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSB3aGlsZSAobG9vcCk7DQogICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsID8gcmV0dXJuVmFsIDogbnVsbDsNCiAgICAgICAgfTsNCiAgICAgICAgcGFyc2VySW5wdXQuYXV0b0NvbW1lbnRBYnNvcmIgPSB0cnVlOw0KICAgICAgICBwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUgPSBbXTsNCiAgICAgICAgcGFyc2VySW5wdXQuZmluaXNoZWQgPSBmYWxzZTsNCiAgICAgICAgLy8gU2FtZSBhcyAkKCksIGJ1dCBkb24ndCBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBwYXJzZXIsDQogICAgICAgIC8vIGp1c3QgcmV0dXJuIHRoZSBtYXRjaC4NCiAgICAgICAgcGFyc2VySW5wdXQucGVlayA9IGZ1bmN0aW9uICh0b2spIHsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgdG9rID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vanNwZXJmLmNvbS9zdHJpbmctc3RhcnRzd2l0aC8yMQ0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGFyQXQocGFyc2VySW5wdXQuaSArIGkpICE9PSB0b2suY2hhckF0KGkpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdG9rLnRlc3QoY3VycmVudCk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIC8vIFNwZWNpYWxpemF0aW9uIG9mIHBlZWsoKQ0KICAgICAgICAvLyBUT0RPIHJlbW92ZSBvciBjaGFuZ2Ugc29tZSBjdXJyZW50Q2hhciBjYWxscyB0byBwZWVrQ2hhcg0KICAgICAgICBwYXJzZXJJbnB1dC5wZWVrQ2hhciA9IGZ1bmN0aW9uICh0b2spIHsgcmV0dXJuIGlucHV0LmNoYXJBdChwYXJzZXJJbnB1dC5pKSA9PT0gdG9rOyB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC5jdXJyZW50Q2hhciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGlucHV0LmNoYXJBdChwYXJzZXJJbnB1dC5pKTsgfTsNCiAgICAgICAgcGFyc2VySW5wdXQucHJldkNoYXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBpbnB1dC5jaGFyQXQocGFyc2VySW5wdXQuaSAtIDEpOyB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC5nZXRJbnB1dCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGlucHV0OyB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC5wZWVrTm90TnVtZXJpYyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBjID0gaW5wdXQuY2hhckNvZGVBdChwYXJzZXJJbnB1dC5pKTsNCiAgICAgICAgICAgIC8vIElzIHRoZSBmaXJzdCBjaGFyIG9mIHRoZSBkaW1lbnNpb24gMC05LCAnLicsICcrJyBvciAnLScNCiAgICAgICAgICAgIHJldHVybiAoYyA+IENIQVJDT0RFXzkgfHwgYyA8IENIQVJDT0RFX1BMVVMpIHx8IGMgPT09IENIQVJDT0RFX0ZPUldBUkRfU0xBU0ggfHwgYyA9PT0gQ0hBUkNPREVfQ09NTUE7DQogICAgICAgIH07DQogICAgICAgIHBhcnNlcklucHV0LnN0YXJ0ID0gZnVuY3Rpb24gKHN0ciwgY2h1bmtJbnB1dCwgZmFpbEZ1bmN0aW9uKSB7DQogICAgICAgICAgICBpbnB1dCA9IHN0cjsNCiAgICAgICAgICAgIHBhcnNlcklucHV0LmkgPSBqID0gY3VycmVudFBvcyA9IGZ1cnRoZXN0ID0gMDsNCiAgICAgICAgICAgIC8vIGNodW5raW5nIGFwcGFyZW50bHkgbWFrZXMgdGhpbmdzIHF1aWNrZXIgKGJ1dCBteSB0ZXN0cyBpbmRpY2F0ZQ0KICAgICAgICAgICAgLy8gaXQgbWlnaHQgYWN0dWFsbHkgbWFrZSB0aGluZ3Mgc2xvd2VyIGluIG5vZGUgYXQgbGVhc3QpDQogICAgICAgICAgICAvLyBhbmQgaXQgaXMgYSBub24tcGVyZmVjdCBwYXJzZSAtIGl0IGNhbid0IHJlY29nbmlzZQ0KICAgICAgICAgICAgLy8gdW5xdW90ZWQgdXJscywgbWVhbmluZyBpdCBjYW4ndCBkaXN0aW5ndWlzaCBjb21tZW50cw0KICAgICAgICAgICAgLy8gbWVhbmluZyBjb21tZW50cyB3aXRoIHF1b3RlcyBvciB7fSgpIGluIHRoZW0gZ2V0ICdjb3VudGVkJw0KICAgICAgICAgICAgLy8gYW5kIHRoZW4gbGVhZCB0byBwYXJzZSBlcnJvcnMuDQogICAgICAgICAgICAvLyBJbiBhZGRpdGlvbiBpZiB0aGUgY2h1bmtpbmcgY2h1bmtzIGluIHRoZSB3cm9uZyBwbGFjZSB3ZSBtaWdodA0KICAgICAgICAgICAgLy8gbm90IGJlIGFibGUgdG8gcGFyc2UgYSBwYXJzZXIgc3RhdGVtZW50IGluIG9uZSBnbw0KICAgICAgICAgICAgLy8gdGhpcyBpcyBvZmZpY2lhbGx5IGRlcHJlY2F0ZWQgYnV0IGNhbiBiZSBzd2l0Y2hlZCBvbiB2aWEgYW4gb3B0aW9uDQogICAgICAgICAgICAvLyBpbiB0aGUgY2FzZSBpdCBjYXVzZXMgdG9vIG11Y2ggcGVyZm9ybWFuY2UgaXNzdWVzLg0KICAgICAgICAgICAgaWYgKGNodW5rSW5wdXQpIHsNCiAgICAgICAgICAgICAgICBjaHVua3MgPSBjaHVua2VyKHN0ciwgZmFpbEZ1bmN0aW9uKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGNodW5rcyA9IFtzdHJdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY3VycmVudCA9IGNodW5rc1swXTsNCiAgICAgICAgICAgIHNraXBXaGl0ZXNwYWNlKDApOw0KICAgICAgICB9Ow0KICAgICAgICBwYXJzZXJJbnB1dC5lbmQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgbWVzc2FnZTsNCiAgICAgICAgICAgIHZhciBpc0ZpbmlzaGVkID0gcGFyc2VySW5wdXQuaSA+PSBpbnB1dC5sZW5ndGg7DQogICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuaSA8IGZ1cnRoZXN0KSB7DQogICAgICAgICAgICAgICAgbWVzc2FnZSA9IGZ1cnRoZXN0UG9zc2libGVFcnJvck1lc3NhZ2U7DQogICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuaSA9IGZ1cnRoZXN0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBpc0ZpbmlzaGVkOiBpc0ZpbmlzaGVkLA0KICAgICAgICAgICAgICAgIGZ1cnRoZXN0OiBwYXJzZXJJbnB1dC5pLA0KICAgICAgICAgICAgICAgIGZ1cnRoZXN0UG9zc2libGVFcnJvck1lc3NhZ2U6IG1lc3NhZ2UsDQogICAgICAgICAgICAgICAgZnVydGhlc3RSZWFjaGVkRW5kOiBwYXJzZXJJbnB1dC5pID49IGlucHV0Lmxlbmd0aCAtIDEsDQogICAgICAgICAgICAgICAgZnVydGhlc3RDaGFyOiBpbnB1dFtwYXJzZXJJbnB1dC5pXQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIHBhcnNlcklucHV0Ow0KICAgIH0pOwoKICAgIC8vDQogICAgLy8gbGVzcy5qcyAtIHBhcnNlcg0KICAgIC8vDQogICAgLy8gICAgQSByZWxhdGl2ZWx5IHN0cmFpZ2h0LWZvcndhcmQgcHJlZGljdGl2ZSBwYXJzZXIuDQogICAgLy8gICAgVGhlcmUgaXMgbm8gdG9rZW5pemF0aW9uL2xleGluZyBzdGFnZSwgdGhlIGlucHV0IGlzIHBhcnNlZA0KICAgIC8vICAgIGluIG9uZSBzd2VlcC4NCiAgICAvLw0KICAgIC8vICAgIFRvIG1ha2UgdGhlIHBhcnNlciBmYXN0IGVub3VnaCB0byBydW4gaW4gdGhlIGJyb3dzZXIsIHNldmVyYWwNCiAgICAvLyAgICBvcHRpbWl6YXRpb24gaGFkIHRvIGJlIG1hZGU6DQogICAgLy8NCiAgICAvLyAgICAtIE1hdGNoaW5nIGFuZCBzbGljaW5nIG9uIGEgaHVnZSBpbnB1dCBpcyBvZnRlbiBjYXVzZSBvZiBzbG93ZG93bnMuDQogICAgLy8gICAgICBUaGUgc29sdXRpb24gaXMgdG8gY2h1bmtpZnkgdGhlIGlucHV0IGludG8gc21hbGxlciBzdHJpbmdzLg0KICAgIC8vICAgICAgVGhlIGNodW5rcyBhcmUgc3RvcmVkIGluIHRoZSBgY2h1bmtzYCB2YXIsDQogICAgLy8gICAgICBgamAgaG9sZHMgdGhlIGN1cnJlbnQgY2h1bmsgaW5kZXgsIGFuZCBgY3VycmVudFBvc2AgaG9sZHMNCiAgICAvLyAgICAgIHRoZSBpbmRleCBvZiB0aGUgY3VycmVudCBjaHVuayBpbiByZWxhdGlvbiB0byBgaW5wdXRgLg0KICAgIC8vICAgICAgVGhpcyBnaXZlcyB1cyBhbiBhbG1vc3QgNHggc3BlZWQtdXAuDQogICAgLy8NCiAgICAvLyAgICAtIEluIG1hbnkgY2FzZXMsIHdlIGRvbid0IG5lZWQgdG8gbWF0Y2ggaW5kaXZpZHVhbCB0b2tlbnM7DQogICAgLy8gICAgICBmb3IgZXhhbXBsZSwgaWYgYSB2YWx1ZSBkb2Vzbid0IGhvbGQgYW55IHZhcmlhYmxlcywgb3BlcmF0aW9ucw0KICAgIC8vICAgICAgb3IgZHluYW1pYyByZWZlcmVuY2VzLCB0aGUgcGFyc2VyIGNhbiBlZmZlY3RpdmVseSAnc2tpcCcgaXQsDQogICAgLy8gICAgICB0cmVhdGluZyBpdCBhcyBhIGxpdGVyYWwuDQogICAgLy8gICAgICBBbiBleGFtcGxlIHdvdWxkIGJlICcxcHggc29saWQgIzAwMCcgLSB3aGljaCBldmFsdWF0ZXMgdG8gaXRzZWxmLA0KICAgIC8vICAgICAgd2UgZG9uJ3QgbmVlZCB0byBrbm93IHdoYXQgdGhlIGluZGl2aWR1YWwgY29tcG9uZW50cyBhcmUuDQogICAgLy8gICAgICBUaGUgZHJhd2JhY2ssIG9mIGNvdXJzZSBpcyB0aGF0IHlvdSBkb24ndCBnZXQgdGhlIGJlbmVmaXRzIG9mDQogICAgLy8gICAgICBzeW50YXgtY2hlY2tpbmcgb24gdGhlIENTUy4gVGhpcyBnaXZlcyB1cyBhIDUwJSBzcGVlZC11cCBpbiB0aGUgcGFyc2VyLA0KICAgIC8vICAgICAgYW5kIGEgc21hbGxlciBzcGVlZC11cCBpbiB0aGUgY29kZS1nZW4uDQogICAgLy8NCiAgICAvLw0KICAgIC8vICAgIFRva2VuIG1hdGNoaW5nIGlzIGRvbmUgd2l0aCB0aGUgYCRgIGZ1bmN0aW9uLCB3aGljaCBlaXRoZXIgdGFrZXMNCiAgICAvLyAgICBhIHRlcm1pbmFsIHN0cmluZyBvciByZWdleHAsIG9yIGEgbm9uLXRlcm1pbmFsIGZ1bmN0aW9uIHRvIGNhbGwuDQogICAgLy8gICAgSXQgYWxzbyB0YWtlcyBjYXJlIG9mIG1vdmluZyBhbGwgdGhlIGluZGljZXMgZm9yd2FyZHMuDQogICAgLy8NCiAgICB2YXIgUGFyc2VyID0gZnVuY3Rpb24gUGFyc2VyKGNvbnRleHQsIGltcG9ydHMsIGZpbGVJbmZvKSB7DQogICAgICAgIHZhciBwYXJzZXJzOw0KICAgICAgICB2YXIgcGFyc2VySW5wdXQgPSBnZXRQYXJzZXJJbnB1dCgpOw0KICAgICAgICBmdW5jdGlvbiBlcnJvcihtc2csIHR5cGUpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBMZXNzRXJyb3Ioew0KICAgICAgICAgICAgICAgIGluZGV4OiBwYXJzZXJJbnB1dC5pLA0KICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlSW5mby5maWxlbmFtZSwNCiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdTeW50YXgnLA0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1zZw0KICAgICAgICAgICAgfSwgaW1wb3J0cyk7DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gZXhwZWN0KGFyZywgbXNnKSB7DQogICAgICAgICAgICAvLyBzb21lIG9sZGVyIGJyb3dzZXJzIHJldHVybiB0eXBlb2YgJ2Z1bmN0aW9uJyBmb3IgUmVnRXhwDQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gKGFyZyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSA/IGFyZy5jYWxsKHBhcnNlcnMpIDogcGFyc2VySW5wdXQuJHJlKGFyZyk7DQogICAgICAgICAgICBpZiAocmVzdWx0KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVycm9yKG1zZyB8fCAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycNCiAgICAgICAgICAgICAgICA/ICJleHBlY3RlZCAnIiArIGFyZyArICInIGdvdCAnIiArIHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCkgKyAiJyINCiAgICAgICAgICAgICAgICA6ICd1bmV4cGVjdGVkIHRva2VuJykpOw0KICAgICAgICB9DQogICAgICAgIC8vIFNwZWNpYWxpemF0aW9uIG9mIGV4cGVjdCgpDQogICAgICAgIGZ1bmN0aW9uIGV4cGVjdENoYXIoYXJnLCBtc2cpIHsNCiAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC4kY2hhcihhcmcpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGFyZzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVycm9yKG1zZyB8fCAiZXhwZWN0ZWQgJyIgKyBhcmcgKyAiJyBnb3QgJyIgKyBwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpICsgIiciKTsNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBnZXREZWJ1Z0luZm8oaW5kZXgpIHsNCiAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9IGZpbGVJbmZvLmZpbGVuYW1lOw0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBsaW5lTnVtYmVyOiBnZXRMb2NhdGlvbihpbmRleCwgcGFyc2VySW5wdXQuZ2V0SW5wdXQoKSkubGluZSArIDEsDQogICAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGVuYW1lDQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiAgVXNlZCBhZnRlciBpbml0aWFsIHBhcnNpbmcgdG8gY3JlYXRlIG5vZGVzIG9uIHRoZSBmbHkNCiAgICAgICAgICoNCiAgICAgICAgICogIEBwYXJhbSB7U3RyaW5nfSBzdHIgICAgICAgICAgLSBzdHJpbmcgdG8gcGFyc2UNCiAgICAgICAgICogIEBwYXJhbSB7QXJyYXl9ICBwYXJzZUxpc3QgICAgLSBhcnJheSBvZiBwYXJzZXJzIHRvIHJ1biBpbnB1dCB0aHJvdWdoIGUuZy4gWyJ2YWx1ZSIsICJpbXBvcnRhbnQiXQ0KICAgICAgICAgKiAgQHBhcmFtIHtOdW1iZXJ9IGN1cnJlbnRJbmRleCAtIHN0YXJ0IG51bWJlciB0byBiZWdpbiBpbmRleGluZw0KICAgICAgICAgKiAgQHBhcmFtIHtPYmplY3R9IGZpbGVJbmZvICAgICAtIGZpbGVJbmZvIHRvIGF0dGFjaCB0byBjcmVhdGVkIG5vZGVzDQogICAgICAgICAqLw0KICAgICAgICBmdW5jdGlvbiBwYXJzZU5vZGUoc3RyLCBwYXJzZUxpc3QsIGN1cnJlbnRJbmRleCwgZmlsZUluZm8sIGNhbGxiYWNrKSB7DQogICAgICAgICAgICB2YXIgcmVzdWx0Ow0KICAgICAgICAgICAgdmFyIHJldHVybk5vZGVzID0gW107DQogICAgICAgICAgICB2YXIgcGFyc2VyID0gcGFyc2VySW5wdXQ7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHBhcnNlci5zdGFydChzdHIsIGZhbHNlLCBmdW5jdGlvbiBmYWlsKG1zZywgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soew0KICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbXNnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4ICsgY3VycmVudEluZGV4DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCBwID0gdm9pZCAwLCBpID0gdm9pZCAwOyAocCA9IHBhcnNlTGlzdFt4XSk7IHgrKykgew0KICAgICAgICAgICAgICAgICAgICBpID0gcGFyc2VyLmk7DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHBhcnNlcnNbcF0oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2luZGV4ID0gaSArIGN1cnJlbnRJbmRleDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2ZpbGVJbmZvID0gZmlsZUluZm87DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ob2Rlcy5wdXNoKHJlc3VsdCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Ob2Rlcy5wdXNoKG51bGwpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBlbmRJbmZvID0gcGFyc2VyLmVuZCgpOw0KICAgICAgICAgICAgICAgIGlmIChlbmRJbmZvLmlzRmluaXNoZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmV0dXJuTm9kZXMpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSwgbnVsbCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTGVzc0Vycm9yKHsNCiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGUuaW5kZXggKyBjdXJyZW50SW5kZXgsDQogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZQ0KICAgICAgICAgICAgICAgIH0sIGltcG9ydHMsIGZpbGVJbmZvLmZpbGVuYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvLw0KICAgICAgICAvLyBUaGUgUGFyc2VyDQogICAgICAgIC8vDQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBwYXJzZXJJbnB1dDogcGFyc2VySW5wdXQsDQogICAgICAgICAgICBpbXBvcnRzOiBpbXBvcnRzLA0KICAgICAgICAgICAgZmlsZUluZm86IGZpbGVJbmZvLA0KICAgICAgICAgICAgcGFyc2VOb2RlOiBwYXJzZU5vZGUsDQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgLy8gUGFyc2UgYW4gaW5wdXQgc3RyaW5nIGludG8gYW4gYWJzdHJhY3Qgc3ludGF4IHRyZWUsDQogICAgICAgICAgICAvLyBAcGFyYW0gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgJ2xlc3MnIG1hcmt1cA0KICAgICAgICAgICAgLy8gQHBhcmFtIGNhbGxiYWNrIGNhbGwgYGNhbGxiYWNrYCB3aGVuIGRvbmUuDQogICAgICAgICAgICAvLyBAcGFyYW0gW2FkZGl0aW9uYWxEYXRhXSBBbiBvcHRpb25hbCBtYXAgd2hpY2ggY2FuIGNvbnRhaW5zIHZhcnMgLSBhIG1hcCAoa2V5LCB2YWx1ZSkgb2YgdmFyaWFibGVzIHRvIGFwcGx5DQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChzdHIsIGNhbGxiYWNrLCBhZGRpdGlvbmFsRGF0YSkgew0KICAgICAgICAgICAgICAgIHZhciByb290Ow0KICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IG51bGw7DQogICAgICAgICAgICAgICAgdmFyIGdsb2JhbFZhcnM7DQogICAgICAgICAgICAgICAgdmFyIG1vZGlmeVZhcnM7DQogICAgICAgICAgICAgICAgdmFyIGlnbm9yZWQ7DQogICAgICAgICAgICAgICAgdmFyIHByZVRleHQgPSAnJzsNCiAgICAgICAgICAgICAgICBnbG9iYWxWYXJzID0gKGFkZGl0aW9uYWxEYXRhICYmIGFkZGl0aW9uYWxEYXRhLmdsb2JhbFZhcnMpID8gUGFyc2VyLnNlcmlhbGl6ZVZhcnMoYWRkaXRpb25hbERhdGEuZ2xvYmFsVmFycykgKyAiXG4iIDogJyc7DQogICAgICAgICAgICAgICAgbW9kaWZ5VmFycyA9IChhZGRpdGlvbmFsRGF0YSAmJiBhZGRpdGlvbmFsRGF0YS5tb2RpZnlWYXJzKSA/ICJcbiIgKyBQYXJzZXIuc2VyaWFsaXplVmFycyhhZGRpdGlvbmFsRGF0YS5tb2RpZnlWYXJzKSA6ICcnOw0KICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LnBsdWdpbk1hbmFnZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHByZVByb2Nlc3NvcnMgPSBjb250ZXh0LnBsdWdpbk1hbmFnZXIuZ2V0UHJlUHJvY2Vzc29ycygpOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByZVByb2Nlc3NvcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IHByZVByb2Nlc3NvcnNbaV0ucHJvY2VzcyhzdHIsIHsgY29udGV4dDogY29udGV4dCwgaW1wb3J0czogaW1wb3J0cywgZmlsZUluZm86IGZpbGVJbmZvIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChnbG9iYWxWYXJzIHx8IChhZGRpdGlvbmFsRGF0YSAmJiBhZGRpdGlvbmFsRGF0YS5iYW5uZXIpKSB7DQogICAgICAgICAgICAgICAgICAgIHByZVRleHQgPSAoKGFkZGl0aW9uYWxEYXRhICYmIGFkZGl0aW9uYWxEYXRhLmJhbm5lcikgPyBhZGRpdGlvbmFsRGF0YS5iYW5uZXIgOiAnJykgKyBnbG9iYWxWYXJzOw0KICAgICAgICAgICAgICAgICAgICBpZ25vcmVkID0gaW1wb3J0cy5jb250ZW50c0lnbm9yZWRDaGFyczsNCiAgICAgICAgICAgICAgICAgICAgaWdub3JlZFtmaWxlSW5mby5maWxlbmFtZV0gPSBpZ25vcmVkW2ZpbGVJbmZvLmZpbGVuYW1lXSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICBpZ25vcmVkW2ZpbGVJbmZvLmZpbGVuYW1lXSArPSBwcmVUZXh0Lmxlbmd0aDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoL1xyXG4/L2csICdcbicpOw0KICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBwb3RlbnRpYWwgVVRGIEJ5dGUgT3JkZXIgTWFyaw0KICAgICAgICAgICAgICAgIHN0ciA9IHByZVRleHQgKyBzdHIucmVwbGFjZSgvXlx1RkVGRi8sICcnKSArIG1vZGlmeVZhcnM7DQogICAgICAgICAgICAgICAgaW1wb3J0cy5jb250ZW50c1tmaWxlSW5mby5maWxlbmFtZV0gPSBzdHI7DQogICAgICAgICAgICAgICAgLy8gU3RhcnQgd2l0aCB0aGUgcHJpbWFyeSBydWxlLg0KICAgICAgICAgICAgICAgIC8vIFRoZSB3aG9sZSBzeW50YXggdHJlZSBpcyBoZWxkIHVuZGVyIGEgUnVsZXNldCBub2RlLA0KICAgICAgICAgICAgICAgIC8vIHdpdGggdGhlIGByb290YCBwcm9wZXJ0eSBzZXQgdG8gdHJ1ZSwgc28gbm8gYHt9YCBhcmUNCiAgICAgICAgICAgICAgICAvLyBvdXRwdXQuIFRoZSBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgaW5wdXQgaXMgcGFyc2VkLg0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnN0YXJ0KHN0ciwgY29udGV4dC5jaHVua0lucHV0LCBmdW5jdGlvbiBmYWlsKG1zZywgaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBMZXNzRXJyb3Ioew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUGFyc2UnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1zZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogZmlsZUluZm8uZmlsZW5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGltcG9ydHMpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgdHJlZS5Ob2RlLnByb3RvdHlwZS5wYXJzZSA9IHRoaXM7DQogICAgICAgICAgICAgICAgICAgIHJvb3QgPSBuZXcgdHJlZS5SdWxlc2V0KG51bGwsIHRoaXMucGFyc2Vycy5wcmltYXJ5KCkpOw0KICAgICAgICAgICAgICAgICAgICB0cmVlLk5vZGUucHJvdG90eXBlLnJvb3ROb2RlID0gcm9vdDsNCiAgICAgICAgICAgICAgICAgICAgcm9vdC5yb290ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgcm9vdC5maXJzdFJvb3QgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICByb290LmZ1bmN0aW9uUmVnaXN0cnkgPSBmdW5jdGlvblJlZ2lzdHJ5LmluaGVyaXQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBMZXNzRXJyb3IoZSwgaW1wb3J0cywgZmlsZUluZm8uZmlsZW5hbWUpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gSWYgYGlgIGlzIHNtYWxsZXIgdGhhbiB0aGUgYGlucHV0Lmxlbmd0aCAtIDFgLA0KICAgICAgICAgICAgICAgIC8vIGl0IG1lYW5zIHRoZSBwYXJzZXIgd2Fzbid0IGFibGUgdG8gcGFyc2UgdGhlIHdob2xlDQogICAgICAgICAgICAgICAgLy8gc3RyaW5nLCBzbyB3ZSd2ZSBnb3QgYSBwYXJzaW5nIGVycm9yLg0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gV2UgdHJ5IHRvIGV4dHJhY3QgYSBcbiBkZWxpbWl0ZWQgc3RyaW5nLA0KICAgICAgICAgICAgICAgIC8vIHNob3dpbmcgdGhlIGxpbmUgd2hlcmUgdGhlIHBhcnNlIGVycm9yIG9jY3VycmVkLg0KICAgICAgICAgICAgICAgIC8vIFdlIHNwbGl0IGl0IHVwIGludG8gdHdvIHBhcnRzICh0aGUgcGFydCB3aGljaCBwYXJzZWQsDQogICAgICAgICAgICAgICAgLy8gYW5kIHRoZSBwYXJ0IHdoaWNoIGRpZG4ndCksIHNvIHdlIGNhbiBjb2xvciB0aGVtIGRpZmZlcmVudGx5Lg0KICAgICAgICAgICAgICAgIHZhciBlbmRJbmZvID0gcGFyc2VySW5wdXQuZW5kKCk7DQogICAgICAgICAgICAgICAgaWYgKCFlbmRJbmZvLmlzRmluaXNoZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBlbmRJbmZvLmZ1cnRoZXN0UG9zc2libGVFcnJvck1lc3NhZ2U7DQogICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdVbnJlY29nbmlzZWQgaW5wdXQnOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZEluZm8uZnVydGhlc3RDaGFyID09PSAnfScpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9ICcuIFBvc3NpYmx5IG1pc3Npbmcgb3BlbmluZyBcJ3tcJyc7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlbmRJbmZvLmZ1cnRoZXN0Q2hhciA9PT0gJyknKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSArPSAnLiBQb3NzaWJseSBtaXNzaW5nIG9wZW5pbmcgXCcoXCcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZW5kSW5mby5mdXJ0aGVzdFJlYWNoZWRFbmQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9ICcuIFBvc3NpYmx5IG1pc3Npbmcgc29tZXRoaW5nJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlcnJvciA9IG5ldyBMZXNzRXJyb3Ioew0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BhcnNlJywNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogZW5kSW5mby5mdXJ0aGVzdCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlSW5mby5maWxlbmFtZQ0KICAgICAgICAgICAgICAgICAgICB9LCBpbXBvcnRzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFyIGZpbmlzaCA9IGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgICAgICAgICAgIGUgPSBlcnJvciB8fCBlIHx8IGltcG9ydHMuZXJyb3I7DQogICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgTGVzc0Vycm9yKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBuZXcgTGVzc0Vycm9yKGUsIGltcG9ydHMsIGZpbGVJbmZvLmZpbGVuYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCByb290KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgaWYgKGNvbnRleHQucHJvY2Vzc0ltcG9ydHMgIT09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgICAgIG5ldyB2aXNpdG9ycy5JbXBvcnRWaXNpdG9yKGltcG9ydHMsIGZpbmlzaCkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5ydW4ocm9vdCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmluaXNoKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICAvLyBIZXJlIGluLCB0aGUgcGFyc2luZyBydWxlcy9mdW5jdGlvbnMNCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICAvLyBUaGUgYmFzaWMgc3RydWN0dXJlIG9mIHRoZSBzeW50YXggdHJlZSBnZW5lcmF0ZWQgaXMgYXMgZm9sbG93czoNCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICAvLyAgIFJ1bGVzZXQgLT4gIERlY2xhcmF0aW9uIC0+IFZhbHVlIC0+IEV4cHJlc3Npb24gLT4gRW50aXR5DQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgLy8gSGVyZSdzIHNvbWUgTGVzcyBjb2RlOg0KICAgICAgICAgICAgLy8NCiAgICAgICAgICAgIC8vICAgIC5jbGFzcyB7DQogICAgICAgICAgICAvLyAgICAgIGNvbG9yOiAjZmZmOw0KICAgICAgICAgICAgLy8gICAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgLy8gICAgICB3aWR0aDogQHcgKyA0cHg7DQogICAgICAgICAgICAvLyAgICAgID4gLmNoaWxkIHsuLi59DQogICAgICAgICAgICAvLyAgICB9DQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgLy8gQW5kIGhlcmUncyB3aGF0IHRoZSBwYXJzZSB0cmVlIG1pZ2h0IGxvb2sgbGlrZToNCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICAvLyAgICAgUnVsZXNldCAoU2VsZWN0b3IgJy5jbGFzcycsIFsNCiAgICAgICAgICAgIC8vICAgICAgICAgRGVjbGFyYXRpb24gKCJjb2xvciIsICBWYWx1ZSAoW0V4cHJlc3Npb24gW0NvbG9yICNmZmZdXSkpDQogICAgICAgICAgICAvLyAgICAgICAgIERlY2xhcmF0aW9uICgiYm9yZGVyIiwgVmFsdWUgKFtFeHByZXNzaW9uIFtEaW1lbnNpb24gMXB4XVtLZXl3b3JkICJzb2xpZCJdW0NvbG9yICMwMDBdXSkpDQogICAgICAgICAgICAvLyAgICAgICAgIERlY2xhcmF0aW9uICgid2lkdGgiLCAgVmFsdWUgKFtFeHByZXNzaW9uIFtPcGVyYXRpb24gIiArICIgW1ZhcmlhYmxlICJAdyJdW0RpbWVuc2lvbiA0cHhdXV0pKQ0KICAgICAgICAgICAgLy8gICAgICAgICBSdWxlc2V0IChTZWxlY3RvciBbRWxlbWVudCAnPicsICcuY2hpbGQnXSwgWy4uLl0pDQogICAgICAgICAgICAvLyAgICAgXSkNCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICAvLyAgSW4gZ2VuZXJhbCwgbW9zdCBydWxlcyB3aWxsIHRyeSB0byBwYXJzZSBhIHRva2VuIHdpdGggdGhlIGAkcmUoKWAgZnVuY3Rpb24sIGFuZCBpZiB0aGUgcmV0dXJuDQogICAgICAgICAgICAvLyAgdmFsdWUgaXMgdHJ1bHksIHdpbGwgcmV0dXJuIGEgbmV3IG5vZGUsIG9mIHRoZSByZWxldmFudCB0eXBlLiBTb21ldGltZXMsIHdlIG5lZWQgdG8gY2hlY2sNCiAgICAgICAgICAgIC8vICBmaXJzdCwgYmVmb3JlIHBhcnNpbmcsIHRoYXQncyB3aGVuIHdlIHVzZSBgcGVlaygpYC4NCiAgICAgICAgICAgIC8vDQogICAgICAgICAgICBwYXJzZXJzOiBwYXJzZXJzID0gew0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gVGhlIGBwcmltYXJ5YCBydWxlIGlzIHRoZSAqZW50cnkqIGFuZCAqZXhpdCogcG9pbnQgb2YgdGhlIHBhcnNlci4NCiAgICAgICAgICAgICAgICAvLyBUaGUgcnVsZXMgaGVyZSBjYW4gYXBwZWFyIGF0IGFueSBsZXZlbCBvZiB0aGUgcGFyc2UgdHJlZS4NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIFRoZSByZWN1cnNpdmUgbmF0dXJlIG9mIHRoZSBncmFtbWFyIGlzIGFuIGludGVycGxheSBiZXR3ZWVuIHRoZSBgYmxvY2tgDQogICAgICAgICAgICAgICAgLy8gcnVsZSwgd2hpY2ggcmVwcmVzZW50cyBgeyAuLi4gfWAsIHRoZSBgcnVsZXNldGAgcnVsZSwgYW5kIHRoaXMgYHByaW1hcnlgIHJ1bGUsDQogICAgICAgICAgICAgICAgLy8gYXMgcmVwcmVzZW50ZWQgYnkgdGhpcyBzaW1wbGlmaWVkIGdyYW1tYXI6DQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyAgICAgcHJpbWFyeSAg4oaSICAocnVsZXNldCB8IGRlY2xhcmF0aW9uKSsNCiAgICAgICAgICAgICAgICAvLyAgICAgcnVsZXNldCAg4oaSICBzZWxlY3RvcisgYmxvY2sNCiAgICAgICAgICAgICAgICAvLyAgICAgYmxvY2sgICAg4oaSICAneycgcHJpbWFyeSAnfScNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIE9ubHkgYXQgb25lIHBvaW50IGlzIHRoZSBwcmltYXJ5IHJ1bGUgbm90IGNhbGxlZCBmcm9tIHRoZQ0KICAgICAgICAgICAgICAgIC8vIGJsb2NrIHJ1bGU6IGF0IHRoZSByb290IGxldmVsLg0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgcHJpbWFyeTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbWl4aW4gPSB0aGlzLm1peGluOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcm9vdCA9IFtdOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZTsNCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHRoaXMuY29tbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbm9kZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC5wdXNoKG5vZGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWx3YXlzIHByb2Nlc3MgY29tbWVudHMgYmVmb3JlIGRlY2lkaW5nIGlmIGZpbmlzaGVkDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuZmluaXNoZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5wZWVrKCd9JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSB0aGlzLmV4dGVuZFJ1bGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdCA9IHJvb3QuY29uY2F0KG5vZGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG1peGluLmRlZmluaXRpb24oKSB8fCB0aGlzLmRlY2xhcmF0aW9uKCkgfHwgbWl4aW4uY2FsbChmYWxzZSwgZmFsc2UpIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydWxlc2V0KCkgfHwgdGhpcy52YXJpYWJsZUNhbGwoKSB8fCB0aGlzLmVudGl0aWVzLmNhbGwoKSB8fCB0aGlzLmF0cnVsZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290LnB1c2gobm9kZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZm91bmRTZW1pQ29sb24gPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocGFyc2VySW5wdXQuJGNoYXIoJzsnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZFNlbWlDb2xvbiA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRTZW1pQ29sb24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByb290Ow0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8gY29tbWVudHMgYXJlIGNvbGxlY3RlZCBieSB0aGUgbWFpbiBwYXJzaW5nIG1lY2hhbmlzbSBhbmQgdGhlbiBhc3NpZ25lZCB0byBub2Rlcw0KICAgICAgICAgICAgICAgIC8vIHdoZXJlIHRoZSBjdXJyZW50IHN0cnVjdHVyZSBhbGxvd3MgaXQNCiAgICAgICAgICAgICAgICBjb21tZW50OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWVudCA9IHBhcnNlcklucHV0LmNvbW1lbnRTdG9yZS5zaGlmdCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5Db21tZW50KShjb21tZW50LnRleHQsIGNvbW1lbnQuaXNMaW5lQ29tbWVudCwgY29tbWVudC5pbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEVudGl0aWVzIGFyZSB0b2tlbnMgd2hpY2ggY2FuIGJlIGZvdW5kIGluc2lkZSBhbiBFeHByZXNzaW9uDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBlbnRpdGllczogew0KICAgICAgICAgICAgICAgICAgICBtaXhpbkxvb2t1cDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlcnMubWl4aW4uY2FsbCh0cnVlLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gQSBzdHJpbmcsIHdoaWNoIHN1cHBvcnRzIGVzY2FwaW5nICIgYW5kICcNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICJtaWxreSB3YXkiICdoZVwncyB0aGUgb25lIScNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgcXVvdGVkOiBmdW5jdGlvbiAoZm9yY2VFc2NhcGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0VzY2FwZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC4kY2hhcignficpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFc2NhcGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZvcmNlRXNjYXBlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBwYXJzZXJJbnB1dC4kcXVvdGVkKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0cikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuUXVvdGVkKShzdHIuY2hhckF0KDApLCBzdHIuc3Vic3RyKDEsIHN0ci5sZW5ndGggLSAyKSwgaXNFc2NhcGVkLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyBBIGNhdGNoLWFsbCB3b3JkLCBzdWNoIGFzOg0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgYmxhY2sgYm9yZGVyLWNvbGxhcHNlDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrID0gcGFyc2VySW5wdXQuJGNoYXIoJyUnKSB8fCBwYXJzZXJJbnB1dC4kcmUoL15cWz8oPzpbXHctXXxcXCg/OltBLUZhLWYwLTldezEsNn0gP3xbXkEtRmEtZjAtOV0pKStcXT8vKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyZWUuQ29sb3IuZnJvbUtleXdvcmQoaykgfHwgbmV3ICh0cmVlLktleXdvcmQpKGspOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyBBIGZ1bmN0aW9uIGNhbGwNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHJnYigyNTUsIDAsIDI1NSkNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGFyZ3VtZW50cyBhcmUgcGFyc2VkIHdpdGggdGhlIGBlbnRpdGllcy5hcmd1bWVudHNgIHBhcnNlci4NCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgY2FsbDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJnczsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmdW5jOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2Nhc2UtaW5zZW5zaXRpdmUtcmVnZXgtdnMtc3RydG9sb3dlci10aGVuLXJlZ2V4LzE4DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQucGVlaygvXnVybFwoL2kpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHBhcnNlcklucHV0LiRyZSgvXihbXHctXSt8JXx+fHByb2dpZDpbXHdcLl0rKVwoLyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZVsxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSB0aGlzLmN1c3RvbUZ1bmNDYWxsKG5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bmMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzID0gZnVuYy5wYXJzZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdzICYmIGZ1bmMuc3RvcCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3M7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IHRoaXMuYXJndW1lbnRzKGFyZ3MpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC4kY2hhcignKScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgnQ291bGQgbm90IHBhcnNlIGNhbGwgYXJndW1lbnRzIG9yIG1pc3NpbmcgXCcpXCcnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuQ2FsbCkobmFtZSwgYXJncywgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gUGFyc2luZyBydWxlcyBmb3IgZnVuY3Rpb25zIHdpdGggbm9uLXN0YW5kYXJkIGFyZ3MsIGUuZy46DQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vICAgICBib29sZWFuKG5vdCgyID4gMSkpDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vICAgICBUaGlzIGlzIGEgcXVpY2sgcHJvdG90eXBlLCB0byBiZSBtb2RpZmllZC9pbXByb3ZlZCB3aGVuDQogICAgICAgICAgICAgICAgICAgIC8vICAgICBtb3JlIGN1c3RvbS1wYXJzZWQgZnVuY3MgY29tZSAoZS5nLiBgc2VsZWN0b3IoLi4uKWApDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIGN1c3RvbUZ1bmNDYWxsOiBmdW5jdGlvbiAobmFtZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLyogSWRlYWxseSB0aGUgdGFibGUgaXMgdG8gYmUgbW92ZWQgb3V0IG9mIGhlcmUgZm9yIGZhc3RlciBwZXJmLiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dCBpdCdzIHF1aXRlIHRyaWNreSBzaW5jZSBpdCByZWxpZXMgb24gYWxsIHRoZXNlIGBwYXJzZXJzYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5kIGBleHBlY3RgIGF2YWlsYWJsZSBvbmx5IGhlcmUgKi8NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGE6IGYocGFyc2Vycy5pZUFscGhhLCB0cnVlKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sZWFuOiBmKGNvbmRpdGlvbiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lmJzogZihjb25kaXRpb24pDQogICAgICAgICAgICAgICAgICAgICAgICB9W25hbWUudG9Mb3dlckNhc2UoKV07DQogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBmKHBhcnNlLCBzdG9wKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2U6IHBhcnNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9wOiBzdG9wIC8vIHdoZW4gdHJ1ZSAtIHN0b3AgYWZ0ZXIgcGFyc2UoKSBhbmQgcmV0dXJuIGl0cyByZXN1bHQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgY29udGludWUgZm9yIHBsYWluIGFyZ3MNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY29uZGl0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZXhwZWN0KHBhcnNlcnMuY29uZGl0aW9uLCAnZXhwZWN0ZWQgY29uZGl0aW9uJyldOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGZ1bmN0aW9uIChwcmV2QXJncykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3NDb21tYSA9IHByZXZBcmdzIHx8IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3NTZW1pQ29sb24gPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc1NlbWlDb2xvblNlcGFyYXRlZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZBcmdzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZBcmdzID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcnNlcnMuZGV0YWNoZWRSdWxlc2V0KCkgfHwgdGhpcy5hc3NpZ25tZW50KCkgfHwgcGFyc2Vycy5leHByZXNzaW9uKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS52YWx1ZSAmJiB2YWx1ZS52YWx1ZS5sZW5ndGggPT0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS52YWx1ZVswXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzQ29tbWEucHVzaCh2YWx1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC4kY2hhcignLCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJzsnKSB8fCBpc1NlbWlDb2xvblNlcGFyYXRlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NlbWlDb2xvblNlcGFyYXRlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gKGFyZ3NDb21tYS5sZW5ndGggPCAxKSA/IGFyZ3NDb21tYVswXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXcgdHJlZS5WYWx1ZShhcmdzQ29tbWEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzU2VtaUNvbG9uLnB1c2godmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzQ29tbWEgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1NlbWlDb2xvblNlcGFyYXRlZCA/IGFyZ3NTZW1pQ29sb24gOiBhcmdzQ29tbWE7DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGxpdGVyYWw6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbigpIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xvcigpIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdW90ZWQoKSB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5pY29kZURlc2NyaXB0b3IoKTsNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgLy8gQXNzaWdubWVudHMgYXJlIGFyZ3VtZW50IGVudGl0aWVzIGZvciBjYWxscy4NCiAgICAgICAgICAgICAgICAgICAgLy8gVGhleSBhcmUgcHJlc2VudCBpbiBpZSBmaWx0ZXIgcHJvcGVydGllcyBhcyBzaG93biBiZWxvdy4NCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhKCAqb3BhY2l0eT01MCogKQ0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gcGFyc2VySW5wdXQuJHJlKC9eXHcrKD89XHM/PSkvaSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWtleSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCc9JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZXJzLmVudGl0eSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5Bc3NpZ25tZW50KShrZXksIHZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gUGFyc2UgdXJsKCkgdG9rZW5zDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSBhIHNwZWNpZmljIHJ1bGUgZm9yIHVybHMsIGJlY2F1c2UgdGhleSBkb24ndCByZWFsbHkgYmVoYXZlIGxpa2UNCiAgICAgICAgICAgICAgICAgICAgLy8gc3RhbmRhcmQgZnVuY3Rpb24gY2FsbHMuIFRoZSBkaWZmZXJlbmNlIGlzIHRoYXQgdGhlIGFyZ3VtZW50IGRvZXNuJ3QgaGF2ZQ0KICAgICAgICAgICAgICAgICAgICAvLyB0byBiZSBlbmNsb3NlZCB3aXRoaW4gYSBzdHJpbmcsIHNvIGl0IGNhbid0IGJlIHBhcnNlZCBhcyBhbiBFeHByZXNzaW9uLg0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICB1cmw6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5hdXRvQ29tbWVudEFic29yYiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC4kc3RyKCd1cmwoJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5hdXRvQ29tbWVudEFic29yYiA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnF1b3RlZCgpIHx8IHRoaXMudmFyaWFibGUoKSB8fCB0aGlzLnByb3BlcnR5KCkgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC4kcmUoL14oPzooPzpcXFtcKFwpJyJdKXxbXlwoXCknIl0pKy8pIHx8ICcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuYXV0b0NvbW1lbnRBYnNvcmIgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0Q2hhcignKScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5VUkwpKCh2YWx1ZS52YWx1ZSAhPSBudWxsIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgaW5zdGFuY2VvZiB0cmVlLlZhcmlhYmxlIHx8DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgaW5zdGFuY2VvZiB0cmVlLlByb3BlcnR5KSA/DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgOiBuZXcgKHRyZWUuQW5vbnltb3VzKSh2YWx1ZSwgaW5kZXgpLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyBBIFZhcmlhYmxlIGVudGl0eSwgc3VjaCBhcyBgQGZpbmtgLCBpbg0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgd2lkdGg6IEBmaW5rICsgMnB4DQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSBhIGRpZmZlcmVudCBwYXJzZXIgZm9yIHZhcmlhYmxlIGRlZmluaXRpb25zLA0KICAgICAgICAgICAgICAgICAgICAvLyBzZWUgYHBhcnNlcnMudmFyaWFibGVgLg0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCkgPT09ICdAJyAmJiAobmFtZSA9IHBhcnNlcklucHV0LiRyZSgvXkBAP1tcdy1dKy8pKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoID0gcGFyc2VySW5wdXQuY3VycmVudENoYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2ggPT09ICcoJyB8fCBjaCA9PT0gJ1snICYmICFwYXJzZXJJbnB1dC5wcmV2Q2hhcigpLm1hdGNoKC9eXHMvKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIG1heSBiZSBhIFZhcmlhYmxlQ2FsbCBsb29rdXANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHBhcnNlcnMudmFyaWFibGVDYWxsKG5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5WYXJpYWJsZSkobmFtZSwgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgLy8gQSB2YXJpYWJsZSBlbnRpdHkgdXNpbmcgdGhlIHByb3RlY3RpdmUge30gZS5nLiBAe3Zhcn0NCiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVDdXJseTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cmx5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpID09PSAnQCcgJiYgKGN1cmx5ID0gcGFyc2VySW5wdXQuJHJlKC9eQFx7KFtcdy1dKylcfS8pKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuVmFyaWFibGUpKCJAIiArIGN1cmx5WzFdLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyBBIFByb3BlcnR5IGFjY2Vzc29yLCBzdWNoIGFzIGAkY29sb3JgLCBpbg0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgYmFja2dyb3VuZC1jb2xvcjogJGNvbG9yDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuY3VycmVudENoYXIoKSA9PT0gJyQnICYmIChuYW1lID0gcGFyc2VySW5wdXQuJHJlKC9eXCRbXHctXSsvKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLlByb3BlcnR5KShuYW1lLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvLyBBIHByb3BlcnR5IGVudGl0eSB1c2VpbmcgdGhlIHByb3RlY3RpdmUge30gZS5nLiAke3Byb3B9DQogICAgICAgICAgICAgICAgICAgIHByb3BlcnR5Q3VybHk6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJseTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuY3VycmVudENoYXIoKSA9PT0gJyQnICYmIChjdXJseSA9IHBhcnNlcklucHV0LiRyZSgvXlwkXHsoW1x3LV0rKVx9LykpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5Qcm9wZXJ0eSkoIiQiICsgY3VybHlbMV0sIGluZGV4LCBmaWxlSW5mbyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIEEgSGV4YWRlY2ltYWwgY29sb3INCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICM0RjNDMkYNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gYHJnYmAgYW5kIGBoc2xgIGNvbG9ycyBhcmUgcGFyc2VkIHRocm91Z2ggdGhlIGBlbnRpdGllcy5jYWxsYCBwYXJzZXIuDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIGNvbG9yOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmdiOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCkgPT09ICcjJyAmJiAocmdiID0gcGFyc2VySW5wdXQuJHJlKC9eIyhbQS1GYS1mMC05XXs4fXxbQS1GYS1mMC05XXs2fXxbQS1GYS1mMC05XXszLDR9KShbXHcuI1xbXSk/LykpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZ2JbMl0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuQ29sb3IpKHJnYlsxXSwgdW5kZWZpbmVkLCByZ2JbMF0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgY29sb3JLZXl3b3JkOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXV0b0NvbW1lbnRBYnNvcmIgPSBwYXJzZXJJbnB1dC5hdXRvQ29tbWVudEFic29yYjsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmF1dG9Db21tZW50QWJzb3JiID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgayA9IHBhcnNlcklucHV0LiRyZSgvXltfQS1aYS16LV1bX0EtWmEtejAtOS1dKy8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuYXV0b0NvbW1lbnRBYnNvcmIgPSBhdXRvQ29tbWVudEFic29yYjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IHRyZWUuQ29sb3IuZnJvbUtleXdvcmQoayk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC4kc3RyKGspOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gQSBEaW1lbnNpb24sIHRoYXQgaXMsIGEgbnVtYmVyIGFuZCBhIHVuaXQNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIDAuNWVtIDk1JQ0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICBkaW1lbnNpb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5wZWVrTm90TnVtZXJpYygpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VySW5wdXQuJHJlKC9eKFsrLV0/XGQqXC4/XGQrKSglfFthLXpfXSspPy9pKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuRGltZW5zaW9uKSh2YWx1ZVsxXSwgdmFsdWVbMl0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyBBIHVuaWNvZGUgZGVzY3JpcHRvciwgYXMgaXMgdXNlZCBpbiB1bmljb2RlLXJhbmdlDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIFUrMD8/ICBvciBVKzAwQTEtMDBBOQ0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICB1bmljb2RlRGVzY3JpcHRvcjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgdWQgPSBwYXJzZXJJbnB1dC4kcmUoL15VXCtbMC05YS1mQS1GP10rKFwtWzAtOWEtZkEtRj9dKyk/Lyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLlVuaWNvZGVEZXNjcmlwdG9yKSh1ZFswXSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIEphdmFTY3JpcHQgY29kZSB0byBiZSBldmFsdWF0ZWQNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGB3aW5kb3cubG9jYXRpb24uaHJlZmANCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgamF2YXNjcmlwdDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpzOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlc2NhcGUgPSBwYXJzZXJJbnB1dC4kY2hhcignficpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpzUXVvdGUgPSBwYXJzZXJJbnB1dC4kY2hhcignYCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFqc1F1b3RlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGpzID0gcGFyc2VySW5wdXQuJHJlKC9eW15gXSpgLyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoanMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLkphdmFTY3JpcHQpKGpzLnN1YnN0cigwLCBqcy5sZW5ndGggLSAxKSwgQm9vbGVhbihlc2NhcGUpLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgnaW52YWxpZCBqYXZhc2NyaXB0IGRlZmluaXRpb24nKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBUaGUgdmFyaWFibGUgcGFydCBvZiBhIHZhcmlhYmxlIGRlZmluaXRpb24uIFVzZWQgaW4gdGhlIGBydWxlYCBwYXJzZXINCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vICAgICBAZmluazoNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIHZhcmlhYmxlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBuYW1lOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuY3VycmVudENoYXIoKSA9PT0gJ0AnICYmIChuYW1lID0gcGFyc2VySW5wdXQuJHJlKC9eKEBbXHctXSspXHMqOi8pKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVbMV07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gQ2FsbCBhIHZhcmlhYmxlIHZhbHVlIHRvIHJldHJpZXZlIGEgZGV0YWNoZWQgcnVsZXNldA0KICAgICAgICAgICAgICAgIC8vIG9yIGEgdmFsdWUgZnJvbSBhIGRldGFjaGVkIHJ1bGVzZXQncyBydWxlcy4NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vICAgICBAZmluaygpOw0KICAgICAgICAgICAgICAgIC8vICAgICBAZmluazsNCiAgICAgICAgICAgICAgICAvLyAgICAgY29sb3I6IEBmaW5rW0Bjb2xvcl07DQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICB2YXJpYWJsZUNhbGw6IGZ1bmN0aW9uIChwYXJzZWROYW1lKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBsb29rdXBzOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgIHZhciBpblZhbHVlID0gISFwYXJzZWROYW1lOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHBhcnNlZE5hbWU7DQogICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgfHwgKHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCkgPT09ICdAJw0KICAgICAgICAgICAgICAgICAgICAgICAgJiYgKG5hbWUgPSBwYXJzZXJJbnB1dC4kcmUoL14oQFtcdy1dKykoXChccypcKSk/LykpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbG9va3VwcyA9IHRoaXMubWl4aW4ucnVsZUxvb2t1cHMoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbG9va3VwcyAmJiAoKGluVmFsdWUgJiYgcGFyc2VySW5wdXQuJHN0cignKCknKSAhPT0gJygpJykgfHwgKG5hbWVbMl0gIT09ICcoKScpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoJ01pc3NpbmcgXCdbLi4uXVwnIGxvb2t1cCBpbiB2YXJpYWJsZSBjYWxsJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpblZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWVbMV07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbCA9IG5ldyB0cmVlLlZhcmlhYmxlQ2FsbChuYW1lLCBpLCBmaWxlSW5mbyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWluVmFsdWUgJiYgcGFyc2Vycy5lbmQoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0cmVlLk5hbWVzcGFjZVZhbHVlKGNhbGwsIGxvb2t1cHMsIGksIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIGV4dGVuZCBzeW50YXggLSB1c2VkIHRvIGV4dGVuZCBzZWxlY3RvcnMNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIGV4dGVuZDogZnVuY3Rpb24gKGlzUnVsZSkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHM7DQogICAgICAgICAgICAgICAgICAgIHZhciBlOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZXh0ZW5kTGlzdDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dGVuZDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC4kc3RyKGlzUnVsZSA/ICcmOmV4dGVuZCgnIDogJzpleHRlbmQoJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkbyB7DQogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24gPSBudWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMgPSBudWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCEob3B0aW9uID0gcGFyc2VySW5wdXQuJHJlKC9eKGFsbCkoPz1ccyooXCl8LCkpLykpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHRoaXMuZWxlbWVudCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cyA9IFtlXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24gPSBvcHRpb24gJiYgb3B0aW9uWzFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50cykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCdNaXNzaW5nIHRhcmdldCBzZWxlY3RvciBmb3IgOmV4dGVuZCgpLicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kID0gbmV3ICh0cmVlLkV4dGVuZCkobmV3ICh0cmVlLlNlbGVjdG9yKShlbGVtZW50cyksIG9wdGlvbiwgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHRlbmRMaXN0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kTGlzdC5wdXNoKGV4dGVuZCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmRMaXN0ID0gW2V4dGVuZF07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKHBhcnNlcklucHV0LiRjaGFyKCcsJykpOw0KICAgICAgICAgICAgICAgICAgICBleHBlY3QoL15cKS8pOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNSdWxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QoL147Lyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dGVuZExpc3Q7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIGV4dGVuZFJ1bGUgLSB1c2VkIGluIGEgcnVsZSB0byBleHRlbmQgYWxsIHRoZSBwYXJlbnQgc2VsZWN0b3JzDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBleHRlbmRSdWxlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dGVuZCh0cnVlKTsNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gTWl4aW5zDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBtaXhpbjogew0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyBBIE1peGluIGNhbGwsIHdpdGggYW4gb3B0aW9uYWwgYXJndW1lbnQgbGlzdA0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgI21peGlucyA+IC5zcXVhcmUoI2ZmZik7DQogICAgICAgICAgICAgICAgICAgIC8vICAgICAjbWl4aW5zLnNxdWFyZSgjZmZmKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5yb3VuZGVkKDRweCwgYmxhY2spOw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgLmJ1dHRvbjsNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gV2UgY2FuIGxvb2t1cCAvIHJldHVybiBhIHZhbHVlIHVzaW5nIHRoZSBsb29rdXAgc3ludGF4Og0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29sb3I6ICNtaXhpbi5zcXVhcmUoI2ZmZilbQGNvbG9yXTsNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGB3aGlsZWAgbG9vcCBpcyB0aGVyZSBiZWNhdXNlIG1peGlucyBjYW4gYmUNCiAgICAgICAgICAgICAgICAgICAgLy8gbmFtZXNwYWNlZCwgYnV0IHdlIG9ubHkgc3VwcG9ydCB0aGUgY2hpbGQgYW5kIGRlc2NlbmRhbnQNCiAgICAgICAgICAgICAgICAgICAgLy8gc2VsZWN0b3IgZm9yIG5vdy4NCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgY2FsbDogZnVuY3Rpb24gKGluVmFsdWUsIGdldExvb2t1cCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltcG9ydGFudCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvb2t1cHM7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3M7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFzUGFyZW5zOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgIT09ICcuJyAmJiBzICE9PSAnIycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7IC8vIHN0b3AgdXMgYWJzb3JiaW5nIHBhcnQgb2YgYW4gaW52YWxpZCBzZWxlY3Rvcg0KICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJygnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzID0gdGhpcy5hcmdzKHRydWUpLmFyZ3M7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdENoYXIoJyknKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzUGFyZW5zID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldExvb2t1cCAhPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9va3VwcyA9IHRoaXMucnVsZUxvb2t1cHMoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldExvb2t1cCA9PT0gdHJ1ZSAmJiAhbG9va3Vwcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluVmFsdWUgJiYgIWxvb2t1cHMgJiYgIWhhc1BhcmVucykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzbid0IGEgdmFsaWQgaW4tdmFsdWUgbWl4aW4gY2FsbA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpblZhbHVlICYmIHBhcnNlcnMuaW1wb3J0YW50KCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0YW50ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluVmFsdWUgfHwgcGFyc2Vycy5lbmQoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1peGluID0gbmV3ICh0cmVlLm1peGluLkNhbGwpKGVsZW1lbnRzLCBhcmdzLCBpbmRleCwgZmlsZUluZm8sICFsb29rdXBzICYmIGltcG9ydGFudCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb29rdXBzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRyZWUuTmFtZXNwYWNlVmFsdWUobWl4aW4sIGxvb2t1cHMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1peGluOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAgICAgICAgICogTWF0Y2hpbmcgZWxlbWVudHMgZm9yIG1peGlucw0KICAgICAgICAgICAgICAgICAgICAgKiAoU3RhcnQgd2l0aCAuIG9yICMgYW5kIGNhbiBoYXZlID4gKQ0KICAgICAgICAgICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50czsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGM7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtSW5kZXg7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmUgPSAvXlsjLl0oPzpbXHctXXxcXCg/OltBLUZhLWYwLTldezEsNn0gP3xbXkEtRmEtZjAtOV0pKSsvOw0KICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtSW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBwYXJzZXJJbnB1dC4kcmUocmUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbSA9IG5ldyAodHJlZS5FbGVtZW50KShjLCBlLCBmYWxzZSwgZWxlbUluZGV4LCBmaWxlSW5mbyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goZWxlbSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cyA9IFtlbGVtXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHBhcnNlcklucHV0LiRjaGFyKCc+Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudHM7DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGFyZ3M6IGZ1bmN0aW9uIChpc0NhbGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdGllcyA9IHBhcnNlcnMuZW50aXRpZXM7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuZXIgPSB7IGFyZ3M6IG51bGwsIHZhcmlhZGljOiBmYWxzZSB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4cHJlc3Npb25zID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJnc1NlbWlDb2xvbiA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3NDb21tYSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzU2VtaUNvbG9uU2VwYXJhdGVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4cHJlc3Npb25Db250YWluc05hbWVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZUxvb3A7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJnOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4cGFuZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYXNTZXAgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDYWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IHBhcnNlcnMuZGV0YWNoZWRSdWxlc2V0KCkgfHwgcGFyc2Vycy5leHByZXNzaW9uKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUubGVuZ3RoID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LiRzdHIoJy4uLicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5lci52YXJpYWRpYyA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJzsnKSAmJiAhaXNTZW1pQ29sb25TZXBhcmF0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NlbWlDb2xvblNlcGFyYXRlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaXNTZW1pQ29sb25TZXBhcmF0ZWQgPyBhcmdzU2VtaUNvbG9uIDogYXJnc0NvbW1hKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wdXNoKHsgdmFyaWFkaWM6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBlbnRpdGllcy52YXJpYWJsZSgpIHx8IGVudGl0aWVzLnByb3BlcnR5KCkgfHwgZW50aXRpZXMubGl0ZXJhbCgpIHx8IGVudGl0aWVzLmtleXdvcmQoKSB8fCB0aGlzLmNhbGwodHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXJnIHx8ICFoYXNTZXApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVMb29wID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJnLnRocm93QXdheUNvbW1lbnRzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZy50aHJvd0F3YXlDb21tZW50cygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGFyZzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDYWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZhcmlhYmxlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmcudmFsdWUgJiYgYXJnLnZhbHVlLmxlbmd0aCA9PSAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmcudmFsdWVbMF07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCAmJiAodmFsIGluc3RhbmNlb2YgdHJlZS5WYXJpYWJsZSB8fCB2YWwgaW5zdGFuY2VvZiB0cmVlLlByb3BlcnR5KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJzonKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4cHJlc3Npb25zLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTZW1pQ29sb25TZXBhcmF0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoJ0Nhbm5vdCBtaXggOyBhbmQgLCBhcyBkZWxpbWl0ZXIgdHlwZXMnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbkNvbnRhaW5zTmFtZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZXJzLmRldGFjaGVkUnVsZXNldCgpIHx8IHBhcnNlcnMuZXhwcmVzc2lvbigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0NhbGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoJ2NvdWxkIG5vdCB1bmRlcnN0YW5kIHZhbHVlIGZvciBuYW1lZCBhcmd1bWVudCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5lci5hcmdzID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5lcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lTG9vcCA9IChuYW1lID0gdmFsLm5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlcklucHV0LiRzdHIoJy4uLicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQ2FsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybmVyLnZhcmlhZGljID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJzsnKSAmJiAhaXNTZW1pQ29sb25TZXBhcmF0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZW1pQ29sb25TZXBhcmF0ZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaXNTZW1pQ29sb25TZXBhcmF0ZWQgPyBhcmdzU2VtaUNvbG9uIDogYXJnc0NvbW1hKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucHVzaCh7IG5hbWU6IGFyZy5uYW1lLCB2YXJpYWRpYzogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWlzQ2FsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWVMb29wID0gdmFsLm5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb25zLnB1c2godmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzQ29tbWEucHVzaCh7IG5hbWU6IG5hbWVMb29wLCB2YWx1ZTogdmFsdWUsIGV4cGFuZDogZXhwYW5kIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC4kY2hhcignLCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1NlcCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNTZXAgPSBwYXJzZXJJbnB1dC4kY2hhcignOycpID09PSAnOyc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1NlcCB8fCBpc1NlbWlDb2xvblNlcGFyYXRlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwcmVzc2lvbkNvbnRhaW5zTmFtZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCdDYW5ub3QgbWl4IDsgYW5kICwgYXMgZGVsaW1pdGVyIHR5cGVzJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZW1pQ29sb25TZXBhcmF0ZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwcmVzc2lvbnMubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBuZXcgKHRyZWUuVmFsdWUpKGV4cHJlc3Npb25zKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzU2VtaUNvbG9uLnB1c2goeyBuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWUsIGV4cGFuZDogZXhwYW5kIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbnMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbkNvbnRhaW5zTmFtZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybmVyLmFyZ3MgPSBpc1NlbWlDb2xvblNlcGFyYXRlZCA/IGFyZ3NTZW1pQ29sb24gOiBhcmdzQ29tbWE7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuZXI7DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIEEgTWl4aW4gZGVmaW5pdGlvbiwgd2l0aCBhIGxpc3Qgb2YgcGFyYW1ldGVycw0KICAgICAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgLnJvdW5kZWQgKEByYWRpdXM6IDJweCwgQGNvbG9yKSB7DQogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAuLi4NCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gVW50aWwgd2UgaGF2ZSBhIGZpbmVyIGdyYWluZWQgc3RhdGUtbWFjaGluZSwgd2UgaGF2ZSB0bw0KICAgICAgICAgICAgICAgICAgICAvLyBkbyBhIGxvb2stYWhlYWQsIHRvIG1ha2Ugc3VyZSB3ZSBkb24ndCBoYXZlIGEgbWl4aW4gY2FsbC4NCiAgICAgICAgICAgICAgICAgICAgLy8gU2VlIHRoZSBgcnVsZWAgZnVuY3Rpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIC8vIFdlIHN0YXJ0IGJ5IG1hdGNoaW5nIGAucm91bmRlZCAoYCwgYW5kIHRoZW4gcHJvY2VlZCBvbiB0bw0KICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYXJndW1lbnQgbGlzdCwgd2hpY2ggaGFzIG9wdGlvbmFsIGRlZmF1bHQgdmFsdWVzLg0KICAgICAgICAgICAgICAgICAgICAvLyBXZSBzdG9yZSB0aGUgcGFyYW1ldGVycyBpbiBgcGFyYW1zYCwgd2l0aCBhIGB2YWx1ZWAga2V5LA0KICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIHZhbHVlLCBzdWNoIGFzIGluIHRoZSBjYXNlIG9mIGBAcmFkaXVzYC4NCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gT25jZSB3ZSd2ZSBnb3Qgb3VyIHBhcmFtcyBsaXN0LCBhbmQgYSBjbG9zaW5nIGApYCwgd2UgcGFyc2UNCiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGB7Li4ufWAgYmxvY2suDQogICAgICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgICAgIGRlZmluaXRpb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGVzZXQ7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YXJpYWRpYyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpICE9PSAnLicgJiYgcGFyc2VySW5wdXQuY3VycmVudENoYXIoKSAhPT0gJyMnKSB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnBlZWsoL15bXntdKlx9LykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IHBhcnNlcklucHV0LiRyZSgvXihbIy5dKD86W1x3LV18XFwoPzpbQS1GYS1mMC05XXsxLDZ9ID98W15BLUZhLWYwLTldKSkrKVxzKlwoLyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbWF0Y2hbMV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ0luZm8gPSB0aGlzLmFyZ3MoZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IGFyZ0luZm8uYXJnczsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWRpYyA9IGFyZ0luZm8udmFyaWFkaWM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLm1peGluY2FsbCgiQHthfSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb2tzIGEgYml0IGxpa2UgYSBtaXhpbiBkZWZpbml0aW9uLi4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbHNvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLm1peGluY2FsbChAYToge3J1bGU6IHNldDt9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyB3ZSBoYXZlIHRvIGJlIG5pY2UgYW5kIHJlc3RvcmUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcpJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgnTWlzc2luZyBjbG9zaW5nIFwnKVwnJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuY29tbWVudFN0b3JlLmxlbmd0aCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LiRzdHIoJ3doZW4nKSkgeyAvLyBHdWFyZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kID0gZXhwZWN0KHBhcnNlcnMuY29uZGl0aW9ucywgJ2V4cGVjdGVkIGNvbmRpdGlvbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlc2V0ID0gcGFyc2Vycy5ibG9jaygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydWxlc2V0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLm1peGluLkRlZmluaXRpb24pKG5hbWUsIHBhcmFtcywgcnVsZXNldCwgY29uZCwgdmFyaWFkaWMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgcnVsZUxvb2t1cHM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBydWxlOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvb2t1cHMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpICE9PSAnWycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlID0gdGhpcy5sb29rdXBWYWx1ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcnVsZSAmJiBydWxlICE9PSAnJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29rdXBzLnB1c2gocnVsZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9va3Vwcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvb2t1cHM7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGxvb2t1cFZhbHVlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCdbJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBwYXJzZXJJbnB1dC4kcmUoL14oPzpbQCRdezAsMn0pW19hLXpBLVowLTktXSovKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VySW5wdXQuJGNoYXIoJ10nKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSB8fCBuYW1lID09PSAnJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEVudGl0aWVzIGFyZSB0aGUgc21hbGxlc3QgcmVjb2duaXplZCB0b2tlbiwNCiAgICAgICAgICAgICAgICAvLyBhbmQgY2FuIGJlIGZvdW5kIGluc2lkZSBhIHJ1bGUncyB2YWx1ZS4NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIGVudGl0eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXRpZXMgPSB0aGlzLmVudGl0aWVzOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb21tZW50KCkgfHwgZW50aXRpZXMubGl0ZXJhbCgpIHx8IGVudGl0aWVzLnZhcmlhYmxlKCkgfHwgZW50aXRpZXMudXJsKCkgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzLnByb3BlcnR5KCkgfHwgZW50aXRpZXMuY2FsbCgpIHx8IGVudGl0aWVzLmtleXdvcmQoKSB8fCB0aGlzLm1peGluLmNhbGwodHJ1ZSkgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzLmphdmFzY3JpcHQoKTsNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gQSBEZWNsYXJhdGlvbiB0ZXJtaW5hdG9yLiBOb3RlIHRoYXQgd2UgdXNlIGBwZWVrKClgIHRvIGNoZWNrIGZvciAnfScsDQogICAgICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGUgYGJsb2NrYCBydWxlIHdpbGwgYmUgZXhwZWN0aW5nIGl0LCBidXQgd2Ugc3RpbGwgbmVlZCB0byBtYWtlIHN1cmUNCiAgICAgICAgICAgICAgICAvLyBpdCdzIHRoZXJlLCBpZiAnOycgd2FzIG9taXR0ZWQuDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBlbmQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlcklucHV0LiRjaGFyKCc7JykgfHwgcGFyc2VySW5wdXQucGVlaygnfScpOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBJRSdzIGFscGhhIGZ1bmN0aW9uDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyAgICAgYWxwaGEob3BhY2l0eT04OCkNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIGllQWxwaGE6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jYXNlLWluc2Vuc2l0aXZlLXJlZ2V4LXZzLXN0cnRvbG93ZXItdGhlbi1yZWdleC8xOA0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRyZSgvXm9wYWNpdHk9L2kpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZXJJbnB1dC4kcmUoL15cZCsvKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBleHBlY3QocGFyc2Vycy5lbnRpdGllcy52YXJpYWJsZSwgJ0NvdWxkIG5vdCBwYXJzZSBhbHBoYScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAiQHsiICsgdmFsdWUubmFtZS5zbGljZSgxKSArICJ9IjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBleHBlY3RDaGFyKCcpJyk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdHJlZS5RdW90ZWQoJycsICJhbHBoYShvcGFjaXR5PSIgKyB2YWx1ZSArICIpIik7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEEgU2VsZWN0b3IgRWxlbWVudA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gICAgIGRpdg0KICAgICAgICAgICAgICAgIC8vICAgICArIGgxDQogICAgICAgICAgICAgICAgLy8gICAgICNzb2Nrcw0KICAgICAgICAgICAgICAgIC8vICAgICBpbnB1dFt0eXBlPSJ0ZXh0Il0NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEVsZW1lbnRzIGFyZSB0aGUgYnVpbGRpbmcgYmxvY2tzIGZvciBTZWxlY3RvcnMsDQogICAgICAgICAgICAgICAgLy8gdGhleSBhcmUgbWFkZSBvdXQgb2YgYSBgQ29tYmluYXRvcmAgKHNlZSBjb21iaW5hdG9yIHJ1bGUpLA0KICAgICAgICAgICAgICAgIC8vIGFuZCBhbiBlbGVtZW50IG5hbWUsIHN1Y2ggYXMgYSB0YWcgYSBjbGFzcywgb3IgYCpgLg0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgZWxlbWVudDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGM7DQogICAgICAgICAgICAgICAgICAgIHZhciB2Ow0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICBjID0gdGhpcy5jb21iaW5hdG9yKCk7DQogICAgICAgICAgICAgICAgICAgIGUgPSBwYXJzZXJJbnB1dC4kcmUoL14oPzpcZCtcLlxkK3xcZCspJS8pIHx8DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC4kcmUoL14oPzpbLiNdP3w6KikoPzpbXHctXXxbXlx4MDAtXHg5Zl18XFwoPzpbQS1GYS1mMC05XXsxLDZ9ID98W15BLUZhLWYwLTldKSkrLykgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LiRjaGFyKCcqJykgfHwgcGFyc2VySW5wdXQuJGNoYXIoJyYnKSB8fCB0aGlzLmF0dHJpYnV0ZSgpIHx8DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC4kcmUoL15cKFteJigpQF0rXCkvKSB8fCBwYXJzZXJJbnB1dC4kcmUoL15bXC4jOl0oPz1AKS8pIHx8DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVudGl0aWVzLnZhcmlhYmxlQ3VybHkoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJygnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodiA9IHRoaXMuc2VsZWN0b3IoZmFsc2UpKSAmJiBwYXJzZXJJbnB1dC4kY2hhcignKScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBuZXcgKHRyZWUuUGFyZW4pKHYpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoJ01pc3NpbmcgY2xvc2luZyBcJylcJycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLkVsZW1lbnQpKGMsIGUsIGUgaW5zdGFuY2VvZiB0cmVlLlZhcmlhYmxlLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIENvbWJpbmF0b3JzIGNvbWJpbmUgZWxlbWVudHMgdG9nZXRoZXIsIGluIGEgU2VsZWN0b3IuDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBCZWNhdXNlIG91ciBwYXJzZXIgaXNuJ3Qgd2hpdGUtc3BhY2Ugc2Vuc2l0aXZlLCBzcGVjaWFsIGNhcmUNCiAgICAgICAgICAgICAgICAvLyBoYXMgdG8gYmUgdGFrZW4sIHdoZW4gcGFyc2luZyB0aGUgZGVzY2VuZGFudCBjb21iaW5hdG9yLCBgIGAsDQogICAgICAgICAgICAgICAgLy8gYXMgaXQncyBhbiBlbXB0eSBzcGFjZS4gV2UgaGF2ZSB0byBjaGVjayB0aGUgcHJldmlvdXMgY2hhcmFjdGVyDQogICAgICAgICAgICAgICAgLy8gaW4gdGhlIGlucHV0LCB0byBzZWUgaWYgaXQncyBhIGAgYCBjaGFyYWN0ZXIuIE1vcmUgaW5mbyBvbiBob3cNCiAgICAgICAgICAgICAgICAvLyB3ZSBkZWFsIHdpdGggdGhpcyBpbiAqY29tYmluYXRvci5qcyouDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBjb21iaW5hdG9yOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBjID0gcGFyc2VySW5wdXQuY3VycmVudENoYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09ICcvJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNsYXNoZWRDb21iaW5hdG9yID0gcGFyc2VySW5wdXQuJHJlKC9eXC9bYS16XStcLy9pKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbGFzaGVkQ29tYmluYXRvcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuQ29tYmluYXRvcikoc2xhc2hlZENvbWJpbmF0b3IpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChjID09PSAnPicgfHwgYyA9PT0gJysnIHx8IGMgPT09ICd+JyB8fCBjID09PSAnfCcgfHwgYyA9PT0gJ14nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5pKys7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gJ14nICYmIHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCkgPT09ICdeJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSAnXl4nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmkrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChwYXJzZXJJbnB1dC5pc1doaXRlc3BhY2UoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmkrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuQ29tYmluYXRvcikoYyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VySW5wdXQuaXNXaGl0ZXNwYWNlKC0xKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5Db21iaW5hdG9yKSgnICcpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5Db21iaW5hdG9yKShudWxsKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBBIENTUyBTZWxlY3Rvcg0KICAgICAgICAgICAgICAgIC8vIHdpdGggbGVzcyBleHRlbnNpb25zIGUuZy4gdGhlIGFiaWxpdHkgdG8gZXh0ZW5kIGFuZCBndWFyZA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gICAgIC5jbGFzcyA+IGRpdiArIGgxDQogICAgICAgICAgICAgICAgLy8gICAgIGxpIGE6aG92ZXINCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIFNlbGVjdG9ycyBhcmUgbWFkZSBvdXQgb2Ygb25lIG9yIG1vcmUgRWxlbWVudHMsIHNlZSBhYm92ZS4NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBmdW5jdGlvbiAoaXNMZXNzKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50czsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dGVuZExpc3Q7DQogICAgICAgICAgICAgICAgICAgIHZhciBjOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFsbEV4dGVuZHM7DQogICAgICAgICAgICAgICAgICAgIHZhciB3aGVuOw0KICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uOw0KICAgICAgICAgICAgICAgICAgICBpc0xlc3MgPSBpc0xlc3MgIT09IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKGlzTGVzcyAmJiAoZXh0ZW5kTGlzdCA9IHRoaXMuZXh0ZW5kKCkpKSB8fCAoaXNMZXNzICYmICh3aGVuID0gcGFyc2VySW5wdXQuJHN0cignd2hlbicpKSkgfHwgKGUgPSB0aGlzLmVsZW1lbnQoKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aGVuKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uID0gZXhwZWN0KHRoaXMuY29uZGl0aW9ucywgJ2V4cGVjdGVkIGNvbmRpdGlvbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY29uZGl0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoJ0NTUyBndWFyZCBjYW4gb25seSBiZSB1c2VkIGF0IHRoZSBlbmQgb2Ygc2VsZWN0b3InKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV4dGVuZExpc3QpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWxsRXh0ZW5kcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxFeHRlbmRzID0gYWxsRXh0ZW5kcy5jb25jYXQoZXh0ZW5kTGlzdCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxFeHRlbmRzID0gZXh0ZW5kTGlzdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWxsRXh0ZW5kcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcignRXh0ZW5kIGNhbiBvbmx5IGJlIHVzZWQgYXQgdGhlIGVuZCBvZiBzZWxlY3RvcicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gcGFyc2VySW5wdXQuY3VycmVudENoYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMucHVzaChlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gW2VdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID09PSAneycgfHwgYyA9PT0gJ30nIHx8IGMgPT09ICc7JyB8fCBjID09PSAnLCcgfHwgYyA9PT0gJyknKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLlNlbGVjdG9yKShlbGVtZW50cywgYWxsRXh0ZW5kcywgY29uZGl0aW9uLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChhbGxFeHRlbmRzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcignRXh0ZW5kIG11c3QgYmUgdXNlZCB0byBleHRlbmQgYSBzZWxlY3RvciwgaXQgY2Fubm90IGJlIHVzZWQgb24gaXRzIG93bicpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBzZWxlY3RvcnM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHM7DQogICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvcnM7DQogICAgICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzID0gdGhpcy5zZWxlY3RvcigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3JzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JzLnB1c2gocyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcnMgPSBbc107DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUubGVuZ3RoID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLmNvbmRpdGlvbiAmJiBzZWxlY3RvcnMubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCJHdWFyZHMgYXJlIG9ubHkgY3VycmVudGx5IGFsbG93ZWQgb24gYSBzaW5nbGUgc2VsZWN0b3IuIik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcsJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLmNvbmRpdGlvbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCJHdWFyZHMgYXJlIG9ubHkgY3VycmVudGx5IGFsbG93ZWQgb24gYSBzaW5nbGUgc2VsZWN0b3IuIik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUubGVuZ3RoID0gMDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0b3JzOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgYXR0cmlidXRlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VySW5wdXQuJGNoYXIoJ1snKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdGllcyA9IHRoaXMuZW50aXRpZXM7DQogICAgICAgICAgICAgICAgICAgIHZhciBrZXk7DQogICAgICAgICAgICAgICAgICAgIHZhciB2YWw7DQogICAgICAgICAgICAgICAgICAgIHZhciBvcDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCEoa2V5ID0gZW50aXRpZXMudmFyaWFibGVDdXJseSgpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gZXhwZWN0KC9eKD86W19BLVphLXowLTktXCpdKlx8KT8oPzpbX0EtWmEtejAtOS1dfFxcLikrLyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgb3AgPSBwYXJzZXJJbnB1dC4kcmUoL15bfH4qJF5dPz0vKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9wKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBlbnRpdGllcy5xdW90ZWQoKSB8fCBwYXJzZXJJbnB1dC4kcmUoL15bMC05XSslLykgfHwgcGFyc2VySW5wdXQuJHJlKC9eW1x3LV0rLykgfHwgZW50aXRpZXMudmFyaWFibGVDdXJseSgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGV4cGVjdENoYXIoJ10nKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5BdHRyaWJ1dGUpKGtleSwgb3AsIHZhbCk7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIFRoZSBgYmxvY2tgIHJ1bGUgaXMgdXNlZCBieSBgcnVsZXNldGAgYW5kIGBtaXhpbi5kZWZpbml0aW9uYC4NCiAgICAgICAgICAgICAgICAvLyBJdCdzIGEgd3JhcHBlciBhcm91bmQgdGhlIGBwcmltYXJ5YCBydWxlLCB3aXRoIGFkZGVkIGB7fWAuDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBibG9jazogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LiRjaGFyKCd7JykgJiYgKGNvbnRlbnQgPSB0aGlzLnByaW1hcnkoKSkgJiYgcGFyc2VySW5wdXQuJGNoYXIoJ30nKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGJsb2NrUnVsZXNldDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSB0aGlzLmJsb2NrKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChibG9jaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgPSBuZXcgdHJlZS5SdWxlc2V0KG51bGwsIGJsb2NrKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmxvY2s7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBkZXRhY2hlZFJ1bGVzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ0luZm87DQogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXM7DQogICAgICAgICAgICAgICAgICAgIHZhciB2YXJpYWRpYzsNCiAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJHJlKC9eWy4jXVwoLykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICAgICAgICAgICAgICogRFIgYXJncyBjdXJyZW50bHkgb25seSBpbXBsZW1lbnRlZCBmb3IgZWFjaCgpIGZ1bmN0aW9uLCBhbmQgbm90DQogICAgICAgICAgICAgICAgICAgICAgICAgKiB5ZXQgc2V0dGFibGUgYXMgYEBkcjogIyhAYXJnKSB7fWANCiAgICAgICAgICAgICAgICAgICAgICAgICAqIFRoaXMgc2hvdWxkIGJlIGRvbmUgd2hlbiBEUnMgYXJlIG1lcmdlZCB3aXRoIG1peGlucy4NCiAgICAgICAgICAgICAgICAgICAgICAgICAqIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2xlc3MvbGVzcy1tZXRhL2lzc3Vlcy8xNg0KICAgICAgICAgICAgICAgICAgICAgICAgICovDQogICAgICAgICAgICAgICAgICAgICAgICBhcmdJbmZvID0gdGhpcy5taXhpbi5hcmdzKGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IGFyZ0luZm8uYXJnczsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhZGljID0gYXJnSW5mby52YXJpYWRpYzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VySW5wdXQuJGNoYXIoJyknKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrUnVsZXNldCA9IHRoaXMuYmxvY2tSdWxlc2V0KCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChibG9ja1J1bGVzZXQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdHJlZS5taXhpbi5EZWZpbml0aW9uKG51bGwsIHBhcmFtcywgYmxvY2tSdWxlc2V0LCBudWxsLCB2YXJpYWRpYyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRyZWUuRGV0YWNoZWRSdWxlc2V0KGJsb2NrUnVsZXNldCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBkaXYsIC5jbGFzcywgYm9keSA+IHAgey4uLn0NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIHJ1bGVzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yczsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGVzOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZGVidWdJbmZvOw0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LmR1bXBMaW5lTnVtYmVycykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdJbmZvID0gZ2V0RGVidWdJbmZvKHBhcnNlcklucHV0LmkpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHNlbGVjdG9ycyA9IHRoaXMuc2VsZWN0b3JzKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RvcnMgJiYgKHJ1bGVzID0gdGhpcy5ibG9jaygpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZXNldCA9IG5ldyAodHJlZS5SdWxlc2V0KShzZWxlY3RvcnMsIHJ1bGVzLCBjb250ZXh0LnN0cmljdEltcG9ydHMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuZHVtcExpbmVOdW1iZXJzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXNldC5kZWJ1Z0luZm8gPSBkZWJ1Z0luZm87DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnVsZXNldDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgZGVjbGFyYXRpb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWU7DQogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGhhc0RSOw0KICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCk7DQogICAgICAgICAgICAgICAgICAgIHZhciBpbXBvcnRhbnQ7DQogICAgICAgICAgICAgICAgICAgIHZhciBtZXJnZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzVmFyaWFibGU7DQogICAgICAgICAgICAgICAgICAgIGlmIChjID09PSAnLicgfHwgYyA9PT0gJyMnIHx8IGMgPT09ICcmJyB8fCBjID09PSAnOicpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgIG5hbWUgPSB0aGlzLnZhcmlhYmxlKCkgfHwgdGhpcy5ydWxlUHJvcGVydHkoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFyaWFibGUgPSB0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZyc7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNWYXJpYWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5kZXRhY2hlZFJ1bGVzZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzRFIgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmNvbW1lbnRTdG9yZS5sZW5ndGggPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgbmFtZSByZXR1cm5lZCBieSB0aGlzLnJ1bGVQcm9wZXJ0eSgpIGlzIGFsd2F5cyBhbiBhcnJheSBvZiB0aGUgZm9ybToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBbc3RyaW5nLTEsIC4uLiwgc3RyaW5nLW4sICIiXSBvciBbc3RyaW5nLTEsIC4uLiwgc3RyaW5nLW4sICIrIl0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVyZSBlYWNoIGl0ZW0gaXMgYSB0cmVlLktleXdvcmQgb3IgdHJlZS5WYXJpYWJsZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlID0gIWlzVmFyaWFibGUgJiYgbmFtZS5sZW5ndGggPiAxICYmIG5hbWUucG9wKCkudmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3VzdG9tIHByb3BlcnR5IHZhbHVlcyBnZXQgcGVybWlzc2l2ZSBwYXJzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWVbMF0udmFsdWUgJiYgbmFtZVswXS52YWx1ZS5zbGljZSgwLCAyKSA9PT0gJy0tJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMucGVybWlzc2l2ZVZhbHVlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeSB0byBzdG9yZSB2YWx1ZXMgYXMgYW5vbnltb3VzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgbmVlZCB0aGUgdmFsdWUgbGF0ZXIgd2UnbGwgcmUtcGFyc2UgaXQgaW4gcnVsZXNldC5wYXJzZVZhbHVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5hbm9ueW1vdXNWYWx1ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFub255bW91cyB2YWx1ZXMgYWJzb3JiIHRoZSBlbmQgJzsnIHdoaWNoIGlzIHJlcXVpcmVkIGZvciB0aGVtIHRvIHdvcmsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5EZWNsYXJhdGlvbikobmFtZSwgdmFsdWUsIGZhbHNlLCBtZXJnZSwgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMudmFsdWUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydGFudCA9IHRoaXMuaW1wb3J0YW50KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzVmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXMgYSBsYXN0IHJlc29ydCwgdHJ5IHBlcm1pc3NpdmVWYWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMucGVybWlzc2l2ZVZhbHVlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICYmICh0aGlzLmVuZCgpIHx8IGhhc0RSKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuRGVjbGFyYXRpb24pKG5hbWUsIHZhbHVlLCBpbXBvcnRhbnQsIG1lcmdlLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBhbm9ueW1vdXNWYWx1ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBwYXJzZXJJbnB1dC4kcmUoL14oW14uI0BcJCtcLyciKmAoO3t9LV0qKTsvKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLkFub255bW91cykobWF0Y2hbMV0sIGluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgICAgICogVXNlZCBmb3IgY3VzdG9tIHByb3BlcnRpZXMsIGF0LXJ1bGVzLCBhbmQgdmFyaWFibGVzIChhcyBmYWxsYmFjaykNCiAgICAgICAgICAgICAgICAgKiBQYXJzZXMgYWxtb3N0IGFueXRoaW5nIGluc2lkZSBvZiB7fSBbXSAoKSAiIiBibG9ja3MNCiAgICAgICAgICAgICAgICAgKiB1bnRpbCBpdCByZWFjaGVzIG91dGVyLW1vc3QgdG9rZW5zLg0KICAgICAgICAgICAgICAgICAqDQogICAgICAgICAgICAgICAgICogRmlyc3QsIGl0IHdpbGwgdHJ5IHRvIHBhcnNlIGNvbW1lbnRzIGFuZCBlbnRpdGllcyB0byByZWFjaA0KICAgICAgICAgICAgICAgICAqIHRoZSBlbmQuIFRoaXMgaXMgbW9zdGx5IGxpa2UgdGhlIEV4cHJlc3Npb24gcGFyc2VyIGV4Y2VwdCBubw0KICAgICAgICAgICAgICAgICAqIG1hdGggaXMgYWxsb3dlZC4NCiAgICAgICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICAgICBwZXJtaXNzaXZlVmFsdWU6IGZ1bmN0aW9uICh1bnRpbFRva2Vucykgew0KICAgICAgICAgICAgICAgICAgICB2YXIgaTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGU7DQogICAgICAgICAgICAgICAgICAgIHZhciBkb25lOw0KICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHZhciB0b2sgPSB1bnRpbFRva2VucyB8fCAnOyc7DQogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdGVzdEN1cnJlbnRDaGFyKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXIgPSBwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2sgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYXIgPT09IHRvazsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b2sudGVzdChjaGFyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAodGVzdEN1cnJlbnRDaGFyKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICBkbyB7DQogICAgICAgICAgICAgICAgICAgICAgICBlID0gdGhpcy5jb21tZW50KCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2goZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlID0gdGhpcy5lbnRpdHkoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaChlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoZSk7DQogICAgICAgICAgICAgICAgICAgIGRvbmUgPSB0ZXN0Q3VycmVudENoYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3ICh0cmVlLkV4cHJlc3Npb24pKHZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb25lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlc2VydmUgc3BhY2UgYmVmb3JlICRwYXJzZVVudGlsIGFzIGl0IHdpbGwgbm90DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQucHJldkNoYXIoKSA9PT0gJyAnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IHRyZWUuQW5vbnltb3VzKCcgJywgaW5kZXgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyc2VySW5wdXQuJHBhcnNlVW50aWwodG9rKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCJFeHBlY3RlZCAnIiArIHZhbHVlICsgIiciLCAnUGFyc2UnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDEgJiYgdmFsdWVbMF0gPT09ICcgJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdHJlZS5Bbm9ueW1vdXMoJycsIGluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdm9pZCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IHZhbHVlW2ldOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyZWF0IGFjdHVhbCBxdW90ZXMgYXMgbm9ybWFsIHF1b3RlZCB2YWx1ZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IHRyZWUuUXVvdGVkKGl0ZW1bMF0sIGl0ZW1bMV0sIHRydWUsIGluZGV4LCBmaWxlSW5mbykpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IHZhbHVlLmxlbmd0aCAtIDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmVhdCBsaWtlIHF1b3RlZCB2YWx1ZXMsIGJ1dCByZXBsYWNlIHZhcnMgbGlrZSB1bnF1b3RlZCBleHByZXNzaW9ucw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcXVvdGUgPSBuZXcgdHJlZS5RdW90ZWQoJ1wnJywgaXRlbSwgdHJ1ZSwgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGUudmFyaWFibGVSZWdleCA9IC9AKFtcdy1dKykvZzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGUucHJvcFJlZ2V4ID0gL1wkKFtcdy1dKykvZzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocXVvdGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0cmVlLkV4cHJlc3Npb24ocmVzdWx0LCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEFuIEBpbXBvcnQgYXRydWxlDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyAgICAgQGltcG9ydCAibGliIjsNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIERlcGVuZGluZyBvbiBvdXIgZW52aXJvbm1lbnQsIGltcG9ydGluZyBpcyBkb25lIGRpZmZlcmVudGx5Og0KICAgICAgICAgICAgICAgIC8vIEluIHRoZSBicm93c2VyLCBpdCdzIGFuIFhIUiByZXF1ZXN0LCBpbiBOb2RlLCBpdCB3b3VsZCBiZSBhDQogICAgICAgICAgICAgICAgLy8gZmlsZS1zeXN0ZW0gb3BlcmF0aW9uLiBUaGUgZnVuY3Rpb24gdXNlZCBmb3IgaW1wb3J0aW5nIGlzDQogICAgICAgICAgICAgICAgLy8gc3RvcmVkIGluIGBpbXBvcnRgLCB3aGljaCB3ZSBwYXNzIHRvIHRoZSBJbXBvcnQgY29uc3RydWN0b3IuDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAnaW1wb3J0JzogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGZlYXR1cmVzOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZGlyID0gcGFyc2VySW5wdXQuJHJlKC9eQGltcG9ydD9ccysvKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRpcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAoZGlyID8gdGhpcy5pbXBvcnRPcHRpb25zKCkgOiBudWxsKSB8fCB7fTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocGF0aCA9IHRoaXMuZW50aXRpZXMucXVvdGVkKCkgfHwgdGhpcy5lbnRpdGllcy51cmwoKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcyA9IHRoaXMubWVkaWFGZWF0dXJlcygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VySW5wdXQuJGNoYXIoJzsnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5pID0gaW5kZXg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCdtaXNzaW5nIHNlbWktY29sb24gb3IgdW5yZWNvZ25pc2VkIG1lZGlhIGZlYXR1cmVzIG9uIGltcG9ydCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcyA9IGZlYXR1cmVzICYmIG5ldyAodHJlZS5WYWx1ZSkoZmVhdHVyZXMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuSW1wb3J0KShwYXRoLCBmZWF0dXJlcywgb3B0aW9ucywgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmkgPSBpbmRleDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcignbWFsZm9ybWVkIGltcG9ydCBzdGF0ZW1lbnQnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgaW1wb3J0T3B0aW9uczogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbzsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbk5hbWU7DQogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgLy8gbGlzdCBvZiBvcHRpb25zLCBzdXJyb3VuZGVkIGJ5IHBhcmVucw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcoJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGRvIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0aGlzLmltcG9ydE9wdGlvbigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25OYW1lID0gbzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvcHRpb25OYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nzcyc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25OYW1lID0gJ2xlc3MnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdvbmNlJzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbk5hbWUgPSAnbXVsdGlwbGUnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zW29wdGlvbk5hbWVdID0gdmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC4kY2hhcignLCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAobyk7DQogICAgICAgICAgICAgICAgICAgIGV4cGVjdENoYXIoJyknKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBpbXBvcnRPcHRpb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdCA9IHBhcnNlcklucHV0LiRyZSgvXihsZXNzfGNzc3xtdWx0aXBsZXxvbmNlfGlubGluZXxyZWZlcmVuY2V8b3B0aW9uYWwpLyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChvcHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRbMV07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIG1lZGlhRmVhdHVyZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXRpZXMgPSB0aGlzLmVudGl0aWVzOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZXMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGU7DQogICAgICAgICAgICAgICAgICAgIHZhciBwOw0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgIGRvIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlbnRpdGllcy5rZXl3b3JkKCkgfHwgZW50aXRpZXMudmFyaWFibGUoKSB8fCBlbnRpdGllcy5taXhpbkxvb2t1cCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VySW5wdXQuJGNoYXIoJygnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB0aGlzLnByb3BlcnR5KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHRoaXMudmFsdWUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJyknKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocCAmJiBlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG5ldyAodHJlZS5QYXJlbikobmV3ICh0cmVlLkRlY2xhcmF0aW9uKShwLCBlLCBudWxsLCBudWxsLCBwYXJzZXJJbnB1dC5pLCBmaWxlSW5mbywgdHJ1ZSkpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG5ldyAodHJlZS5QYXJlbikoZSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoJ2JhZGx5IGZvcm1lZCBtZWRpYSBmZWF0dXJlIGRlZmluaXRpb24nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoJ01pc3NpbmcgY2xvc2luZyBcJylcJycsICdQYXJzZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoZSk7DQogICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAobm9kZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyAodHJlZS5FeHByZXNzaW9uKShub2Rlcyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIG1lZGlhRmVhdHVyZXM6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0aWVzID0gdGhpcy5lbnRpdGllczsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGZlYXR1cmVzID0gW107DQogICAgICAgICAgICAgICAgICAgIHZhciBlOw0KICAgICAgICAgICAgICAgICAgICBkbyB7DQogICAgICAgICAgICAgICAgICAgICAgICBlID0gdGhpcy5tZWRpYUZlYXR1cmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMucHVzaChlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcsJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGVudGl0aWVzLnZhcmlhYmxlKCkgfHwgZW50aXRpZXMubWl4aW5Mb29rdXAoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcsJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChlKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmVzLmxlbmd0aCA+IDAgPyBmZWF0dXJlcyA6IG51bGw7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBtZWRpYTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZmVhdHVyZXM7DQogICAgICAgICAgICAgICAgICAgIHZhciBydWxlczsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG1lZGlhOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZGVidWdJbmZvOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5kdW1wTGluZU51bWJlcnMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnSW5mbyA9IGdldERlYnVnSW5mbyhpbmRleCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJHN0cignQG1lZGlhJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzID0gdGhpcy5tZWRpYUZlYXR1cmVzKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBydWxlcyA9IHRoaXMuYmxvY2soKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcnVsZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcignbWVkaWEgZGVmaW5pdGlvbnMgcmVxdWlyZSBibG9jayBzdGF0ZW1lbnRzIGFmdGVyIGFueSBmZWF0dXJlcycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICBtZWRpYSA9IG5ldyAodHJlZS5NZWRpYSkocnVsZXMsIGZlYXR1cmVzLCBpbmRleCwgZmlsZUluZm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuZHVtcExpbmVOdW1iZXJzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEuZGVidWdJbmZvID0gZGVidWdJbmZvOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1lZGlhOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gQSBAcGx1Z2luIGRpcmVjdGl2ZSwgdXNlZCB0byBpbXBvcnQgcGx1Z2lucyBkeW5hbWljYWxseS4NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vICAgICBAcGx1Z2luIChhcmdzKSAibGliIjsNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIHBsdWdpbjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3M7DQogICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZGlyID0gcGFyc2VySW5wdXQuJHJlKC9eQHBsdWdpbj9ccysvKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRpcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IHRoaXMucGx1Z2luQXJncygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5BcmdzOiBhcmdzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1BsdWdpbjogdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0geyBpc1BsdWdpbjogdHJ1ZSB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChwYXRoID0gdGhpcy5lbnRpdGllcy5xdW90ZWQoKSB8fCB0aGlzLmVudGl0aWVzLnVybCgpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VySW5wdXQuJGNoYXIoJzsnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5pID0gaW5kZXg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCdtaXNzaW5nIHNlbWktY29sb24gb24gQHBsdWdpbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLkltcG9ydCkocGF0aCwgbnVsbCwgb3B0aW9ucywgaW5kZXgsIGZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmkgPSBpbmRleDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcignbWFsZm9ybWVkIEBwbHVnaW4gc3RhdGVtZW50Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHBsdWdpbkFyZ3M6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gbGlzdCBvZiBvcHRpb25zLCBzdXJyb3VuZGVkIGJ5IHBhcmVucw0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5zYXZlKCk7DQogICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VySW5wdXQuJGNoYXIoJygnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBwYXJzZXJJbnB1dC4kcmUoL15ccyooW15cKTtdKylcKVxzKi8pOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYXJnc1sxXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnc1sxXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBBIENTUyBBdFJ1bGUNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vICAgICBAY2hhcnNldCAidXRmLTgiOw0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgYXRydWxlOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgIHZhciBuYW1lOw0KICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWU7DQogICAgICAgICAgICAgICAgICAgIHZhciBydWxlczsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG5vblZlbmRvclNwZWNpZmljTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGhhc0lkZW50aWZpZXI7DQogICAgICAgICAgICAgICAgICAgIHZhciBoYXNFeHByZXNzaW9uOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaGFzVW5rbm93bjsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGhhc0Jsb2NrID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzUm9vdGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LmN1cnJlbnRDaGFyKCkgIT09ICdAJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpc1snaW1wb3J0J10oKSB8fCB0aGlzLnBsdWdpbigpIHx8IHRoaXMubWVkaWEoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICBuYW1lID0gcGFyc2VySW5wdXQuJHJlKC9eQFthLXotXSsvKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFuYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgbm9uVmVuZG9yU3BlY2lmaWNOYW1lID0gbmFtZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDEpID09ICctJyAmJiBuYW1lLmluZGV4T2YoJy0nLCAyKSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5vblZlbmRvclNwZWNpZmljTmFtZSA9ICJAIiArIG5hbWUuc2xpY2UobmFtZS5pbmRleE9mKCctJywgMikgKyAxKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vblZlbmRvclNwZWNpZmljTmFtZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQGNoYXJzZXQnOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0lkZW50aWZpZXIgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0Jsb2NrID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdAbmFtZXNwYWNlJzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNFeHByZXNzaW9uID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNCbG9jayA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQGtleWZyYW1lcyc6DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdAY291bnRlci1zdHlsZSc6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzSWRlbnRpZmllciA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdAZG9jdW1lbnQnOg0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQHN1cHBvcnRzJzoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNVbmtub3duID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Jvb3RlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNVbmtub3duID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5jb21tZW50U3RvcmUubGVuZ3RoID0gMDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0lkZW50aWZpZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5lbnRpdHkoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcigiZXhwZWN0ZWQgIiArIG5hbWUgKyAiIGlkZW50aWZpZXIiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChoYXNFeHByZXNzaW9uKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZXhwcmVzc2lvbigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKCJleHBlY3RlZCAiICsgbmFtZSArICIgZXhwcmVzc2lvbiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhhc1Vua25vd24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5wZXJtaXNzaXZlVmFsdWUoL15beztdLyk7DQogICAgICAgICAgICAgICAgICAgICAgICBoYXNCbG9jayA9IChwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpID09PSAneycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGFzQmxvY2sgJiYgcGFyc2VySW5wdXQuY3VycmVudENoYXIoKSAhPT0gJzsnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKG5hbWUgKyAiIHJ1bGUgaXMgbWlzc2luZyBibG9jayBvciBlbmRpbmcgc2VtaS1jb2xvbiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF2YWx1ZS52YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoaGFzQmxvY2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzID0gdGhpcy5ibG9ja1J1bGVzZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAocnVsZXMgfHwgKCFoYXNCbG9jayAmJiB2YWx1ZSAmJiBwYXJzZXJJbnB1dC4kY2hhcignOycpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3ICh0cmVlLkF0UnVsZSkobmFtZSwgdmFsdWUsIHJ1bGVzLCBpbmRleCwgZmlsZUluZm8sIGNvbnRleHQuZHVtcExpbmVOdW1iZXJzID8gZ2V0RGVidWdJbmZvKGluZGV4KSA6IG51bGwsIGlzUm9vdGVkKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCdhdC1ydWxlIG9wdGlvbnMgbm90IHJlY29nbmlzZWQnKTsNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gQSBWYWx1ZSBpcyBhIGNvbW1hLWRlbGltaXRlZCBsaXN0IG9mIEV4cHJlc3Npb25zDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyAgICAgZm9udC1mYW1pbHk6IEJhc2tlcnZpbGxlLCBHZW9yZ2lhLCBzZXJpZjsNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEluIGEgUnVsZSwgYSBWYWx1ZSByZXByZXNlbnRzIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGA6YCwNCiAgICAgICAgICAgICAgICAvLyBhbmQgYmVmb3JlIHRoZSBgO2AuDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGV4cHJlc3Npb25zID0gW107DQogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgIGRvIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB0aGlzLmV4cHJlc3Npb24oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbnMucHVzaChlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcsJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChlKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cHJlc3Npb25zLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuVmFsdWUpKGV4cHJlc3Npb25zLCBpbmRleCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGltcG9ydGFudDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuY3VycmVudENoYXIoKSA9PT0gJyEnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VySW5wdXQuJHJlKC9eISAqaW1wb3J0YW50Lyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHN1YjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgYTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGU7DQogICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LiRjaGFyKCcoJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLmFkZGl0aW9uKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSAmJiBwYXJzZXJJbnB1dC4kY2hhcignKScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IG5ldyAodHJlZS5FeHByZXNzaW9uKShbYV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucGFyZW5zID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoJ0V4cGVjdGVkIFwnKVwnJyk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgbXVsdGlwbGljYXRpb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG07DQogICAgICAgICAgICAgICAgICAgIHZhciBhOw0KICAgICAgICAgICAgICAgICAgICB2YXIgb3A7DQogICAgICAgICAgICAgICAgICAgIHZhciBvcGVyYXRpb247DQogICAgICAgICAgICAgICAgICAgIHZhciBpc1NwYWNlZDsNCiAgICAgICAgICAgICAgICAgICAgbSA9IHRoaXMub3BlcmFuZCgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAobSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaXNTcGFjZWQgPSBwYXJzZXJJbnB1dC5pc1doaXRlc3BhY2UoLTEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQucGVlaygvXlwvWypcL10vKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wID0gcGFyc2VySW5wdXQuJGNoYXIoJy8nKSB8fCBwYXJzZXJJbnB1dC4kY2hhcignKicpIHx8IHBhcnNlcklucHV0LiRzdHIoJy4vJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLm9wZXJhbmQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5wYXJlbnNJbk9wID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnBhcmVuc0luT3AgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbiA9IG5ldyAodHJlZS5PcGVyYXRpb24pKG9wLCBbb3BlcmF0aW9uIHx8IG0sIGFdLCBpc1NwYWNlZCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTcGFjZWQgPSBwYXJzZXJJbnB1dC5pc1doaXRlc3BhY2UoLTEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wZXJhdGlvbiB8fCBtOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBhZGRpdGlvbjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGE7DQogICAgICAgICAgICAgICAgICAgIHZhciBvcDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9wZXJhdGlvbjsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlzU3BhY2VkOw0KICAgICAgICAgICAgICAgICAgICBtID0gdGhpcy5tdWx0aXBsaWNhdGlvbigpOw0KICAgICAgICAgICAgICAgICAgICBpZiAobSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaXNTcGFjZWQgPSBwYXJzZXJJbnB1dC5pc1doaXRlc3BhY2UoLTEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcCA9IHBhcnNlcklucHV0LiRyZSgvXlstK11ccysvKSB8fCAoIWlzU3BhY2VkICYmIChwYXJzZXJJbnB1dC4kY2hhcignKycpIHx8IHBhcnNlcklucHV0LiRjaGFyKCctJykpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdGhpcy5tdWx0aXBsaWNhdGlvbigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5wYXJlbnNJbk9wID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnBhcmVuc0luT3AgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbiA9IG5ldyAodHJlZS5PcGVyYXRpb24pKG9wLCBbb3BlcmF0aW9uIHx8IG0sIGFdLCBpc1NwYWNlZCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTcGFjZWQgPSBwYXJzZXJJbnB1dC5pc1doaXRlc3BhY2UoLTEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wZXJhdGlvbiB8fCBtOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBjb25kaXRpb25zOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBhOw0KICAgICAgICAgICAgICAgICAgICB2YXIgYjsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VySW5wdXQuaTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvbjsNCiAgICAgICAgICAgICAgICAgICAgYSA9IHRoaXMuY29uZGl0aW9uKHRydWUpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LnBlZWsoL14sXHMqKG5vdFxzKik/XCgvKSB8fCAhcGFyc2VySW5wdXQuJGNoYXIoJywnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IHRoaXMuY29uZGl0aW9uKHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uID0gbmV3ICh0cmVlLkNvbmRpdGlvbikoJ29yJywgY29uZGl0aW9uIHx8IGEsIGIsIGluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25kaXRpb24gfHwgYTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgY29uZGl0aW9uOiBmdW5jdGlvbiAobmVlZHNQYXJlbnMpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGxvZ2ljYWw7DQogICAgICAgICAgICAgICAgICAgIHZhciBuZXh0Ow0KICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvcigpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXJJbnB1dC4kc3RyKCdvcicpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuY29uZGl0aW9uQW5kKG5lZWRzUGFyZW5zKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBsb2dpY2FsID0gb3IoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ2ljYWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSB0aGlzLmNvbmRpdGlvbihuZWVkc1BhcmVucyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyAodHJlZS5Db25kaXRpb24pKGxvZ2ljYWwsIHJlc3VsdCwgbmV4dCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGNvbmRpdGlvbkFuZDogZnVuY3Rpb24gKG5lZWRzUGFyZW5zKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgIHZhciBsb2dpY2FsOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOw0KICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbnNpZGVDb25kaXRpb24oKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZCA9IHNlbGYubmVnYXRlZENvbmRpdGlvbihuZWVkc1BhcmVucykgfHwgc2VsZi5wYXJlbnRoZXNpc0NvbmRpdGlvbihuZWVkc1BhcmVucyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmQgJiYgIW5lZWRzUGFyZW5zKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuYXRvbWljQ29uZGl0aW9uKG5lZWRzUGFyZW5zKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25kOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFuZCgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXJJbnB1dC4kc3RyKCdhbmQnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBpbnNpZGVDb25kaXRpb24oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBsb2dpY2FsID0gYW5kKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChsb2dpY2FsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gdGhpcy5jb25kaXRpb25BbmQobmVlZHNQYXJlbnMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgKHRyZWUuQ29uZGl0aW9uKShsb2dpY2FsLCByZXN1bHQsIG5leHQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBuZWdhdGVkQ29uZGl0aW9uOiBmdW5jdGlvbiAobmVlZHNQYXJlbnMpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LiRzdHIoJ25vdCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5wYXJlbnRoZXNpc0NvbmRpdGlvbihuZWVkc1BhcmVucyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm5lZ2F0ZSA9ICFyZXN1bHQubmVnYXRlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgcGFyZW50aGVzaXNDb25kaXRpb246IGZ1bmN0aW9uIChuZWVkc1BhcmVucykgew0KICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB0cnlDb25kaXRpb25Gb2xsb3dlZEJ5UGFyZW50aGVzaXMobWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib2R5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keSA9IG1lLmNvbmRpdGlvbihuZWVkc1BhcmVucyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWJvZHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC4kY2hhcignKScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQucmVzdG9yZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJvZHk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdmFyIGJvZHk7DQogICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnNhdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC4kc3RyKCcoJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBib2R5ID0gdHJ5Q29uZGl0aW9uRm9sbG93ZWRCeVBhcmVudGhlc2lzKHRoaXMpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYm9keSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuZm9yZ2V0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYm9keTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBib2R5ID0gdGhpcy5hdG9taWNDb25kaXRpb24obmVlZHNQYXJlbnMpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWJvZHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlcklucHV0LiRjaGFyKCcpJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LnJlc3RvcmUoImV4cGVjdGVkICcpJyBnb3QgJyIgKyBwYXJzZXJJbnB1dC5jdXJyZW50Q2hhcigpICsgIiciKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJvZHk7DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBhdG9taWNDb25kaXRpb246IGZ1bmN0aW9uIChuZWVkc1BhcmVucykgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXRpZXMgPSB0aGlzLmVudGl0aWVzOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZXJJbnB1dC5pOw0KICAgICAgICAgICAgICAgICAgICB2YXIgYTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGI7DQogICAgICAgICAgICAgICAgICAgIHZhciBjOw0KICAgICAgICAgICAgICAgICAgICB2YXIgb3A7DQogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbmQoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRpdGlvbigpIHx8IGVudGl0aWVzLmtleXdvcmQoKSB8fCBlbnRpdGllcy5xdW90ZWQoKSB8fCBlbnRpdGllcy5taXhpbkxvb2t1cCgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNvbmQgPSBjb25kLmJpbmQodGhpcyk7DQogICAgICAgICAgICAgICAgICAgIGEgPSBjb25kKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJz4nKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC4kY2hhcignPScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wID0gJz49JzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wID0gJz4nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlcklucHV0LiRjaGFyKCc8JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VySW5wdXQuJGNoYXIoJz0nKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcCA9ICc8PSc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcCA9ICc8JzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJzZXJJbnB1dC4kY2hhcignPScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlcklucHV0LiRjaGFyKCc+JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3AgPSAnPT4nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJzZXJJbnB1dC4kY2hhcignPCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wID0gJz08JzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wID0gJz0nOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBjb25kKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IG5ldyAodHJlZS5Db25kaXRpb24pKG9wLCBhLCBiLCBpbmRleCwgZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoJ2V4cGVjdGVkIGV4cHJlc3Npb24nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbmV3ICh0cmVlLkNvbmRpdGlvbikoJz0nLCBhLCBuZXcgKHRyZWUuS2V5d29yZCkoJ3RydWUnKSwgaW5kZXgsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vIEFuIG9wZXJhbmQgaXMgYW55dGhpbmcgdGhhdCBjYW4gYmUgcGFydCBvZiBhbiBvcGVyYXRpb24sDQogICAgICAgICAgICAgICAgLy8gc3VjaCBhcyBhIENvbG9yLCBvciBhIFZhcmlhYmxlDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICBvcGVyYW5kOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdGllcyA9IHRoaXMuZW50aXRpZXM7DQogICAgICAgICAgICAgICAgICAgIHZhciBuZWdhdGU7DQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZXJJbnB1dC5wZWVrKC9eLVtAXCRcKF0vKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbmVnYXRlID0gcGFyc2VySW5wdXQuJGNoYXIoJy0nKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRoaXMuc3ViKCkgfHwgZW50aXRpZXMuZGltZW5zaW9uKCkgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzLmNvbG9yKCkgfHwgZW50aXRpZXMudmFyaWFibGUoKSB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgZW50aXRpZXMucHJvcGVydHkoKSB8fCBlbnRpdGllcy5jYWxsKCkgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzLnF1b3RlZCh0cnVlKSB8fCBlbnRpdGllcy5jb2xvcktleXdvcmQoKSB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgZW50aXRpZXMubWl4aW5Mb29rdXAoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5lZ2F0ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgby5wYXJlbnNJbk9wID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBuZXcgKHRyZWUuTmVnYXRpdmUpKG8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBvOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBFeHByZXNzaW9ucyBlaXRoZXIgcmVwcmVzZW50IG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zLA0KICAgICAgICAgICAgICAgIC8vIG9yIHdoaXRlLXNwYWNlIGRlbGltaXRlZCBFbnRpdGllcy4NCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vICAgICAxcHggc29saWQgYmxhY2sNCiAgICAgICAgICAgICAgICAvLyAgICAgQHZhciAqIDINCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0aWVzID0gW107DQogICAgICAgICAgICAgICAgICAgIHZhciBlOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZGVsaW07DQogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgIGRvIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB0aGlzLmNvbW1lbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXRpZXMucHVzaChlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB0aGlzLmFkZGl0aW9uKCkgfHwgdGhpcy5lbnRpdHkoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgdHJlZS5Db21tZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0aWVzLnB1c2goZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3BlcmF0aW9ucyBkbyBub3QgYWxsb3cga2V5d29yZCAiLyIgZGltZW5zaW9uIChlLmcuIHNtYWxsLzIwcHgpIHNvIHdlIHN1cHBvcnQgdGhhdCBoZXJlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXJJbnB1dC5wZWVrKC9eXC9bXC8qXS8pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGltID0gcGFyc2VySW5wdXQuJGNoYXIoJy8nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGltKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRpdGllcy5wdXNoKG5ldyAodHJlZS5Bbm9ueW1vdXMpKGRlbGltLCBpbmRleCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChlKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0aWVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgKHRyZWUuRXhwcmVzc2lvbikoZW50aXRpZXMpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBwcm9wZXJ0eTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHBhcnNlcklucHV0LiRyZSgvXihcKj8tP1tfYS16QS1aMC05LV0rKVxzKjovKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lWzFdOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBydWxlUHJvcGVydHk6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gW107DQogICAgICAgICAgICAgICAgICAgIHZhciBzOw0KICAgICAgICAgICAgICAgICAgICB2YXIgazsNCiAgICAgICAgICAgICAgICAgICAgcGFyc2VySW5wdXQuc2F2ZSgpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgc2ltcGxlUHJvcGVydHkgPSBwYXJzZXJJbnB1dC4kcmUoL14oW19hLXpBLVowLTktXSspXHMqOi8pOw0KICAgICAgICAgICAgICAgICAgICBpZiAoc2ltcGxlUHJvcGVydHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSBbbmV3ICh0cmVlLktleXdvcmQpKHNpbXBsZVByb3BlcnR5WzFdKV07DQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5mb3JnZXQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1hdGNoKHJlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHBhcnNlcklucHV0Lmk7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2h1bmsgPSBwYXJzZXJJbnB1dC4kcmUocmUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgucHVzaChpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZS5wdXNoKGNodW5rWzFdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaCgvXihcKj8pLyk7DQogICAgICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGNoKC9eKCg/Oltcdy1dKyl8KD86W0BcJF1ce1tcdy1dK1x9KSkvKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICgobmFtZS5sZW5ndGggPiAxKSAmJiBtYXRjaCgvXigoPzpcK198XCspPylccyo6LykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlcklucHV0LmZvcmdldCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXQgbGFzdCwgd2UgaGF2ZSB0aGUgY29tcGxldGUgbWF0Y2ggbm93LiBtb3ZlIGZvcndhcmQsDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IG5hbWUgcGFydGljbGVzIHRvIHRyZWUgb2JqZWN0cyBhbmQgcmV0dXJuOg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWVbMF0gPT09ICcnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5zaGlmdCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4LnNoaWZ0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgbmFtZS5sZW5ndGg7IGsrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBuYW1lW2tdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVba10gPSAocy5jaGFyQXQoMCkgIT09ICdAJyAmJiBzLmNoYXJBdCgwKSAhPT0gJyQnKSA/DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyAodHJlZS5LZXl3b3JkKShzKSA6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzLmNoYXJBdCgwKSA9PT0gJ0AnID8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyAodHJlZS5WYXJpYWJsZSkoIkAiICsgcy5zbGljZSgyLCAtMSksIGluZGV4W2tdLCBmaWxlSW5mbykgOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3ICh0cmVlLlByb3BlcnR5KSgiJCIgKyBzLnNsaWNlKDIsIC0xKSwgaW5kZXhba10sIGZpbGVJbmZvKSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBwYXJzZXJJbnB1dC5yZXN0b3JlKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgIH07DQogICAgUGFyc2VyLnNlcmlhbGl6ZVZhcnMgPSBmdW5jdGlvbiAodmFycykgew0KICAgICAgICB2YXIgcyA9ICcnOw0KICAgICAgICBmb3IgKHZhciBuYW1lXzEgaW4gdmFycykgew0KICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZhcnMsIG5hbWVfMSkpIHsNCiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2YXJzW25hbWVfMV07DQogICAgICAgICAgICAgICAgcyArPSAoKG5hbWVfMVswXSA9PT0gJ0AnKSA/ICcnIDogJ0AnKSArIG5hbWVfMSArICI6ICIgKyB2YWx1ZSArICgoU3RyaW5nKHZhbHVlKS5zbGljZSgtMSkgPT09ICc7JykgPyAnJyA6ICc7Jyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHM7DQogICAgfTsKCiAgICBmdW5jdGlvbiBib29sZWFuKGNvbmRpdGlvbikgew0KICAgICAgICByZXR1cm4gY29uZGl0aW9uID8gS2V5d29yZC5UcnVlIDogS2V5d29yZC5GYWxzZTsNCiAgICB9DQogICAgLyoqDQogICAgICogRnVuY3Rpb25zIHdpdGggZXZhbEFyZ3Mgc2V0IHRvIGZhbHNlIGFyZSBzZW50IGNvbnRleHQNCiAgICAgKiBhcyB0aGUgZmlyc3QgYXJndW1lbnQuDQogICAgICovDQogICAgZnVuY3Rpb24gSWYoY29udGV4dCwgY29uZGl0aW9uLCB0cnVlVmFsdWUsIGZhbHNlVmFsdWUpIHsNCiAgICAgICAgcmV0dXJuIGNvbmRpdGlvbi5ldmFsKGNvbnRleHQpID8gdHJ1ZVZhbHVlLmV2YWwoY29udGV4dCkNCiAgICAgICAgICAgIDogKGZhbHNlVmFsdWUgPyBmYWxzZVZhbHVlLmV2YWwoY29udGV4dCkgOiBuZXcgQW5vbnltb3VzKTsNCiAgICB9DQogICAgSWYuZXZhbEFyZ3MgPSBmYWxzZTsNCiAgICBmdW5jdGlvbiBpc2RlZmluZWQoY29udGV4dCwgdmFyaWFibGUpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHZhcmlhYmxlLmV2YWwoY29udGV4dCk7DQogICAgICAgICAgICByZXR1cm4gS2V5d29yZC5UcnVlOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICByZXR1cm4gS2V5d29yZC5GYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBpc2RlZmluZWQuZXZhbEFyZ3MgPSBmYWxzZTsNCiAgICB2YXIgYm9vbGVhbiQxID0geyBpc2RlZmluZWQ6IGlzZGVmaW5lZCwgYm9vbGVhbjogYm9vbGVhbiwgJ2lmJzogSWYgfTsKCiAgICB2YXIgY29sb3JGdW5jdGlvbnM7DQogICAgZnVuY3Rpb24gY2xhbXAodmFsKSB7DQogICAgICAgIHJldHVybiBNYXRoLm1pbigxLCBNYXRoLm1heCgwLCB2YWwpKTsNCiAgICB9DQogICAgZnVuY3Rpb24gaHNsYShvcmlnQ29sb3IsIGhzbCkgew0KICAgICAgICB2YXIgY29sb3IgPSBjb2xvckZ1bmN0aW9ucy5oc2xhKGhzbC5oLCBoc2wucywgaHNsLmwsIGhzbC5hKTsNCiAgICAgICAgaWYgKGNvbG9yKSB7DQogICAgICAgICAgICBpZiAob3JpZ0NvbG9yLnZhbHVlICYmDQogICAgICAgICAgICAgICAgL14ocmdifGhzbCkvLnRlc3Qob3JpZ0NvbG9yLnZhbHVlKSkgew0KICAgICAgICAgICAgICAgIGNvbG9yLnZhbHVlID0gb3JpZ0NvbG9yLnZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgY29sb3IudmFsdWUgPSAncmdiJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBjb2xvcjsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiB0b0hTTChjb2xvcikgew0KICAgICAgICBpZiAoY29sb3IudG9IU0wpIHsNCiAgICAgICAgICAgIHJldHVybiBjb2xvci50b0hTTCgpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcmd1bWVudCBjYW5ub3QgYmUgZXZhbHVhdGVkIHRvIGEgY29sb3InKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiB0b0hTVihjb2xvcikgew0KICAgICAgICBpZiAoY29sb3IudG9IU1YpIHsNCiAgICAgICAgICAgIHJldHVybiBjb2xvci50b0hTVigpOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcmd1bWVudCBjYW5ub3QgYmUgZXZhbHVhdGVkIHRvIGEgY29sb3InKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBudW1iZXIkMShuKSB7DQogICAgICAgIGlmIChuIGluc3RhbmNlb2YgRGltZW5zaW9uKSB7DQogICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChuLnVuaXQuaXMoJyUnKSA/IG4udmFsdWUgLyAxMDAgOiBuLnZhbHVlKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmICh0eXBlb2YgbiA9PT0gJ251bWJlcicpIHsNCiAgICAgICAgICAgIHJldHVybiBuOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgdGhyb3cgew0KICAgICAgICAgICAgICAgIHR5cGU6ICdBcmd1bWVudCcsDQogICAgICAgICAgICAgICAgbWVzc2FnZTogJ2NvbG9yIGZ1bmN0aW9ucyB0YWtlIG51bWJlcnMgYXMgcGFyYW1ldGVycycNCiAgICAgICAgICAgIH07DQogICAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gc2NhbGVkKG4sIHNpemUpIHsNCiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBEaW1lbnNpb24gJiYgbi51bml0LmlzKCclJykpIHsNCiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KG4udmFsdWUgKiBzaXplIC8gMTAwKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiBudW1iZXIkMShuKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBjb2xvckZ1bmN0aW9ucyA9IHsNCiAgICAgICAgcmdiOiBmdW5jdGlvbiAociwgZywgYikgew0KICAgICAgICAgICAgdmFyIGEgPSAxOw0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiBDb21tYS1sZXNzIHN5bnRheA0KICAgICAgICAgICAgICogICBlLmcuIHJnYigwIDEyOCAyNTUgLyA1MCUpDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgRXhwcmVzc2lvbikgew0KICAgICAgICAgICAgICAgIHZhciB2YWwgPSByLnZhbHVlOw0KICAgICAgICAgICAgICAgIHIgPSB2YWxbMF07DQogICAgICAgICAgICAgICAgZyA9IHZhbFsxXTsNCiAgICAgICAgICAgICAgICBiID0gdmFsWzJdOw0KICAgICAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICAgICAqIEB0b2RvIC0gc2hvdWxkIHRoaXMgYmUgbm9ybWFsaXplZCBpbg0KICAgICAgICAgICAgICAgICAqICAgZnVuY3Rpb24gY2FsbGVyPyBPciBwYXJzZWQgZGlmZmVyZW50bHk/DQogICAgICAgICAgICAgICAgICovDQogICAgICAgICAgICAgICAgaWYgKGIgaW5zdGFuY2VvZiBPcGVyYXRpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9wID0gYjsNCiAgICAgICAgICAgICAgICAgICAgYiA9IG9wLm9wZXJhbmRzWzBdOw0KICAgICAgICAgICAgICAgICAgICBhID0gb3Aub3BlcmFuZHNbMV07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGNvbG9yID0gY29sb3JGdW5jdGlvbnMucmdiYShyLCBnLCBiLCBhKTsNCiAgICAgICAgICAgIGlmIChjb2xvcikgew0KICAgICAgICAgICAgICAgIGNvbG9yLnZhbHVlID0gJ3JnYic7DQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICByZ2JhOiBmdW5jdGlvbiAociwgZywgYiwgYSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBpZiAociBpbnN0YW5jZW9mIENvbG9yKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhID0gbnVtYmVyJDEoZyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhID0gci5hbHBoYTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKHIucmdiLCBhLCAncmdiYScpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgcmdiID0gW3IsIGcsIGJdLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gc2NhbGVkKGMsIDI1NSk7IH0pOw0KICAgICAgICAgICAgICAgIGEgPSBudW1iZXIkMShhKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKHJnYiwgYSwgJ3JnYmEnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChlKSB7IH0NCiAgICAgICAgfSwNCiAgICAgICAgaHNsOiBmdW5jdGlvbiAoaCwgcywgbCkgew0KICAgICAgICAgICAgdmFyIGEgPSAxOw0KICAgICAgICAgICAgaWYgKGggaW5zdGFuY2VvZiBFeHByZXNzaW9uKSB7DQogICAgICAgICAgICAgICAgdmFyIHZhbCA9IGgudmFsdWU7DQogICAgICAgICAgICAgICAgaCA9IHZhbFswXTsNCiAgICAgICAgICAgICAgICBzID0gdmFsWzFdOw0KICAgICAgICAgICAgICAgIGwgPSB2YWxbMl07DQogICAgICAgICAgICAgICAgaWYgKGwgaW5zdGFuY2VvZiBPcGVyYXRpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9wID0gbDsNCiAgICAgICAgICAgICAgICAgICAgbCA9IG9wLm9wZXJhbmRzWzBdOw0KICAgICAgICAgICAgICAgICAgICBhID0gb3Aub3BlcmFuZHNbMV07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGNvbG9yID0gY29sb3JGdW5jdGlvbnMuaHNsYShoLCBzLCBsLCBhKTsNCiAgICAgICAgICAgIGlmIChjb2xvcikgew0KICAgICAgICAgICAgICAgIGNvbG9yLnZhbHVlID0gJ2hzbCc7DQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBoc2xhOiBmdW5jdGlvbiAoaCwgcywgbCwgYSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBpZiAoaCBpbnN0YW5jZW9mIENvbG9yKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhID0gbnVtYmVyJDEocyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhID0gaC5hbHBoYTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKGgucmdiLCBhLCAnaHNsYScpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgbTFfMTsNCiAgICAgICAgICAgICAgICB2YXIgbTJfMTsNCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBodWUoaCkgew0KICAgICAgICAgICAgICAgICAgICBoID0gaCA8IDAgPyBoICsgMSA6IChoID4gMSA/IGggLSAxIDogaCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChoICogNiA8IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtMV8xICsgKG0yXzEgLSBtMV8xKSAqIGggKiA2Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGggKiAyIDwgMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0yXzE7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaCAqIDMgPCAyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbTFfMSArIChtMl8xIC0gbTFfMSkgKiAoMiAvIDMgLSBoKSAqIDY7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbTFfMTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBoID0gKG51bWJlciQxKGgpICUgMzYwKSAvIDM2MDsNCiAgICAgICAgICAgICAgICBzID0gY2xhbXAobnVtYmVyJDEocykpOw0KICAgICAgICAgICAgICAgIGwgPSBjbGFtcChudW1iZXIkMShsKSk7DQogICAgICAgICAgICAgICAgYSA9IGNsYW1wKG51bWJlciQxKGEpKTsNCiAgICAgICAgICAgICAgICBtMl8xID0gbCA8PSAwLjUgPyBsICogKHMgKyAxKSA6IGwgKyBzIC0gbCAqIHM7DQogICAgICAgICAgICAgICAgbTFfMSA9IGwgKiAyIC0gbTJfMTsNCiAgICAgICAgICAgICAgICB2YXIgcmdiID0gWw0KICAgICAgICAgICAgICAgICAgICBodWUoaCArIDEgLyAzKSAqIDI1NSwNCiAgICAgICAgICAgICAgICAgICAgaHVlKGgpICogMjU1LA0KICAgICAgICAgICAgICAgICAgICBodWUoaCAtIDEgLyAzKSAqIDI1NQ0KICAgICAgICAgICAgICAgIF07DQogICAgICAgICAgICAgICAgYSA9IG51bWJlciQxKGEpOw0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IocmdiLCBhLCAnaHNsYScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfQ0KICAgICAgICB9LA0KICAgICAgICBoc3Y6IGZ1bmN0aW9uIChoLCBzLCB2KSB7DQogICAgICAgICAgICByZXR1cm4gY29sb3JGdW5jdGlvbnMuaHN2YShoLCBzLCB2LCAxLjApOw0KICAgICAgICB9LA0KICAgICAgICBoc3ZhOiBmdW5jdGlvbiAoaCwgcywgdiwgYSkgew0KICAgICAgICAgICAgaCA9ICgobnVtYmVyJDEoaCkgJSAzNjApIC8gMzYwKSAqIDM2MDsNCiAgICAgICAgICAgIHMgPSBudW1iZXIkMShzKTsNCiAgICAgICAgICAgIHYgPSBudW1iZXIkMSh2KTsNCiAgICAgICAgICAgIGEgPSBudW1iZXIkMShhKTsNCiAgICAgICAgICAgIHZhciBpOw0KICAgICAgICAgICAgdmFyIGY7DQogICAgICAgICAgICBpID0gTWF0aC5mbG9vcigoaCAvIDYwKSAlIDYpOw0KICAgICAgICAgICAgZiA9IChoIC8gNjApIC0gaTsNCiAgICAgICAgICAgIHZhciB2cyA9IFt2LA0KICAgICAgICAgICAgICAgIHYgKiAoMSAtIHMpLA0KICAgICAgICAgICAgICAgIHYgKiAoMSAtIGYgKiBzKSwNCiAgICAgICAgICAgICAgICB2ICogKDEgLSAoMSAtIGYpICogcyldOw0KICAgICAgICAgICAgdmFyIHBlcm0gPSBbWzAsIDMsIDFdLA0KICAgICAgICAgICAgICAgIFsyLCAwLCAxXSwNCiAgICAgICAgICAgICAgICBbMSwgMCwgM10sDQogICAgICAgICAgICAgICAgWzEsIDIsIDBdLA0KICAgICAgICAgICAgICAgIFszLCAxLCAwXSwNCiAgICAgICAgICAgICAgICBbMCwgMSwgMl1dOw0KICAgICAgICAgICAgcmV0dXJuIGNvbG9yRnVuY3Rpb25zLnJnYmEodnNbcGVybVtpXVswXV0gKiAyNTUsIHZzW3Blcm1baV1bMV1dICogMjU1LCB2c1twZXJtW2ldWzJdXSAqIDI1NSwgYSk7DQogICAgICAgIH0sDQogICAgICAgIGh1ZTogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbih0b0hTTChjb2xvcikuaCk7DQogICAgICAgIH0sDQogICAgICAgIHNhdHVyYXRpb246IGZ1bmN0aW9uIChjb2xvcikgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEaW1lbnNpb24odG9IU0woY29sb3IpLnMgKiAxMDAsICclJyk7DQogICAgICAgIH0sDQogICAgICAgIGxpZ2h0bmVzczogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbih0b0hTTChjb2xvcikubCAqIDEwMCwgJyUnKTsNCiAgICAgICAgfSwNCiAgICAgICAgaHN2aHVlOiBmdW5jdGlvbiAoY29sb3IpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKHRvSFNWKGNvbG9yKS5oKTsNCiAgICAgICAgfSwNCiAgICAgICAgaHN2c2F0dXJhdGlvbjogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbih0b0hTVihjb2xvcikucyAqIDEwMCwgJyUnKTsNCiAgICAgICAgfSwNCiAgICAgICAgaHN2dmFsdWU6IGZ1bmN0aW9uIChjb2xvcikgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEaW1lbnNpb24odG9IU1YoY29sb3IpLnYgKiAxMDAsICclJyk7DQogICAgICAgIH0sDQogICAgICAgIHJlZDogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbihjb2xvci5yZ2JbMF0pOw0KICAgICAgICB9LA0KICAgICAgICBncmVlbjogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbihjb2xvci5yZ2JbMV0pOw0KICAgICAgICB9LA0KICAgICAgICBibHVlOiBmdW5jdGlvbiAoY29sb3IpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKGNvbG9yLnJnYlsyXSk7DQogICAgICAgIH0sDQogICAgICAgIGFscGhhOiBmdW5jdGlvbiAoY29sb3IpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKHRvSFNMKGNvbG9yKS5hKTsNCiAgICAgICAgfSwNCiAgICAgICAgbHVtYTogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbihjb2xvci5sdW1hKCkgKiBjb2xvci5hbHBoYSAqIDEwMCwgJyUnKTsNCiAgICAgICAgfSwNCiAgICAgICAgbHVtaW5hbmNlOiBmdW5jdGlvbiAoY29sb3IpIHsNCiAgICAgICAgICAgIHZhciBsdW1pbmFuY2UgPSAoMC4yMTI2ICogY29sb3IucmdiWzBdIC8gMjU1KSArDQogICAgICAgICAgICAgICAgKDAuNzE1MiAqIGNvbG9yLnJnYlsxXSAvIDI1NSkgKw0KICAgICAgICAgICAgICAgICgwLjA3MjIgKiBjb2xvci5yZ2JbMl0gLyAyNTUpOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEaW1lbnNpb24obHVtaW5hbmNlICogY29sb3IuYWxwaGEgKiAxMDAsICclJyk7DQogICAgICAgIH0sDQogICAgICAgIHNhdHVyYXRlOiBmdW5jdGlvbiAoY29sb3IsIGFtb3VudCwgbWV0aG9kKSB7DQogICAgICAgICAgICAvLyBmaWx0ZXI6IHNhdHVyYXRlKDMuMik7DQogICAgICAgICAgICAvLyBzaG91bGQgYmUga2VwdCBhcyBpcywgc28gY2hlY2sgZm9yIGNvbG9yDQogICAgICAgICAgICBpZiAoIWNvbG9yLnJnYikgew0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGhzbCA9IHRvSFNMKGNvbG9yKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgbWV0aG9kICE9PSAndW5kZWZpbmVkJyAmJiBtZXRob2QudmFsdWUgPT09ICdyZWxhdGl2ZScpIHsNCiAgICAgICAgICAgICAgICBoc2wucyArPSBoc2wucyAqIGFtb3VudC52YWx1ZSAvIDEwMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGhzbC5zICs9IGFtb3VudC52YWx1ZSAvIDEwMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGhzbC5zID0gY2xhbXAoaHNsLnMpOw0KICAgICAgICAgICAgcmV0dXJuIGhzbGEoY29sb3IsIGhzbCk7DQogICAgICAgIH0sDQogICAgICAgIGRlc2F0dXJhdGU6IGZ1bmN0aW9uIChjb2xvciwgYW1vdW50LCBtZXRob2QpIHsNCiAgICAgICAgICAgIHZhciBoc2wgPSB0b0hTTChjb2xvcik7DQogICAgICAgICAgICBpZiAodHlwZW9mIG1ldGhvZCAhPT0gJ3VuZGVmaW5lZCcgJiYgbWV0aG9kLnZhbHVlID09PSAncmVsYXRpdmUnKSB7DQogICAgICAgICAgICAgICAgaHNsLnMgLT0gaHNsLnMgKiBhbW91bnQudmFsdWUgLyAxMDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBoc2wucyAtPSBhbW91bnQudmFsdWUgLyAxMDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBoc2wucyA9IGNsYW1wKGhzbC5zKTsNCiAgICAgICAgICAgIHJldHVybiBoc2xhKGNvbG9yLCBoc2wpOw0KICAgICAgICB9LA0KICAgICAgICBsaWdodGVuOiBmdW5jdGlvbiAoY29sb3IsIGFtb3VudCwgbWV0aG9kKSB7DQogICAgICAgICAgICB2YXIgaHNsID0gdG9IU0woY29sb3IpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgIT09ICd1bmRlZmluZWQnICYmIG1ldGhvZC52YWx1ZSA9PT0gJ3JlbGF0aXZlJykgew0KICAgICAgICAgICAgICAgIGhzbC5sICs9IGhzbC5sICogYW1vdW50LnZhbHVlIC8gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgaHNsLmwgKz0gYW1vdW50LnZhbHVlIC8gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaHNsLmwgPSBjbGFtcChoc2wubCk7DQogICAgICAgICAgICByZXR1cm4gaHNsYShjb2xvciwgaHNsKTsNCiAgICAgICAgfSwNCiAgICAgICAgZGFya2VuOiBmdW5jdGlvbiAoY29sb3IsIGFtb3VudCwgbWV0aG9kKSB7DQogICAgICAgICAgICB2YXIgaHNsID0gdG9IU0woY29sb3IpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgIT09ICd1bmRlZmluZWQnICYmIG1ldGhvZC52YWx1ZSA9PT0gJ3JlbGF0aXZlJykgew0KICAgICAgICAgICAgICAgIGhzbC5sIC09IGhzbC5sICogYW1vdW50LnZhbHVlIC8gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgaHNsLmwgLT0gYW1vdW50LnZhbHVlIC8gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaHNsLmwgPSBjbGFtcChoc2wubCk7DQogICAgICAgICAgICByZXR1cm4gaHNsYShjb2xvciwgaHNsKTsNCiAgICAgICAgfSwNCiAgICAgICAgZmFkZWluOiBmdW5jdGlvbiAoY29sb3IsIGFtb3VudCwgbWV0aG9kKSB7DQogICAgICAgICAgICB2YXIgaHNsID0gdG9IU0woY29sb3IpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgIT09ICd1bmRlZmluZWQnICYmIG1ldGhvZC52YWx1ZSA9PT0gJ3JlbGF0aXZlJykgew0KICAgICAgICAgICAgICAgIGhzbC5hICs9IGhzbC5hICogYW1vdW50LnZhbHVlIC8gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgaHNsLmEgKz0gYW1vdW50LnZhbHVlIC8gMTAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaHNsLmEgPSBjbGFtcChoc2wuYSk7DQogICAgICAgICAgICByZXR1cm4gaHNsYShjb2xvciwgaHNsKTsNCiAgICAgICAgfSwNCiAgICAgICAgZmFkZW91dDogZnVuY3Rpb24gKGNvbG9yLCBhbW91bnQsIG1ldGhvZCkgew0KICAgICAgICAgICAgdmFyIGhzbCA9IHRvSFNMKGNvbG9yKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgbWV0aG9kICE9PSAndW5kZWZpbmVkJyAmJiBtZXRob2QudmFsdWUgPT09ICdyZWxhdGl2ZScpIHsNCiAgICAgICAgICAgICAgICBoc2wuYSAtPSBoc2wuYSAqIGFtb3VudC52YWx1ZSAvIDEwMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGhzbC5hIC09IGFtb3VudC52YWx1ZSAvIDEwMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGhzbC5hID0gY2xhbXAoaHNsLmEpOw0KICAgICAgICAgICAgcmV0dXJuIGhzbGEoY29sb3IsIGhzbCk7DQogICAgICAgIH0sDQogICAgICAgIGZhZGU6IGZ1bmN0aW9uIChjb2xvciwgYW1vdW50KSB7DQogICAgICAgICAgICB2YXIgaHNsID0gdG9IU0woY29sb3IpOw0KICAgICAgICAgICAgaHNsLmEgPSBhbW91bnQudmFsdWUgLyAxMDA7DQogICAgICAgICAgICBoc2wuYSA9IGNsYW1wKGhzbC5hKTsNCiAgICAgICAgICAgIHJldHVybiBoc2xhKGNvbG9yLCBoc2wpOw0KICAgICAgICB9LA0KICAgICAgICBzcGluOiBmdW5jdGlvbiAoY29sb3IsIGFtb3VudCkgew0KICAgICAgICAgICAgdmFyIGhzbCA9IHRvSFNMKGNvbG9yKTsNCiAgICAgICAgICAgIHZhciBodWUgPSAoaHNsLmggKyBhbW91bnQudmFsdWUpICUgMzYwOw0KICAgICAgICAgICAgaHNsLmggPSBodWUgPCAwID8gMzYwICsgaHVlIDogaHVlOw0KICAgICAgICAgICAgcmV0dXJuIGhzbGEoY29sb3IsIGhzbCk7DQogICAgICAgIH0sDQogICAgICAgIC8vDQogICAgICAgIC8vIENvcHlyaWdodCAoYykgMjAwNi0yMDA5IEhhbXB0b24gQ2F0bGluLCBOYXRhbGllIFdlaXplbmJhdW0sIGFuZCBDaHJpcyBFcHBzdGVpbg0KICAgICAgICAvLyBodHRwOi8vc2Fzcy1sYW5nLmNvbQ0KICAgICAgICAvLw0KICAgICAgICBtaXg6IGZ1bmN0aW9uIChjb2xvcjEsIGNvbG9yMiwgd2VpZ2h0KSB7DQogICAgICAgICAgICBpZiAoIXdlaWdodCkgew0KICAgICAgICAgICAgICAgIHdlaWdodCA9IG5ldyBEaW1lbnNpb24oNTApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHAgPSB3ZWlnaHQudmFsdWUgLyAxMDAuMDsNCiAgICAgICAgICAgIHZhciB3ID0gcCAqIDIgLSAxOw0KICAgICAgICAgICAgdmFyIGEgPSB0b0hTTChjb2xvcjEpLmEgLSB0b0hTTChjb2xvcjIpLmE7DQogICAgICAgICAgICB2YXIgdzEgPSAoKCh3ICogYSA9PSAtMSkgPyB3IDogKHcgKyBhKSAvICgxICsgdyAqIGEpKSArIDEpIC8gMi4wOw0KICAgICAgICAgICAgdmFyIHcyID0gMSAtIHcxOw0KICAgICAgICAgICAgdmFyIHJnYiA9IFtjb2xvcjEucmdiWzBdICogdzEgKyBjb2xvcjIucmdiWzBdICogdzIsDQogICAgICAgICAgICAgICAgY29sb3IxLnJnYlsxXSAqIHcxICsgY29sb3IyLnJnYlsxXSAqIHcyLA0KICAgICAgICAgICAgICAgIGNvbG9yMS5yZ2JbMl0gKiB3MSArIGNvbG9yMi5yZ2JbMl0gKiB3Ml07DQogICAgICAgICAgICB2YXIgYWxwaGEgPSBjb2xvcjEuYWxwaGEgKiBwICsgY29sb3IyLmFscGhhICogKDEgLSBwKTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IocmdiLCBhbHBoYSk7DQogICAgICAgIH0sDQogICAgICAgIGdyZXlzY2FsZTogZnVuY3Rpb24gKGNvbG9yKSB7DQogICAgICAgICAgICByZXR1cm4gY29sb3JGdW5jdGlvbnMuZGVzYXR1cmF0ZShjb2xvciwgbmV3IERpbWVuc2lvbigxMDApKTsNCiAgICAgICAgfSwNCiAgICAgICAgY29udHJhc3Q6IGZ1bmN0aW9uIChjb2xvciwgZGFyaywgbGlnaHQsIHRocmVzaG9sZCkgew0KICAgICAgICAgICAgLy8gZmlsdGVyOiBjb250cmFzdCgzLjIpOw0KICAgICAgICAgICAgLy8gc2hvdWxkIGJlIGtlcHQgYXMgaXMsIHNvIGNoZWNrIGZvciBjb2xvcg0KICAgICAgICAgICAgaWYgKCFjb2xvci5yZ2IpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0eXBlb2YgbGlnaHQgPT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgbGlnaHQgPSBjb2xvckZ1bmN0aW9ucy5yZ2JhKDI1NSwgMjU1LCAyNTUsIDEuMCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodHlwZW9mIGRhcmsgPT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgZGFyayA9IGNvbG9yRnVuY3Rpb25zLnJnYmEoMCwgMCwgMCwgMS4wKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIEZpZ3VyZSBvdXQgd2hpY2ggaXMgYWN0dWFsbHkgbGlnaHQgYW5kIGRhcms6DQogICAgICAgICAgICBpZiAoZGFyay5sdW1hKCkgPiBsaWdodC5sdW1hKCkpIHsNCiAgICAgICAgICAgICAgICB2YXIgdCA9IGxpZ2h0Ow0KICAgICAgICAgICAgICAgIGxpZ2h0ID0gZGFyazsNCiAgICAgICAgICAgICAgICBkYXJrID0gdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhyZXNob2xkID09PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgICAgIHRocmVzaG9sZCA9IDAuNDM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJlc2hvbGQgPSBudW1iZXIkMSh0aHJlc2hvbGQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGNvbG9yLmx1bWEoKSA8IHRocmVzaG9sZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBsaWdodDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBkYXJrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvLyBDaGFuZ2VzIG1hZGUgaW4gMi43LjAgLSBSZXZlcnRlZCBpbiAzLjAuMA0KICAgICAgICAvLyBjb250cmFzdDogZnVuY3Rpb24gKGNvbG9yLCBjb2xvcjEsIGNvbG9yMiwgdGhyZXNob2xkKSB7DQogICAgICAgIC8vICAgICAvLyBSZXR1cm4gd2hpY2ggb2YgYGNvbG9yMWAgYW5kIGBjb2xvcjJgIGhhcyB0aGUgZ3JlYXRlc3QgY29udHJhc3Qgd2l0aCBgY29sb3JgDQogICAgICAgIC8vICAgICAvLyBhY2NvcmRpbmcgdG8gdGhlIHN0YW5kYXJkIFdDQUcgY29udHJhc3QgcmF0aW8gY2FsY3VsYXRpb24uDQogICAgICAgIC8vICAgICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9XQ0FHMjAvI2NvbnRyYXN0LXJhdGlvZGVmDQogICAgICAgIC8vICAgICAvLyBUaGUgdGhyZXNob2xkIHBhcmFtIGlzIG5vIGxvbmdlciB1c2VkLCBpbiBsaW5lIHdpdGggU0FTUy4NCiAgICAgICAgLy8gICAgIC8vIGZpbHRlcjogY29udHJhc3QoMy4yKTsNCiAgICAgICAgLy8gICAgIC8vIHNob3VsZCBiZSBrZXB0IGFzIGlzLCBzbyBjaGVjayBmb3IgY29sb3INCiAgICAgICAgLy8gICAgIGlmICghY29sb3IucmdiKSB7DQogICAgICAgIC8vICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIC8vICAgICB9DQogICAgICAgIC8vICAgICBpZiAodHlwZW9mIGNvbG9yMSA9PT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgLy8gICAgICAgICBjb2xvcjEgPSBjb2xvckZ1bmN0aW9ucy5yZ2JhKDAsIDAsIDAsIDEuMCk7DQogICAgICAgIC8vICAgICB9DQogICAgICAgIC8vICAgICBpZiAodHlwZW9mIGNvbG9yMiA9PT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgLy8gICAgICAgICBjb2xvcjIgPSBjb2xvckZ1bmN0aW9ucy5yZ2JhKDI1NSwgMjU1LCAyNTUsIDEuMCk7DQogICAgICAgIC8vICAgICB9DQogICAgICAgIC8vICAgICB2YXIgY29udHJhc3QxLCBjb250cmFzdDI7DQogICAgICAgIC8vICAgICB2YXIgbHVtYSA9IGNvbG9yLmx1bWEoKTsNCiAgICAgICAgLy8gICAgIHZhciBsdW1hMSA9IGNvbG9yMS5sdW1hKCk7DQogICAgICAgIC8vICAgICB2YXIgbHVtYTIgPSBjb2xvcjIubHVtYSgpOw0KICAgICAgICAvLyAgICAgLy8gQ2FsY3VsYXRlIGNvbnRyYXN0IHJhdGlvcyBmb3IgZWFjaCBjb2xvcg0KICAgICAgICAvLyAgICAgaWYgKGx1bWEgPiBsdW1hMSkgew0KICAgICAgICAvLyAgICAgICAgIGNvbnRyYXN0MSA9IChsdW1hICsgMC4wNSkgLyAobHVtYTEgKyAwLjA1KTsNCiAgICAgICAgLy8gICAgIH0gZWxzZSB7DQogICAgICAgIC8vICAgICAgICAgY29udHJhc3QxID0gKGx1bWExICsgMC4wNSkgLyAobHVtYSArIDAuMDUpOw0KICAgICAgICAvLyAgICAgfQ0KICAgICAgICAvLyAgICAgaWYgKGx1bWEgPiBsdW1hMikgew0KICAgICAgICAvLyAgICAgICAgIGNvbnRyYXN0MiA9IChsdW1hICsgMC4wNSkgLyAobHVtYTIgKyAwLjA1KTsNCiAgICAgICAgLy8gICAgIH0gZWxzZSB7DQogICAgICAgIC8vICAgICAgICAgY29udHJhc3QyID0gKGx1bWEyICsgMC4wNSkgLyAobHVtYSArIDAuMDUpOw0KICAgICAgICAvLyAgICAgfQ0KICAgICAgICAvLyAgICAgaWYgKGNvbnRyYXN0MSA+IGNvbnRyYXN0Mikgew0KICAgICAgICAvLyAgICAgICAgIHJldHVybiBjb2xvcjE7DQogICAgICAgIC8vICAgICB9IGVsc2Ugew0KICAgICAgICAvLyAgICAgICAgIHJldHVybiBjb2xvcjI7DQogICAgICAgIC8vICAgICB9DQogICAgICAgIC8vIH0sDQogICAgICAgIGFyZ2I6IGZ1bmN0aW9uIChjb2xvcikgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXMoY29sb3IudG9BUkdCKCkpOw0KICAgICAgICB9LA0KICAgICAgICBjb2xvcjogZnVuY3Rpb24gKGMpIHsNCiAgICAgICAgICAgIGlmICgoYyBpbnN0YW5jZW9mIFF1b3RlZCkgJiYNCiAgICAgICAgICAgICAgICAoL14jKFtBLUZhLWYwLTldezh9fFtBLUZhLWYwLTldezZ9fFtBLUZhLWYwLTldezMsNH0pJC9pLnRlc3QoYy52YWx1ZSkpKSB7DQogICAgICAgICAgICAgICAgdmFyIHZhbCA9IGMudmFsdWUuc2xpY2UoMSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcih2YWwsIHVuZGVmaW5lZCwgIiMiICsgdmFsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICgoYyBpbnN0YW5jZW9mIENvbG9yKSB8fCAoYyA9IENvbG9yLmZyb21LZXl3b3JkKGMudmFsdWUpKSkgew0KICAgICAgICAgICAgICAgIGMudmFsdWUgPSB1bmRlZmluZWQ7DQogICAgICAgICAgICAgICAgcmV0dXJuIGM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aHJvdyB7DQogICAgICAgICAgICAgICAgdHlwZTogJ0FyZ3VtZW50JywNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnYXJndW1lbnQgbXVzdCBiZSBhIGNvbG9yIGtleXdvcmQgb3IgM3w0fDZ8OCBkaWdpdCBoZXggZS5nLiAjRkZGJw0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSwNCiAgICAgICAgdGludDogZnVuY3Rpb24gKGNvbG9yLCBhbW91bnQpIHsNCiAgICAgICAgICAgIHJldHVybiBjb2xvckZ1bmN0aW9ucy5taXgoY29sb3JGdW5jdGlvbnMucmdiKDI1NSwgMjU1LCAyNTUpLCBjb2xvciwgYW1vdW50KTsNCiAgICAgICAgfSwNCiAgICAgICAgc2hhZGU6IGZ1bmN0aW9uIChjb2xvciwgYW1vdW50KSB7DQogICAgICAgICAgICByZXR1cm4gY29sb3JGdW5jdGlvbnMubWl4KGNvbG9yRnVuY3Rpb25zLnJnYigwLCAwLCAwKSwgY29sb3IsIGFtb3VudCk7DQogICAgICAgIH0NCiAgICB9Ow0KICAgIHZhciBjb2xvciA9IGNvbG9yRnVuY3Rpb25zOwoKICAgIC8vIENvbG9yIEJsZW5kaW5nDQogICAgLy8gcmVmOiBodHRwOi8vd3d3LnczLm9yZy9UUi9jb21wb3NpdGluZy0xDQogICAgZnVuY3Rpb24gY29sb3JCbGVuZChtb2RlLCBjb2xvcjEsIGNvbG9yMikgew0KICAgICAgICB2YXIgYWIgPSBjb2xvcjEuYWxwaGE7IC8vIHJlc3VsdA0KICAgICAgICB2YXIgLy8gYmFja2Ryb3ANCiAgICAgICAgY2I7DQogICAgICAgIHZhciBhcyA9IGNvbG9yMi5hbHBoYTsNCiAgICAgICAgdmFyIC8vIHNvdXJjZQ0KICAgICAgICBjczsNCiAgICAgICAgdmFyIGFyOw0KICAgICAgICB2YXIgY3I7DQogICAgICAgIHZhciByID0gW107DQogICAgICAgIGFyID0gYXMgKyBhYiAqICgxIC0gYXMpOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykgew0KICAgICAgICAgICAgY2IgPSBjb2xvcjEucmdiW2ldIC8gMjU1Ow0KICAgICAgICAgICAgY3MgPSBjb2xvcjIucmdiW2ldIC8gMjU1Ow0KICAgICAgICAgICAgY3IgPSBtb2RlKGNiLCBjcyk7DQogICAgICAgICAgICBpZiAoYXIpIHsNCiAgICAgICAgICAgICAgICBjciA9IChhcyAqIGNzICsgYWIgKiAoY2IgLQ0KICAgICAgICAgICAgICAgICAgICBhcyAqIChjYiArIGNzIC0gY3IpKSkgLyBhcjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJbaV0gPSBjciAqIDI1NTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmV3IENvbG9yKHIsIGFyKTsNCiAgICB9DQogICAgdmFyIGNvbG9yQmxlbmRNb2RlRnVuY3Rpb25zID0gew0KICAgICAgICBtdWx0aXBseTogZnVuY3Rpb24gKGNiLCBjcykgew0KICAgICAgICAgICAgcmV0dXJuIGNiICogY3M7DQogICAgICAgIH0sDQogICAgICAgIHNjcmVlbjogZnVuY3Rpb24gKGNiLCBjcykgew0KICAgICAgICAgICAgcmV0dXJuIGNiICsgY3MgLSBjYiAqIGNzOw0KICAgICAgICB9LA0KICAgICAgICBvdmVybGF5OiBmdW5jdGlvbiAoY2IsIGNzKSB7DQogICAgICAgICAgICBjYiAqPSAyOw0KICAgICAgICAgICAgcmV0dXJuIChjYiA8PSAxKSA/DQogICAgICAgICAgICAgICAgY29sb3JCbGVuZE1vZGVGdW5jdGlvbnMubXVsdGlwbHkoY2IsIGNzKSA6DQogICAgICAgICAgICAgICAgY29sb3JCbGVuZE1vZGVGdW5jdGlvbnMuc2NyZWVuKGNiIC0gMSwgY3MpOw0KICAgICAgICB9LA0KICAgICAgICBzb2Z0bGlnaHQ6IGZ1bmN0aW9uIChjYiwgY3MpIHsNCiAgICAgICAgICAgIHZhciBkID0gMTsNCiAgICAgICAgICAgIHZhciBlID0gY2I7DQogICAgICAgICAgICBpZiAoY3MgPiAwLjUpIHsNCiAgICAgICAgICAgICAgICBlID0gMTsNCiAgICAgICAgICAgICAgICBkID0gKGNiID4gMC4yNSkgPyBNYXRoLnNxcnQoY2IpDQogICAgICAgICAgICAgICAgICAgIDogKCgxNiAqIGNiIC0gMTIpICogY2IgKyA0KSAqIGNiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGNiIC0gKDEgLSAyICogY3MpICogZSAqIChkIC0gY2IpOw0KICAgICAgICB9LA0KICAgICAgICBoYXJkbGlnaHQ6IGZ1bmN0aW9uIChjYiwgY3MpIHsNCiAgICAgICAgICAgIHJldHVybiBjb2xvckJsZW5kTW9kZUZ1bmN0aW9ucy5vdmVybGF5KGNzLCBjYik7DQogICAgICAgIH0sDQogICAgICAgIGRpZmZlcmVuY2U6IGZ1bmN0aW9uIChjYiwgY3MpIHsNCiAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyhjYiAtIGNzKTsNCiAgICAgICAgfSwNCiAgICAgICAgZXhjbHVzaW9uOiBmdW5jdGlvbiAoY2IsIGNzKSB7DQogICAgICAgICAgICByZXR1cm4gY2IgKyBjcyAtIDIgKiBjYiAqIGNzOw0KICAgICAgICB9LA0KICAgICAgICAvLyBub24tdzNjIGZ1bmN0aW9uczoNCiAgICAgICAgYXZlcmFnZTogZnVuY3Rpb24gKGNiLCBjcykgew0KICAgICAgICAgICAgcmV0dXJuIChjYiArIGNzKSAvIDI7DQogICAgICAgIH0sDQogICAgICAgIG5lZ2F0aW9uOiBmdW5jdGlvbiAoY2IsIGNzKSB7DQogICAgICAgICAgICByZXR1cm4gMSAtIE1hdGguYWJzKGNiICsgY3MgLSAxKTsNCiAgICAgICAgfQ0KICAgIH07DQogICAgZm9yICh2YXIgZiQxIGluIGNvbG9yQmxlbmRNb2RlRnVuY3Rpb25zKSB7DQogICAgICAgIGlmIChjb2xvckJsZW5kTW9kZUZ1bmN0aW9ucy5oYXNPd25Qcm9wZXJ0eShmJDEpKSB7DQogICAgICAgICAgICBjb2xvckJsZW5kW2YkMV0gPSBjb2xvckJsZW5kLmJpbmQobnVsbCwgY29sb3JCbGVuZE1vZGVGdW5jdGlvbnNbZiQxXSk7DQogICAgICAgIH0NCiAgICB9CgogICAgdmFyIGRhdGFVcmkgPSAoZnVuY3Rpb24gKGVudmlyb25tZW50KSB7DQogICAgICAgIHZhciBmYWxsYmFjayA9IGZ1bmN0aW9uIChmdW5jdGlvblRoaXMsIG5vZGUpIHsgcmV0dXJuIG5ldyBVUkwobm9kZSwgZnVuY3Rpb25UaGlzLmluZGV4LCBmdW5jdGlvblRoaXMuY3VycmVudEZpbGVJbmZvKS5ldmFsKGZ1bmN0aW9uVGhpcy5jb250ZXh0KTsgfTsNCiAgICAgICAgcmV0dXJuIHsgJ2RhdGEtdXJpJzogZnVuY3Rpb24gKG1pbWV0eXBlTm9kZSwgZmlsZVBhdGhOb2RlKSB7DQogICAgICAgICAgICAgICAgaWYgKCFmaWxlUGF0aE5vZGUpIHsNCiAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGhOb2RlID0gbWltZXR5cGVOb2RlOw0KICAgICAgICAgICAgICAgICAgICBtaW1ldHlwZU5vZGUgPSBudWxsOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgbWltZXR5cGUgPSBtaW1ldHlwZU5vZGUgJiYgbWltZXR5cGVOb2RlLnZhbHVlOw0KICAgICAgICAgICAgICAgIHZhciBmaWxlUGF0aCA9IGZpbGVQYXRoTm9kZS52YWx1ZTsNCiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEZpbGVJbmZvID0gdGhpcy5jdXJyZW50RmlsZUluZm87DQogICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREaXJlY3RvcnkgPSBjdXJyZW50RmlsZUluZm8ucmV3cml0ZVVybHMgPw0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50RmlsZUluZm8uY3VycmVudERpcmVjdG9yeSA6IGN1cnJlbnRGaWxlSW5mby5lbnRyeVBhdGg7DQogICAgICAgICAgICAgICAgdmFyIGZyYWdtZW50U3RhcnQgPSBmaWxlUGF0aC5pbmRleE9mKCcjJyk7DQogICAgICAgICAgICAgICAgdmFyIGZyYWdtZW50ID0gJyc7DQogICAgICAgICAgICAgICAgaWYgKGZyYWdtZW50U3RhcnQgIT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgIGZyYWdtZW50ID0gZmlsZVBhdGguc2xpY2UoZnJhZ21lbnRTdGFydCk7DQogICAgICAgICAgICAgICAgICAgIGZpbGVQYXRoID0gZmlsZVBhdGguc2xpY2UoMCwgZnJhZ21lbnRTdGFydCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gY2xvbmUodGhpcy5jb250ZXh0KTsNCiAgICAgICAgICAgICAgICBjb250ZXh0LnJhd0J1ZmZlciA9IHRydWU7DQogICAgICAgICAgICAgICAgdmFyIGZpbGVNYW5hZ2VyID0gZW52aXJvbm1lbnQuZ2V0RmlsZU1hbmFnZXIoZmlsZVBhdGgsIGN1cnJlbnREaXJlY3RvcnksIGNvbnRleHQsIGVudmlyb25tZW50LCB0cnVlKTsNCiAgICAgICAgICAgICAgICBpZiAoIWZpbGVNYW5hZ2VyKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxsYmFjayh0aGlzLCBmaWxlUGF0aE5vZGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgdXNlQmFzZTY0ID0gZmFsc2U7DQogICAgICAgICAgICAgICAgLy8gZGV0ZWN0IHRoZSBtaW1ldHlwZSBpZiBub3QgZ2l2ZW4NCiAgICAgICAgICAgICAgICBpZiAoIW1pbWV0eXBlTm9kZSkgew0KICAgICAgICAgICAgICAgICAgICBtaW1ldHlwZSA9IGVudmlyb25tZW50Lm1pbWVMb29rdXAoZmlsZVBhdGgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAobWltZXR5cGUgPT09ICdpbWFnZS9zdmcreG1sJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdXNlQmFzZTY0ID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2UgYmFzZSA2NCB1bmxlc3MgaXQncyBhbiBBU0NJSSBvciBVVEYtOCBmb3JtYXQNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFyc2V0ID0gZW52aXJvbm1lbnQuY2hhcnNldExvb2t1cChtaW1ldHlwZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB1c2VCYXNlNjQgPSBbJ1VTLUFTQ0lJJywgJ1VURi04J10uaW5kZXhPZihjaGFyc2V0KSA8IDA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZUJhc2U2NCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWltZXR5cGUgKz0gJztiYXNlNjQnOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB1c2VCYXNlNjQgPSAvO2Jhc2U2NCQvLnRlc3QobWltZXR5cGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgZmlsZVN5bmMgPSBmaWxlTWFuYWdlci5sb2FkRmlsZVN5bmMoZmlsZVBhdGgsIGN1cnJlbnREaXJlY3RvcnksIGNvbnRleHQsIGVudmlyb25tZW50KTsNCiAgICAgICAgICAgICAgICBpZiAoIWZpbGVTeW5jLmNvbnRlbnRzKSB7DQogICAgICAgICAgICAgICAgICAgIGxvZ2dlciQxLndhcm4oIlNraXBwZWQgZGF0YS11cmkgZW1iZWRkaW5nIG9mICIgKyBmaWxlUGF0aCArICIgYmVjYXVzZSBmaWxlIG5vdCBmb3VuZCIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsbGJhY2sodGhpcywgZmlsZVBhdGhOb2RlIHx8IG1pbWV0eXBlTm9kZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBidWYgPSBmaWxlU3luYy5jb250ZW50czsNCiAgICAgICAgICAgICAgICBpZiAodXNlQmFzZTY0ICYmICFlbnZpcm9ubWVudC5lbmNvZGVCYXNlNjQpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrKHRoaXMsIGZpbGVQYXRoTm9kZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGJ1ZiA9IHVzZUJhc2U2NCA/IGVudmlyb25tZW50LmVuY29kZUJhc2U2NChidWYpIDogZW5jb2RlVVJJQ29tcG9uZW50KGJ1Zik7DQogICAgICAgICAgICAgICAgdmFyIHVyaSA9ICJkYXRhOiIgKyBtaW1ldHlwZSArICIsIiArIGJ1ZiArIGZyYWdtZW50Ow0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVVJMKG5ldyBRdW90ZWQoIlwiIiArIHVyaSArICJcIiIsIHVyaSwgZmFsc2UsIHRoaXMuaW5kZXgsIHRoaXMuY3VycmVudEZpbGVJbmZvKSwgdGhpcy5pbmRleCwgdGhpcy5jdXJyZW50RmlsZUluZm8pOw0KICAgICAgICAgICAgfSB9Ow0KICAgIH0pOwoKICAgIHZhciBnZXRJdGVtc0Zyb21Ob2RlID0gZnVuY3Rpb24gKG5vZGUpIHsNCiAgICAgICAgLy8gaGFuZGxlIG5vbi1hcnJheSB2YWx1ZXMgYXMgYW4gYXJyYXkgb2YgbGVuZ3RoIDENCiAgICAgICAgLy8gcmV0dXJuICd1bmRlZmluZWQnIGlmIGluZGV4IGlzIGludmFsaWQNCiAgICAgICAgdmFyIGl0ZW1zID0gQXJyYXkuaXNBcnJheShub2RlLnZhbHVlKSA/DQogICAgICAgICAgICBub2RlLnZhbHVlIDogQXJyYXkobm9kZSk7DQogICAgICAgIHJldHVybiBpdGVtczsNCiAgICB9Ow0KICAgIHZhciBsaXN0ID0gew0KICAgICAgICBfU0VMRjogZnVuY3Rpb24gKG4pIHsNCiAgICAgICAgICAgIHJldHVybiBuOw0KICAgICAgICB9LA0KICAgICAgICAnfic6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBleHByID0gW107DQogICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgew0KICAgICAgICAgICAgICAgIGV4cHJbX2ldID0gYXJndW1lbnRzW19pXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChleHByLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBleHByWzBdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShleHByKTsNCiAgICAgICAgfSwNCiAgICAgICAgZXh0cmFjdDogZnVuY3Rpb24gKHZhbHVlcywgaW5kZXgpIHsNCiAgICAgICAgICAgIC8vICgxLWJhc2VkIGluZGV4KQ0KICAgICAgICAgICAgaW5kZXggPSBpbmRleC52YWx1ZSAtIDE7DQogICAgICAgICAgICByZXR1cm4gZ2V0SXRlbXNGcm9tTm9kZSh2YWx1ZXMpW2luZGV4XTsNCiAgICAgICAgfSwNCiAgICAgICAgbGVuZ3RoOiBmdW5jdGlvbiAodmFsdWVzKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbihnZXRJdGVtc0Zyb21Ob2RlKHZhbHVlcykubGVuZ3RoKTsNCiAgICAgICAgfSwNCiAgICAgICAgLyoqDQogICAgICAgICAqIENyZWF0ZXMgYSBMZXNzIGxpc3Qgb2YgaW5jcmVtZW50YWwgdmFsdWVzLg0KICAgICAgICAgKiBNb2RlbGVkIGFmdGVyIExvZGFzaCdzIHJhbmdlIGZ1bmN0aW9uLCBhbHNvIGV4aXN0cyBuYXRpdmVseSBpbiBQSFANCiAgICAgICAgICoNCiAgICAgICAgICogQHBhcmFtIHtEaW1lbnNpb259IFtzdGFydD0xXQ0KICAgICAgICAgKiBAcGFyYW0ge0RpbWVuc2lvbn0gZW5kICAtIGUuZy4gMTAgb3IgMTBweCAtIHVuaXQgaXMgYWRkZWQgdG8gb3V0cHV0DQogICAgICAgICAqIEBwYXJhbSB7RGltZW5zaW9ufSBbc3RlcD0xXQ0KICAgICAgICAgKi8NCiAgICAgICAgcmFuZ2U6IGZ1bmN0aW9uIChzdGFydCwgZW5kLCBzdGVwKSB7DQogICAgICAgICAgICB2YXIgZnJvbTsNCiAgICAgICAgICAgIHZhciB0bzsNCiAgICAgICAgICAgIHZhciBzdGVwVmFsdWUgPSAxOw0KICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTsNCiAgICAgICAgICAgIGlmIChlbmQpIHsNCiAgICAgICAgICAgICAgICB0byA9IGVuZDsNCiAgICAgICAgICAgICAgICBmcm9tID0gc3RhcnQudmFsdWU7DQogICAgICAgICAgICAgICAgaWYgKHN0ZXApIHsNCiAgICAgICAgICAgICAgICAgICAgc3RlcFZhbHVlID0gc3RlcC52YWx1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBmcm9tID0gMTsNCiAgICAgICAgICAgICAgICB0byA9IHN0YXJ0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IGZyb207IGkgPD0gdG8udmFsdWU7IGkgKz0gc3RlcFZhbHVlKSB7DQogICAgICAgICAgICAgICAgbGlzdC5wdXNoKG5ldyBEaW1lbnNpb24oaSwgdG8udW5pdCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uKGxpc3QpOw0KICAgICAgICB9LA0KICAgICAgICBlYWNoOiBmdW5jdGlvbiAobGlzdCwgcnMpIHsNCiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICAgICAgICB2YXIgcnVsZXMgPSBbXTsNCiAgICAgICAgICAgIHZhciBuZXdSdWxlczsNCiAgICAgICAgICAgIHZhciBpdGVyYXRvcjsNCiAgICAgICAgICAgIHZhciB0cnlFdmFsID0gZnVuY3Rpb24gKHZhbCkgew0KICAgICAgICAgICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBOb2RlKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWwuZXZhbChfdGhpcy5jb250ZXh0KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHZhbDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBpZiAobGlzdC52YWx1ZSAmJiAhKGxpc3QgaW5zdGFuY2VvZiBRdW90ZWQpKSB7DQogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGlzdC52YWx1ZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBsaXN0LnZhbHVlLm1hcCh0cnlFdmFsKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gW3RyeUV2YWwobGlzdC52YWx1ZSldOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKGxpc3QucnVsZXNldCkgew0KICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gdHJ5RXZhbChsaXN0LnJ1bGVzZXQpLnJ1bGVzOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAobGlzdC5ydWxlcykgew0KICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gbGlzdC5ydWxlcy5tYXAodHJ5RXZhbCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGxpc3QpKSB7DQogICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBsaXN0Lm1hcCh0cnlFdmFsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gW3RyeUV2YWwobGlzdCldOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHZhbHVlTmFtZSA9ICdAdmFsdWUnOw0KICAgICAgICAgICAgdmFyIGtleU5hbWUgPSAnQGtleSc7DQogICAgICAgICAgICB2YXIgaW5kZXhOYW1lID0gJ0BpbmRleCc7DQogICAgICAgICAgICBpZiAocnMucGFyYW1zKSB7DQogICAgICAgICAgICAgICAgdmFsdWVOYW1lID0gcnMucGFyYW1zWzBdICYmIHJzLnBhcmFtc1swXS5uYW1lOw0KICAgICAgICAgICAgICAgIGtleU5hbWUgPSBycy5wYXJhbXNbMV0gJiYgcnMucGFyYW1zWzFdLm5hbWU7DQogICAgICAgICAgICAgICAgaW5kZXhOYW1lID0gcnMucGFyYW1zWzJdICYmIHJzLnBhcmFtc1syXS5uYW1lOw0KICAgICAgICAgICAgICAgIHJzID0gcnMucnVsZXM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBycyA9IHJzLnJ1bGVzZXQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZXJhdG9yLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgdmFyIGtleSA9IHZvaWQgMDsNCiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7DQogICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVyYXRvcltpXTsNCiAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIERlY2xhcmF0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgIGtleSA9IHR5cGVvZiBpdGVtLm5hbWUgPT09ICdzdHJpbmcnID8gaXRlbS5uYW1lIDogaXRlbS5uYW1lWzBdLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGl0ZW0udmFsdWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBrZXkgPSBuZXcgRGltZW5zaW9uKGkgKyAxKTsNCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBpdGVtOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIENvbW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG5ld1J1bGVzID0gcnMucnVsZXMuc2xpY2UoMCk7DQogICAgICAgICAgICAgICAgaWYgKHZhbHVlTmFtZSkgew0KICAgICAgICAgICAgICAgICAgICBuZXdSdWxlcy5wdXNoKG5ldyBEZWNsYXJhdGlvbih2YWx1ZU5hbWUsIHZhbHVlLCBmYWxzZSwgZmFsc2UsIHRoaXMuaW5kZXgsIHRoaXMuY3VycmVudEZpbGVJbmZvKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChpbmRleE5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgbmV3UnVsZXMucHVzaChuZXcgRGVjbGFyYXRpb24oaW5kZXhOYW1lLCBuZXcgRGltZW5zaW9uKGkgKyAxKSwgZmFsc2UsIGZhbHNlLCB0aGlzLmluZGV4LCB0aGlzLmN1cnJlbnRGaWxlSW5mbykpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoa2V5TmFtZSkgew0KICAgICAgICAgICAgICAgICAgICBuZXdSdWxlcy5wdXNoKG5ldyBEZWNsYXJhdGlvbihrZXlOYW1lLCBrZXksIGZhbHNlLCBmYWxzZSwgdGhpcy5pbmRleCwgdGhpcy5jdXJyZW50RmlsZUluZm8pKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcnVsZXMucHVzaChuZXcgUnVsZXNldChbbmV3IChTZWxlY3RvcikoW25ldyBFbGVtZW50KCIiLCAnJicpXSldLCBuZXdSdWxlcywgcnMuc3RyaWN0SW1wb3J0cywgcnMudmlzaWJpbGl0eUluZm8oKSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5ldyBSdWxlc2V0KFtuZXcgKFNlbGVjdG9yKShbbmV3IEVsZW1lbnQoIiIsICcmJyldKV0sIHJ1bGVzLCBycy5zdHJpY3RJbXBvcnRzLCBycy52aXNpYmlsaXR5SW5mbygpKS5ldmFsKHRoaXMuY29udGV4dCk7DQogICAgICAgIH0NCiAgICB9OwoKICAgIHZhciBNYXRoSGVscGVyID0gZnVuY3Rpb24gKGZuLCB1bml0LCBuKSB7DQogICAgICAgIGlmICghKG4gaW5zdGFuY2VvZiBEaW1lbnNpb24pKSB7DQogICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdBcmd1bWVudCcsIG1lc3NhZ2U6ICdhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJyB9Ow0KICAgICAgICB9DQogICAgICAgIGlmICh1bml0ID09IG51bGwpIHsNCiAgICAgICAgICAgIHVuaXQgPSBuLnVuaXQ7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBuID0gbi51bmlmeSgpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKGZuKHBhcnNlRmxvYXQobi52YWx1ZSkpLCB1bml0KTsNCiAgICB9OwoKICAgIHZhciBtYXRoRnVuY3Rpb25zID0gew0KICAgICAgICAvLyBuYW1lLCAgdW5pdA0KICAgICAgICBjZWlsOiBudWxsLA0KICAgICAgICBmbG9vcjogbnVsbCwNCiAgICAgICAgc3FydDogbnVsbCwNCiAgICAgICAgYWJzOiBudWxsLA0KICAgICAgICB0YW46ICcnLA0KICAgICAgICBzaW46ICcnLA0KICAgICAgICBjb3M6ICcnLA0KICAgICAgICBhdGFuOiAncmFkJywNCiAgICAgICAgYXNpbjogJ3JhZCcsDQogICAgICAgIGFjb3M6ICdyYWQnDQogICAgfTsNCiAgICBmb3IgKHZhciBmIGluIG1hdGhGdW5jdGlvbnMpIHsNCiAgICAgICAgaWYgKG1hdGhGdW5jdGlvbnMuaGFzT3duUHJvcGVydHkoZikpIHsNCiAgICAgICAgICAgIG1hdGhGdW5jdGlvbnNbZl0gPSBNYXRoSGVscGVyLmJpbmQobnVsbCwgTWF0aFtmXSwgbWF0aEZ1bmN0aW9uc1tmXSk7DQogICAgICAgIH0NCiAgICB9DQogICAgbWF0aEZ1bmN0aW9ucy5yb3VuZCA9IGZ1bmN0aW9uIChuLCBmKSB7DQogICAgICAgIHZhciBmcmFjdGlvbiA9IHR5cGVvZiBmID09PSAndW5kZWZpbmVkJyA/IDAgOiBmLnZhbHVlOw0KICAgICAgICByZXR1cm4gTWF0aEhlbHBlcihmdW5jdGlvbiAobnVtKSB7IHJldHVybiBudW0udG9GaXhlZChmcmFjdGlvbik7IH0sIG51bGwsIG4pOw0KICAgIH07CgogICAgdmFyIG1pbk1heCA9IGZ1bmN0aW9uIChpc01pbiwgYXJncykgew0KICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncyk7DQogICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHsNCiAgICAgICAgICAgIGNhc2UgMDogdGhyb3cgeyB0eXBlOiAnQXJndW1lbnQnLCBtZXNzYWdlOiAnb25lIG9yIG1vcmUgYXJndW1lbnRzIHJlcXVpcmVkJyB9Ow0KICAgICAgICB9DQogICAgICAgIHZhciBpOyAvLyBrZXkgaXMgdGhlIHVuaXQudG9TdHJpbmcoKSBmb3IgdW5pZmllZCBEaW1lbnNpb24gdmFsdWVzLA0KICAgICAgICB2YXIgajsNCiAgICAgICAgdmFyIGN1cnJlbnQ7DQogICAgICAgIHZhciBjdXJyZW50VW5pZmllZDsNCiAgICAgICAgdmFyIHJlZmVyZW5jZVVuaWZpZWQ7DQogICAgICAgIHZhciB1bml0Ow0KICAgICAgICB2YXIgdW5pdFN0YXRpYzsNCiAgICAgICAgdmFyIHVuaXRDbG9uZTsNCiAgICAgICAgdmFyIC8vIGVsZW1zIG9ubHkgY29udGFpbnMgb3JpZ2luYWwgYXJndW1lbnQgdmFsdWVzLg0KICAgICAgICBvcmRlciA9IFtdOw0KICAgICAgICB2YXIgdmFsdWVzID0ge307DQogICAgICAgIC8vIHZhbHVlIGlzIHRoZSBpbmRleCBpbnRvIHRoZSBvcmRlciBhcnJheS4NCiAgICAgICAgZm9yIChpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGN1cnJlbnQgPSBhcmdzW2ldOw0KICAgICAgICAgICAgaWYgKCEoY3VycmVudCBpbnN0YW5jZW9mIERpbWVuc2lvbikpIHsNCiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmdzW2ldLnZhbHVlKSkgew0KICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhcmdzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzW2ldLnZhbHVlKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY3VycmVudFVuaWZpZWQgPSBjdXJyZW50LnVuaXQudG9TdHJpbmcoKSA9PT0gJycgJiYgdW5pdENsb25lICE9PSB1bmRlZmluZWQgPyBuZXcgRGltZW5zaW9uKGN1cnJlbnQudmFsdWUsIHVuaXRDbG9uZSkudW5pZnkoKSA6IGN1cnJlbnQudW5pZnkoKTsNCiAgICAgICAgICAgIHVuaXQgPSBjdXJyZW50VW5pZmllZC51bml0LnRvU3RyaW5nKCkgPT09ICcnICYmIHVuaXRTdGF0aWMgIT09IHVuZGVmaW5lZCA/IHVuaXRTdGF0aWMgOiBjdXJyZW50VW5pZmllZC51bml0LnRvU3RyaW5nKCk7DQogICAgICAgICAgICB1bml0U3RhdGljID0gdW5pdCAhPT0gJycgJiYgdW5pdFN0YXRpYyA9PT0gdW5kZWZpbmVkIHx8IHVuaXQgIT09ICcnICYmIG9yZGVyWzBdLnVuaWZ5KCkudW5pdC50b1N0cmluZygpID09PSAnJyA/IHVuaXQgOiB1bml0U3RhdGljOw0KICAgICAgICAgICAgdW5pdENsb25lID0gdW5pdCAhPT0gJycgJiYgdW5pdENsb25lID09PSB1bmRlZmluZWQgPyBjdXJyZW50LnVuaXQudG9TdHJpbmcoKSA6IHVuaXRDbG9uZTsNCiAgICAgICAgICAgIGogPSB2YWx1ZXNbJyddICE9PSB1bmRlZmluZWQgJiYgdW5pdCAhPT0gJycgJiYgdW5pdCA9PT0gdW5pdFN0YXRpYyA/IHZhbHVlc1snJ10gOiB2YWx1ZXNbdW5pdF07DQogICAgICAgICAgICBpZiAoaiA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgaWYgKHVuaXRTdGF0aWMgIT09IHVuZGVmaW5lZCAmJiB1bml0ICE9PSB1bml0U3RhdGljKSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ0FyZ3VtZW50JywgbWVzc2FnZTogJ2luY29tcGF0aWJsZSB0eXBlcycgfTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFsdWVzW3VuaXRdID0gb3JkZXIubGVuZ3RoOw0KICAgICAgICAgICAgICAgIG9yZGVyLnB1c2goY3VycmVudCk7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZWZlcmVuY2VVbmlmaWVkID0gb3JkZXJbal0udW5pdC50b1N0cmluZygpID09PSAnJyAmJiB1bml0Q2xvbmUgIT09IHVuZGVmaW5lZCA/IG5ldyBEaW1lbnNpb24ob3JkZXJbal0udmFsdWUsIHVuaXRDbG9uZSkudW5pZnkoKSA6IG9yZGVyW2pdLnVuaWZ5KCk7DQogICAgICAgICAgICBpZiAoaXNNaW4gJiYgY3VycmVudFVuaWZpZWQudmFsdWUgPCByZWZlcmVuY2VVbmlmaWVkLnZhbHVlIHx8DQogICAgICAgICAgICAgICAgIWlzTWluICYmIGN1cnJlbnRVbmlmaWVkLnZhbHVlID4gcmVmZXJlbmNlVW5pZmllZC52YWx1ZSkgew0KICAgICAgICAgICAgICAgIG9yZGVyW2pdID0gY3VycmVudDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAob3JkZXIubGVuZ3RoID09IDEpIHsNCiAgICAgICAgICAgIHJldHVybiBvcmRlclswXTsNCiAgICAgICAgfQ0KICAgICAgICBhcmdzID0gb3JkZXIubWFwKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLnRvQ1NTKHRoaXMuY29udGV4dCk7IH0pLmpvaW4odGhpcy5jb250ZXh0LmNvbXByZXNzID8gJywnIDogJywgJyk7DQogICAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzKChpc01pbiA/ICdtaW4nIDogJ21heCcpICsgIigiICsgYXJncyArICIpIik7DQogICAgfTsNCiAgICB2YXIgbnVtYmVyID0gew0KICAgICAgICBtaW46IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciBhcmdzID0gW107DQogICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgew0KICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG1pbk1heCh0cnVlLCBhcmdzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChlKSB7IH0NCiAgICAgICAgfSwNCiAgICAgICAgbWF4OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgYXJncyA9IFtdOw0KICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsNCiAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHJldHVybiBtaW5NYXgoZmFsc2UsIGFyZ3MpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfQ0KICAgICAgICB9LA0KICAgICAgICBjb252ZXJ0OiBmdW5jdGlvbiAodmFsLCB1bml0KSB7DQogICAgICAgICAgICByZXR1cm4gdmFsLmNvbnZlcnRUbyh1bml0LnZhbHVlKTsNCiAgICAgICAgfSwNCiAgICAgICAgcGk6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKE1hdGguUEkpOw0KICAgICAgICB9LA0KICAgICAgICBtb2Q6IGZ1bmN0aW9uIChhLCBiKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbihhLnZhbHVlICUgYi52YWx1ZSwgYS51bml0KTsNCiAgICAgICAgfSwNCiAgICAgICAgcG93OiBmdW5jdGlvbiAoeCwgeSkgew0KICAgICAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgeSA9PT0gJ251bWJlcicpIHsNCiAgICAgICAgICAgICAgICB4ID0gbmV3IERpbWVuc2lvbih4KTsNCiAgICAgICAgICAgICAgICB5ID0gbmV3IERpbWVuc2lvbih5KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKCEoeCBpbnN0YW5jZW9mIERpbWVuc2lvbikgfHwgISh5IGluc3RhbmNlb2YgRGltZW5zaW9uKSkgew0KICAgICAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ0FyZ3VtZW50JywgbWVzc2FnZTogJ2FyZ3VtZW50cyBtdXN0IGJlIG51bWJlcnMnIH07DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbihNYXRoLnBvdyh4LnZhbHVlLCB5LnZhbHVlKSwgeC51bml0KTsNCiAgICAgICAgfSwNCiAgICAgICAgcGVyY2VudGFnZTogZnVuY3Rpb24gKG4pIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBNYXRoSGVscGVyKGZ1bmN0aW9uIChudW0pIHsgcmV0dXJuIG51bSAqIDEwMDsgfSwgJyUnLCBuKTsNCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0NCiAgICB9OwoKICAgIHZhciBzdHJpbmcgPSB7DQogICAgICAgIGU6IGZ1bmN0aW9uIChzdHIpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgUXVvdGVkKCciJywgc3RyIGluc3RhbmNlb2YgSmF2YVNjcmlwdCA/IHN0ci5ldmFsdWF0ZWQgOiBzdHIudmFsdWUsIHRydWUpOw0KICAgICAgICB9LA0KICAgICAgICBlc2NhcGU6IGZ1bmN0aW9uIChzdHIpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzKGVuY29kZVVSSShzdHIudmFsdWUpLnJlcGxhY2UoLz0vZywgJyUzRCcpLnJlcGxhY2UoLzovZywgJyUzQScpLnJlcGxhY2UoLyMvZywgJyUyMycpLnJlcGxhY2UoLzsvZywgJyUzQicpDQogICAgICAgICAgICAgICAgLnJlcGxhY2UoL1woL2csICclMjgnKS5yZXBsYWNlKC9cKS9nLCAnJTI5JykpOw0KICAgICAgICB9LA0KICAgICAgICByZXBsYWNlOiBmdW5jdGlvbiAoc3RyaW5nLCBwYXR0ZXJuLCByZXBsYWNlbWVudCwgZmxhZ3MpIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBzdHJpbmcudmFsdWU7DQogICAgICAgICAgICByZXBsYWNlbWVudCA9IChyZXBsYWNlbWVudC50eXBlID09PSAnUXVvdGVkJykgPw0KICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50LnZhbHVlIDogcmVwbGFjZW1lbnQudG9DU1MoKTsNCiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAocGF0dGVybi52YWx1ZSwgZmxhZ3MgPyBmbGFncy52YWx1ZSA6ICcnKSwgcmVwbGFjZW1lbnQpOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBRdW90ZWQoc3RyaW5nLnF1b3RlIHx8ICcnLCByZXN1bHQsIHN0cmluZy5lc2NhcGVkKTsNCiAgICAgICAgfSwNCiAgICAgICAgJyUnOiBmdW5jdGlvbiAoc3RyaW5nIC8qIGFyZywgYXJnLCAuLi4gKi8pIHsNCiAgICAgICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBzdHJpbmcudmFsdWU7DQogICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpKSB7DQogICAgICAgICAgICAgICAgLyoganNoaW50IGxvb3BmdW5jOnRydWUgKi8NCiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvJVtzZGFdL2ksIGZ1bmN0aW9uICh0b2tlbikgew0KICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSAoKGFyZ3NbaV0udHlwZSA9PT0gJ1F1b3RlZCcpICYmDQogICAgICAgICAgICAgICAgICAgICAgICB0b2tlbi5tYXRjaCgvcy9pKSkgPyBhcmdzW2ldLnZhbHVlIDogYXJnc1tpXS50b0NTUygpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW4ubWF0Y2goL1tBLVpdJC8pID8gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSA6IHZhbHVlOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIF9sb29wXzEoaSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvJSUvZywgJyUnKTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgUXVvdGVkKHN0cmluZy5xdW90ZSB8fCAnJywgcmVzdWx0LCBzdHJpbmcuZXNjYXBlZCk7DQogICAgICAgIH0NCiAgICB9OwoKICAgIHZhciBzdmcgPSAoZnVuY3Rpb24gKGVudmlyb25tZW50KSB7DQogICAgICAgIHJldHVybiB7ICdzdmctZ3JhZGllbnQnOiBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7DQogICAgICAgICAgICAgICAgdmFyIHN0b3BzOw0KICAgICAgICAgICAgICAgIHZhciBncmFkaWVudERpcmVjdGlvblN2ZzsNCiAgICAgICAgICAgICAgICB2YXIgZ3JhZGllbnRUeXBlID0gJ2xpbmVhcic7DQogICAgICAgICAgICAgICAgdmFyIHJlY3RhbmdsZURpbWVuc2lvbiA9ICd4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIic7DQogICAgICAgICAgICAgICAgdmFyIHJlbmRlckVudiA9IHsgY29tcHJlc3M6IGZhbHNlIH07DQogICAgICAgICAgICAgICAgdmFyIHJldHVybmVyOw0KICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb25WYWx1ZSA9IGRpcmVjdGlvbi50b0NTUyhyZW5kZXJFbnYpOw0KICAgICAgICAgICAgICAgIHZhciBpOw0KICAgICAgICAgICAgICAgIHZhciBjb2xvcjsNCiAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb247DQogICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uVmFsdWU7DQogICAgICAgICAgICAgICAgdmFyIGFscGhhOw0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRocm93QXJndW1lbnREZXNjcmlwdG9yKCkgew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdBcmd1bWVudCcsDQogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnc3ZnLWdyYWRpZW50IGV4cGVjdHMgZGlyZWN0aW9uLCBzdGFydF9jb2xvciBbc3RhcnRfcG9zaXRpb25dLCBbY29sb3IgcG9zaXRpb24sXS4uLiwnICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIGVuZF9jb2xvciBbZW5kX3Bvc2l0aW9uXSBvciBkaXJlY3Rpb24sIGNvbG9yIGxpc3QnIH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1sxXS52YWx1ZS5sZW5ndGggPCAyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvd0FyZ3VtZW50RGVzY3JpcHRvcigpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHN0b3BzID0gYXJndW1lbnRzWzFdLnZhbHVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMykgew0KICAgICAgICAgICAgICAgICAgICB0aHJvd0FyZ3VtZW50RGVzY3JpcHRvcigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgc3RvcHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvblZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvIGJvdHRvbSc6DQogICAgICAgICAgICAgICAgICAgICAgICBncmFkaWVudERpcmVjdGlvblN2ZyA9ICd4MT0iMCUiIHkxPSIwJSIgeDI9IjAlIiB5Mj0iMTAwJSInOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvIHJpZ2h0JzoNCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYWRpZW50RGlyZWN0aW9uU3ZnID0gJ3gxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIic7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAndG8gYm90dG9tIHJpZ2h0JzoNCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYWRpZW50RGlyZWN0aW9uU3ZnID0gJ3gxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlICd0byB0b3AgcmlnaHQnOg0KICAgICAgICAgICAgICAgICAgICAgICAgZ3JhZGllbnREaXJlY3Rpb25TdmcgPSAneDE9IjAlIiB5MT0iMTAwJSIgeDI9IjEwMCUiIHkyPSIwJSInOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VsbGlwc2UnOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICdlbGxpcHNlIGF0IGNlbnRlcic6DQogICAgICAgICAgICAgICAgICAgICAgICBncmFkaWVudFR5cGUgPSAncmFkaWFsJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGdyYWRpZW50RGlyZWN0aW9uU3ZnID0gJ2N4PSI1MCUiIGN5PSI1MCUiIHI9Ijc1JSInOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVjdGFuZ2xlRGltZW5zaW9uID0gJ3g9Ii01MCIgeT0iLTUwIiB3aWR0aD0iMTAxIiBoZWlnaHQ9IjEwMSInOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdBcmd1bWVudCcsIG1lc3NhZ2U6ICdzdmctZ3JhZGllbnQgZGlyZWN0aW9uIG11c3QgYmUgXCd0byBib3R0b21cJywgXCd0byByaWdodFwnLCcgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIFwndG8gYm90dG9tIHJpZ2h0XCcsIFwndG8gdG9wIHJpZ2h0XCcgb3IgXCdlbGxpcHNlIGF0IGNlbnRlclwnJyB9Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm5lciA9ICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDEgMVwiPjwiICsgZ3JhZGllbnRUeXBlICsgIkdyYWRpZW50IGlkPVwiZ1wiICIgKyBncmFkaWVudERpcmVjdGlvblN2ZyArICI+IjsNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3RvcHMubGVuZ3RoOyBpICs9IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3BzW2ldIGluc3RhbmNlb2YgRXhwcmVzc2lvbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29sb3IgPSBzdG9wc1tpXS52YWx1ZVswXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gc3RvcHNbaV0udmFsdWVbMV07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb2xvciA9IHN0b3BzW2ldOw0KICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSB1bmRlZmluZWQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKCEoY29sb3IgaW5zdGFuY2VvZiBDb2xvcikgfHwgKCEoKGkgPT09IDAgfHwgaSArIDEgPT09IHN0b3BzLmxlbmd0aCkgJiYgcG9zaXRpb24gPT09IHVuZGVmaW5lZCkgJiYgIShwb3NpdGlvbiBpbnN0YW5jZW9mIERpbWVuc2lvbikpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvd0FyZ3VtZW50RGVzY3JpcHRvcigpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uVmFsdWUgPSBwb3NpdGlvbiA/IHBvc2l0aW9uLnRvQ1NTKHJlbmRlckVudikgOiBpID09PSAwID8gJzAlJyA6ICcxMDAlJzsNCiAgICAgICAgICAgICAgICAgICAgYWxwaGEgPSBjb2xvci5hbHBoYTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuZXIgKz0gIjxzdG9wIG9mZnNldD1cIiIgKyBwb3NpdGlvblZhbHVlICsgIlwiIHN0b3AtY29sb3I9XCIiICsgY29sb3IudG9SR0IoKSArICJcIiIgKyAoYWxwaGEgPCAxID8gIiBzdG9wLW9wYWNpdHk9XCIiICsgYWxwaGEgKyAiXCIiIDogJycpICsgIi8+IjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuZXIgKz0gIjwvIiArIGdyYWRpZW50VHlwZSArICJHcmFkaWVudD48cmVjdCAiICsgcmVjdGFuZ2xlRGltZW5zaW9uICsgIiBmaWxsPVwidXJsKCNnKVwiIC8+PC9zdmc+IjsNCiAgICAgICAgICAgICAgICByZXR1cm5lciA9IGVuY29kZVVSSUNvbXBvbmVudChyZXR1cm5lcik7DQogICAgICAgICAgICAgICAgcmV0dXJuZXIgPSAiZGF0YTppbWFnZS9zdmcreG1sLCIgKyByZXR1cm5lcjsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVSTChuZXcgUXVvdGVkKCInIiArIHJldHVybmVyICsgIiciLCByZXR1cm5lciwgZmFsc2UsIHRoaXMuaW5kZXgsIHRoaXMuY3VycmVudEZpbGVJbmZvKSwgdGhpcy5pbmRleCwgdGhpcy5jdXJyZW50RmlsZUluZm8pOw0KICAgICAgICAgICAgfSB9Ow0KICAgIH0pOwoKICAgIHZhciBpc2EgPSBmdW5jdGlvbiAobiwgVHlwZSkgeyByZXR1cm4gKG4gaW5zdGFuY2VvZiBUeXBlKSA/IEtleXdvcmQuVHJ1ZSA6IEtleXdvcmQuRmFsc2U7IH07DQogICAgdmFyIGlzdW5pdCA9IGZ1bmN0aW9uIChuLCB1bml0KSB7DQogICAgICAgIGlmICh1bml0ID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgIHRocm93IHsgdHlwZTogJ0FyZ3VtZW50JywgbWVzc2FnZTogJ21pc3NpbmcgdGhlIHJlcXVpcmVkIHNlY29uZCBhcmd1bWVudCB0byBpc3VuaXQuJyB9Ow0KICAgICAgICB9DQogICAgICAgIHVuaXQgPSB0eXBlb2YgdW5pdC52YWx1ZSA9PT0gJ3N0cmluZycgPyB1bml0LnZhbHVlIDogdW5pdDsNCiAgICAgICAgaWYgKHR5cGVvZiB1bml0ICE9PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgdGhyb3cgeyB0eXBlOiAnQXJndW1lbnQnLCBtZXNzYWdlOiAnU2Vjb25kIGFyZ3VtZW50IHRvIGlzdW5pdCBzaG91bGQgYmUgYSB1bml0IG9yIGEgc3RyaW5nLicgfTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKG4gaW5zdGFuY2VvZiBEaW1lbnNpb24pICYmIG4udW5pdC5pcyh1bml0KSA/IEtleXdvcmQuVHJ1ZSA6IEtleXdvcmQuRmFsc2U7DQogICAgfTsNCiAgICB2YXIgdHlwZXMgPSB7DQogICAgICAgIGlzcnVsZXNldDogZnVuY3Rpb24gKG4pIHsNCiAgICAgICAgICAgIHJldHVybiBpc2EobiwgRGV0YWNoZWRSdWxlc2V0KTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNjb2xvcjogZnVuY3Rpb24gKG4pIHsNCiAgICAgICAgICAgIHJldHVybiBpc2EobiwgQ29sb3IpOw0KICAgICAgICB9LA0KICAgICAgICBpc251bWJlcjogZnVuY3Rpb24gKG4pIHsNCiAgICAgICAgICAgIHJldHVybiBpc2EobiwgRGltZW5zaW9uKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNzdHJpbmc6IGZ1bmN0aW9uIChuKSB7DQogICAgICAgICAgICByZXR1cm4gaXNhKG4sIFF1b3RlZCk7DQogICAgICAgIH0sDQogICAgICAgIGlza2V5d29yZDogZnVuY3Rpb24gKG4pIHsNCiAgICAgICAgICAgIHJldHVybiBpc2EobiwgS2V5d29yZCk7DQogICAgICAgIH0sDQogICAgICAgIGlzdXJsOiBmdW5jdGlvbiAobikgew0KICAgICAgICAgICAgcmV0dXJuIGlzYShuLCBVUkwpOw0KICAgICAgICB9LA0KICAgICAgICBpc3BpeGVsOiBmdW5jdGlvbiAobikgew0KICAgICAgICAgICAgcmV0dXJuIGlzdW5pdChuLCAncHgnKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNwZXJjZW50YWdlOiBmdW5jdGlvbiAobikgew0KICAgICAgICAgICAgcmV0dXJuIGlzdW5pdChuLCAnJScpOw0KICAgICAgICB9LA0KICAgICAgICBpc2VtOiBmdW5jdGlvbiAobikgew0KICAgICAgICAgICAgcmV0dXJuIGlzdW5pdChuLCAnZW0nKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXN1bml0OiBpc3VuaXQsDQogICAgICAgIHVuaXQ6IGZ1bmN0aW9uICh2YWwsIHVuaXQpIHsNCiAgICAgICAgICAgIGlmICghKHZhbCBpbnN0YW5jZW9mIERpbWVuc2lvbikpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyB7IHR5cGU6ICdBcmd1bWVudCcsDQogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJ0aGUgZmlyc3QgYXJndW1lbnQgdG8gdW5pdCBtdXN0IGJlIGEgbnVtYmVyIiArICh2YWwgaW5zdGFuY2VvZiBPcGVyYXRpb24gPyAnLiBIYXZlIHlvdSBmb3Jnb3R0ZW4gcGFyZW50aGVzaXM/JyA6ICcnKSB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHVuaXQpIHsNCiAgICAgICAgICAgICAgICBpZiAodW5pdCBpbnN0YW5jZW9mIEtleXdvcmQpIHsNCiAgICAgICAgICAgICAgICAgICAgdW5pdCA9IHVuaXQudmFsdWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB1bml0ID0gdW5pdC50b0NTUygpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHVuaXQgPSAnJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBuZXcgRGltZW5zaW9uKHZhbC52YWx1ZSwgdW5pdCk7DQogICAgICAgIH0sDQogICAgICAgICdnZXQtdW5pdCc6IGZ1bmN0aW9uIChuKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IEFub255bW91cyhuLnVuaXQpOw0KICAgICAgICB9DQogICAgfTsKCiAgICB2YXIgZnVuY3Rpb25zID0gKGZ1bmN0aW9uIChlbnZpcm9ubWVudCkgew0KICAgICAgICB2YXIgZnVuY3Rpb25zID0geyBmdW5jdGlvblJlZ2lzdHJ5OiBmdW5jdGlvblJlZ2lzdHJ5LCBmdW5jdGlvbkNhbGxlcjogZnVuY3Rpb25DYWxsZXIgfTsNCiAgICAgICAgLy8gcmVnaXN0ZXIgZnVuY3Rpb25zDQogICAgICAgIGZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUoYm9vbGVhbiQxKTsNCiAgICAgICAgZnVuY3Rpb25SZWdpc3RyeS5hZGQoJ2RlZmF1bHQnLCBkZWZhdWx0RnVuYy5ldmFsLmJpbmQoZGVmYXVsdEZ1bmMpKTsNCiAgICAgICAgZnVuY3Rpb25SZWdpc3RyeS5hZGRNdWx0aXBsZShjb2xvcik7DQogICAgICAgIGZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUoY29sb3JCbGVuZCk7DQogICAgICAgIGZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUoZGF0YVVyaShlbnZpcm9ubWVudCkpOw0KICAgICAgICBmdW5jdGlvblJlZ2lzdHJ5LmFkZE11bHRpcGxlKGxpc3QpOw0KICAgICAgICBmdW5jdGlvblJlZ2lzdHJ5LmFkZE11bHRpcGxlKG1hdGhGdW5jdGlvbnMpOw0KICAgICAgICBmdW5jdGlvblJlZ2lzdHJ5LmFkZE11bHRpcGxlKG51bWJlcik7DQogICAgICAgIGZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUoc3RyaW5nKTsNCiAgICAgICAgZnVuY3Rpb25SZWdpc3RyeS5hZGRNdWx0aXBsZShzdmcoKSk7DQogICAgICAgIGZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUodHlwZXMpOw0KICAgICAgICByZXR1cm4gZnVuY3Rpb25zOw0KICAgIH0pOwoKICAgIGZ1bmN0aW9uIHRyYW5zZm9ybVRyZWUgKHJvb3QsIG9wdGlvbnMpIHsNCiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307DQogICAgICAgIHZhciBldmFsZFJvb3Q7DQogICAgICAgIHZhciB2YXJpYWJsZXMgPSBvcHRpb25zLnZhcmlhYmxlczsNCiAgICAgICAgdmFyIGV2YWxFbnYgPSBuZXcgY29udGV4dHMuRXZhbChvcHRpb25zKTsNCiAgICAgICAgLy8NCiAgICAgICAgLy8gQWxsb3dzIHNldHRpbmcgdmFyaWFibGVzIHdpdGggYSBoYXNoLCBzbzoNCiAgICAgICAgLy8NCiAgICAgICAgLy8gICBgeyBjb2xvcjogbmV3IHRyZWUuQ29sb3IoJyNmMDEnKSB9YCB3aWxsIGJlY29tZToNCiAgICAgICAgLy8NCiAgICAgICAgLy8gICBuZXcgdHJlZS5EZWNsYXJhdGlvbignQGNvbG9yJywNCiAgICAgICAgLy8gICAgIG5ldyB0cmVlLlZhbHVlKFsNCiAgICAgICAgLy8gICAgICAgbmV3IHRyZWUuRXhwcmVzc2lvbihbDQogICAgICAgIC8vICAgICAgICAgbmV3IHRyZWUuQ29sb3IoJyNmMDEnKQ0KICAgICAgICAvLyAgICAgICBdKQ0KICAgICAgICAvLyAgICAgXSkNCiAgICAgICAgLy8gICApDQogICAgICAgIC8vDQogICAgICAgIGlmICh0eXBlb2YgdmFyaWFibGVzID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheSh2YXJpYWJsZXMpKSB7DQogICAgICAgICAgICB2YXJpYWJsZXMgPSBPYmplY3Qua2V5cyh2YXJpYWJsZXMpLm1hcChmdW5jdGlvbiAoaykgew0KICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZhcmlhYmxlc1trXTsNCiAgICAgICAgICAgICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIHRyZWUuVmFsdWUpKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgdHJlZS5FeHByZXNzaW9uKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBuZXcgdHJlZS5FeHByZXNzaW9uKFt2YWx1ZV0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IHRyZWUuVmFsdWUoW3ZhbHVlXSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdHJlZS5EZWNsYXJhdGlvbigiQCIgKyBrLCB2YWx1ZSwgZmFsc2UsIG51bGwsIDApOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBldmFsRW52LmZyYW1lcyA9IFtuZXcgdHJlZS5SdWxlc2V0KG51bGwsIHZhcmlhYmxlcyldOw0KICAgICAgICB9DQogICAgICAgIHZhciB2aXNpdG9ycyQxID0gWw0KICAgICAgICAgICAgbmV3IHZpc2l0b3JzLkpvaW5TZWxlY3RvclZpc2l0b3IoKSwNCiAgICAgICAgICAgIG5ldyB2aXNpdG9ycy5NYXJrVmlzaWJsZVNlbGVjdG9yc1Zpc2l0b3IodHJ1ZSksDQogICAgICAgICAgICBuZXcgdmlzaXRvcnMuRXh0ZW5kVmlzaXRvcigpLA0KICAgICAgICAgICAgbmV3IHZpc2l0b3JzLlRvQ1NTVmlzaXRvcih7IGNvbXByZXNzOiBCb29sZWFuKG9wdGlvbnMuY29tcHJlc3MpIH0pDQogICAgICAgIF07DQogICAgICAgIHZhciBwcmVFdmFsVmlzaXRvcnMgPSBbXTsNCiAgICAgICAgdmFyIHY7DQogICAgICAgIHZhciB2aXNpdG9ySXRlcmF0b3I7DQogICAgICAgIC8qKg0KICAgICAgICAgKiBmaXJzdCgpIC8gZ2V0KCkgYWxsb3dzIHZpc2l0b3JzIHRvIGJlIGFkZGVkIHdoaWxlIHZpc2l0aW5nDQogICAgICAgICAqDQogICAgICAgICAqIEB0b2RvIEFkZCBzY29waW5nIGZvciB2aXNpdG9ycyBqdXN0IGxpa2UgZnVuY3Rpb25zIGZvciBAcGx1Z2luOyByaWdodCBub3cgdGhleSdyZSBnbG9iYWwNCiAgICAgICAgICovDQogICAgICAgIGlmIChvcHRpb25zLnBsdWdpbk1hbmFnZXIpIHsNCiAgICAgICAgICAgIHZpc2l0b3JJdGVyYXRvciA9IG9wdGlvbnMucGx1Z2luTWFuYWdlci52aXNpdG9yKCk7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI7IGkrKykgew0KICAgICAgICAgICAgICAgIHZpc2l0b3JJdGVyYXRvci5maXJzdCgpOw0KICAgICAgICAgICAgICAgIHdoaWxlICgodiA9IHZpc2l0b3JJdGVyYXRvci5nZXQoKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHYuaXNQcmVFdmFsVmlzaXRvcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgcHJlRXZhbFZpc2l0b3JzLmluZGV4T2YodikgPT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlRXZhbFZpc2l0b3JzLnB1c2godik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5ydW4ocm9vdCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCB2aXNpdG9ycyQxLmluZGV4T2YodikgPT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuaXNQcmVWaXNpdG9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0b3JzJDEudW5zaGlmdCh2KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0b3JzJDEucHVzaCh2KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZXZhbGRSb290ID0gcm9vdC5ldmFsKGV2YWxFbnYpOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpc2l0b3JzJDEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHZpc2l0b3JzJDFbaV0ucnVuKGV2YWxkUm9vdCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gUnVuIGFueSByZW1haW5pbmcgdmlzaXRvcnMgYWRkZWQgYWZ0ZXIgZXZhbCBwYXNzDQogICAgICAgIGlmIChvcHRpb25zLnBsdWdpbk1hbmFnZXIpIHsNCiAgICAgICAgICAgIHZpc2l0b3JJdGVyYXRvci5maXJzdCgpOw0KICAgICAgICAgICAgd2hpbGUgKCh2ID0gdmlzaXRvckl0ZXJhdG9yLmdldCgpKSkgew0KICAgICAgICAgICAgICAgIGlmICh2aXNpdG9ycyQxLmluZGV4T2YodikgPT09IC0xICYmIHByZUV2YWxWaXNpdG9ycy5pbmRleE9mKHYpID09PSAtMSkgew0KICAgICAgICAgICAgICAgICAgICB2LnJ1bihldmFsZFJvb3QpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZXZhbGRSb290Ow0KICAgIH0KCiAgICAvKioNCiAgICAgKiBQbHVnaW4gTWFuYWdlcg0KICAgICAqLw0KICAgIHZhciBQbHVnaW5NYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICBmdW5jdGlvbiBQbHVnaW5NYW5hZ2VyKGxlc3MpIHsNCiAgICAgICAgICAgIHRoaXMubGVzcyA9IGxlc3M7DQogICAgICAgICAgICB0aGlzLnZpc2l0b3JzID0gW107DQogICAgICAgICAgICB0aGlzLnByZVByb2Nlc3NvcnMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMucG9zdFByb2Nlc3NvcnMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuaW5zdGFsbGVkUGx1Z2lucyA9IFtdOw0KICAgICAgICAgICAgdGhpcy5maWxlTWFuYWdlcnMgPSBbXTsNCiAgICAgICAgICAgIHRoaXMuaXRlcmF0b3IgPSAtMTsNCiAgICAgICAgICAgIHRoaXMucGx1Z2luQ2FjaGUgPSB7fTsNCiAgICAgICAgICAgIHRoaXMuTG9hZGVyID0gbmV3IGxlc3MuUGx1Z2luTG9hZGVyKGxlc3MpOw0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiBBZGRzIGFsbCB0aGUgcGx1Z2lucyBpbiB0aGUgYXJyYXkNCiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gcGx1Z2lucw0KICAgICAgICAgKi8NCiAgICAgICAgUGx1Z2luTWFuYWdlci5wcm90b3R5cGUuYWRkUGx1Z2lucyA9IGZ1bmN0aW9uIChwbHVnaW5zKSB7DQogICAgICAgICAgICBpZiAocGx1Z2lucykgew0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGx1Z2lucy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFBsdWdpbihwbHVnaW5zW2ldKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIC8qKg0KICAgICAgICAgKg0KICAgICAgICAgKiBAcGFyYW0gcGx1Z2luDQogICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlbmFtZQ0KICAgICAgICAgKi8NCiAgICAgICAgUGx1Z2luTWFuYWdlci5wcm90b3R5cGUuYWRkUGx1Z2luID0gZnVuY3Rpb24gKHBsdWdpbiwgZmlsZW5hbWUsIGZ1bmN0aW9uUmVnaXN0cnkpIHsNCiAgICAgICAgICAgIHRoaXMuaW5zdGFsbGVkUGx1Z2lucy5wdXNoKHBsdWdpbik7DQogICAgICAgICAgICBpZiAoZmlsZW5hbWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbkNhY2hlW2ZpbGVuYW1lXSA9IHBsdWdpbjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChwbHVnaW4uaW5zdGFsbCkgew0KICAgICAgICAgICAgICAgIHBsdWdpbi5pbnN0YWxsKHRoaXMubGVzcywgdGhpcywgZnVuY3Rpb25SZWdpc3RyeSB8fCB0aGlzLmxlc3MuZnVuY3Rpb25zLmZ1bmN0aW9uUmVnaXN0cnkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICAvKioNCiAgICAgICAgICoNCiAgICAgICAgICogQHBhcmFtIGZpbGVuYW1lDQogICAgICAgICAqLw0KICAgICAgICBQbHVnaW5NYW5hZ2VyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoZmlsZW5hbWUpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLnBsdWdpbkNhY2hlW2ZpbGVuYW1lXTsNCiAgICAgICAgfTsNCiAgICAgICAgLyoqDQogICAgICAgICAqIEFkZHMgYSB2aXNpdG9yLiBUaGUgdmlzaXRvciBvYmplY3QgaGFzIG9wdGlvbnMgb24gaXRzZWxmIHRvIGRldGVybWluZQ0KICAgICAgICAgKiB3aGVuIGl0IHNob3VsZCBydW4uDQogICAgICAgICAqIEBwYXJhbSB2aXNpdG9yDQogICAgICAgICAqLw0KICAgICAgICBQbHVnaW5NYW5hZ2VyLnByb3RvdHlwZS5hZGRWaXNpdG9yID0gZnVuY3Rpb24gKHZpc2l0b3IpIHsNCiAgICAgICAgICAgIHRoaXMudmlzaXRvcnMucHVzaCh2aXNpdG9yKTsNCiAgICAgICAgfTsNCiAgICAgICAgLyoqDQogICAgICAgICAqIEFkZHMgYSBwcmUgcHJvY2Vzc29yIG9iamVjdA0KICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gcHJlUHJvY2Vzc29yDQogICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwcmlvcml0eSAtIGd1aWRlbGluZXMgMSA9IGJlZm9yZSBpbXBvcnQsIDEwMDAgPSBpbXBvcnQsIDIwMDAgPSBhZnRlciBpbXBvcnQNCiAgICAgICAgICovDQogICAgICAgIFBsdWdpbk1hbmFnZXIucHJvdG90eXBlLmFkZFByZVByb2Nlc3NvciA9IGZ1bmN0aW9uIChwcmVQcm9jZXNzb3IsIHByaW9yaXR5KSB7DQogICAgICAgICAgICB2YXIgaW5kZXhUb0luc2VydEF0Ow0KICAgICAgICAgICAgZm9yIChpbmRleFRvSW5zZXJ0QXQgPSAwOyBpbmRleFRvSW5zZXJ0QXQgPCB0aGlzLnByZVByb2Nlc3NvcnMubGVuZ3RoOyBpbmRleFRvSW5zZXJ0QXQrKykgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnByZVByb2Nlc3NvcnNbaW5kZXhUb0luc2VydEF0XS5wcmlvcml0eSA+PSBwcmlvcml0eSkgew0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnByZVByb2Nlc3NvcnMuc3BsaWNlKGluZGV4VG9JbnNlcnRBdCwgMCwgeyBwcmVQcm9jZXNzb3I6IHByZVByb2Nlc3NvciwgcHJpb3JpdHk6IHByaW9yaXR5IH0pOw0KICAgICAgICB9Ow0KICAgICAgICAvKioNCiAgICAgICAgICogQWRkcyBhIHBvc3QgcHJvY2Vzc29yIG9iamVjdA0KICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gcG9zdFByb2Nlc3Nvcg0KICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcHJpb3JpdHkgLSBndWlkZWxpbmVzIDEgPSBiZWZvcmUgY29tcHJlc3Npb24sIDEwMDAgPSBjb21wcmVzc2lvbiwgMjAwMCA9IGFmdGVyIGNvbXByZXNzaW9uDQogICAgICAgICAqLw0KICAgICAgICBQbHVnaW5NYW5hZ2VyLnByb3RvdHlwZS5hZGRQb3N0UHJvY2Vzc29yID0gZnVuY3Rpb24gKHBvc3RQcm9jZXNzb3IsIHByaW9yaXR5KSB7DQogICAgICAgICAgICB2YXIgaW5kZXhUb0luc2VydEF0Ow0KICAgICAgICAgICAgZm9yIChpbmRleFRvSW5zZXJ0QXQgPSAwOyBpbmRleFRvSW5zZXJ0QXQgPCB0aGlzLnBvc3RQcm9jZXNzb3JzLmxlbmd0aDsgaW5kZXhUb0luc2VydEF0KyspIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5wb3N0UHJvY2Vzc29yc1tpbmRleFRvSW5zZXJ0QXRdLnByaW9yaXR5ID49IHByaW9yaXR5KSB7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMucG9zdFByb2Nlc3NvcnMuc3BsaWNlKGluZGV4VG9JbnNlcnRBdCwgMCwgeyBwb3N0UHJvY2Vzc29yOiBwb3N0UHJvY2Vzc29yLCBwcmlvcml0eTogcHJpb3JpdHkgfSk7DQogICAgICAgIH07DQogICAgICAgIC8qKg0KICAgICAgICAgKg0KICAgICAgICAgKiBAcGFyYW0gbWFuYWdlcg0KICAgICAgICAgKi8NCiAgICAgICAgUGx1Z2luTWFuYWdlci5wcm90b3R5cGUuYWRkRmlsZU1hbmFnZXIgPSBmdW5jdGlvbiAobWFuYWdlcikgew0KICAgICAgICAgICAgdGhpcy5maWxlTWFuYWdlcnMucHVzaChtYW5hZ2VyKTsNCiAgICAgICAgfTsNCiAgICAgICAgLyoqDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0NCiAgICAgICAgICogQHByaXZhdGUNCiAgICAgICAgICovDQogICAgICAgIFBsdWdpbk1hbmFnZXIucHJvdG90eXBlLmdldFByZVByb2Nlc3NvcnMgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgcHJlUHJvY2Vzc29ycyA9IFtdOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnByZVByb2Nlc3NvcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBwcmVQcm9jZXNzb3JzLnB1c2godGhpcy5wcmVQcm9jZXNzb3JzW2ldLnByZVByb2Nlc3Nvcik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcHJlUHJvY2Vzc29yczsNCiAgICAgICAgfTsNCiAgICAgICAgLyoqDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0NCiAgICAgICAgICogQHByaXZhdGUNCiAgICAgICAgICovDQogICAgICAgIFBsdWdpbk1hbmFnZXIucHJvdG90eXBlLmdldFBvc3RQcm9jZXNzb3JzID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIHBvc3RQcm9jZXNzb3JzID0gW107DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9zdFByb2Nlc3NvcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBwb3N0UHJvY2Vzc29ycy5wdXNoKHRoaXMucG9zdFByb2Nlc3NvcnNbaV0ucG9zdFByb2Nlc3Nvcik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcG9zdFByb2Nlc3NvcnM7DQogICAgICAgIH07DQogICAgICAgIC8qKg0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9DQogICAgICAgICAqIEBwcml2YXRlDQogICAgICAgICAqLw0KICAgICAgICBQbHVnaW5NYW5hZ2VyLnByb3RvdHlwZS5nZXRWaXNpdG9ycyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpc2l0b3JzOw0KICAgICAgICB9Ow0KICAgICAgICBQbHVnaW5NYW5hZ2VyLnByb3RvdHlwZS52aXNpdG9yID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOw0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBmaXJzdDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICBzZWxmLml0ZXJhdG9yID0gLTE7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnZpc2l0b3JzW3NlbGYuaXRlcmF0b3JdOw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGYuaXRlcmF0b3IgKz0gMTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYudmlzaXRvcnNbc2VsZi5pdGVyYXRvcl07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgfTsNCiAgICAgICAgLyoqDQogICAgICAgICAqDQogICAgICAgICAqIEByZXR1cm5zIHtBcnJheX0NCiAgICAgICAgICogQHByaXZhdGUNCiAgICAgICAgICovDQogICAgICAgIFBsdWdpbk1hbmFnZXIucHJvdG90eXBlLmdldEZpbGVNYW5hZ2VycyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbGVNYW5hZ2VyczsNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIFBsdWdpbk1hbmFnZXI7DQogICAgfSgpKTsNCiAgICB2YXIgcG07DQogICAgdmFyIFBsdWdpbk1hbmFnZXJGYWN0b3J5ID0gZnVuY3Rpb24gKGxlc3MsIG5ld0ZhY3RvcnkpIHsNCiAgICAgICAgaWYgKG5ld0ZhY3RvcnkgfHwgIXBtKSB7DQogICAgICAgICAgICBwbSA9IG5ldyBQbHVnaW5NYW5hZ2VyKGxlc3MpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBwbTsNCiAgICB9OwoKICAgIGZ1bmN0aW9uIFNvdXJjZU1hcE91dHB1dCAoZW52aXJvbm1lbnQpIHsNCiAgICAgICAgdmFyIFNvdXJjZU1hcE91dHB1dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGZ1bmN0aW9uIFNvdXJjZU1hcE91dHB1dChvcHRpb25zKSB7DQogICAgICAgICAgICAgICAgdGhpcy5fY3NzID0gW107DQogICAgICAgICAgICAgICAgdGhpcy5fcm9vdE5vZGUgPSBvcHRpb25zLnJvb3ROb2RlOw0KICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRlbnRzTWFwID0gb3B0aW9ucy5jb250ZW50c01hcDsNCiAgICAgICAgICAgICAgICB0aGlzLl9jb250ZW50c0lnbm9yZWRDaGFyc01hcCA9IG9wdGlvbnMuY29udGVudHNJZ25vcmVkQ2hhcnNNYXA7DQogICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc291cmNlTWFwRmlsZW5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc291cmNlTWFwRmlsZW5hbWUgPSBvcHRpb25zLnNvdXJjZU1hcEZpbGVuYW1lLnJlcGxhY2UoL1xcL2csICcvJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuX291dHB1dEZpbGVuYW1lID0gb3B0aW9ucy5vdXRwdXRGaWxlbmFtZTsNCiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZU1hcFVSTCA9IG9wdGlvbnMuc291cmNlTWFwVVJMOw0KICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNvdXJjZU1hcEJhc2VwYXRoKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuX3NvdXJjZU1hcEJhc2VwYXRoID0gb3B0aW9ucy5zb3VyY2VNYXBCYXNlcGF0aC5yZXBsYWNlKC9cXC9nLCAnLycpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zb3VyY2VNYXBSb290cGF0aCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb3VyY2VNYXBSb290cGF0aCA9IG9wdGlvbnMuc291cmNlTWFwUm9vdHBhdGgucmVwbGFjZSgvXFwvZywgJy8nKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NvdXJjZU1hcFJvb3RwYXRoLmNoYXJBdCh0aGlzLl9zb3VyY2VNYXBSb290cGF0aC5sZW5ndGggLSAxKSAhPT0gJy8nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb3VyY2VNYXBSb290cGF0aCArPSAnLyc7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuX3NvdXJjZU1hcFJvb3RwYXRoID0gJyc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuX291dHB1dFNvdXJjZUZpbGVzID0gb3B0aW9ucy5vdXRwdXRTb3VyY2VGaWxlczsNCiAgICAgICAgICAgICAgICB0aGlzLl9zb3VyY2VNYXBHZW5lcmF0b3JDb25zdHJ1Y3RvciA9IGVudmlyb25tZW50LmdldFNvdXJjZU1hcEdlbmVyYXRvcigpOw0KICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVOdW1iZXIgPSAwOw0KICAgICAgICAgICAgICAgIHRoaXMuX2NvbHVtbiA9IDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBTb3VyY2VNYXBPdXRwdXQucHJvdG90eXBlLnJlbW92ZUJhc2VwYXRoID0gZnVuY3Rpb24gKHBhdGgpIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc291cmNlTWFwQmFzZXBhdGggJiYgcGF0aC5pbmRleE9mKHRoaXMuX3NvdXJjZU1hcEJhc2VwYXRoKSA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHJpbmcodGhpcy5fc291cmNlTWFwQmFzZXBhdGgubGVuZ3RoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGguY2hhckF0KDApID09PSAnXFwnIHx8IHBhdGguY2hhckF0KDApID09PSAnLycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cmluZygxKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gcGF0aDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBTb3VyY2VNYXBPdXRwdXQucHJvdG90eXBlLm5vcm1hbGl6ZUZpbGVuYW1lID0gZnVuY3Rpb24gKGZpbGVuYW1lKSB7DQogICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBmaWxlbmFtZS5yZXBsYWNlKC9cXC9nLCAnLycpOw0KICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gdGhpcy5yZW1vdmVCYXNlcGF0aChmaWxlbmFtZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLl9zb3VyY2VNYXBSb290cGF0aCB8fCAnJykgKyBmaWxlbmFtZTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBTb3VyY2VNYXBPdXRwdXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChjaHVuaywgZmlsZUluZm8sIGluZGV4LCBtYXBMaW5lcykgew0KICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBhZGRpbmcgZW1wdHkgc3RyaW5ncw0KICAgICAgICAgICAgICAgIGlmICghY2h1bmspIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgbGluZXMsIHNvdXJjZUxpbmVzLCBjb2x1bW5zLCBzb3VyY2VDb2x1bW5zLCBpOw0KICAgICAgICAgICAgICAgIGlmIChmaWxlSW5mbyAmJiBmaWxlSW5mby5maWxlbmFtZSkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXRTb3VyY2UgPSB0aGlzLl9jb250ZW50c01hcFtmaWxlSW5mby5maWxlbmFtZV07DQogICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB2YXJzL2Jhbm5lciBhZGRlZCB0byB0aGUgdG9wIG9mIHRoZSBmaWxlDQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jb250ZW50c0lnbm9yZWRDaGFyc01hcFtmaWxlSW5mby5maWxlbmFtZV0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkanVzdCB0aGUgaW5kZXgNCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4IC09IHRoaXMuX2NvbnRlbnRzSWdub3JlZENoYXJzTWFwW2ZpbGVJbmZvLmZpbGVuYW1lXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGp1c3QgdGhlIHNvdXJjZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRTb3VyY2UgPSBpbnB1dFNvdXJjZS5zbGljZSh0aGlzLl9jb250ZW50c0lnbm9yZWRDaGFyc01hcFtmaWxlSW5mby5maWxlbmFtZV0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICAgICAgICAgKiBpZ25vcmUgZW1wdHkgY29udGVudCwgb3IgZmFpbHNhZmUNCiAgICAgICAgICAgICAgICAgICAgICogaWYgY29udGVudHMgbWFwIGlzIGluY29ycmVjdA0KICAgICAgICAgICAgICAgICAgICAgKi8NCiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0U291cmNlID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2Nzcy5wdXNoKGNodW5rKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpbnB1dFNvdXJjZSA9IGlucHV0U291cmNlLnN1YnN0cmluZygwLCBpbmRleCk7DQogICAgICAgICAgICAgICAgICAgIHNvdXJjZUxpbmVzID0gaW5wdXRTb3VyY2Uuc3BsaXQoJ1xuJyk7DQogICAgICAgICAgICAgICAgICAgIHNvdXJjZUNvbHVtbnMgPSBzb3VyY2VMaW5lc1tzb3VyY2VMaW5lcy5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgbGluZXMgPSBjaHVuay5zcGxpdCgnXG4nKTsNCiAgICAgICAgICAgICAgICBjb2x1bW5zID0gbGluZXNbbGluZXMubGVuZ3RoIC0gMV07DQogICAgICAgICAgICAgICAgaWYgKGZpbGVJbmZvICYmIGZpbGVJbmZvLmZpbGVuYW1lKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghbWFwTGluZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NvdXJjZU1hcEdlbmVyYXRvci5hZGRNYXBwaW5nKHsgZ2VuZXJhdGVkOiB7IGxpbmU6IHRoaXMuX2xpbmVOdW1iZXIgKyAxLCBjb2x1bW46IHRoaXMuX2NvbHVtbiB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsOiB7IGxpbmU6IHNvdXJjZUxpbmVzLmxlbmd0aCwgY29sdW1uOiBzb3VyY2VDb2x1bW5zLmxlbmd0aCB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5ub3JtYWxpemVGaWxlbmFtZShmaWxlSW5mby5maWxlbmFtZSkgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zb3VyY2VNYXBHZW5lcmF0b3IuYWRkTWFwcGluZyh7IGdlbmVyYXRlZDogeyBsaW5lOiB0aGlzLl9saW5lTnVtYmVyICsgaSArIDEsIGNvbHVtbjogaSA9PT0gMCA/IHRoaXMuX2NvbHVtbiA6IDAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWw6IHsgbGluZTogc291cmNlTGluZXMubGVuZ3RoICsgaSwgY29sdW1uOiBpID09PSAwID8gc291cmNlQ29sdW1ucy5sZW5ndGggOiAwIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5ub3JtYWxpemVGaWxlbmFtZShmaWxlSW5mby5maWxlbmFtZSkgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2x1bW4gKz0gY29sdW1ucy5sZW5ndGg7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLl9saW5lTnVtYmVyICs9IGxpbmVzLmxlbmd0aCAtIDE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbHVtbiA9IGNvbHVtbnMubGVuZ3RoOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLl9jc3MucHVzaChjaHVuayk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgU291cmNlTWFwT3V0cHV0LnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jc3MubGVuZ3RoID09PSAwOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIFNvdXJjZU1hcE91dHB1dC5wcm90b3R5cGUudG9DU1MgPSBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgICAgIHRoaXMuX3NvdXJjZU1hcEdlbmVyYXRvciA9IG5ldyB0aGlzLl9zb3VyY2VNYXBHZW5lcmF0b3JDb25zdHJ1Y3Rvcih7IGZpbGU6IHRoaXMuX291dHB1dEZpbGVuYW1lLCBzb3VyY2VSb290OiBudWxsIH0pOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vdXRwdXRTb3VyY2VGaWxlcykgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBmaWxlbmFtZSBpbiB0aGlzLl9jb250ZW50c01hcCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnRlbnRzTWFwLmhhc093blByb3BlcnR5KGZpbGVuYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLl9jb250ZW50c01hcFtmaWxlbmFtZV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnRlbnRzSWdub3JlZENoYXJzTWFwW2ZpbGVuYW1lXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSBzb3VyY2Uuc2xpY2UodGhpcy5fY29udGVudHNJZ25vcmVkQ2hhcnNNYXBbZmlsZW5hbWVdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc291cmNlTWFwR2VuZXJhdG9yLnNldFNvdXJjZUNvbnRlbnQodGhpcy5ub3JtYWxpemVGaWxlbmFtZShmaWxlbmFtZSksIHNvdXJjZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5fcm9vdE5vZGUuZ2VuQ1NTKGNvbnRleHQsIHRoaXMpOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jc3MubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlTWFwVVJMID0gdm9pZCAwOw0KICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlTWFwQ29udGVudCA9IEpTT04uc3RyaW5naWZ5KHRoaXMuX3NvdXJjZU1hcEdlbmVyYXRvci50b0pTT04oKSk7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvdXJjZU1hcFVSTCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlTWFwVVJMID0gdGhpcy5zb3VyY2VNYXBVUkw7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5fc291cmNlTWFwRmlsZW5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZU1hcFVSTCA9IHRoaXMuX3NvdXJjZU1hcEZpbGVuYW1lOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlTWFwVVJMID0gc291cmNlTWFwVVJMOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZU1hcCA9IHNvdXJjZU1hcENvbnRlbnQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jc3Muam9pbignJyk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgcmV0dXJuIFNvdXJjZU1hcE91dHB1dDsNCiAgICAgICAgfSgpKTsNCiAgICAgICAgcmV0dXJuIFNvdXJjZU1hcE91dHB1dDsNCiAgICB9CgogICAgZnVuY3Rpb24gU291cmNlTWFwQnVpbGRlciAoU291cmNlTWFwT3V0cHV0LCBlbnZpcm9ubWVudCkgew0KICAgICAgICB2YXIgU291cmNlTWFwQnVpbGRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGZ1bmN0aW9uIFNvdXJjZU1hcEJ1aWxkZXIob3B0aW9ucykgew0KICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBTb3VyY2VNYXBCdWlsZGVyLnByb3RvdHlwZS50b0NTUyA9IGZ1bmN0aW9uIChyb290Tm9kZSwgb3B0aW9ucywgaW1wb3J0cykgew0KICAgICAgICAgICAgICAgIHZhciBzb3VyY2VNYXBPdXRwdXQgPSBuZXcgU291cmNlTWFwT3V0cHV0KHsNCiAgICAgICAgICAgICAgICAgICAgY29udGVudHNJZ25vcmVkQ2hhcnNNYXA6IGltcG9ydHMuY29udGVudHNJZ25vcmVkQ2hhcnMsDQogICAgICAgICAgICAgICAgICAgIHJvb3ROb2RlOiByb290Tm9kZSwNCiAgICAgICAgICAgICAgICAgICAgY29udGVudHNNYXA6IGltcG9ydHMuY29udGVudHMsDQogICAgICAgICAgICAgICAgICAgIHNvdXJjZU1hcEZpbGVuYW1lOiB0aGlzLm9wdGlvbnMuc291cmNlTWFwRmlsZW5hbWUsDQogICAgICAgICAgICAgICAgICAgIHNvdXJjZU1hcFVSTDogdGhpcy5vcHRpb25zLnNvdXJjZU1hcFVSTCwNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0RmlsZW5hbWU6IHRoaXMub3B0aW9ucy5zb3VyY2VNYXBPdXRwdXRGaWxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgc291cmNlTWFwQmFzZXBhdGg6IHRoaXMub3B0aW9ucy5zb3VyY2VNYXBCYXNlcGF0aCwNCiAgICAgICAgICAgICAgICAgICAgc291cmNlTWFwUm9vdHBhdGg6IHRoaXMub3B0aW9ucy5zb3VyY2VNYXBSb290cGF0aCwNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0U291cmNlRmlsZXM6IHRoaXMub3B0aW9ucy5vdXRwdXRTb3VyY2VGaWxlcywNCiAgICAgICAgICAgICAgICAgICAgc291cmNlTWFwR2VuZXJhdG9yOiB0aGlzLm9wdGlvbnMuc291cmNlTWFwR2VuZXJhdG9yLA0KICAgICAgICAgICAgICAgICAgICBzb3VyY2VNYXBGaWxlSW5saW5lOiB0aGlzLm9wdGlvbnMuc291cmNlTWFwRmlsZUlubGluZSwNCiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZVNvdXJjZW1hcEFubm90YXRpb246IHRoaXMub3B0aW9ucy5kaXNhYmxlU291cmNlbWFwQW5ub3RhdGlvbg0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHZhciBjc3MgPSBzb3VyY2VNYXBPdXRwdXQudG9DU1Mob3B0aW9ucyk7DQogICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VNYXAgPSBzb3VyY2VNYXBPdXRwdXQuc291cmNlTWFwOw0KICAgICAgICAgICAgICAgIHRoaXMuc291cmNlTWFwVVJMID0gc291cmNlTWFwT3V0cHV0LnNvdXJjZU1hcFVSTDsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNvdXJjZU1hcElucHV0RmlsZW5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VNYXBJbnB1dEZpbGVuYW1lID0gc291cmNlTWFwT3V0cHV0Lm5vcm1hbGl6ZUZpbGVuYW1lKHRoaXMub3B0aW9ucy5zb3VyY2VNYXBJbnB1dEZpbGVuYW1lKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zb3VyY2VNYXBCYXNlcGF0aCAhPT0gdW5kZWZpbmVkICYmIHRoaXMuc291cmNlTWFwVVJMICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VNYXBVUkwgPSBzb3VyY2VNYXBPdXRwdXQucmVtb3ZlQmFzZXBhdGgodGhpcy5zb3VyY2VNYXBVUkwpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gY3NzICsgdGhpcy5nZXRDU1NBcHBlbmRhZ2UoKTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBTb3VyY2VNYXBCdWlsZGVyLnByb3RvdHlwZS5nZXRDU1NBcHBlbmRhZ2UgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgdmFyIHNvdXJjZU1hcFVSTCA9IHRoaXMuc291cmNlTWFwVVJMOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc291cmNlTWFwRmlsZUlubGluZSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zb3VyY2VNYXAgPT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHNvdXJjZU1hcFVSTCA9ICJkYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LCIgKyBlbnZpcm9ubWVudC5lbmNvZGVCYXNlNjQodGhpcy5zb3VyY2VNYXApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVTb3VyY2VtYXBBbm5vdGF0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHNvdXJjZU1hcFVSTCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gIi8qIyBzb3VyY2VNYXBwaW5nVVJMPSIgKyBzb3VyY2VNYXBVUkwgKyAiICovIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIFNvdXJjZU1hcEJ1aWxkZXIucHJvdG90eXBlLmdldEV4dGVybmFsU291cmNlTWFwID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZU1hcDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBTb3VyY2VNYXBCdWlsZGVyLnByb3RvdHlwZS5zZXRFeHRlcm5hbFNvdXJjZU1hcCA9IGZ1bmN0aW9uIChzb3VyY2VNYXApIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZU1hcCA9IHNvdXJjZU1hcDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBTb3VyY2VNYXBCdWlsZGVyLnByb3RvdHlwZS5pc0lubGluZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNvdXJjZU1hcEZpbGVJbmxpbmU7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgU291cmNlTWFwQnVpbGRlci5wcm90b3R5cGUuZ2V0U291cmNlTWFwVVJMID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZU1hcFVSTDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBTb3VyY2VNYXBCdWlsZGVyLnByb3RvdHlwZS5nZXRPdXRwdXRGaWxlbmFtZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNvdXJjZU1hcE91dHB1dEZpbGVuYW1lOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIFNvdXJjZU1hcEJ1aWxkZXIucHJvdG90eXBlLmdldElucHV0RmlsZW5hbWUgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlTWFwSW5wdXRGaWxlbmFtZTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICByZXR1cm4gU291cmNlTWFwQnVpbGRlcjsNCiAgICAgICAgfSgpKTsNCiAgICAgICAgcmV0dXJuIFNvdXJjZU1hcEJ1aWxkZXI7DQogICAgfQoKICAgIGZ1bmN0aW9uIFBhcnNlVHJlZSAoU291cmNlTWFwQnVpbGRlcikgew0KICAgICAgICB2YXIgUGFyc2VUcmVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgZnVuY3Rpb24gUGFyc2VUcmVlKHJvb3QsIGltcG9ydHMpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnJvb3QgPSByb290Ow0KICAgICAgICAgICAgICAgIHRoaXMuaW1wb3J0cyA9IGltcG9ydHM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBQYXJzZVRyZWUucHJvdG90eXBlLnRvQ1NTID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsNCiAgICAgICAgICAgICAgICB2YXIgZXZhbGRSb290Ow0KICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB7fTsNCiAgICAgICAgICAgICAgICB2YXIgc291cmNlTWFwQnVpbGRlcjsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBldmFsZFJvb3QgPSB0cmFuc2Zvcm1UcmVlKHRoaXMucm9vdCwgb3B0aW9ucyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBMZXNzRXJyb3IoZSwgdGhpcy5pbXBvcnRzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXByZXNzID0gQm9vbGVhbihvcHRpb25zLmNvbXByZXNzKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXByZXNzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIkMS53YXJuKCdUaGUgY29tcHJlc3Mgb3B0aW9uIGhhcyBiZWVuIGRlcHJlY2F0ZWQuICcgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdXZSByZWNvbW1lbmQgeW91IHVzZSBhIGRlZGljYXRlZCBjc3MgbWluaWZpZXIsIGZvciBpbnN0YW5jZSBzZWUgbGVzcy1wbHVnaW4tY2xlYW4tY3NzLicpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhciB0b0NTU09wdGlvbnMgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb21wcmVzczogY29tcHJlc3MsDQogICAgICAgICAgICAgICAgICAgICAgICBkdW1wTGluZU51bWJlcnM6IG9wdGlvbnMuZHVtcExpbmVOdW1iZXJzLA0KICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0VW5pdHM6IEJvb2xlYW4ob3B0aW9ucy5zdHJpY3RVbml0cyksDQogICAgICAgICAgICAgICAgICAgICAgICBudW1QcmVjaXNpb246IDgNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc291cmNlTWFwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VNYXBCdWlsZGVyID0gbmV3IFNvdXJjZU1hcEJ1aWxkZXIob3B0aW9ucy5zb3VyY2VNYXApOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNzcyA9IHNvdXJjZU1hcEJ1aWxkZXIudG9DU1MoZXZhbGRSb290LCB0b0NTU09wdGlvbnMsIHRoaXMuaW1wb3J0cyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuY3NzID0gZXZhbGRSb290LnRvQ1NTKHRvQ1NTT3B0aW9ucyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IExlc3NFcnJvcihlLCB0aGlzLmltcG9ydHMpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5wbHVnaW5NYW5hZ2VyKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBwb3N0UHJvY2Vzc29ycyA9IG9wdGlvbnMucGx1Z2luTWFuYWdlci5nZXRQb3N0UHJvY2Vzc29ycygpOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvc3RQcm9jZXNzb3JzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuY3NzID0gcG9zdFByb2Nlc3NvcnNbaV0ucHJvY2VzcyhyZXN1bHQuY3NzLCB7IHNvdXJjZU1hcDogc291cmNlTWFwQnVpbGRlciwgb3B0aW9uczogb3B0aW9ucywgaW1wb3J0czogdGhpcy5pbXBvcnRzIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNvdXJjZU1hcCkgew0KICAgICAgICAgICAgICAgICAgICByZXN1bHQubWFwID0gc291cmNlTWFwQnVpbGRlci5nZXRFeHRlcm5hbFNvdXJjZU1hcCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXN1bHQuaW1wb3J0cyA9IFtdOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGZpbGUgaW4gdGhpcy5pbXBvcnRzLmZpbGVzKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmltcG9ydHMuZmlsZXMuaGFzT3duUHJvcGVydHkoZmlsZSkgJiYgZmlsZSAhPT0gdGhpcy5pbXBvcnRzLnJvb3RGaWxlbmFtZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmltcG9ydHMucHVzaChmaWxlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHJldHVybiBQYXJzZVRyZWU7DQogICAgICAgIH0oKSk7DQogICAgICAgIHJldHVybiBQYXJzZVRyZWU7DQogICAgfQoKICAgIGZ1bmN0aW9uIEltcG9ydE1hbmFnZXIgKGVudmlyb25tZW50KSB7DQogICAgICAgIC8vIEZpbGVJbmZvID0gew0KICAgICAgICAvLyAgJ3Jld3JpdGVVcmxzJyAtIG9wdGlvbiAtIHdoZXRoZXIgdG8gYWRqdXN0IFVSTCdzIHRvIGJlIHJlbGF0aXZlDQogICAgICAgIC8vICAnZmlsZW5hbWUnIC0gZnVsbCByZXNvbHZlZCBmaWxlbmFtZSBvZiBjdXJyZW50IGZpbGUNCiAgICAgICAgLy8gICdyb290cGF0aCcgLSBwYXRoIHRvIGFwcGVuZCB0byBub3JtYWwgVVJMcyBmb3IgdGhpcyBub2RlDQogICAgICAgIC8vICAnY3VycmVudERpcmVjdG9yeScgLSBwYXRoIHRvIHRoZSBjdXJyZW50IGZpbGUsIGFic29sdXRlDQogICAgICAgIC8vICAncm9vdEZpbGVuYW1lJyAtIGZpbGVuYW1lIG9mIHRoZSBiYXNlIGZpbGUNCiAgICAgICAgLy8gICdlbnRyeVBhdGgnIC0gYWJzb2x1dGUgcGF0aCB0byB0aGUgZW50cnkgZmlsZQ0KICAgICAgICAvLyAgJ3JlZmVyZW5jZScgLSB3aGV0aGVyIHRoZSBmaWxlIHNob3VsZCBub3QgYmUgb3V0cHV0IGFuZCBvbmx5IG91dHB1dCBwYXJ0cyB0aGF0IGFyZSByZWZlcmVuY2VkDQogICAgICAgIHZhciBJbXBvcnRNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgZnVuY3Rpb24gSW1wb3J0TWFuYWdlcihsZXNzLCBjb250ZXh0LCByb290RmlsZUluZm8pIHsNCiAgICAgICAgICAgICAgICB0aGlzLmxlc3MgPSBsZXNzOw0KICAgICAgICAgICAgICAgIHRoaXMucm9vdEZpbGVuYW1lID0gcm9vdEZpbGVJbmZvLmZpbGVuYW1lOw0KICAgICAgICAgICAgICAgIHRoaXMucGF0aHMgPSBjb250ZXh0LnBhdGhzIHx8IFtdOyAvLyBTZWFyY2ggcGF0aHMsIHdoZW4gaW1wb3J0aW5nDQogICAgICAgICAgICAgICAgdGhpcy5jb250ZW50cyA9IHt9OyAvLyBtYXAgLSBmaWxlbmFtZSB0byBjb250ZW50cyBvZiBhbGwgdGhlIGZpbGVzDQogICAgICAgICAgICAgICAgdGhpcy5jb250ZW50c0lnbm9yZWRDaGFycyA9IHt9OyAvLyBtYXAgLSBmaWxlbmFtZSB0byBsaW5lcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGVhY2ggZmlsZSB0byBpZ25vcmUNCiAgICAgICAgICAgICAgICB0aGlzLm1pbWUgPSBjb250ZXh0Lm1pbWU7DQogICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7DQogICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDsNCiAgICAgICAgICAgICAgICAvLyBEZXByZWNhdGVkPyBVbnVzZWQgb3V0c2lkZSBvZiBoZXJlLCBjb3VsZCBiZSB1c2VmdWwuDQogICAgICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IFtdOyAvLyBGaWxlcyB3aGljaCBoYXZlbid0IGJlZW4gaW1wb3J0ZWQgeWV0DQogICAgICAgICAgICAgICAgdGhpcy5maWxlcyA9IHt9OyAvLyBIb2xkcyB0aGUgaW1wb3J0ZWQgcGFyc2UgdHJlZXMuDQogICAgICAgICAgICB9DQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIEFkZCBhbiBpbXBvcnQgdG8gYmUgaW1wb3J0ZWQNCiAgICAgICAgICAgICAqIEBwYXJhbSBwYXRoIC0gdGhlIHJhdyBwYXRoDQogICAgICAgICAgICAgKiBAcGFyYW0gdHJ5QXBwZW5kRXh0ZW5zaW9uIC0gd2hldGhlciB0byB0cnkgYXBwZW5kaW5nIGEgZmlsZSBleHRlbnNpb24gKC5sZXNzIG9yIC5qcyBpZiB0aGUgcGF0aCBoYXMgbm8gZXh0ZW5zaW9uKQ0KICAgICAgICAgICAgICogQHBhcmFtIGN1cnJlbnRGaWxlSW5mbyAtIHRoZSBjdXJyZW50IGZpbGUgaW5mbyAodXNlZCBmb3IgaW5zdGFuY2UgdG8gd29yayBvdXQgcmVsYXRpdmUgcGF0aHMpDQogICAgICAgICAgICAgKiBAcGFyYW0gaW1wb3J0T3B0aW9ucyAtIGltcG9ydCBvcHRpb25zDQogICAgICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBjYWxsYmFjayBmb3Igd2hlbiBpdCBpcyBpbXBvcnRlZA0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBJbXBvcnRNYW5hZ2VyLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKHBhdGgsIHRyeUFwcGVuZEV4dGVuc2lvbiwgY3VycmVudEZpbGVJbmZvLCBpbXBvcnRPcHRpb25zLCBjYWxsYmFjaykgew0KICAgICAgICAgICAgICAgIHZhciBpbXBvcnRNYW5hZ2VyID0gdGhpcywgcGx1Z2luTG9hZGVyID0gdGhpcy5jb250ZXh0LnBsdWdpbk1hbmFnZXIuTG9hZGVyOw0KICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaChwYXRoKTsNCiAgICAgICAgICAgICAgICB2YXIgZmlsZVBhcnNlZEZ1bmMgPSBmdW5jdGlvbiAoZSwgcm9vdCwgZnVsbFBhdGgpIHsNCiAgICAgICAgICAgICAgICAgICAgaW1wb3J0TWFuYWdlci5xdWV1ZS5zcGxpY2UoaW1wb3J0TWFuYWdlci5xdWV1ZS5pbmRleE9mKHBhdGgpLCAxKTsgLy8gUmVtb3ZlIHRoZSBwYXRoIGZyb20gdGhlIHF1ZXVlDQogICAgICAgICAgICAgICAgICAgIHZhciBpbXBvcnRlZEVxdWFsc1Jvb3QgPSBmdWxsUGF0aCA9PT0gaW1wb3J0TWFuYWdlci5yb290RmlsZW5hbWU7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbXBvcnRPcHRpb25zLm9wdGlvbmFsICYmIGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHsgcnVsZXM6IFtdIH0sIGZhbHNlLCBudWxsKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlciQxLmluZm8oIlRoZSBmaWxlICIgKyBmdWxsUGF0aCArICIgd2FzIHNraXBwZWQgYmVjYXVzZSBpdCB3YXMgbm90IGZvdW5kIGFuZCB0aGUgaW1wb3J0IHdhcyBtYXJrZWQgb3B0aW9uYWwuIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmxpbmUgaW1wb3J0cyBhcmVuJ3QgY2FjaGVkIGhlcmUuDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBzdGFydCB0byBjYWNoZSB0aGVtLCBwbGVhc2UgbWFrZSBzdXJlIHRoZXkgd29uJ3QgY29uZmxpY3Qgd2l0aCBub24taW5saW5lIGltcG9ydHMgb2YgdGhlDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBzYW1lIG5hbWUgYXMgdGhleSB1c2VkIHRvIGRvIGJlZm9yZSB0aGlzIGNvbW1lbnQgYW5kIHRoZSBjb25kaXRpb24gYmVsb3cgaGF2ZSBiZWVuIGFkZGVkLg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbXBvcnRNYW5hZ2VyLmZpbGVzW2Z1bGxQYXRoXSAmJiAhaW1wb3J0T3B0aW9ucy5pbmxpbmUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRNYW5hZ2VyLmZpbGVzW2Z1bGxQYXRoXSA9IHsgcm9vdDogcm9vdCwgb3B0aW9uczogaW1wb3J0T3B0aW9ucyB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgJiYgIWltcG9ydE1hbmFnZXIuZXJyb3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRNYW5hZ2VyLmVycm9yID0gZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGUsIHJvb3QsIGltcG9ydGVkRXF1YWxzUm9vdCwgZnVsbFBhdGgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB2YXIgbmV3RmlsZUluZm8gPSB7DQogICAgICAgICAgICAgICAgICAgIHJld3JpdGVVcmxzOiB0aGlzLmNvbnRleHQucmV3cml0ZVVybHMsDQogICAgICAgICAgICAgICAgICAgIGVudHJ5UGF0aDogY3VycmVudEZpbGVJbmZvLmVudHJ5UGF0aCwNCiAgICAgICAgICAgICAgICAgICAgcm9vdHBhdGg6IGN1cnJlbnRGaWxlSW5mby5yb290cGF0aCwNCiAgICAgICAgICAgICAgICAgICAgcm9vdEZpbGVuYW1lOiBjdXJyZW50RmlsZUluZm8ucm9vdEZpbGVuYW1lDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB2YXIgZmlsZU1hbmFnZXIgPSBlbnZpcm9ubWVudC5nZXRGaWxlTWFuYWdlcihwYXRoLCBjdXJyZW50RmlsZUluZm8uY3VycmVudERpcmVjdG9yeSwgdGhpcy5jb250ZXh0LCBlbnZpcm9ubWVudCk7DQogICAgICAgICAgICAgICAgaWYgKCFmaWxlTWFuYWdlcikgew0KICAgICAgICAgICAgICAgICAgICBmaWxlUGFyc2VkRnVuYyh7IG1lc3NhZ2U6ICJDb3VsZCBub3QgZmluZCBhIGZpbGUtbWFuYWdlciBmb3IgIiArIHBhdGggfSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFyIGxvYWRGaWxlQ2FsbGJhY2sgPSBmdW5jdGlvbiAobG9hZGVkRmlsZSkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgcGx1Z2luOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZWRGaWxlbmFtZSA9IGxvYWRlZEZpbGUuZmlsZW5hbWU7DQogICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50cyA9IGxvYWRlZEZpbGUuY29udGVudHMucmVwbGFjZSgvXlx1RkVGRi8sICcnKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gUGFzcyBvbiBhbiB1cGRhdGVkIHJvb3RwYXRoIGlmIHBhdGggb2YgaW1wb3J0ZWQgZmlsZSBpcyByZWxhdGl2ZSBhbmQgZmlsZQ0KICAgICAgICAgICAgICAgICAgICAvLyBpcyBpbiBhIChzdWJ8c3VwKSBkaXJlY3RvcnkNCiAgICAgICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAgICAgLy8gRXhhbXBsZXM6DQogICAgICAgICAgICAgICAgICAgIC8vIC0gSWYgcGF0aCBvZiBpbXBvcnRlZCBmaWxlIGlzICdtb2R1bGUvbmF2L25hdi5sZXNzJyBhbmQgcm9vdHBhdGggaXMgJ2xlc3MvJywNCiAgICAgICAgICAgICAgICAgICAgLy8gICB0aGVuIHJvb3RwYXRoIHNob3VsZCBiZWNvbWUgJ2xlc3MvbW9kdWxlL25hdi8nDQogICAgICAgICAgICAgICAgICAgIC8vIC0gSWYgcGF0aCBvZiBpbXBvcnRlZCBmaWxlIGlzICcuLi9taXhpbnMubGVzcycgYW5kIHJvb3RwYXRoIGlzICdsZXNzLycsDQogICAgICAgICAgICAgICAgICAgIC8vICAgdGhlbiByb290cGF0aCBzaG91bGQgYmVjb21lICdsZXNzLy4uLycNCiAgICAgICAgICAgICAgICAgICAgbmV3RmlsZUluZm8uY3VycmVudERpcmVjdG9yeSA9IGZpbGVNYW5hZ2VyLmdldFBhdGgocmVzb2x2ZWRGaWxlbmFtZSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChuZXdGaWxlSW5mby5yZXdyaXRlVXJscykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3RmlsZUluZm8ucm9vdHBhdGggPSBmaWxlTWFuYWdlci5qb2luKChpbXBvcnRNYW5hZ2VyLmNvbnRleHQucm9vdHBhdGggfHwgJycpLCBmaWxlTWFuYWdlci5wYXRoRGlmZihuZXdGaWxlSW5mby5jdXJyZW50RGlyZWN0b3J5LCBuZXdGaWxlSW5mby5lbnRyeVBhdGgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlsZU1hbmFnZXIuaXNQYXRoQWJzb2x1dGUobmV3RmlsZUluZm8ucm9vdHBhdGgpICYmIGZpbGVNYW5hZ2VyLmFsd2F5c01ha2VQYXRoc0Fic29sdXRlKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdGaWxlSW5mby5yb290cGF0aCA9IGZpbGVNYW5hZ2VyLmpvaW4obmV3RmlsZUluZm8uZW50cnlQYXRoLCBuZXdGaWxlSW5mby5yb290cGF0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgbmV3RmlsZUluZm8uZmlsZW5hbWUgPSByZXNvbHZlZEZpbGVuYW1lOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RW52ID0gbmV3IGNvbnRleHRzLlBhcnNlKGltcG9ydE1hbmFnZXIuY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgIG5ld0Vudi5wcm9jZXNzSW1wb3J0cyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBpbXBvcnRNYW5hZ2VyLmNvbnRlbnRzW3Jlc29sdmVkRmlsZW5hbWVdID0gY29udGVudHM7DQogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RmlsZUluZm8ucmVmZXJlbmNlIHx8IGltcG9ydE9wdGlvbnMucmVmZXJlbmNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBuZXdGaWxlSW5mby5yZWZlcmVuY2UgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChpbXBvcnRPcHRpb25zLmlzUGx1Z2luKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4gPSBwbHVnaW5Mb2FkZXIuZXZhbFBsdWdpbihjb250ZW50cywgbmV3RW52LCBpbXBvcnRNYW5hZ2VyLCBpbXBvcnRPcHRpb25zLnBsdWdpbkFyZ3MsIG5ld0ZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbHVnaW4gaW5zdGFuY2VvZiBMZXNzRXJyb3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGFyc2VkRnVuYyhwbHVnaW4sIG51bGwsIHJlc29sdmVkRmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhcnNlZEZ1bmMobnVsbCwgcGx1Z2luLCByZXNvbHZlZEZpbGVuYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpbXBvcnRPcHRpb25zLmlubGluZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhcnNlZEZ1bmMobnVsbCwgY29udGVudHMsIHJlc29sdmVkRmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW1wb3J0IChtdWx0aXBsZSkgcGFyc2UgdHJlZXMgYXBwYXJlbnRseSBnZXQgYWx0ZXJlZCBhbmQgY2FuJ3QgYmUgY2FjaGVkLg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogaW52ZXN0aWdhdGUgd2h5IHRoaXMgaXMNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbXBvcnRNYW5hZ2VyLmZpbGVzW3Jlc29sdmVkRmlsZW5hbWVdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgIWltcG9ydE1hbmFnZXIuZmlsZXNbcmVzb2x2ZWRGaWxlbmFtZV0ub3B0aW9ucy5tdWx0aXBsZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICFpbXBvcnRPcHRpb25zLm11bHRpcGxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhcnNlZEZ1bmMobnVsbCwgaW1wb3J0TWFuYWdlci5maWxlc1tyZXNvbHZlZEZpbGVuYW1lXS5yb290LCByZXNvbHZlZEZpbGVuYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBQYXJzZXIobmV3RW52LCBpbXBvcnRNYW5hZ2VyLCBuZXdGaWxlSW5mbykucGFyc2UoY29udGVudHMsIGZ1bmN0aW9uIChlLCByb290KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVQYXJzZWRGdW5jKGUsIHJvb3QsIHJlc29sdmVkRmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB2YXIgbG9hZGVkRmlsZTsNCiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZTsNCiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNsb25lKHRoaXMuY29udGV4dCk7DQogICAgICAgICAgICAgICAgaWYgKHRyeUFwcGVuZEV4dGVuc2lvbikgew0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmV4dCA9IGltcG9ydE9wdGlvbnMuaXNQbHVnaW4gPyAnLmpzJyA6ICcubGVzcyc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChpbXBvcnRPcHRpb25zLmlzUGx1Z2luKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQubWltZSA9ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JzsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuc3luY0ltcG9ydCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkRmlsZSA9IHBsdWdpbkxvYWRlci5sb2FkUGx1Z2luU3luYyhwYXRoLCBjdXJyZW50RmlsZUluZm8uY3VycmVudERpcmVjdG9yeSwgY29udGV4dCwgZW52aXJvbm1lbnQsIGZpbGVNYW5hZ2VyKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UgPSBwbHVnaW5Mb2FkZXIubG9hZFBsdWdpbihwYXRoLCBjdXJyZW50RmlsZUluZm8uY3VycmVudERpcmVjdG9yeSwgY29udGV4dCwgZW52aXJvbm1lbnQsIGZpbGVNYW5hZ2VyKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuc3luY0ltcG9ydCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkRmlsZSA9IGZpbGVNYW5hZ2VyLmxvYWRGaWxlU3luYyhwYXRoLCBjdXJyZW50RmlsZUluZm8uY3VycmVudERpcmVjdG9yeSwgY29udGV4dCwgZW52aXJvbm1lbnQpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9IGZpbGVNYW5hZ2VyLmxvYWRGaWxlKHBhdGgsIGN1cnJlbnRGaWxlSW5mby5jdXJyZW50RGlyZWN0b3J5LCBjb250ZXh0LCBlbnZpcm9ubWVudCwgZnVuY3Rpb24gKGVyciwgbG9hZGVkRmlsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhcnNlZEZ1bmMoZXJyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRGaWxlQ2FsbGJhY2sobG9hZGVkRmlsZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGxvYWRlZEZpbGUpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2FkZWRGaWxlLmZpbGVuYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGFyc2VkRnVuYyhsb2FkZWRGaWxlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRGaWxlQ2FsbGJhY2sobG9hZGVkRmlsZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvbWlzZSkgew0KICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4obG9hZEZpbGVDYWxsYmFjaywgZmlsZVBhcnNlZEZ1bmMpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICByZXR1cm4gSW1wb3J0TWFuYWdlcjsNCiAgICAgICAgfSgpKTsNCiAgICAgICAgcmV0dXJuIEltcG9ydE1hbmFnZXI7DQogICAgfQoKICAgIGZ1bmN0aW9uIFBhcnNlIChlbnZpcm9ubWVudCwgUGFyc2VUcmVlLCBJbXBvcnRNYW5hZ2VyKSB7DQogICAgICAgIHZhciBwYXJzZSA9IGZ1bmN0aW9uIChpbnB1dCwgb3B0aW9ucywgY2FsbGJhY2spIHsNCiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uczsNCiAgICAgICAgICAgICAgICBvcHRpb25zID0gY29weU9wdGlvbnModGhpcy5vcHRpb25zLCB7fSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBvcHRpb25zID0gY29weU9wdGlvbnModGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICghY2FsbGJhY2spIHsNCiAgICAgICAgICAgICAgICB2YXIgc2VsZl8xID0gdGhpczsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgew0KICAgICAgICAgICAgICAgICAgICBwYXJzZS5jYWxsKHNlbGZfMSwgaW5wdXQsIG9wdGlvbnMsIGZ1bmN0aW9uIChlcnIsIG91dHB1dCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvdXRwdXQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHZhciBjb250ZXh0XzE7DQogICAgICAgICAgICAgICAgdmFyIHJvb3RGaWxlSW5mbyA9IHZvaWQgMDsNCiAgICAgICAgICAgICAgICB2YXIgcGx1Z2luTWFuYWdlcl8xID0gbmV3IFBsdWdpbk1hbmFnZXJGYWN0b3J5KHRoaXMsICFvcHRpb25zLnJlVXNlUGx1Z2luTWFuYWdlcik7DQogICAgICAgICAgICAgICAgb3B0aW9ucy5wbHVnaW5NYW5hZ2VyID0gcGx1Z2luTWFuYWdlcl8xOw0KICAgICAgICAgICAgICAgIGNvbnRleHRfMSA9IG5ldyBjb250ZXh0cy5QYXJzZShvcHRpb25zKTsNCiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yb290RmlsZUluZm8pIHsNCiAgICAgICAgICAgICAgICAgICAgcm9vdEZpbGVJbmZvID0gb3B0aW9ucy5yb290RmlsZUluZm87DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZW5hbWUgPSBvcHRpb25zLmZpbGVuYW1lIHx8ICdpbnB1dCc7DQogICAgICAgICAgICAgICAgICAgIHZhciBlbnRyeVBhdGggPSBmaWxlbmFtZS5yZXBsYWNlKC9bXlwvXFxdKiQvLCAnJyk7DQogICAgICAgICAgICAgICAgICAgIHJvb3RGaWxlSW5mbyA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHJld3JpdGVVcmxzOiBjb250ZXh0XzEucmV3cml0ZVVybHMsDQogICAgICAgICAgICAgICAgICAgICAgICByb290cGF0aDogY29udGV4dF8xLnJvb3RwYXRoIHx8ICcnLA0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERpcmVjdG9yeTogZW50cnlQYXRoLA0KICAgICAgICAgICAgICAgICAgICAgICAgZW50cnlQYXRoOiBlbnRyeVBhdGgsDQogICAgICAgICAgICAgICAgICAgICAgICByb290RmlsZW5hbWU6IGZpbGVuYW1lDQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIC8vIGFkZCBpbiBhIG1pc3NpbmcgdHJhaWxpbmcgc2xhc2gNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3RGaWxlSW5mby5yb290cGF0aCAmJiByb290RmlsZUluZm8ucm9vdHBhdGguc2xpY2UoLTEpICE9PSAnLycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RGaWxlSW5mby5yb290cGF0aCArPSAnLyc7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFyIGltcG9ydHNfMSA9IG5ldyBJbXBvcnRNYW5hZ2VyKHRoaXMsIGNvbnRleHRfMSwgcm9vdEZpbGVJbmZvKTsNCiAgICAgICAgICAgICAgICB0aGlzLmltcG9ydE1hbmFnZXIgPSBpbXBvcnRzXzE7DQogICAgICAgICAgICAgICAgLy8gVE9ETzogYWxsb3cgdGhlIHBsdWdpbnMgdG8gYmUganVzdCBhIGxpc3Qgb2YgcGF0aHMgb3IgbmFtZXMNCiAgICAgICAgICAgICAgICAvLyBEbyBhbiBhc3luYyBwbHVnaW4gcXVldWUgbGlrZSBsZXNzYw0KICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnBsdWdpbnMpIHsNCiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wbHVnaW5zLmZvckVhY2goZnVuY3Rpb24gKHBsdWdpbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQsIGNvbnRlbnRzOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsdWdpbi5maWxlQ29udGVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzID0gcGx1Z2luLmZpbGVDb250ZW50LnJlcGxhY2UoL15cdUZFRkYvLCAnJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZhbFJlc3VsdCA9IHBsdWdpbk1hbmFnZXJfMS5Mb2FkZXIuZXZhbFBsdWdpbihjb250ZW50cywgY29udGV4dF8xLCBpbXBvcnRzXzEsIHBsdWdpbi5vcHRpb25zLCBwbHVnaW4uZmlsZW5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmFsUmVzdWx0IGluc3RhbmNlb2YgTGVzc0Vycm9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhldmFsUmVzdWx0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyXzEuYWRkUGx1Z2luKHBsdWdpbik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBuZXcgUGFyc2VyKGNvbnRleHRfMSwgaW1wb3J0c18xLCByb290RmlsZUluZm8pDQogICAgICAgICAgICAgICAgICAgIC5wYXJzZShpbnB1dCwgZnVuY3Rpb24gKGUsIHJvb3QpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCByb290LCBpbXBvcnRzXzEsIG9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICByZXR1cm4gcGFyc2U7DQogICAgfQoKICAgIGZ1bmN0aW9uIFJlbmRlciAoZW52aXJvbm1lbnQsIFBhcnNlVHJlZSwgSW1wb3J0TWFuYWdlcikgew0KICAgICAgICB2YXIgcmVuZGVyID0gZnVuY3Rpb24gKGlucHV0LCBvcHRpb25zLCBjYWxsYmFjaykgew0KICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zOw0KICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBjb3B5T3B0aW9ucyh0aGlzLm9wdGlvbnMsIHt9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBjb3B5T3B0aW9ucyh0aGlzLm9wdGlvbnMsIG9wdGlvbnMgfHwge30pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFjYWxsYmFjaykgew0KICAgICAgICAgICAgICAgIHZhciBzZWxmXzEgPSB0aGlzOw0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICAgICAgICAgIHJlbmRlci5jYWxsKHNlbGZfMSwgaW5wdXQsIG9wdGlvbnMsIGZ1bmN0aW9uIChlcnIsIG91dHB1dCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvdXRwdXQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMucGFyc2UoaW5wdXQsIG9wdGlvbnMsIGZ1bmN0aW9uIChlcnIsIHJvb3QsIGltcG9ydHMsIG9wdGlvbnMpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdDsNCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJzZVRyZWUgPSBuZXcgUGFyc2VUcmVlKHJvb3QsIGltcG9ydHMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcGFyc2VUcmVlLnRvQ1NTKG9wdGlvbnMpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIHJldHVybiByZW5kZXI7DQogICAgfQoKICAgIHZhciB2ZXJzaW9uID0gIjQuMS4yIjsKCiAgICBmdW5jdGlvbiBwYXJzZU5vZGVWZXJzaW9uKHZlcnNpb24pIHsKICAgICAgdmFyIG1hdGNoID0gdmVyc2lvbi5tYXRjaCgvXnYoXGR7MSwyfSlcLihcZHsxLDJ9KVwuKFxkezEsMn0pKD86LShbMC05QS1aYS16LS5dKykpPyg/OlwrKFswLTlBLVphLXotLl0rKSk/JC8pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG1heC1sZW4KICAgICAgaWYgKCFtYXRjaCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHBhcnNlOiAnICsgdmVyc2lvbik7CiAgICAgIH0KCiAgICAgIHZhciByZXMgPSB7CiAgICAgICAgbWFqb3I6IHBhcnNlSW50KG1hdGNoWzFdLCAxMCksCiAgICAgICAgbWlub3I6IHBhcnNlSW50KG1hdGNoWzJdLCAxMCksCiAgICAgICAgcGF0Y2g6IHBhcnNlSW50KG1hdGNoWzNdLCAxMCksCiAgICAgICAgcHJlOiBtYXRjaFs0XSB8fCAnJywKICAgICAgICBidWlsZDogbWF0Y2hbNV0gfHwgJycsCiAgICAgIH07CgogICAgICByZXR1cm4gcmVzOwogICAgfQoKICAgIHZhciBwYXJzZU5vZGVWZXJzaW9uXzEgPSBwYXJzZU5vZGVWZXJzaW9uOwoKICAgIGZ1bmN0aW9uIGxlc3NSb290IChlbnZpcm9ubWVudCwgZmlsZU1hbmFnZXJzKSB7DQogICAgICAgIHZhciBzb3VyY2VNYXBPdXRwdXQsIHNvdXJjZU1hcEJ1aWxkZXIsIHBhcnNlVHJlZSwgaW1wb3J0TWFuYWdlcjsNCiAgICAgICAgZW52aXJvbm1lbnQgPSBuZXcgRW52aXJvbm1lbnQoZW52aXJvbm1lbnQsIGZpbGVNYW5hZ2Vycyk7DQogICAgICAgIHNvdXJjZU1hcE91dHB1dCA9IFNvdXJjZU1hcE91dHB1dChlbnZpcm9ubWVudCk7DQogICAgICAgIHNvdXJjZU1hcEJ1aWxkZXIgPSBTb3VyY2VNYXBCdWlsZGVyKHNvdXJjZU1hcE91dHB1dCwgZW52aXJvbm1lbnQpOw0KICAgICAgICBwYXJzZVRyZWUgPSBQYXJzZVRyZWUoc291cmNlTWFwQnVpbGRlcik7DQogICAgICAgIGltcG9ydE1hbmFnZXIgPSBJbXBvcnRNYW5hZ2VyKGVudmlyb25tZW50KTsNCiAgICAgICAgdmFyIHJlbmRlciA9IFJlbmRlcihlbnZpcm9ubWVudCwgcGFyc2VUcmVlKTsNCiAgICAgICAgdmFyIHBhcnNlID0gUGFyc2UoZW52aXJvbm1lbnQsIHBhcnNlVHJlZSwgaW1wb3J0TWFuYWdlcik7DQogICAgICAgIHZhciB2ID0gcGFyc2VOb2RlVmVyc2lvbl8xKCJ2IiArIHZlcnNpb24pOw0KICAgICAgICB2YXIgaW5pdGlhbCA9IHsNCiAgICAgICAgICAgIHZlcnNpb246IFt2Lm1ham9yLCB2Lm1pbm9yLCB2LnBhdGNoXSwNCiAgICAgICAgICAgIGRhdGE6IGRhdGEsDQogICAgICAgICAgICB0cmVlOiB0cmVlLA0KICAgICAgICAgICAgRW52aXJvbm1lbnQ6IEVudmlyb25tZW50LA0KICAgICAgICAgICAgQWJzdHJhY3RGaWxlTWFuYWdlcjogQWJzdHJhY3RGaWxlTWFuYWdlciwNCiAgICAgICAgICAgIEFic3RyYWN0UGx1Z2luTG9hZGVyOiBBYnN0cmFjdFBsdWdpbkxvYWRlciwNCiAgICAgICAgICAgIGVudmlyb25tZW50OiBlbnZpcm9ubWVudCwNCiAgICAgICAgICAgIHZpc2l0b3JzOiB2aXNpdG9ycywNCiAgICAgICAgICAgIFBhcnNlcjogUGFyc2VyLA0KICAgICAgICAgICAgZnVuY3Rpb25zOiBmdW5jdGlvbnMoZW52aXJvbm1lbnQpLA0KICAgICAgICAgICAgY29udGV4dHM6IGNvbnRleHRzLA0KICAgICAgICAgICAgU291cmNlTWFwT3V0cHV0OiBzb3VyY2VNYXBPdXRwdXQsDQogICAgICAgICAgICBTb3VyY2VNYXBCdWlsZGVyOiBzb3VyY2VNYXBCdWlsZGVyLA0KICAgICAgICAgICAgUGFyc2VUcmVlOiBwYXJzZVRyZWUsDQogICAgICAgICAgICBJbXBvcnRNYW5hZ2VyOiBpbXBvcnRNYW5hZ2VyLA0KICAgICAgICAgICAgcmVuZGVyOiByZW5kZXIsDQogICAgICAgICAgICBwYXJzZTogcGFyc2UsDQogICAgICAgICAgICBMZXNzRXJyb3I6IExlc3NFcnJvciwNCiAgICAgICAgICAgIHRyYW5zZm9ybVRyZWU6IHRyYW5zZm9ybVRyZWUsDQogICAgICAgICAgICB1dGlsczogdXRpbHMsDQogICAgICAgICAgICBQbHVnaW5NYW5hZ2VyOiBQbHVnaW5NYW5hZ2VyRmFjdG9yeSwNCiAgICAgICAgICAgIGxvZ2dlcjogbG9nZ2VyJDENCiAgICAgICAgfTsNCiAgICAgICAgLy8gQ3JlYXRlIGEgcHVibGljIEFQSQ0KICAgICAgICB2YXIgY3RvciA9IGZ1bmN0aW9uICh0KSB7DQogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHZhciBvYmogPSBPYmplY3QuY3JlYXRlKHQucHJvdG90eXBlKTsNCiAgICAgICAgICAgICAgICB0LmFwcGx5KG9iaiwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG9iajsNCiAgICAgICAgICAgIH07DQogICAgICAgIH07DQogICAgICAgIHZhciB0Ow0KICAgICAgICB2YXIgYXBpID0gT2JqZWN0LmNyZWF0ZShpbml0aWFsKTsNCiAgICAgICAgZm9yICh2YXIgbiBpbiBpbml0aWFsLnRyZWUpIHsNCiAgICAgICAgICAgIC8qIGVzbGludCBndWFyZC1mb3ItaW46IDAgKi8NCiAgICAgICAgICAgIHQgPSBpbml0aWFsLnRyZWVbbl07DQogICAgICAgICAgICBpZiAodHlwZW9mIHQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgICBhcGlbbi50b0xvd2VyQ2FzZSgpXSA9IGN0b3IodCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBhcGlbbl0gPSBPYmplY3QuY3JlYXRlKG51bGwpOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIG8gaW4gdCkgew0KICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQgZ3VhcmQtZm9yLWluOiAwICovDQogICAgICAgICAgICAgICAgICAgIGFwaVtuXVtvLnRvTG93ZXJDYXNlKCldID0gY3Rvcih0W29dKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIFNvbWUgb2YgdGhlIGZ1bmN0aW9ucyBhc3N1bWUgYSBgdGhpc2AgY29udGV4dCBvZiB0aGUgQVBJIG9iamVjdCwNCiAgICAgICAgICogd2hpY2ggY2F1c2VzIGl0IHRvIGZhaWwgd2hlbiB3cmFwcGVkIGZvciBFUzYgaW1wb3J0cy4NCiAgICAgICAgICoNCiAgICAgICAgICogQW4gYXNzdW1lZCBgdGhpc2Agc2hvdWxkIGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS4NCiAgICAgICAgICovDQogICAgICAgIGluaXRpYWwucGFyc2UgPSBpbml0aWFsLnBhcnNlLmJpbmQoYXBpKTsNCiAgICAgICAgaW5pdGlhbC5yZW5kZXIgPSBpbml0aWFsLnJlbmRlci5iaW5kKGFwaSk7DQogICAgICAgIHJldHVybiBhcGk7DQogICAgfQoKICAgIC8qIGdsb2JhbCB3aW5kb3csIFhNTEh0dHBSZXF1ZXN0ICovDQogICAgdmFyIG9wdGlvbnMkMTsNCiAgICB2YXIgbG9nZ2VyOw0KICAgIHZhciBmaWxlQ2FjaGUgPSB7fTsNCiAgICAvLyBUT0RPUyAtIG1vdmUgbG9nIHNvbWV3aGVyZS4gcGF0aERpZmYgYW5kIGRvaW5nIHNvbWV0aGluZyBzaW1pbGFyIGluIG5vZGUuIHVzZSBwYXRoRGlmZiBpbiB0aGUgb3RoZXIgYnJvd3NlciBmaWxlIGZvciB0aGUgaW5pdGlhbCBsb2FkDQogICAgdmFyIEZpbGVNYW5hZ2VyID0gZnVuY3Rpb24gKCkgeyB9Ow0KICAgIEZpbGVNYW5hZ2VyLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24obmV3IEFic3RyYWN0RmlsZU1hbmFnZXIoKSwgew0KICAgICAgICBhbHdheXNNYWtlUGF0aHNBYnNvbHV0ZTogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0sDQogICAgICAgIGpvaW46IGZ1bmN0aW9uIChiYXNlUGF0aCwgbGF0ZXJQYXRoKSB7DQogICAgICAgICAgICBpZiAoIWJhc2VQYXRoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGxhdGVyUGF0aDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJhY3RVcmxQYXJ0cyhsYXRlclBhdGgsIGJhc2VQYXRoKS5wYXRoOw0KICAgICAgICB9LA0KICAgICAgICBkb1hIUjogZnVuY3Rpb24gKHVybCwgdHlwZSwgY2FsbGJhY2ssIGVycmJhY2spIHsNCiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsNCiAgICAgICAgICAgIHZhciBhc3luYyA9IG9wdGlvbnMkMS5pc0ZpbGVQcm90b2NvbCA/IG9wdGlvbnMkMS5maWxlQXN5bmMgOiB0cnVlOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiB4aHIub3ZlcnJpZGVNaW1lVHlwZSA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIHhoci5vdmVycmlkZU1pbWVUeXBlKCd0ZXh0L2NzcycpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJYSFI6IEdldHRpbmcgJyIgKyB1cmwgKyAiJyIpOw0KICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgYXN5bmMpOw0KICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsIHR5cGUgfHwgJ3RleHQveC1sZXNzLCB0ZXh0L2NzczsgcT0wLjksICovKjsgcT0wLjUnKTsNCiAgICAgICAgICAgIHhoci5zZW5kKG51bGwpOw0KICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UoeGhyLCBjYWxsYmFjaywgZXJyYmFjaykgew0KICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHhoci5yZXNwb25zZVRleHQsIHhoci5nZXRSZXNwb25zZUhlYWRlcignTGFzdC1Nb2RpZmllZCcpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGVycmJhY2sgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgICAgICAgZXJyYmFjayh4aHIuc3RhdHVzLCB1cmwpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChvcHRpb25zJDEuaXNGaWxlUHJvdG9jb2wgJiYgIW9wdGlvbnMkMS5maWxlQXN5bmMpIHsNCiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMCB8fCAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soeGhyLnJlc3BvbnNlVGV4dCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBlcnJiYWNrKHhoci5zdGF0dXMsIHVybCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoYXN5bmMpIHsNCiAgICAgICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlUmVzcG9uc2UoeGhyLCBjYWxsYmFjaywgZXJyYmFjayk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgaGFuZGxlUmVzcG9uc2UoeGhyLCBjYWxsYmFjaywgZXJyYmFjayk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHN1cHBvcnRzOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSwNCiAgICAgICAgY2xlYXJGaWxlQ2FjaGU6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGZpbGVDYWNoZSA9IHt9Ow0KICAgICAgICB9LA0KICAgICAgICBsb2FkRmlsZTogZnVuY3Rpb24gKGZpbGVuYW1lLCBjdXJyZW50RGlyZWN0b3J5LCBvcHRpb25zLCBlbnZpcm9ubWVudCkgew0KICAgICAgICAgICAgLy8gVE9ETzogQWRkIHByZWZpeCBzdXBwb3J0IGxpa2UgbGVzcy1ub2RlPw0KICAgICAgICAgICAgLy8gV2hhdCBhYm91dCBtdWx0aXBsZSBwYXRocz8NCiAgICAgICAgICAgIGlmIChjdXJyZW50RGlyZWN0b3J5ICYmICF0aGlzLmlzUGF0aEFic29sdXRlKGZpbGVuYW1lKSkgew0KICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gY3VycmVudERpcmVjdG9yeSArIGZpbGVuYW1lOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZmlsZW5hbWUgPSBvcHRpb25zLmV4dCA/IHRoaXMudHJ5QXBwZW5kRXh0ZW5zaW9uKGZpbGVuYW1lLCBvcHRpb25zLmV4dCkgOiBmaWxlbmFtZTsNCiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9Ow0KICAgICAgICAgICAgLy8gc2hlZXQgbWF5IGJlIHNldCB0byB0aGUgc3R5bGVzaGVldCBmb3IgdGhlIGluaXRpYWwgbG9hZCBvciBhIGNvbGxlY3Rpb24gb2YgcHJvcGVydGllcyBpbmNsdWRpbmcNCiAgICAgICAgICAgIC8vIHNvbWUgY29udGV4dCB2YXJpYWJsZXMgZm9yIGltcG9ydHMNCiAgICAgICAgICAgIHZhciBocmVmUGFydHMgPSB0aGlzLmV4dHJhY3RVcmxQYXJ0cyhmaWxlbmFtZSwgd2luZG93LmxvY2F0aW9uLmhyZWYpOw0KICAgICAgICAgICAgdmFyIGhyZWYgPSBocmVmUGFydHMudXJsOw0KICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy51c2VGaWxlQ2FjaGUgJiYgZmlsZUNhY2hlW2hyZWZdKSB7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVzc1RleHQgPSBmaWxlQ2FjaGVbaHJlZl07DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IGNvbnRlbnRzOiBsZXNzVGV4dCwgZmlsZW5hbWU6IGhyZWYsIHdlYkluZm86IHsgbGFzdE1vZGlmaWVkOiBuZXcgRGF0ZSgpIH0gfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoeyBmaWxlbmFtZTogaHJlZiwgbWVzc2FnZTogIkVycm9yIGxvYWRpbmcgZmlsZSAiICsgaHJlZiArICIgZXJyb3Igd2FzICIgKyBlLm1lc3NhZ2UgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc2VsZi5kb1hIUihocmVmLCBvcHRpb25zLm1pbWUsIGZ1bmN0aW9uIGRvWEhSQ2FsbGJhY2soZGF0YSwgbGFzdE1vZGlmaWVkKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIHBlciBmaWxlIGNhY2hlDQogICAgICAgICAgICAgICAgICAgIGZpbGVDYWNoZVtocmVmXSA9IGRhdGE7DQogICAgICAgICAgICAgICAgICAgIC8vIFVzZSByZW1vdGUgY29weSAocmUtcGFyc2UpDQogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeyBjb250ZW50czogZGF0YSwgZmlsZW5hbWU6IGhyZWYsIHdlYkluZm86IHsgbGFzdE1vZGlmaWVkOiBsYXN0TW9kaWZpZWQgfSB9KTsNCiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBkb1hIUkVycm9yKHN0YXR1cywgdXJsKSB7DQogICAgICAgICAgICAgICAgICAgIHJlamVjdCh7IHR5cGU6ICdGaWxlJywgbWVzc2FnZTogIiciICsgdXJsICsgIicgd2Fzbid0IGZvdW5kICgiICsgc3RhdHVzICsgIikiLCBocmVmOiBocmVmIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICB9KTsNCiAgICB2YXIgRk0gPSAoZnVuY3Rpb24gKG9wdHMsIGxvZykgew0KICAgICAgICBvcHRpb25zJDEgPSBvcHRzOw0KICAgICAgICBsb2dnZXIgPSBsb2c7DQogICAgICAgIHJldHVybiBGaWxlTWFuYWdlcjsNCiAgICB9KTsKCiAgICAvLyBUT0RPOiBBZGQgdGVzdHMgZm9yIGJyb3dzZXIgQHBsdWdpbg0KICAgIC8qKg0KICAgICAqIEJyb3dzZXIgUGx1Z2luIExvYWRlcg0KICAgICAqLw0KICAgIHZhciBQbHVnaW5Mb2FkZXIgPSBmdW5jdGlvbiAobGVzcykgew0KICAgICAgICB0aGlzLmxlc3MgPSBsZXNzOw0KICAgICAgICAvLyBTaG91bGQgd2Ugc2hpbSB0aGlzLnJlcXVpcmUgZm9yIGJyb3dzZXI/IFByb2JhYmx5IG5vdD8NCiAgICB9Ow0KICAgIFBsdWdpbkxvYWRlci5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKG5ldyBBYnN0cmFjdFBsdWdpbkxvYWRlcigpLCB7DQogICAgICAgIGxvYWRQbHVnaW46IGZ1bmN0aW9uIChmaWxlbmFtZSwgYmFzZVBhdGgsIGNvbnRleHQsIGVudmlyb25tZW50LCBmaWxlTWFuYWdlcikgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChmdWxmaWxsLCByZWplY3QpIHsNCiAgICAgICAgICAgICAgICBmaWxlTWFuYWdlci5sb2FkRmlsZShmaWxlbmFtZSwgYmFzZVBhdGgsIGNvbnRleHQsIGVudmlyb25tZW50KQ0KICAgICAgICAgICAgICAgICAgICAudGhlbihmdWxmaWxsKS5jYXRjaChyZWplY3QpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICB9KTsKCiAgICB2YXIgTG9nTGlzdGVuZXIgPSAoZnVuY3Rpb24gKGxlc3MsIG9wdGlvbnMpIHsNCiAgICAgICAgdmFyIGxvZ0xldmVsX2RlYnVnID0gNDsNCiAgICAgICAgdmFyIGxvZ0xldmVsX2luZm8gPSAzOw0KICAgICAgICB2YXIgbG9nTGV2ZWxfd2FybiA9IDI7DQogICAgICAgIHZhciBsb2dMZXZlbF9lcnJvciA9IDE7DQogICAgICAgIC8vIFRoZSBhbW91bnQgb2YgbG9nZ2luZyBpbiB0aGUgamF2YXNjcmlwdCBjb25zb2xlLg0KICAgICAgICAvLyAzIC0gRGVidWcsIGluZm9ybWF0aW9uIGFuZCBlcnJvcnMNCiAgICAgICAgLy8gMiAtIEluZm9ybWF0aW9uIGFuZCBlcnJvcnMNCiAgICAgICAgLy8gMSAtIEVycm9ycw0KICAgICAgICAvLyAwIC0gTm9uZQ0KICAgICAgICAvLyBEZWZhdWx0cyB0byAyDQogICAgICAgIG9wdGlvbnMubG9nTGV2ZWwgPSB0eXBlb2Ygb3B0aW9ucy5sb2dMZXZlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmxvZ0xldmVsIDogKG9wdGlvbnMuZW52ID09PSAnZGV2ZWxvcG1lbnQnID8gbG9nTGV2ZWxfaW5mbyA6IGxvZ0xldmVsX2Vycm9yKTsNCiAgICAgICAgaWYgKCFvcHRpb25zLmxvZ2dlcnMpIHsNCiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VycyA9IFt7DQogICAgICAgICAgICAgICAgICAgIGRlYnVnOiBmdW5jdGlvbiAobXNnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5sb2dMZXZlbCA+PSBsb2dMZXZlbF9kZWJ1Zykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGluZm86IGZ1bmN0aW9uIChtc2cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmxvZ0xldmVsID49IGxvZ0xldmVsX2luZm8pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB3YXJuOiBmdW5jdGlvbiAobXNnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5sb2dMZXZlbCA+PSBsb2dMZXZlbF93YXJuKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKG1zZyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAobXNnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5sb2dMZXZlbCA+PSBsb2dMZXZlbF9lcnJvcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH1dOw0KICAgICAgICB9DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5sb2dnZXJzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBsZXNzLmxvZ2dlci5hZGRMaXN0ZW5lcihvcHRpb25zLmxvZ2dlcnNbaV0pOw0KICAgICAgICB9DQogICAgfSk7CgogICAgdmFyIEVycm9yUmVwb3J0aW5nID0gKGZ1bmN0aW9uICh3aW5kb3csIGxlc3MsIG9wdGlvbnMpIHsNCiAgICAgICAgZnVuY3Rpb24gZXJyb3JIVE1MKGUsIHJvb3RIcmVmKSB7DQogICAgICAgICAgICB2YXIgaWQgPSAibGVzcy1lcnJvci1tZXNzYWdlOiIgKyBleHRyYWN0SWQocm9vdEhyZWYgfHwgJycpOw0KICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gJzxsaT48bGFiZWw+e2xpbmV9PC9sYWJlbD48cHJlIGNsYXNzPSJ7Y2xhc3N9Ij57Y29udGVudH08L3ByZT48L2xpPic7DQogICAgICAgICAgICB2YXIgZWxlbSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgIHZhciB0aW1lcjsNCiAgICAgICAgICAgIHZhciBjb250ZW50Ow0KICAgICAgICAgICAgdmFyIGVycm9ycyA9IFtdOw0KICAgICAgICAgICAgdmFyIGZpbGVuYW1lID0gZS5maWxlbmFtZSB8fCByb290SHJlZjsNCiAgICAgICAgICAgIHZhciBmaWxlbmFtZU5vUGF0aCA9IGZpbGVuYW1lLm1hdGNoKC8oW15cL10rKFw/LiopPykkLylbMV07DQogICAgICAgICAgICBlbGVtLmlkID0gaWQ7DQogICAgICAgICAgICBlbGVtLmNsYXNzTmFtZSA9ICdsZXNzLWVycm9yLW1lc3NhZ2UnOw0KICAgICAgICAgICAgY29udGVudCA9ICI8aDM+IiArIChlLnR5cGUgfHwgJ1N5bnRheCcpICsgIkVycm9yOiAiICsgKGUubWVzc2FnZSB8fCAnVGhlcmUgaXMgYW4gZXJyb3IgaW4geW91ciAubGVzcyBmaWxlJykgKw0KICAgICAgICAgICAgICAgICgiPC9oMz48cD5pbiA8YSBocmVmPVwiIiArIGZpbGVuYW1lICsgIlwiPiIgKyBmaWxlbmFtZU5vUGF0aCArICI8L2E+ICIpOw0KICAgICAgICAgICAgdmFyIGVycm9ybGluZSA9IGZ1bmN0aW9uIChlLCBpLCBjbGFzc25hbWUpIHsNCiAgICAgICAgICAgICAgICBpZiAoZS5leHRyYWN0W2ldICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2godGVtcGxhdGUucmVwbGFjZSgvXHtsaW5lXH0vLCAocGFyc2VJbnQoZS5saW5lLCAxMCkgfHwgMCkgKyAoaSAtIDEpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1x7Y2xhc3NcfS8sIGNsYXNzbmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9ce2NvbnRlbnRcfS8sIGUuZXh0cmFjdFtpXSkpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBpZiAoZS5saW5lKSB7DQogICAgICAgICAgICAgICAgZXJyb3JsaW5lKGUsIDAsICcnKTsNCiAgICAgICAgICAgICAgICBlcnJvcmxpbmUoZSwgMSwgJ2xpbmUnKTsNCiAgICAgICAgICAgICAgICBlcnJvcmxpbmUoZSwgMiwgJycpOw0KICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gIm9uIGxpbmUgIiArIGUubGluZSArICIsIGNvbHVtbiAiICsgKGUuY29sdW1uICsgMSkgKyAiOjwvcD48dWw+IiArIGVycm9ycy5qb2luKCcnKSArICI8L3VsPiI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZS5zdGFjayAmJiAoZS5leHRyYWN0IHx8IG9wdGlvbnMubG9nTGV2ZWwgPj0gNCkpIHsNCiAgICAgICAgICAgICAgICBjb250ZW50ICs9ICI8YnIvPlN0YWNrIFRyYWNlPC9iciAvPiIgKyBlLnN0YWNrLnNwbGl0KCdcbicpLnNsaWNlKDEpLmpvaW4oJzxici8+Jyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbGVtLmlubmVySFRNTCA9IGNvbnRlbnQ7DQogICAgICAgICAgICAvLyBDU1MgZm9yIGVycm9yIG1lc3NhZ2VzDQogICAgICAgICAgICBicm93c2VyLmNyZWF0ZUNTUyh3aW5kb3cuZG9jdW1lbnQsIFsNCiAgICAgICAgICAgICAgICAnLmxlc3MtZXJyb3ItbWVzc2FnZSB1bCwgLmxlc3MtZXJyb3ItbWVzc2FnZSBsaSB7JywNCiAgICAgICAgICAgICAgICAnbGlzdC1zdHlsZS10eXBlOiBub25lOycsDQogICAgICAgICAgICAgICAgJ21hcmdpbi1yaWdodDogMTVweDsnLA0KICAgICAgICAgICAgICAgICdwYWRkaW5nOiA0cHggMDsnLA0KICAgICAgICAgICAgICAgICdtYXJnaW46IDA7JywNCiAgICAgICAgICAgICAgICAnfScsDQogICAgICAgICAgICAgICAgJy5sZXNzLWVycm9yLW1lc3NhZ2UgbGFiZWwgeycsDQogICAgICAgICAgICAgICAgJ2ZvbnQtc2l6ZTogMTJweDsnLA0KICAgICAgICAgICAgICAgICdtYXJnaW4tcmlnaHQ6IDE1cHg7JywNCiAgICAgICAgICAgICAgICAncGFkZGluZzogNHB4IDA7JywNCiAgICAgICAgICAgICAgICAnY29sb3I6ICNjYzc3Nzc7JywNCiAgICAgICAgICAgICAgICAnfScsDQogICAgICAgICAgICAgICAgJy5sZXNzLWVycm9yLW1lc3NhZ2UgcHJlIHsnLA0KICAgICAgICAgICAgICAgICdjb2xvcjogI2RkNjY2NjsnLA0KICAgICAgICAgICAgICAgICdwYWRkaW5nOiA0cHggMDsnLA0KICAgICAgICAgICAgICAgICdtYXJnaW46IDA7JywNCiAgICAgICAgICAgICAgICAnZGlzcGxheTogaW5saW5lLWJsb2NrOycsDQogICAgICAgICAgICAgICAgJ30nLA0KICAgICAgICAgICAgICAgICcubGVzcy1lcnJvci1tZXNzYWdlIHByZS5saW5lIHsnLA0KICAgICAgICAgICAgICAgICdjb2xvcjogI2ZmMDAwMDsnLA0KICAgICAgICAgICAgICAgICd9JywNCiAgICAgICAgICAgICAgICAnLmxlc3MtZXJyb3ItbWVzc2FnZSBoMyB7JywNCiAgICAgICAgICAgICAgICAnZm9udC1zaXplOiAyMHB4OycsDQogICAgICAgICAgICAgICAgJ2ZvbnQtd2VpZ2h0OiBib2xkOycsDQogICAgICAgICAgICAgICAgJ3BhZGRpbmc6IDE1cHggMCA1cHggMDsnLA0KICAgICAgICAgICAgICAgICdtYXJnaW46IDA7JywNCiAgICAgICAgICAgICAgICAnfScsDQogICAgICAgICAgICAgICAgJy5sZXNzLWVycm9yLW1lc3NhZ2UgYSB7JywNCiAgICAgICAgICAgICAgICAnY29sb3I6ICMxMGEnLA0KICAgICAgICAgICAgICAgICd9JywNCiAgICAgICAgICAgICAgICAnLmxlc3MtZXJyb3ItbWVzc2FnZSAuZXJyb3IgeycsDQogICAgICAgICAgICAgICAgJ2NvbG9yOiByZWQ7JywNCiAgICAgICAgICAgICAgICAnZm9udC13ZWlnaHQ6IGJvbGQ7JywNCiAgICAgICAgICAgICAgICAncGFkZGluZy1ib3R0b206IDJweDsnLA0KICAgICAgICAgICAgICAgICdib3JkZXItYm90dG9tOiAxcHggZGFzaGVkIHJlZDsnLA0KICAgICAgICAgICAgICAgICd9Jw0KICAgICAgICAgICAgXS5qb2luKCdcbicpLCB7IHRpdGxlOiAnZXJyb3ItbWVzc2FnZScgfSk7DQogICAgICAgICAgICBlbGVtLnN0eWxlLmNzc1RleHQgPSBbDQogICAgICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZicsDQogICAgICAgICAgICAgICAgJ2JvcmRlcjogMXB4IHNvbGlkICNlMDAnLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlJywNCiAgICAgICAgICAgICAgICAnYm9yZGVyLXJhZGl1czogNXB4JywNCiAgICAgICAgICAgICAgICAnLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHgnLA0KICAgICAgICAgICAgICAgICctbW96LWJvcmRlci1yYWRpdXM6IDVweCcsDQogICAgICAgICAgICAgICAgJ2NvbG9yOiAjZTAwJywNCiAgICAgICAgICAgICAgICAncGFkZGluZzogMTVweCcsDQogICAgICAgICAgICAgICAgJ21hcmdpbi1ib3R0b206IDE1cHgnDQogICAgICAgICAgICBdLmpvaW4oJzsnKTsNCiAgICAgICAgICAgIGlmIChvcHRpb25zLmVudiA9PT0gJ2RldmVsb3BtZW50Jykgew0KICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7DQogICAgICAgICAgICAgICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGJvZHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5LnJlcGxhY2VDaGlsZChlbGVtLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keS5pbnNlcnRCZWZvcmUoZWxlbSwgYm9keS5maXJzdENoaWxkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwgMTApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHJlbW92ZUVycm9ySFRNTChwYXRoKSB7DQogICAgICAgICAgICB2YXIgbm9kZSA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibGVzcy1lcnJvci1tZXNzYWdlOiIgKyBleHRyYWN0SWQocGF0aCkpOw0KICAgICAgICAgICAgaWYgKG5vZGUpIHsNCiAgICAgICAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlRXJyb3IocGF0aCkgew0KICAgICAgICAgICAgaWYgKCFvcHRpb25zLmVycm9yUmVwb3J0aW5nIHx8IG9wdGlvbnMuZXJyb3JSZXBvcnRpbmcgPT09ICdodG1sJykgew0KICAgICAgICAgICAgICAgIHJlbW92ZUVycm9ySFRNTChwYXRoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuZXJyb3JSZXBvcnRpbmcgPT09ICdjb25zb2xlJykgOw0KICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuZXJyb3JSZXBvcnRpbmcgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgICBvcHRpb25zLmVycm9yUmVwb3J0aW5nKCdyZW1vdmUnLCBwYXRoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBlcnJvckNvbnNvbGUoZSwgcm9vdEhyZWYpIHsNCiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9ICd7bGluZX0ge2NvbnRlbnR9JzsNCiAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9IGUuZmlsZW5hbWUgfHwgcm9vdEhyZWY7DQogICAgICAgICAgICB2YXIgZXJyb3JzID0gW107DQogICAgICAgICAgICB2YXIgY29udGVudCA9IChlLnR5cGUgfHwgJ1N5bnRheCcpICsgIkVycm9yOiAiICsgKGUubWVzc2FnZSB8fCAnVGhlcmUgaXMgYW4gZXJyb3IgaW4geW91ciAubGVzcyBmaWxlJykgKyAiIGluICIgKyBmaWxlbmFtZTsNCiAgICAgICAgICAgIHZhciBlcnJvcmxpbmUgPSBmdW5jdGlvbiAoZSwgaSwgY2xhc3NuYW1lKSB7DQogICAgICAgICAgICAgICAgaWYgKGUuZXh0cmFjdFtpXSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHRlbXBsYXRlLnJlcGxhY2UoL1x7bGluZVx9LywgKHBhcnNlSW50KGUubGluZSwgMTApIHx8IDApICsgKGkgLSAxKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9ce2NsYXNzXH0vLCBjbGFzc25hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXHtjb250ZW50XH0vLCBlLmV4dHJhY3RbaV0pKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgaWYgKGUubGluZSkgew0KICAgICAgICAgICAgICAgIGVycm9ybGluZShlLCAwLCAnJyk7DQogICAgICAgICAgICAgICAgZXJyb3JsaW5lKGUsIDEsICdsaW5lJyk7DQogICAgICAgICAgICAgICAgZXJyb3JsaW5lKGUsIDIsICcnKTsNCiAgICAgICAgICAgICAgICBjb250ZW50ICs9ICIgb24gbGluZSAiICsgZS5saW5lICsgIiwgY29sdW1uICIgKyAoZS5jb2x1bW4gKyAxKSArICI6XG4iICsgZXJyb3JzLmpvaW4oJ1xuJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZS5zdGFjayAmJiAoZS5leHRyYWN0IHx8IG9wdGlvbnMubG9nTGV2ZWwgPj0gNCkpIHsNCiAgICAgICAgICAgICAgICBjb250ZW50ICs9ICJcblN0YWNrIFRyYWNlXG4iICsgZS5zdGFjazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxlc3MubG9nZ2VyLmVycm9yKGNvbnRlbnQpOw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGVycm9yKGUsIHJvb3RIcmVmKSB7DQogICAgICAgICAgICBpZiAoIW9wdGlvbnMuZXJyb3JSZXBvcnRpbmcgfHwgb3B0aW9ucy5lcnJvclJlcG9ydGluZyA9PT0gJ2h0bWwnKSB7DQogICAgICAgICAgICAgICAgZXJyb3JIVE1MKGUsIHJvb3RIcmVmKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuZXJyb3JSZXBvcnRpbmcgPT09ICdjb25zb2xlJykgew0KICAgICAgICAgICAgICAgIGVycm9yQ29uc29sZShlLCByb290SHJlZik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5lcnJvclJlcG9ydGluZyA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIG9wdGlvbnMuZXJyb3JSZXBvcnRpbmcoJ2FkZCcsIGUsIHJvb3RIcmVmKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgYWRkOiBlcnJvciwNCiAgICAgICAgICAgIHJlbW92ZTogcmVtb3ZlRXJyb3INCiAgICAgICAgfTsNCiAgICB9KTsKCiAgICAvLyBDYWNoZSBzeXN0ZW0gaXMgYSBiaXQgb3V0ZGF0ZWQgYW5kIGNvdWxkIGRvIHdpdGggd29yaw0KICAgIHZhciBDYWNoZSA9IChmdW5jdGlvbiAod2luZG93LCBvcHRpb25zLCBsb2dnZXIpIHsNCiAgICAgICAgdmFyIGNhY2hlID0gbnVsbDsNCiAgICAgICAgaWYgKG9wdGlvbnMuZW52ICE9PSAnZGV2ZWxvcG1lbnQnKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNhY2hlID0gKHR5cGVvZiB3aW5kb3cubG9jYWxTdG9yYWdlID09PSAndW5kZWZpbmVkJykgPyBudWxsIDogd2luZG93LmxvY2FsU3RvcmFnZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChfKSB7IH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgc2V0Q1NTOiBmdW5jdGlvbiAocGF0aCwgbGFzdE1vZGlmaWVkLCBtb2RpZnlWYXJzLCBzdHlsZXMpIHsNCiAgICAgICAgICAgICAgICBpZiAoY2FjaGUpIHsNCiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oInNhdmluZyAiICsgcGF0aCArICIgdG8gY2FjaGUuIik7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS5zZXRJdGVtKHBhdGgsIHN0eWxlcyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS5zZXRJdGVtKHBhdGggKyAiOnRpbWVzdGFtcCIsIGxhc3RNb2RpZmllZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kaWZ5VmFycykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlLnNldEl0ZW0ocGF0aCArICI6dmFycyIsIEpTT04uc3RyaW5naWZ5KG1vZGlmeVZhcnMpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyAtIGNvdWxkIGRvIHdpdGggYWRkaW5nIG1vcmUgcm9idXN0IGVycm9yIGhhbmRsaW5nDQogICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoImZhaWxlZCB0byBzYXZlIFwiIiArIHBhdGggKyAiXCIgdG8gbG9jYWwgc3RvcmFnZSBmb3IgY2FjaGluZy4iKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBnZXRDU1M6IGZ1bmN0aW9uIChwYXRoLCB3ZWJJbmZvLCBtb2RpZnlWYXJzKSB7DQogICAgICAgICAgICAgICAgdmFyIGNzcyA9IGNhY2hlICYmIGNhY2hlLmdldEl0ZW0ocGF0aCk7DQogICAgICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IGNhY2hlICYmIGNhY2hlLmdldEl0ZW0ocGF0aCArICI6dGltZXN0YW1wIik7DQogICAgICAgICAgICAgICAgdmFyIHZhcnMgPSBjYWNoZSAmJiBjYWNoZS5nZXRJdGVtKHBhdGggKyAiOnZhcnMiKTsNCiAgICAgICAgICAgICAgICBtb2RpZnlWYXJzID0gbW9kaWZ5VmFycyB8fCB7fTsNCiAgICAgICAgICAgICAgICB2YXJzID0gdmFycyB8fCAie30iOyAvLyBpZiBub3Qgc2V0LCB0cmVhdCBhcyB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhbiBlbXB0eSBvYmplY3QNCiAgICAgICAgICAgICAgICBpZiAodGltZXN0YW1wICYmIHdlYkluZm8ubGFzdE1vZGlmaWVkICYmDQogICAgICAgICAgICAgICAgICAgIChuZXcgRGF0ZSh3ZWJJbmZvLmxhc3RNb2RpZmllZCkudmFsdWVPZigpID09PQ0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUodGltZXN0YW1wKS52YWx1ZU9mKCkpICYmDQogICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KG1vZGlmeVZhcnMpID09PSB2YXJzKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFVzZSBsb2NhbCBjb3B5DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBjc3M7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgIH0pOwoKICAgIHZhciBJbWFnZVNpemUgPSAoZnVuY3Rpb24gKCkgew0KICAgICAgICBmdW5jdGlvbiBpbWFnZVNpemUoKSB7DQogICAgICAgICAgICB0aHJvdyB7DQogICAgICAgICAgICAgICAgdHlwZTogJ1J1bnRpbWUnLA0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbWFnZSBzaXplIGZ1bmN0aW9ucyBhcmUgbm90IHN1cHBvcnRlZCBpbiBicm93c2VyIHZlcnNpb24gb2YgbGVzcycNCiAgICAgICAgICAgIH07DQogICAgICAgIH0NCiAgICAgICAgdmFyIGltYWdlRnVuY3Rpb25zID0gew0KICAgICAgICAgICAgJ2ltYWdlLXNpemUnOiBmdW5jdGlvbiAoZmlsZVBhdGhOb2RlKSB7DQogICAgICAgICAgICAgICAgaW1hZ2VTaXplKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIC0xOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICdpbWFnZS13aWR0aCc6IGZ1bmN0aW9uIChmaWxlUGF0aE5vZGUpIHsNCiAgICAgICAgICAgICAgICBpbWFnZVNpemUoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gLTE7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgJ2ltYWdlLWhlaWdodCc6IGZ1bmN0aW9uIChmaWxlUGF0aE5vZGUpIHsNCiAgICAgICAgICAgICAgICBpbWFnZVNpemUoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gLTE7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIGZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUoaW1hZ2VGdW5jdGlvbnMpOw0KICAgIH0pOwoKICAgIC8vDQogICAgdmFyIHJvb3QgPSAoZnVuY3Rpb24gKHdpbmRvdywgb3B0aW9ucykgew0KICAgICAgICB2YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7DQogICAgICAgIHZhciBsZXNzID0gbGVzc1Jvb3QoKTsNCiAgICAgICAgbGVzcy5vcHRpb25zID0gb3B0aW9uczsNCiAgICAgICAgdmFyIGVudmlyb25tZW50ID0gbGVzcy5lbnZpcm9ubWVudDsNCiAgICAgICAgdmFyIEZpbGVNYW5hZ2VyID0gRk0ob3B0aW9ucywgbGVzcy5sb2dnZXIpOw0KICAgICAgICB2YXIgZmlsZU1hbmFnZXIgPSBuZXcgRmlsZU1hbmFnZXIoKTsNCiAgICAgICAgZW52aXJvbm1lbnQuYWRkRmlsZU1hbmFnZXIoZmlsZU1hbmFnZXIpOw0KICAgICAgICBsZXNzLkZpbGVNYW5hZ2VyID0gRmlsZU1hbmFnZXI7DQogICAgICAgIGxlc3MuUGx1Z2luTG9hZGVyID0gUGx1Z2luTG9hZGVyOw0KICAgICAgICBMb2dMaXN0ZW5lcihsZXNzLCBvcHRpb25zKTsNCiAgICAgICAgdmFyIGVycm9ycyA9IEVycm9yUmVwb3J0aW5nKHdpbmRvdywgbGVzcywgb3B0aW9ucyk7DQogICAgICAgIHZhciBjYWNoZSA9IGxlc3MuY2FjaGUgPSBvcHRpb25zLmNhY2hlIHx8IENhY2hlKHdpbmRvdywgb3B0aW9ucywgbGVzcy5sb2dnZXIpOw0KICAgICAgICBJbWFnZVNpemUobGVzcy5lbnZpcm9ubWVudCk7DQogICAgICAgIC8vIFNldHVwIHVzZXIgZnVuY3Rpb25zIC0gRGVwcmVjYXRlPw0KICAgICAgICBpZiAob3B0aW9ucy5mdW5jdGlvbnMpIHsNCiAgICAgICAgICAgIGxlc3MuZnVuY3Rpb25zLmZ1bmN0aW9uUmVnaXN0cnkuYWRkTXVsdGlwbGUob3B0aW9ucy5mdW5jdGlvbnMpOw0KICAgICAgICB9DQogICAgICAgIHZhciB0eXBlUGF0dGVybiA9IC9edGV4dFwvKHgtKT9sZXNzJC87DQogICAgICAgIGZ1bmN0aW9uIGNsb25lKG9iaikgew0KICAgICAgICAgICAgdmFyIGNsb25lZCA9IHt9Ow0KICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHsNCiAgICAgICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7DQogICAgICAgICAgICAgICAgICAgIGNsb25lZFtwcm9wXSA9IG9ialtwcm9wXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gY2xvbmVkOw0KICAgICAgICB9DQogICAgICAgIC8vIG9ubHkgcmVhbGx5IG5lZWRlZCBmb3IgcGhhbnRvbQ0KICAgICAgICBmdW5jdGlvbiBiaW5kKGZ1bmMsIHRoaXNBcmcpIHsNCiAgICAgICAgICAgIHZhciBjdXJyeUFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpOw0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGN1cnJ5QXJncy5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7DQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGxvYWRTdHlsZXMobW9kaWZ5VmFycykgew0KICAgICAgICAgICAgdmFyIHN0eWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzdHlsZScpOw0KICAgICAgICAgICAgdmFyIHN0eWxlOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBzdHlsZSA9IHN0eWxlc1tpXTsNCiAgICAgICAgICAgICAgICBpZiAoc3R5bGUudHlwZS5tYXRjaCh0eXBlUGF0dGVybikpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlT3B0aW9ucyA9IGNsb25lKG9wdGlvbnMpOw0KICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZU9wdGlvbnMubW9kaWZ5VmFycyA9IG1vZGlmeVZhcnM7DQogICAgICAgICAgICAgICAgICAgIHZhciBsZXNzVGV4dCA9IHN0eWxlLmlubmVySFRNTCB8fCAnJzsNCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VPcHRpb25zLmZpbGVuYW1lID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiokLywgJycpOw0KICAgICAgICAgICAgICAgICAgICAvKiBqc2hpbnQgbG9vcGZ1bmM6dHJ1ZSAqLw0KICAgICAgICAgICAgICAgICAgICAvLyB1c2UgY2xvc3VyZSB0byBzdG9yZSBjdXJyZW50IHN0eWxlDQogICAgICAgICAgICAgICAgICAgIGxlc3MucmVuZGVyKGxlc3NUZXh0LCBpbnN0YW5jZU9wdGlvbnMsIGJpbmQoZnVuY3Rpb24gKHN0eWxlLCBlLCByZXN1bHQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLmFkZChlLCAnaW5saW5lJyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS50eXBlID0gJ3RleHQvY3NzJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGUuc3R5bGVTaGVldCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXN1bHQuY3NzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gcmVzdWx0LmNzczsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sIG51bGwsIHN0eWxlKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGxvYWRTdHlsZVNoZWV0KHNoZWV0LCBjYWxsYmFjaywgcmVsb2FkLCByZW1haW5pbmcsIG1vZGlmeVZhcnMpIHsNCiAgICAgICAgICAgIHZhciBpbnN0YW5jZU9wdGlvbnMgPSBjbG9uZShvcHRpb25zKTsNCiAgICAgICAgICAgIGFkZERhdGFBdHRyKGluc3RhbmNlT3B0aW9ucywgc2hlZXQpOw0KICAgICAgICAgICAgaW5zdGFuY2VPcHRpb25zLm1pbWUgPSBzaGVldC50eXBlOw0KICAgICAgICAgICAgaWYgKG1vZGlmeVZhcnMpIHsNCiAgICAgICAgICAgICAgICBpbnN0YW5jZU9wdGlvbnMubW9kaWZ5VmFycyA9IG1vZGlmeVZhcnM7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBsb2FkSW5pdGlhbEZpbGVDYWxsYmFjayhsb2FkZWRGaWxlKSB7DQogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBsb2FkZWRGaWxlLmNvbnRlbnRzOw0KICAgICAgICAgICAgICAgIHZhciBwYXRoID0gbG9hZGVkRmlsZS5maWxlbmFtZTsNCiAgICAgICAgICAgICAgICB2YXIgd2ViSW5mbyA9IGxvYWRlZEZpbGUud2ViSW5mbzsNCiAgICAgICAgICAgICAgICB2YXIgbmV3RmlsZUluZm8gPSB7DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnREaXJlY3Rvcnk6IGZpbGVNYW5hZ2VyLmdldFBhdGgocGF0aCksDQogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBwYXRoLA0KICAgICAgICAgICAgICAgICAgICByb290RmlsZW5hbWU6IHBhdGgsDQogICAgICAgICAgICAgICAgICAgIHJld3JpdGVVcmxzOiBpbnN0YW5jZU9wdGlvbnMucmV3cml0ZVVybHMNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIG5ld0ZpbGVJbmZvLmVudHJ5UGF0aCA9IG5ld0ZpbGVJbmZvLmN1cnJlbnREaXJlY3Rvcnk7DQogICAgICAgICAgICAgICAgbmV3RmlsZUluZm8ucm9vdHBhdGggPSBpbnN0YW5jZU9wdGlvbnMucm9vdHBhdGggfHwgbmV3RmlsZUluZm8uY3VycmVudERpcmVjdG9yeTsNCiAgICAgICAgICAgICAgICBpZiAod2ViSW5mbykgew0KICAgICAgICAgICAgICAgICAgICB3ZWJJbmZvLnJlbWFpbmluZyA9IHJlbWFpbmluZzsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGNzcyA9IGNhY2hlLmdldENTUyhwYXRoLCB3ZWJJbmZvLCBpbnN0YW5jZU9wdGlvbnMubW9kaWZ5VmFycyk7DQogICAgICAgICAgICAgICAgICAgIGlmICghcmVsb2FkICYmIGNzcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgd2ViSW5mby5sb2NhbCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBjc3MsIGRhdGEsIHNoZWV0LCB3ZWJJbmZvLCBwYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyBUT0RPIGFkZCB0ZXN0cyBhcm91bmQgaG93IHRoaXMgYmVoYXZlcyB3aGVuIHJlbG9hZGluZw0KICAgICAgICAgICAgICAgIGVycm9ycy5yZW1vdmUocGF0aCk7DQogICAgICAgICAgICAgICAgaW5zdGFuY2VPcHRpb25zLnJvb3RGaWxlSW5mbyA9IG5ld0ZpbGVJbmZvOw0KICAgICAgICAgICAgICAgIGxlc3MucmVuZGVyKGRhdGEsIGluc3RhbmNlT3B0aW9ucywgZnVuY3Rpb24gKGUsIHJlc3VsdCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZS5ocmVmID0gcGF0aDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUuc2V0Q1NTKHNoZWV0LmhyZWYsIHdlYkluZm8ubGFzdE1vZGlmaWVkLCBpbnN0YW5jZU9wdGlvbnMubW9kaWZ5VmFycywgcmVzdWx0LmNzcyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHQuY3NzLCBkYXRhLCBzaGVldCwgd2ViSW5mbywgcGF0aCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZpbGVNYW5hZ2VyLmxvYWRGaWxlKHNoZWV0LmhyZWYsIG51bGwsIGluc3RhbmNlT3B0aW9ucywgZW52aXJvbm1lbnQpDQogICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxvYWRlZEZpbGUpIHsNCiAgICAgICAgICAgICAgICBsb2FkSW5pdGlhbEZpbGVDYWxsYmFjayhsb2FkZWRGaWxlKTsNCiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOw0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBsb2FkU3R5bGVTaGVldHMoY2FsbGJhY2ssIHJlbG9hZCwgbW9kaWZ5VmFycykgew0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZXNzLnNoZWV0cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGxvYWRTdHlsZVNoZWV0KGxlc3Muc2hlZXRzW2ldLCBjYWxsYmFjaywgcmVsb2FkLCBsZXNzLnNoZWV0cy5sZW5ndGggLSAoaSArIDEpLCBtb2RpZnlWYXJzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBpbml0UnVubmluZ01vZGUoKSB7DQogICAgICAgICAgICBpZiAobGVzcy5lbnYgPT09ICdkZXZlbG9wbWVudCcpIHsNCiAgICAgICAgICAgICAgICBsZXNzLndhdGNoVGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChsZXNzLndhdGNoTW9kZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU1hbmFnZXIuY2xlYXJGaWxlQ2FjaGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRTdHlsZVNoZWV0cyhmdW5jdGlvbiAoZSwgY3NzLCBfLCBzaGVldCwgd2ViSW5mbykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5hZGQoZSwgZS5ocmVmIHx8IHNoZWV0LmhyZWYpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3Nlci5jcmVhdGVDU1Mod2luZG93LmRvY3VtZW50LCBjc3MsIHNoZWV0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMucG9sbCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8NCiAgICAgICAgLy8gV2F0Y2ggbW9kZQ0KICAgICAgICAvLw0KICAgICAgICBsZXNzLndhdGNoID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKCFsZXNzLndhdGNoTW9kZSkgew0KICAgICAgICAgICAgICAgIGxlc3MuZW52ID0gJ2RldmVsb3BtZW50JzsNCiAgICAgICAgICAgICAgICBpbml0UnVubmluZ01vZGUoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMud2F0Y2hNb2RlID0gdHJ1ZTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9Ow0KICAgICAgICBsZXNzLnVud2F0Y2ggPSBmdW5jdGlvbiAoKSB7IGNsZWFySW50ZXJ2YWwobGVzcy53YXRjaFRpbWVyKTsgdGhpcy53YXRjaE1vZGUgPSBmYWxzZTsgcmV0dXJuIGZhbHNlOyB9Ow0KICAgICAgICAvLw0KICAgICAgICAvLyBTeW5jaHJvbm91c2x5IGdldCBhbGwgPGxpbms+IHRhZ3Mgd2l0aCB0aGUgJ3JlbCcgYXR0cmlidXRlIHNldCB0bw0KICAgICAgICAvLyAic3R5bGVzaGVldC9sZXNzIi4NCiAgICAgICAgLy8NCiAgICAgICAgbGVzcy5yZWdpc3RlclN0eWxlc2hlZXRzSW1tZWRpYXRlbHkgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgbGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbGluaycpOw0KICAgICAgICAgICAgbGVzcy5zaGVldHMgPSBbXTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAobGlua3NbaV0ucmVsID09PSAnc3R5bGVzaGVldC9sZXNzJyB8fCAobGlua3NbaV0ucmVsLm1hdGNoKC9zdHlsZXNoZWV0LykgJiYNCiAgICAgICAgICAgICAgICAgICAgKGxpbmtzW2ldLnR5cGUubWF0Y2godHlwZVBhdHRlcm4pKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgbGVzcy5zaGVldHMucHVzaChsaW5rc1tpXSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICAvLw0KICAgICAgICAvLyBBc3luY2hyb25vdXNseSBnZXQgYWxsIDxsaW5rPiB0YWdzIHdpdGggdGhlICdyZWwnIGF0dHJpYnV0ZSBzZXQgdG8NCiAgICAgICAgLy8gInN0eWxlc2hlZXQvbGVzcyIsIHJldHVybmluZyBhIFByb21pc2UuDQogICAgICAgIC8vDQogICAgICAgIGxlc3MucmVnaXN0ZXJTdHlsZXNoZWV0cyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCiAgICAgICAgICAgIGxlc3MucmVnaXN0ZXJTdHlsZXNoZWV0c0ltbWVkaWF0ZWx5KCk7DQogICAgICAgICAgICByZXNvbHZlKCk7DQogICAgICAgIH0pOyB9Ow0KICAgICAgICAvLw0KICAgICAgICAvLyBXaXRoIHRoaXMgZnVuY3Rpb24sIGl0J3MgcG9zc2libGUgdG8gYWx0ZXIgdmFyaWFibGVzIGFuZCByZS1yZW5kZXINCiAgICAgICAgLy8gQ1NTIHdpdGhvdXQgcmVsb2FkaW5nIGxlc3MtZmlsZXMNCiAgICAgICAgLy8NCiAgICAgICAgbGVzcy5tb2RpZnlWYXJzID0gZnVuY3Rpb24gKHJlY29yZCkgeyByZXR1cm4gbGVzcy5yZWZyZXNoKHRydWUsIHJlY29yZCwgZmFsc2UpOyB9Ow0KICAgICAgICBsZXNzLnJlZnJlc2ggPSBmdW5jdGlvbiAocmVsb2FkLCBtb2RpZnlWYXJzLCBjbGVhckZpbGVDYWNoZSkgew0KICAgICAgICAgICAgaWYgKChyZWxvYWQgfHwgY2xlYXJGaWxlQ2FjaGUpICYmIGNsZWFyRmlsZUNhY2hlICE9PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgIGZpbGVNYW5hZ2VyLmNsZWFyRmlsZUNhY2hlKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgew0KICAgICAgICAgICAgICAgIHZhciBzdGFydFRpbWU7DQogICAgICAgICAgICAgICAgdmFyIGVuZFRpbWU7DQogICAgICAgICAgICAgICAgdmFyIHRvdGFsTWlsbGlzZWNvbmRzOw0KICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmdTaGVldHM7DQogICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gZW5kVGltZSA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgLy8gU2V0IGNvdW50ZXIgZm9yIHJlbWFpbmluZyB1bnByb2Nlc3NlZCBzaGVldHMNCiAgICAgICAgICAgICAgICByZW1haW5pbmdTaGVldHMgPSBsZXNzLnNoZWV0cy5sZW5ndGg7DQogICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ1NoZWV0cyA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBlbmRUaW1lID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxNaWxsaXNlY29uZHMgPSBlbmRUaW1lIC0gc3RhcnRUaW1lOw0KICAgICAgICAgICAgICAgICAgICBsZXNzLmxvZ2dlci5pbmZvKCdMZXNzIGhhcyBmaW5pc2hlZCBhbmQgbm8gc2hlZXRzIHdlcmUgbG9hZGVkLicpOw0KICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kVGltZTogZW5kVGltZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsTWlsbGlzZWNvbmRzOiB0b3RhbE1pbGxpc2Vjb25kcywNCiAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0czogbGVzcy5zaGVldHMubGVuZ3RoDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gUmVsaWVzIG9uIGxlc3Muc2hlZXRzIGFycmF5LCBjYWxsYmFjayBzZWVtcyB0byBiZSBndWFyYW50ZWVkIHRvIGJlIGNhbGxlZCBmb3IgZXZlcnkgZWxlbWVudCBvZiB0aGUgYXJyYXkNCiAgICAgICAgICAgICAgICAgICAgbG9hZFN0eWxlU2hlZXRzKGZ1bmN0aW9uIChlLCBjc3MsIF8sIHNoZWV0LCB3ZWJJbmZvKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5hZGQoZSwgZS5ocmVmIHx8IHNoZWV0LmhyZWYpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAod2ViSW5mby5sb2NhbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlc3MubG9nZ2VyLmluZm8oIkxvYWRpbmcgIiArIHNoZWV0LmhyZWYgKyAiIGZyb20gY2FjaGUuIik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXNzLmxvZ2dlci5pbmZvKCJSZW5kZXJlZCAiICsgc2hlZXQuaHJlZiArICIgc3VjY2Vzc2Z1bGx5LiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3Nlci5jcmVhdGVDU1Mod2luZG93LmRvY3VtZW50LCBjc3MsIHNoZWV0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxlc3MubG9nZ2VyLmluZm8oIkNTUyBmb3IgIiArIHNoZWV0LmhyZWYgKyAiIGdlbmVyYXRlZCBpbiAiICsgKG5ldyBEYXRlKCkgLSBlbmRUaW1lKSArICJtcyIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ291bnQgY29tcGxldGVkIHNoZWV0DQogICAgICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdTaGVldHMtLTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBsYXN0IHJlbWFpbmluZyBzaGVldCB3YXMgcHJvY2Vzc2VkIGFuZCB0aGVuIGNhbGwgdGhlIHByb21pc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmdTaGVldHMgPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbE1pbGxpc2Vjb25kcyA9IG5ldyBEYXRlKCkgLSBzdGFydFRpbWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVzcy5sb2dnZXIuaW5mbygiTGVzcyBoYXMgZmluaXNoZWQuIENTUyBnZW5lcmF0ZWQgaW4gIiArIHRvdGFsTWlsbGlzZWNvbmRzICsgIm1zIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lOiBlbmRUaW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbE1pbGxpc2Vjb25kczogdG90YWxNaWxsaXNlY29uZHMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0czogbGVzcy5zaGVldHMubGVuZ3RoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgfSwgcmVsb2FkLCBtb2RpZnlWYXJzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgbG9hZFN0eWxlcyhtb2RpZnlWYXJzKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9Ow0KICAgICAgICBsZXNzLnJlZnJlc2hTdHlsZXMgPSBsb2FkU3R5bGVzOw0KICAgICAgICByZXR1cm4gbGVzczsNCiAgICB9KTsKCiAgICAvKioNCiAgICAgKiBLaWNrcyBvZmYgbGVzcyBhbmQgY29tcGlsZXMgYW55IHN0eWxlc2hlZXRzDQogICAgICogdXNlZCBpbiB0aGUgYnJvd3NlciBkaXN0cmlidXRlZCB2ZXJzaW9uIG9mIGxlc3MNCiAgICAgKiB0byBraWNrLXN0YXJ0IGxlc3MgdXNpbmcgdGhlIGJyb3dzZXIgYXBpDQogICAgICovDQogICAgdmFyIG9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucygpOw0KICAgIGlmICh3aW5kb3cubGVzcykgew0KICAgICAgICBmb3IgKHZhciBrZXkgaW4gd2luZG93Lmxlc3MpIHsNCiAgICAgICAgICAgIGlmICh3aW5kb3cubGVzcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7DQogICAgICAgICAgICAgICAgb3B0aW9uc1trZXldID0gd2luZG93Lmxlc3Nba2V5XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBhZGREZWZhdWx0T3B0aW9ucyh3aW5kb3csIG9wdGlvbnMpOw0KICAgIG9wdGlvbnMucGx1Z2lucyA9IG9wdGlvbnMucGx1Z2lucyB8fCBbXTsNCiAgICBpZiAod2luZG93LkxFU1NfUExVR0lOUykgew0KICAgICAgICBvcHRpb25zLnBsdWdpbnMgPSBvcHRpb25zLnBsdWdpbnMuY29uY2F0KHdpbmRvdy5MRVNTX1BMVUdJTlMpOw0KICAgIH0NCiAgICB2YXIgbGVzcyA9IHJvb3Qod2luZG93LCBvcHRpb25zKTsNCiAgICB3aW5kb3cubGVzcyA9IGxlc3M7DQogICAgdmFyIGNzczsNCiAgICB2YXIgaGVhZDsNCiAgICB2YXIgc3R5bGU7DQogICAgLy8gQWx3YXlzIHJlc3RvcmUgcGFnZSB2aXNpYmlsaXR5DQogICAgZnVuY3Rpb24gcmVzb2x2ZU9yUmVqZWN0KGRhdGEpIHsNCiAgICAgICAgaWYgKGRhdGEuZmlsZW5hbWUpIHsNCiAgICAgICAgICAgIGNvbnNvbGUud2FybihkYXRhKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIW9wdGlvbnMuYXN5bmMpIHsNCiAgICAgICAgICAgIGhlYWQucmVtb3ZlQ2hpbGQoc3R5bGUpOw0KICAgICAgICB9DQogICAgfQ0KICAgIGlmIChvcHRpb25zLm9uUmVhZHkpIHsNCiAgICAgICAgaWYgKC8hd2F0Y2gvLnRlc3Qod2luZG93LmxvY2F0aW9uLmhhc2gpKSB7DQogICAgICAgICAgICBsZXNzLndhdGNoKCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gU2ltdWxhdGUgc3luY2hyb25vdXMgc3R5bGVzaGVldCBsb2FkaW5nIGJ5IGhpZGluZyBwYWdlIHJlbmRlcmluZw0KICAgICAgICBpZiAoIW9wdGlvbnMuYXN5bmMpIHsNCiAgICAgICAgICAgIGNzcyA9ICdib2R5IHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50IH0nOw0KICAgICAgICAgICAgaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTsNCiAgICAgICAgICAgIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsNCiAgICAgICAgICAgIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnOw0KICAgICAgICAgICAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHsNCiAgICAgICAgICAgICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOw0KICAgICAgICB9DQogICAgICAgIGxlc3MucmVnaXN0ZXJTdHlsZXNoZWV0c0ltbWVkaWF0ZWx5KCk7DQogICAgICAgIGxlc3MucGFnZUxvYWRGaW5pc2hlZCA9IGxlc3MucmVmcmVzaChsZXNzLmVudiA9PT0gJ2RldmVsb3BtZW50JykudGhlbihyZXNvbHZlT3JSZWplY3QsIHJlc29sdmVPclJlamVjdCk7DQogICAgfQoKICAgIHJldHVybiBsZXNzOwoKfSkpKTsK"}]}]}